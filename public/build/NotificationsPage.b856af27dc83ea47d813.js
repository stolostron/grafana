"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4140],{78015:(J,I,t)=>{t.r(I),t.d(I,{NotificationsPage:()=>R,default:()=>w});var n=t(96540),T=t(67608),d=t(32196),A=t(94701),M=t(40845),Y=t(69529),z=t(42418),X=t(10880),F=t(55852),Z=t(30284),P=t(25733),p=t(2940),$=t(90397),j=t(43924),N=t(2642),H=t(96519),G=t(82695),C=t(40215);function K(s,l,r){const u=(0,G.q)(),o=r?.locale??u.locale??H.c,x=2520,c=(0,P.z)(s,l);if(isNaN(c))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:c});let f,m;c>0?(f=(0,N.a)(l),m=(0,N.a)(s)):(f=(0,N.a)(s),m=(0,N.a)(l));const e=(0,j.O)(m,f),h=((0,C.G)(m)-(0,C.G)(f))/1e3,i=Math.round((e-h)/60);let v;if(i<2)return r?.includeSeconds?e<5?o.formatDistance("lessThanXSeconds",5,a):e<10?o.formatDistance("lessThanXSeconds",10,a):e<20?o.formatDistance("lessThanXSeconds",20,a):e<40?o.formatDistance("halfAMinute",0,a):e<60?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",1,a):i===0?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",i,a);if(i<45)return o.formatDistance("xMinutes",i,a);if(i<90)return o.formatDistance("aboutXHours",1,a);if(i<p.F6){const g=Math.round(i/60);return o.formatDistance("aboutXHours",g,a)}else{if(i<x)return o.formatDistance("xDays",1,a);if(i<p.Nw){const g=Math.round(i/p.F6);return o.formatDistance("xDays",g,a)}else if(i<p.Nw*2)return v=Math.round(i/p.Nw),o.formatDistance("aboutXMonths",v,a)}if(v=(0,$.W)(m,f),v<12){const g=Math.round(i/p.Nw);return o.formatDistance("xMonths",g,a)}else{const g=v%12,E=Math.trunc(v/12);return g<3?o.formatDistance("aboutXYears",E,a):g<9?o.formatDistance("overXYears",E,a):o.formatDistance("almostXYears",E+1,a)}}const Q=null;function W(s,l){return K(s,(0,Z.A)(s),l)}const b=null;var D=t(10860);const B=({children:s,className:l,isSelected:r,onClick:u,severity:o="error",title:x,traceId:c,timestamp:a})=>{const f=(0,M.$j)(),m=L(f);return n.createElement(D.Z,{className:l,onClick:u},n.createElement(D.Z.Heading,null,x),n.createElement(D.Z.Description,null,s),n.createElement(D.Z.Figure,null,n.createElement(X.S,{onChange:u,tabIndex:-1,value:r})),n.createElement(D.Z.Tags,{className:m.trace},c&&n.createElement("span",null,`Trace ID: ${c}`),a&&W(a,{addSuffix:!0})))},L=s=>({trace:(0,d.css)({alignItems:"flex-end",alignSelf:"flex-end",color:s.colors.text.secondary,display:"flex",flexDirection:"column",fontSize:s.typography.pxToRem(10),justifySelf:"flex-end"})});var O=t(8484),y=t(16001),S=t(31678);function U(){const s=(0,S.useDispatch)(),l=(0,S.useSelector)(e=>(0,y.qN)(e.appNotifications)),[r,u]=(0,n.useState)([]),o=l.every(e=>r.includes(e.id)),x=(0,n.useRef)((0,S.useSelector)(e=>(0,y.$K)(e.appNotifications))),c=(0,M.of)(V);(0,A.A)(()=>{s((0,y.oF)(Date.now()))});const a=()=>{o?s((0,y.XC)()):r.forEach(e=>{s((0,y.XR)(e))}),u([])},f=e=>{u(e?l.map(h=>h.id):[])},m=e=>{u(h=>h.includes(e)?h.filter(i=>i!==e):[...h,e])};return l.length===0?n.createElement(Y.p,{variant:"completed",message:(0,O.t)("notifications.empty-state.title","You're all caught up!")},n.createElement(O.x6,{i18nKey:"notifications.empty-state.description"},"Notifications you have received will appear here")):n.createElement("div",{className:c.wrapper},n.createElement(z.F,{severity:"info",title:"This page displays past errors and warnings. Once dismissed, they cannot be retrieved."}),n.createElement("div",{className:c.topRow},n.createElement(X.S,{value:o,onChange:e=>f(e.target.checked)}),n.createElement(F.$n,{disabled:r.length===0,onClick:a},"Dismiss notifications")),n.createElement("ul",{className:c.list},l.map(e=>n.createElement("li",{key:e.id,className:c.listItem},n.createElement(B,{className:(0,d.cx)({[c.newItem]:e.timestamp>x.current}),isSelected:r.includes(e.id),onClick:()=>m(e.id),severity:e.severity,title:e.title,timestamp:e.timestamp,traceId:e.traceId},n.createElement("span",null,e.text))))))}function V(s){return{topRow:(0,d.css)({alignItems:"center",display:"flex",gap:s.spacing(2)}),list:(0,d.css)({display:"flex",flexDirection:"column"}),listItem:(0,d.css)({alignItems:"center",display:"flex",gap:s.spacing(2),listStyle:"none",position:"relative"}),newItem:(0,d.css)({"&::before":{content:'""',height:"100%",position:"absolute",left:"-7px",top:0,background:s.colors.gradients.brandVertical,width:s.spacing(.5),borderRadius:s.shape.radius.default}}),noNotifsWrapper:(0,d.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:s.spacing(1)}),wrapper:(0,d.css)({display:"flex",flexDirection:"column",gap:s.spacing(2)})}}const R=()=>n.createElement(T.Y,{navId:"profile/notifications"},n.createElement(T.Y.Contents,null,n.createElement(U,null))),w=R}}]);

//# sourceMappingURL=NotificationsPage.b856af27dc83ea47d813.js.map