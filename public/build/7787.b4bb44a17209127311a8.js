(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7787],{56315:(Q,A,e)=>{"use strict";e.d(A,{n:()=>i});var n=e(31733),a=e(95825);function i(r){const{children:o,instanceSettings:g}=r,u=(0,n.useMemo)(()=>({instanceSettings:g,meta:g.meta}),[g]);return n.createElement(a._.Provider,{value:u},o)}},95825:(Q,A,e)=>{"use strict";e.d(A,{_:()=>a});var n=e(31733);const a=(0,n.createContext)(void 0)},35210:(Q,A,e)=>{"use strict";e.d(A,{b:()=>i});var n=e(31733),a=e(95825);function i(r){const{children:o,...g}=r;return n.createElement(a._.Provider,{value:g},o)}},8829:(Q,A,e)=>{"use strict";e.d(A,{v:()=>n});function n(a){return"instanceSettings"in a&&"meta"in a}},18286:(Q,A,e)=>{"use strict";e.d(A,{gp:()=>i});var n=e(31733),a=e(95825);function i(){const u=(0,n.useContext)(a._);if(!u)throw new Error("usePluginContext must be used within a PluginContextProvider");return u}function r(){return i().meta}function o(){return i().meta.jsonData}function g(){return i().meta.info.version}},47206:(Q,A,e)=>{"use strict";e.d(A,{P:()=>r,i:()=>i});var n=e(85666),a=e(98147);class i{constructor(u,c){return this.fields=[],this.length=0,r(u,c)}}function r(g,u){const c={fields:[],length:g.length};if(!g?.length)return c;if(u){for(const d of u)c.fields.push(o(d,g.map(f=>f[d])));return c}const l=g.find(d=>d!=null);return l!=null&&(typeof l=="object"?c.fields=Object.keys(l).map(d=>o(d,g.map(f=>f[d]))):c.fields.push(o(n.M5,g))),c}function o(g,u){const c={name:g,config:{},values:u,type:n.fS.other};return c.type=(0,a.fu)(c)??n.fS.other,c}},24759:(Q,A,e)=>{"use strict";e.d(A,{a:()=>i});var n=e(58707),a=e(47862);class i extends a.v{constructor(o){super(void 0,g=>new n.d({...o,buffer:g}))}}},20498:(Q,A,e)=>{"use strict";e.d(A,{Ib:()=>o,Jy:()=>r,Y:()=>c,vP:()=>u});var n=e(85666),a=e(98147);const i={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function r(l,d){for(const f in l){const m=i[f];for(const v of l[f])v<d.length&&(d[v]=m)}}function o(l,d){for(let f=0;f<d.length;f++)d[f]=l[Number(d[f])]}function g(l,d){for(const f of d)if(f!=null)return(0,a._m)(l,f);return n.fS.other}function u(l){const{schema:d,data:f}=l;if(!d||!d.fields)throw new Error("JSON needs a fields definition");const m=f?f.values.reduce((E,p)=>Math.max(E,p.length),0):0,v=d.fields.map((E,p)=>{let h=f?f.values[p]:[],s=h.length,y=E.type;s!==m&&(h.length=m,h.fill(void 0,s));let D=f?.entities?.[p];D&&r(D,h);let C=f?.enums?.[p];C&&(o(C,h),y=n.fS.string);const P=f?.nanos?.[p],b={...E,type:y??g(E.name,h),config:E.config??{},values:h,entities:D??{}};return P!=null&&(b.nanos=P),b});return{...d,fields:v,length:m}}function c(l){const d={values:[]},f=[];let m=!1;const v={refId:l.refId,meta:l.meta,name:l.name,fields:l.fields.map(E=>{const{values:p,nanos:h,state:s,display:y,...D}=E;return"entities"in D&&delete D.entities,d.values.push(p),h!=null?(f.push(h),m=!0):f.push(null),D})};return m&&(d.nanos=f),{schema:v,data:d}}},46901:(Q,A,e)=>{"use strict";e.d(A,{U:()=>a});var n=e(49114);class a extends n.G{constructor(r){super(),this.data=r,this.index=0;const o={},g={};for(let u=0;u<r.fields.length;u++){const c=r.fields[u];if(!c.name)continue;g[c.name]=c;const l=()=>c.values.get(this.index);o.hasOwnProperty(c.name)||Object.defineProperty(o,c.name,{enumerable:!0,get:l}),o.hasOwnProperty(u.toString())||Object.defineProperty(o,u,{enumerable:!1,get:l})}this.obj=o,this.fields=g}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(r){if(!this.dataFrame||!this.dataFrame.fields)return;const o=this.dataFrame.fields[r];if(!(!o||!o.display))return o.display}get(r){return this.index=r,this.obj}toArray(){return new Array(this.data.length).fill(0).map((r,o)=>({...this.get(o)}))}}},47023:(Q,A,e)=>{"use strict";e.d(A,{N:()=>i});var n=e(85666),a=e(98147);class i{constructor(o){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=o.fields.map((g,u)=>({...g,index:u}));for(let g=0;g<o.fields.length;g++){const u=o.fields[g];if(u.type===n.fS.other){const c=(0,a.fu)(u);c&&(u.type=c)}this.fieldByType[u.type]||(this.fieldByType[u.type]=[]),this.fieldByType[u.type].push({...u,index:g}),this.fieldByName[u.name]?console.warn("Duplicate field names in DataFrame: ",u.name):this.fieldByName[u.name]={...u,index:g}}}getFields(o){if(!o)return[...this.fields];const g=this.fieldByType[o];return g?[...g]:[]}hasFieldOfType(o){const g=this.fieldByType[o];return g&&g.length>0}getFirstFieldOfType(o,g=!1){return this.fieldByType[o]?.find(l=>g||!l.config.custom?.hidden)}hasFieldNamed(o){return!!this.fieldByName[o]}hasFieldWithNameAndType(o,g){return!!this.fieldByName[o]&&this.fieldByType[g].filter(u=>u.name===o).length>0}getFieldByName(o){return this.fieldByName[o]}getFieldsByLabel(o,g){return Object.values(this.fieldByName).filter(u=>u.labels&&u.labels[o]===g)}}},47862:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>g,v:()=>u});var n=e(69781),a=e(85666),i=e(98147);function r(c,l){return l.type||(l.name==="time"||l.name==="Time"?l.type=a.fS.time:l.type=(0,i.LI)(c)),l.type===a.fS.number?d=>parseFloat(d):l.type===a.fS.boolean?d=>!(d[0]==="F"||d[0]==="f"||d[0]==="0"):d=>d}var o=e(49114);const g=void 0;class u extends o.G{constructor(l,d){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=d||(f=>f??[]),l){const{name:f,refId:m,meta:v,fields:E}=l;if(f&&(this.name=f),m&&(this.refId=m),v&&(this.meta=v),E)for(const p of E)this.addField(p)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(l,d){return this.addField({name:d||"",type:(0,i.LI)(l)})}addField(l,d){let f;l.values&&(f=l.values);let m=l.type;!m&&(l.name==="time"||l.name==="Time")?m=a.fS.time:(!m&&f&&f.length&&(m=(0,i.LI)(f[0])),m||(m=a.fS.other));let v=l.name;v||(v=`Field ${this.fields.length+1}`);const E={...l,name:v,type:m,config:l.config||{},values:this.creator(f)};if(m===a.fS.other&&(m=(0,i.fu)(E),m&&(E.type=m)),this.fields.push(E),this.first=this.fields[0].values,d)for(;E.values.length<d;)E.values.push(g);else this.validate();return E}validate(){const l=this.fields.reduce((d,f)=>Math.max(d,f.values.length),0);for(const d of this.fields)for(;d.values.length!==l;)d.values.push(g)}setParser(l,d){return this.parsers||(this.parsers=new Map),this.parsers.set(l,d),d}parseValue(l,d){let f=this.parsers?.get(l);return f||(f=this.setParser(l,r(d,l))),f(d)}appendRow(l){for(let d=this.fields.length;d<l.length;d++)this.addField({name:`Field ${d+1}`,type:(0,i.LI)(l[d])});if(this.length<1)for(let d=0;d<this.fields.length;d++){const f=this.fields[d];(!f.type||f.type===a.fS.other)&&(f.type=(0,i.LI)(l[d]))}for(let d=0;d<this.fields.length;d++){const f=this.fields[d];let m=l[d];f.type!==a.fS.string&&(0,n.isString)(m)&&(m=this.parseValue(f,m)),f.values.push(m)}}push(...l){for(const d of l)this.add(d);return this.length}reverse(){for(const l of this.fields)l.values.reverse();return this}add(l){const d=l;for(const f of this.fields){let m=d[f.name];f.type!==a.fS.string&&(0,n.isString)(m)&&(m=this.parseValue(f,m)),m===void 0&&(m=g),f.values.push(m)}}set(l,d){if(l>this.length)throw new Error("Unable to set value beyond current length");const f=d||{};for(const m of this.fields)m.values[l]=f[m.name]}get(l){const d={};for(const f of this.fields)d[f.name]=f.values[l];return d}toJSON(){return(0,i.og)(this)}}},55739:(Q,A,e)=>{"use strict";e.d(A,{Av:()=>f,Ko:()=>E,MB:()=>h,T0:()=>u,_A:()=>m});var n=e(85666),a=e(84479),i=e(96609),r=e(78601),o=e(98147),g=e(20498),u=(P=>(P.Append="append",P.Replace="replace",P))(u||{});const c="__name__";var l=(P=>(P[P.wide=0]="wide",P[P.labels=1]="labels",P))(l||{});const d=class{constructor(P){this.options=P,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(b,T,O)=>{const R=T?Object.assign({},{...this.options,...T}):this.options,I=(0,o.Aw)(this,b),M=D(I.fields.map(L=>L.values),typeof O?.maxLength=="number"?Math.min(O.maxLength,R.maxLength):R.maxLength,this.timeFieldIndex,R.maxDelta);I.fields=I.fields.map(L=>({...L,values:L.values?.slice(M)}));const x=I.fields[0]?.values?.length??0;return{...I,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:x,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:R}},this.initFromSerialized=b=>{this.name=b.name,this.refId=b.refId,this.meta=b.meta,this.length=b.length,this.labels=b.labels,this.schemaFields=b.schemaFields,this.timeFieldIndex=b.timeFieldIndex,this.pushMode=b.pushMode,this.packetInfo.length=b.packetInfo.length,this.packetInfo.number=b.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=b.fields.map(T=>({...T,type:T.type??n.fS.other,config:T.config??{},values:T.values??[]})),y(this.fields.map(T=>T.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:b,maxDelta:T})=>{const O=b&&this.options.maxLength<b,R=T&&this.options.maxDelta<T,I=T&&this.options.maxDelta===1/0;return!!(O||R||I)},this.resize=({maxLength:b,maxDelta:T})=>{T&&(this.options.maxDelta===1/0?this.options.maxDelta=T:this.options.maxDelta=Math.max(T,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,b??0)},this.pushNewValues=b=>{if(!b?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=b[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?s(this.fields.map(O=>O.values),b,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(b.forEach((O,R)=>{this.fields[R]&&(this.fields[R].values=O)}),y(this.fields.map(O=>O.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const T=this.fields?.[0]?.values.length;T!==void 0&&(this.length=T)},this.resetStateCalculations=()=>{this.fields.forEach(b=>{b.state={...b.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=b=>this.fields.map((T,O)=>b(T)?O:void 0).filter(T=>T!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(b=>{const T=b.values;return T.slice(Math.max(T.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action==="replace"}push(P){const{schema:b,data:T}=P;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,b){this.pushMode=0,this.timeFieldIndex=b.fields.findIndex(M=>M.type===n.fS.time);const O=b.fields[0];this.timeFieldIndex===1&&O.type===n.fS.string&&(O.name==="labels"||O.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const R=this.pushMode===1?b.fields.slice(1):b.fields;this.refId=b.refId,b.meta&&(this.meta={...b.meta});const{displayNameFormat:I}=this.options;if(C(this.schemaFields,R)){const M=R.length;this.fields.forEach((x,L)=>{const S=R[L%M];x.config=S.config??{},x.labels=S.labels}),I&&this.fields.forEach(x=>{const L={[c]:x.name,...x.labels};x.config.displayNameFromDS=(0,r.W)(I,L)})}else{this.packetInfo.schemaChanged=!0;const M=this.pushMode===0;this.fields=R.map(x=>{const L=x.config??{};if(I){const S={[c]:x.name,...x.labels};L.displayNameFromDS=(0,r.W)(I,S)}return{config:L,name:x.name,labels:x.labels,type:x.type??n.fS.other,values:M?this.fields.find(S=>S.name===x.name&&x.type===S.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=R}if(T&&T.values.length&&T.values[0].length){let{values:O,entities:R}=T;if(R&&R.forEach((M,x)=>{M&&(0,g.Jy)(M,O[x])}),this.pushMode===1){const M=v(O);for(const S of M.keys())this.labels.has(S)||(this.packetInfo.schemaChanged=!0,this.addLabel(S));let x=Array(this.schemaFields.length).fill([]),L=[];this.labels.forEach(S=>{L.push(M.get(S)??x)}),O=(0,i.v_)(L)}if(O.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${O.length} (labels=${this.pushMode===1})`);this.fields=O.map((M,x)=>{let L=`Field ${x}`,S=(0,o.LI)(M[0]);return x===0&&S===n.fS.number&&M[0]>1600016688632&&(S=n.fS.time,L="Time"),{name:L,type:S,config:{},values:[]}})}let I=O;this.packetInfo.length=O[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",I=this.fields.map(M=>M.values),s(I,O,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),I.forEach((M,x)=>{const L=this.fields[x],{state:S}=L;L.values=M,S&&(S.calcs=void 0)}),this.length=I[0].length}return{...this.packetInfo}}addLabel(P){const{displayNameFormat:b}=this.options,T=this.labels.size,O=p(P);if(T===0)this.fields.forEach((R,I)=>{if(I>0&&(R.labels=O,b)){const M={[c]:R.name,...O};R.config.displayNameFromDS=(0,r.W)(b,M)}});else for(let R=1;R<this.schemaFields.length;R++){let I=this.schemaFields[R];const M=I.config??{};if(b){const x={[c]:I.name,...O};M.displayNameFromDS=(0,r.W)(b,x)}this.fields.push({...I,config:M,labels:O,values:Array(this.length).fill(void 0)})}this.labels.add(P)}};let f=d;f.deserialize=P=>{const b=new d(P.options);return b.initFromSerialized(P),b},f.empty=P=>new d(m(P)),f.fromDataFrameJSON=(P,b)=>{const T=new d(m(b));return T.push(P),T};function m(P){return{maxLength:P?.maxLength??1e3,maxDelta:P?.maxDelta??1/0,action:P?.action??"append",displayNameFormat:P?.displayNameFormat}}function v(P){let b=new Set(P[0]),T=new Map;b.forEach(O=>{let R=Array(P.length-1).fill(null).map(()=>[]);T.set(O,R)});for(let O=0;O<P[0].length;O++){let R=T.get(P[0][O]);for(let I=1;I<P.length;I++)R[I-1].push(P[I][O])}return T}function E(P,b,T,O){let R;T=T||0,O=O||b.length-1;let I=O<=2147483647;for(;O-T>1;)R=I?T+O>>1:Math.floor((T+O)/2),b[R]<P?T=R:O=R;return P-b[T]<=b[O]-P?T:O}function p(P){if(!P.length)return{};if(P.charAt(0)==="{")return(0,a.J8)(P);const b={};return P.split(",").forEach(T=>{const[O,R]=T.trim().split("=");b[O]=R}),b}function h(P){const b=P.packetInfo;return b?.action?b:void 0}function s(P,b,T=1/0,O=0,R=1/0){for(let I=0;I<P.length;I++)for(let M=0;M<b[I].length;M++)P[I].push(b[I][M]);return y(P,T,O,R)}function y(P,b=1/0,T=0,O=1/0){const R=D(P,b,T,O);if(R)for(let I=0;I<P.length;I++)P[I].splice(0,R);return R}function D(P,b=1/0,T=0,O=1/0){if(!P[0]?.length)return 0;const R=P[0].length;let I=0;if(R>b&&(I=R-b),O!==1/0&&T>=0){const M=P[T],x=M[I],L=M[R-1];L-x>O&&(I=E(L-O,M,I))}return I}function C(P,b){if(P?.length!==b.length)return!1;for(let T=0;T<P.length;T++){const O=P[T],R=b[T];if(O.name!==R.name||O.type!==R.type)return!1}return!0}},42684:(Q,A,e)=>{"use strict";e.d(A,{$q:()=>i,GV:()=>a,YP:()=>g,jC:()=>r,q2:()=>n,r7:()=>o});const n=(u,c)=>({name:u,columns:c}),a=u=>u.columns,i=(u,c)=>u.columns[c],r=(u,c,l)=>u.columns[c].values[l],o=(u,c,l)=>u.columns.map(d=>d.values[l]),g=(u,c)=>u[c]},82401:(Q,A,e)=>{"use strict";e.d(A,{Ch:()=>i,Vv:()=>g,nl:()=>r});var n=e(69781),a=e.n(n);function i(u,c,l){if(u===c)return!0;if(u?.fields?.length!==c?.fields?.length||u.name!==c.name)return!1;for(let d=0;d<u.fields.length;d++){const f=u.fields[d],m=c.fields[d];if(f.type!==m.type||f.name!==m.name)return!1;if(l)continue;if(f.labels&&m.labels&&!g(f.labels,m.labels))return!1;const v=f.config,E=m.config;let p=Object.keys(v),h=Object.keys(E);if(p.length!==h.length)return!1;for(const s of p){if(!(s in E))return!1;if(s!=="interval"&&!(0,n.isEqual)(v[s],E[s]))return!1}}return!0}function r(u,c,l){if(u===c)return!0;if(u?.length!==c?.length)return!1;for(let d=0;d<u.length;d++)if(!l(u[d],c[d]))return!1;return!0}const o=(u,c)=>u===c;function g(u,c,l=o){if(u===c)return!0;const d=Object.keys(u),f=Object.keys(c);if(d.length!==f.length)return!1;for(let m of d)if(!l(u[m],c[m]))return!1;return!0}},15243:(Q,A,e)=>{"use strict";e.d(A,{$q:()=>g.$q,Av:()=>f.Av,Aw:()=>o.Aw,Ch:()=>l.Ch,DP:()=>o.DP,F9:()=>o.F9,GV:()=>g.GV,Ib:()=>c.Ib,Ji:()=>o.Ji,Jy:()=>c.Jy,Ko:()=>f.Ko,LI:()=>o.LI,N:()=>a.N,Pc:()=>u.P,SX:()=>o.SX,T0:()=>f.T0,US:()=>n.U,Vv:()=>l.Vv,Y:()=>c.Y,Y6:()=>o.Y6,YP:()=>g.YP,Yi:()=>r.Y,Zr:()=>o.Zr,_m:()=>o._m,a2:()=>i.a,aK:()=>o.aK,aY:()=>o.aY,at:()=>o.at,fh:()=>o.fh,fu:()=>o.fu,g0:()=>o.g0,iB:()=>u.i,jC:()=>g.jC,jM:()=>d.jM,jT:()=>d.jT,m$:()=>d.m$,nl:()=>l.nl,og:()=>o.og,pP:()=>d.pP,q2:()=>g.q2,r7:()=>g.r7,sV:()=>o.sV,vA:()=>r.v,vP:()=>c.vP,xI:()=>d.xI,z4:()=>o.z4,zR:()=>o.zR});var n=e(46901),a=e(47023),i=e(24759),r=e(47862),o=e(98147),g=e(42684),u=e(47206),c=e(20498),l=e(82401),d=e(23498),f=e(55739)},98147:(Q,A,e)=>{"use strict";e.d(A,{Aw:()=>L,DP:()=>h,F9:()=>N,Ji:()=>C,LI:()=>s,SX:()=>D,Y6:()=>I,Zr:()=>O,_m:()=>p,aK:()=>R,aY:()=>P,at:()=>G,fh:()=>M,fu:()=>y,g0:()=>T,og:()=>x,sV:()=>S,z4:()=>b,zR:()=>w});var n=e(69781),a=e.n(n),i=e(74011),r=e(267),o=e(27957),g=e(85666),u=e(20298),c=e(47206),l=e(20498);function d(_){const K=_.columns.map(k=>{const{text:z,type:W,...Z}=k,H=[];return{name:z?.length?z:k,config:Z||{},values:H,type:W&&Object.values(g.fS).includes(W)?W:g.fS.other}});if(!(0,n.isArray)(_.rows))throw new Error(`Expected table rows to be array, got ${typeof _.rows}.`);for(const k of _.rows)for(let z=0;z<K.length;z++)K[z].values.push(k[z]);for(const k of K)if(k.type===g.fS.other){const z=y(k);z&&(k.type=z)}return{fields:K,refId:_.refId,meta:_.meta,name:_.name,length:_.rows.length}}function f(_){const K=[],k=[],z=_.datapoints||_.points;for(const Z of z)k.push(Z[0]),K.push(Z[1]);const W=[{name:g.Ls,type:g.fS.time,config:{},values:K},{name:g.M5,type:g.fS.number,config:{unit:_.unit},values:k,labels:_.tags}];return _.title&&(W[1].config.displayNameFromDS=_.title),{name:_.target||_.name,refId:_.refId,meta:_.meta,fields:W,length:k.length}}function m(_){const K=[],k=[];for(let z=0;z<_.data.length;z++){const W=_.data[z];K.push(W[1]),k.push(W[0])}return{name:_.label,fields:[{name:_.label||g.M5,type:g.fS.number,config:{},values:K},{name:g.Ls,type:g.fS.time,config:{unit:"dateTimeAsIso"},values:k}],length:K.length}}function v(_){const K=[{name:_.target,type:g.fS.other,labels:_.tags,config:{unit:_.unit,filterable:_.filterable},values:[]}];for(const k of _.datapoints)K[0].values.push(k);return{name:_.target,refId:_.target,meta:{json:!0},fields:K,length:_.datapoints.length}}const E=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function p(_,K){return _&&(_=_.toLowerCase(),_==="date"||_==="time")?g.fS.time:s(K)}function h(_){return _ instanceof Date||(0,i.v9)(_)?g.fS.time:(0,n.isNumber)(_)?g.fS.number:(0,n.isString)(_)?g.fS.string:(0,n.isBoolean)(_)?g.fS.boolean:g.fS.other}function s(_){return _ instanceof Date||(0,i.v9)(_)?g.fS.time:(0,n.isNumber)(_)?g.fS.number:(0,n.isString)(_)?E.test(_)?g.fS.number:_==="true"||_==="TRUE"||_==="True"||_==="false"||_==="FALSE"||_==="False"?g.fS.boolean:g.fS.string:(0,n.isBoolean)(_)?g.fS.boolean:g.fS.other}function y(_){if(_.name){const K=_.name.toLowerCase();if(K==="date"||K==="time")return g.fS.time}for(let K=0;K<_.values.length;K++){const k=_.values[K];if(k!=null)return s(k)}}const D=(_,K=!1)=>{for(const k of _.fields)if(!k.type||k.type===g.fS.other||K)return{..._,fields:_.fields.map(z=>z.type&&z.type!==g.fS.other&&!K?z:{...z,type:y(z)||g.fS.other})};return _},C=_=>!!(_&&_.hasOwnProperty("columns")),P=_=>!!(_&&_.hasOwnProperty("fields")),b=_=>!!(P(_)&&_.hasOwnProperty("value"));function T(_){if("fields"in _)return"length"in _&&_.fields[0]?.values?.get?_:G(_);if(_.hasOwnProperty("type")&&_.type==="docs")return v(_);if(_.hasOwnProperty("datapoints")||_.hasOwnProperty("points"))return f(_);if(_.hasOwnProperty("data"))return _.hasOwnProperty("schema")?(0,l.vP)(_):m(_);if(_.hasOwnProperty("columns"))return d(_);if(Array.isArray(_))return(0,c.P)(_);throw console.warn("Can not convert",_),new Error("Unsupported data format")}const O=_=>{const{fields:K}=_,k=_.length,z=[];if(K.length===2){const{timeField:W,timeIndex:Z}=S(_);if(W){const X=K[Z===0?1:0],Y=K[Z];for(let ne=0;ne<k;ne++)z.push([X.values[ne],Y.values[ne]]);return{alias:_.name,target:(0,o.CZ)(X,_),datapoints:z,unit:K[0].config?K[0].config.unit:void 0,refId:_.refId,meta:_.meta}}}for(let W=0;W<k;W++){const Z=[];for(let H=0;H<K.length;H++)Z.push(K[H].values[W]);z.push(Z)}return _.meta&&_.meta.json?{alias:K[0].name||_.name,target:K[0].name||_.name,datapoints:K[0].values,filterable:K[0].config?K[0].config.filterable:void 0,type:"docs"}:{columns:K.map(W=>{const{name:Z,config:H}=W;if(H){const{...X}=H;return X.text=Z,X}return{text:Z}}),type:"table",refId:_.refId,meta:_.meta,rows:z}};function R(_,K,k=!1){const z=_.fields[K];if(!z)return _;const W=[];for(let H=0;H<_.length;H++)W.push(H);const Z=(0,r.Mo)(z,k);return W.sort(Z),{..._,fields:_.fields.map(H=>{const X={...H,values:H.values.map((ne,se)=>H.values[W[se]])},{nanos:Y}=H;return Y!==void 0&&(X.nanos=Y.map((ne,se)=>Y[W[se]])),X})}}function I(_){return{..._,fields:_.fields.map(K=>{const k=[...K.values];k.reverse();const z={...K,values:k},{nanos:W}=K;if(W!==void 0){const Z=[...W];Z.reverse(),z.nanos=Z}return z})}}function M(_,K){const k=[];for(const z of _.fields)k.push(z.values[K]);return k}function x(_){return L(_)}function L(_,K){return{fields:(K?_.fields.filter(K):_.fields).map(W=>{let Z=W.values;return{name:W.name,type:W.type,config:W.config,values:Z,labels:W.labels}}),refId:_.refId,meta:_.meta,name:_.name}}const S=_=>{for(let K=0;K<_.fields.length;K++)if(_.fields[K].type===g.fS.time)return{timeField:_.fields[K],timeIndex:K};return{}};function U(_){const K=D(T(_));if(K.fields&&K.fields.length)for(const k of K.fields)k.state=null;return K}function N(_){return!_||!(0,n.isArray)(_)?[]:_.map(K=>U(K))}function w(_,K){const{series:k,annotations:z}=_;if(_.state===u.Gu.Loading&&k.length===0)return K||(K=_),{...K,state:u.Gu.Loading,request:_.request};const W=performance.now(),Z=k.map(Y=>U(Y)),H=N(z),X=performance.now();return{..._,series:Z,annotations:H,timings:{dataProcessingTime:X-W}}}function G(_){let K=0;const k=_.fields.map((z,W)=>{const{state:Z,...H}=z;return H.name||(H.name=`Field ${W+1}`),H.config||(H.config={}),H.values?H.values.length>K&&(K=H.values.length):H.values=new Array(K),H.type||(H.type=y(H)??g.fS.other),H});return{..._,fields:k,length:K}}},23498:(Q,A,e)=>{"use strict";e.d(A,{jM:()=>g,jT:()=>c,m$:()=>u,pP:()=>r,xI:()=>o});var n=e(85666),a=e(98147);const i=100;function r(l){if(l.fields.length<2)return!1;const d=l.fields.find(m=>m.type===n.fS.number);let f=!1;for(const m of l.fields)if(g(m)){f=!0;break}return f&&d!==void 0}function o(l){return!l.find(d=>!r(d))}function g(l){if(l.type!==n.fS.time)return!1;let d=null,f=l.values.length>i?i:l.values.length;for(let m=0;m<f;m++){const v=l.values[m];if(d===null||v!==null&&v>d)d=v;else return!1}return!0}function u(l){for(let d=0;d<l.length;d++){const f=(0,a.sV)(l[d]);if(f.timeField!==void 0&&f.timeIndex!==void 0)return!0}return!1}function c(l){return l.fields.some(d=>d.type===n.fS.time)}},88822:(Q,A,e)=>{"use strict";e.d(A,{K:()=>o,Z:()=>g});var n=e(69781),a=e.n(n),i=e(5333);let r=()=>i.Ys;const o=u=>{r=u??r},g=u=>u?.timeZone&&!(0,n.isEmpty)(u.timeZone)?u.timeZone:r()??i.Ys},89026:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{isMathString:()=>o,isValid:()=>u,parse:()=>g,parseDateMath:()=>c,roundToFiscal:()=>l});var n=e(69781),a=e.n(n),i=e(74011);const r=["y","M","w","d","h","m","s","Q"];function o(d){return d?!!(typeof d=="string"&&(d.substring(0,3)==="now"||d.includes("||"))):!1}function g(d,f,m,v){if(d){if(typeof d!="string")return(0,i.v9)(d)?d:(0,n.isDate)(d)?(0,i.CQ)(d):void 0;{let E,p="",h,s;return d.substring(0,3)==="now"?(E=(0,i.GY)(m),p=d.substring(3)):(h=d.indexOf("||"),h===-1?(s=d,p=""):(s=d.substring(0,h),p=d.substring(h+2)),E=(0,i.CQ)(s,i.VJ)),p.length?c(p,E,f,v):E}}}function u(d){const f=g(d);return f&&(0,i.v9)(f)?f.isValid():!1}function c(d,f,m,v=0){const E=d.replace(/\s/g,""),p=(0,i.CQ)(f);let h=0;const s=E.length;for(;h<s;){const y=E.charAt(h++);let D,C,P,b=!1;if(y==="/")D=0;else if(y==="+")D=1;else if(y==="-")D=2;else return;if(isNaN(parseInt(E.charAt(h),10)))C=1;else if(E.length===2)C=parseInt(E.charAt(h),10);else{const O=h;for(;!isNaN(parseInt(E.charAt(h),10));)if(h++,h>10)return;C=parseInt(E.substring(O,h),10)}if(D===0&&C!==1)return;P=E.charAt(h++),P==="f"&&(P=E.charAt(h++),b=!0);const T=P;if((0,n.includes)(r,T))D===0?b?l(v,p,T,m):m?p.endOf(T):p.startOf(T):D===1?p.add(C,T):D===2&&p.subtract(C,T);else return}return p}function l(d,f,m,v){switch(m){case"y":return v?l(d,f,m,!1).add(11,"M").endOf("M"):f.subtract((f.month()-d+12)%12,"M").startOf("M"),f;case"Q":return v?l(d,f,m,!1).add(2,"M").endOf("M"):f.subtract((f.month()-d+12)%3,"M").startOf("M"),f;default:return}}},16528:(Q,A,e)=>{"use strict";e.d(A,{IA:()=>f,Ks:()=>u,RA:()=>g,fI:()=>m,iX:()=>c,jO:()=>d,qb:()=>l,vT:()=>o});var n=e(39601),a=e(41784),i=e(96604);const r={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function o(E,p=!0){if((0,n.Z)(E.start,E.end))return"";const h=(0,i.Z)(E);return Object.entries(h).reduce((s,[y,D])=>D&&D!==0&&!(y==="seconds"&&!p&&s)?s+`${s!==""?" ":""}${D}${r[y][0]}`:s,"")}function g(E){return E.split(" ").reduce((p,h)=>{const s=h.match(/(\d+)(.+)/),y=s?.[1],D=s?.[2];if(!(y&&D))return p;const C=Object.entries(r).find(([b,T])=>T?.includes(s[2])),P=parseInt(y,10);return C?{...p,[C[0]]:P}:p},{})}function u(E,p){return(0,a.Z)(E,p)}function c(E){const p=new Date;return u(p,E).getTime()-p.getTime()}function l(E){return!isNaN(Date.parse(E))}function d(E){for(const p of E.trim().split(" ")){const h=p.match(/(\d+)(.+)/);if(h===null||h.length!==3||!Object.entries(r).find(([y,D])=>D?.includes(h[2]))?.[0])return!1}return!0}function f(E){return v(E,["h","m","s","ms","us","\xB5s","ns"])}function m(E){return v(E,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function v(E,p){for(const h of E.trim().split(" ")){const s=h.match(/([0-9]*[.]?[0-9]+)(.+)/);if(s===null||s.length!==3||!p.includes(s[2]))return!1}return!0}},74337:(Q,A,e)=>{"use strict";e.d(A,{Ji:()=>r,U6:()=>o,zf:()=>i});const n="YYYY-MM-DD HH:mm:ss",a="YYYY-MM-DD HH:mm:ss.SSS";class i{constructor(){this.fullDate=n,this.fullDateMS=a,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(c){this.fullDate=c.fullDate,this.interval=c.interval,c.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=r({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=r({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=r({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=r({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=r({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(c){return`time:${c?this.fullDateMS:this.fullDate}`}}function r(u,c,l){if(g())return l??n;!c&&navigator&&(c=[...navigator.languages]);const d=new Intl.DateTimeFormat(c||void 0,u),f=d.formatToParts(new Date),v={year:"YYYY",month:"MM",day:"DD",hour:d.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return f.map(E=>v[E.type]||E.value).join("")}const o=new i,g=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},40137:(Q,A,e)=>{"use strict";e.d(A,{E8:()=>u,Fm:()=>c,Hk:()=>l,dq:()=>o,lf:()=>g});var n=e(35051),a=e.n(n),i=e(88822),r=e(74337);const o=(m,v)=>f(m,(0,i.Z)(v)).format(d(v)),g=(m,v)=>f(m,(0,i.Z)(v)).format(),u=(m,v)=>f(m,(0,i.Z)(v)).fromNow(),c=(m,v)=>f(m,(0,i.Z)(v)).format(`${r.U6.fullDate} z`),l=(m,v)=>f(m,(0,i.Z)(v)).format("z"),d=m=>m?.defaultWithMS?m?.format??r.U6.fullDateMS:m?.format??r.U6.fullDate,f=(m,v)=>{const E=m,p=a().tz.zone(v);if(p&&p.name)return a().utc(E).tz(p.name);switch(v){case"utc":return a().utc(E);default:return a().utc(E).local()}}},43750:(Q,A,e)=>{"use strict";e.d(A,{$8:()=>r.$8,CQ:()=>i.CQ,C_:()=>i.C_,D2:()=>i.D2,E8:()=>g.E8,Fm:()=>g.Fm,GY:()=>i.GY,Hk:()=>g.Hk,IA:()=>c.IA,J:()=>u.J,Ji:()=>o.Ji,K7:()=>l.K,Kd:()=>i.Kd,Ks:()=>c.Ks,Ls:()=>i.Ls,Pr:()=>r.Pr,RA:()=>c.RA,RQ:()=>r.RQ,Rn:()=>n,U6:()=>o.U6,VJ:()=>i.VJ,Vs:()=>r.Vs,ZV:()=>r.ZV,Ze:()=>l.Z,cT:()=>a,dq:()=>g.dq,fI:()=>c.fI,iX:()=>c.iX,i_:()=>i.i_,ig:()=>i.ig,jN:()=>i.jN,jO:()=>c.jO,k4:()=>i.k4,lf:()=>g.lf,nA:()=>r.nA,np:()=>i.Ks,qb:()=>c.qb,v9:()=>i.v9,vT:()=>c.vT,zf:()=>o.zf,zh:()=>i.zh});var n=e(89026),a=e(17201),i=e(74011),r=e(10020),o=e(74337),g=e(40137),u=e(42016),c=e(16528),l=e(88822)},74011:(Q,A,e)=>{"use strict";e.d(A,{CQ:()=>f,C_:()=>m,D2:()=>u,GY:()=>v,Kd:()=>o,Ks:()=>d,Ls:()=>h,VJ:()=>i,i_:()=>r,ig:()=>E,jN:()=>p,k4:()=>g,v9:()=>c,zh:()=>l});var n=e(25086),a=e.n(n);const i=a().ISO_8601,r=s=>{a().locale(s)},o=()=>a().locale(),g=()=>a().localeData(),u=s=>s===null||typeof s=="string"||typeof s=="number"||s instanceof Date||Array.isArray(s)&&s.every(y=>typeof y=="string"||typeof y=="number")||c(s),c=s=>a().isMoment(s),l=(s,y)=>a().utc(s,y),d=(s,y)=>a().duration(s,y),f=(s,y)=>a()(s,y),m=s=>f(s),v=(s,y,D)=>{if(s==="utc")return l(y,D);if(s&&s!=="browser"){let C;if(typeof y=="string"&&D?C=a().tz(y,D,s):C=a().tz(y,s),c(C))return C}return f(y,D)},E=s=>a().weekdays().findIndex(y=>y.toLowerCase()===s.toLowerCase()),p=s=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(y=>y.toLowerCase()===s.toLowerCase()),h=s=>{const y="-weekStart",D=o().replace(y,""),C=s?p(s):-1;C!==-1?a().locale(D+y,{parentLocale:D,week:{dow:C}}):r(D)}},42016:(Q,A,e)=>{"use strict";e.d(A,{J:()=>l});var n=e(69781),a=e.n(n),i=e(35051),r=e.n(i),o=e(88822),g=e(89026),u=e(74337),c=e(74011);const l=(m,v)=>(0,c.v9)(m)?m:typeof m=="string"?d(m,v):f(m,v),d=(m,v)=>{if(m.indexOf("now")!==-1)return(0,g.isValid)(m)&&(0,g.parse)(m,v?.roundUp,v?.timeZone,v?.fiscalYearStartMonth)||r()();const E=(0,o.Z)(v),p=r().tz.zone(E),h=v?.format??u.U6.fullDate;if(p&&p.name)return r().tz(m,h,p.name);switch((0,n.lowerCase)(E)){case"utc":return r().utc(m,h);default:return r()(m,h)}},f=(m,v)=>{const E=m,p=(0,o.Z)(v),h=r().tz.zone(p);if(h&&h.name)return r().tz(E,h.name);switch((0,n.lowerCase)(p)){case"utc":return r().utc(E);default:return r()(E)}}},17201:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{calculateInterval:()=>P,convertRawToRange:()=>p,describeInterval:()=>O,describeTextRange:()=>f,describeTimeRange:()=>m,describeTimeRangeAbbreviation:()=>E,intervalToMs:()=>I,intervalToSeconds:()=>R,isFiscal:()=>s,isRelativeTime:()=>h,isRelativeTimeRange:()=>y,isValidTimeSpan:()=>v,msRangeToTimeString:()=>C,relativeToTimeRange:()=>L,roundInterval:()=>M,secondsToHms:()=>D,timeRangeToRelative:()=>x});var n=e(69781),a=e.n(n),i=e(89026),r=e(40137),o=e(74011),g=e(42016);const u={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},c=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],l=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],d={};(0,n.each)(c,S=>{d[S.from+" to "+S.to]=S}),(0,n.each)(l,S=>{d[S.from+" to "+S.to]=S});function f(S){const U=S.indexOf("+")!==0;S.indexOf("now")===-1&&(S=(U?"now-":"now")+S);let N=d[S+" to now"];if(N)return N;U?N={from:S,to:"now",display:""}:N={from:"now",to:S,display:""};const w=/^now([-+])(\d+)(\w)/.exec(S);if(w){const G=w[3],_=parseInt(w[2],10),K=u[G];K&&(N.display=U?"Last ":"Next ",N.display+=_+" "+K.display,N.section=K.section,_>1&&(N.display+="s"))}else N.display=N.from+" to "+N.to,N.invalid=!0;return N}function m(S,U){const N=d[S.from.toString()+" to "+S.to.toString()];if(N)return N.display;const w={timeZone:U};if((0,o.v9)(S.from)&&(0,o.v9)(S.to))return(0,r.dq)(S.from,w)+" to "+(0,r.dq)(S.to,w);if((0,o.v9)(S.from)){const G=i.parse(S.to,!0,"utc");return G?(0,r.dq)(S.from,w)+" to "+(0,r.E8)(G,w):""}if((0,o.v9)(S.to)){const G=i.parse(S.from,!1,"utc");return G?(0,r.E8)(G,w)+" to "+(0,r.dq)(S.to,w):""}return S.to.toString()==="now"?f(S.from).display:S.from.toString()+" to "+S.to.toString()}const v=S=>S.indexOf("$")===0||S.indexOf("+$")===0?!0:f(S).invalid!==!0,E=(S,U)=>{if((0,o.v9)(S.from))return(0,r.Hk)(S.from,{timeZone:U});const N=i.parse(S.from,!0);return N?(0,r.Hk)(N,{timeZone:U}):""},p=(S,U,N,w)=>{const G=(0,g.J)(S.from,{roundUp:!1,timeZone:U,fiscalYearStartMonth:N,format:w}),_=(0,g.J)(S.to,{roundUp:!0,timeZone:U,fiscalYearStartMonth:N,format:w});return i.isMathString(S.from)||i.isMathString(S.to)?{from:G,to:_,raw:S}:{from:G,to:_,raw:{from:G,to:_}}};function h(S){return typeof S=="string"?S.indexOf("now")>=0:!1}function s(S){return typeof S.raw.from=="string"&&S.raw.from.indexOf("f")>0?!0:typeof S.raw.to=="string"&&S.raw.to.indexOf("f")>0}function y(S){return h(S.from)||h(S.to)}function D(S){const U=Math.floor(S/31536e3);if(U)return U+"y";const N=Math.floor(S%31536e3/86400);if(N)return N+"d";const w=Math.floor(S%31536e3%86400/3600);if(w)return w+"h";const G=Math.floor(S%31536e3%86400%3600/60);if(G)return G+"m";const _=Math.floor(S%31536e3%86400%3600%60);if(_)return _+"s";const K=Math.floor(S*1e3);return K?K+"ms":"less than a millisecond"}function C(S){const U=Number((S/1e3).toFixed()),N=Math.floor(U/60/60),w=Math.floor(U/60)-N*60,G=Number((U%60).toFixed());let _=N?N+"h":"",K=w?w+"min":"",k=G?G+"sec":"";return _&&K?_=_+" ":_=_,(K||_)&&k?K=K+" ":K=K,_+K+k||"less than 1sec"}function P(S,U,N){let w=1;N&&(w=I(N));let G=M((S.to.valueOf()-S.from.valueOf())/U);return w>G&&(G=w),{intervalMs:G,interval:D(G/1e3)}}const b=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,T={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function O(S){if(Number(S))return{sec:T.s,type:"s",count:parseInt(S,10)};const U=S.match(b);if(!U||!(0,n.has)(T,U[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(T).join(", ")}"`);return{sec:T[U[2]],type:U[2],count:parseInt(U[1],10)}}function R(S){const U=O(S);return U.sec*U.count}function I(S){const U=O(S);return U.sec*1e3*U.count}function M(S){switch(!0){case S<10:return 1;case S<15:return 10;case S<35:return 20;case S<75:return 50;case S<150:return 100;case S<350:return 200;case S<750:return 500;case S<1500:return 1e3;case S<3500:return 2e3;case S<7500:return 5e3;case S<12500:return 1e4;case S<17500:return 15e3;case S<25e3:return 2e4;case S<45e3:return 3e4;case S<9e4:return 6e4;case S<21e4:return 12e4;case S<45e4:return 3e5;case S<75e4:return 6e5;case S<105e4:return 9e5;case S<15e5:return 12e5;case S<27e5:return 18e5;case S<54e5:return 36e5;case S<9e6:return 72e5;case S<162e5:return 108e5;case S<324e5:return 216e5;case S<864e5:return 432e5;case S<6048e5:return 864e5;case S<18144e5:return 6048e5;case S<36288e5:return 2592e6;default:return 31536e6}}function x(S,U=(0,o.CQ)()){const N=U.unix()-S.from.unix(),w=U.unix()-S.to.unix();return{from:N,to:w}}function L(S,U=(0,o.CQ)()){const N=(0,o.CQ)(U).subtract(S.from,"s"),w=S.to===0?(0,o.CQ)(U):(0,o.CQ)(U).subtract(S.to,"s");return{from:N,to:w,raw:{from:N,to:w}}}},10020:(Q,A,e)=>{"use strict";e.d(A,{$8:()=>f,Pr:()=>l,RQ:()=>g,Vs:()=>u,ZV:()=>d,nA:()=>c});var n=e(69781),a=e.n(n),i=e(35051),r=e.n(i),o=e(88822),g=(s=>(s.default="",s.localBrowserTime="browser",s.utc="utc",s))(g||{});const u=s=>{switch((0,o.Z)({timeZone:s})){case"browser":return"Local browser time";case"utc":return"UTC";default:return s}},c=s=>r().tz.zone(s),l=(s,y)=>{const D=m(s,y);return D||E(s,y)},d=(0,n.memoize)((s=!1)=>{const y=[];return s===!0?y.push("","browser","utc"):s&&y.push(...s),r().tz.names().reduce((D,C)=>{const P=h[C];return!Array.isArray(P)||P.length===0||D.push(C),D},y)}),f=(0,n.memoize)((s=!1)=>{const D=d(s).reduce((C,P)=>{const b=P.indexOf("/");if(b===-1){const O="";return C[O]=C[O]??[],C[O].push(P),C}const T=P.slice(0,b);return C[T]=C[T]??[],C[T].push(P),C},{});return Object.keys(D).map(C=>({name:C,zones:D[C]}))}),m=(s,y)=>{switch(s){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:s,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const D=(0,o.Z)(),P=D==="browser"||D==="utc"?m(D,y):E(D,y);return{countries:h[D]??[],abbreviation:"",offsetInMins:0,...P,ianaName:P?.ianaName??"",name:"Default",zone:s}}case"browser":{const D=r().tz.guess(!0),C=E(D,y);return{countries:h[D]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...C,name:"Browser Time",ianaName:C?.ianaName??"",zone:s}}default:return}},v=s=>/^(\+|\-).+/.test(s)?"":s,E=(s,y)=>{const D=r().tz.zone(s);if(D)return{name:s,ianaName:D.name,zone:s,countries:h[s]??[],abbreviation:v(D.abbr(y)),offsetInMins:D.utcOffset(y)}},p={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},h=(()=>r().tz.countries().reduce((s,y)=>r().tz.zonesForCountry(y).reduce((C,P)=>{C[P]||(C[P]=[]);const b=p[y];return b&&C[P].push({code:y,name:b}),C},s),{}))()},83994:(Q,A,e)=>{"use strict";e.d(A,{F:()=>r});var n=e(41049),a=e(71156),i=e(74534);class r{constructor(){this.subscribers=new Map,this.emitter=new n.Z}publish(u){this.emitter.emit(u.type,u)}subscribe(u,c){return this.getStream(u).subscribe({next:c})}getStream(u){return new a.y(c=>{const l=d=>{c.next(d)};return this.emitter.on(u.type,l),this.subscribers.set(l,c),()=>{this.emitter.off(u.type,l),this.subscribers.delete(l)}})}newScopedBus(u,c){return new o([u],this,c)}emit(u,c){typeof u=="string"?this.emitter.emit(u,{type:u,payload:c}):this.emitter.emit(u.name,{type:u.name,payload:c})}on(u,c,l){if(c.wrapper=d=>{c(d.payload)},typeof u=="string"?this.emitter.on(u,c.wrapper):this.emitter.on(u.name,c.wrapper),l){const d=l.$on("$destroy",()=>{this.off(u,c),d()})}}off(u,c){if(typeof u=="string"){this.emitter.off(u,c.wrapper);return}this.emitter.off(u.name,c.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[u,c]of this.subscribers)c.complete(),this.subscribers.delete(u)}}class o{constructor(u,c,l){this.path=u,this.eventBus=c,this.filterConfig=l??{onlyLocal:!1}}publish(u){u.origin||(u.origin=this),this.eventBus.publish(u)}filter(u){return this.filterConfig.onlyLocal?u.origin===this:!0}getStream(u){return this.eventBus.getStream(u).pipe((0,i.h)(this.filter.bind(this)))}subscribe(u,c){return this.getStream(u).subscribe({next:c})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(u,c){return new o([...this.path,u],this,c)}}},93670:(Q,A,e)=>{"use strict";e.d(A,{Ix:()=>u,Pl:()=>g,U6:()=>c,_m:()=>l,es:()=>a,n1:()=>o,v9:()=>r,xH:()=>i});var n=e(63121);class a extends n.R{}a.type="data-hover";class i extends n.m{}i.type="data-hover-clear";class r extends n.R{}r.type="data-select";class o extends n.R{}o.type="annotation-event";class g extends n.R{}g.type="dashboard-loaded";class u extends n.m{}u.type="datasource-updated-successfully";class c extends n.m{}c.type="datasource-test-succeeded";class l extends n.m{}l.type="datasource-test-failed"},89380:(Q,A,e)=>{"use strict";e.d(A,{X:()=>a});const n=new Set;function a(i){if(n.has(i))throw new Error(`There is already an event defined with type '${i}'`);return n.add(i),{name:i}}},92331:(Q,A,e)=>{"use strict";e.d(A,{Fb:()=>i.F,Ix:()=>r.Ix,Pl:()=>r.Pl,R_:()=>a.R,U6:()=>r.U6,Xw:()=>n.X,_m:()=>r._m,es:()=>r.es,mA:()=>a.m,n1:()=>r.n1,v9:()=>r.v9,xH:()=>r.xH});var n=e(89380),a=e(63121),i=e(83994),r=e(93670)},63121:(Q,A,e)=>{"use strict";e.d(A,{R:()=>a,m:()=>n});class n{constructor(){this.type=this.__proto__.constructor.type}}class a extends n{constructor(r){super(),this.payload=r}}},5793:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>a});var n=e(18662);class a extends n.B{}},28073:(Q,A,e)=>{"use strict";e.d(A,{U:()=>m,g:()=>E});var n=e(69781),a=e.n(n),i=e(98147),r=e(42016),o=e(74011),g=e(85666),u=e(61767),c=e(55156),l=e(86850),d=e(56106);const f={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function m(h){if(!h||(0,n.isEmpty)(h)||!h.field)return v;const s=h.field,y=s.config??{},{palette:D}=h.theme.visualization;let C=y.unit,P=C&&(f[C]||C.startsWith("time:")),b=!1;if(s.type===g.fS.time&&!P){if(C="dateTimeAsSystem",P=!0,s.values&&s.values.length>1){let S=s.values[0],U=s.values[s.values.length-1];typeof S=="string"?(S=(0,r.J)(S).unix(),U=(0,r.J)(U).unix()):(S/=1e3,U/=1e3),b=Math.abs(U-S)<60}}else s.type===g.fS.boolean?(0,l.br)(C)||(C="bool"):!C&&s.type===g.fS.string&&(C="string");const T=C?.startsWith("currency"),O=(0,l.br)(C),R=s.type===g.fS.number,M=!P&&!T&&!O&&!(C==="locale")&&R&&y.decimals==null,x=(0,l.Cf)(C||"none",y.unitScale),L=(0,d.NI)(s,h.theme);return(S,U)=>{const{mappings:N}=y,w=C==="string";P&&typeof S=="string"&&(S=(0,o.zh)(S).valueOf());let G=w?NaN:(0,u.I)(S),_,K,k,z,W,Z;if(N&&N.length>0){const X=(0,c.vh)(N,S);X&&(X.text!=null&&(_=X.text),X.color!=null&&(z=h.theme.visualization.getColorByName(X.color)),X.icon!=null&&(W=X.icon))}else if(s.type===g.fS.enum){if(S==null)return{text:"",numeric:NaN};const X=+S;if(y&&y.type&&y.type.enum){const{text:Y,color:ne}=y.type.enum;if(_=Y?Y[X]:`${S}`,z=ne?ne[X]:void 0,z==null){const se=D[X%D.length];z=h.theme.visualization.getColorByName(se)}}}if(!Number.isNaN(G)){if(_==null&&!(0,n.isBoolean)(S)){let X;M&&U!=null?(X=x(G,U,null,h.timeZone,b),X.text=+X.text+""):X=x(G,y.decimals,null,h.timeZone,b),_=X.text,k=X.suffix,K=X.prefix}if(z==null){const X=L(G);z=X.color,Z=X.percent}}if(_==null&&(0,n.isArray)(S)&&(_=(0,n.join)(S,", ")),_==null&&(_=(0,n.toString)(S),_||(y.noValue?_=y.noValue:_="")),!z){const X=L(-1/0);z=X.color,Z=X.percent}const H={text:_,numeric:G,prefix:K,suffix:k,color:z};return W!=null&&(H.icon=W),Z!=null&&(H.percent=Z),H}}function v(h){return{text:(0,n.toString)(h),numeric:(0,u.I)(h)}}function E(){return h=>({text:(0,i.DP)(h)==="other"?`${JSON.stringify(h,p())}`:`${h}`,numeric:null})}const p=()=>{const h=new WeakSet;return(s,y)=>{if(typeof y=="object"&&y!==null){if(h.has(y))return;h.add(y)}return y}}},99326:(Q,A,e)=>{"use strict";e.d(A,{QY:()=>E,WO:()=>f,YO:()=>p,fD:()=>v});var n=e(1191),a=e(28643),i=e.n(a),r=e(37479),o=e(77081),g=e(66542),u=e(91507),c=e(18662),l=e(56106),d=e(27369);const f=new c.B(()=>[{id:u.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:h},{id:u.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:s},{id:u.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(y,D)=>(C,P,b)=>{const T=b??d.yM;return D.visualization.getColorByName(T.color)}},new m({id:u.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:y=>y.visualization.palette}),new m({id:u.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:y=>y.visualization.palette.filter(D=>o.getContrastRatio(y.visualization.getColorByName(D),y.colors.background.primary)>=y.colors.contrastThreshold)}),new m({id:u.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:y=>["green","yellow","red"]}),new m({id:u.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:y=>["red","yellow","green"]}),new m({id:u.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:y=>["dark-blue","super-light-yellow","dark-red"]}),new m({id:u.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:y=>["super-light-yellow","dark-red"]}),new m({id:u.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:y=>["blue","purple"]}),new m({id:u.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:y=>["super-light-yellow","dark-blue"]}),new m({id:u.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-blue"]}),new m({id:u.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-red"]}),new m({id:u.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-green"]}),new m({id:u.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-purple"]})]);class m{constructor(D){this.id=D.id,this.name=D.name,this.description=D.description,this.getNamedColors=D.getColors,this.isContinuous=D.isContinuous,this.isByValue=D.isByValue,this.useSeriesName=D.useSeriesName}getColors(D){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===D?this.colorCache:(this.colorCache=this.getNamedColors(D).map(D.visualization.getColorByName),this.colorCacheTheme=D,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,n.hD)(this.colorCache)),this.interpolator}getCalculator(D,C){const P=this.getColors(C);return this.isByValue?this.isContinuous?(b,T,O)=>this.getInterpolator()(T):(b,T,O)=>P[T*(P.length-1)]:this.useSeriesName?(b,T,O)=>P[Math.abs(i()(D.name))%P.length]:(b,T,O)=>{const R=D.state?.seriesIndex??0;return P[R%P.length]}}}function v(y){return f.get(y.config.color?.mode??u.S.Thresholds)}function E(y){return f.get(y??u.S.Thresholds)}function p(y,D){const C=v(y);if(!C.isByValue)return{color:C.getCalculator(y,D)(0,0),threshold:d.yM,percent:1};const P=(0,l.NI)(y,D),b=y.config.color?.seriesBy??"last",O=(0,g.Kx)({field:y,reducers:[b]})[b]??0;return P(O)}function h(y,D){return()=>D.visualization.getColorByName(y.config.color?.fixedColor??u.R)}function s(y,D){return()=>{const C=D.visualization.getColorByName(y.config.color?.fixedColor??u.R),P=[C],b=6,T=10,O=35,R=35;for(let M=1;M<b;M++)P.push((0,r.Z)(C).spin(M/b*T).brighten(M/b*O).toHexString()),P.push((0,r.Z)(C).spin(-(M/b)*T).darken(M/b*R).toHexString());const I=y.state?.seriesIndex??0;return P[I%P.length]}}},76236:(Q,A,e)=>{"use strict";e.d(A,{E1:()=>v,HU:()=>f,cB:()=>h,dE:()=>p,gG:()=>P,nG:()=>s,n_:()=>m,pZ:()=>E,r5:()=>R,sg:()=>b});var n=e(69781),a=e.n(n),i=e(46901),r=e(98147),o=e(85610),g=e(66542),u=e(18198),c=e(85666),l=e(28073),d=e(27957);const f="__series.name",m="__field.displayName",v="__field.labels",E="__calc",p="__cell_",h=25,s=M=>{const{replaceVariables:x,reduceOptions:L,timeZone:S,theme:U}=M,N=L.calcs.length?L.calcs:[g.gz.last],w=[],G=(0,o.sq)(L.fields?{id:u.mi.byRegexp,options:L.fields}:{id:u.mi.numeric}),_=M.data??[],K=L.limit?L.limit:h;let k=!1;for(let z=0;z<_.length&&!k;z++){const W=_[z],{timeField:Z}=(0,r.sV)(W),H=new i.U(W);for(let X=0;X<W.fields.length&&!k;X++){const Y=W.fields[X],ne=Y.getLinks;if(!G(Y,W,_))continue;let se=Y.config;Y.state?.range&&(se={...se,...Y.state?.range});let re=Y.config.displayName??"";const ge=Y.display??(0,l.U)({field:Y,theme:M.theme,timeZone:S});if(L.values)for(let q=0;q<Y.values.length;q++){Y.state=D(Y,w.length);const me=I(Y,q),oe=ge(Y.values[q]),fe=y(W,Y,q,x,me),ve=C(fe,M.fieldConfig,U);if(w.push({name:"",field:se,display:{...oe,title:fe,color:ve??oe.color},view:H,colIndex:X,rowIndex:q,getLinks:ne?()=>ne({valueRowIndex:q}):()=>[],hasLinks:P(Y)}),w.length>=K){k=!0;break}}else{const q=(0,g.Kx)({field:Y,reducers:N});for(const me of N){const oe=Y.state?.scopedVars??{};oe[E]={value:me,text:me};const fe=ge(q[me]);re!==""?fe.title=x(re,oe):fe.title=(0,d.CZ)(Y,W,_),fe.percentChange=M.percentChange?(0,g.Kx)({field:Y,reducers:[g.gz.diffperc]}).diffperc:void 0;let ve;M.sparkline&&(ve={y:W.fields[X],x:Z},me===g.gz.last?ve.highlightIndex=ve.y.values.length-1:me===g.gz.first&&(ve.highlightIndex=0)),w.push({name:me,field:se,display:fe,sparkline:ve,view:H,colIndex:X,getLinks:ne?()=>ne({calculatedValue:fe}):()=>[],hasLinks:P(Y)})}}}}return w.length===0&&w.push(T(M)),w};function y(M,x,L,S,U){const N=x.config.displayName;if(N)return N.indexOf(p)?S(R(N),U):S(N,U);let w=[],G=0;for(const _ of M.fields)if(_!==x)if(_.type===c.fS.string){const K=_.values[L]??"",k=_.display?_.display(K).text:K;k.length>0&&w.push(k)}else _.type===c.fS.number&&G++;return(G||w.length===0)&&w.push((0,d.CZ)(x,M)),w.join(" ")}function D(M,x){return{...M.state,seriesIndex:x}}function C(M,x,L){for(const S of x.overrides)if(S.matcher.id==="byName"&&S.matcher.options===M){for(const U of S.properties)if(U.id==="color"&&U.value)return L.visualization.getColorByName(U.value.fixedColor)}return null}function P(M){return M.config?.links?.length?M.config.links.length>0:!1}function b(M){let x="",L="",S="",U="";for(let N=0;N<M.length;N++){const w=M[N].display;w.text&&w.text.length>L.length&&(L=w.text),w.title&&w.title.length>x.length&&(x=w.title),w.prefix&&w.prefix.length>S.length&&(S=w.prefix),w.suffix&&w.suffix.length>U.length&&(U=w.suffix)}return{text:L,title:x,suffix:U,prefix:S}}function T(M){const x="No data",{fieldConfig:L,timeZone:S}=M,{defaults:U}=L,w=(0,l.U)({field:{type:c.fS.other,config:U},theme:M.theme,timeZone:S})(null),G=O(w,x);return{name:x,field:{...U,max:U.max??0,min:U.min??0},display:{text:G,numeric:0,color:w.color},hasLinks:!1}}function O(M,x){return!M||(0,n.isEmpty)(M.text)?x:M.text}function R(M){return M.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(x,L,S,U,N,w,G)=>`\${__data.fields[${L??U??w}]${S??N??G}}`)}function I(M,x){return M.state?.scopedVars?.__dataContext?{...M.state?.scopedVars,__dataContext:{value:{...M.state?.scopedVars?.__dataContext.value,rowIndex:x}}}:M.state?.scopedVars}},19596:(Q,A,e)=>{"use strict";e.d(A,{Cc:()=>L,Of:()=>x,SM:()=>D,Xu:()=>y,gb:()=>R,oB:()=>M});var n=e(69781),a=e.n(n),i=e(31733),r=e(41258),o=e(71199),g=e(98147),u=e(82401),c=e(77081),l=e(66542),d=e(85610),f=e(85666),m=e(91507),v=e(84912),E=e(81548),p=e(28073),h=e(56106),s=e(61411);function y(U){let N=null,w=null;const G=[l.gz.min,l.gz.max];for(const _ of U)for(const K of _.fields)if(K.type===f.fS.number){const k=(0,l.Kx)({field:K,reducers:G}),z=k[l.gz.min],W=k[l.gz.max];(N===null||z<N)&&(N=z),(w===null||W>w)&&(w=W)}return{min:N,max:w,delta:(w??0)-(N??0)}}function D(U){if(!U.data)return[];const N=U.fieldConfig;if(!N)return U.data;const w=U.fieldConfigRegistry??s.N;let G=0,_;const K=[];if(N.overrides)for(const k of N.overrides){const z=d.Ls.get(k.matcher.id);z&&K.push({match:z.get(k.matcher.options),properties:k.properties})}return U.data.map((k,z)=>{const W={...k};W.fields=W.fields.map(Z=>({...Z,config:(0,n.cloneDeep)(Z.config),state:{...Z.state}}));for(const Z of W.fields){const H=Z.config;Z.state.scopedVars={__dataContext:{value:{data:U.data,frame:W,frameIndex:z,field:Z}}};const X={field:Z,data:U.data,dataFrameIndex:z,replaceVariables:U.replaceVariables,fieldConfigRegistry:w};T(H,N.defaults,X);for(const re of K)if(re.match(Z,W,U.data))for(const ge of re.properties)b(H,ge,X);let Y=Z.type;if(!Y||Y===f.fS.other){const re=(0,g.fu)(Z);re&&(Y=re)}const{range:ne,newGlobalRange:se}=C(H,Z,_,U.data);if(_=se,Z.state.seriesIndex=G,Z.state.range=ne,Z.type=Y,Z.type!==f.fS.time&&G++,Z.display=(0,p.U)({field:Z,theme:U.theme,timeZone:U.timeZone}),Z.config.unit!=="dateTimeFromNow"&&(Z.display=P(Z.display,2500)),Z.getLinks=M(W,Z,Z.state.scopedVars,X.replaceVariables,U.timeZone,U.dataLinkPostProcessor),Z.type===f.fS.nestedFrames)for(const re of Z.values)for(let ge=0;ge<re.length;ge++)for(const q of re[ge].fields)q.state={scopedVars:{__dataContext:{value:{data:re,frame:re[ge],frameIndex:ge,field:q}}}},q.getLinks=M(re[ge],q,q.state.scopedVars,X.replaceVariables,U.timeZone,U.dataLinkPostProcessor)}return W})}function C(U,N,w,G){if(N.type!==f.fS.number||(0,n.isNumber)(U.min)&&(0,n.isNumber)(U.max))return{newGlobalRange:w};if(U.fieldMinMax){const z=(0,h.dz)(N),W=U.min??z.min,Z=U.max??z.max;return{range:{min:W,max:Z,delta:Z-W},newGlobalRange:w}}const _=w??y(G),K=U.min??_.min,k=U.max??_.max;return{range:{min:K,max:k,delta:k-K},newGlobalRange:_}}function P(U,N=2500){const w=new Map;for(let G=-1;G<=15;G++)w.set(G,new Map);return(G,_)=>{let K=w.get(_??-1),k=K.get(G);return k||(K.size===N&&K.clear(),k=U(G,_),k.color&&(k.color=(0,c.asHexString)(k.color)),K.set(G,k)),k}}function b(U,N,w){const _=w.fieldConfigRegistry.getIfExists(N.id);if(!_)return;const K=_.process(N.value,w,_.settings);K==null?_.isCustom&&U.custom?(0,n.unset)(U.custom,_.path):(0,n.unset)(U,_.path):_.isCustom?(U.custom||(U.custom={}),(0,n.set)(U.custom,_.path,K)):(0,n.set)(U,_.path,K)}function T(U,N,w){U.links&&N.links&&(U.links=[...U.links,...N.links]);for(const G of w.fieldConfigRegistry.list())G.isCustom&&!U.custom&&(U.custom={}),O(G.isCustom?U.custom:U,G.isCustom?N.custom:N,G,w);R(U)}function O(U,N,w,G){const _=(0,n.get)(U,w.path);if(_==null){const K=G.fieldConfigRegistry.getIfExists(w.id);if(!K)return;if(K&&K.shouldApply(G.field)){const k=K.process((0,n.get)(N,K.path),G,K.settings);k!=null&&(0,n.set)(U,K.path,k)}}}function R(U){const{thresholds:N}=U;if(U.color?U.color.mode||delete U.color:N&&(U.color={mode:m.S.Thresholds}),U.hasOwnProperty("min")&&U.hasOwnProperty("max")&&U.min>U.max){const w=U.max;U.max=U.min,U.min=w}}const I=U=>{const{link:N,linkModel:w,dataLinkScopedVars:G,field:_,replaceVariables:K}=U;return N.internal?(0,E._)({link:N,internalLink:N.internal,scopedVars:G,field:_,range:N.internal.range,replaceVariables:K}):w},M=(U,N,w,G,_,K)=>k=>!N.config.links||N.config.links.length===0?[]:N.config.links.map(W=>{const Z=S(U,N,w),H={...w,__dataContext:Z},X=(ne,se,re)=>G(ne,{...H,...se},re);k.valueRowIndex!==void 0&&!isNaN(k.valueRowIndex)?Z.value.rowIndex=k.valueRowIndex:Z.value.calculatedValue=k.calculatedValue;let Y;if(W.onClick)Y={href:W.url,title:G(W.title||"",H),target:W.targetBlank?"_blank":void 0,onClick:(ne,se)=>{W.onClick({origin:se??N,e:ne,replaceVariables:X})},origin:N};else{let ne=W.onBuildUrl?W.onBuildUrl({origin:N,replaceVariables:X}):W.url;ne&&(ne=v.u.assureBaseUrl(ne.replace(/\n/g,"")),ne=G(ne,H,o.b8.UriEncode),ne=v.u.processUrl(ne)),Y={href:ne,title:G(W.title||"",H),target:W.targetBlank?"_blank":void 0,origin:N}}return(K||I)({frame:U,field:N,dataLinkScopedVars:H,replaceVariables:G,config:k,link:W,linkModel:Y})}).filter(W=>!!W);function x(U){if(!U||U.length===0)return[];const N=[...U],w=(0,p.g)();for(let G=0;G<N.length;G++){const _={...N[G]},K=[..._.fields];for(let k=0;k<K.length;k++)K[k]={...K[k],display:w};N[G]={..._,fields:K}}return N}function L(U,N,w,G,_,K,k){const z=U?.fieldConfigRegistry,W=(0,i.useRef)(0),Z=(0,r.Z)(w?.series);return(0,i.useMemo)(()=>{if(!z||!N||!w)return;const H=w?.series;w.structureRev==null&&H&&Z&&!(0,u.nl)(H,Z,u.Ch)&&W.current++;const X={structureRev:W.current,...w,series:D({data:H,fieldConfig:N,fieldConfigRegistry:z,replaceVariables:K,theme:_,timeZone:G,dataLinkPostProcessor:k})};return w.annotations&&w.annotations.length>0&&(X.annotations=D({data:w.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:K,theme:_,timeZone:G,dataLinkPostProcessor:k})),X},[z,N,w,Z,G,_,K,k])}function S(U,N,w){return w?.__dataContext?{value:{...w.__dataContext.value}}:{value:{frame:U,field:N,data:[U]}}}},27957:(Q,A,e)=>{"use strict";e.d(A,{CZ:()=>o,U$:()=>u,UY:()=>r,nf:()=>i});var n=e(85666),a=e(84479);function i(l,d){if(l.name)return l.name;const f=[];for(const m of l.fields)if(m.type!==n.fS.time){if(f.length>1)break;f.push(o(m,l))}return f.length===1?f[0]:d===void 0&&l.fields.length>0?l.fields.filter(m=>m.type!==n.fS.time).map(m=>o(m,l)).join(", "):l.refId?`Series (${l.refId})`:`Series (${d})`}function r(l){l.forEach(d=>{d.fields.forEach(f=>{o(f,d,l)})})}function o(l,d,f){const m=l.state?.displayName,v=!!(f&&f.length>1);if(m&&v===l.state?.multipleFrames)return m;const E=g(l,d,f);return l.state=l.state||{},l.state.displayName=E,l.state.multipleFrames=v,E}function g(l,d,f){const m=l.config?.displayName&&l.config?.displayName.length,v=!!d?.meta?.timeCompare?.isTimeShiftQuery;let E=m?l.config.displayName:l.name;if(m)return v?`${E} (comparison)`:E;if(d&&l.config?.displayNameFromDS)return v?`${l.config.displayNameFromDS} (comparison)`:l.config.displayNameFromDS;if(l.type===n.fS.time&&!l.labels)return E??n.Ls;let p=[],h=!1;if(f&&f.length>1){for(let D=1;D<f.length;D++)if(f[D].name!==f[D-1].name){h=!0;break}}let s=!1,y=!1;if(h&&d?.name&&(p.push(d.name),s=!0),l.name&&l.name!==n.M5&&p.push(l.name),l.labels&&d){let D=c(f??[d]);if(D)l.labels[D]&&(p.push(l.labels[D]),y=!0);else{let C=(0,a.aA)(l.labels);C&&(p.push(C),y=!0)}}return d&&!s&&!y&&l.name===n.M5&&d.name&&d.name.length>0&&(p.push(d.name),s=!0),p.length?E=p.join(" "):l.name?E=l.name:E=n.M5,E===l.name&&(E=u(l,d)),v&&(E=`${E} (comparison)`),E}function u(l,d){let f=0,m=!1;if(d)for(let v=0;v<d.fields.length;v++){const E=d.fields[v];if(l===E){if(m=!0,f>0){f++;break}}else if(l.name===E.name&&(f++,m))break}return f?`${l.name} ${f}`:l.name}function c(l){let d=null;for(let f=0;f<l.length;f++){const m=l[f];for(const v of m.fields)if(v.labels){for(const E in v.labels)if(d===null)d=E;else if(E!==d)return null}}return d}},93796:(Q,A,e)=>{"use strict";e.d(A,{z:()=>o});var n=e(69781),a=e.n(n),i=e(86850),r=e(28073);function o(g){return new Proxy({},{get:(u,c)=>{let l=g.frame.fields.find(v=>c===v.name);if(!l){const v=(0,n.toNumber)(c);l=g.frame.fields[v]}if(l||(l=g.frame.fields.find(v=>c===v.config.displayName)),l||(l=g.frame.fields.find(v=>v.labels?c===v.labels.name:!1)),!l)return;const d=l.display??(0,r.U)(),f=l.values[g.rowIndex],m=d(f);return m.toString=()=>(0,i.zc)(m),m}})}},78257:(Q,A,e)=>{"use strict";e.d(A,{AE:()=>r.AE,CZ:()=>d.CZ,Cc:()=>c.Cc,E1:()=>n.E1,HU:()=>n.HU,N6:()=>i.N,NI:()=>f.NI,NN:()=>r.NN,Of:()=>c.Of,Oh:()=>r.Oh,QY:()=>o.QY,SM:()=>c.SM,SO:()=>i.S,U$:()=>d.U$,UY:()=>d.UY,U_:()=>a.U,VB:()=>r.VB,W0:()=>r.W0,W4:()=>r.W4,WO:()=>o.WO,YO:()=>o.YO,ZD:()=>g.Z,ZN:()=>r.ZN,bP:()=>u.bP,cB:()=>n.cB,dE:()=>n.dE,dz:()=>f.dz,fD:()=>o.fD,gE:()=>a.g,gG:()=>n.gG,gb:()=>c.gb,ii:()=>r.ii,kG:()=>r.kG,m1:()=>u.m1,nG:()=>n.nG,n_:()=>n.n_,nf:()=>d.nf,op:()=>r.op,pZ:()=>n.pZ,r5:()=>n.r5,sg:()=>n.sg,uj:()=>r.uj,xD:()=>f.xD,zv:()=>l.z});var n=e(76236),a=e(28073),i=e(61411),r=e(15476),o=e(99326),g=e(5793),u=e(27369),c=e(19596),l=e(93796),d=e(27957),f=e(56106)},15476:(Q,A,e)=>{"use strict";e.d(A,{AE:()=>g,NN:()=>r,Oh:()=>a,VB:()=>l,W0:()=>i,W4:()=>d,ZN:()=>c,ii:()=>f,kG:()=>n,op:()=>u,uj:()=>o});const n=m=>m,a=(m,v,E)=>{if(m!=null)return parseFloat(m)},i=(m,v,E)=>(delete v.field?.state?.displayName,u(m,v,E)),r=(m,v,E)=>m,o=(m,v,E)=>m,g=(m,v,E)=>m,u=(m,v,E)=>m==null?m:E&&E.expandTemplateVars&&v.replaceVariables&&typeof m=="string"?v.replaceVariables(m,v.field.state.scopedVars):`${m}`,c=(m,v,E)=>m,l=(m,v,E)=>m,d=(m,v,E)=>m;var f=(m=>(m.IncludeAll="all",m.ExcludeBaseNames="exclude",m.OnlyBaseNames="only",m))(f||{})},56106:(Q,A,e)=>{"use strict";e.d(A,{NI:()=>u,dz:()=>l,xD:()=>d});var n=e(69781),a=e.n(n),i=e(66542),r=e(85666),o=e(99326),g=e(27369);function u(f,m){if(f.type===r.fS.boolean)return c(f,m);const E=(0,o.fD)(f).getCalculator(f,m),p=f.state?.range??l(f);return h=>{let s=0;h!==-1/0&&(s=(h-p.min)/p.delta,Number.isNaN(s)&&(s=0));const y=(0,g.pD)(f,h,s);return{percent:s,threshold:y,color:E(h,s,y)}}}function c(f,m){const v={color:m.visualization.getColorByName("green"),percent:1,threshold:void 0},E={color:m.visualization.getColorByName("red"),percent:0,threshold:void 0},p=(0,o.fD)(f);if(p.isContinuous&&p.getColors){const h=p.getColors(m);v.color=h[h.length-1],E.color=h[0]}return h=>h?v:E}function l(f){if(f.type!==r.fS.number)return{min:0,max:100,delta:100};let m=f.config.min,v=f.config.max;if(!(0,n.isNumber)(m)||!(0,n.isNumber)(v))if(f.values&&f.values.length){const E=(0,i.Kx)({field:f,reducers:[i.gz.min,i.gz.max]});(0,n.isNumber)(m)||(m=E[i.gz.min]),(0,n.isNumber)(v)||(v=E[i.gz.max])}else m=0,v=100;return{min:m,max:v,delta:v-m}}function d(f,m){const{config:v}=f;let{min:E,max:p}=v;return(0,n.isNumber)(E)&&(0,n.isNumber)(p)?v:m||!f.state?.range?{...v,...l(f)}:{...v,...f.state.range}}},61411:(Q,A,e)=>{"use strict";e.d(A,{N:()=>i,S:()=>r});var n=e(18662),a=e(5793);const i=new a.Z,r=new n.B},27369:(Q,A,e)=>{"use strict";e.d(A,{bP:()=>g,m1:()=>r,pD:()=>o,yM:()=>i});var n=e(91507),a=e(47423);const i={value:0,color:n.R};function r(u,c){if(!c||c.length===0)return i;let l=c[0];for(const d of c)if(u>=d.value)l=d;else break;return l}function o(u,c,l){const{thresholds:d}=u.config;return d?.mode===a.H.Percentage?r(l*100,d?.steps):r(c,d?.steps)}function g(u){return u.sort((c,l)=>c.value-l.value)}},67455:(Q,A,e)=>{"use strict";e.d(A,{q:()=>n.q1});var n=e(71199)},32711:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{AnnotationChangeEvent:()=>f.n1,AppendedVectors:()=>r.l$,ArrayDataFrame:()=>o.iB,ArrayVector:()=>r.Gt,AsNumberVector:()=>r.sq,BinaryOperationID:()=>n.LH,BinaryOperationVector:()=>r.rM,BusEventBase:()=>f.mA,BusEventWithPayload:()=>f.R_,ByNamesMatcherMode:()=>g.Ys,CSVHeaderStyle:()=>n.x5,CSVReader:()=>n.QM,CircularDataFrame:()=>o.a2,CircularVector:()=>r.dV,ConstantVector:()=>r.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>d.cB,DashboardLoadedEvent:()=>f.Pl,DataFrameView:()=>o.US,DataHoverClearEvent:()=>f.xH,DataHoverEvent:()=>f.es,DataLinkBuiltInVars:()=>n.WC,DataSelectEvent:()=>f.v9,DataSourcePluginContextProvider:()=>C.n,DataSourceTestFailed:()=>f._m,DataSourceTestSucceeded:()=>f.U6,DataSourceUpdatedSuccessfully:()=>f.Ix,DataTransformerID:()=>g.Wk,DocsId:()=>n.xV,EventBusSrv:()=>f.Fb,FieldCache:()=>o.N,FieldConfigEditorBuilder:()=>n.vo,FieldConfigOptionsRegistry:()=>d.ZD,FieldMatcherID:()=>g.mi,FieldNamePickerBaseNameMode:()=>d.ii,FormattedVector:()=>r.$Y,FrameGeometrySourceMode:()=>E.q,FrameMatcherID:()=>g.E4,ISO_8601:()=>u.VJ,IndexVector:()=>r.rm,InternalTimeZones:()=>u.RQ,LayoutModes:()=>p.l,LegacyMappingType:()=>n.HU,MISSING_VALUE:()=>o.Yi,MatcherID:()=>g.Ff,MutableDataFrame:()=>o.vA,NodeGraphDataFrameFieldNames:()=>n.zG,PanelOptionsEditorBuilder:()=>n.rt,PanelPlugin:()=>h.c,PluginContextProvider:()=>D.b,ReducerID:()=>g.gz,Registry:()=>n.Bz,SortedVector:()=>r.oH,StreamingDataFrame:()=>o.Av,StreamingFrameAction:()=>o.T0,SystemDateFormatsState:()=>u.zf,ThemeContext:()=>m.Ni,TransformerCategory:()=>g.wf,UnaryOperationID:()=>n.T1,VAR_CALC:()=>d.pZ,VAR_CELL_PREFIX:()=>d.dE,VAR_FIELD_LABELS:()=>d.E1,VAR_FIELD_NAME:()=>d.n_,VAR_SERIES_NAME:()=>d.HU,ValueMatcherID:()=>g.mE,addDurationToDate:()=>u.Ks,anySeriesWithTimeField:()=>o.m$,anyToNumber:()=>n.IX,applyFieldOverrides:()=>d.SM,applyNullInsertThreshold:()=>g.wb,applyRawFieldOverrides:()=>d.Of,arrayToDataFrame:()=>o.Pc,arrayUtils:()=>n.sq,binaryOperators:()=>n.nk,booleanOverrideProcessor:()=>d.W4,booleanValueFormatter:()=>l.IR,buildHistogram:()=>g.gY,cacheFieldDisplayNames:()=>d.UY,classicColors:()=>n.ZC,closestIdx:()=>o.Ko,colorManipulator:()=>m.r8,compareArrayValues:()=>o.nl,compareDataFrameStructures:()=>o.Ch,containsSearchFilter:()=>n.bf,convertOldAngularValueMappings:()=>n.Jb,createDataFrame:()=>o.at,createDimension:()=>o.q2,createFieldConfigRegistry:()=>y.j,createTheme:()=>m.jG,dataFrameFromJSON:()=>o.vP,dataFrameToJSON:()=>o.Y,dataLinksOverrideProcessor:()=>d.NN,dateMath:()=>u.Rn,dateTime:()=>u.CQ,dateTimeAsMoment:()=>u.C_,dateTimeForTimeZone:()=>u.GY,dateTimeFormat:()=>u.dq,dateTimeFormatISO:()=>u.lf,dateTimeFormatTimeAgo:()=>u.E8,dateTimeFormatWithAbbrevation:()=>u.Fm,dateTimeParse:()=>u.J,decodeFieldValueEntities:()=>o.Jy,decodeFieldValueEnums:()=>o.Ib,deprecationWarning:()=>n.d9,displayNameOverrideProcessor:()=>d.W0,doStandardCalcs:()=>g.uP,durationToMilliseconds:()=>u.iX,ensureTimeField:()=>g.J_,escapeRegex:()=>c.yI,escapeStringForRegex:()=>c.GE,eventFactory:()=>f.Xw,fieldColorModeRegistry:()=>d.WO,fieldMatchers:()=>g.Ls,fieldReducers:()=>g.TB,filterFieldConfigOverrides:()=>s.aS,findCommonLabels:()=>n.FT,findHighlightChunksInText:()=>c.Xt,findMatchesInText:()=>c.lu,findUniqueLabels:()=>n.IU,fixCellTemplateExpressions:()=>d.r5,formatLabels:()=>n.aA,formattedValueToString:()=>l.zc,frameMatchers:()=>g.Ac,getActiveThreshold:()=>d.m1,getAllValuesFromDimension:()=>o.r7,getBuiltInThemes:()=>m.d5,getColumnFromDimension:()=>o.$q,getColumnsFromDimension:()=>o.GV,getDataFrameRow:()=>o.fh,getDataSourceRef:()=>n.iU,getDataSourceUID:()=>n.BT,getDimensionByName:()=>o.YP,getDisplayProcessor:()=>d.U_,getDisplayValueAlignmentFactors:()=>d.sg,getFieldColorMode:()=>d.QY,getFieldColorModeForField:()=>d.fD,getFieldConfigWithMinMax:()=>d.xD,getFieldDisplayName:()=>d.CZ,getFieldDisplayValues:()=>d.nG,getFieldDisplayValuesProxy:()=>d.zv,getFieldMatcher:()=>g.sq,getFieldSeriesColor:()=>d.YO,getFieldTypeFromValue:()=>o.DP,getFlotPairs:()=>n.k8,getFlotPairsConstant:()=>n.HE,getFrameDisplayName:()=>d.nf,getFrameMatchers:()=>g.b9,getHistogramFields:()=>g.qr,getLinksSupplier:()=>T.oB,getLocale:()=>u.Kd,getLocaleData:()=>u.k4,getMinMaxAndDelta:()=>d.dz,getPanelOptionsWithDefaults:()=>s.d4,getProcessedDataFrames:()=>o.F9,getRawDisplayProcessor:()=>d.gE,getScaleCalculator:()=>d.NI,getSearchFilterScopedVar:()=>n._6,getSeriesTimeStep:()=>n.e4,getThemeById:()=>m.jY,getTimeField:()=>o.sV,getTimeZone:()=>u.Ze,getTimeZoneGroups:()=>u.$8,getTimeZoneInfo:()=>u.Pr,getTimeZones:()=>u.ZV,getUniqueFieldName:()=>d.U$,getValueFormat:()=>l.Cf,getValueFormats:()=>l.QW,getValueFormatterIndex:()=>l.Td,getValueFromDimension:()=>o.jC,getValueMatcher:()=>g.IG,getWeekdayIndex:()=>u.ig,getWeekdayIndexByEnglishName:()=>u.jN,getZone:()=>u.nA,guessDecimals:()=>n.dP,guessFieldTypeForField:()=>o.fu,guessFieldTypeFromNameAndValue:()=>o._m,guessFieldTypeFromValue:()=>o.LI,guessFieldTypes:()=>o.SX,hasLinks:()=>d.gG,hasMsResolution:()=>n.fp,hasTimeField:()=>o.jT,histogramBucketSizes:()=>g.Zi,histogramFieldInfo:()=>g.py,histogramFieldsToFrame:()=>g.zM,histogramFrameBucketMaxFieldName:()=>g.cO,histogramFrameBucketMinFieldName:()=>g.wL,histogramTransformer:()=>g.Op,identityOverrideProcessor:()=>d.kG,incrRound:()=>g.Jz,incrRoundDn:()=>g.mB,incrRoundUp:()=>g.UO,intervalToAbbreviatedDurationString:()=>u.vT,isBooleanUnit:()=>l.br,isCustomFieldProp:()=>s.Lc,isDataFrame:()=>o.aY,isDataFrameWithValue:()=>o.z4,isDataSourcePluginContext:()=>b.v,isDataSourceRef:()=>n.cv,isDateTime:()=>u.v9,isDateTimeInput:()=>u.D2,isEmptyObject:()=>n.Qr,isHistogramFrameBucketMaxFieldName:()=>g.kl,isHistogramFrameBucketMinFieldName:()=>g.Ok,isLikelyAscendingVector:()=>g.lP,isReducerID:()=>g.CC,isStandardFieldProp:()=>s._k,isTableData:()=>o.Ji,isTimeSeriesField:()=>o.jM,isTimeSeriesFrame:()=>o.pP,isTimeSeriesFrames:()=>o.xI,isValidDate:()=>u.qb,isValidDuration:()=>u.jO,isValidGoDuration:()=>u.IA,isValidGrafanaDuration:()=>u.fI,localTimeFormat:()=>u.Ji,locale:()=>l.SP,locationUtil:()=>n.uT,makeClassES5Compatible:()=>n.s2,mapInternalLinkToExplore:()=>n._N,matchAllLabels:()=>n.VS,matchPluginId:()=>n.Sp,monacoLanguageRegistry:()=>v.F,numberOverrideProcessor:()=>d.Oh,objRemoveUndefined:()=>n.Hh,onUpdateDatasourceJsonDataOption:()=>n._R,onUpdateDatasourceJsonDataOptionChecked:()=>n.hz,onUpdateDatasourceJsonDataOptionSelect:()=>n.nx,onUpdateDatasourceOption:()=>n.z_,onUpdateDatasourceResetOption:()=>n.HD,onUpdateDatasourceSecureJsonDataOption:()=>n.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>n.TX,outerJoinDataFrames:()=>g.JP,parseDuration:()=>u.RA,parseFlags:()=>c.TL,parseLabels:()=>n.J8,preProcessPanelData:()=>o.zR,rangeUtil:()=>u.cT,readCSV:()=>n.uP,reduceField:()=>g.Kx,renderLegendFormat:()=>n.Wn,renderMarkdown:()=>c.ap,renderTextPanelMarkdown:()=>c.xH,restoreCustomOverrideRules:()=>s.__,reverseDataFrame:()=>o.Y6,roundDecimals:()=>n.O9,scaledUnits:()=>l.Qj,selectOverrideProcessor:()=>d.AE,serializeStateToUrlParam:()=>n.S,setLocale:()=>u.i_,setTimeZoneResolver:()=>u.K7,setWeekStart:()=>u.Ls,shallowCompare:()=>o.Vv,simpleCountUnit:()=>l.SR,sortDataFrame:()=>o.aK,sortThresholds:()=>d.bP,standardEditorsRegistry:()=>d.SO,standardFieldConfigEditorRegistry:()=>d.N6,standardTransformers:()=>g.YR,standardTransformersRegistry:()=>g.Ze,stringFormater:()=>l.vb,stringOverrideProcessor:()=>d.op,stringStartsAsRegEx:()=>c.oH,stringToJsRegex:()=>c.jO,stringToMs:()=>c.e0,systemDateFormats:()=>u.U6,textUtil:()=>c.QX,thresholdsOverrideProcessor:()=>d.ZN,timeZoneAbbrevation:()=>u.Hk,timeZoneFormatUserFriendly:()=>u.Vs,toCSV:()=>n.MJ,toDataFrame:()=>o.g0,toDataFrameDTO:()=>o.og,toDuration:()=>u.np,toFilteredDataFrameDTO:()=>o.Aw,toFixed:()=>l.FH,toFixedScaled:()=>l.bn,toFixedUnit:()=>l.q2,toFloatOrUndefined:()=>c.dz,toIntegerOrUndefined:()=>c.By,toLegacyResponseData:()=>o.Zr,toNumberString:()=>c.PF,toOption:()=>n.Er,toPascalCase:()=>c.Mh,toURLRange:()=>n.R_,toUtc:()=>u.zh,transformDataFrame:()=>g.Hz,unEscapeStringFromRegex:()=>c.x6,unaryOperators:()=>n.mL,unitOverrideProcessor:()=>d.VB,updateDatasourcePluginJsonDataOption:()=>n.tp,updateDatasourcePluginOption:()=>n.fd,updateDatasourcePluginResetOption:()=>n.Mf,updateDatasourcePluginSecureJsonDataOption:()=>n.uw,urlUtil:()=>n.Cj,useFieldOverrides:()=>d.Cc,usePluginContext:()=>P.gp,validateFieldConfig:()=>d.gb,valueMappingsOverrideProcessor:()=>d.uj,valueMatchers:()=>g.U8,vectorator:()=>r.sD,withLoadingIndicator:()=>n.xc});var n=e(4174),a=e(24186),i={};for(const O in a)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","UnaryOperationID","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","matchPluginId","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","toURLRange","unaryOperators","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(O)<0&&(i[O]=()=>a[O]);e.d(A,i);var r=e(39133),o=e(15243),g=e(41047),u=e(43750),c=e(98827),l=e(16613),d=e(78257),f=e(92331),m=e(41990),v=e(39260),E=e(67455),p=e(89732),h=e(42439),s=e(87877),y=e(14103),D=e(35210),C=e(56315),P=e(18286),b=e(8829),T=e(19596)},39260:(Q,A,e)=>{"use strict";e.d(A,{F:()=>n.F});var n=e(22814)},22814:(Q,A,e)=>{"use strict";e.d(A,{F:()=>a});var n=e(18662);const a=new n.B},42439:(Q,A,e)=>{"use strict";e.d(A,{c:()=>c});var n=e(69781),a=e.n(n),i=e(5793),r=e(59889),o=e(74687),g=e(41540),u=e(14103);class c extends r.Sg{constructor(d){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new i.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=d}get defaults(){let d=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const f=new g.rt;this.optionsSupplier(f,{data:[]});for(const m of f.getItems())m.defaultValue!=null&&(0,n.set)(d,m.path,m.defaultValue)}return d}get fieldConfigDefaults(){const d=this._fieldConfigDefaults.defaults;d.custom={};for(const f of this.fieldConfigRegistry.list())f.defaultValue!==void 0&&(0,n.set)(d,f.id,f.defaultValue);return{defaults:{...d},overrides:this._fieldConfigDefaults.overrides}}setDefaults(d){return(0,o.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=d,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(d){return(0,o.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=d,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(d){return this.onPanelMigration=d,this}setPanelChangeHandler(d){return this.onPanelTypeChanged=d,this}setPanelOptions(d){return this.optionsSupplier=d,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(d){return this.dataSupport={...this.dataSupport,...d},this}useFieldConfig(d={}){return this._initConfigRegistry=()=>(0,u.j)(d,this.meta.name),this}setSuggestionsSupplier(d){return this.suggestionsSupplier=d,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(d){return this.meta.id===d}}},87877:(Q,A,e)=>{"use strict";e.d(A,{Lc:()=>E,__:()=>v,_k:()=>p,aS:()=>l,d4:()=>u});var n=e(69781),a=e.n(n),i=e(99326),r=e(91507),o=e(68235),g=e(47423);function u({plugin:h,currentOptions:s,currentFieldConfig:y,isAfterPluginChange:D}){const C=(0,n.mergeWith)({},h.defaults,s||{},(T,O)=>{if((0,n.isArray)(O))return O}),P=c(y,h),b=f(h,P,D);return{options:C,fieldConfig:b}}function c(h,s){const y=s.fieldConfigDefaults,D={defaults:(0,n.mergeWith)({},y.defaults,h?h.defaults:{},(C,P)=>{if((0,n.isArray)(P))return P}),overrides:h?.overrides??[]};d(D.defaults,"",s.fieldConfigRegistry),D.defaults.thresholds&&m(D.defaults.thresholds),D.overrides=l(D.overrides,C=>s.fieldConfigRegistry.getIfExists(C.id)!==void 0);for(const C of D.overrides)for(const P of C.properties)P.id==="thresholds"&&m(P.value);return D}function l(h,s){return h.map(y=>{const D=y.properties.filter(s);return{...y,properties:D}}).filter(y=>y.properties.length>0)}function d(h,s,y){let D=!1;for(const[C,P]of Object.entries(h)){const b=`${s}${C}`,T=!!y.getIfExists(b);if(T){D=!0;continue}(0,n.isArray)(P)||!(0,n.isObject)(P)?T||(0,n.unset)(h,C):d(P,`${b}.`,y)||(0,n.unset)(h,C)}return D}function f(h,s,y){if(!y)return s;const D=h.fieldConfigRegistry.getIfExists(o.qb.Color);if(D&&D.settings){const C=D.settings,P=i.WO.getIfExists(s.defaults.color?.mode);if(!C.byValueSupport&&(!P||P.isByValue))return s.defaults.color={mode:r.S.PaletteClassic},s;if(C.byValueSupport&&C.preferThresholdsMode&&P?.id!==r.S.Fixed&&(!P||!P.isByValue))return s.defaults.color={mode:r.S.Thresholds},s;if(C.bySeriesSupport&&P?.isByValue)return s.defaults.color={mode:r.S.PaletteClassic},s}return s}function m(h){h.mode||(h.mode=g.H.Absolute),h.steps?h.steps.length&&(h.steps[0].value=-1/0):h.steps=[]}function v(h,s){const y={defaults:{...h.defaults,custom:s.defaults.custom},overrides:[...h.overrides]};for(const D of s.overrides)for(const C of D.properties)if(E(C)){const P=y.overrides.find(b=>(0,n.isEqual)(b.matcher,D.matcher));P?P!==D&&P.properties.push(C):y.overrides.push(D)}return y}function E(h){return h.id.startsWith("custom.")}function p(h){return!E(h)}},14103:(Q,A,e)=>{"use strict";e.d(A,{j:()=>r});var n=e(5793),a=e(61411),i=e(41540);function r(g={},u){const c=new n.Z,l=a.N.list(),d={};if(g.useCustomConfig){const f=new i.vo;g.useCustomConfig(f);for(const m of f.getRegistry().list())if(m.isCustom=!0,m.id="custom."+m.id,o(m,l)){const v=d[m.category[0]]??[];v.push(m),d[m.category[0]]=v}else c.register(m)}for(let f of l){const m=f.id;if(!(g.disableStandardOptions&&g.disableStandardOptions.indexOf(m)>-1)){if(g.standardOptions){const v=g.standardOptions[m]?.hideFromDefaults,E=g.standardOptions[m]?.defaultValue,p=g.standardOptions[m]?.settings;v&&(f={...f,hideFromDefaults:v}),E&&(f={...f,defaultValue:E}),p&&(f={...f,settings:f.settings?{...f.settings,...p}:p})}if(c.register(f),f.category&&d[f.category[0]])for(let v of d[f.category[0]])c.register(v)}}for(const f of c.list())if(f.path.indexOf("[")>0)throw new Error(`[${u}] Field config paths do not support arrays: ${f.id}`);return c}function o(g,u){return!!u.find(c=>g.category&&c.category&&g.category[0]===c.category[0])}},98827:(Q,A,e)=>{"use strict";e.d(A,{By:()=>n.By,GE:()=>n.GE,Mh:()=>n.Mh,PF:()=>n.PF,QX:()=>o,TL:()=>i.TL,Xt:()=>i.Xt,ap:()=>a.a,dz:()=>n.dz,e0:()=>n.e0,jO:()=>n.jO,lu:()=>i.lu,oH:()=>n.oH,x6:()=>n.x6,xH:()=>a.x,yI:()=>n.yI});var n=e(84834),a=e(51133),i=e(8410),r=e(77901);const o={escapeHtml:r.Xv,hasAnsiCodes:r.oT,sanitize:r.Nw,sanitizeTextPanelContent:r.he,sanitizeUrl:r.Nm,sanitizeSVGContent:r.Is,sanitizeTrustedTypes:r.cd,sanitizeTrustedTypesRSS:r.pQ}},51133:(Q,A,e)=>{"use strict";e.d(A,{a:()=>g,x:()=>u});var n=e(44179),a=e(38336),i=e(77901);let r=!1;const o={headerIds:!1,pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function g(c,l){r||(n.TU.use((0,a.d)()),n.TU.setOptions({...o}),r=!0);let d;l?.breaks&&(d={...o,breaks:!0});const f=(0,n.TU)(c||"",d);return l?.noSanitize?f:(0,i.he)(f)}function u(c,l){r||(n.TU.use((0,a.d)()),n.TU.setOptions({...o}),r=!0);const d=(0,n.TU)(c||"");return l?.noSanitize?d:(0,i.he)(d)}},77901:(Q,A,e)=>{"use strict";e.d(A,{Is:()=>m,Nm:()=>v,Nw:()=>c,Xv:()=>p,cd:()=>d,he:()=>f,oT:()=>E,pQ:()=>l});var n=e(48378),a=e(21623),i=e.n(a),r=e(72079),o=e.n(r);const g=Object.keys(r.whiteList).reduce((h,s)=>(h[s]=r.whiteList[s]?.concat(["class","style"]),h),{}),u=new r.FilterXSS({whiteList:g,css:{whiteList:{...r.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function c(h){try{return i().sanitize(h,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",h),p(h)}}function l(h){return i().sanitize(h,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function d(h){return i().sanitize(h,{RETURN_TRUSTED_TYPE:!0})}function f(h){try{return u.process(h)}catch{return console.error("String could not be sanitized",h),"Text string could not be sanitized"}}function m(h){return i().sanitize(h,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function v(h){return(0,n.N)(h)}function E(h){return/\u001b\[\d{1,2}m/.test(h)}function p(h){return String(h).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},84834:(Q,A,e)=>{"use strict";e.d(A,{By:()=>v,GE:()=>u,Mh:()=>p,PF:()=>m,dz:()=>E,e0:()=>f,jO:()=>d,oH:()=>l,x6:()=>c,yI:()=>h});var n=e(69781),a=e.n(n);const r="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",o=new RegExp(r,"g"),g=new RegExp("(\\\\)"+r,"g");function u(s){return s&&s.replace(o,"\\$1")}function c(s){return s&&s.replace(g,"$2")}function l(s){return s?s[0]==="/":!1}function d(s){if(!l(s))return new RegExp(`^${s}$`);const y=s.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!y)throw new Error(`'${s}' is not a valid regular expression.`);return new RegExp(y[1],y[2])}function f(s){if(!s)return 0;const y=parseInt(s,10),D=s.slice(String(y).length),C=1e3,P=C*60,b=P*60,T=b*24;switch(D){case"s":return y*C;case"m":return y*P;case"h":return y*b;case"d":return y*T;default:if(!D)return isNaN(y)?0:y;throw new Error("Not supported unit: "+D)}}function m(s){return s!=null&&Number.isFinite(s)?s.toString():""}function v(s){if(!s)return;const y=parseInt(s,10);return isNaN(y)?void 0:y}function E(s){if(!s)return;const y=parseFloat(s);return isNaN(y)?void 0:y}function p(s){const y=(0,n.camelCase)(s);return y.charAt(0).toUpperCase()+y.substring(1)}function h(s){return s.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},8410:(Q,A,e)=>{"use strict";e.d(A,{TL:()=>g,Xt:()=>n,lu:()=>i});function n({searchWords:u,textToHighlight:c}){const l=[];for(const d of u)typeof d=="string"&&l.push(...i(c,d));return l}const a=u=>u.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function i(u,c){if(!u||!c)return[];const l=[],{cleaned:d,flags:f}=g(a(c));let m;try{m=new RegExp(`(?:${d})`,f)}catch{return l}return u.replace(m,(v,...E)=>{if(v){const p=E[E.length-2];l.push({text:v,start:p,length:v.length,end:p+v.length})}return""}),l}const r="-",o=/\(\?([ims-]+)\)/g;function g(u){const c=new Set(["g"]);return{cleaned:u.replace(o,(d,f)=>{const m=f.startsWith(r);for(let v=0;v<f.length;++v){const E=f.charAt(v);m||f.charAt(v-1)===r?c.delete(E):E!==r&&c.add(E)}return""}),flags:Array.from(c).join("")}}},77081:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{alpha:()=>E,asHexString:()=>g,asRgbString:()=>u,darken:()=>p,decomposeColor:()=>l,emphasize:()=>v,getContrastRatio:()=>f,getLuminance:()=>m,hexToRgb:()=>i,hslToRgb:()=>c,lighten:()=>h,recomposeColor:()=>d,rgbToHex:()=>o});var n=e(37479);function a(s,y=0,D=1){return Math.min(Math.max(y,s),D)}function i(s){s=s.slice(1);const y=new RegExp(`.{1,${s.length>=6?2:1}}`,"g");let D=s.match(y);if(!D)return"";let C=Array.from(D);return C[0].length===1&&(C=C.map(P=>P+P)),C?`rgb${C.length===4?"a":""}(${C.map((P,b)=>b<3?parseInt(P,16):Math.round(parseInt(P,16)/255*1e3)/1e3).join(", ")})`:""}function r(s){const y=s.toString(16);return y.length===1?`0${y}`:y}function o(s){if(s.indexOf("#")===0)return s;const{values:y}=l(s);return`#${y.map(D=>r(D)).join("")}`}function g(s){if(s[0]==="#")return s;const y=(0,n.Z)(s);return y.getAlpha()===1?y.toHexString():y.toHex8String()}function u(s){return s.startsWith("rgb")?s:(0,n.Z)(s).toRgbString()}function c(s){const y=l(s),{values:D}=y,C=D[0],P=D[1]/100,b=D[2]/100,T=P*Math.min(b,1-b),O=(M,x=(M+C/30)%12)=>b-T*Math.max(Math.min(x-3,9-x,1),-1);let R="rgb";const I=[Math.round(O(0)*255),Math.round(O(8)*255),Math.round(O(4)*255)];return y.type==="hsla"&&(R+="a",I.push(D[3])),d({type:R,values:I})}function l(s){if(typeof s!="string")return s;if(s.charAt(0)==="#")return l(i(s));const y=s.indexOf("("),D=s.substring(0,y);if(["rgb","rgba","hsl","hsla","color"].indexOf(D)===-1)throw new Error(`Unsupported '${s}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let C=s.substring(y+1,s.length-1),P;if(D==="color"){if(C=C.split(" "),P=C.shift(),C.length===4&&C[3].charAt(0)==="/"&&(C[3]=C[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(P)===-1)throw new Error(`Unsupported ${P} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else C=C.split(",");return C=C.map(b=>parseFloat(b)),{type:D,values:C,colorSpace:P}}function d(s){const{type:y,colorSpace:D}=s;let C=s.values;return y.indexOf("rgb")!==-1?C=C.map((P,b)=>b<3?parseInt(P,10):P):y.indexOf("hsl")!==-1&&(C[1]=`${C[1]}%`,C[2]=`${C[2]}%`),y.indexOf("color")!==-1?C=`${D} ${C.join(" ")}`:C=`${C.join(", ")}`,`${y}(${C})`}function f(s,y,D){const C=m(s),P=m(y,D);return(Math.max(C,P)+.05)/(Math.min(C,P)+.05)}function m(s,y){const D=l(s);let C=D.type==="hsl"?l(c(s)).values:D.values;if(y&&D.type==="rgba"){const b=l(y),T=C[3];C[0]=C[0]*T+b.values[0]*(1-T),C[1]=C[1]*T+b.values[1]*(1-T),C[2]=C[2]*T+b.values[2]*(1-T)}const P=C.map(b=>(D.type!=="color"&&(b/=255),b<=.03928?b/12.92:((b+.055)/1.055)**2.4));return Number((.2126*P[0]+.7152*P[1]+.0722*P[2]).toFixed(3))}function v(s,y=.15){return m(s)>.5?p(s,y):h(s,y)}function E(s,y){if(s==="")return"#000000";if(y=a(y),s[0]==="#"){if(s.length===9)s=s.substring(0,7);else if(s.length<=5){let C="#";for(let P=1;P<4;P++)C+=s[P]+s[P];s=C}return s+Math.round(y*255).toString(16).padStart(2,"0")}else{if(s[3]==="(")return s.replace(")",`, ${y})`);if(s[4]==="(")return s.substring(0,s.lastIndexOf(","))+`, ${y})`}const D=l(s);return D.type==="color"?D.values[3]=`/${y}`:D.values[3]=y,d(D)}function p(s,y){const D=l(s);if(y=a(y),D.type.indexOf("hsl")!==-1)D.values[2]*=1-y;else if(D.type.indexOf("rgb")!==-1||D.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)D.values[C]*=1-y;return d(D)}function h(s,y){const D=l(s);if(y=a(y),D.type.indexOf("hsl")!==-1)D.values[2]+=(100-D.values[2])*y;else if(D.type.indexOf("rgb")!==-1)for(let C=0;C<3;C+=1)D.values[C]+=(255-D.values[C])*y;else if(D.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)D.values[C]+=(1-D.values[C])*y;return d(D)}},3854:(Q,A,e)=>{"use strict";e.d(A,{N:()=>i});var n=e(31733),a=e(58492);const i=n.createContext((0,a.j)());i.displayName="ThemeContext"},58492:(Q,A,e)=>{"use strict";e.d(A,{j:()=>N});function n(){const G=["xs","sm","md","lg","xl","xxl"],_="px",K={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function k(W){return`@media (min-width:${typeof W=="number"?W:K[W]}${_})`}function z(W){return`@media (max-width:${(typeof W=="number"?W:K[W])-5/100}${_})`}return{values:K,up:k,down:z,keys:G,unit:_}}var a=e(69781),i=e(77081);const r={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class o{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:r.blueDarkText,maxContrast:r.white},this.primary={main:r.blueDarkMain,text:r.blueDarkText,border:r.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:r.redDarkMain,text:r.redDarkText},this.success={main:r.greenDarkMain,text:r.greenDarkText},this.warning={main:r.orangeDarkMain,text:r.orangeDarkText},this.background={canvas:r.gray05,primary:r.gray10,secondary:r.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:r.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class g{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:r.blueLightMain,border:r.blueLightText,text:r.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:r.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:r.blueLightMain,text:r.blueLightText},this.error={main:r.redLightMain,text:r.redLightText,border:r.redLightText},this.success={main:r.greenLightMain,text:r.greenLightText},this.warning={main:r.orangeLightMain,text:r.orangeLightText},this.background={canvas:r.gray90,primary:r.white,secondary:r.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:r.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function u(w){const G=new o,_=new g,K=(w.mode??"dark")==="dark"?G:_,{primary:k=K.primary,secondary:z=K.secondary,info:W=K.info,warning:Z=K.warning,success:H=K.success,error:X=K.error,tonalOffset:Y=K.tonalOffset,hoverFactor:ne=K.hoverFactor,contrastThreshold:se=K.contrastThreshold,...re}=w;function ge(me,oe=se){return(0,i.getContrastRatio)(G.text.maxContrast,me,K.background.primary)>=oe?G.text.maxContrast:_.text.maxContrast}const q=({color:me,name:oe})=>{if(me={...me,name:oe},!me.main)throw new Error(`Missing main color for ${oe}`);return me.text||(me.text=me.main),me.border||(me.border=me.text),me.shade||(me.shade=K.mode==="light"?(0,i.darken)(me.main,Y):(0,i.lighten)(me.main,Y)),me.transparent||(me.transparent=(0,i.alpha)(me.main,.15)),me.contrastText||(me.contrastText=ge(me.main)),me.borderTransparent||(me.borderTransparent=(0,i.alpha)(me.border,.25)),me};return(0,a.merge)({...K,primary:q({color:k,name:"primary"}),secondary:q({color:z,name:"secondary"}),info:q({color:W,name:"info"}),error:q({color:X,name:"error"}),success:q({color:H,name:"success"}),warning:q({color:Z,name:"warning"}),getContrastText:ge,emphasize:(me,oe)=>(0,i.emphasize)(me,oe??ne)},re)}function c(w,G){const _={padding:1,headerHeight:4,background:w.background.primary,borderColor:w.border.weak,boxShadow:"none"},K={borderColor:w.border.medium,borderHover:w.border.strong,text:w.text.primary,background:w.mode==="dark"?w.background.canvas:w.background.primary};return{height:{sm:3,md:4,lg:6},input:K,panel:_,dropdown:{background:K.background},tooltip:{background:w.background.secondary,text:w.text.primary},dashboard:{background:w.background.canvas,padding:1},overlay:{background:w.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:42},textHighlight:{text:w.warning.contrastText,background:w.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:w.emphasize(w.background.primary,.03)}}}function l(w){return w.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function d(w){const G=w.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:k=>`${(k??1)*G}px`}}function f(w={}){const{gridSize:G=8}=w,_=k=>typeof k=="string"?k:k*G,K=(...k)=>(k.length===0&&(k[0]=1),k.map(z=>{const W=_(z);return typeof W=="number"?`${W}px`:W}).join(" "));return K.gridSize=G,K.x0="0px",K.x0_25="2px",K.x0_5="4px",K.x1="8px",K.x1_5="12px",K.x2="16px",K.x2_5="20px",K.x3="24px",K.x4="32px",K.x5="40px",K.x6="48px",K.x8="64px",K.x10="80px",K}const m={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},v={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function E(w=["all"],G={}){const{duration:_=v.standard,easing:K=m.easeInOut,delay:k=0}=G;return(Array.isArray(w)?w:[w]).map(z=>`${z} ${typeof _=="string"?_:h(_)} ${K} ${typeof k=="string"?k:h(k)}`).join(",")}function p(w){if(!w)return 0;const G=w/36;return Math.round((4+15*G**.25+G/5)*10)}function h(w){return`${Math.round(w)}ms`}function s(){return{create:E,duration:v,easing:m,getAutoHeightDuration:p}}const y='"Inter", "Helvetica", "Arial", sans-serif',D="'Roboto Mono', monospace";function C(w,G={}){const{fontFamily:_=y,fontFamilyMonospace:K=D,fontSize:k=14,fontWeightLight:z=300,fontWeightRegular:W=400,fontWeightMedium:Z=500,fontWeightBold:H=500,htmlFontSize:X=14}=G,Y=k/14,ne=q=>`${q/X*Y}rem`,se=(q,me,oe,fe,ve)=>{if(oe%2!==0||me%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:_,fontWeight:q,fontSize:ne(me),lineHeight:oe/me,..._===y?{letterSpacing:`${P(fe/me)}em`}:{},...ve}},re={h1:se(W,28,32,-.25),h2:se(W,24,28,0),h3:se(W,22,24,0),h4:se(W,18,22,.25),h5:se(W,16,22,0),h6:se(Z,14,22,.15),body:se(W,k,22,.15),bodySmall:se(W,12,18,.15)};return{htmlFontSize:X,pxToRem:ne,fontFamily:_,fontFamilyMonospace:K,fontSize:k,fontWeightLight:z,fontWeightRegular:W,fontWeightMedium:Z,fontWeightBold:H,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...re}}function P(w){return Math.round(w*1e5)/1e5}var b=e(25274);function T(w){const G={name:"Grafana Default",typography:{fontFamily:{sansSerif:w.typography.fontFamily,monospace:w.typography.fontFamilyMonospace},size:{base:`${w.typography.fontSize}px`,xs:w.typography.size.xs,sm:w.typography.size.sm,md:w.typography.size.md,lg:w.typography.size.lg},heading:{h1:w.typography.h1.fontSize,h2:w.typography.h2.fontSize,h3:w.typography.h3.fontSize,h4:w.typography.h4.fontSize,h5:w.typography.h5.fontSize,h6:w.typography.h6.fontSize},weight:{light:w.typography.fontWeightLight,regular:w.typography.fontWeightRegular,semibold:w.typography.fontWeightMedium,bold:w.typography.fontWeightBold},lineHeight:{xs:w.typography.bodySmall.lineHeight,sm:w.typography.bodySmall.lineHeight,md:w.typography.body.lineHeight,lg:w.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${w.breakpoints.values.xs}px`,sm:`${w.breakpoints.values.sm}px`,md:`${w.breakpoints.values.md}px`,lg:`${w.breakpoints.values.lg}px`,xl:`${w.breakpoints.values.xl}px`,xxl:`${w.breakpoints.values.xxl}px`},spacing:{base:w.spacing.gridSize,insetSquishMd:w.spacing(.5,1),d:w.spacing(2),xxs:w.spacing(.25),xs:w.spacing(.5),sm:w.spacing(1),md:w.spacing(2),lg:w.spacing(3),xl:w.spacing(4),gutter:w.spacing(4),formSpacingBase:w.spacing.gridSize,formMargin:`${w.spacing.gridSize*4}px`,formFieldsetMargin:`${w.spacing.gridSize*2}px`,formInputHeight:w.spacing.gridSize*4,formButtonHeight:w.spacing.gridSize*4,formInputPaddingHorizontal:`${w.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${w.spacing.gridSize/2}px`,formInputMargin:`${w.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${w.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:w.shape.borderRadius(1),md:w.shape.borderRadius(2),lg:w.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:w.spacing.gridSize*w.components.height.sm,md:w.spacing.gridSize*w.components.height.md,lg:w.spacing.gridSize*w.components.height.lg},panelPadding:w.components.panel.padding*w.spacing.gridSize,panelHeaderHeight:w.spacing.gridSize*w.components.panel.headerHeight,zIndex:w.zIndex},_={...O,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},K={bg1:w.colors.background.primary,bg2:w.colors.background.secondary,bg3:w.colors.action.hover,dashboardBg:w.colors.background.canvas,bgBlue1:w.colors.primary.main,bgBlue2:w.colors.primary.shade},k={border1:w.colors.border.weak,border2:w.colors.border.medium,border3:w.colors.border.strong},z={textStrong:w.colors.text.maxContrast,textHeading:w.colors.text.primary,text:w.colors.text.primary,textSemiWeak:w.colors.text.secondary,textWeak:w.colors.text.secondary,textFaint:w.colors.text.disabled,textBlue:w.colors.primary.text},W={formLabel:w.colors.text.primary,formDescription:w.colors.text.secondary,formInputBg:w.components.input.background,formInputBgDisabled:w.colors.action.disabledBackground,formInputBorder:w.components.input.borderColor,formInputBorderHover:w.components.input.borderHover,formInputBorderActive:w.colors.primary.border,formInputBorderInvalid:w.colors.error.border,formInputPlaceholderText:w.colors.text.disabled,formInputText:w.components.input.text,formInputDisabledText:w.colors.action.disabledText,formFocusOutline:w.colors.primary.main,formValidationMessageText:w.colors.error.contrastText,formValidationMessageBg:w.colors.error.main};return{...G,type:w.colors.mode==="dark"?b.Q.Dark:b.Q.Light,isDark:w.isDark,isLight:w.isLight,name:w.name,palette:{..._,brandPrimary:_.orange,brandSuccess:w.colors.success.main,brandWarning:w.colors.warning.main,brandDanger:w.colors.error.main,queryRed:w.colors.error.text,queryGreen:w.colors.success.text,queryPurple:"#fe85fc",queryOrange:_.orange,online:w.colors.success.main,warn:w.colors.success.main,critical:w.colors.success.main},colors:{...K,...k,...W,...z,bodyBg:w.colors.background.canvas,panelBg:w.components.panel.background,panelBorder:w.components.panel.borderColor,pageHeaderBg:w.colors.background.canvas,pageHeaderBorder:w.colors.background.canvas,dropdownBg:W.formInputBg,dropdownShadow:_.black,dropdownOptionHoverBg:K.bg2,link:w.colors.text.primary,linkDisabled:w.colors.text.disabled,linkHover:w.colors.text.maxContrast,linkExternal:w.colors.text.link},shadows:{listItem:"none"},visualization:w.visualization}}const O={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var R=e(91507);function I(w){const G=w.mode==="light"?x():M(),_={};for(const z of G)for(const W of z.shades)if(_[W.name]=W.color,W.aliases)for(const Z of W.aliases)_[Z]=W.color;_.transparent="rgba(0,0,0,0)",_["panel-bg"]=w.background.primary,_.text=w.text.primary;const K=z=>{if(!z)return R.R;const W=_[z];if(W)return W;if(z[0]==="#"||z.indexOf("rgb")>-1)return z;const Z=S[z.toLowerCase()];return Z?(_[z]=Z,Z):z},k=L();return{hues:G,palette:k,getColorByName:K}}function M(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function x(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function L(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const S={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},U={activePanel:999,navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function N(w={}){const{colors:G={},spacing:_={},shape:K={},typography:k={}}=w,z=u(G),W=n(),Z=f(_),H=d(K),X=C(z,k),Y=l(z),ne=s(),se=c(z,Y),re=I(z),ge={name:z.mode==="dark"?"Dark":"Light",isDark:z.mode==="dark",isLight:z.mode==="light",colors:z,breakpoints:W,spacing:Z,shape:H,components:se,typography:X,shadows:Y,transitions:ne,visualization:re,zIndex:{...U},flags:{}};return{...ge,v1:T(ge)}}},41990:(Q,A,e)=>{"use strict";e.d(A,{Ni:()=>r.N,d5:()=>a.d,jG:()=>n.j,jY:()=>a.j,r8:()=>i});var n=e(58492),a=e(26857),i=e(77081),r=e(3854)},26857:(Q,A,e)=>{"use strict";e.d(A,{d:()=>r,j:()=>i});var n=e(18662),a=e(58492);function i(l){return(o.getIfExists(l)??o.get("dark")).build()}function r(l){return o.list().filter(d=>l?!0:!d.isExtra)}const o=new n.B(()=>[{id:"system",name:"System preference",build:g},{id:"dark",name:"Dark",build:()=>(0,a.j)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,a.j)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:c,isExtra:!0},{id:"midnight",name:"Midnight",build:u,isExtra:!0}]);function g(){const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return i(d)}function u(){const l="204, 204, 220";return(0,a.j)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${l}, 0.17)`,medium:`rgba(${l}, 0.25)`,strong:`rgba(${l}, 0.35)`}}})}function c(){return(0,a.j)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},66542:(Q,A,e)=>{"use strict";e.d(A,{CC:()=>u,Kx:()=>c,TB:()=>l,gz:()=>g,uP:()=>d});var n=e(69781),a=e.n(n),i=e(20298),r=e(85666),o=e(18662),g=(y=>(y.sum="sum",y.max="max",y.min="min",y.logmin="logmin",y.mean="mean",y.variance="variance",y.stdDev="stdDev",y.last="last",y.first="first",y.count="count",y.range="range",y.diff="diff",y.diffperc="diffperc",y.delta="delta",y.step="step",y.firstNotNull="firstNotNull",y.lastNotNull="lastNotNull",y.changeCount="changeCount",y.distinctCount="distinctCount",y.allIsZero="allIsZero",y.allIsNull="allIsNull",y.allValues="allValues",y.uniqueValues="uniqueValues",y))(g||{});function u(y){return Object.keys(g).includes(y)}function c(y){const{field:D,reducers:C}=y;if(!D||!C||C.length<1)return{};if(D.state?.calcs){const M=[];for(const x of C)D.state.calcs.hasOwnProperty(x)||M.push(x);if(M.length<1)return{...D.state.calcs}}D.state||(D.state={});const P=l.list(C);if(D.values.length<1){const M={...D.state.calcs};for(const x of P)M[x.id]=x.emptyInputResult!==null?x.emptyInputResult:null;return D.state.calcs=M}const{nullValueMode:T=i.Gl.Ignore}=D.config,O=T===i.Gl.Ignore,R=T===i.Gl.AsZero;if(P.length===1&&P[0].reduce){const M=P[0].reduce(D,O,R);return D.state.calcs={...D.state.calcs,...M},M}let I=d(D,O,R);for(const M of P)!I.hasOwnProperty(M.id)&&M.reduce&&(I={...I,...M.reduce(D,O,R)});return D.state.calcs={...D.state.calcs,...I},I}const l=new o.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value (also excludes NaNs)",standard:!0,aliasIds:["current"],reduce:E},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:v},{id:"firstNotNull",name:"First *",description:"First non-null value (also excludes NaNs)",standard:!0,reduce:m},{id:"first",name:"First",description:"First Value",standard:!0,reduce:f},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:p},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:p},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:h},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:s},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:y=>({allValues:[...y.values]})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:y=>({uniqueValues:[...new Set(y.values)]})}]);function d(y,D,C){const P={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},b=y.values,T=y.type===r.fS.number||y.type===r.fS.time;for(let O=0;O<b.length;O++){let R=b[O];if(O===0&&(P.first=R),P.last=R,R==null){if(D)continue;C&&(R=0)}if(P.count++,R!=null&&!Number.isNaN(R)){const I=P.firstNotNull===null;if(I&&(P.firstNotNull=R),T){if(P.sum+=R,P.allIsNull=!1,P.nonNullCount++,!I){const M=R-P.lastNotNull;P.step>M&&(P.step=M),P.lastNotNull>R?(P.previousDeltaUp=!1,O===b.length-1&&(P.delta+=R)):(P.previousDeltaUp?P.delta+=M:P.delta+=R,P.previousDeltaUp=!0)}R>P.max&&(P.max=R),R<P.min&&(P.min=R),R<P.logmin&&R>0&&(P.logmin=R)}R!==0&&(P.allIsZero=!1),P.lastNotNull=R}}return P.max===-Number.MAX_VALUE&&(P.max=null),P.min===Number.MAX_VALUE&&(P.min=null),P.step===Number.MAX_VALUE&&(P.step=null),P.nonNullCount>0&&(P.mean=P.sum/P.nonNullCount),P.allIsNull&&(P.allIsZero=!1),P.max!==null&&P.min!==null&&(P.range=P.max-P.min),(0,n.isNumber)(P.firstNotNull)&&(0,n.isNumber)(P.lastNotNull)&&(P.diff=P.lastNotNull-P.firstNotNull),(0,n.isNumber)(P.firstNotNull)&&(0,n.isNumber)(P.diff)&&(P.diffperc=P.diff/P.firstNotNull),P}function f(y,D,C){return{first:y.values[0]}}function m(y,D,C){const P=y.values;for(let b=0;b<P.length;b++){const T=P[b];if(T!=null&&!Number.isNaN(T))return{firstNotNull:T}}return{firstNotNull:null}}function v(y,D,C){const P=y.values;return{last:P[P.length-1]}}function E(y,D,C){const P=y.values;let b=P.length-1;for(;b>=0;){const T=P[b--];if(T!=null&&!Number.isNaN(T))return{lastNotNull:T}}return{lastNotNull:null}}function p(y,D,C){if(!(y.type===r.fS.number||y.type===r.fS.time))return{variance:0,stdDev:0};let P=0,b=0,T=0;const O=y.values;for(let R=0;R<O.length;R++){const I=O[R];if(I!=null){T++;let M=b;b+=(I-M)/T,P+=(I-M)*(I-b)}}if(T>0){const R=P/T;return{variance:R,stdDev:Math.sqrt(R)}}return{variance:0,stdDev:0}}function h(y,D,C){const P=y.values;let b=0,T=!0,O=null;for(let R=0;R<P.length;R++){let I=P[R];if(I===null){if(D)continue;C&&(I=0)}!T&&O!==I&&b++,T=!1,O=I}return{changeCount:b}}function s(y,D,C){const P=y.values,b=new Set;for(let T=0;T<P.length;T++){let O=P[T];if(O===null){if(D)continue;C&&(O=0)}b.add(O)}return{distinctCount:b.size}}},41047:(Q,A,e)=>{"use strict";e.d(A,{Ac:()=>i.Ac,CC:()=>o.CC,E4:()=>n.E4,Ff:()=>n.Ff,Hz:()=>g.H,IG:()=>i.IG,JP:()=>l._9,J_:()=>f.J_,Jz:()=>d.Jz,Kx:()=>o.Kx,Ls:()=>i.Ls,Ok:()=>d.Ok,Op:()=>d.Op,TB:()=>o.TB,U8:()=>i.U8,UO:()=>d.UO,Wk:()=>a.W,YR:()=>r.Y,Ys:()=>c.Ys,Ze:()=>u.Z,Zi:()=>d.Zi,b9:()=>i.b9,cO:()=>d.cO,gY:()=>d.gY,gz:()=>o.gz,kl:()=>d.kl,lP:()=>l.lP,mB:()=>d.mB,mE:()=>n.mE,mi:()=>n.mi,py:()=>d.py,qr:()=>d.qr,sq:()=>i.sq,uP:()=>o.uP,wL:()=>d.wL,wb:()=>m.w,wf:()=>u.w,zM:()=>d.zM});var n=e(18198),a=e(20447),i=e(85610),r=e(68911),o=e(66542),g=e(96503),u=e(39729),c=e(31414),l=e(96609),d=e(48493),f=e(70816),m=e(63621)},85610:(Q,A,e)=>{"use strict";e.d(A,{Ac:()=>E,IG:()=>y,Ls:()=>v,U8:()=>p,b9:()=>s,sq:()=>h});var n=e(18662),a=e(56654),i=e(59716),r=e(31414),o=e(32633),g=e(92898),u=e(64559),c=e(88480),l=e(29316),d=e(45458),f=e(26168),m=e(22624);const v=new n.B(()=>[...(0,o.Ty)(),...(0,a.N)(),...(0,r.Lk)(),...(0,u.z)(),i.b]),E=new n.B(()=>[...(0,o.fX)(),...(0,r.cC)(),...(0,g.n)()]),p=new n.B(()=>[...(0,l.a)(),...(0,d.H)(),...(0,c.T)(),...(0,f.G)(),...(0,m.G)()]);function h(D){const C=v.get(D.id);if(!C)throw new Error("Unknown field matcher: "+D.id);return C.get(D.options)}function s(D){const C=E.get(D.id);if(!C)throw new Error("Unknown frame matcher: "+D.id);return C.get(D.options)}function y(D){const C=p.get(D.id);if(!C)throw new Error("Unknown value matcher: "+D.id);return C.get(D.options)}},31414:(Q,A,e)=>{"use strict";e.d(A,{Lk:()=>E,Ys:()=>o,cC:()=>p});var n=e(27957),a=e(84834),i=e(85666),r=e(18198),o=(h=>(h.exclude="exclude",h.include="include",h))(o||{});const g={id:r.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:h=>{const y=c(new Set([h]));return(D,C,P)=>h===D.name||h===(0,n.CZ)(D,C,P)||!!(y&&y(D,C,P))},getOptionsDisplayText:h=>`Field name: ${h}`},u={id:r.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:h=>{const{names:s,mode:y="include"}=h,D=new Set(s??[]),C=c(D),P=(b,T,O)=>D.has(b.name)||D.has((0,n.CZ)(b,T,O))||!!(C&&C(b,T,O));return y==="exclude"?(b,T,O)=>!P(b,T,O):P},getOptionsDisplayText:h=>{const{names:s,mode:y}=h,D=(s??[]).join(", ");return y==="exclude"?`All except: ${D}`:`All of: ${D}`}};function c(h){let s;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(h.has(i.M5)?s=(D,C)=>!!D.labels&&D.labels?.__name__===D.name:(h.has("Time")||h.has("time"))&&(s=(D,C)=>C.meta?.typeVersion==null&&D.type===i.fS.time)),s}const l={id:r.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:h=>{const s=m(h);return(y,D,C)=>{const P=(0,n.CZ)(y,D,C);return!!s&&s.test(P)}},getOptionsDisplayText:h=>`Field name by pattern: ${h}`},d={id:r.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:h=>(s,y,D)=>y.refId===h,getOptionsDisplayText:h=>`Math all fields returned by query with reference ID: ${h}`},f={id:r.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:h=>{const s=l.get(h?.pattern||""),y=u.get({mode:"include",names:h?.names??[]});return(D,C,P)=>y(D,C,P)||s(D,C,P)},getOptionsDisplayText:h=>{const s=h?.pattern??"",y=h?.names?.join(",")??"";return`Field name by pattern: ${s} or names: ${y}`}},m=h=>{if(h)try{return(0,a.jO)(h)}catch(s){console.error(s);return}},v={id:r.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:h=>{const s=(0,a.jO)(h);return y=>s.test(y.name||"")},getOptionsDisplayText:h=>`Frame name: ${h}`};function E(){return[g,l,u,f,d]}function p(){return[v]}},32633:(Q,A,e)=>{"use strict";e.d(A,{Qw:()=>v,Ty:()=>D,fX:()=>C,m3:()=>d});var n=e(85666),a=e(85610),i=e(18198);const r={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const b=P.map(T=>(0,a.sq)(T));return(T,O,R)=>{for(const I of b)if(I(T,O,R))return!0;return!1}},getOptionsDisplayText:P=>{let b="";for(const T of P){b.length>0&&(b+=" OR ");const O=a.Ls.get(T.id);b+=O.getOptionsDisplayText?O.getOptionsDisplayText(T):O.name}return b}},o={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const b=P.map(T=>(0,a.b9)(T));return T=>{for(const O of b)if(O(T))return!0;return!1}},getOptionsDisplayText:P=>{let b="";for(const T of P){b.length>0&&(b+=" OR ");const O=a.Ac.get(T.id);b+=O.getOptionsDisplayText?O.getOptionsDisplayText(T):O.name}return b}},g={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const b=P.map(T=>(0,a.sq)(T));return(T,O,R)=>{for(const I of b)if(!I(T,O,R))return!1;return!0}},getOptionsDisplayText:P=>{let b="";for(const T of P){b.length>0&&(b+=" AND ");const O=a.Ls.get(T.id);b+=O.getOptionsDisplayText?O.getOptionsDisplayText(T):O.name}return b}},u={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const b=P.map(T=>(0,a.b9)(T));return T=>{for(const O of b)if(!O(T))return!1;return!0}},getOptionsDisplayText:P=>{let b="";for(const T of P){b.length>0&&(b+=" AND ");const O=a.Ac.get(T.id);b+=O.getOptionsDisplayText?O.getOptionsDisplayText(T):O.name}return b}},c={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const b=(0,a.sq)(P);return(T,O,R)=>!b(T,O,R)},getOptionsDisplayText:P=>{const b=a.Ls.get(P.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(P.options):b.name)}},l={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const b=(0,a.b9)(P);return T=>!b(T)},getOptionsDisplayText:P=>{const b=a.Ac.get(P.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(P.options):b.name)}},d=P=>!0,f=P=>!0,m=P=>!1,v=P=>P.type!==n.fS.time,E=P=>!1,p={id:i.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:P=>d,getOptionsDisplayText:P=>"Always"},h={id:i.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:P=>f,getOptionsDisplayText:P=>"Always"},s={id:i.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:P=>m,getOptionsDisplayText:P=>"Never"},y={id:i.Ff.neverMatch,name:"No Frames",description:"Never Match",get:P=>E,getOptionsDisplayText:P=>"Never"};function D(){return[r,g,c,p,s]}function C(){return[o,u,l,h,y]}},39729:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>i,w:()=>a});var n=e(18662),a=(r=>(r.Combine="combine",r.CalculateNewFields="calculateNewFields",r.CreateNewVisualization="createNewVisualization",r.Filter="filter",r.PerformSpatialOperations="performSpatialOperations",r.Reformat="reformat",r.ReorderAndRename="reorderAndRename",r))(a||{});const i=new n.B},96503:(Q,A,e)=>{"use strict";e.d(A,{H:()=>l});var n=e(86457),a=e(89582),i=e(4558),r=e(85610),o=e(39729);const g=(f,m)=>v=>{const E=o.Z.get(f.id);if(!E)return v;const h={...E.transformation.defaultOptions??{},...f.options},s=f.filter?.options?(0,r.b9)(f.filter):void 0;return v.pipe((0,a.z)(y=>(0,n.of)(u(y,s)).pipe(E.transformation.operator(h,m),c(y,E,s))))};function u(f,m){return m?f.filter(v=>m(v)):f}const c=(f,m,v)=>E=>E.pipe((0,i.U)(p=>{if(p===f)return p;for(const h of p)h.meta||(h.meta={}),h.meta.transformations?h.meta.transformations=[...h.meta.transformations,m.id]:h.meta.transformations=[m.id];if(v){let h=0;const s=f.filter((y,D)=>{const C=!v(y);return C&&!h&&(h=D),C});s.length&&p.splice(h,0,...s)}return p}));function l(f,m,v){const E=(0,n.of)(m);if(!f.length)return E;const p=[],h=v??{interpolate:s=>s};for(let s=0;s<f.length;s++){const y=f[s];if(d(y))p.push(y(h));else{if(y.disabled)continue;p.push(g(y,h))}}return E.pipe.apply(E,p)}function d(f){return typeof f=="function"}},68911:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>Pe});var n=e(55589),a=e(6420),i=e(70816),r=e(27026),o=e(13217),g=e(88860),u=e(18198),c=e(20447);const l={id:c.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(Ee,he)=>Le=>{const ke={};return Ee.include&&(ke.include={id:u.E4.byRefId,options:Ee.include}),Ee.exclude&&(ke.exclude={id:u.E4.byRefId,options:Ee.exclude}),Le.pipe(o.u.operator(ke,he))}};var d=e(40443),f=e(23626),m=e(4558),v=e(56528);const E={id:c.W.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:Ee=>{for(const he of Ee)for(const Le of he.fields)if(Le.type==="time")return v.s.Applicable;return v.s.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:Ee=>he=>he.pipe((0,m.U)(Le=>{const ke=p(Ee.timeField,Ee.outputFormat,Ee.timezone);return!Array.isArray(Le)||Le.length===0?Le:Le.map(ot=>({...ot,fields:ke(ot.fields)}))}))},p=(Ee,he,Le)=>ke=>ke.map(ot=>{if(ot.name===Ee){let it=null;return Le?it=(0,i.ub)(ot,he,{timeZone:Le}):it=(0,i.ub)(ot,he),it}return ot});var h=e(13854),s=e(27957),y=e(85666),D=e(85610);const C="Time",P="Time",b="Value",T=v.U.Empty,O=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,R={id:c.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:C,rowField:P,valueField:b},isApplicable:Ee=>{let he=0;for(const Le of Ee)he+=Le.fields.length;return he>=3?v.s.Applicable:v.s.NotApplicable},isApplicableDescription:Ee=>{let he=0;for(const Le of Ee)he+=Le.fields.length;return`Grouping to matrix requiers at least 3 fields to work. Currently there are ${he} fields.`},operator:Ee=>he=>he.pipe((0,m.U)(Le=>{const ke=Ee.columnField||C,ot=Ee.rowField||P,it=Ee.valueField||b,ce=Ee.emptyValue||T;if(Le.length!==1)return Le;const le=Le[0],Re=M(le,ke),Ae=M(le,ot),Oe=M(le,it),$e=`${ot}\\${ke}`;if(!Re||!Ae||!Oe)return Le;const Ye=I(Re.values),Ne=I(Ae.values),je={};for(let Fe=0;Fe<Oe.values.length;Fe++){const Te=Re.values[Fe],Ve=Ae.values[Fe],tt=Oe.values[Fe];je[Te]||(je[Te]={}),je[Te][Ve]=tt}const ut=[{name:$e,values:Ne,type:y.fS.string,config:{}}];for(const Fe of Ye){let Te=[];for(const Ve of Ne){const tt=je[Fe][Ve]??x(ce);Te.push(tt)}O&&typeof Fe=="number"&&(Oe.config={...Oe.config,displayNameFromDS:void 0}),ut.push({name:Fe.toString(),values:Te,config:Oe.config,type:Oe.type})}return[{fields:ut,length:Ne.length}]}))};function I(Ee){const he=new Set;for(let Le=0;Le<Ee.length;Le++)he.add(Ee[Le]);return Array.from(he)}function M(Ee,he){for(let Le=0;Le<Ee.fields.length;Le++){const ke=Ee.fields[Le];let ot;if(O?ot=D.Ls.get(u.mi.byName).get(he)(ke,Ee,[Ee]):ot=he===(0,s.CZ)(ke),ot)return ke}return null}function x(Ee){switch(Ee){case v.U.False:return!1;case v.U.True:return!0;case v.U.Null:return null;case v.U.Empty:default:return""}}var L=e(48493),S=e(89957),U=e(69452),N=e(79177);const w=10,G={id:c.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:w},operator:(Ee,he)=>Le=>Le.pipe((0,m.U)(ke=>{let ot=w;return Ee.limitField!==void 0&&(typeof Ee.limitField=="string"?(0,N.U)()?ot=parseInt(he.interpolate(Ee.limitField),10):ot=parseInt(Ee.limitField,10):ot=Ee.limitField),ke.map(it=>it.length>ot?{...it,fields:it.fields.map(ce=>({...ce,values:ce.values.slice(0,ot)})),length:ot}:it)}))};var _=e(7994),K=e(95347),k=e(52517);const z={id:c.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:Ee=>he=>he.pipe((0,m.U)(Le=>{const ke=W(Ee.renameByName);return!Array.isArray(Le)||Le.length===0?Le:Le.map(ot=>({...ot,fields:ke(ot)}))}))},W=Ee=>he=>!Ee||Object.keys(Ee).length===0?he.fields:he.fields.map(Le=>{const ke=(0,s.CZ)(Le,he),ot=Ee[ke];return typeof ot!="string"||ot.length===0?Le:{...Le,config:{...Le.config,displayName:ot},state:{...Le.state,displayName:ot}}}),Z={id:c.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{},includeByName:{}},isApplicable:Ee=>Ee.length>1?v.s.NotPossible:v.s.Applicable,operator:(Ee,he)=>Le=>Le.pipe(g.w.operator({include:Ee.includeByName?{names:H(Ee.includeByName)}:void 0,exclude:{names:H(Ee.excludeByName)}},he),k.t.operator(Ee,he),z.operator(Ee,he))},H=Ee=>Ee?Object.keys(Ee).filter(he=>Ee[he]):[];var X=e(18234),Y=e(84834);const ne={id:c.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:Ee=>he=>he.pipe((0,m.U)(Le=>!Array.isArray(Le)||Le.length===0?Le:Le.map(se(Ee))))},se=Ee=>he=>{const Le=(0,Y.jO)(Ee.regex),ke=he.fields.map(ot=>{const it=(0,s.CZ)(ot,he);if(!Le.test(it))return ot;const ce=it.replace(Le,Ee.renamePattern);return{...ot,config:{...ot.config,displayName:ce},state:{...ot.state,displayName:ce}}});return{...he,fields:ke}};var re=e(69781),ge=e(47862),q=e(98147),me=e(23498);const oe={id:c.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:Ee=>he=>he.pipe((0,m.U)(Le=>{if(!Array.isArray(Le)||Le.length<=1||(Le=Le.filter(le=>le.length>0),!(0,me.xI)(Le)))return Le;const ke={},ot=new Set,it=new ge.v,ce={name:y.rN,values:[],config:{},type:y.fS.string};for(let le=0;le<Le.length;le++){const Re=Le[le];for(let Ae=0;Ae<Re.fields.length;Ae++){const Oe=Re.fields[Ae];if(Oe.type===y.fS.time){ke[le]=Ae,ot.has(y.Ls)||(it.addField(fe(Oe,y.Ls)),it.addField(ce),ot.add(y.Ls));continue}ot.has(y.M5)||(it.addField(fe(Oe,y.M5)),ot.add(y.M5))}}for(let le=0;le<Le.length;le++){const Re=Le[le];for(let Ae=0;Ae<Re.length;Ae++){const Oe=ke[le],$e=Oe===0?1:0;it.add({[y.Ls]:Re.fields[Oe].values[Ae],[y.rN]:(0,s.nf)(Re),[y.M5]:Re.fields[$e].values[Ae]})}}return[(0,q.aK)(it,0,!0)]}))},fe=(Ee,he)=>({...(0,re.omit)(Ee,["values","state","labels","config","name"]),name:he,values:[],config:{...(0,re.omit)(Ee.config,["displayName","displayNameFromDS"])}}),ve={id:c.W.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(Ee,he)=>Le=>Le.pipe((0,m.U)(ke=>!Array.isArray(ke)||ke.length===0||!Ee?.sort?.length?ke:pe(ke,Ee.sort,he)))};function pe(Ee,he,Le){return Ee.map(ke=>{const ot=Me(ke,he,Le);return ot.length&&ot[0].index!=null?(0,q.aK)(ke,ot[0].index,ot[0].desc):ke})}function Me(Ee,he,Le){return he.map(ke=>ke.index!=null?ke:(0,N.U)()?{...ke,index:Ee.fields.findIndex(ot=>Le.interpolate(ke.field)===(0,s.CZ)(ot,Ee))}:{...ke,index:Ee.fields.findIndex(ot=>ke.field===(0,s.CZ)(ot,Ee))})}const Pe={noopTransformer:K.d,filterFieldsTransformer:o.P,filterFieldsByNameTransformer:g.w,filterFramesTransformer:o.u,filterFramesByRefIdTransformer:l,filterByValueTransformer:d.JA,formatStringTransformer:f.kA,formatTimeTransformer:E,orderFieldsTransformer:k.t,organizeFieldsTransformer:Z,reduceTransformer:X.mf,concatenateTransformer:a.aE,calculateFieldTransformer:n.U,joinByFieldTransformer:S.M,seriesToColumnsTransformer:S.M,seriesToRowsTransformer:oe,renameFieldsTransformer:z,labelsToFieldsTransformer:U.r,ensureColumnsTransformer:r.W,groupByTransformer:h.i,sortByTransformer:ve,mergeTransformer:_.R,renameByRegexTransformer:ne,histogramTransformer:L.Op,convertFieldTypeTransformer:i.mg,groupingToMatrixTransformer:R,limitTransformer:G}},55589:(Q,A,e)=>{"use strict";e.d(A,{Hx:()=>y,U:()=>T,a1:()=>C,h:()=>G,iO:()=>s,ie:()=>h});var n=e(69781),a=e.n(n),i=e(4558),r=e(98147),o=e(27957),g=e(85666),u=e(20298),c=e(43280),l=e(95961),d=e(66542),f=e(85610),m=e(18198),v=e(27026),E=e(20447),p=e(95347),h=(_=>(_.ReduceRow="reduceRow",_.CumulativeFunctions="cumulativeFunctions",_.WindowFunctions="windowFunctions",_.BinaryOperation="binary",_.UnaryOperation="unary",_.Index="index",_))(h||{}),s=(_=>(_.Percentage="percentage",_.Fixed="fixed",_))(s||{}),y=(_=>(_.Trailing="trailing",_.Centered="centered",_))(y||{});const D={reducer:d.gz.sum},C={reducer:d.gz.mean,windowAlignment:"trailing",windowSizeMode:"percentage",windowSize:.1},P={left:"",operator:c.L.Add,right:""},b={operator:l.T.Abs,fieldName:""},T={id:E.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:d.gz.sum}},operator:(_,K)=>k=>{const z=_&&_.timeSeries!==!1?v.W.operator(null,K):p.d.operator({},K);return _.alias!=null&&(_.alias=K.interpolate(_.alias)),k.pipe(z,(0,i.U)(W=>{const Z=_.mode??"reduceRow";let H;switch(Z){case"reduceRow":H=S((0,n.defaults)(_.reduce,D),W);break;case"cumulativeFunctions":H=L((0,n.defaults)(_.cumulative,D),W);break;case"windowFunctions":H=O((0,n.defaults)(_.window,C),W);break;case"unary":H=w((0,n.defaults)(_.unary,b),W);break;case"binary":const X={..._.binary,left:K.interpolate(_.binary?.left),right:K.interpolate(_.binary?.right)};H=N((0,n.defaults)(X,P),W);break;case"index":return W.map(Y=>{const ne=[...Array(Y.length).keys()];if(_.index?.asPercentile)for(let re=0;re<ne.length;re++)ne[re]=ne[re]/ne.length;const se={name:_.alias??"Row",type:g.fS.number,values:ne,config:_.index?.asPercentile?{unit:"percentunit"}:{}};return{...Y,fields:_.replaceFields?[se]:[...Y.fields,se]}})}return H?W.map(X=>{const Y=H(X);if(!Y)return X;const ne={name:G(_),type:g.fS.number,config:{},values:Y};let se=[];if(_.replaceFields){const{timeField:re}=(0,r.sV)(X);re&&_.timeSeries!==!1?se=[re,ne]:se=[ne]}else se=[...X.fields,ne];return{...X,fields:se}}):W}))}};function O(_,K){if(_.windowSize<=0)throw new Error("Add field from calculation transformation - Window size must be larger than 0");let k=(0,f.sq)({id:m.mi.numeric});return _.field&&(k=(0,f.sq)({id:m.mi.byNames,options:{names:[_.field]}})),z=>{const W=Math.ceil(_.windowSize*(_.windowSizeMode==="percentage"?z.length:1));let Z=null;for(const H of z.fields)if(k(H,z,K)){Z=H;break}if(Z){if(![d.gz.mean,d.gz.stdDev,d.gz.variance].includes(_.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${_.reducer}`);return _.windowAlignment==="centered"?I(z,_.reducer,Z,W):R(z,_.reducer,Z,W)}}}function R(_,K,k,z){const W=[];let Z=0,H=0;for(let X=0;X<_.length;X++)if(K===d.gz.mean){const Y=k.values[X];Y!=null&&(H++,Z+=Y,X>z-1&&(Z-=k.values[X-z],H--)),W.push(H===0?0:Z/H)}else if(K===d.gz.variance){const Y=Math.max(0,X-z+1),ne=X+1;W.push(M(k.values.slice(Y,ne)))}else if(K===d.gz.stdDev){const Y=Math.max(0,X-z+1),ne=X+1;W.push(x(k.values.slice(Y,ne)))}return W}function I(_,K,k,z){const W=[];let Z=0,H=0;const X=Math.ceil(z/2)-1,Y=Math.floor(z/2);for(let ne=0;ne<_.length;ne++){const se=ne-Y,re=ne+X;if(K===d.gz.mean){if(ne===0)for(let ge=0;ge<X+1&&ge<k.values.length;ge++)k.values[ge]!=null&&(Z+=k.values[ge],H++);else re<k.values.length&&k.values[re]!=null&&(Z+=k.values[re],H++),se>0&&k.values[se-1]!=null&&(Z-=k.values[se-1],H--);W.push(H===0?0:Z/H)}else if(K===d.gz.variance){const ge=k.values.slice(Math.max(0,se),Math.min(re+1,k.values.length));W.push(M(ge))}else if(K===d.gz.stdDev){const ge=k.values.slice(Math.max(0,se),Math.min(re+1,k.values.length));W.push(x(ge))}}return W}function M(_){if(_.length<1)return 0;let K=0,k=0,z=0;for(let Z=0;Z<_.length;Z++){const H=_[Z];if(H!=null){z++;let X=k;k+=(H-X)/z,K+=(H-X)*(H-k)}}return z===0?0:K/z}function x(_){return Math.sqrt(M(_))}function L(_,K){let k=(0,f.sq)({id:m.mi.numeric});if(_.field&&(k=(0,f.sq)({id:m.mi.byNames,options:{names:[_.field]}})),![d.gz.mean,d.gz.sum].includes(_.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${_.reducer}`);return z=>{let W=null;for(const X of z.fields)if(k(X,z,K)){W=X;break}if(!W)return;const Z=[];let H=0;for(let X=0;X<z.length;X++)H+=W.values[X]??0,_.reducer===d.gz.sum?Z.push(H):_.reducer===d.gz.mean&&Z.push(H/(X+1));return Z}}function S(_,K){let k=(0,f.sq)({id:m.mi.numeric});_.include&&_.include.length&&(k=(0,f.sq)({id:m.mi.byNames,options:{names:_.include}}));const z=d.TB.get(_.reducer);if(!z)throw new Error(`Unknown reducer: ${_.reducer}`);const W=z.reduce??d.uP,Z=_.nullValueMode===u.Gl.Ignore,H=_.nullValueMode===u.Gl.AsZero;return X=>{const Y=[];for(const ge of X.fields)k(ge,X,K)&&Y.push(ge.values);const ne=Y.length,se={name:"temp",values:new Array(ne),type:g.fS.number,config:{}},re=[];for(let ge=0;ge<X.length;ge++){for(let q=0;q<ne;q++)se.values[q]=Y[q][ge];re.push(W(se,Z,H)[_.reducer])}return re}}function U(_,K,k){if(!K)return;for(const W of _.fields)if(K===(0,o.CZ)(W,_,k))return W.type===g.fS.boolean?W.values.map(Z=>Z?1:0):W.values;const z=parseFloat(K);if(!isNaN(z))return new Array(_.length).fill(z)}function N(_,K){const k=c.n.getIfExists(_.operator);return z=>{const W=U(z,_.left,K),Z=U(z,_.right,K);if(!W||!Z||!k)return;const H=new Array(W.length);for(let X=0;X<H.length;X++)H[X]=k.operation(W[X],Z[X]);return H}}function w(_,K){const k=l.m.getIfExists(_.operator);return z=>{let W=[];for(const H of z.fields)_.fieldName===(0,o.CZ)(H,z,K)&&H.type===g.fS.number&&(W=H.values);if(!W.length||!k)return;const Z=new Array(W.length);for(let H=0;H<Z.length;H++)Z[H]=k.operation(W[H]);return Z}}function G(_){if(_.alias?.length)return _.alias;switch(_.mode){case"cumulativeFunctions":{const{cumulative:K}=_;return`cumulative ${K?.reducer??""}${K?.field?`(${K.field})`:""}`}case"windowFunctions":{const{window:K}=_;return`${K?.windowAlignment??""} moving ${K?.reducer??""}${K?.field?`(${K.field})`:""}`}case"unary":{const{unary:K}=_;return`${K?.operator??""}${K?.fieldName?`(${K.fieldName})`:""}`}case"binary":{const{binary:K}=_;return`${K?.left??""} ${K?.operator??""} ${K?.right??""}`.replace(/\$/g,"")}case"reduceRow":{const K=d.TB.getIfExists(_.reduce?.reducer);if(K)return K.name}break;case"index":return"Row"}return"math"}},6420:(Q,A,e)=>{"use strict";e.d(A,{HO:()=>r,aE:()=>o});var n=e(4558),a=e(85666),i=e(20447),r=(u=>(u.Drop="drop",u.FieldName="field",u.Label="label",u))(r||{});const o={id:i.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:u=>c=>c.pipe((0,n.U)(l=>!Array.isArray(l)||l.length<2?l:[g(l,u)]))};function g(u,c){let l=!0,d=u[0].length;const f=c.frameNameLabel??"frame";let m=[];for(const v of u){d!==v.length&&(l=!1,d=Math.max(d,v.length));for(const E of v.fields){const p={...E};p.state=void 0,v.name&&(c.frameNameMode==="drop"||(c.frameNameMode==="label"?(p.labels={...E.labels},p.labels[f]=v.name):!p.name||p.name===a.M5?p.name=v.name:p.name=`${v.name} \xB7 ${E.name}`)),m.push(p)}}return l||(m=m.map(v=>{if(v.values.length===d)return v;const E=v.values.slice();return E.length=d,{...v,values:E}})),{fields:m,length:d}}},70816:(Q,A,e)=>{"use strict";e.d(A,{J_:()=>h,mg:()=>u,p8:()=>l,ub:()=>E});var n=e(4558),a=e(42016),i=e(85666),r=e(85610),o=e(18198),g=e(20447);const u={id:g.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(y,D)=>C=>C.pipe((0,n.U)(P=>u.transformer(y,D)(P))),transformer:y=>D=>!Array.isArray(D)||D.length===0?D:c(y,D)??[]};function c(y,D){if(!y.conversions.length)return D;const C=D.map(P=>({...P}));for(const P of y.conversions){if(!P.targetField)continue;const b=r.Ls.get(o.mi.byName).get(P.targetField);for(const T of C)T.fields=T.fields.map(O=>b(O,T,C)?l(O,P):O)}return C}function l(y,D){switch(D.destinationType){case i.fS.time:return h(y,D.dateFormat);case i.fS.number:return m(y);case i.fS.string:return E(y,D.dateFormat,{timeZone:D.timezone});case i.fS.boolean:return v(y);case i.fS.enum:return s(y,D.enumConfig);case i.fS.other:return p(y);default:return y}}const d=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function f(y,D){let C=D?{format:D}:void 0;const P=y.values.slice();let b=P.find(O=>O!=null),T=typeof b=="string"&&d.test(b);for(let O=0;O<P.length;O++)if(P[O]){let R=T?Date.parse(P[O]):(0,a.J)(P[O],C).valueOf();P[O]=Number.isFinite(R)?R:null}else P[O]=null;return{...y,type:i.fS.time,values:P}}function m(y){const D=y.values.slice(),C=D.some(P=>typeof P=="string");for(let P=0;P<D.length;P++){let b=D[P];C&&b!=null&&typeof b=="string"&&(b=b.replace(/,/g,""));const T=+b;D[P]=Number.isFinite(T)?T:null}return{...y,type:i.fS.number,values:D}}function v(y){const D=y.values.slice();for(let C=0;C<D.length;C++)D[C]=!!D[C];return{...y,type:i.fS.boolean,values:D}}function E(y,D,C){let P=y.values;switch(y.type){case i.fS.time:P=P.map(b=>(0,a.J)(b,C).format(D));break;case i.fS.other:P=P.map(b=>JSON.stringify(b));break;default:P=P.map(b=>`${b}`)}return{...y,type:i.fS.string,values:P}}function p(y){const D=y.values.slice();for(let C=0;C<D.length;C++)try{D[C]=JSON.parse(D[C])}catch{D[C]=null}return{...y,type:i.fS.other,values:D}}function h(y,D){const C=typeof y.values[0]=="number";return y.type===i.fS.time&&C?y:C?{...y,type:i.fS.time}:f(y,D)}function s(y,D){const C={...D},P=y.values.slice(),b=new Map;if(C.text&&C.text.length>0)for(let T=0;T<C.text.length;T++)b.set(C.text[T],T);else return y;for(let T=0;T<P.length;T++){const O=P[T];P[T]=b.get(O)}return{...y,config:{...y.config,type:{enum:C}},type:i.fS.enum,values:P}}},27026:(Q,A,e)=>{"use strict";e.d(A,{W:()=>o});var n=e(4558),a=e(98147),i=e(20447),r=e(89957);const o={id:i.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(u,c)=>l=>l.pipe((0,n.U)(d=>o.transformer(u,c)(d))),transformer:(u,c)=>l=>{const d=g(l);return l.length>1&&d?r.M.transformer({byField:d},c)(l):l}};function g(u){let c;for(const l of u){const{timeField:d}=(0,a.sV)(l);if(!d)return;if(!c)c=d.name;else if(c!==d.name)return}return c}},13217:(Q,A,e)=>{"use strict";e.d(A,{P:()=>o,u:()=>g});var n=e(4558),a=e(85610),i=e(20447),r=e(95347);const o={id:i.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(u,c)=>l=>!u.include&&!u.exclude?l.pipe(r.d.operator({},c)):(typeof u.include?.options=="string"?u.include.options=c.interpolate(u.include?.options):typeof u.include?.options?.pattern=="string"&&(u.include.options.pattern=c.interpolate(u.include?.options.pattern)),typeof u.exclude?.options=="string"?u.exclude.options=c.interpolate(u.exclude?.options):typeof u.exclude?.options?.pattern=="string"&&(u.exclude.options.pattern=c.interpolate(u.exclude?.options.pattern)),l.pipe((0,n.U)(d=>{const f=u.include?(0,a.sq)(u.include):null,m=u.exclude?(0,a.sq)(u.exclude):null,v=[];for(const E of d){const p=[];for(let s=0;s<E.fields.length;s++){const y=E.fields[s];if(m){if(m(y,E,d))continue;f||p.push(y)}f&&f(y,E,d)&&p.push(y)}if(!p.length)continue;const h={...E,fields:p};v.push(h)}return v})))},g={id:i.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(u,c)=>l=>!u.include&&!u.exclude?l.pipe(r.d.operator({},c)):l.pipe((0,n.U)(d=>{const f=u.include?(0,a.b9)(u.include):null,m=u.exclude?(0,a.b9)(u.exclude):null,v=[];for(const E of d){if(m){if(m(E))continue;f||v.push(E)}f&&f(E)&&v.push(E)}return v}))}},88860:(Q,A,e)=>{"use strict";e.d(A,{f:()=>o,w:()=>r});var n=e(18198),a=e(13217),i=e(20447);const r={id:i.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(g,u)=>c=>c.pipe(a.P.operator({include:o(u,g.include,g.byVariable),exclude:o(u,g.exclude,g.byVariable)},u))},o=(g,u,c)=>{if(!u)return;const{names:l,pattern:d,variable:f}=u;if(c&&f){const m=g.interpolate(f);if(/\{.*\}/.test(m)){const v=m.slice(1).slice(0,-1).split(",");return{id:n.mi.byNames,options:{names:v}}}return{id:n.mi.byNames,options:{names:m.split(",")}}}if(!((!Array.isArray(l)||l.length===0)&&!d))return d?!Array.isArray(l)||l.length===0?{id:n.mi.byRegexp,options:d}:{id:n.mi.byRegexpOrNames,options:u}:{id:n.mi.byNames,options:{names:l}}}},40443:(Q,A,e)=>{"use strict";e.d(A,{ER:()=>l,JA:()=>d,PQ:()=>c});var n=e(4558),a=e(27957),i=e(85610),r=e(18198),o=e(20447),g=e(95347),u=e(79177),c=(v=>(v.exclude="exclude",v.include="include",v))(c||{}),l=(v=>(v.all="all",v.any="any",v))(l||{});const d={id:o.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(v,E)=>p=>{const h=v.filters,s=v.match==="all",y=v.type==="include";if(!Array.isArray(h)||h.length===0)return p.pipe(g.d.operator({},E));const D=[];return(0,u.U)()&&D.push(...h.map(C=>{if(C.config.id===r.mE.between){const P=E.interpolate(C.config.options.from),b=E.interpolate(C.config.options.to);return{...C,config:{...C.config,options:{...C.config.options,to:b,from:P}}}}else{if(C.config.id===r.mE.regex)return C;if(C.config.options.value){const P=E.interpolate(C.config.options.value),b={...C,config:{...C.config,options:{...C.config.options,value:P}}};return b.config.options.value=P,b}}return C})),p.pipe((0,n.U)(C=>{if(!Array.isArray(C)||C.length===0)return C;const P=new Set;for(const O of C){const R=m(O,C);let I;(0,u.U)()?I=f(D,R):I=f(h,R);for(let M=0;M<O.length;M++){if(P.has(M))continue;let x=!0;for(const L of I){const S=L(M,O,C);if(!s&&S){x=!0;break}if(s&&!S){x=!1;break}x=S}x&&P.add(M)}}const b=[],T=y?P.size:C[0].length-P.size;for(const O of C){const R=[];for(const I of O.fields){const M=[];for(let x=0;x<O.length;x++){if(y&&P.has(x)){M.push(I.values[x]);continue}if(!y&&!P.has(x)){M.push(I.values[x]);continue}}R.push({...I,values:M,state:{}})}b.push({...O,fields:R,length:T})}return b}))}},f=(v,E)=>{const p=()=>!1;return v.map(h=>{const s=E[h.fieldName]??-1;if(s<0)return console.warn(`[FilterByValue] Could not find index for field name: ${h.fieldName}`),p;const y=(0,i.IG)(h.config);return(D,C,P)=>y(D,C.fields[s],C,P)})},m=(v,E)=>v.fields.reduce((p,h,s)=>{const y=(0,a.CZ)(h,v,E);return p[y]=s,p},{})},23626:(Q,A,e)=>{"use strict";e.d(A,{kA:()=>l,vh:()=>g});var n=e(4558),a=e(85666),i=e(85610),r=e(18198),o=e(20447),g=(f=>(f.UpperCase="Upper Case",f.LowerCase="Lower Case",f.SentenceCase="Sentence Case",f.TitleCase="Title Case",f.PascalCase="Pascal Case",f.CamelCase="Camel Case",f.SnakeCase="Snake Case",f.KebabCase="Kebab Case",f.Trim="Trim",f.Substring="Substring",f))(g||{});const u=f=>{const m=f.split(" ");for(let v=0;v<m.length;v++)m[v]=m[v].charAt(0).toUpperCase()+m[v].slice(1).toLowerCase();return m},c=f=>m=>m.values.map(v=>{switch(f.outputFormat){case"Upper Case":return v.toUpperCase();case"Lower Case":return v.toLowerCase();case"Sentence Case":return v.charAt(0).toUpperCase()+v.slice(1);case"Title Case":return u(v).join(" ");case"Pascal Case":return u(v).join("");case"Camel Case":return v=u(v).join(""),v.charAt(0).toLowerCase()+v.slice(1);case"Snake Case":return v.toLowerCase().split(" ").join("_");case"Kebab Case":return v.toLowerCase().split(" ").join("-");case"Trim":return v.trim();case"Substring":return v.substring(f.substringStart,f.substringEnd)}}),l={id:o.W.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},operator:f=>m=>m.pipe((0,n.U)(v=>{if(v.length===0)return v;const E=i.Ls.get(r.mi.byName).get(f.stringField),p=c(f),h=d(E,p);return v.map(s=>({...s,fields:h(s,v)}))}))},d=(f,m)=>(v,E)=>v.fields.map(p=>{if(f(p,v,E)){const h=m(p);return{...p,type:a.fS.string,values:h}}return p})},13854:(Q,A,e)=>{"use strict";e.d(A,{i:()=>l,x:()=>c});var n=e(4558),a=e(98147),i=e(27957),r=e(56528),o=e(85666),g=e(66542),u=e(20447),c=(v=>(v.aggregate="aggregate",v.groupBy="groupby",v))(c||{});const l={id:u.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:v=>{let E=0;for(const p of v)p.fields.length>E&&(E=p.fields.length);return E>=2?r.s.Applicable:r.s.NotApplicable},isApplicableDescription:v=>{let E=0;for(const p of v)p.fields.length>E&&(E=p.fields.length);return`The Group by transformation requires a series with at least two fields to work. The maximum number of fields found on a series is ${E}`},operator:v=>E=>E.pipe((0,n.U)(p=>{if(!Object.keys(v.fields).find(y=>v.fields[y].operation==="groupby"))return p;const s=[];for(const y of p){const D=[];for(const b of y.fields)d(b,v)&&D.push(b);if(D.length===0)continue;const C=new Map;for(let b=0;b<y.length;b++){const T=String(D.map(R=>R.values[b])),O=C.get(T)??{};C.has(T)||C.set(T,O);for(let R of y.fields){const I=(0,i.CZ)(R);O[I]||(O[I]={name:I,type:R.type,config:{...R.config},values:[]}),O[I].values.push(R.values[b])}}const P=[];for(const b of D){const T=[],O=(0,i.CZ)(b);C.forEach(R=>{T.push(R[O].values[0])}),P.push({name:b.name,type:b.type,config:{...b.config},values:T})}for(const b of y.fields){if(!f(b,v))continue;const T=(0,i.CZ)(b),O=v.fields[T].aggregations,R={};C.forEach(I=>{const M=I[T],x=(0,g.Kx)({field:M,reducers:O});for(const L of O)Array.isArray(R[L])||(R[L]=[]),R[L].push(x[L])});for(const I of O){const M={name:`${T} (${I})`,values:R[I]??[],type:o.fS.other,config:{}};M.type=m(I,b,M),P.push(M)}}s.push({fields:P,length:C.size})}return s}))},d=(v,E)=>{const p=(0,i.CZ)(v);return E?.fields[p]?.operation==="groupby"},f=(v,E)=>{const p=(0,i.CZ)(v);return E?.fields[p]?.operation==="aggregate"&&Array.isArray(E?.fields[p].aggregations)&&E?.fields[p].aggregations.length>0},m=(v,E,p)=>{switch(v){case g.gz.allIsNull:return o.fS.boolean;case g.gz.last:case g.gz.lastNotNull:case g.gz.first:case g.gz.firstNotNull:return E.type;default:return(0,a.fu)(p)??o.fS.string}}},48493:(Q,A,e)=>{"use strict";e.d(A,{Jz:()=>b,Ok:()=>h,Op:()=>E,UO:()=>T,Zi:()=>d,cO:()=>s,gY:()=>P,kl:()=>y,mB:()=>O,py:()=>v,qr:()=>D,wL:()=>p,zM:()=>I});var n=e(4558),a=e(28073),i=e(58492),r=e(86347),o=e(85666),g=e(73899),u=e(20447),c=e(96609),l=e(79177);const d=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],f=[],m=(M,x)=>M-x,v={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},E={id:u.W.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(M,x)=>L=>L.pipe((0,n.U)(S=>E.transformer(M,x)(S))),transformer:(M,x)=>L=>{if(!Array.isArray(L)||L.length===0)return L;let S,U;M.bucketSize&&((0,l.U)()&&(M.bucketSize=x.interpolate(M.bucketSize.toString())),typeof M.bucketSize=="string"?S=parseFloat(M.bucketSize):S=M.bucketSize,isNaN(S)&&(S=void 0)),M.bucketOffset&&((0,l.U)()&&(M.bucketOffset=x.interpolate(M.bucketOffset.toString())),typeof M.bucketOffset=="string"?U=parseFloat(M.bucketOffset):U=M.bucketOffset,isNaN(U)&&(U=void 0));const N={bucketSize:S,bucketOffset:U,combine:M.combine},w=P(L,N);return w==null?[]:[I(w)]}},p="xMin";function h(M){return M===p||M==="BucketMin"}const s="xMax";function y(M){return M===s||M==="BucketMax"}function D(M){if(M.meta?.type===r.P.HeatmapCells){let U=M.fields.find(z=>z.name==="yMin"),N=M.fields.find(z=>z.name==="yMax"),w=M.fields.find(z=>z.name==="count"),G=[...new Set(N.values)].sort((z,W)=>z-W),_=[...new Set(U.values)].sort((z,W)=>z-W),K=new Map;G.forEach(z=>K.set(z,0));for(let z=0;z<N.values.length;z++){let W=N.values[z];K.set(W,K.get(W)+w.values[z])}return{xMin:{...U,name:"xMin",values:_},xMax:{...N,name:"xMax",values:G},counts:[{...w,values:[...K.values()]}]}}else if(M.meta?.type===r.P.HeatmapRows){let U=[],N=[],w=[],G="0";return M.fields.forEach(K=>{if(K.type===o.fS.number){let k=K.values.reduce((z,W)=>z+W,0);w.push(k),U.push(G),N.push(G=K.name)}}),w.push(0),U.push(G),N.push(G),{xMin:{...M.fields[1],name:"xMin",type:o.fS.string,values:U},xMax:{...M.fields[1],name:"xMax",type:o.fS.string,values:N},counts:[{...M.fields[1],name:"count",type:o.fS.number,values:w}]}}let x,L;const S=[];for(const U of M.fields)h(U.name)?x=U:y(U.name)?L=U:U.type===o.fS.number&&S.push(U);if(!L&&x&&x.values.length>1){let U=x.values,N=(0,g.O)(U[1]-U[0],6);L={...x,name:s,values:U.map(w=>w+N)}}if(!x&&L&&L?.values.length>1){let U=L.values,N=(0,g.O)(U[1]-U[0],6);x={...L,name:p,values:U.map(w=>w-N)}}if(x&&L&&S.length)return{xMin:x,xMax:L,counts:S}}const C=20;function P(M,x){let L=x?.bucketSize,S=x?.bucketOffset??0;if(!L||L<0){let W=[];for(const se of M)for(const re of se.fields)re.type===o.fS.number&&(W=W.concat(re.values));W=W.filter(se=>se!=null),W.sort((se,re)=>se-re);let Z=1/0;if(W.length===1)Z=1;else for(let se=1;se<W.length;se++){let re=W[se]-W[se-1];re!==0&&(Z=Math.min(Z,re))}let H=W[0];const ne=(W[W.length-1]-H)/C;for(let se=0;se<d.length;se++){let re=d[se];if(ne<re&&re>=Z){L=re;break}}}const U=W=>O(W-S,L)+S;let N=((""+L).match(/\.\d+$/)??["."])[0].length-1,w=[],G=[],_;for(const W of M)for(const Z of W.fields)if(Z.type===o.fS.number){let H=R(Z.values,U,f,m);w.push(H),G.push({...Z,config:{...Z.config,unit:Z.config.unit==="short"?"short":void 0}}),!_&&Z.config.unit&&(_=Z.config)}if(!G.length)return null;let K=(0,c.v_)(w);for(let W=1;W<K.length;W++){let Z=K[W];for(let H=0;H<Z.length;H++)Z[H]==null&&(Z[H]=0)}const k={name:p,values:K[0],type:o.fS.number,state:void 0,config:N===0?_??{}:{..._,decimals:N}},z={...k,name:s,values:K[0].map(W=>W+L)};if(x?.combine){const W=new Array(K[0].length).fill(0);for(let Z=1;Z<K.length;Z++)for(let H=0;H<W.length;H++)W[H]+=K[Z][H];G=[{...G[0],name:"count",values:W,type:o.fS.number,state:void 0}]}else G.forEach((W,Z)=>{W.values=K[Z+1]});return{xMin:k,xMax:z,counts:G}}function b(M,x){return Math.round(M/x)*x}function T(M,x){return Math.ceil(M/x)*x}function O(M,x){return Math.floor(M/x)*x}function R(M,x,L,S){let U=new Map;for(let _=0;_<M.length;_++){let K=M[_];K!=null&&(K=x(K));let k=U.get(K);k?k.count++:U.set(K,{value:K,count:1})}L&&L.forEach(_=>U.delete(_));let N=[...U.values()];S&&N.sort((_,K)=>S(_.value,K.value));let w=Array(N.length),G=Array(N.length);for(let _=0;_<N.length;_++)w[_]=N[_].value,G[_]=N[_].count;return[w,G]}function I(M,x){if(!M.xMin.display){const L=(0,a.U)({field:M.xMin,theme:x??(0,i.j)()});M.xMin.display=L,M.xMax.display=L}return M.counts[0].display=(0,a.U)({field:M.counts[0],theme:x??(0,i.j)()}),{length:M.xMin.values.length,meta:{type:r.P.Histogram},fields:[M.xMin,M.xMax,...M.counts]}}},89957:(Q,A,e)=>{"use strict";e.d(A,{M:()=>u,c:()=>g});var n=e(4558),a=e(85610),i=e(18198),r=e(20447),o=e(96609),g=(c=>(c.outer="outer",c.inner="inner",c.outerTabular="outerTabular",c))(g||{});const u={id:r.W.joinByField,aliasIds:[r.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(c,l)=>d=>d.pipe((0,n.U)(f=>u.transformer(c,l)(f))),transformer:(c,l)=>{let d;return f=>{if(f.length>1){c.byField&&!d&&(d=a.Ls.get(i.mi.byName).get(l.interpolate(c.byField)));const m=(0,o._9)({frames:f,joinBy:d,mode:c.mode});if(m)return[m]}return f}}}},96609:(Q,A,e)=>{"use strict";e.d(A,{Y3:()=>l,_9:()=>d,lP:()=>s,v_:()=>h});var n=e(21900),a=e(98147),i=e(85666),r=e(85610),o=e(18198),g=e(89957);function u(y){const{timeField:D}=(0,a.sV)(y[0]);if(D)return r.Ls.get(o.mi.firstTimeField).get({});let C=[];for(const P of y[0].fields)P.type===i.fS.number&&C.push(P.name);for(let P=1;P<y.length;P++){const b=[];for(const T of y[0].fields)T.type===i.fS.number&&b.push(T.name);C=C.filter(T=>!b.includes(T))}return r.Ls.get(o.mi.byName).get(C[0])}function c(y){return y.joinBy??u(y.frames)}function l(y,D){if(D>=0){let C=y.fields[D];C.type!==i.fS.string&&!s(C.values)&&(y=(0,a.aK)(y,D))}return y}function d(y){if(!y.frames?.length)return;if(y.frames.length===1){let I=y.frames[0],M=I;const x=c(y);let L=M.fields.findIndex(S=>x(S,M,y.frames));if(y.keepOriginIndices&&(M={...I,fields:I.fields.map((S,U)=>{const N={...S},w={frameIndex:0,fieldIndex:U};return N.state?N.state.origin=w:N.state={origin:w},N})},L>0)){const S=M.fields[L],U=M.fields.filter((N,w)=>w!==L);U.unshift(S),M.fields=U,L=0}if(L>=0&&(M=l(M,L)),y.keep){let S=M.fields.filter((U,N)=>N===L||y.keep(U,M,y.frames));I!==M?M.fields=S:M={...I,fields:S}}return M}const D=[],C=[],P=[],b=[];let T=1;const O=c(y);for(let I=0;I<y.frames.length;I++){const M=y.frames[I];if(!M||!M.fields?.length)continue;const x=[m];let L,S=[],U=[];for(let w=0;w<M.fields.length;w++){const G=M.fields[w];if(G.state=G.state||{},!L&&O(G,M,y.frames))L=G;else{if(y.keep&&!y.keep(G,M,y.frames))continue;let _=G.config.custom?.spanNulls;x.push(_===!0?m:_===-1?v:E);let K=G.labels??{},k=G.name;M.name&&(G.name===i.M5?k=M.name:K={...K,name:M.name}),S.push({...G,name:k,labels:K})}y.keepOriginIndices&&(G.state.origin={frameIndex:I,fieldIndex:w})}if(!L)continue;P.length===0&&P.push(L),D.push(x);const N=[L.values];for(const w of S)N.push(w.values),P.push(w),delete w.state?.displayName,U.push(T),T++;b.push(U),C.push(N)}let R=[];return y.mode===g.c.outerTabular?R=f(C,b,P.length,D):R=h(C,D,y.mode),{length:R[0]?R[0].length:0,fields:P.map((I,M)=>({...I,values:R[M]}))}}function f(y,D,C,P){let b={};for(let O=0;O<y.length;O++){let R=y[O],I=R[0];for(let M=0;M<y.length;M++){if(M===O)continue;let x=y[M],L=x[0];for(let S=0;S<I.length;S++){const U=I[S],N=C-1;let w=[U].concat(new Array(N)),G=0;for(let _=1;_<R.length;_++){const K=D[O][G];w[K]=R[_][S],G++}for(let _=0;_<L.length;_++)if(I[S]===L[_]){let K=0;for(let k=1;k<x.length;k++){const z=D[M][K];w[z]=x[k][_],K++}break}b[JSON.stringify(w)]=w}}}let T=[];for(let O=0;O<C;O++)T.push(new Array(0));for(let O in b){const R=b[O];for(let I=0;I<R.length;I++)T[I].push(R[I])}return T}const m=0,v=1,E=2;function p(y,D,C){for(let P=0,b,T=-1;P<D.length;P++){let O=D[P];if(O>T){for(b=O-1;b>=0&&y[b]==null;)y[b--]=null;for(b=O+1;b<C&&y[b]==null;)y[T=b++]=null}}}function h(y,D,C=g.c.outer){let P;if(C===g.c.inner)P=new Set((0,n.Z)(y.map(R=>R[0])));else{P=new Set;for(let R=0;R<y.length;R++){let M=y[R][0],x=M.length;for(let L=0;L<x;L++)P.add(M[L])}}let b=[Array.from(P).sort((R,I)=>R-I)],T=b[0].length,O=new Map;for(let R=0;R<T;R++)O.set(b[0][R],R);for(let R=0;R<y.length;R++){let I=y[R],M=I[0];for(let x=1;x<I.length;x++){let L=I[x],S=Array(T).fill(void 0),U=D?D[R][x]:v,N=[];for(let w=0;w<L.length;w++){let G=L[w],_=O.get(M[w]);G===null?U!==m&&(S[_]=G,U===E&&N.push(_)):S[_]=G}p(S,N,T),b.push(S)}}return b}function s(y,D=50){const C=y.length;if(C<=1)return!0;let P=0,b=C-1;for(;P<=b&&y[P]==null;)P++;for(;b>=P&&y[b]==null;)b--;if(b<=P)return!0;const T=Math.max(1,Math.floor((b-P+1)/D));for(let O=y[P],R=P+T;R<=b;R+=T){const I=y[R];if(I!=null){if(I<=O)return!1;O=I}}return!0}},69452:(Q,A,e)=>{"use strict";e.d(A,{k:()=>o,r:()=>g});var n=e(4558),a=e(27957),i=e(85666),r=e(20447),o=(c=>(c.Columns="columns",c.Rows="rows",c))(o||{});const g={id:r.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(c,l)=>d=>d.pipe((0,n.U)(f=>g.transformer(c,l)(f))),transformer:c=>l=>{if(c.mode==="rows")return u(l,c.keepLabels);const d=[],f=c.keepLabels?.length?new Set(c.keepLabels):void 0;for(const m of l){const v=[],E={};for(const p of m.fields){if(!p.labels){v.push(p);continue}const h={...p,config:{...p.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};v.push(h);for(const s of Object.keys(p.labels)){if(f&&!f.has(s))continue;if(c.valueLabel===s){h.name=p.labels[s];continue}(E[s]??(E[s]=new Set)).add(p.labels[s])}}for(const p in E)for(const h of E[p]){const s=new Array(m.length).fill(h);v.push({name:p,type:i.fS.string,values:s,config:{}})}d.push({...m,fields:v,length:m.length})}return d}};function u(c,l){const d=[];for(const f of c)for(const m of f.fields)if(m.labels){const v=[],E=[];if(l)for(const p of l)v.push(p),E.push(m.labels[p]);else for(const[p,h]of Object.entries(m.labels))v.push(p),E.push(h);E.length&&d.push({...f,name:(0,a.CZ)(m,f,c),fields:[{name:"label",type:i.fS.string,config:{},values:v},{name:"value",type:i.fS.string,config:{},values:E}],length:E.length})}return d}},7994:(Q,A,e)=>{"use strict";e.d(A,{R:()=>u});var n=e(69781),a=e.n(n),i=e(4558),r=e(47862),o=e(56528),g=e(20447);const u={id:g.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:E=>E.length>1?o.s.Applicable:o.s.NotApplicable,isApplicableDescription:E=>`The merge transformation requires at least 2 data series to work. There is currently ${E.length} data series.`,operator:E=>p=>p.pipe((0,i.U)(h=>{if(!Array.isArray(h)||h.length<=1)return h;const s=h.filter(I=>I.fields.length>0);if(s.length===0)return[h[0]];const y=new Set,D={},C=[],P=new r.v;for(let I=0;I<s.length;I++){const M=s[I];for(let x=0;x<M.fields.length;x++){const L=M.fields[x];y.has(L.name)||(P.addField(c(L)),y.add(L.name)),D[L.name]=D[L.name]||{},D[L.name][I]=x,s.length-1===I&&m(D,L,s)&&C.push(L.name)}}if(C.length===0)return h;const b={},T=[],O=l(s,D,C),R=d(s,y,D);for(let I=0;I<s.length;I++){const M=s[I];for(let x=0;x<M.length;x++){const L=O(I,x),S=R(I,x);if(!Array.isArray(b[L])){b[L]=[S],T.push(v(L,b));continue}let U=!1;b[L]=b[L].map(N=>f(N,S)?(U=!0,{...N,...S}):N),U||(b[L].push(S),T.push(v(L,b)))}}for(const I of T){const M=b[I.key][I.index];M&&P.add(M)}return[P]}))},c=E=>({...(0,n.omit)(E,["values","state","labels","config"]),values:[],config:{...(0,n.omit)(E.config,"displayName")}}),l=(E,p,h)=>{const s=h.reduce((y,D)=>Object.keys(p[D]).reduce((C,P)=>(C[P]=C[P]||[],C[P].push(p[D][P]),C),y),{});return(y,D)=>s[y].reduce((C,P)=>C+E[y].fields[P].values[D],"")},d=(E,p,h)=>(s,y)=>{const D={},C=Array.from(p);for(const P of C){const b=h[P];if(!b)continue;const T=b[s];if(typeof T!="number")continue;const O=E[s];if(!O||!O.fields)continue;const R=O.fields[T];!R||!R.values||(D[P]=R.values[y])}return D},f=(E,p)=>{let h=!0;for(const s in p)if(!(typeof E[s]>"u")&&E[s]!==null&&E[s]!==p[s]){h=!1;break}return h},m=(E,p,h)=>Object.keys(E[p.name]).length===h.length,v=(E,p)=>({key:E,index:p[E].length-1})},95347:(Q,A,e)=>{"use strict";e.d(A,{d:()=>a});var n=e(20447);const a={id:n.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:i=>r=>r,transformer:i=>r=>r}},63621:(Q,A,e)=>{"use strict";e.d(A,{w:()=>r});var n=e(85666);const a={threshold:(g,u,c)=>g+c,midpoint:(g,u,c)=>(g+u)/2,plusone:(g,u,c)=>g+1};function i(g,u){return g.fields.find(c=>u!=null?c.name===u:c.type===n.fS.time)}function r(g){if(g.frame.length===0)return g.frame;let u=!0,{frame:c,refFieldName:l,refFieldPseudoMax:d,refFieldPseudoMin:f,insertMode:m}=g;m||(m=a.threshold);const v=i(c,l);if(v==null)return c;v.state={...v.state,nullThresholdApplied:!0};const E=c.fields.map(h=>h.config.custom?.insertNulls||v.config.interval||null),p=new Set(E);if(p.delete(null),p.size===0)return c;if(p.size===1){const h=p.values().next().value;if(h<=0)return c;const s=v.values,y=c.fields.map(C=>C.values),D=o(s,y,h,f,d,m,u);return D===y?c:{...c,length:D[0].length,fields:c.fields.map((C,P)=>({...C,values:D[P]}))}}return c}function o(g,u,c,l=null,d=null,f,m){const v=g.length,E=[];if(l!=null&&l<g[0]){let y=Math.ceil((g[0]-l)/c),D=g[0]-y*c;for(;D<g[0];)E.push(f(D-c,D,c)),D+=c}E.push(g[0]);let p=g[0];for(let y=1;y<v;y++){const D=g[y];for(;D-p>c&&(E.push(f(p,D,c)),p+=c,!!m););E.push(D),p=D}if(d!=null&&d>p)for(;p+c<d;)E.push(f(p,d,c)),p+=c;const h=E.length;if(h===v)return u;const s=[];for(let y of u){let D;if(y!==g){D=Array(h);for(let C=0,P=0;C<h;C++)D[C]=g[P]===E[C]?y[P++]:null}else D=E;s.push(D)}return s}},95164:(Q,A,e)=>{"use strict";e.d(A,{I:()=>n});function n(a){return{...a,fields:a.fields.map(i=>{const r=+i.config?.noValue;if(Number.isNaN(r))return i;{const o=i.values.slice();for(let g=0;g<o.length;g++)o[g]===null&&(o[g]=r);return{...i,values:o}}})}}},52517:(Q,A,e)=>{"use strict";e.d(A,{$:()=>u,t:()=>g});var n=e(69781),a=e.n(n),i=e(4558),r=e(27957),o=e(20447);const g={id:o.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:d=>f=>f.pipe((0,i.U)(m=>{const v=c(d.indexByName);return!Array.isArray(m)||m.length===0?m:m.map(E=>({...E,fields:v(E.fields,m,E)}))}))},u=d=>(f,m)=>l(f,d)-l(m,d),c=d=>(f,m,v)=>{if(!Array.isArray(f)||f.length===0||!d||Object.keys(d).length===0)return f;const E=u(d);return(0,n.clone)(f).sort((p,h)=>E((0,r.CZ)(p,v,m),(0,r.CZ)(h,v,m)))},l=(d,f)=>Number.isInteger(f[d])?f[d]:Number.MAX_SAFE_INTEGER},18234:(Q,A,e)=>{"use strict";e.d(A,{AL:()=>l,mf:()=>d});var n=e(4558),a=e(98147),i=e(27957),r=e(85666),o=e(66542),g=e(85610),u=e(32633),c=e(20447),l=(p=>(p.SeriesToRows="seriesToRows",p.ReduceFields="reduceFields",p))(l||{});const d={id:c.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[o.gz.max]},operator:p=>h=>h.pipe((0,n.U)(s=>{if(!p?.reducers?.length)return s;const y=p.fields?(0,g.sq)(p.fields):p.includeTimeField&&p.mode==="reduceFields"?u.m3:u.Qw;if(p.mode==="reduceFields")return E(s,y,p.reducers);const D=f(s,y,p.reducers,p.labelsToFields);return D?[D]:[]}))};function f(p,h,s,y){const D=o.TB.list(s),C=D.map(T=>T.id),P=[],b=y?m(p):[];for(const T of p){const O=T.fields.filter(S=>h(S,T,p)),R=O.length,I=[],M=new Array(R);I.push({name:"Field",type:r.fS.string,values:M,config:{}});const x={};if(y)for(const S of b)x[S]=new Array(R),I.push({name:S,type:r.fS.string,values:x[S],config:{}});const L={};for(const S of D)L[S.id]=new Array(R),I.push({name:S.name,type:r.fS.other,values:L[S.id],config:{}});for(let S=0;S<O.length;S++){const U=O[S],N=(0,o.Kx)({field:U,reducers:C});if(y){if(M[S]=U.name,U.labels)for(const w of Object.keys(U.labels))x[w][S]=U.labels[w]}else M[S]=(0,i.CZ)(U,T,p);for(const w of D){const G=N[w.id];L[w.id][S]=G}}for(const S of I)if(S.type===r.fS.other){const U=(0,a.fu)(S);U&&(S.type=U)}P.push({...T,fields:I,length:R})}return v(P)}function m(p){const h=new Set;for(const s of p)for(const y of s.fields)if(y.labels)for(const D of Object.keys(y.labels))h.add(D);return[...h]}function v(p){if(!p?.length)return;const h=p[0];for(let s=1;s<p.length;s++){const y=p[s];for(let D=0;D<h.fields.length;D++){const C=h.fields[D];for(let P=0;P<y.fields.length;P++){const b=y.fields[P],T=D===0&&P===0,O=C.type===b.type&&C.name===b.name;if(T||O){const R=C.values,I=b.values;C.values=R.concat(I)}}}}return h.name=void 0,h.length=h.fields[0].values.length,h}function E(p,h,s){const D=o.TB.list(s).map(P=>P.id),C=[];for(const P of p){const b=[];for(const T of P.fields)if(h(T,P,p)){const O=(0,o.Kx)({field:T,reducers:D});for(const R of D){const I=O[R],M={...T,values:[I]};M.state=void 0,D.length>1&&(M.labels||(M.labels={}),M.labels.reducer=o.TB.get(R).name),b.push(M)}}b.length&&C.push({...P,fields:b,length:1})}return C}},79177:(Q,A,e)=>{"use strict";e.d(A,{U:()=>n});const n=()=>window?.grafanaBootData?.settings?.featureToggles?.transformationsVariableSupport},18051:()=>{},58944:()=>{},63949:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>n});var n=(a=>(a.NoData="no_data",a.Paused="paused",a.Alerting="alerting",a.OK="ok",a.Pending="pending",a.Unknown="unknown",a))(n||{})},7274:(Q,A,e)=>{"use strict";e.d(A,{L:()=>n});var n=(a=>(a.Field="field",a.Text="text",a.Skip="skip",a))(n||{})},44343:(Q,A,e)=>{"use strict";e.d(A,{CQ:()=>o,k8:()=>r,zj:()=>i});var n=e(59889),a=e(90384),i=(g=>(g.CloudAlerting="cloud-alerting",g.UnifiedAlerting="unified-alerting",g.Dashboard="dashboard",g.Explore="explore",g.Correlations="correlations",g.Unknown="unknown",g.PanelEditor="panel-editor",g.PanelViewer="panel-viewer",g))(i||{});class r extends n.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(u){}setRootPage(u){return this.root=u,this}setComponentsFromLegacyExports(u){if(u.ConfigCtrl&&(this.angularConfigCtrl=u.ConfigCtrl),this.meta&&this.meta.includes){for(const c of this.meta.includes)if(c.type===n.$_.page&&c.component&&!u[c.component]){console.warn("App Page uses unknown component: ",c.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(u){return this._extensionConfigs.push({...u,type:a.D.link}),this}configureExtensionComponent(u){return this._extensionConfigs.push({...u,type:a.D.component}),this}}var o=(g=>(g.alpha="alpha",g.beta="beta",g))(o||{})},82689:(Q,A,e)=>{"use strict";e.d(A,{e:()=>n});var n=(a=>(a.OpenSource="Open Source",a.Pro="Pro",a.Enterprise="Enterprise",a))(n||{})},6485:(Q,A,e)=>{"use strict";e.d(A,{Hx:()=>n,Z3:()=>a,bm:()=>i});const n=0,a=100,i="SAML"},42692:(Q,A,e)=>{"use strict";e.d(A,{m:()=>n});var n=(a=>(a[a.Off=0]="Off",a[a.Crosshair=1]="Crosshair",a[a.Tooltip=2]="Tooltip",a))(n||{})},20298:(Q,A,e)=>{"use strict";e.d(A,{Gl:()=>i,Gu:()=>n,Kn:()=>g,dC:()=>a,fQ:()=>r});var n=(u=>(u.NotStarted="NotStarted",u.Loading="Loading",u.Streaming="Streaming",u.Done="Done",u.Error="Error",u))(n||{});const a=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var i=(u=>(u.Null="null",u.Ignore="connected",u.AsZero="null as zero",u))(i||{});const r=u=>!!u;function o(u){return u}function g(u){return typeof u=="object"&&u!==null?!0:!1}},85666:(Q,A,e)=>{"use strict";e.d(A,{Ls:()=>i,M5:()=>a,fS:()=>n,rN:()=>r});var n=(o=>(o.time="time",o.number="number",o.string="string",o.boolean="boolean",o.trace="trace",o.geo="geo",o.enum="enum",o.other="other",o.frame="frame",o.nestedFrames="nestedFrames",o))(n||{});const a="Value",i="Time",r="Metric"},86347:(Q,A,e)=>{"use strict";e.d(A,{P:()=>n});var n=(a=>(a.TimeSeriesWide="timeseries-wide",a.TimeSeriesLong="timeseries-long",a.TimeSeriesMany="timeseries-many",a.TimeSeriesMulti="timeseries-multi",a.NumericWide="numeric-wide",a.NumericMulti="numeric-multi",a.NumericLong="numeric-long",a.LogLines="log-lines",a.DirectoryListing="directory-listing",a.HeatmapRows="heatmap-rows",a.HeatmapCells="heatmap-cells",a.Histogram="histogram",a))(n||{})},63908:(Q,A,e)=>{"use strict";e.d(A,{L8:()=>i,n1:()=>n,o3:()=>r,sN:()=>a});var n=(o=>(o.Datasource="Datasource",o.Correlations="Correlations",o.ExploreCorrelationsEditor="CorrelationsEditor",o))(n||{}),a=(o=>(o.Regex="regex",o.Logfmt="logfmt",o))(a||{}),i=(o=>(o.Series="series",o.Field="field",o.Fields="fields",o.Value="value",o.BuiltIn="built-in",o.Template="template",o))(i||{}),r=(o=>(o.Values="values",o))(r||{})},51023:(Q,A,e)=>{"use strict";e.d(A,{MF:()=>r,Ru:()=>o,eA:()=>g,hf:()=>i,iL:()=>u});var n=e(20187),a=e(59889);class i extends a.Sg{constructor(l){super(),this.DataSourceClass=l,this.components={}}setConfigEditor(l){return this.components.ConfigEditor=l,this}setConfigCtrl(l){return this.angularConfigCtrl=l,this}setQueryCtrl(l){return this.components.QueryCtrl=l,this}setAnnotationQueryCtrl(l){return this.components.AnnotationsQueryCtrl=l,this}setQueryEditor(l){return this.components.QueryEditor=l,this}setExploreQueryField(l){return this.components.ExploreQueryField=l,this}setExploreMetricsQueryField(l){return this.components.ExploreMetricsQueryField=l,this}setExploreLogsQueryField(l){return this.components.ExploreLogsQueryField=l,this}setQueryEditorHelp(l){return this.components.QueryEditorHelp=l,this}setExploreStartPage(l){return this.setQueryEditorHelp(l)}setVariableQueryEditor(l){return this.components.VariableQueryEditor=l,this}setMetadataInspector(l){return this.components.MetadataInspector=l,this}setComponentsFromLegacyExports(l){this.angularConfigCtrl=l.ConfigCtrl,this.components.QueryCtrl=l.QueryCtrl,this.components.AnnotationsQueryCtrl=l.AnnotationsQueryCtrl,this.components.ExploreQueryField=l.ExploreQueryField,this.components.QueryEditor=l.QueryEditor,this.components.QueryEditorHelp=l.QueryEditorHelp,this.components.VariableQueryEditor=l.VariableQueryEditor}}class r{constructor(l){this.name=l.name,this.id=l.id,this.type=l.type,this.meta=l.meta,this.cachingConfig=l.cachingConfig,this.uid=l.uid}getRef(){return{type:this.type,uid:this.uid}}}var o=(c=>(c.Logs="Logs",c.Metrics="Metrics",c.Tracing="Tracing",c))(o||{}),g=(c=>(c.Cancelled="cancelled",c.Timeout="timeout",c.Unknown="unknown",c))(g||{});class u{}u=(0,n.s)(u),r=(0,n.s)(r)},25956:()=>{},14376:()=>{},91507:(Q,A,e)=>{"use strict";e.d(A,{R:()=>a,S:()=>n});var n=(i=>(i.Thresholds="thresholds",i.PaletteClassic="palette-classic",i.PaletteClassicByName="palette-classic-by-name",i.PaletteSaturated="palette-saturated",i.ContinuousGrYlRd="continuous-GrYlRd",i.ContinuousRdYlGr="continuous-RdYlGr",i.ContinuousBlYlRd="continuous-BlYlRd",i.ContinuousYlRd="continuous-YlRd",i.ContinuousBlPu="continuous-BlPu",i.ContinuousYlBl="continuous-YlBl",i.ContinuousBlues="continuous-blues",i.ContinuousReds="continuous-reds",i.ContinuousGreens="continuous-greens",i.ContinuousPurples="continuous-purples",i.Fixed="fixed",i.Shades="shades",i))(n||{});const a="#808080"},68235:(Q,A,e)=>{"use strict";e.d(A,{Y4:()=>n,qb:()=>i,v3:()=>a});function n(r){return o=>o.__systemRef===r}const a=r=>typeof r?.__systemRef=="string";var i=(r=>(r.Unit="unit",r.Min="min",r.Max="max",r.Decimals="decimals",r.DisplayName="displayName",r.NoValue="noValue",r.Thresholds="thresholds",r.Mappings="mappings",r.Links="links",r.Color="color",r.Filterable="filterable",r))(i||{})},9735:()=>{},64563:()=>{},4315:()=>{},7820:(Q,A,e)=>{"use strict";e.d(A,{Mo:()=>a,_S:()=>n,iJ:()=>i});const n={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,amazon:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,"application-observability":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,ai:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"frontend-observability":!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-ml":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,"gf-prometheus":!0,"gf-traces":!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,spinner:!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"web-section-alt":!0,"wrap-text":!0,rss:!0,x:!0};function a(r){return!r||typeof r!="string"?!1:r in n}function i(r){if(a(r))return r}},24186:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{AbstractLabelOperator:()=>u.K2,AlertState:()=>se.Z,AnnotationEventFieldSource:()=>c.L,AppEvents:()=>W.SI,AppPlugin:()=>R.k8,CoreApp:()=>R.zj,CustomVariableSupport:()=>H.Mg,DEFAULT_SAML_NAME:()=>n.bm,DashboardCursorSync:()=>g.m,DataFrameType:()=>r.P,DataLinkConfigOrigin:()=>o.n1,DataQueryErrorType:()=>I.eA,DataSourceApi:()=>I.MF,DataSourcePlugin:()=>I.hf,DataSourceVariableSupport:()=>H.gv,DataTopic:()=>u.w5,DefaultTimeZone:()=>v.Ys,ExploreMode:()=>I.Ru,FALLBACK_COLOR:()=>S.R,FeatureState:()=>R.CQ,FieldColorModeId:()=>S.S,FieldConfigProperty:()=>T.qb,FieldType:()=>i.fS,GAUGE_DEFAULT_MAXIMUM:()=>n.Z3,GAUGE_DEFAULT_MINIMUM:()=>n.Hx,GrafanaPlugin:()=>x.Sg,GrafanaThemeType:()=>U.Q,LanguageProvider:()=>I.iL,LegacyGraphHoverClearEvent:()=>W.oi,LegacyGraphHoverEvent:()=>W.IA,LiveChannelConnectionState:()=>Z.yS,LiveChannelEventType:()=>Z.FU,LiveChannelScope:()=>Z.z,LiveChannelType:()=>Z.SK,LoadingState:()=>a.Gu,LogLevel:()=>l.in,LogRowContextQueryDirection:()=>l.M4,LogsDedupDescription:()=>l.Uv,LogsDedupStrategy:()=>l.Y4,LogsMetaKind:()=>l.Ku,LogsSortOrder:()=>l.UV,LogsVolumeType:()=>l.o8,MappingType:()=>p.H,NullValueMode:()=>a.Gl,OrgRole:()=>N.B,PageLayoutType:()=>d.Q,PanelEvents:()=>W.Kh,PluginErrorCode:()=>x.w2,PluginExtensionPoints:()=>ve.y,PluginExtensionTypes:()=>ve.D,PluginIncludeType:()=>x.$_,PluginSignatureStatus:()=>x.Xy,PluginSignatureType:()=>x._Z,PluginState:()=>x.BV,PluginType:()=>x.zV,SpecialValue:()=>b.U,SpecialValueMatch:()=>p.e,StandardVariableSupport:()=>H.v6,SupplementaryQueryType:()=>l.v8,SupportedTransformationType:()=>o.sN,TIME_FORMAT:()=>v.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>i.rN,TIME_SERIES_TIME_FIELD_NAME:()=>i.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>i.M5,ThresholdsMode:()=>E.H,TransformationApplicabilityLevels:()=>b.s,VariableHide:()=>L.bU,VariableOrigin:()=>o.L8,VariableRefresh:()=>L.Bd,VariableSort:()=>L.$U,VariableSuggestionsScope:()=>o.o3,VariableSupportBase:()=>H.Tq,VariableSupportType:()=>H.j2,VisualizationSuggestionScore:()=>M._,VisualizationSuggestionsBuilder:()=>M.mi,VisualizationSuggestionsListAppender:()=>M.sf,VizOrientation:()=>M.wm,availableIconsIndex:()=>fe._S,getDefaultRelativeTimeRange:()=>v.Rr,getDefaultTimeRange:()=>v.JK,hasLogsContextSupport:()=>l.Q4,hasLogsContextUiSupport:()=>l.xW,hasQueryExportSupport:()=>u.p,hasQueryImportSupport:()=>u.CZ,hasQueryModificationSupport:()=>l._,hasSupplementaryQuerySupport:()=>l.mN,hasToggleableQueryFiltersSupport:()=>l.Vw,isIconName:()=>fe.Mo,isLiveChannelJoinEvent:()=>Z.mx,isLiveChannelLeaveEvent:()=>Z.gH,isLiveChannelMessageEvent:()=>Z.RL,isLiveChannelStatusEvent:()=>Z.se,isObject:()=>a.Kn,isSystemOverride:()=>T.v3,isSystemOverrideWithRef:()=>T.Y4,isTruthy:()=>a.fQ,isUnsignedPluginSignature:()=>ne.x,isValidLiveChannelAddress:()=>Z.nU,makeArrayIndexableVector:()=>O.U,parseLiveChannelAddress:()=>Z.H7,patchArrayVectorProrotypeMethods:()=>O.X,preferredVisualizationTypes:()=>a.dC,toIconName:()=>fe.iJ,toLiveChannelId:()=>Z.Aj});var n=e(6485),a=e(20298),i=e(85666),r=e(86347),o=e(63908),g=e(42692),u=e(1181),c=e(7274),l=e(68387),d=e(57247),f=e(10167),m=e.n(f),oe={};for(const pe in f)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(pe)<0&&(oe[pe]=()=>f[pe]);e.d(A,oe);var v=e(5333),E=e(47423),p=e(6803),h=e(25956),s=e.n(h),oe={};for(const pe in h)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(pe)<0&&(oe[pe]=()=>h[pe]);e.d(A,oe);var y=e(4315),D=e.n(y),oe={};for(const pe in y)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(pe)<0&&(oe[pe]=()=>y[pe]);e.d(A,oe);var C=e(18051),P=e.n(C),oe={};for(const pe in C)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(pe)<0&&(oe[pe]=()=>C[pe]);e.d(A,oe);var b=e(56528),T=e(68235),O=e(30684),R=e(44343),I=e(51023),M=e(55632),x=e(59889),L=e(59970),S=e(91507),U=e(25274),N=e(34824),w=e(9735),G=e.n(w),oe={};for(const pe in w)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(pe)<0&&(oe[pe]=()=>w[pe]);e.d(A,oe);var _=e(74275),K=e.n(_),oe={};for(const pe in _)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(pe)<0&&(oe[pe]=()=>_[pe]);e.d(A,oe);var k=e(14376),z=e.n(k),oe={};for(const pe in k)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(pe)<0&&(oe[pe]=()=>k[pe]);e.d(A,oe);var W=e(56821),Z=e(4230),H=e(90927),X=e(64563),Y=e.n(X),oe={};for(const pe in X)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(pe)<0&&(oe[pe]=()=>X[pe]);e.d(A,oe);var ne=e(64562),se=e(63949),re=e(97115),ge=e.n(re),oe={};for(const pe in re)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(pe)<0&&(oe[pe]=()=>re[pe]);e.d(A,oe);var q=e(58944),me=e.n(q),oe={};for(const pe in q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(pe)<0&&(oe[pe]=()=>q[pe]);e.d(A,oe);var fe=e(7820),ve=e(90384)},89732:(Q,A,e)=>{"use strict";e.d(A,{l:()=>n});var n=(a=>(a.Grid="grid",a.List="list",a))(n||{})},56821:(Q,A,e)=>{"use strict";e.d(A,{IA:()=>o,Kh:()=>r,SI:()=>i,oi:()=>g});var n=e(89380),a=e(63121);const i={alertSuccess:(0,n.X)("alert-success"),alertWarning:(0,n.X)("alert-warning"),alertError:(0,n.X)("alert-error")},r={refresh:(0,n.X)("refresh"),componentDidMount:(0,n.X)("component-did-mount"),dataReceived:(0,n.X)("data-received"),dataError:(0,n.X)("data-error"),dataFramesReceived:(0,n.X)("data-frames-received"),dataSnapshotLoad:(0,n.X)("data-snapshot-load"),editModeInitialized:(0,n.X)("init-edit-mode"),initPanelActions:(0,n.X)("init-panel-actions"),initialized:(0,n.X)("panel-initialized"),panelTeardown:(0,n.X)("panel-teardown"),render:(0,n.X)("render")};class o extends a.R{}o.type="graph-hover";class g extends a.m{constructor(){super(...arguments),this.payload={point:{}}}}g.type="graph-hover-clear"},4230:(Q,A,e)=>{"use strict";e.d(A,{Aj:()=>f,FU:()=>r,H7:()=>l,RL:()=>c,SK:()=>a,gH:()=>u,mx:()=>g,nU:()=>d,se:()=>o,yS:()=>i,z:()=>n});var n=(m=>(m.DataSource="ds",m.Plugin="plugin",m.Grafana="grafana",m.Stream="stream",m))(n||{}),a=(m=>(m.DataStream="stream",m.DataFrame="frame",m.JSON="json",m))(a||{}),i=(m=>(m.Pending="pending",m.Connected="connected",m.Connecting="connecting",m.Disconnected="disconnected",m.Shutdown="shutdown",m.Invalid="invalid",m))(i||{}),r=(m=>(m.Status="status",m.Join="join",m.Leave="leave",m.Message="message",m))(r||{});function o(m){return m.type==="status"}function g(m){return m.type==="join"}function u(m){return m.type==="leave"}function c(m){return m.type==="message"}function l(m){if(m?.length){let v=m.trim().split("/");if(v.length>=3)return{scope:v[0],namespace:v[1],path:v.slice(2).join("/")}}}function d(m){return!!(m?.path&&m.namespace&&m.scope)}function f(m){if(!m.scope)return"";let v=m.scope;return!m.namespace||(v+="/"+m.namespace,!m.path)?v:v+"/"+m.path}},68387:(Q,A,e)=>{"use strict";e.d(A,{Ku:()=>i,M4:()=>o,Q4:()=>g,UV:()=>n.UV,Uv:()=>r,Vw:()=>f,Y4:()=>n.Y4,_:()=>m,in:()=>a,mN:()=>l,o8:()=>c,v8:()=>u,xW:()=>d});var n=e(71199),a=(v=>(v.emerg="critical",v.fatal="critical",v.alert="critical",v.crit="critical",v.critical="critical",v.warn="warning",v.warning="warning",v.err="error",v.eror="error",v.error="error",v.info="info",v.information="info",v.informational="info",v.notice="info",v.dbug="debug",v.debug="debug",v.trace="trace",v.unknown="unknown",v))(a||{}),i=(v=>(v[v.Number=0]="Number",v[v.String=1]="String",v[v.LabelsMap=2]="LabelsMap",v[v.Error=3]="Error",v))(i||{}),r=(v=>(v.none="No de-duplication",v.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",v.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",v.signature="De-duplication of successive lines that have identical punctuation and whitespace.",v))(r||{}),o=(v=>(v.Backward="BACKWARD",v.Forward="FORWARD",v))(o||{});const g=v=>!v||typeof v!="object"?!1:"getLogRowContext"in v;var u=(v=>(v.LogsVolume="LogsVolume",v.LogsSample="LogsSample",v))(u||{}),c=(v=>(v.FullRange="FullRange",v.Limited="Limited",v))(c||{});const l=(v,E)=>{if(!v)return!1;const p=v;return p.getDataProvider!==void 0&&p.getSupplementaryQuery!==void 0&&p.getSupportedSupplementaryQueryTypes().includes(E)},d=v=>!v||typeof v!="object"?!1:"getLogRowContextUi"in v,f=v=>v!=null&&typeof v=="object"&&"toggleQueryFilter"in v&&"queryHasFilter"in v,m=v=>v!=null&&typeof v=="object"&&"modifyQuery"in v&&"getSupportedQueryModifications"in v},57247:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>n});var n=(a=>(a[a.Standard=0]="Standard",a[a.Canvas=1]="Canvas",a[a.Custom=2]="Custom",a))(n||{})},34824:(Q,A,e)=>{"use strict";e.d(A,{B:()=>n});var n=(a=>(a.None="None",a.Viewer="Viewer",a.Editor="Editor",a.Admin="Admin",a))(n||{})},55632:(Q,A,e)=>{"use strict";e.d(A,{_:()=>o,mi:()=>g,sf:()=>u,wm:()=>r});var n=e(69781),a=e.n(n),i=e(85666),r=(c=>(c.Auto="auto",c.Vertical="vertical",c.Horizontal="horizontal",c))(r||{}),o=(c=>(c[c.Best=100]="Best",c[c.Good=70]="Good",c[c.OK=50]="OK",c))(o||{});class g{constructor(l,d){this.list=[],this.data=l,this.panel=d,this.dataSummary=this.computeDataSummary()}getListAppender(l){return new u(this.list,l)}computeDataSummary(){const l=this.data?.series||[];let d=0,f=0,m=0,v=0,E=0,p=0,h;for(const s of l){v+=s.length,s.meta?.preferredVisualisationType&&(h=s.meta.preferredVisualisationType);for(const y of s.fields)switch(p++,y.type){case i.fS.number:d+=1;break;case i.fS.time:f+=1;break;case i.fS.string:m+=1;break}s.length>E&&(E=s.length)}return{numberFieldCount:d,timeFieldCount:f,stringFieldCount:m,rowCountTotal:v,rowCountMax:E,fieldCount:p,preferredVisualisationType:h,frameCount:l.length,hasData:v>0,hasTimeField:f>0,hasNumberField:d>0,hasStringField:m>0}}getList(){return this.list}}class u{constructor(l,d){this.list=l,this.defaults=d}append(l){this.list.push((0,n.defaultsDeep)(l,this.defaults))}}},59889:(Q,A,e)=>{"use strict";e.d(A,{$_:()=>g,BV:()=>n,Sg:()=>u,Xy:()=>i,_Z:()=>r,w2:()=>o,zV:()=>a});var n=(c=>(c.alpha="alpha",c.beta="beta",c.stable="stable",c.deprecated="deprecated",c))(n||{}),a=(c=>(c.panel="panel",c.datasource="datasource",c.app="app",c.renderer="renderer",c.secretsmanager="secretsmanager",c))(a||{}),i=(c=>(c.internal="internal",c.valid="valid",c.invalid="invalid",c.modified="modified",c.missing="missing",c))(i||{}),r=(c=>(c.grafana="grafana",c.commercial="commercial",c.community="community",c.private="private",c.core="core",c))(r||{}),o=(c=>(c.missingSignature="signatureMissing",c.invalidSignature="signatureInvalid",c.modifiedSignature="signatureModified",c))(o||{}),g=(c=>(c.dashboard="dashboard",c.page="page",c.panel="panel",c.datasource="datasource",c))(g||{});class u{addConfigPage(l){return this.configPages||(this.configPages=[]),this.configPages.push(l),this}setChannelSupport(){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},90384:(Q,A,e)=>{"use strict";e.d(A,{D:()=>n,y:()=>a});var n=(i=>(i.link="link",i.component="component",i))(n||{}),a=(i=>(i.AlertInstanceAction="grafana/alerting/instance/action",i.CommandPalette="grafana/commandpalette/action",i.DashboardPanelMenu="grafana/dashboard/panel/menu",i.DataSourceConfig="grafana/datasources/config",i.ExploreToolbarAction="grafana/explore/toolbar/action",i.UserProfileTab="grafana/user/profile/tab",i))(a||{})},64562:(Q,A,e)=>{"use strict";e.d(A,{x:()=>a});var n=e(59889);function a(i){return i&&i!==n.Xy.valid&&i!==n.Xy.internal}},1181:(Q,A,e)=>{"use strict";e.d(A,{CZ:()=>i,K2:()=>a,p:()=>r,w5:()=>n.w5});var n=e(71199),a=(o=>(o.Equal="Equal",o.NotEqual="NotEqual",o.EqualRegEx="EqualRegEx",o.NotEqualRegEx="NotEqualRegEx",o))(a||{});const i=o=>!o||typeof o!="object"?!1:"importFromAbstractQueries"in o,r=o=>!o||typeof o!="object"?!1:"exportToAbstractQueries"in o},10167:()=>{},97115:()=>{},59970:(Q,A,e)=>{"use strict";e.d(A,{$U:()=>a,Bd:()=>n,bU:()=>i});var n=(r=>(r[r.never=0]="never",r[r.onDashboardLoad=1]="onDashboardLoad",r[r.onTimeRangeChanged=2]="onTimeRangeChanged",r))(n||{}),a=(r=>(r[r.disabled=0]="disabled",r[r.alphabeticalAsc=1]="alphabeticalAsc",r[r.alphabeticalDesc=2]="alphabeticalDesc",r[r.numericalAsc=3]="numericalAsc",r[r.numericalDesc=4]="numericalDesc",r[r.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",r[r.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",r[r.naturalAsc=7]="naturalAsc",r[r.naturalDesc=8]="naturalDesc",r))(a||{}),i=(r=>(r[r.dontHide=0]="dontHide",r[r.hideLabel=1]="hideLabel",r[r.hideVariable=2]="hideVariable",r))(i||{})},25274:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>n});var n=(a=>(a.Light="light",a.Dark="dark",a))(n||{})},47423:(Q,A,e)=>{"use strict";e.d(A,{H:()=>n});var n=(a=>(a.Absolute="absolute",a.Percentage="percentage",a))(n||{})},5333:(Q,A,e)=>{"use strict";e.d(A,{JK:()=>o,Rr:()=>g,T_:()=>r,Ys:()=>i});var n=e(71199),a=e(74011);const i=n.iT,r="YYYY-MM-DD HH:mm:ss";function o(){const u=(0,a.CQ)();return{from:(0,a.CQ)(u).subtract(6,"hour"),to:u,raw:{from:"now-6h",to:"now"}}}function g(){return{from:600,to:0}}},74275:()=>{},56528:(Q,A,e)=>{"use strict";e.d(A,{U:()=>a,s:()=>n});var n=(i=>(i[i.NotPossible=-1]="NotPossible",i[i.NotApplicable=0]="NotApplicable",i[i.Applicable=1]="Applicable",i[i.HighlyApplicable=2]="HighlyApplicable",i))(n||{}),a=(i=>(i.True="true",i.False="false",i.Null="null",i.Empty="empty",i))(a||{})},6803:(Q,A,e)=>{"use strict";e.d(A,{H:()=>n,e:()=>a});var n=(i=>(i.ValueToText="value",i.RangeToText="range",i.RegexToText="regex",i.SpecialValue="special",i))(n||{}),a=(i=>(i.True="true",i.False="false",i.Null="null",i.NaN="nan",i.NullAndNaN="null+nan",i.Empty="empty",i))(a||{})},90927:(Q,A,e)=>{"use strict";e.d(A,{Mg:()=>r,Tq:()=>a,gv:()=>o,j2:()=>n,v6:()=>i});var n=(g=>(g.Legacy="legacy",g.Standard="standard",g.Custom="custom",g.Datasource="datasource",g))(n||{});class a{}class i extends a{getType(){return"standard"}}class r extends a{getType(){return"custom"}}class o extends a{getType(){return"datasource"}}},30684:(Q,A,e)=>{"use strict";e.d(A,{U:()=>a,X:()=>n});function n(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(i){return this[i]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(i,r){this[i]=r},writable:!0,enumerable:!1,configurable:!0},add:{value:function(i){this.push(i)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}n();function a(i){return new Proxy(i,{get(r,o,g){if(typeof o!="symbol"){const u=+o;if(String(u)===o)return r.get(u)}return Reflect.get(r,o,g)},set(r,o,g,u){if(typeof o!="symbol"){const c=+o;if(String(c)===o)return r.set(c,g),!0}return Reflect.set(r,o,g,u)}})}},41540:(Q,A,e)=>{"use strict";e.d(A,{vo:()=>g,rt:()=>l,j:()=>c});var n=e(61411),a=e(15476),i=e(20298),r=e(18662);class o{constructor(){this.properties=[]}addCustomEditor(f){return this.properties.push(f),this}getRegistry(){return new r.B(()=>this.properties)}getItems(){return this.properties}}class g extends o{addNumberInput(f){return this.addCustomEditor({...f,id:f.path,override:n.S.get("number").editor,editor:n.S.get("number").editor,process:a.Oh,shouldApply:f.shouldApply??(()=>!0),settings:f.settings||{}})}addSliderInput(f){return this.addCustomEditor({...f,id:f.path,override:n.S.get("slider").editor,editor:n.S.get("slider").editor,process:a.Oh,shouldApply:f.shouldApply??(()=>!0),settings:f.settings||{}})}addTextInput(f){return this.addCustomEditor({...f,id:f.path,override:n.S.get("text").editor,editor:n.S.get("text").editor,process:a.op,shouldApply:f.shouldApply??(()=>!0),settings:f.settings||{}})}addSelect(f){return this.addCustomEditor({...f,id:f.path,override:n.S.get("select").editor,editor:n.S.get("select").editor,process:a.AE,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{options:[]}})}addRadio(f){return this.addCustomEditor({...f,id:f.path,override:n.S.get("radio").editor,editor:n.S.get("radio").editor,process:a.AE,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{options:[]}})}addBooleanSwitch(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:a.W4,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addColorPicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("color").editor,override:n.S.get("color").editor,process:a.kG,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addUnitPicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:a.VB,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addFieldNamePicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("field-name").editor,override:n.S.get("field-name").editor,process:a.kG,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addGenericEditor(f,m){return this.addCustomEditor({...f,id:f.path,editor:m,override:m,process:a.kG,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}}class u{constructor(f){this.cfg=f,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=m=>{const v=this.cfg.values;return v?v(m):{getValue:E=>m.getValue(`${this.path}.${E}`),onChange:(E,p)=>m.onChange(`${this.path}.${E}`,p)}},this.path=f.path,this.category=f.category,this.defaultValue=f.defaultValue}}function c(d){return(0,i.Kn)(d)&&"id"in d&&d.id==="nested-panel-options"}class l extends o{addNestedOptions(f){const m=new u(f);return this.addCustomEditor(m)}addNumberInput(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("number").editor})}addSliderInput(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("slider").editor})}addTextInput(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("text").editor})}addStringArray(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("strings").editor})}addSelect(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("select").editor})}addMultiSelect(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("multi-select").editor})}addRadio(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("radio").editor})}addBooleanSwitch(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("boolean").editor})}addColorPicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("color").editor,settings:f.settings||{}})}addTimeZonePicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("timezone").editor,settings:f.settings||{}})}addUnitPicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("unit").editor})}addFieldNamePicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("field-name").editor})}addDashboardPicker(f){return this.addCustomEditor({...f,id:f.path,editor:n.S.get("dashboard-uid").editor})}}},61767:(Q,A,e)=>{"use strict";e.d(A,{I:()=>i});var n=e(69781),a=e.n(n);function i(r){return typeof r=="number"?r:r===""||r===null||r===void 0||Array.isArray(r)?NaN:typeof r=="boolean"?r?1:0:(0,n.toNumber)(r)}},11386:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{moveItemImmutably:()=>a,sortValues:()=>o});var n=e(71199);function a(g,u,c){const l=[...g];return Array.prototype.splice.call(l,c,0,Array.prototype.splice.call(l,u,1)[0]),l}const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),r=(g,u)=>g-u;function o(g){return(u,c)=>{if(u===c)return 0;if(c==null||typeof c=="string"&&c.trim()==="")return-1;if(u==null||typeof u=="string"&&u?.trim()==="")return 1;let l=i.compare;return typeof u=="number"&&typeof c=="number"&&(l=r),g===n.As.Descending?l(c,u):l(u,c)}}},43280:(Q,A,e)=>{"use strict";e.d(A,{L:()=>a,n:()=>i});var n=e(18662),a=(r=>(r.Add="+",r.Subtract="-",r.Divide="/",r.Multiply="*",r))(a||{});const i=new n.B(()=>[{id:"+",name:"Add",operation:(r,o)=>r+o,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(r,o)=>r-o,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(r,o)=>r*o,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(r,o)=>r/o,binaryOperationID:"/"}])},67246:(Q,A,e)=>{"use strict";e.d(A,{MJ:()=>y,QM:()=>v,uP:()=>f,x5:()=>d});var n=e(69781),a=e.n(n),i=e(92909),r=e.n(i),o=e(47862),g=e(98147),u=e(27957),c=e(85666),l=e(86850),d=(D=>(D[D.full=0]="full",D[D.name=1]="name",D[D.none=2]="none",D))(d||{});function f(D,C){return new v(C).readCSV(D)}var m=(D=>(D[D.Starting=0]="Starting",D[D.InHeader=1]="InHeader",D[D.ReadingRows=2]="ReadingRows",D))(m||{});class v{constructor(C){this.chunk=(P,b)=>{for(let T=0;T<P.data.length;T++){const O=P.data[T];if(O.length<1)continue;const R=O[0];if(R){if(R.startsWith("#")){const I=R.indexOf("#",2);if(I>0){const M=R.slice(1,I),x=M==="name";if(x||{unit:"#"}.hasOwnProperty(M)){this.state===2&&(this.current=new o.v({fields:[]}),this.data.push(this.current));const S=R.slice(I+1);if(x){this.current.addFieldFor(void 0,S);for(let U=1;U<O.length;U++)this.current.addFieldFor(void 0,O[U])}else{const{fields:U}=this.current;for(let N=0;N<U.length;N++){U[N].config||(U[N].config={});const w=U[N].config;w[M]=N===0?S:O[N]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,g.LI)(R)===c.fS.string){for(const M of O)this.current.addFieldFor(void 0,M);this.state=1;continue}this.state=1}}if(this.state,this.state=2,O.length>this.current.fields.length){const{fields:I}=this.current;for(let M=I.length;M<O.length;M++)this.current.addFieldFor(O[M]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(O),this.callback&&this.callback.onRow(O)}},C||(C={}),this.config=C.config||{},this.callback=C.callback,this.current=new o.v({fields:[]}),this.state=0,this.data=[]}readCSV(C){this.current=new o.v({fields:[]}),this.data=[this.current];const P={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return r().parse(C,P),this.data}}function E(D,C){if(D==null)return"";const P=D.toString();return P.includes('"')?C.quoteChar+P.replace(/"/gi,'""')+C.quoteChar:P.includes(`
`)||C.delimiter&&P.includes(C.delimiter)?C.quoteChar+P+C.quoteChar:P}function p(D,C){return D.display?P=>{const b=D.display(P);return E((0,l.zc)(b),C)}:P=>E(P,C)}function h(D,C,P){const b=D==="name",T=D==="type";for(const O of C){const R=O.config;if(b||T||R&&R.hasOwnProperty(D)){let I="#"+D+"#";for(let M=0;M<C.length;M++){M>0&&(I=I+P.delimiter);let x=C[M].name;T?x=C[M].type:b||(x=C[M].config[D]),x&&(I=I+E(x,P))}return I+P.newline}}return""}function s(){const D=["x","y"];return D.toLocaleString?D.toLocaleString().charAt(1):","}function y(D,C){if(!D)return"";C=(0,n.defaults)(C,{delimiter:s(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let P=C.useExcelHeader?`sep=${C.delimiter}${C.newline}`:"";for(let b=0;b<D.length;b++){const T=D[b],{fields:O}=T;if(O.length===0)continue;if(C.headerStyle===0)P=P+h("name",O,C)+h("type",O,C)+h("unit",O,C)+h("dateFormat",O,C);else if(C.headerStyle===1){for(let I=0;I<O.length;I++)I>0&&(P+=C.delimiter),P+=`"${(0,u.CZ)(O[I],T).replace(/"/g,'""')}"`;P+=C.newline}const R=O[0].values.length;if(R>0){const I=O.map(M=>p(M,C));for(let M=0;M<R;M++){for(let x=0;x<O.length;x++){x>0&&(P=P+C.delimiter);const L=O[x].values[M];L!==null&&(P=P+I[x](L))}M!==R-1&&(P=P+C.newline)}}b!==D.length-1&&(P=P+C.newline)}return P}},81548:(Q,A,e)=>{"use strict";e.d(A,{W:()=>i,_:()=>r});var n=e(84912),a=e(91977);const i={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function r(c){const{onClickFn:l,replaceVariables:d,link:f,scopedVars:m,range:v,field:E,internalLink:p}=c,h=g(f.internal?.query,m,d),s=g(f.internal?.panelsState,m,d),y=g(f.internal?.meta?.correlationData,m,d),D=f.title?f.title:p.datasourceName;return{title:d(D,m),href:o(p.datasourceUid,h,v,s),onClick:l?C=>{C.preventDefault&&C.preventDefault(),l({datasourceUid:p.datasourceUid,queries:[h],panelsState:s,correlationHelperData:y,range:v})}:void 0,target:f?.targetBlank?"_blank":"_self",origin:E}}function o(c,l,d,f){return n.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,a.S)({...d?.raw?{range:(0,a.R_)(d.raw)}:{},datasource:c,queries:[l],panelsState:f}))}`)}function g(c,l,d){if(!c)return c;if(typeof c=="string")return d(c,l);const f=JSON.parse(JSON.stringify(c));return u(f,l,d)}function u(c,l,d){for(const f of Object.keys(c))typeof c[f]=="string"?c[f]=d(c[f],l):typeof c[f]=="object"&&c[f]!==null&&(c[f]=u(c[f],l,d));return c}},44992:(Q,A,e)=>{"use strict";e.d(A,{BT:()=>o,HD:()=>m,Mf:()=>h,TX:()=>f,_R:()=>u,cv:()=>r,fd:()=>v,fi:()=>c,hz:()=>d,iU:()=>i,nx:()=>l,tp:()=>E,uw:()=>p,z_:()=>g});var n=e(69781),a=e.n(n);function i(s){return{uid:s.uid,type:s.type}}function r(s){return typeof s=="object"&&typeof s?.uid=="string"}function o(s){if(r(s))return s.uid;if((0,n.isString)(s))return s}const g=(s,y)=>D=>{v(s,y,D.currentTarget.value)},u=(s,y)=>D=>{E(s,y,D.currentTarget.value)},c=(s,y)=>D=>{p(s,y,D.currentTarget.value)},l=(s,y)=>D=>{E(s,y,D.value)},d=(s,y)=>D=>{E(s,y,D.currentTarget.checked)},f=(s,y)=>D=>{p(s,y,D.value)},m=(s,y)=>D=>{h(s,y)};function v(s,y,D){const C=s.options;s.onOptionsChange({...C,[y]:D})}const E=(s,y,D)=>{const C=s.options;s.onOptionsChange({...C,jsonData:{...C.jsonData,[y]:D}})},p=(s,y,D)=>{const C=s.options;s.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[y]:D}})},h=(s,y)=>{const D=s.options;s.onOptionsChange({...D,secureJsonData:{...D.secureJsonData?D.secureJsonData:{},[y]:""},secureJsonFields:{...D.secureJsonFields,[y]:!1}})}},74687:(Q,A,e)=>{"use strict";e.d(A,{d:()=>a});const n={},a=(i,r,o)=>{let g=`[Deprecation warning] ${i}: ${r} is deprecated`;o&&(g+=`. Use ${o} instead`);const u=Date.now(),c=n[g];(!c||u-c>1e4)&&(console.warn(g),n[g]=u)}},60496:(Q,A,e)=>{"use strict";e.d(A,{x:()=>n});var n=(a=>(a[a.Transformations=0]="Transformations",a[a.FieldConfig=1]="FieldConfig",a[a.FieldConfigOverrides=2]="FieldConfigOverrides",a))(n||{})},77510:(Q,A,e)=>{"use strict";e.d(A,{H:()=>i,k:()=>a});var n=e(20298);function a({xField:r,yField:o,nullValueMode:g}){const u=r.values,c=o.values,l=u.length;if(c.length!==l)throw new Error("Unexpected field length");const d=g===n.Gl.Ignore,f=g===n.Gl.AsZero,m=[];for(let v=0;v<l;v++){const E=u[v];let p=c[v];if(p===null){if(d)continue;f&&(p=0)}E!==null&&m.push([E,p])}return m}function i(r,o){if(!o.from||!o.to||!r||r.length===0)return[];const g=o.from.valueOf(),u=o.to.valueOf(),c=r[0][1];return[[g,c],[u,c]]}},4174:(Q,A,e)=>{"use strict";e.d(A,{LH:()=>m.L,x5:()=>o.x5,QM:()=>o.QM,WC:()=>C.W,xV:()=>P.x,vo:()=>h.vo,HU:()=>R.HU,zG:()=>E.z,rt:()=>h.rt,Bz:()=>a.B,T1:()=>v.T,IX:()=>T.I,sq:()=>n,nk:()=>m.n,ZC:()=>l,bf:()=>I.b,Jb:()=>R.Jb,d9:()=>r.d,FT:()=>g.FT,IU:()=>g.IU,aA:()=>g.aA,iU:()=>i.iU,BT:()=>i.BT,k8:()=>s.k,HE:()=>s.H,_6:()=>I._,e4:()=>d,dP:()=>u.d,fp:()=>f,cv:()=>i.cv,Qr:()=>c.Q,uT:()=>y.u,s2:()=>b.s,_N:()=>C._,VS:()=>g.VS,Sp:()=>x.S,Hh:()=>c.H,_R:()=>i._R,hz:()=>i.hz,nx:()=>i.nx,z_:()=>i.z_,HD:()=>i.HD,fi:()=>i.fi,TX:()=>i.TX,J8:()=>g.J8,uP:()=>o.uP,Wn:()=>M.W,O9:()=>u.O,S:()=>D.S,MJ:()=>o.MJ,Er:()=>p.E,R_:()=>D.R_,mL:()=>v.m,tp:()=>i.tp,fd:()=>i.fd,Mf:()=>i.Mf,uw:()=>i.uw,Cj:()=>D.Cj,xc:()=>O.x});var n=e(11386),a=e(18662),i=e(44992),r=e(74687),o=e(67246),g=e(84479),u=e(73899),c=e(32147);const l=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],d=L=>{let S,U,N=Number.MAX_VALUE;for(let w=0;w<L.values.length;w++){const G=L.values[w];if(S!==void 0){const _=G-S;U===void 0&&(N=_),_<N&&(N=_)}S=G}return N},f=L=>{for(let S=0;S<L.values.length;S++){const U=L.values[S];if(U!=null){const N=U.toString();if(N.length===13&&N%1e3!==0)return!0}}return!1};var m=e(43280),v=e(95961),E=e(56790),p=e(84275),h=e(41540),s=e(77510),y=e(84912),D=e(91977),C=e(81548),P=e(60496),b=e(20187),T=e(61767),O=e(83095),R=e(55156),I=e(49689),M=e(78601),x=e(42139)},84479:(Q,A,e)=>{"use strict";e.d(A,{FT:()=>i,IU:()=>r,J8:()=>a,VS:()=>o,aA:()=>g});const n=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function a(u){const c={};return u.replace(n,(l,d,f,m)=>(c[d]=m,"")),c}function i(u){return u.reduce((c,l)=>{if(!l)throw new Error("Need parsed labels to find common labels.");return Object.keys(l).forEach(d=>{(c[d]===void 0||c[d]!==l[d])&&delete c[d]}),Object.keys(c).forEach(d=>{l[d]===void 0&&delete c[d]}),c},{...u[0]})}function r(u,c){const l={...u};return Object.keys(c).forEach(d=>{delete l[d]}),l}function o(u,c){if(!u)return!0;for(const[l,d]of Object.entries(u))if(!c||c[l]!==d)return!1;return!0}function g(u,c="",l){if(!u||Object.keys(u).length===0)return c;const f=Object.keys(u).sort().map(m=>`${m}="${u[m]}"`).join(", ");return l?f:["{",f,"}"].join("")}},84912:(Q,A,e)=>{"use strict";e.d(A,{u:()=>f});var n=e(98827),a=e(91977);let i={appSubUrl:""},r,o;const g=m=>{try{return new URL(m)}catch{return}},u=m=>{const v=g(m);if(v&&v.origin!==window.location.origin)return m;const E=i.appSubUrl??"",p=E.endsWith("/")?1:0,h=m.startsWith("http");let s=E;return(!m.startsWith("/")||h)&&(s=`${window.location.origin}${E}`),m.length>0&&(m.indexOf(s+"/")===0||m===s)?m.slice(s.length-p):m},c=m=>m.startsWith("/")?`${i.appSubUrl}${u(m)}`:m,f={initialize:m=>{i=m.config,r=m.getTimeRangeForUrl,o=m.getVariablesUrlParams},stripBaseFromUrl:u,assureBaseUrl:c,updateSearchParams:(m,v)=>{const E=new URLSearchParams(v);try{const p=new URL(m);return E.forEach((h,s)=>p.searchParams.set(s,h)),p.href}catch{const p=new URLSearchParams(m);return E.forEach((h,s)=>{p.set(s,h)}),"?"+p.toString()}},getTimeRangeUrlParams:()=>r?a.Cj.toUrlParams(r()):null,getVariablesUrlParams:m=>{if(!o)return null;const v=o(m);return a.Cj.toUrlParams(v)},getUrlForPartial:(m,v)=>{const E=a.Cj.parseKeyValue(m.search.startsWith("?")?m.search.substring(1):m.search);for(const p of Object.keys(v))v[p]===null||v[p]===void 0?delete E[p]:E[p]=v[p];return c(a.Cj.renderUrl(m.pathname,E))},processUrl:m=>i.disableSanitizeHtml?m:n.QX.sanitizeUrl(m)}},20187:(Q,A,e)=>{"use strict";e.d(A,{s:()=>n});function n(a){return new Proxy(a,{apply(i,r,o){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(i,o,r.constructor)}})}},42139:(Q,A,e)=>{"use strict";e.d(A,{S:()=>n});function n(a,i){return i.id===a?!0:i.aliasIDs?i.aliasIDs.includes(a):!1}},56790:(Q,A,e)=>{"use strict";e.d(A,{z:()=>n});var n=(a=>(a.id="id",a.title="title",a.subTitle="subtitle",a.mainStat="mainstat",a.secondaryStat="secondarystat",a.arc="arc__",a.icon="icon",a.color="color",a.source="source",a.target="target",a.detail="detail__",a.nodeRadius="noderadius",a.thickness="thickness",a.highlighted="highlighted",a))(n||{})},73899:(Q,A,e)=>{"use strict";e.d(A,{O:()=>n,d:()=>a});function n(i,r=0){if(Number.isInteger(i))return i;let o=10**r,g=i*o*(1+Number.EPSILON);return Math.round(g)/o}function a(i){return((""+i).split(".")[1]||"").length}},32147:(Q,A,e)=>{"use strict";e.d(A,{H:()=>n,Q:()=>a});const n=i=>Object.keys(i).reduce((r,o)=>(i[o]!==void 0&&(r[o]=i[o]),r),{}),a=i=>typeof i=="object"&&i!==null&&Object.keys(i).length===0},84275:(Q,A,e)=>{"use strict";e.d(A,{E:()=>n});const n=a=>({label:a,value:a})},95961:(Q,A,e)=>{"use strict";e.d(A,{T:()=>a,m:()=>i});var n=e(18662),a=(r=>(r.Abs="abs",r.Exp="exp",r.Ln="ln",r.Floor="floor",r.Ceil="ceil",r))(a||{});const i=new n.B(()=>[{id:"abs",name:"Absolute value",operation:r=>Math.abs(r),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:r=>Math.exp(r),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:r=>Math.log(r),unaryOperationID:"ln"},{id:"floor",name:"Floor",operation:r=>Math.floor(r),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:r=>Math.ceil(r),unaryOperationID:"ceil"}])},91977:(Q,A,e)=>{"use strict";e.d(A,{Cj:()=>d,R_:()=>m,S:()=>f});var n=e(74011);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function a(v,E){return E&&Object.keys(E).length>0&&(v+="?"+r(E)),v}function i(v,E){return encodeURIComponent(v).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,E?"%20":"+").replace(/[!'()*]/g,function(p){return"%"+p.charCodeAt(0).toString(16).toUpperCase()})}function r(v,E=!0){const p=[],h=/\[\]$/,s=E?(P,b)=>i(P,b):(P,b)=>encodeURIComponent(P),y=P=>Object.prototype.toString.call(P)==="[object Array]",D=(P,b)=>{if(b=typeof b=="function"?b():b===null||b===void 0?"":b,typeof b!="boolean")p[p.length]=s(P,!0)+"="+s(b,!0);else{const T=b?"":"="+s("false",!0);p[p.length]=s(P,!0)+T}},C=(P,b)=>{let T,O,R;if(P)if(y(b))for(T=0,O=b.length;T<O;T++)h.test(P)?D(P,b[T]):C(P,b[T]);else if(b&&String(b)==="[object Object]")for(R in b)C(P+"["+R+"]",b[R]);else D(P,b);else if(y(b))for(T=0,O=b.length;T<O;T++)D(b[T].name,b[T].value);else for(R in b)C(R,b[R]);return p};return C("",v).join("&")}function o(v){return r(v,!1)}function g(v,E){if(E!=null&&E!==""){const p=v.indexOf("?");p!==-1?v.length-p>1&&(v+="&"):v+="?",v+=E}return v}function u(){const E=window.location.search.substring(1).split("&"),p={};for(const h of E){const s=h.split("=");if(s.length>1){const y=decodeURIComponent(s[0]),D=decodeURIComponent(s[1]);y in p?p[y]=[...p[y],D]:p[y]=[D]}else if(s.length===1){const y=decodeURIComponent(s[0]);p[y]=!0}}return p}function c(v){const E={},p=(v||"").split("&");for(let h of p){let s,y,D;if(h&&(y=h=h.replace(/\+/g,"%20"),s=h.indexOf("="),s!==-1&&(y=h.substring(0,s),D=h.substring(s+1)),y=l(y),y!==void 0)){D=D!==void 0?l(D):!0;let C;typeof D=="string"&&D!==""?C=D==="true"||D==="false"?D==="true":D:C=D,E.hasOwnProperty(y)?Array.isArray(E[y])?E[y].push(D):E[y]=[E[y],isNaN(C)?D:C]:E[y]=isNaN(C)?D:C}}return E}function l(v){try{return decodeURIComponent(v)}catch{return}}const d={renderUrl:a,toUrlParams:r,appendQueryToUrl:g,getUrlSearchParams:u,parseKeyValue:c,serializeParams:o};function f(v,E){return E!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(v)}const m=v=>{let E=v.from;(0,n.v9)(E)&&(E=E.valueOf().toString());let p=v.to;return(0,n.v9)(p)&&(p=p.valueOf().toString()),{from:E,to:p}}},55156:(Q,A,e)=>{"use strict";e.d(A,{HU:()=>g,Jb:()=>u,vh:()=>r});var n=e(27369),a=e(84834),i=e(6803);function r(l,d){for(const f of l)switch(f.type){case i.H.ValueToText:if(d==null)continue;const m=f.options[d];if(m)return m;break;case i.H.RangeToText:if(d==null)continue;const v=parseFloat(d);if(isNaN(v)||!isNaN(f.options.from)&&v<f.options.from||!isNaN(f.options.to)&&v>f.options.to)continue;return f.options.result;case i.H.RegexToText:if(d==null||typeof d!="string")continue;const h=(0,a.jO)(f.options.pattern);if(d.match(h)){const s={...f.options.result};return s.text!=null&&(s.text=d.replace(h,f.options.result.text||"")),s}case i.H.SpecialValue:switch(f.options.match){case i.e.Null:{if(d==null)return f.options.result;break}case i.e.NaN:{if(typeof d=="number"&&isNaN(d))return f.options.result;break}case i.e.NullAndNaN:{if(typeof d=="number"&&isNaN(d)||d==null)return f.options.result;break}case i.e.True:{if(d===!0||d==="true")return f.options.result;break}case i.e.False:{if(d===!1||d==="false")return f.options.result;break}case i.e.Empty:{if(d==="")return f.options.result;break}}}return null}function o(l){return(typeof l=="number"||typeof l=="string"&&l.trim()!=="")&&!isNaN(l)}var g=(l=>(l[l.ValueToText=1]="ValueToText",l[l.RangeToText=2]="RangeToText",l))(g||{});function u(l,d){const f=[];let m=l.mappingType;if(l.mappingType||(l.valueMaps&&l.valueMaps.length?m=1:l.rangeMaps&&l.rangeMaps.length&&(m=2)),m===1)for(let v=0;v<l.valueMaps.length;v++){const E=l.valueMaps[v];f.push(c({...E,id:v,type:i.H.ValueToText},l.fieldConfig?.defaults?.thresholds||d))}else if(m===2)for(let v=0;v<l.rangeMaps.length;v++){const E=l.rangeMaps[v];f.push(c({...E,id:v,type:i.H.RangeToText},l.fieldConfig?.defaults?.thresholds||d))}return f}function c(l,d){const f={type:i.H.ValueToText,options:{}},m=[];let v;const E=parseFloat(l.text);if(d&&!isNaN(E)){const p=(0,n.m1)(E,d.steps);p&&p.color&&(v=p.color)}switch(l.type){case 1:case i.H.ValueToText:l.value!=null&&(l.value==="null"?m.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:l.text,color:v}}}):f.options[String(l.value)]={text:l.text,color:v});break;case 2:case i.H.RangeToText:l.from==="null"||l.to==="null"?m.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:l.text,color:v}}}):m.push({type:i.H.RangeToText,options:{from:+l.from,to:+l.to,result:{text:l.text,color:v}}});break}return Object.keys(f.options).length>0&&m.unshift(f),m[0]}},49689:(Q,A,e)=>{"use strict";e.d(A,{_:()=>i,b:()=>a});const n="__searchFilter",a=r=>r&&typeof r=="string"?r.indexOf(n)!==-1:!1,i=r=>{const{query:o,wildcardChar:g}=r;if(!a(o))return{};let{options:u}=r;return u=u||{searchFilter:""},{__searchFilter:{value:u.searchFilter?`${u.searchFilter}${g}`:`${g}`,text:""}}}},83095:(Q,A,e)=>{"use strict";e.d(A,{x:()=>o});var n=e(26722),a=e(96506),i=e(79163),r=e(50014);function o({whileLoading:g,source:u}){return(0,n.T)((0,a.H)(200).pipe((0,i.h)(g),(0,r.R)(u)),u)}},16613:(Q,A,e)=>{"use strict";e.d(A,{Cf:()=>n.Cf,FH:()=>n.FH,IR:()=>n.IR,QW:()=>n.QW,Qj:()=>n.Qj,SP:()=>n.SP,SR:()=>n.SR,Td:()=>n.Td,bn:()=>n.bn,br:()=>n.br,q2:()=>n.q2,vb:()=>n.vb,zc:()=>n.zc});var n=e(86850)},34668:(Q,A,e)=>{"use strict";e.d(A,{Aq:()=>a,Yh:()=>u,dT:()=>o,i7:()=>c});var n=e(86850);function a(l,d){const f=["","K","M","B","T"],m=(0,n.Qj)(1e3,f);return(v,E,p)=>{if(v==null)return{text:""};const h=v<0;h&&(v=Math.abs(v));const s=m(v,E,p);return d?s.suffix=s.suffix!==void 0?`${s.suffix}${l}`:void 0:s.prefix=l,h&&(s.prefix=`-${s.prefix?.length?s.prefix:""}`),s}}const i=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],r=i.indexOf("");function o(l){const d=i.findIndex(f=>f.normalize("NFKD")===l.normalize("NFKD"));return d<0?0:d-r}const g=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function u(l,d=0){const f=g.map(m=>" "+m+l);return(0,n.Qj)(1024,f,d)}function c(l,d=0,f=!0){const m=i.map(v=>" "+v+l);return f?(0,n.Qj)(1e3,m,r+d):(0,n.q2)(i[r+d]+l)}},86850:(Q,A,e)=>{"use strict";e.d(A,{IR:()=>ve,zc:()=>H,Cf:()=>ke,QW:()=>it,Td:()=>ot,br:()=>fe,SP:()=>Pe,Qj:()=>Me,SR:()=>Ee,vb:()=>he,FH:()=>re,bn:()=>q,q2:()=>oe});var n=e(69781);function a(ce,le){return ce===null?{text:""}:{text:re(ce,le),suffix:"%"}}function i(ce,le){return ce===null?{text:""}:{text:re(100*ce,le),suffix:"%"}}function r(ce,le){if(ce==null)return{text:""};const Re=o(ce,le);return Re.text.substring(0,1)==="-"?Re.text="-0x"+Re.text.substring(1):Re.text="0x"+Re.text,Re}function o(ce,le){return ce==null?{text:""}:{text:parseFloat(re(ce,le)).toString(16).toUpperCase()}}function g(ce,le){return ce==null?{text:""}:{text:ce.toExponential(le??void 0)}}var u=e(40137),c=e(74337),l=e(74011),d=(ce=>(ce.Year="year",ce.Month="month",ce.Week="week",ce.Day="day",ce.Hour="hour",ce.Minute="minute",ce.Second="second",ce.Millisecond="millisecond",ce))(d||{});const f=["year","month","week","day","hour","minute","second","millisecond"],m={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function v(ce,le){return ce===null?{text:""}:Math.abs(ce)<1e3?{text:re(ce,le),suffix:" ns"}:Math.abs(ce)<1e6?q(ce/1e3,le," \xB5s"):Math.abs(ce)<1e9?q(ce/1e6,le," ms"):Math.abs(ce)<6e10?q(ce/1e9,le," s"):Math.abs(ce)<36e11?q(ce/6e10,le," min"):Math.abs(ce)<864e11?q(ce/36e11,le," hour"):q(ce/864e11,le," day")}function E(ce,le){return ce===null?{text:""}:Math.abs(ce)<1e3?{text:re(ce,le),suffix:" \xB5s"}:Math.abs(ce)<1e6?q(ce/1e3,le," ms"):q(ce/1e6,le," s")}function p(ce,le,Re){return ce===null?{text:""}:Math.abs(ce)<1e3?{text:re(ce,le),suffix:" ms"}:Math.abs(ce)<6e4?q(ce/1e3,le," s"):Math.abs(ce)<36e5?q(ce/6e4,le," min"):Math.abs(ce)<864e5?q(ce/36e5,le," hour"):Math.abs(ce)<31536e6?q(ce/864e5,le," day"):q(ce/31536e6,le," year")}function h(ce,le){if(ce!=null&&le!==null&&le!==void 0)return ce-le}function s(ce,le){return ce===null?{text:""}:ce===0?{text:"0",suffix:" s"}:Math.abs(ce)<1e-6?q(ce*1e9,le," ns"):Math.abs(ce)<.001?q(ce*1e6,le," \xB5s"):Math.abs(ce)<1?q(ce*1e3,le," ms"):Math.abs(ce)<60?{text:re(ce,le),suffix:" s"}:Math.abs(ce)<3600?q(ce/60,le," min"):Math.abs(ce)<86400?q(ce/3600,le," hour"):Math.abs(ce)<604800?q(ce/86400,le," day"):Math.abs(ce)<31536e3?q(ce/604800,le," week"):q(ce/31556900,le," year")}function y(ce,le){return ce===null?{text:""}:Math.abs(ce)<60?{text:re(ce,le),suffix:" min"}:Math.abs(ce)<1440?q(ce/60,le," hour"):Math.abs(ce)<10080?q(ce/1440,le," day"):Math.abs(ce)<604800?q(ce/10080,le," week"):q(ce/525948,le," year")}function D(ce,le){return ce===null?{text:""}:Math.abs(ce)<24?{text:re(ce,le),suffix:" hour"}:Math.abs(ce)<168?q(ce/24,le," day"):Math.abs(ce)<8760?q(ce/168,le," week"):q(ce/8760,le," year")}function C(ce,le){return ce===null?{text:""}:Math.abs(ce)<7?{text:re(ce,le),suffix:" day"}:Math.abs(ce)<365?q(ce/7,le," week"):q(ce/365,le," year")}function P(ce,le,Re){if(ce===null)return{text:""};if(ce===0)return{text:"0",suffix:" "+Re+"s"};if(ce<0){const Ye=P(-ce,le,Re);return Ye.suffix||(Ye.suffix=""),Ye.suffix+=" ago",Ye}ce*=m[Re]*1e3;const Ae=[];let Oe=!1,$e=0;le!=null&&($e=le);for(let Ye=0;Ye<f.length&&$e>=0;Ye++){const Ne=m[f[Ye]]*1e3,je=ce/Ne;if(je>=1||Oe){Oe=!0;const ut=Math.floor(je),Fe=f[Ye]+(ut!==1?"s":"");Ae.push(ut+" "+Fe),ce=ce%Ne,$e--}}return{text:Ae.join(", ")}}function b(ce,le){if(ce===null)return{text:""};if(ce<1e3)return{text:(0,l.zh)(ce).format("SSS\\m\\s")};if(ce<6e4){let $e="ss\\s:SSS\\m\\s";return le===0&&($e="ss\\s"),{text:(0,l.zh)(ce).format($e)}}if(ce<36e5){let $e="mm\\m:ss\\s:SSS\\m\\s";return le===0?$e="mm\\m":le===1&&($e="mm\\m:ss\\s"),{text:(0,l.zh)(ce).format($e)}}let Re="mm\\m:ss\\s:SSS\\m\\s";const Ae=`${("0"+Math.floor((0,l.Ks)(ce,"milliseconds").asHours())).slice(-2)}h`;return le===0?Re="":le===1?Re="mm\\m":le===2&&(Re="mm\\m:ss\\s"),{text:Re?`${Ae}:${(0,l.zh)(ce).format(Re)}`:Ae}}function T(ce,le){return P(ce,le,"millisecond")}function O(ce,le){return P(ce,le,"second")}function R(ce){if(ce<0){const $e=R(-ce);return $e.suffix||($e.suffix=""),$e.suffix+=" ago",$e}const le=[],Re=Math.floor(ce/3600),Ae=Math.floor(ce%3600/60),Oe=Math.floor(ce%3600%60);return Re>9?le.push(""+Re):le.push("0"+Re),Ae>9?le.push(""+Ae):le.push("0"+Ae),Oe>9?le.push(""+Oe):le.push("0"+Oe),{text:le.join(":")}}function I(ce){if(ce<0){const Oe=I(-ce);return Oe.suffix||(Oe.suffix=""),Oe.suffix+=" ago",Oe}let le="";const Re=Math.floor(ce/(24*3600));Re>0&&(le=Re+" d ");const Ae=R(ce-Re*24*3600);return{text:le+Ae.text}}function M(ce,le){return s(ce/100,le)}function x(ce,le){return b(ce,le)}function L(ce,le){return b(ce*1e3,le)}function S(ce,le){return(Re,Ae,Oe,$e)=>le&&(0,l.CQ)().isSame(Re,"day")?{text:(0,u.dq)(Re,{format:le,timeZone:$e})}:{text:(0,u.dq)(Re,{format:ce,timeZone:$e})}}const U=S("YYYY-MM-DD HH:mm:ss"),N=S("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),w=S("MM/DD/YYYY h:mm:ss a"),G=S("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function _(){return S((0,c.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function K(){return S((0,c.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,c.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function k(ce,le,Re,Ae,Oe){return{text:(0,u.dq)(ce,{format:Oe?c.U6.fullDateMS:c.U6.fullDate,timeZone:Ae})}}function z(ce,le,Re,Ae){return{text:(0,u.E8)(ce,{timeZone:Ae})}}var W=e(34668);const Z=(ce=!0)=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:oe("")},{name:"String",id:"string",fn:he},{name:"short",id:"short",fn:Me(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:a},{name:"Percent (0.0-1.0)",id:"percentunit",fn:i},{name:"Humidity (%H)",id:"humidity",fn:oe("%H")},{name:"Decibel",id:"dB",fn:oe("dB")},{name:"Candela (cd)",id:"candela",fn:(0,W.i7)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:r},{name:"Hexadecimal",id:"hex",fn:o},{name:"Scientific notation",id:"sci",fn:g},{name:"Locale format",id:"locale",fn:Pe},{name:"Pixels",id:"pixel",fn:oe("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:oe("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:oe("f/sec\xB2")},{name:"G unit",id:"accG",fn:oe("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:oe("\xB0")},{name:"Radians",id:"radian",fn:oe("rad")},{name:"Gradian",id:"grad",fn:oe("grad")},{name:"Arc Minutes",id:"arcmin",fn:oe("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:oe("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:oe("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:oe("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:oe("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:oe("ac")},{name:"Hectares (ha)",id:"hectares",fn:oe("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,W.i7)("FLOPS",0,ce)},{name:"MFLOP/s",id:"mflops",fn:(0,W.i7)("FLOPS",2,ce)},{name:"GFLOP/s",id:"gflops",fn:(0,W.i7)("FLOPS",3,ce)},{name:"TFLOP/s",id:"tflops",fn:(0,W.i7)("FLOPS",4,ce)},{name:"PFLOP/s",id:"pflops",fn:(0,W.i7)("FLOPS",5,ce)},{name:"EFLOP/s",id:"eflops",fn:(0,W.i7)("FLOPS",6,ce)},{name:"ZFLOP/s",id:"zflops",fn:(0,W.i7)("FLOPS",7,ce)},{name:"YFLOP/s",id:"yflops",fn:(0,W.i7)("FLOPS",8,ce)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:oe("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:oe("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:oe("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:oe("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:oe("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:oe("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:oe("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:oe("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:oe("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:oe("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:oe("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:oe("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,W.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,W.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,W.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,W.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,W.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,W.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,W.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,W.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,W.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,W.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,W.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,W.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,W.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,W.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,W.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,W.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,W.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,W.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,W.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,W.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,W.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,W.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,W.Aq)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,W.Aq)("\u20BA",!0)},{name:"Malaysian Ringgit (RM)",id:"currencyMYR",fn:(0,W.Aq)("RM")},{name:"CFP franc (XPF)",id:"currencyXPF",fn:(0,W.Aq)("XPF")},{name:"Bulgarian Lev (BGN)",id:"currencyBGN",fn:(0,W.Aq)("BGN")}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,W.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,W.i7)("B",0,ce)},{name:"bits(IEC)",id:"bits",fn:(0,W.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,W.i7)("b",0,ce)},{name:"kibibytes",id:"kbytes",fn:(0,W.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,W.i7)("B",1,ce)},{name:"mebibytes",id:"mbytes",fn:(0,W.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,W.i7)("B",2,ce)},{name:"gibibytes",id:"gbytes",fn:(0,W.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,W.i7)("B",3,ce)},{name:"tebibytes",id:"tbytes",fn:(0,W.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,W.i7)("B",4,ce)},{name:"pebibytes",id:"pbytes",fn:(0,W.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,W.i7)("B",5,ce)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,W.i7)("p/s",0,ce)},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,W.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,W.i7)("B/s",0,ce)},{name:"bits/sec(IEC)",id:"binbps",fn:(0,W.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,W.i7)("b/s",0,ce)},{name:"kibibytes/sec",id:"KiBs",fn:(0,W.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,W.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,W.i7)("B/s",1,ce)},{name:"kilobits/sec",id:"Kbits",fn:(0,W.i7)("b/s",1,ce)},{name:"mebibytes/sec",id:"MiBs",fn:(0,W.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,W.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,W.i7)("B/s",2,ce)},{name:"megabits/sec",id:"Mbits",fn:(0,W.i7)("b/s",2,ce)},{name:"gibibytes/sec",id:"GiBs",fn:(0,W.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,W.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,W.i7)("B/s",3,ce)},{name:"gigabits/sec",id:"Gbits",fn:(0,W.i7)("b/s",3,ce)},{name:"tebibytes/sec",id:"TiBs",fn:(0,W.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,W.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,W.i7)("B/s",4,ce)},{name:"terabits/sec",id:"Tbits",fn:(0,W.i7)("b/s",4,ce)},{name:"pebibytes/sec",id:"PiBs",fn:(0,W.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,W.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,W.i7)("B/s",5,ce)},{name:"petabits/sec",id:"Pbits",fn:(0,W.i7)("b/s",5,ce)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:U},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:N},{name:"Datetime US",id:"dateTimeAsUS",fn:w},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:G},{name:"Datetime local",id:"dateTimeAsLocal",fn:_()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:K()},{name:"Datetime default",id:"dateTimeAsSystem",fn:k},{name:"From Now",id:"dateTimeFromNow",fn:z}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,W.i7)("W",0,ce)},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,W.i7)("W",1,ce)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,W.i7)("W",2,ce)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,W.i7)("W",3,ce)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,W.i7)("W",-1,ce)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:oe("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,W.i7)("VA",0,ce)},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,W.i7)("VA",1,ce)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,W.i7)("VAr",0,ce)},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,W.i7)("VAr",1,ce)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,W.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,W.i7)("Wh/kg",0,ce)},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,W.i7)("Wh",1,ce)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,W.i7)("W-Min",1,ce)},{name:"Megawatt-hour (MWh)",id:"mwatth",fn:(0,W.i7)("Wh",2,ce)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,W.i7)("Ah",0,ce)},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,W.i7)("Ah",1,ce)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,W.i7)("Ah",-1,ce)},{name:"Joule (J)",id:"joule",fn:(0,W.i7)("J",0,ce)},{name:"Electron volt (eV)",id:"ev",fn:(0,W.i7)("eV",0,ce)},{name:"Ampere (A)",id:"amp",fn:(0,W.i7)("A",0,ce)},{name:"Kiloampere (kA)",id:"kamp",fn:(0,W.i7)("A",1,ce)},{name:"Milliampere (mA)",id:"mamp",fn:(0,W.i7)("A",-1,ce)},{name:"Volt (V)",id:"volt",fn:(0,W.i7)("V",0,ce)},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,W.i7)("V",1,ce)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,W.i7)("V",-1,ce)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,W.i7)("dBm",0,ce)},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,W.i7)("\u03A9",-1,ce)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,W.i7)("\u03A9",0,ce)},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,W.i7)("\u03A9",1,ce)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,W.i7)("\u03A9",2,ce)},{name:"Farad (F)",id:"farad",fn:(0,W.i7)("F",0,ce)},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,W.i7)("F",-2,ce)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,W.i7)("F",-3,ce)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,W.i7)("F",-4,ce)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,W.i7)("F",-5,ce)},{name:"Henry (H)",id:"henry",fn:(0,W.i7)("H",0,ce)},{name:"Millihenry (mH)",id:"mhenry",fn:(0,W.i7)("H",-1,ce)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,W.i7)("H",-2,ce)},{name:"Lumens (Lm)",id:"lumens",fn:(0,W.i7)("Lm",0,ce)}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:oe("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:oe("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:oe("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:oe("cfm")},{name:"Litre/hour",id:"litreh",fn:oe("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:oe("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:oe("mL/min")},{name:"Lux (lx)",id:"lux",fn:oe("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,W.i7)("Nm",0,ce)},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,W.i7)("Nm",1,ce)},{name:"Newtons (N)",id:"forceN",fn:(0,W.i7)("N",0,ce)},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,W.i7)("N",1,ce)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,W.i7)("H/s",0,ce)},{name:"kilohashes/sec",id:"KHs",fn:(0,W.i7)("H/s",1,ce)},{name:"megahashes/sec",id:"MHs",fn:(0,W.i7)("H/s",2,ce)},{name:"gigahashes/sec",id:"GHs",fn:(0,W.i7)("H/s",3,ce)},{name:"terahashes/sec",id:"THs",fn:(0,W.i7)("H/s",4,ce)},{name:"petahashes/sec",id:"PHs",fn:(0,W.i7)("H/s",5,ce)},{name:"exahashes/sec",id:"EHs",fn:(0,W.i7)("H/s",6,ce)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,W.i7)("g",-1,ce)},{name:"gram (g)",id:"massg",fn:(0,W.i7)("g",0,ce)},{name:"pound (lb)",id:"masslb",fn:oe("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,W.i7)("g",1,ce)},{name:"metric ton (t)",id:"masst",fn:oe("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,W.i7)("m",-1,ce)},{name:"inch (in)",id:"lengthin",fn:oe("in")},{name:"feet (ft)",id:"lengthft",fn:oe("ft")},{name:"meter (m)",id:"lengthm",fn:(0,W.i7)("m",0,ce)},{name:"kilometer (km)",id:"lengthkm",fn:(0,W.i7)("m",1,ce)},{name:"mile (mi)",id:"lengthmi",fn:oe("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,W.i7)("bar",-1,ce)},{name:"Bars",id:"pressurebar",fn:(0,W.i7)("bar",0,ce)},{name:"Kilobars",id:"pressurekbar",fn:(0,W.i7)("bar",1,ce)},{name:"Pascals",id:"pressurepa",fn:(0,W.i7)("Pa",0,ce)},{name:"Hectopascals",id:"pressurehpa",fn:oe("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:oe("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:oe('"Hg')},{name:"PSI",id:"pressurepsi",fn:Me(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,W.i7)("Bq",0,ce)},{name:"curie (Ci)",id:"radci",fn:(0,W.i7)("Ci",0,ce)},{name:"Gray (Gy)",id:"radgy",fn:(0,W.i7)("Gy",0,ce)},{name:"rad",id:"radrad",fn:(0,W.i7)("rad",0,ce)},{name:"Sievert (Sv)",id:"radsv",fn:(0,W.i7)("Sv",0,ce)},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,W.i7)("Sv",-1,ce)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,W.i7)("Sv",-2,ce)},{name:"rem",id:"radrem",fn:(0,W.i7)("rem",0,ce)},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,W.i7)("C/kg",0,ce)},{name:"roentgen (R)",id:"radr",fn:(0,W.i7)("R",0,ce)},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,W.i7)("Sv/h",0,ce)},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,W.i7)("Sv/h",-1,ce)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,W.i7)("Sv/h",-2,ce)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:oe("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,W.i7)("Hz",0,ce)},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,W.i7)("Hz",1,ce)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,W.i7)("Hz",2,ce)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,W.i7)("Hz",3,ce)},{name:"Radians per second (rad/s)",id:"rotrads",fn:oe("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:oe("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:oe("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:oe("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:oe("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,W.i7)("Hz",0,ce)},{name:"nanoseconds (ns)",id:"ns",fn:v},{name:"microseconds (\xB5s)",id:"\xB5s",fn:E},{name:"milliseconds (ms)",id:"ms",fn:p},{name:"seconds (s)",id:"s",fn:s},{name:"minutes (m)",id:"m",fn:y},{name:"hours (h)",id:"h",fn:D},{name:"days (d)",id:"d",fn:C},{name:"duration (ms)",id:"dtdurationms",fn:T},{name:"duration (s)",id:"dtdurations",fn:O},{name:"duration (hh:mm:ss)",id:"dthms",fn:R},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:I},{name:"Timeticks (s/100)",id:"timeticks",fn:M},{name:"clock (ms)",id:"clockms",fn:x},{name:"clock (s)",id:"clocks",fn:L}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:Ee("c/s")},{name:"ops/sec (ops)",id:"ops",fn:Ee("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:Ee("req/s")},{name:"reads/sec (rps)",id:"rps",fn:Ee("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:Ee("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:Ee("io/s")},{name:"events/sec (eps)",id:"eps",fn:Ee("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:Ee("msg/s")},{name:"records/sec (rps)",id:"recps",fn:Ee("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:Ee("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:Ee("c/m")},{name:"ops/min (opm)",id:"opm",fn:Ee("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:Ee("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:Ee("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:Ee("wr/m")},{name:"events/min (epm)",id:"epm",fn:Ee("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:Ee("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:Ee("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:Ee("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:oe("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:oe("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:oe("mph")},{name:"knot (kn)",id:"velocityknot",fn:oe("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,W.i7)("L",-1,ce)},{name:"litre (L)",id:"litre",fn:(0,W.i7)("L",0,ce)},{name:"cubic meter",id:"m3",fn:oe("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:oe("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:oe("dm\xB3")},{name:"gallons",id:"gallons",fn:oe("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ve("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ve("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ve("On","Off")}]}];function H(ce){return`${ce.prefix??""}${ce.text}${ce.suffix??""}`}let X=[];const Y={},ne={};let se=!1;function re(ce,le){if(ce===null)return"";if(ce===Number.NEGATIVE_INFINITY||ce===Number.POSITIVE_INFINITY)return ce.toLocaleString();if(le==null&&(le=ge(ce)),ce===0)return ce.toFixed(le);const Re=le?Math.pow(10,Math.max(0,le)):1,Ae=String(Math.round(ce*Re)/Re);if(Ae.indexOf("e")!==-1||ce===0)return Ae;const Oe=Ae.indexOf("."),$e=Oe===-1?0:Ae.length-Oe-1;return $e<le?($e?Ae:Ae+".")+String(Re).slice(1,le-$e+1):Ae}function ge(ce){const le=Math.abs(ce);let Ae=-Math.floor(Math.log(le)/Math.LN10)+1;const Oe=Math.pow(10,-Ae);return le/Oe>2.25&&++Ae,ce%1===0&&(Ae=0),Math.max(0,Ae)}function q(ce,le,Re){return{text:re(ce,le),suffix:me(Re,Math.abs(ce)>1)}}function me(ce,le){if(!le)return ce;switch(ce){case" min":case" hour":case" day":case" week":case" year":return`${ce}s`;default:return ce}}function oe(ce,le){return(Re,Ae)=>{if(Re===null)return{text:""};const Oe=re(Re,Ae);return ce?le?{text:Oe,prefix:ce}:{text:Oe,suffix:" "+ce}:{text:Oe}}}function fe(ce){return ce&&ce.startsWith("bool")}function ve(ce,le){return Re=>({text:Re?ce:le})}const pe=(ce,le)=>Math.log10(le)/Math.log10(ce);function Me(ce,le,Re=0){return(Ae,Oe)=>{if(Ae==null)return{text:""};if(Ae===Number.NEGATIVE_INFINITY||Ae===Number.POSITIVE_INFINITY||isNaN(Ae))return{text:Ae.toLocaleString()};const $e=Ae===0?0:Math.floor(pe(ce,Math.abs(Ae))),Ye=le[(0,n.clamp)(Re+$e,0,le.length-1)];return{text:re(Ae/ce**(0,n.clamp)($e,-Re,le.length-Re-1),Oe),suffix:Ye}}}function Pe(ce,le){return ce==null?{text:""}:{text:ce.toLocaleString(void 0,{maximumFractionDigits:le??void 0})}}function Ee(ce){const Re=Me(1e3,["","K","M","B","T"]);return(Ae,Oe,$e)=>{if(Ae===null)return{text:""};const Ye=Re(Ae,Oe,$e);return Ye.suffix+=" "+ce,Ye}}function he(ce){return{text:`${ce}`}}function Le(){X=Z();const ce=Z(!1);for(const le of X)for(const Re of le.formats)Y[Re.id]=Re.fn;for(const le of ce)for(const Re of le.formats)ne[Re.id]=Re.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(le=>{const Re=Y[le.to];Re&&(Y[le.from]=Re);const Ae=ne[le.to];Ae&&(ne[le.from]=Ae)}),se=!0}function ke(ce,le=!0){if(!ce)return oe("");se||Le();const Re=le?Y[ce]:ne[ce];if(!Re&&ce){let Ae=ce.indexOf(":");if(Ae>0){const Oe=ce.substring(0,Ae),$e=ce.substring(Ae+1);if(Oe==="prefix")return oe($e,!0);if(Oe==="suffix")return oe($e,!1);if(Oe==="time")return S($e);if(Oe==="si"){const Ye=(0,W.dT)($e.charAt(0)),Ne=Ye===0?$e:$e.substring(1);return(0,W.i7)(Ne,Ye)}if(Oe==="count")return Ee($e);if(Oe==="currency")return(0,W.Aq)($e);if(Oe==="bool"){if(Ae=$e.indexOf("/"),Ae>=0){const Ye=$e.substring(0,Ae),Ne=$e.substring(Ae+1);return ve(Ye,Ne)}return ve($e,"-")}}return oe(ce)}return Re}function ot(ce=!0){return se||Le(),ce?ne:Y}function it(){return se||Le(),X.map(ce=>({text:ce.name,submenu:ce.formats.map(le=>({text:le.name,value:le.id}))}))}},58707:(Q,A,e)=>{"use strict";e.d(A,{d:()=>i});var n=e(30684),a=e(49114);class i extends a.G{constructor(o){return super(),this.buffer=o.buffer||[],this.capacity=this.buffer.length,this.tail=o.append!=="head",this.index=0,this.add=this.getAddFunction(),o.capacity&&this.setCapacity(o.capacity),(0,n.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?o=>{this.buffer.push(o),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:o=>{this.buffer.unshift(o),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?o=>{this.buffer[this.index]=o,this.index=(this.index+1)%this.buffer.length}:o=>{let g=this.index-1;g<0&&(g=this.buffer.length-1),this.buffer[g]=o,this.index=g}}setCapacity(o){if(this.capacity===o)return;const g=this.toArray();if(o>this.length)this.buffer=g;else if(o<this.capacity){const u=this.length-o;this.tail?this.buffer=g.slice(u,g.length):this.buffer=g.slice(0,g.length-u)}this.capacity=o,this.index=0,this.add=this.getAddFunction()}setAppendMode(o){const g=o!=="head";g!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=g,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(o){return this.buffer[(o+this.index)%this.buffer.length]}set(o,g){this.buffer[(o+this.index)%this.buffer.length]=g}get length(){return this.buffer.length}}},49114:(Q,A,e)=>{"use strict";e.d(A,{G:()=>i,s:()=>o});var n=e(41148),a;class i{constructor(){this[a]={}}*iterator(){for(let u=0;u<this.length;u++)yield this.get(u)}set(u,c){throw"unsupported operation"}add(u){throw"unsupported operation"}push(...u){for(const c of u)this.add(c);return this.length}[Symbol.iterator](){return this.iterator()}forEach(u){return o(this).forEach(u)}map(u){return o(this).map(u)}filter(u){return o(this).filter(u)}at(u){return this.get(u)}toArray(){return(0,n.n)(this)}join(u){return this.toArray().join(u)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...u){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(u){throw new Error("Method not implemented.")}splice(u,c,...l){throw new Error("Method not implemented.")}unshift(...u){throw new Error("Method not implemented.")}fill(u,c,l){throw new Error("Method not implemented.")}copyWithin(u,c,l){throw new Error("Method not implemented.")}slice(u,c){return this.toArray().slice(u,c)}indexOf(u,c){return this.toArray().indexOf(u,c)}lastIndexOf(u,c){return this.toArray().lastIndexOf(u,c)}every(u,c){return this.toArray().every(u,c)}some(u,c){return this.toArray().some(u,c)}reduce(u,c){throw new Error("Method not implemented.")}reduceRight(u,c){throw new Error("Method not implemented.")}find(u,c){return this.toArray().find(u,c)}findIndex(u,c){return this.toArray().findIndex(u,c)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(u,c){return this.toArray().includes(u,c)}flatMap(u,c){return this.toArray().flatMap(u,c)}flat(u){throw new Error("Method not implemented.")}}a=Symbol.unscopables;const r=[];function o(g){return{*[Symbol.iterator](){for(let u=0;u<g.length;u++)yield g.get(u)},forEach(u){for(let c=0;c<g.length;c++)u(g.get(c),c,r)},map(u){const c=[];for(let l=0;l<g.length;l++)c.push(u(g.get(l),l,r));return c},filter(u){const c=[];let l=0;for(const d of this)u(d,l++,r)&&c.push(d);return c}}}},71805:(Q,A,e)=>{"use strict";e.d(A,{o:()=>r});var n=e(30684),a=e(49114),i=e(41148);class r extends a.G{constructor(g,u){return super(),this.source=g,this.order=u,(0,n.U)(this)}get length(){return this.source.length}get(g){return this.source.get(this.order[g])}toArray(){return(0,i.n)(this)}toJSON(){return(0,i.n)(this)}getOrderArray(){return this.order}}},39133:(Q,A,e)=>{"use strict";e.d(A,{l$:()=>r,Gt:()=>u,sq:()=>h,rM:()=>d,dV:()=>c.d,uI:()=>l,$Y:()=>v,rm:()=>p,oH:()=>f.o,sD:()=>a.s});var n=e(30684),a=e(49114),i=e(41148);class r extends a.G{constructor(y=0){return super(),this.length=0,this.source=[],this.length=y,(0,n.U)(this)}setLength(y){if(y>this.length)this.length=y;else if(y<this.length){const D=[];for(const C of this.source)if(D.push(C),C.end>y){C.end=y;break}this.source=D,this.length=y}}append(y){const D={start:this.length,end:this.length+y.length,values:y};return this.length=D.end,this.source.push(D),D}get(y){for(let D=0;D<this.source.length;D++){const C=this.source[D];if(y>=C.start&&y<C.end)return C.values[y-C.start]}}toArray(){return(0,i.n)(this)}toJSON(){return(0,i.n)(this)}}const o="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let g=!1;class u extends Array{get buffer(){return this}set buffer(y){this.length=0;const D=y?.length;if(D){let C=65e3,P=Math.ceil(D/C);for(let b=0;b<P;b++)this.push.apply(this,y.slice(b*C,(b+1)*C))}}constructor(y){super(),this.buffer=y??[],g||(console.warn(o),g=!0)}toJSON(){return[...this]}}var c=e(58707);class l extends Array{constructor(y,D){return super(),new Array(D).fill(y)}}class d extends Array{constructor(y,D,C){super();const P=new Array(y.length);for(let b=0;b<P.length;b++)P[b]=C(y[b],D[b]);return P}}var f=e(71805),m=e(86850);class v extends Array{constructor(y,D){return super(),y.map(C=>(0,m.zc)(D(C)))}}var E=e(85666);class p extends Array{constructor(y){super();const D=new Array(y);for(let C=0;C<y;C++)D[C]=C;return D}static newField(y){return{name:"",values:new p(y),type:E.fS.number,config:{min:0,max:y-1}}}}class h extends Array{constructor(y){return super(),y.map(D=>+D)}}},41148:(Q,A,e)=>{"use strict";e.d(A,{n:()=>n});function n(a){const i=Array(a.length);for(let r=0;r<a.length;r++)i[r]=a.get(r);return i}},44300:(Q,A,e)=>{"use strict";e.d(A,{Sg:()=>v,d6:()=>m,cN:()=>f});var n=e(85666),a=e(58492),i=e(28073),r=e(44138),o=e(69781);function g(p,h){const s=u(p);return c(s,h,"parents")}function u(p){return p.map(h=>{if(!h.parents?.length)return h;const s={...h,children:[]},y=[{child:s,parent:h.parents[0]}];for(;y.length;){const D=y.shift(),C={...D.parent,children:D.child?[D.child]:[],parents:[]};D.child&&(C.value=D.child.value,D.child.parents=[C]),D.parent.parents?.length&&y.push({child:C,parent:D.parent.parents[0]})}return s})}function c(p,h,s="children"){const y=s==="parents"?"children":"parents",D=[],C=[{previous:void 0,items:p,level:0}];for(;C.length;){const P=C.shift(),b=P.items.flatMap(I=>I.itemIndexes),T={value:P.items.reduce((I,M)=>I+M.value,0),itemIndexes:b,children:[],parents:[],start:0,level:P.level};if(D[P.level]=D[P.level]||[],D[P.level].push(T),P.previous){T[y]=[P.previous];const I=P.previous[s]?.reduce((M,x)=>M+x.value,0)||0;T.start=P.previous.start+I,P.previous[s].push(T)}const O=P.items.flatMap(I=>I[s]||[]),R=(0,o.groupBy)(O,I=>h.getLabel(I.itemIndexes[0]));for(const I of Object.values(R))C.push({previous:T,items:I,level:P.level+1})}return s==="parents"&&(D.reverse(),D.forEach((P,b)=>{P.forEach(T=>{T.level=b})})),D}function l(p,h){const s=[];let y=0,D;const C={};for(let b=0;b<p.data.length;b++){const T=p.getLevel(b),O=b>0?p.getLevel(b-1):void 0;if(s[T]=s[T]||[],O&&O>=T){const I=s[T][s[T].length-1];y=I.start+p.getValue(I.itemIndexes[0])+p.getValueRight(I.itemIndexes[0]),D=I.parents[0]}const R={itemIndexes:[b],value:p.getValue(b)+p.getValueRight(b),valueRight:p.isDiffFlamegraph()?p.getValueRight(b):void 0,start:y,parents:D&&[D],children:[],level:T};C[p.getLabel(b)]?C[p.getLabel(b)].push(R):C[p.getLabel(b)]=[R],D&&D.children.push(R),D=R,s[T].push(R)}const P=new d(h?.collapsingThreshold);return h?.collapsing&&P.addTree(s[0][0]),[s,C,P.getMap()]}class d{constructor(h){this.map=new Map,this.threshold=.99,h!==void 0&&(this.threshold=h)}addTree(h){const s=[h];for(;s.length;){const y=s.shift();y.parents?.length&&this.addItem(y,y.parents[0]),y.children.length&&s.unshift(...y.children)}}addItem(h,s){if(s&&h.value>s.value*this.threshold&&s.children.length===1)if(this.map.has(s)){const y=this.map.get(s);this.map.set(h,y),y.items.push(h)}else{const y={items:[s,h],collapsed:!0};this.map.set(s,y),this.map.set(h,y)}}getMap(){return new Map(this.map)}}function f(p){return p.missingFields.length?`Data is missing fields: ${p.missingFields.join(", ")}`:p.wrongTypeFields.length?`Data has fields of wrong type: ${p.wrongTypeFields.map(h=>`${h.name} has type ${h.type} but should be ${h.expectedTypes.join(" or ")}`).join(", ")}`:""}function m(p){const h=[["label",[n.fS.string,n.fS.enum]],["level",[n.fS.number]],["value",[n.fS.number]],["self",[n.fS.number]]],s=[],y=[];for(const D of h){const[C,P]=D,b=p.fields.find(T=>T.name===C);if(!b){s.push(C);continue}P.includes(b.type)||y.push({name:C,expectedTypes:P,type:b.type})}if(s.length>0||y.length>0)return{wrongTypeFields:y,missingFields:s}}class v{constructor(h,s,y=(0,a.j)()){this.data=h,this.options=s;const D=m(h);if(D)throw new Error(f(D));if(this.labelField=h.fields.find(P=>P.name==="label"),this.levelField=h.fields.find(P=>P.name==="level"),this.valueField=h.fields.find(P=>P.name==="value"),this.selfField=h.fields.find(P=>P.name==="self"),this.valueRightField=h.fields.find(P=>P.name==="valueRight"),this.selfRightField=h.fields.find(P=>P.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const C=this.labelField?.config?.type?.enum;C?(this.labelDisplayProcessor=(0,i.U)({field:this.labelField,theme:y}),this.uniqueLabels=C.text||[]):(this.labelDisplayProcessor=P=>({text:P+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,i.U)({field:this.valueField,theme:y})}isDiffFlamegraph(){return this.valueRightField&&this.selfRightField}getLabel(h){return this.labelDisplayProcessor(this.labelField.values[h]).text}getLevel(h){return this.levelField.values[h]}getValue(h){return E(this.valueField,h)}getValueRight(h){return E(this.valueRightField,h)}getSelf(h){return E(this.selfField,h)}getSelfRight(h){return E(this.selfRightField,h)}getSelfDisplay(h){return this.valueDisplayProcessor(this.getSelf(h))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case r._r.Bytes:return"RAM";case r._r.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(h){const s=this.getNodesWithLabel(h);if(!s?.length)return[[],[]];const y=g(s,this),D=c(s,this);return[y,D]}getNodesWithLabel(h){return this.initLevels(),this.uniqueLabelsMap[h]}getCollapsedMap(){return this.initLevels(),this.collapsedMap}initLevels(){if(!this.levels){const[h,s,y]=l(this,this.options);this.levels=h,this.uniqueLabelsMap=s,this.collapsedMap=y}}}function E(p,h){return p?(typeof h=="number"?[h]:h).reduce((y,D)=>y+p.values[D],0):0}},65778:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>_n});var n=e(76932),a=e(20670),i=e(31733),r=e(92666),o=e(3854),g=e(49311);const u=22*window.devicePixelRatio,c=10*window.devicePixelRatio,l=.5*window.devicePixelRatio,d=20*window.devicePixelRatio,f=.5*window.devicePixelRatio,m=4*window.devicePixelRatio,v=3*window.devicePixelRatio,E=3*window.devicePixelRatio,p=4*window.devicePixelRatio,h=2*window.devicePixelRatio,s=800,y=120;var D=e(46213),C=e(85115),P=e(45502);const T=({itemData:Ut,onMenuItemClick:Xt,onItemFocus:en,onSandwich:gn,collapseConfig:ln,onExpandGroup:xn,onCollapseGroup:Dn,onExpandAllGroups:Ln,onCollapseAllGroups:hn,collapsing:Gn,allGroupsExpanded:Vn,allGroupsCollapsed:$n})=>{function Wn(){return i.createElement(i.Fragment,null,i.createElement(D.s,{label:"Focus block",icon:"eye",onClick:()=>{en(),Xt()}}),i.createElement(D.s,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(Ut.label).then(()=>{Xt()})}}),i.createElement(D.s,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{gn(),Xt()}}),Gn&&i.createElement(C.k,{label:"Grouping"},ln?ln.collapsed?i.createElement(D.s,{label:"Expand group",icon:"angle-double-down",onClick:()=>{xn(),Xt()}}):i.createElement(D.s,{label:"Collapse group",icon:"angle-double-up",onClick:()=>{Dn(),Xt()}}):null,!Vn&&i.createElement(D.s,{label:"Expand all groups",icon:"angle-double-down",onClick:()=>{Ln(),Xt()}}),!$n&&i.createElement(D.s,{label:"Collapse all groups",icon:"angle-double-up",onClick:()=>{hn(),Xt()}})))}return i.createElement("div",{"data-testid":"contextMenu"},i.createElement(P.x,{renderMenuItems:Wn,x:Ut.posX+10,y:Ut.posY,focusOnOpen:!1}))};var O=e(86850),R=e(76067),I=e(77543),M=e(25108),x=e(40429);const L=({data:Ut,item:Xt,totalTicks:en,position:gn,collapseConfig:ln})=>{const xn=(0,R.wW)(w);if(!(Xt&&gn))return null;let Dn;if(Ut.isDiffFlamegraph()){const Ln=U(Ut,Xt,en);Dn=i.createElement(I.e,{className:xn.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:Ln,getRowId:hn=>hn.rowId})}else{const Ln=S(Ut,Xt,en);Dn=i.createElement("p",{className:xn.lastParagraph},Ln.unitTitle,i.createElement("br",null),"Total: ",i.createElement("b",null,Ln.unitValue)," (",Ln.percentValue,"%)",i.createElement("br",null),"Self: ",i.createElement("b",null,Ln.unitSelf)," (",Ln.percentSelf,"%)",i.createElement("br",null),"Samples: ",i.createElement("b",null,Ln.samples))}return i.createElement(M.h_,null,i.createElement(x.S,{className:xn.tooltipContainer,position:gn,offset:{x:15,y:0}},i.createElement("div",{className:xn.tooltipContent},i.createElement("p",{className:xn.tooltipName},Ut.getLabel(Xt.itemIndexes[0]),ln&&ln.collapsed?i.createElement("span",null,i.createElement("br",null),"and ",ln.items.length," similar items"):""),Dn)))},S=(Ut,Xt,en)=>{const gn=Ut.valueDisplayProcessor(Xt.value),ln=Ut.getSelfDisplay(Xt.itemIndexes),xn=Math.round(1e4*(gn.numeric/en))/100,Dn=Math.round(1e4*(ln.numeric/en))/100;let Ln=gn.text+gn.suffix,hn=ln.text+ln.suffix;const Gn=Ut.getUnitTitle();return Gn==="Count"&&(gn.suffix||(Ln=gn.text),ln.suffix||(hn=ln.text)),{percentValue:xn,percentSelf:Dn,unitTitle:Gn,unitValue:Ln,unitSelf:hn,samples:gn.numeric.toLocaleString()}},U=(Ut,Xt,en)=>{const ln=Ut.getLevels()[0][0].valueRight,xn=en-ln,Dn=Xt.value-Xt.valueRight,Ln=Math.round(1e4*Dn/xn)/100,hn=Math.round(1e4*Xt.valueRight/ln)/100,Gn=(hn-Ln)/Ln*100,Vn=N(Ut,Ut.valueDisplayProcessor(Dn)),$n=N(Ut,Ut.valueDisplayProcessor(Xt.valueRight)),Wn=(0,O.Cf)("short");return[{rowId:"1",label:"% of total",baseline:Ln+"%",comparison:hn+"%",diff:Wn(Gn).text+"%"},{rowId:"2",label:"Value",baseline:Vn,comparison:$n,diff:N(Ut,Ut.valueDisplayProcessor(Xt.valueRight-Dn))},{rowId:"3",label:"Samples",baseline:Wn(Dn).text,comparison:Wn(Xt.valueRight).text,diff:Wn(Xt.valueRight-Dn).text}]};function N(Ut,Xt){let en=Xt.text+Xt.suffix;return Ut.getUnitTitle()==="Count"&&(Xt.suffix||(en=Xt.text)),en}const w=Ut=>({tooltipContainer:(0,n.css)`
    title: tooltipContainer;
    overflow: hidden;
  `,tooltipContent:(0,n.css)`
    title: tooltipContent;
    font-size: ${Ut.typography.bodySmall.fontSize};
    width: 100%;
  `,tooltipName:(0,n.css)`
    title: tooltipName;
    margin-top: 0;
    word-break: break-all;
  `,lastParagraph:(0,n.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,n.css)`
    title: name;
    margin-bottom: 10px;
  `,tooltipTable:(0,n.css)`
    title: tooltipTable;
    max-width: 400px;
  `}),G=L;var _=e(37479),K=e(44138),k=e(6509);function z(Ut,Xt=0){let en,gn,ln,xn,Dn,Ln,hn,Gn;for(en=Ut.length&3,gn=Ut.length-en,ln=Xt,Dn=3432918353,Ln=461845907,Gn=0;Gn<gn;)hn=Ut.charCodeAt(Gn)&255|(Ut.charCodeAt(++Gn)&255)<<8|(Ut.charCodeAt(++Gn)&255)<<16|(Ut.charCodeAt(++Gn)&255)<<24,++Gn,hn=(hn&65535)*Dn+(((hn>>>16)*Dn&65535)<<16)&4294967295,hn=hn<<15|hn>>>17,hn=(hn&65535)*Ln+(((hn>>>16)*Ln&65535)<<16)&4294967295,ln^=hn,ln=ln<<13|ln>>>19,xn=(ln&65535)*5+(((ln>>>16)*5&65535)<<16)&4294967295,ln=(xn&65535)+27492+(((xn>>>16)+58964&65535)<<16);switch(hn=0,en){case 3:hn^=(Ut.charCodeAt(Gn+2)&255)<<16;case 2:hn^=(Ut.charCodeAt(Gn+1)&255)<<8;case 1:hn^=Ut.charCodeAt(Gn)&255;default:hn=(hn&65535)*Dn+(((hn>>>16)*Dn&65535)<<16)&4294967295,hn=hn<<15|hn>>>17,hn=(hn&65535)*Ln+(((hn>>>16)*Ln&65535)<<16)&4294967295,ln^=hn}return ln^=Ut.length,ln^=ln>>>16,ln=(ln&65535)*2246822507+(((ln>>>16)*2246822507&65535)<<16)&4294967295,ln^=ln>>>13,ln=(ln&65535)*3266489909+(((ln>>>16)*3266489909&65535)<<16)&4294967295,ln^=ln>>>16,ln>>>0}const W=[(0,_.Z)({h:24,s:69,l:60}),(0,_.Z)({h:34,s:65,l:65}),(0,_.Z)({h:194,s:52,l:61}),(0,_.Z)({h:163,s:45,l:55}),(0,_.Z)({h:211,s:48,l:60}),(0,_.Z)({h:246,s:40,l:65}),(0,_.Z)({h:305,s:63,l:79}),(0,_.Z)({h:47,s:100,l:73}),(0,_.Z)({r:183,g:219,b:171}),(0,_.Z)({r:244,g:213,b:152}),(0,_.Z)({r:78,g:146,b:249}),(0,_.Z)({r:249,g:186,b:143}),(0,_.Z)({r:242,g:145,b:145}),(0,_.Z)({r:130,g:181,b:216}),(0,_.Z)({r:229,g:168,b:226}),(0,_.Z)({r:174,g:162,b:224}),(0,_.Z)({r:154,g:196,b:138}),(0,_.Z)({r:242,g:201,b:109}),(0,_.Z)({r:101,g:197,b:219}),(0,_.Z)({r:249,g:147,b:78}),(0,_.Z)({r:234,g:100,b:96}),(0,_.Z)({r:81,g:149,b:206}),(0,_.Z)({r:214,g:131,b:206}),(0,_.Z)({r:128,g:110,b:183})],Z=ne(1,100,0,1),H=ne(100,100,0,1),X=`linear-gradient(90deg, ${Z} 0%, ${H} 100%)`,Y=`linear-gradient(90deg, ${W[0]} 0%, ${W[2]} 30%, ${W[6]} 50%, ${W[7]} 70%, ${W[8]} 100%)`;function ne(Ut,Xt,en,gn){const ln=Math.min(1,Ut/Xt/(gn-en)),xn=50-50*ln,Dn=65+7*ln;return(0,_.Z)({h:xn,s:100,l:Dn})}function se(Ut,Xt){const en=ve(Ut),ln=z(en||"",0)%W.length;let xn=W[ln].clone();return Xt.isLight&&(xn=xn.brighten(15)),xn}const re=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],ge=`linear-gradient(90deg, ${re[0]} 0%, ${re[1]} 50%, ${re[2]} 100%)`,q=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],me=`linear-gradient(90deg, ${q[0]} 0%, ${q[1]} 50%, ${q[2]} 100%)`;function oe(Ut,Xt,en,gn,ln){const xn=ln===K.cB.Default?re:q,Dn=(0,k.scaleLinear)().domain([-100,0,100]).range(xn),Ln=Ut-Xt,hn=en-gn;if(gn===0||hn===0){const Pn=Dn(0);return(0,_.Z)(Pn)}const Gn=Math.round(1e4*Ln/hn)/100,$n=(Math.round(1e4*Xt/gn)/100-Gn)/Gn*100,Wn=Dn($n);return(0,_.Z)(Wn)}const fe=[["phpspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function ve(Ut){for(const[Xt,en]of fe){const gn=Ut.match(en);if(gn)return gn.groups?.packageName||""}}function pe(Ut){const{canvasRef:Xt,data:en,root:gn,depth:ln,direction:xn,wrapperWidth:Dn,rangeMin:Ln,rangeMax:hn,matchedLabels:Gn,textAlign:Vn,totalViewTicks:$n,totalColorTicks:Wn,totalTicksRight:Pn,colorScheme:sa,focusedItemData:va,collapsedMap:An}=Ut,Xn=Le(Xt,Dn,ln),ra=(0,R.l4)(),ga=(0,i.useMemo)(()=>{const Ja=(0,_.Z)(ra.colors.background.secondary);return ra.isLight?Ja.darken(10).toHexString():Ja.lighten(10).toHexString()},[ra]),ys=he(Wn,Pn,sa,ra,ga,Ln,hn,Gn,va?va.item.level:0),ds=Me(Xn,en,ys,Vn,An);(0,i.useEffect)(()=>{if(!Xn)return;Xn.clearRect(0,0,Xn.canvas.width,Xn.canvas.height);const Ja=new Path2D;Ee(gn,xn,en,$n,Ln,hn,Dn,An,(_a,ls,Es,Os,ts,Xa,bs)=>{bs?Ja.rect(ls,Es,Os,ts):ds(_a,ls,Es,Os,ts,Xa)}),Xn.fillStyle=ga,Xn.fill(Ja)},[Xn,en,gn,Dn,Ln,hn,$n,xn,ds,An,ga])}function Me(Ut,Xt,en,gn,ln){return(0,i.useMemo)(()=>Ut?(Dn,Ln,hn,Gn,Vn,$n)=>{Ut.beginPath(),Ut.rect(Ln+f,hn,Gn,Vn),Ut.fillStyle=en(Dn,$n,!1),Ut.stroke(),Ut.fill();const Wn=ln.get(Dn);let Pn=$n;Wn&&Wn.collapsed&&(Pn=`(${Wn.items.length}) `+$n),Gn>=d&&(Wn?(ke(Ut,Xt,Pn,Dn,Gn,gn==="left"?Ln+p+h:Ln,hn,gn),Pe(Ut,Ln,hn,Vn,Dn,Wn)):ke(Ut,Xt,Pn,Dn,Gn,Ln,hn,gn))}:()=>{},[Ut,en,gn,Xt,ln])}function Pe(Ut,Xt,en,gn,ln,xn){const Dn=Xt+p;Ut.beginPath(),Ut.rect(Xt,en,Dn-Xt+v+E,gn),Ut.fill(),Ut.beginPath(),xn.collapsed?Ut.rect(Dn,en+gn/4,v,gn/2):xn.items[0]===ln?Ut.rect(Dn,en+gn/2,v,gn/2):xn.items[xn.items.length-1]===ln?Ut.rect(Dn,en,v,gn/2):Ut.rect(Dn,en,v,gn),Ut.fillStyle="#666",Ut.fill()}function Ee(Ut,Xt,en,gn,ln,xn,Dn,Ln,hn){const Gn=[];Gn.push({item:Ut,levelOffset:0});const Vn=Dn*window.devicePixelRatio/gn/(xn-ln);let $n;for(;Gn.length>0;){const{item:Wn,levelOffset:Pn}=Gn.shift();let sa=Wn.value;const va=sa*Vn<=c,An=sa*Vn-(va?0:f*2),Xn=u;if(An<l)continue;let ra=0,ga=!1;const ys=Ln.get(Wn),ds=ys&&ys.collapsed;if(ds&&$n===ys.items[0]?(ra=Xt==="children"?-1:1,ga=!0):$n=void 0,!ga){const _a=ot(Wn.start,gn,ln,Vn),ls=(Wn.level+Pn)*u;let Es=en.getLabel(Wn.itemIndexes[0]);ds&&($n=Wn),hn(Wn,_a,ls,An,Xn,Es,va)}const Ja=Xt==="children"?Wn.children:Wn.parents;Ja&&Gn.unshift(...Ja.map(_a=>({item:_a,levelOffset:Pn+ra})))}}function he(Ut,Xt,en,gn,ln,xn,Dn,Ln,hn){return(0,i.useCallback)(function(Vn,$n,Wn){if(Wn&&!Ln)return ln;const Pn=Vn.valueRight!==void 0&&(en===K.cB.Default||en===K.cB.DiffColorBlind)?oe(Vn.value,Vn.valueRight,Ut,Xt,en):en===K.eL.ValueBased?ne(Vn.value,Ut,xn,Dn):se($n,gn);return Ln?Ln.has($n)?Pn.toHslString():ln:Vn.level>hn-1?Pn.toHslString():Pn.lighten(15).toHslString()},[Ut,Xt,en,gn,xn,Dn,Ln,hn,ln])}function Le(Ut,Xt,en){const[gn,ln]=(0,i.useState)();return(0,i.useEffect)(()=>{if(!(en&&Ut.current))return;const xn=Ut.current.getContext("2d"),Dn=u*en;Ut.current.width=Math.round(Xt*window.devicePixelRatio),Ut.current.height=Math.round(Dn),Ut.current.style.width=`${Xt}px`,Ut.current.style.height=`${Dn/window.devicePixelRatio}px`,xn.textBaseline="middle",xn.font=12*window.devicePixelRatio+"px monospace",xn.strokeStyle="white",ln(xn)},[Ut,ln,Xt,en]),gn}function ke(Ut,Xt,en,gn,ln,xn,Dn,Ln){Ut.save(),Ut.clip(),Ut.fillStyle="#222";const hn=Xt.valueDisplayProcessor(gn.value),Gn=hn.suffix?hn.text+hn.suffix:hn.text,Vn=Ut.measureText(en),$n=ln-m;let Wn=`${en} (${Gn})`,Pn=Math.max(xn,0)+m;Vn.width>$n&&(Ut.textAlign=Ln,Ln==="right"&&(Wn=en,Pn=xn+ln-m)),Ut.fillText(Wn,Pn,Dn+u/2+2),Ut.restore()}function ot(Ut,Xt,en,gn){return(Ut-Xt*en)*gn}const it=({data:Ut,rangeMin:Xt,rangeMax:en,matchedLabels:gn,setRangeMin:ln,setRangeMax:xn,onItemFocused:Dn,focusedItemData:Ln,textAlign:hn,onSandwich:Gn,colorScheme:Vn,totalProfileTicks:$n,totalProfileTicksRight:Wn,totalViewTicks:Pn,root:sa,direction:va,depth:An,showFlameGraphOnly:Xn,collapsedMap:ra,setCollapsedMap:ga,collapsing:ys})=>{const ds=Re(),[Ja,{width:_a}]=(0,r.Z)(),ls=(0,i.useRef)(null),[Es,Os]=(0,i.useState)(),[ts,Xa]=(0,i.useState)();pe({canvasRef:ls,colorScheme:Vn,data:Ut,focusedItemData:Ln,root:sa,direction:va,depth:An,rangeMax:en,rangeMin:Xt,matchedLabels:gn,textAlign:hn,totalViewTicks:Pn,totalColorTicks:Ut.isDiffFlamegraph()?$n:Pn,totalTicksRight:Wn,wrapperWidth:_a,collapsedMap:ra});const bs=(0,i.useCallback)(qa=>{Os(void 0);const za=ls.current.clientWidth/Pn/(en-Xt),Is=Ae({x:qa.nativeEvent.offsetX,y:qa.nativeEvent.offsetY},sa,va,An,za,Pn,Xt,ra);Xa(Is?{posY:qa.clientY,posX:qa.clientX,item:Is,label:Ut.getLabel(Is.itemIndexes[0])}:void 0)},[Ut,Xt,en,Pn,sa,va,An,ra]),[Nr,cs]=(0,i.useState)(),ks=(0,i.useCallback)(qa=>{if(ts===void 0){Os(void 0),cs(void 0);const za=ls.current.clientWidth/Pn/(en-Xt),Is=Ae({x:qa.nativeEvent.offsetX,y:qa.nativeEvent.offsetY},sa,va,An,za,Pn,Xt,ra);Is&&(cs({x:qa.clientX,y:qa.clientY}),Os(Is))}},[Xt,en,Pn,ts,cs,sa,va,An,ra]),Hs=(0,i.useCallback)(()=>{Os(void 0)},[]);return(0,i.useEffect)(()=>{const qa=za=>{za.target instanceof HTMLElement&&za.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&Xa(void 0)};return window.addEventListener("click",qa),()=>window.removeEventListener("click",qa)},[Xa]),i.createElement("div",{className:ds.graph},i.createElement("div",{className:ds.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:Ja},i.createElement("canvas",{ref:ls,"data-testid":"flameGraph",onClick:bs,onMouseMove:ks,onMouseLeave:Hs})),i.createElement(G,{position:Nr,item:Es,data:Ut,totalTicks:Pn,collapseConfig:Es?ra.get(Es):void 0}),!Xn&&ts&&i.createElement(T,{itemData:ts,collapsing:ys,collapseConfig:ra.get(ts.item),onMenuItemClick:()=>{Xa(void 0)},onItemFocus:()=>{ln(ts.item.start/Pn),xn((ts.item.start+ts.item.value)/Pn),Dn(ts)},onSandwich:()=>{Gn(Ut.getLabel(ts.item.itemIndexes[0]))},onExpandGroup:()=>{ga(ce(ra,ts.item,!1))},onCollapseGroup:()=>{ga(ce(ra,ts.item,!0))},onExpandAllGroups:()=>{ga(le(ra,!1))},onCollapseAllGroups:()=>{ga(le(ra,!0))},allGroupsCollapsed:Array.from(ra.values()).every(qa=>qa.collapsed),allGroupsExpanded:Array.from(ra.values()).every(qa=>!qa.collapsed)}))};function ce(Ut,Xt,en){const gn=new Map(Ut),ln=Ut.get(Xt),xn={...ln,collapsed:en};for(const Dn of ln.items)gn.set(Dn,xn);return gn}function le(Ut,Xt){const en=new Map(Ut);for(const gn of Ut.keys()){const xn={...Ut.get(gn),collapsed:Xt};en.set(gn,xn)}return en}const Re=()=>({graph:(0,n.css)({label:"graph",overflow:"auto",flexGrow:1,flexBasis:"50%"}),canvasContainer:(0,n.css)({label:"canvasContainer",display:"flex"}),canvasWrapper:(0,n.css)({label:"canvasWrapper",cursor:"pointer",flex:1,overflow:"hidden"}),sandwichMarker:(0,n.css)({label:"sandwichMarker",writingMode:"vertical-lr",transform:"rotate(180deg)",overflow:"hidden",whiteSpace:"nowrap"}),sandwichMarkerIcon:(0,n.css)({label:"sandwichMarkerIcon",verticalAlign:"baseline"})}),Ae=(Ut,Xt,en,gn,ln,xn,Dn,Ln)=>{let hn=Xt,Gn=en==="children"?0:gn-1;const Vn=Math.floor(Ut.y/(u/window.devicePixelRatio));let $n;for(;hn;){const Wn=hn;if(hn=void 0,Gn===Vn){$n=Wn;break}const Pn=en==="children"?Wn.children:Wn.parents||[];for(const sa of Pn){const va=ot(sa.start,xn,Dn,ln),An=ot(sa.start+sa.value,xn,Dn,ln);if(va<=Ut.x&&Ut.x<An){hn=sa;const Xn=Ln.get(sa);(!Xn||!Xn.collapsed||Xn.items[0]===sa)&&(Gn=Gn+(en==="children"?1:-1));break}}}return $n},Oe=it;var $e=e(41354);const Ye=i.memo(({data:Ut,focusedItem:Xt,totalTicks:en,sandwichedLabel:gn,onFocusPillClick:ln,onSandwichPillClick:xn})=>{const Dn=(0,R.wW)(Ne),Ln=[],hn=(0,O.Cf)("short")(en),Gn=Ut.valueDisplayProcessor(en);let Vn=Gn.text+Gn.suffix;const $n=Ut.getUnitTitle();if($n==="Count"&&(Gn.suffix||(Vn=Gn.text)),Ln.push(i.createElement("div",{className:Dn.metadataPill,key:"default"},Vn," | ",hn.text,hn.suffix," samples (",$n,")")),gn&&Ln.push(i.createElement("span",{key:"sandwich"},i.createElement(g.J,{size:"sm",name:"angle-right"}),i.createElement("div",{className:Dn.metadataPill},i.createElement(g.J,{size:"sm",name:"gf-show-context"})," ",i.createElement("span",{className:Dn.metadataPillName},gn.substring(gn.lastIndexOf("/")+1)),i.createElement($e.h,{className:Dn.pillCloseButton,name:"times",size:"sm",onClick:xn,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),Xt){const Wn=Math.round(1e4*(Xt.item.value/en))/100;Ln.push(i.createElement("span",{key:"focus"},i.createElement(g.J,{size:"sm",name:"angle-right"}),i.createElement("div",{className:Dn.metadataPill},i.createElement(g.J,{size:"sm",name:"eye"})," ",Wn,"% of total",i.createElement($e.h,{className:Dn.pillCloseButton,name:"times",size:"sm",onClick:ln,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return i.createElement(i.Fragment,null,i.createElement("div",{className:Dn.metadata},Ln))});Ye.displayName="FlameGraphMetadata";const Ne=Ut=>({metadataPill:(0,n.css)`
    label: metadataPill;
    display: inline-flex;
    align-items: center;
    background: ${Ut.colors.background.secondary};
    border-radius: ${Ut.shape.borderRadius(8)};
    padding: ${Ut.spacing(.5,1)};
    font-size: ${Ut.typography.bodySmall.fontSize};
    font-weight: ${Ut.typography.fontWeightMedium};
    line-height: ${Ut.typography.bodySmall.lineHeight};
    color: ${Ut.colors.text.secondary};
  `,pillCloseButton:(0,n.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${Ut.spacing(0,.5)};
  `,metadata:(0,n.css)`
    margin: 8px 0;
    text-align: center;
  `,metadataPillName:(0,n.css)`
    label: metadataPillName;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: ${Ut.spacing(.5)};
  `}),je=Ye,ut=({data:Ut,rangeMin:Xt,rangeMax:en,matchedLabels:gn,setRangeMin:ln,setRangeMax:xn,onItemFocused:Dn,focusedItemData:Ln,textAlign:hn,onSandwich:Gn,sandwichItem:Vn,onFocusPillClick:$n,onSandwichPillClick:Wn,colorScheme:Pn,showFlameGraphOnly:sa,collapsing:va})=>{const An=Fe(),[Xn,ra]=(0,i.useState)(new Map),[ga,ys]=(0,i.useState)(),[ds,Ja]=(0,i.useState)(),[_a,ls]=(0,i.useState)(0),[Es,Os]=(0,i.useState)(),[ts,Xa]=(0,i.useState)(0);if((0,i.useEffect)(()=>{if(Ut){ra(Ut.getCollapsedMap());let cs=Ut.getLevels(),ks=cs.length?cs[0][0].value:0,Hs=cs.length?cs[0][0].valueRight:void 0,qa=ks,za;if(Vn){const[Is,vr]=Ut.getSandwichLevels(Vn);cs=vr,za=Is,qa=vr[0]?.[0]?.value??0}ys(cs),Ja(za),ls(ks),Os(Hs),Xa(qa)}},[Ut,Vn]),!ga)return null;const bs={data:Ut,rangeMin:Xt,rangeMax:en,matchedLabels:gn,setRangeMin:ln,setRangeMax:xn,onItemFocused:Dn,focusedItemData:Ln,textAlign:hn,onSandwich:Gn,colorScheme:Pn,totalProfileTicks:_a,totalProfileTicksRight:Es,totalViewTicks:ts,showFlameGraphOnly:sa,collapsedMap:Xn,setCollapsedMap:ra,collapsing:va},Nr=ds?i.createElement(i.Fragment,null,i.createElement("div",{className:An.sandwichCanvasWrapper},i.createElement("div",{className:An.sandwichMarker},"Callers",i.createElement(g.J,{className:An.sandwichMarkerIcon,name:"arrow-down"})),i.createElement(Oe,{...bs,root:ds[ds.length-1][0],depth:ds.length,direction:"parents",collapsing:!1})),i.createElement("div",{className:An.sandwichCanvasWrapper},i.createElement("div",{className:(0,n.cx)(An.sandwichMarker,An.sandwichMarkerCalees)},i.createElement(g.J,{className:An.sandwichMarkerIcon,name:"arrow-up"}),"Callees"),i.createElement(Oe,{...bs,root:ga[0][0],depth:ga.length,direction:"children",collapsing:!1}))):i.createElement(Oe,{...bs,root:ga[0][0],depth:ga.length,direction:"children"});return i.createElement("div",{className:An.graph},i.createElement(je,{data:Ut,focusedItem:Ln,sandwichedLabel:Vn,totalTicks:ts,onFocusPillClick:$n,onSandwichPillClick:Wn}),Nr)},Fe=()=>({graph:(0,n.css)`
    label: graph;
    overflow: auto;
    flex-grow: 1;
    flex-basis: 50%;
  `,sandwichCanvasWrapper:(0,n.css)`
    label: sandwichCanvasWrapper;
    display: flex;
    margin-bottom: ${u/window.devicePixelRatio}px;
  `,sandwichMarker:(0,n.css)`
    label: sandwichMarker;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerCalees:(0,n.css)`
    label: sandwichMarkerCalees;
    text-align: right;
  `,sandwichMarkerIcon:(0,n.css)`
    label: sandwichMarkerIcon;
    vertical-align: baseline;
  `}),Te=ut;var Ve=e(44300),tt=e(30098),ae=e(41258),J=e(51343),te=e(64516),de=e(96856),be=e(63424),De=e(67669);const Ue=({search:Ut,setSearch:Xt,selectedView:en,setSelectedView:gn,containerWidth:ln,onReset:xn,textAlign:Dn,onTextAlignChange:Ln,showResetButton:hn,colorScheme:Gn,onColorSchemeChange:Vn,stickyHeader:$n,extraHeaderElements:Wn,vertical:Pn,isDiffMode:sa})=>{const va=(0,R.wW)(qe,$n),[An,Xn]=_e(Ut,Xt),ra=An!==""?i.createElement(J.zx,{icon:"times",fill:"text",size:"sm",onClick:()=>{Xt(""),Xn("")}},"Clear"):null;return i.createElement("div",{className:va.header},i.createElement("div",{className:va.inputContainer},i.createElement(te.I,{value:An||"",onChange:ga=>{Xn(ga.currentTarget.value)},placeholder:"Search...",suffix:ra})),i.createElement("div",{className:va.rightContainer},hn&&i.createElement(J.zx,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{xn()},className:va.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),i.createElement(We,{value:Gn,onChange:Vn,isDiffMode:sa}),i.createElement(de.S,{size:"sm",disabled:en===K.So.TopTable,options:et,value:Dn,onChange:Ln,className:va.buttonSpacing}),i.createElement(de.S,{size:"sm",options:ze(ln,Pn),value:en,onChange:gn}),Wn&&i.createElement("div",{className:va.extraElements},Wn)))};function We(Ut){const Xt=(0,R.wW)(qe,!1);let en=i.createElement(be.v,null,i.createElement(be.v.Item,{label:"By package name",onClick:()=>Ut.onChange(K.eL.PackageBased)}),i.createElement(be.v.Item,{label:"By value",onClick:()=>Ut.onChange(K.eL.ValueBased)}));Ut.isDiffMode&&(en=i.createElement(be.v,null,i.createElement(be.v.Item,{label:"Default (green to red)",onClick:()=>Ut.onChange(K.cB.Default)}),i.createElement(be.v.Item,{label:"Color blind (blue to red)",onClick:()=>Ut.onChange(K.cB.DiffColorBlind)})));const gn={[K.eL.ValueBased]:Xt.colorDotByValue,[K.eL.PackageBased]:Xt.colorDotByPackage,[K.cB.DiffColorBlind]:Xt.colorDotDiffColorBlind,[K.cB.Default]:Xt.colorDotDiffDefault}[Ut.value]||Xt.colorDotByValue;return i.createElement(De.L,{overlay:en},i.createElement(J.zx,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:Xt.buttonSpacing,"aria-label":"Change color scheme"},i.createElement("span",{className:(0,n.cx)(Xt.colorDot,gn)})))}const et=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function ze(Ut,Xt){let en=[{value:K.So.TopTable,label:"Top Table",description:"Only show top table"},{value:K.So.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(Ut>=s||Xt)&&en.push({value:K.So.Both,label:"Both",description:"Show both the top table and flame graph"}),en}function _e(Ut,Xt){const[en,gn]=(0,i.useState)(Ut),ln=(0,ae.Z)(Ut);return(0,tt.Z)(()=>{Xt(en)},250,[en]),(0,i.useEffect)(()=>{ln!==Ut&&Ut!==en&&gn(Ut)},[Ut,ln,en]),[en,gn]}const qe=(Ut,Xt)=>({header:(0,n.css)`
    label: header;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
    top: 0;
    ${Xt?(0,n.css)`
          z-index: ${Ut.zIndex.navbarFixed};
          position: sticky;
          padding-bottom: ${Ut.spacing(1)};
          padding-top: ${Ut.spacing(1)};
          background: ${Ut.colors.background.primary};
        `:""};
  `,inputContainer:(0,n.css)`
    label: inputContainer;
    margin-right: 20px;
    flex-grow: 1;
    min-width: 150px;
    max-width: 350px;
  `,rightContainer:(0,n.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  `,buttonSpacing:(0,n.css)`
    label: buttonSpacing;
    margin-right: ${Ut.spacing(1)};
  `,resetButton:(0,n.css)`
    label: resetButton;
    display: flex;
    margin-right: ${Ut.spacing(2)};
  `,resetButtonIconWrapper:(0,n.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${Ut.colors.text.disabled};
  `,colorDot:(0,n.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,n.css)`
    label: colorDotByValue;
    background: ${X};
  `,colorDotByPackage:(0,n.css)`
    label: colorDotByPackage;
    background: ${Y};
  `,colorDotDiffDefault:(0,n.css)`
    label: colorDotDiffDefault;
    background: ${ge};
  `,colorDotDiffColorBlind:(0,n.css)`
    label: colorDotDiffColorBlind;
    background: ${me};
  `,extraElements:(0,n.css)`
    label: extraElements;
    margin-left: ${Ut.spacing(1)};
  `}),at=Ue;var lt=e(43741),ft=e(85666),yt=e(6803),wt=e(19596),zt=e(47687),$t=e(71199);const Ie=i.memo(({data:Ut,onSymbolClick:Xt,search:en,matchedLabels:gn,onSearch:ln,sandwichItem:xn,onSandwich:Dn,onTableSort:Ln})=>{const hn=(0,i.useMemo)(()=>{let Pn={};for(let sa=0;sa<Ut.data.length;sa++){const va=Ut.getValue(sa),An=Ut.getValueRight(sa),Xn=Ut.getSelf(sa),ra=Ut.getLabel(sa);(!gn||gn.has(ra))&&(Pn[ra]=Pn[ra]||{},Pn[ra].self=Pn[ra].self?Pn[ra].self+Xn:Xn,Pn[ra].total=Pn[ra].total?Pn[ra].total+va:va,Pn[ra].totalRight=Pn[ra].totalRight?Pn[ra].totalRight+An:An)}return Pn},[Ut,gn]),Gn=(0,R.wW)(kt),Vn=(0,R.l4)(),[$n,Wn]=(0,i.useState)([{displayName:"Self",desc:!0}]);return i.createElement("div",{className:Gn.topTableContainer,"data-testid":"topTable"},i.createElement(lt.Z,{style:{width:"100%"}},({width:Pn,height:sa})=>{if(Pn<3||sa<3)return null;const va=st(Ut,hn,Pn,Xt,ln,Dn,Vn,en,xn);return i.createElement(zt.i,{initialSortBy:$n,onSortByChange:An=>{An&&An.length&&Ln?.(An[0].displayName+"_"+(An[0].desc?"desc":"asc")),Wn(An)},data:va,width:Pn,height:sa})}))});Ie.displayName="FlameGraphTopTableContainer";function st(Ut,Xt,en,gn,ln,xn,Dn,Ln,hn){const Gn=nt(xn,ln,Ln,hn),Vn={type:ft.fS.string,name:"Symbol",values:[],config:{custom:{width:en-ct-y*2},links:[{title:"Highlight symbol",url:"",onClick:Pn=>{const va=Pn.origin.field.values[Pn.origin.rowIndex];gn(va)}}]}};let $n;if(Ut.isDiffFlamegraph()){Vn.config.custom.width=en-ct-y*3;const Pn=Mt("Baseline","percent"),sa=Mt("Comparison","percent"),va=Mt("Diff","percent");va.config.custom.cellOptions.type=$t.h2.ColorText,va.config.mappings=[{type:yt.H.ValueToText,options:{[1/0]:{text:"new",color:"red"}}},{type:yt.H.ValueToText,options:{[-100]:{text:"removed",color:"green"}}},{type:yt.H.RangeToText,options:{from:0,to:1/0,result:{color:"red"}}},{type:yt.H.RangeToText,options:{from:-1/0,to:0,result:{color:"green"}}}];const An=Ut.getLevels(),Xn=An.length?An[0][0].value:0,ra=An.length?An[0][0].valueRight:void 0;for(let ga in Xt){Gn.values.push(null),Vn.values.push(ga);const ys=Xt[ga].total,ds=Xt[ga].totalRight,Ja=Xn-ra,_a=Math.round(1e4*ys/Ja)/100,ls=Math.round(1e4*ds/ra)/100,Es=(ls-_a)/_a*100;va.values.push(Es),Pn.values.push(_a),sa.values.push(ls)}$n={fields:[Gn,Vn,Pn,sa,va],length:Vn.values.length}}else{const Pn=Mt("Self",Ut.selfField.config.unit),sa=Mt("Total",Ut.valueField.config.unit);for(let va in Xt)Gn.values.push(null),Vn.values.push(va),Pn.values.push(Xt[va].self),sa.values.push(Xt[va].total);$n={fields:[Gn,Vn,Pn,sa],length:Vn.values.length}}return(0,wt.SM)({data:[$n],fieldConfig:{defaults:{},overrides:[]},replaceVariables:Pn=>Pn,theme:Dn})[0]}function Mt(Ut,Xt){const en={width:y,align:"auto",inspect:!1,cellOptions:{type:$t.h2.Auto}};return{type:ft.fS.number,name:Ut,values:[],config:{unit:Xt,custom:en}}}const ct=61;function nt(Ut,Xt,en,gn){const ln={type:$t.h2.Custom,cellComponent:Dn=>i.createElement(Ct,{frame:Dn.frame,onSandwich:Ut,onSearch:Xt,search:en,sandwichItem:gn,rowIndex:Dn.rowIndex})},xn={filterable:!1,width:ct,hideHeader:!0,inspect:!1,align:"auto",cellOptions:ln};return{type:ft.fS.number,name:"actions",values:[],config:{custom:xn}}}function Ct(Ut){const Xt=Jt(),en=Ut.frame.fields.find(xn=>xn.name==="Symbol")?.values[Ut.rowIndex],gn=Ut.search===en,ln=Ut.sandwichItem===en;return i.createElement("div",{className:Xt.actionCellWrapper},i.createElement($e.h,{className:Xt.actionCellButton,name:"search",variant:gn?"primary":"secondary",tooltip:gn?"Clear from search":"Search for symbol","aria-label":gn?"Clear from search":"Search for symbol",onClick:()=>{Ut.onSearch(gn?"":en)}}),i.createElement($e.h,{className:Xt.actionCellButton,name:"gf-show-context",tooltip:ln?"Remove from sandwich view":"Show in sandwich view",variant:ln?"primary":"secondary","aria-label":ln?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{Ut.onSandwich(ln?void 0:en)}}))}const kt=Ut=>({topTableContainer:(0,n.css)({label:"topTableContainer",padding:Ut.spacing(1),backgroundColor:Ut.colors.background.secondary,height:"100%"})}),Jt=()=>({actionCellWrapper:(0,n.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,n.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),tn=Ie,Kt=new a.Z,cn=({data:Ut,onTableSymbolClick:Xt,onViewSelected:en,onTextAlignSelected:gn,onTableSort:ln,getTheme:xn,stickyHeader:Dn,extraHeaderElements:Ln,vertical:hn,showFlameGraphOnly:Gn,disableCollapsing:Vn})=>{const[$n,Wn]=(0,i.useState)(),[Pn,sa]=(0,i.useState)(0),[va,An]=(0,i.useState)(1),[Xn,ra]=(0,i.useState)(""),[ga,ys]=(0,i.useState)(K.So.Both),[ds,{width:Ja}]=(0,r.Z)(),[_a,ls]=(0,i.useState)("left"),[Es,Os]=(0,i.useState)(),ts=xn(),Xa=(0,i.useMemo)(()=>{if(Ut)return new Ve.Sg(Ut,{collapsing:!Vn},ts)},[Ut,ts,Vn]),[bs,Nr]=dn(Xa),cs=Zn(ts),ks=Sn(Xn,Xa);(0,i.useEffect)(()=>{Ja>0&&Ja<s&&ga===K.So.Both&&!hn&&ys(K.So.FlameGraph)},[ga,ys,Ja,hn]);const Hs=(0,i.useCallback)(()=>{Wn(void 0),sa(0),An(1)},[Wn,An,sa]);function qa(){Os(void 0)}(0,i.useEffect)(()=>{Hs(),qa()},[Ut,Hs]);const za=(0,i.useCallback)(Ns=>{Xn===Ns?ra(""):(Xt?.(Ns),ra(Ns),Hs())},[ra,Hs,Xt,Xn]);if(!Xa)return null;const Is=i.createElement(Te,{data:Xa,rangeMin:Pn,rangeMax:va,matchedLabels:ks,setRangeMin:sa,setRangeMax:An,onItemFocused:Ns=>Wn(Ns),focusedItemData:$n,textAlign:_a,sandwichItem:Es,onSandwich:Ns=>{Hs(),Os(Ns)},onFocusPillClick:Hs,onSandwichPillClick:qa,colorScheme:bs,showFlameGraphOnly:Gn,collapsing:!Vn}),vr=i.createElement(tn,{data:Xa,onSymbolClick:za,search:Xn,matchedLabels:ks,sandwichItem:Es,onSandwich:Os,onSearch:ra,onTableSort:ln});let dr;return Gn||ga===K.So.FlameGraph?dr=Is:ga===K.So.TopTable?dr=i.createElement("div",{className:cs.tableContainer},vr):ga===K.So.Both&&(hn?dr=i.createElement("div",null,i.createElement("div",{className:cs.verticalGraphContainer},Is),i.createElement("div",{className:cs.verticalTableContainer},vr)):dr=i.createElement("div",{className:cs.horizontalContainer},i.createElement("div",{className:cs.horizontalTableContainer},vr),i.createElement("div",{className:cs.horizontalGraphContainer},Is))),i.createElement(o.N.Provider,{value:ts},i.createElement("div",{ref:ds,className:cs.container},!Gn&&i.createElement(at,{search:Xn,setSearch:ra,selectedView:ga,setSelectedView:Ns=>{ys(Ns),en?.(Ns)},containerWidth:Ja,onReset:()=>{Hs(),qa()},textAlign:_a,onTextAlignChange:Ns=>{ls(Ns),gn?.(Ns)},showResetButton:!!($n||Es),colorScheme:bs,onColorSchemeChange:Nr,stickyHeader:!!Dn,extraHeaderElements:Ln,vertical:hn,isDiffMode:!!Xa.isDiffFlamegraph()}),i.createElement("div",{className:cs.body},dr)))};function dn(Ut){const Xt=Ut?.isDiffFlamegraph()?K.cB.Default:K.eL.PackageBased,[en,gn]=(0,i.useState)(Xt);return(0,i.useEffect)(()=>{gn(Xt)},[Xt]),[en,gn]}function Sn(Ut,Xt){return(0,i.useMemo)(()=>{if(Ut&&Xt){const en=new Set;let gn=Kt.filter(Xt.getUniqueLabels(),Ut);if(gn)for(let ln of gn)en.add(Xt.getUniqueLabels()[ln]);return en}},[Ut,Xt])}function Zn(Ut){return{container:(0,n.css)({label:"container",overflow:"auto",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Ut.spacing(1)}),body:(0,n.css)({label:"body",flexGrow:1}),tableContainer:(0,n.css)({height:800}),horizontalContainer:(0,n.css)({label:"horizontalContainer",display:"flex",minHeight:0,flexDirection:"row",columnGap:Ut.spacing(1),width:"100%"}),horizontalGraphContainer:(0,n.css)({flexBasis:"50%"}),horizontalTableContainer:(0,n.css)({flexBasis:"50%",maxHeight:800}),verticalGraphContainer:(0,n.css)({marginBottom:Ut.spacing(1)}),verticalTableContainer:(0,n.css)({height:800})}}const _n=cn},44138:(Q,A,e)=>{"use strict";e.d(A,{So:()=>a,_r:()=>n,cB:()=>r,eL:()=>i});var n=(o=>(o.Bytes="bytes",o.Short="short",o.Nanoseconds="ns",o))(n||{}),a=(o=>(o.TopTable="topTable",o.FlameGraph="flameGraph",o.Both="both",o))(a||{}),i=(o=>(o.ValueBased="valueBased",o.PackageBased="packageBased",o))(i||{}),r=(o=>(o.Default="default",o.DiffColorBlind="diffColorBlind",o))(r||{})},15035:(Q,A,e)=>{"use strict";e.d(A,{I:()=>a,i:()=>i});var n=e(85498);function a(r){return{grafana_version:n.config.buildInfo.version,plugin_type:String(r.type),plugin_version:r.info.version,plugin_id:r.id,plugin_name:r.name}}function i(r){return{...a(r.meta),datasource_uid:r.uid}}},63336:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>u});var n=e(31733),a=e(18286),i=e(8829),r=e(64704),o=e(15035);const g="grafana_plugin_";function u(){const l=(0,a.gp)();return(0,n.useMemo)(()=>{const d=(0,i.v)(l)?(0,o.i)(l.instanceSettings):(0,o.I)(l.meta);return(f,m)=>{if(!c(f))throw new Error(`Interactions reported in plugins should start with: "${g}".`);return(0,r.ff)(f,{...m,...d})}},[l])}function c(l){return l.startsWith(g)&&l.length>g.length}},21057:(Q,A,e)=>{"use strict";e.d(A,{Si:()=>a,ct:()=>n,fV:()=>i,mR:()=>r});var n=(o=>(o.DashboardView="dashboard-view",o.DataRequest="data-request",o))(n||{});const a=o=>!!o.payload.page,i=o=>!!o.payload.interactionName,r=o=>!!o.payload.experimentId},64704:(Q,A,e)=>{"use strict";e.d(A,{SZ:()=>u,ff:()=>g,r_:()=>r,sm:()=>o});var n=e(85498),a=e(19690),i=e(93846);const r=c=>{(0,i.RP)().addEvent({type:i.ee.MetaAnalytics,payload:c})},o=()=>{const c=a.E1.getLocation(),l=`${n.config.appSubUrl??""}${c.pathname}${c.search}${c.hash}`;(0,i.RP)().addEvent({type:i.ee.Pageview,payload:{page:l}})},g=(c,l)=>{(0,i.RP)().addEvent({type:i.ee.Interaction,payload:{interactionName:c,properties:l}})},u=(c,l,d)=>{(0,i.RP)().addEvent({type:i.ee.ExperimentView,payload:{experimentId:c,experimentGroup:l,experimentVariant:d}})}},27520:(Q,A,e)=>{"use strict";e.d(A,{q:()=>d});var n=e(31733),a=e(44992),i=e(64562),r=e(21568),o=e(38834),g=e(79106),u=e(22525),c=e(66261),l=e(65821);class d extends n.PureComponent{constructor(m){super(m),this.dataSourceSrv=(0,c.F)(),this.state={},this.onChange=(v,E)=>{if(E.action==="clear"&&this.props.onClear){this.props.onClear();return}const p=this.dataSourceSrv.getInstanceSettings(v.value);p&&(this.props.onChange(p),this.setState({error:void 0}))}}componentDidMount(){const{current:m}=this.props;this.dataSourceSrv.getInstanceSettings(m)||this.setState({error:"Could not find data source "+m})}getCurrentValue(){const{current:m,hideTextValue:v,noDefault:E}=this.props;if(!m&&E)return;const p=this.dataSourceSrv.getInstanceSettings(m);if(p)return{label:p.name.slice(0,37),value:p.uid,imgUrl:p.meta.info.logos.small,hideText:v,meta:p.meta};const h=(0,a.BT)(m);return h===l.hr.uid||h===l.hr.name?{label:h,value:h,hideText:v}:{label:(h??"no name")+" - not found",value:h??void 0,imgUrl:"",hideText:v}}getDataSourceOptions(){const{alerting:m,tracing:v,metrics:E,mixed:p,dashboard:h,variables:s,annotations:y,pluginId:D,type:C,filter:P,logs:b}=this.props;return this.dataSourceSrv.getList({alerting:m,tracing:v,metrics:E,logs:b,dashboard:h,mixed:p,variables:s,annotations:y,pluginId:D,filter:P,type:C}).map(O=>({value:O.name,label:`${O.name}${O.isDefault?" (default)":""}`,imgUrl:O.meta.info.logos.small,meta:O.meta}))}render(){const{autoFocus:m,onBlur:v,onClear:E,openMenuOnFocus:p,placeholder:h,width:s,inputId:y,disabled:D=!1,isLoading:C=!1}=this.props,{error:P}=this.state,b=this.getDataSourceOptions(),T=this.getCurrentValue(),O=typeof E=="function";return n.createElement("div",{"aria-label":"Data source picker select container","data-testid":r.wl.components.DataSourcePicker.container},n.createElement(o.Ph,{isLoading:C,disabled:D,"aria-label":"Select a data source","data-testid":r.wl.components.DataSourcePicker.inputV2,inputId:y||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:O,backspaceRemovesValue:!1,onChange:this.onChange,options:b,autoFocus:m,onBlur:v,width:s,openMenuOnFocus:p,maxMenuHeight:500,placeholder:h,noOptionsMessage:"No datasources found",value:T??null,invalid:!!P||!!this.props.invalid,getOptionLabel:R=>R.meta&&(0,i.x)(R.meta.signature)&&R!==T?n.createElement(g.Lh,{align:"center",justify:"space-between",height:"auto"},n.createElement("span",null,R.label)," ",n.createElement(u.o,{status:R.meta.signature})):R.label||""}))}}d.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},46915:(Q,A,e)=>{"use strict";e.d(A,{$:()=>i,Z:()=>a});var n=e(31733);let a=({message:r})=>n.createElement("div",null,"Unable to render data: ",r,".");function i(r){a=r}},31524:(Q,A,e)=>{"use strict";e.d(A,{$:()=>a,L:()=>i});var n=e(31733);let a=()=>n.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function i(r){a=r}},39192:(Q,A,e)=>{"use strict";e.d(A,{T:()=>a,t:()=>i});var n=e(31733);let a=({children:r})=>n.createElement("div",null,r);function i(r){a=r}},85498:(Q,A,e)=>{"use strict";e.d(A,{O:()=>o,config:()=>d});var n=e(69781),a=e.n(n),i=e(74337),r=e(26857);class o{constructor(m){this.publicDashboardsEnabled=!0,this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.namespace="default",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.anonymousDeviceLimit=void 0,this.licenseInfo={},this.rendererAvailable=!1,this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,workloadIdentityEnabled:!1,userIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.analytics={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=m.bootData;const v={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,n.merge)(this,v,m),this.buildInfo=m.buildInfo||v.buildInfo,this.dateFormats&&i.U6.update(this.dateFormats),this.buildInfo.env==="development"&&u(this),g(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,r.j)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function g(f){const m=f.featureToggles,v="grafana.featureToggles",E=window.localStorage.getItem(v);if(E){const p=E.split(",");for(const h of p){const[s,y]=h.split("="),D=y==="true"||y==="1";m[s]=D,console.log(`Setting feature toggle ${s} = ${D} via localstorage`)}}}function u(f){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((v,E)=>{if(E.startsWith("__feature.")){const p=f.featureToggles,h=E.substring(10),s=v==="true"||v==="";s!==p[E]&&(p[h]=s,console.log(`Setting feature toggle ${h} = ${s} via url`))}})}const c=window.grafanaBootData||{settings:{},user:{},navTree:[]},l=c.settings;l.bootData=c;const d=new o(l)},49244:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{CopyPanelEvent:()=>d.EK,DataSourcePicker:()=>I.q,DataSourceWithBackend:()=>D.CK,EchoEventType:()=>o.ee,FakeEchoSrv:()=>o.rX,GrafanaBootConfig:()=>v.O,HealthCheckError:()=>D.ZA,HealthStatus:()=>D.QO,HistoryWrapper:()=>l._i,MetaAnalyticsEventName:()=>E.ct,PanelDataErrorView:()=>b.Z,PanelRenderer:()=>P.$,PluginPage:()=>R.T,RefreshEvent:()=>d.U5,StreamingFrameAction:()=>c.T0,SystemJS:()=>p.i3,ThemeChangedEvent:()=>d.hD,TimeRangeUpdatedEvent:()=>d.md,config:()=>v.config,createDataSourcePluginEventProperties:()=>M.i,createPluginEventProperties:()=>M.I,createQueryRunner:()=>O.AQ,featureEnabled:()=>s.v,frameToMetricFindValue:()=>C.S9,getAngularLoader:()=>a.w,getAppEvents:()=>d.N$,getBackendSrv:()=>n.i,getDataSourceSrv:()=>i.F,getEchoSrv:()=>o.RP,getGrafanaLiveSrv:()=>c.gj,getLegacyAngularInjector:()=>u.V,getLocationSrv:()=>r.w,getPluginComponentExtensions:()=>f.QK,getPluginExtensions:()=>f.I4,getPluginImportUtils:()=>p.bP,getPluginLinkExtensions:()=>f.dj,getRunRequest:()=>O.Pl,getTemplateSrv:()=>g.J,isExperimentViewEvent:()=>E.mR,isFetchError:()=>n.kW,isInteractionEvent:()=>E.fV,isPageviewEvent:()=>E.Si,isPluginExtensionComponent:()=>m.M,isPluginExtensionLink:()=>m.c,loadPluginCss:()=>p.iS,locationSearchToObject:()=>l.Ox,locationService:()=>l.E1,logDebug:()=>y.o7,logError:()=>y.H,logInfo:()=>y.PN,logWarning:()=>y.KE,navigationLogger:()=>l.GQ,registerEchoBackend:()=>o.e6,reportExperimentView:()=>h.SZ,reportInteraction:()=>h.ff,reportMetaAnalytics:()=>h.r_,reportPageview:()=>h.sm,setAngularLoader:()=>a.W,setAppEvents:()=>d.Xw,setBackendSrv:()=>n.jW,setDataSourceSrv:()=>i.w,setEchoSrv:()=>o.tz,setGrafanaLiveSrv:()=>c.cA,setLegacyAngularInjector:()=>u.t,setLocationService:()=>l.ZG,setLocationSrv:()=>r.x,setPluginExtensionGetter:()=>f.oI,setPluginImportUtils:()=>p.Qf,setQueryRunnerFactory:()=>O.pD,setRunRequest:()=>O.Iw,setTemplateSrv:()=>g.l,toDataQueryError:()=>T.P,toDataQueryResponse:()=>C.z1,usePluginInteractionReporter:()=>x.Q});var n=e(69391),a=e(80091),i=e(66261),r=e(17721),o=e(93846),g=e(61129),u=e(28109),c=e(24035),l=e(19690),d=e(1727),f=e(33500),m=e(52918),v=e(85498),E=e(21057),p=e(80907),h=e(64704),s=e(28298),y=e(70621),D=e(65821),C=e(67609),P=e(31524),b=e(46915),T=e(54291),O=e(18543),R=e(39192),I=e(27520),M=e(15035),x=e(63336)},80091:(Q,A,e)=>{"use strict";e.d(A,{W:()=>a,w:()=>i});let n;function a(r){n=r}function i(){return n}},93846:(Q,A,e)=>{"use strict";e.d(A,{RP:()=>r,e6:()=>o,ee:()=>n,rX:()=>g,tz:()=>i});var n=(u=>(u.Performance="performance",u.MetaAnalytics="meta-analytics",u.Pageview="pageview",u.Interaction="interaction",u.ExperimentView="experimentview",u.GrafanaJavascriptAgent="grafana-javascript-agent",u))(n||{});let a;function i(u){if(a instanceof g)for(const c of a.buffer)u.addEvent(c.event,c.meta);a=u}function r(){return a||(a=new g),a}const o=u=>{r().addBackend(u)};class g{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(c){}addEvent(c,l){this.buffer.push({event:c,meta:l})}}},19690:(Q,A,e)=>{"use strict";e.d(A,{E1:()=>l,GQ:()=>m,Ox:()=>c,ZG:()=>d,_i:()=>u});var n=e(98217),a=e(91977),i=e(74687),r=e(56634),o=e(56586),g=e(85498);class u{constructor(E){this.history=E||n.lX({basename:g.config.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(E,p){const h=this.history.location,s=this.getSearchObject();for(const D of Object.keys(E))E[D]===null||E[D]===void 0?delete s[D]:s[D]=E[D];const y=a.Cj.renderUrl(h.pathname,s);p?this.history.replace(y,this.history.location.state):this.history.push(y,this.history.location.state)}push(E){this.history.push(E)}replace(E){this.history.replace(E)}reload(){const E=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:E?E+1:1}})}getLocation(){return this.history.location}getSearchObject(){return c(this.history.location.search)}update(E){if((0,i.d)("LocationSrv","update","partial, push or replace"),E.partial&&E.query)this.partial(E.query,E.partial);else{const p={pathname:E.path};E.query&&(p.search=a.Cj.toUrlParams(E.query)),E.replace?this.replace(p):this.push(p)}}}function c(v){let E=typeof v=="number"?String(v):v;return E.length>0?E.startsWith("?")?a.Cj.parseKeyValue(E.substring(1)):a.Cj.parseKeyValue(E):{}}let l=new u;const d=v=>{throw new Error("locationService can be only overriden in test environment")},f=(0,r.h)("Router"),m=f.logger;(0,o.x)("location",l,f)},17721:(Q,A,e)=>{"use strict";e.d(A,{w:()=>i,x:()=>a});let n;function a(r){n=r}function i(){return n}},18543:(Q,A,e)=>{"use strict";e.d(A,{AQ:()=>i,Iw:()=>o,Pl:()=>g,pD:()=>a});let n;const a=u=>{if(n)throw new Error("Runner should only be set when Grafana is starting.");n=u},i=()=>{if(!n)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return n()};let r;function o(u){if(r)throw new Error("runRequest function should only be set once, when Grafana is starting.");r=u}function g(){if(!r)throw new Error("getRunRequest can only be used after Grafana instance has started.");return r}},1727:(Q,A,e)=>{"use strict";e.d(A,{EK:()=>o,N$:()=>c,U5:()=>a,Xw:()=>u,hD:()=>i,md:()=>r});var n=e(63121);class a extends n.m{}a.type="refresh";class i extends n.R{}i.type="theme-changed";class r extends n.R{}r.type="time-range-updated";class o extends n.R{}o.type="copy-panel";let g;function u(l){g=l}function c(){return g}},69391:(Q,A,e)=>{"use strict";e.d(A,{i:()=>r,jW:()=>i,kW:()=>n});function n(o){return typeof o=="object"&&o!==null&&"status"in o&&"data"in o}let a;const i=o=>{a=o},r=()=>a},66261:(Q,A,e)=>{"use strict";e.d(A,{F:()=>i,w:()=>a});let n;function a(r){n=r}function i(){return n}},28109:(Q,A,e)=>{"use strict";e.d(A,{V:()=>i,t:()=>a});let n;const a=r=>{n=r},i=()=>n},24035:(Q,A,e)=>{"use strict";e.d(A,{T0:()=>n.T0,cA:()=>i,gj:()=>r});var n=e(55739);let a;const i=o=>{a=o},r=()=>a},33500:(Q,A,e)=>{"use strict";e.d(A,{I4:()=>o,QK:()=>u,dj:()=>g,oI:()=>i});var n=e(52918);let a;function i(c){if(a)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");a=c}function r(){if(!a)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return a}const o=c=>r()(c),g=c=>{const{extensions:l}=o(c);return{extensions:l.filter(n.c)}},u=c=>{const{extensions:l}=o(c);return{extensions:l.filter(n.M)}}},52918:(Q,A,e)=>{"use strict";e.d(A,{M:()=>i,c:()=>a});var n=e(90384);function a(r){return r?r.type===n.D.link&&("path"in r||"onClick"in r):!1}function i(r){return r?r.type===n.D.component&&"component"in r:!1}},61129:(Q,A,e)=>{"use strict";e.d(A,{J:()=>i,l:()=>a});let n;const a=r=>{n=r},i=()=>n},65821:(Q,A,e)=>{"use strict";e.d(A,{CK:()=>T,hr:()=>y,ZA:()=>C,QO:()=>P,Pr:()=>D,PI:()=>R,B9:()=>O});var n=e(86457),a=e(71892),i=e(26722),r=e(51517),o=e(56183),g=e(51023),u=e(44992),c=e(4230),l=e(20498),d=e(20187),f=e(85498),m=e(66261),v=e(24035),E=e(69391),p=e(55739),h=e(67609);function s(I){const{intervalMs:M,maxDataPoints:x,requestId:L,panelId:S,queryCachingTTL:U,range:{from:N,to:w}}=I;if(!I.targets.length)return(0,n.of)({data:[]});const G={intervalMs:M,maxDataPoints:x,queryCachingTTL:U,timeRange:{from:N.valueOf().toString(),to:w.valueOf().toString(),timezone:I.timezone}};return(0,E.i)().fetch({url:`/api/public/dashboards/${f.config.publicDashboardAccessToken}/panels/${S}/query`,method:"POST",data:G,requestId:L}).pipe((0,r.w)(_=>(0,n.of)((0,h.z1)(_,I.targets))),(0,o.K)(_=>(0,n.of)((0,h.z1)(_))))}const y=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function D(I){if(!I)return!1;const M=typeof I=="string"?I:I.type;return M===y.type||M===y.name||M==="-100"}class C extends Error{constructor(M,x){super(M),this.details=x,this.name="HealthCheckError"}}var P=(I=>(I.Unknown="UNKNOWN",I.OK="OK",I.Error="ERROR",I))(P||{}),b=(I=>(I.PluginID="X-Plugin-Id",I.DatasourceUID="X-Datasource-Uid",I.DashboardUID="X-Dashboard-Uid",I.PanelID="X-Panel-Id",I.QueryGroupID="X-Query-Group-Id",I.FromExpression="X-Grafana-From-Expr",I.SkipQueryCache="X-Cache-Skip",I))(b||{});class T extends g.MF{constructor(M){super(M),this.streamOptionsProvider=R}query(M){if(f.config.publicDashboardAccessToken)return s(M);const{intervalMs:x,maxDataPoints:L,queryCachingTTL:S,range:U,requestId:N,hideFromInspector:w=!1}=M;let G=M.targets;this.filterQuery&&(G=G.filter(X=>this.filterQuery(X)));let _=!1;const K=new Set,k=new Set,z=G.map(X=>{let Y=this.getRef(),ne=this.id,se=!0;if(D(X.datasource))return _=!0,{...X,datasource:y};if(X.datasource){const re=(0,m.F)().getInstanceSettings(X.datasource,M.scopedVars);if(!re)throw new Error(`Unknown Datasource: ${JSON.stringify(X.datasource)}`);const ge=re.rawRef??(0,u.iU)(re),q=re.id;(ge.uid!==Y.uid||ne!==q)&&(Y=ge,ne=q,se=!1)}return Y.type?.length&&K.add(Y.type),Y.uid?.length&&k.add(Y.uid),{...se?this.applyTemplateVariables(X,M.scopedVars,M.filters):X,datasource:Y,datasourceId:ne,intervalMs:x,maxDataPoints:L,queryCachingTTL:S}});if(!z.length)return(0,n.of)({data:[]});const W={queries:z,from:U?.from.valueOf().toString(),to:U?.to.valueOf().toString()};if(f.config.featureToggles.queryOverLive)return(0,v.gj)().getQueryData({request:M,body:W});const Z={};Z["X-Plugin-Id"]=Array.from(K).join(", "),Z["X-Datasource-Uid"]=Array.from(k).join(", ");let H="/api/ds/query?ds_type="+this.type;return _&&(Z["X-Grafana-From-Expr"]="true",H+="&expression=true"),N&&(H+=`&requestId=${N}`),M.dashboardUID&&(Z["X-Dashboard-Uid"]=M.dashboardUID),M.panelId&&(Z["X-Panel-Id"]=`${M.panelId}`),M.queryGroupId&&(Z["X-Query-Group-Id"]=`${M.queryGroupId}`),M.skipQueryCache&&(Z["X-Cache-Skip"]="true"),(0,E.i)().fetch({url:H,method:"POST",data:W,requestId:N,hideFromInspector:w,headers:Z}).pipe((0,r.w)(X=>{const Y=(0,h.z1)(X,z);return Y.data?.length&&Y.data.find(ne=>ne.meta?.channel)?O(Y,M,this.streamOptionsProvider):(0,n.of)(Y)}),(0,o.K)(X=>(0,n.of)((0,h.z1)(X))))}getRequestHeaders(){const M={};return M["X-Plugin-Id"]=this.type,M["X-Datasource-Uid"]=this.uid,M}interpolateVariablesInQueries(M,x,L){return M.map(S=>this.applyTemplateVariables(S,x,L))}applyTemplateVariables(M,x,L){return M}async getResource(M,x,L){const S=this.getRequestHeaders();return(await(0,a.n)((0,E.i)().fetch({...L,method:"GET",headers:L?.headers?{...L.headers,...S}:S,params:x??L?.params,url:`/api/datasources/uid/${this.uid}/resources/${M}`}))).data}async postResource(M,x,L){const S=this.getRequestHeaders();return(await(0,a.n)((0,E.i)().fetch({...L,method:"POST",headers:L?.headers?{...L.headers,...S}:S,data:x??{...x},url:`/api/datasources/uid/${this.uid}/resources/${M}`}))).data}async callHealthCheck(){return(0,a.n)((0,E.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(M=>M.data).catch(M=>M.data)}async testDatasource(){return this.callHealthCheck().then(M=>M.status==="OK"?{status:"success",message:M.message}:Promise.reject({status:"error",message:M.message,error:new C(M.message,M.details)}))}}function O(I,M,x){const L=(0,v.gj)();if(!L)return(0,n.of)(I);const S=[],U=[];for(const N of I.data){const w=(0,c.H7)(N.meta?.channel);if(w){const G=N;U.push(L.getDataStream({addr:w,buffer:x(M,G),frame:(0,l.Y)(N)}))}else S.push(N)}return S.length&&U.push((0,n.of)({...I,data:S})),U.length===1?U[0]:(0,i.T)(...U)}const R=(I,M)=>{const x={maxLength:I.maxDataPoints??500,action:p.T0.Append};return I.rangeRaw?.to==="now"&&(x.maxDelta=I.range.to.valueOf()-I.range.from.valueOf()),x};T=(0,d.s)(T)},28298:(Q,A,e)=>{"use strict";e.d(A,{v:()=>a});var n=e(85498);const a=i=>{const{enabledFeatures:r}=n.config.licenseInfo;return r&&r[i]}},70621:(Q,A,e)=>{"use strict";e.d(A,{H:()=>u,KE:()=>o,PN:()=>r,o7:()=>g});var n=e(47121),a=e(75699),i=e(85498);function r(c,l){i.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([c],{level:a.in.INFO,context:l})}function o(c,l){i.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([c],{level:a.in.WARN,context:l})}function g(c,l){i.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([c],{level:a.in.DEBUG,context:l})}function u(c,l){i.config.grafanaJavascriptAgent.enabled&&n.s.api.pushError(c,{context:l})}},80907:(Q,A,e)=>{"use strict";e.d(A,{Qf:()=>f,bP:()=>m,i3:()=>c,iS:()=>l});var n=e(60114),a=e.n(n),i=e(55410),r=e.n(i),o=e(97996),g=e.n(o),u=e(85498);const c=window.System;async function l(v){try{const E=u.config.bootData.user.theme==="light"?v.light:v.dark;return c.import(E)}catch(E){console.error(E)}}let d;function f(v){if(d)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");d=v}function m(){if(!d)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return d}window.__grafana_amd_define=window.define,window.define=void 0},67609:(Q,A,e)=>{"use strict";e.d(A,{S9:()=>f,z1:()=>u});var n=e(20298),a=e(20498),i=e(98147),r=e(85666),o=e(54291);const g={severity:"info",text:"Cached response"};function u(m,v){const E={data:[],state:n.Gu.Done},p="traceId"in m?m.traceId:void 0;p!=null&&(E.traceIds=[p]);const h=m;if(h.data?.results){const s=h.data.results,y=v?.length?v.map(P=>P.refId):Object.keys(s),D=c(h),C=[];for(const P of y){const b=s[P];b&&(b.refId=P,C.push(b))}for(const P of C){if(P.error){const b={refId:P.refId,message:P.error,status:P.status};p!=null&&(b.traceId=p),E.error||(E.error={...b}),E.errors?E.errors.push({...b}):E.errors=[{...b}],E.state=n.Gu.Error}if(P.frames?.length){for(let b of P.frames){D&&(b=l(b));const T=(0,a.vP)(b);T.refId||(T.refId=P.refId),E.data.push(T)}continue}if(P.series?.length)for(const b of P.series)b.refId||(b.refId=P.refId),E.data.push((0,i.g0)(b));if(P.tables?.length)for(const b of P.tables)b.refId||(b.refId=P.refId),E.data.push((0,i.g0)(b))}}return h.status&&h.status!==200&&(E.state!==n.Gu.Error&&(E.state=n.Gu.Error),E.error||(E.error=(0,o.P)(m))),E}function c(m){const v=m?.headers;return!v||!v.get?!1:v.get("X-Cache")==="HIT"}function l(m){return{...m,schema:{...m.schema,fields:[...m.schema?.fields??[]],meta:{...m.schema?.meta,notices:[...m.schema?.meta?.notices??[],g],isCachedResponse:!0}}}}function d(m){const v=u(m);if(v.error?.data?.message)return{status:"error",message:v.error.data.message,details:v.error?.data?.error?{message:v.error.data.error}:void 0};if(v.error?.refId&&v.error?.message)return{status:"error",message:v.error.message};throw m}function f(m){if(!m||!m.length)return[];const v=[];let E=m.fields.find(p=>p.type===r.fS.string);if(E||(E=m.fields.find(p=>p.type!==r.fS.time)),E)for(let p=0;p<E.values.length;p++)v.push({text:""+E.values[p]});return v}},25111:(Q,A,e)=>{"use strict";e.d(A,{b:()=>l,j:()=>d});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(51343),g=e(49311),u=e(68833),c=e(36717);const l=a.forwardRef(({title:m,onRemove:v,children:E,buttonContent:p,elevated:h,bottomSpacing:s,topSpacing:y,className:D,severity:C="error",...P},b)=>{const T=(0,r.l4)(),R=f(T,C,!!m,h,s,y),I={error:"alert",warning:"alert",info:"status",success:"status"},M=P.role||I[C],x=P["aria-label"]||m;return a.createElement("div",{ref:b,className:(0,n.cx)(R.wrapper,D),role:M,"aria-label":x,...P},a.createElement(u.x,{"data-testid":i.wl.components.Alert.alertV2(C),display:"flex",backgroundColor:C,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:C,alignItems:"stretch",boxShadow:h?"z3":void 0},a.createElement(u.x,{paddingTop:1,paddingRight:2},a.createElement("div",{className:R.icon},a.createElement(g.J,{size:"xl",name:d(C)}))),a.createElement(u.x,{paddingY:1,grow:1},a.createElement(c.x,{weight:"medium"},m),E&&a.createElement("div",{className:R.content},E)),v&&!p&&a.createElement("div",{className:R.close},a.createElement(o.zx,{"aria-label":"Close alert",icon:"times",onClick:v,type:"button",fill:"text",variant:"secondary"})),v&&p&&a.createElement(u.x,{marginLeft:1,display:"flex",alignItems:"center"},a.createElement(o.zx,{"aria-label":"Close alert",variant:"secondary",onClick:v,type:"button"},p))))});l.displayName="Alert";const d=m=>{switch(m){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},f=(m,v,E,p,h,s)=>{const y=m.colors[v];return{wrapper:(0,n.css)({flexGrow:1,marginBottom:m.spacing(h??2),marginTop:m.spacing(s??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:m.colors.background.primary,zIndex:-1}}),icon:(0,n.css)({color:y.text}),content:(0,n.css)({paddingTop:E?m.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,n.css)({position:"relative",color:m.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},95712:(Q,A,e)=>{"use strict";e.d(A,{h:()=>v});var n=e(76932),a=e(69781),i=e(31733),r=e(76067),o=e(85765),g=e(14067);const u=i.memo(()=>{const p=(0,r.wW)(c);return i.createElement("div",{className:p.ellipsis},i.createElement("span",{className:p.firstDot},"."),i.createElement("span",{className:p.secondDot},"."),i.createElement("span",{className:p.thirdDot},"."))});u.displayName="EllipsisAnimated";const c=()=>({ellipsis:(0,n.css)({display:"inline"}),firstDot:(0,n.css)({animation:`${l} 2s linear infinite`}),secondDot:(0,n.css)({animation:`${d} 2s linear infinite`}),thirdDot:(0,n.css)({animation:`${f} 2s linear infinite`})}),l=(0,n.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,d=(0,n.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,f=(0,n.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,m=2*1e3;function v(p){const{invalid:h,loading:s,onFinishChange:y,saveErrorMessage:D="Error saving this value",error:C,children:P,disabled:b,...T}=p,[O,R]=i.useState({isLoading:!1,showSuccess:!1,showError:h}),I=(0,i.useRef)(null);i.useEffect(()=>{let U;if(O.showSuccess){const N=O.showError?0:m;U=setTimeout(()=>{R({...O,showSuccess:!1})},N)}return()=>{window.clearTimeout(U)}},[O]);const M=(0,i.useCallback)(U=>{h||(R({...O,isLoading:!0,showSuccess:!1}),y(U).then(()=>{R({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{R({...O,isLoading:!1,showError:!0})}))},[h,O,y]),x=(0,i.useMemo)(()=>(0,a.debounce)(M,600,{leading:!1}),[M]),L=h||O.showError||void 0,S=(0,r.wW)(E);return i.createElement(i.Fragment,null,i.createElement(o.g,{...T,loading:s||void 0,invalid:L,disabled:b,error:C||O.showError&&D,ref:I,className:S.widthFitContent},i.cloneElement(P(U=>{x(U)}))),O.isLoading&&i.createElement(g.K,{referenceElement:I.current,placement:"right",alternativePlacement:"bottom"},"Saving ",i.createElement(u,null)),O.showSuccess&&i.createElement(g.K,{suffixIcon:"check",referenceElement:I.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}v.displayName="AutoSaveField";const E=()=>({widthFitContent:(0,n.css)({width:"fit-content"})})},50248:(Q,A,e)=>{"use strict";e.d(A,{C:()=>f});var n=e(76932),a=e(31733),i=e(49876),r=e(37479),o=e(76067),g=e(95885),u=e(49311),c=e(58037);const l=a.memo(({icon:E,color:p,text:h,tooltip:s,className:y,...D})=>{const C=(0,o.wW)(v,p),P=a.createElement("div",{className:(0,n.cx)(C.wrapper,y),...D},E&&a.createElement(u.J,{name:E,size:"sm"}),h);return s?a.createElement(c.u,{content:s,placement:"auto"},P):P});l.displayName="Badge";const d=({rootProps:E})=>{const p=(0,o.wW)(m);return a.createElement(i.Z,{width:60,height:22,containerClassName:p.container,...E})},f=(0,g.y)(l,d),m=()=>({container:(0,n.css)({lineHeight:1})}),v=(E,p)=>{let h=E.visualization.getColorByName(p),s="",y="",D="";return E.isDark?(y=(0,r.Z)(h).setAlpha(.15).toString(),s=(0,r.Z)(h).setAlpha(.25).toString(),D=(0,r.Z)(h).lighten(15).toString()):(y=(0,r.Z)(h).setAlpha(.15).toString(),s=(0,r.Z)(h).setAlpha(.25).toString(),D=(0,r.Z)(h).darken(20).toString()),{wrapper:(0,n.css)({display:"inline-flex",padding:"1px 4px",borderRadius:E.shape.radius.default,background:y,border:`1px solid ${s}`,color:D,fontWeight:E.typography.fontWeightRegular,gap:"2px",fontSize:E.typography.bodySmall.fontSize,lineHeight:E.typography.bodySmall.lineHeight,alignItems:"center"})}}},42023:(Q,A,e)=>{"use strict";e.d(A,{xf:()=>P});var n=e(76932),a=e(31733),i=e(37479),r=e(6485),o=e(55632),g=e(47423),u=e(86850),c=e(91507),l=e(99326),d=e(21568),f=e(71199),m=e(90854),v=e(51343),E=e(60850);const p=18,h=50,s=150,y=1.5,D=1,C=10;class P extends a.PureComponent{render(){const{onClick:w,className:G,theme:_}=this.props,{title:K}=this.props.value,k=O(this.props);return w?a.createElement("button",{type:"button",style:k.wrapper,onClick:w,className:(0,n.cx)((0,v.gN)(_),G)},a.createElement("div",{style:k.title},K),this.renderBarAndValue()):a.createElement("div",{style:k.wrapper,className:G},K&&a.createElement("div",{style:k.title},K),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:w,showUnfilled:G,valueDisplayMode:_}=this.props,K=x(this.props);return a.createElement("div",{style:K.wrapper},_!==f.M8.Hidden&&a.createElement(E.W,{"data-testid":d.wl.components.Panels.Visualization.BarGauge.valueV2,value:w,style:K.value}),G&&a.createElement("div",{style:K.emptyBar}),a.createElement("div",{style:K.bar}))}renderRetroBars(){const{display:w,field:G,value:_,itemSpacing:K,alignmentFactors:k,orientation:z,lcdCellWidth:W,text:Z,valueDisplayMode:H,theme:X}=this.props,{valueHeight:Y,valueWidth:ne,maxBarHeight:se,maxBarWidth:re,wrapperWidth:ge,wrapperHeight:q}=R(this.props),me=G.min??r.Hx,oe=G.max??r.Z3,fe=b(z),ve=oe-me,pe=fe?se:re,Me=K,Pe=Math.floor(pe/W),Ee=Math.floor((pe-Me*Pe)/Pe),he=S(this.props),ke=U(k||_,he,ne,Y,z,Z),ot={width:`${ge}px`,height:`${q}px`,display:"flex"};fe?(ot.flexDirection="column-reverse",ot.alignItems="center"):(ot.flexDirection="row",ot.alignItems="center",ke.justifyContent="flex-end");const it=[];for(let ce=0;ce<Pe;ce++){const le=me+ve/Pe*ce,Re=I(le,_,w),Ae={borderRadius:X.shape.radius.default};Re.isLit?Ae.backgroundImage=`radial-gradient(${Re.background} 10%, ${Re.backgroundShade})`:Ae.backgroundColor=Re.background,fe?(Ae.height=`${Ee}px`,Ae.width=`${re}px`,Ae.marginTop=`${Me}px`):(Ae.width=`${Ee}px`,Ae.height=`${se}px`,Ae.marginRight=`${Me}px`),it.push(a.createElement("div",{key:ce.toString(),style:Ae}))}return a.createElement("div",{style:ot},it,H!==f.M8.Hidden&&a.createElement(E.W,{"data-testid":d.wl.components.Panels.Visualization.BarGauge.valueV2,value:_,style:ke}))}}P.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:f.QH.Gradient,orientation:o.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:g.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function b(N){return N===o.wm.Vertical}function T(N){const{height:w,width:G,alignmentFactors:_,orientation:K,text:k,namePlacement:z}=N,W=_?_.title:N.value.title;if(!W)return{fontSize:0,width:0,height:0,placement:"above"};if(b(K)){const re=k?.titleSize??14;return{fontSize:re,width:G,height:re*y,placement:"below"}}if(w>40&&z===f.L3.Auto||z===f.L3.Top){if(k?.titleSize)return{fontSize:k?.titleSize,width:0,height:k.titleSize*y,placement:"above"};const ge=Math.max(Math.min(w*.45,h),17);return{fontSize:ge/y,width:0,height:ge,placement:"above"}}const Y=Math.max(w*.6,p)/y,ne=(0,m.X1)(W,Y),se=Math.min(ne.width+15,G*.4);return{fontSize:k?.titleSize??Y,height:0,width:se,placement:"left"}}function O(N){const w={display:"flex",overflow:"hidden",width:"100%"},G=T(N),_={fontSize:`${G.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return b(N.orientation)?(w.flexDirection="column-reverse",_.textAlign="center"):G.placement==="above"?w.flexDirection="column":(w.flexDirection="row",_.width=`${G.width}px`,_.textAlign="right",_.paddingRight="10px"),{wrapper:w,title:_}}function R(N){const{height:w,width:G,orientation:_,text:K,alignmentFactors:k,valueDisplayMode:z}=N,W=T(N),Z=k??N.value,H=(0,u.zc)(Z);let X=0,Y=0,ne=0,se=0,re=0,ge=0;const q=K?.valueSize??Math.max(W.fontSize,12),oe=(0,m.X1)(H,q).width+C*2;return b(_)?(K?.valueSize?ne=K.valueSize*D:ne=Math.min(Math.max(w*.1,p),h),se=G,z===f.M8.Hidden&&(ne=0,se=0),X=w-(W.height+ne),Y=G,re=G,ge=w-W.height):(z===f.M8.Hidden?(ne=0,se=0):(ne=w-W.height,se=Math.max(Math.min(G*.2,s),oe)),X=w-W.height,Y=G-se-W.width,W.placement==="above"?(re=G,ge=w-W.height):(re=G-W.width,ge=w)),{valueWidth:se,valueHeight:ne,maxBarWidth:Y,maxBarHeight:X,wrapperHeight:ge,wrapperWidth:re}}function I(N,w,G){if(N===null)return{background:c.R,border:c.R};const _=G?G(N).color:null;return _?w===null||isNaN(w.numeric)||N!==null&&N>w.numeric?{background:(0,i.Z)(_).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,i.Z)(_).setAlpha(.95).toRgbString(),backgroundShade:(0,i.Z)(_).setAlpha(.55).toRgbString(),border:(0,i.Z)(_).setAlpha(.9).toRgbString(),isLit:!0}:{background:c.R,border:c.R}}function M(N,w,G){const _=Math.min((N-w)/(G-w),1);return isNaN(_)?0:_}function x(N){const{displayMode:w,field:G,value:_,alignmentFactors:K,orientation:k,theme:z,text:W}=N,{valueWidth:Z,valueHeight:H,maxBarHeight:X,maxBarWidth:Y}=R(N),ne=G.min??r.Hx,se=G.max??r.Z3,re=M(_.numeric,ne,se),ge=S(N),q=_.color??c.R,oe=U(K||_,ge,Z,H,k,W),fe=w==="basic",ve={display:"flex",flexGrow:1},pe={borderRadius:z.shape.radius.default,position:"relative",zIndex:1},Me={background:z.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:z.shape.radius.default,position:"relative"};if(b(k)){const Pe=Math.max(re*X,1);ve.flexDirection="column",ve.justifyContent="flex-end",pe.transition="height 1s",pe.height=`${Pe}px`,pe.width=`${Y}px`,Me.bottom="-3px",Me.width=`${Z}px`,fe?(pe.background=`${(0,i.Z)(q).setAlpha(.35).toRgbString()}`,pe.borderTop=`2px solid ${q}`):pe.background=L(N,X)}else{const Pe=Math.max(re*Y,1);ve.flexDirection="row-reverse",ve.justifyContent="flex-end",ve.alignItems="stretch",pe.transition="width 1s",pe.height=`${X}px`,pe.width=`${Pe}px`,Me.left="-3px",Me.height=`${H}px`,fe?(pe.background=`${(0,i.Z)(q).setAlpha(.35).toRgbString()}`,pe.borderRight=`2px solid ${q}`):pe.background=L(N,Y)}return{wrapper:ve,bar:pe,value:oe,emptyBar:Me}}function L(N,w){const{field:G,value:_,orientation:K,theme:k}=N,z=b(K)?"0deg":"90deg",W=G.min,Z=G.max;let H="",X=0,Y=(0,l.QY)(G.color?.mode);if(Y.id===c.S.Thresholds){const ne=G.thresholds;for(let se=0;se<ne.steps.length;se++){const re=ne.steps[se],ge=N.theme.visualization.getColorByName(re.color),q=ne.mode===g.H.Percentage?re.value/100:M(re.value,W,Z),me=q*w,oe=Math.round(me-(me-X)/2),fe=ne.mode===g.H.Percentage?W+(Z-W)*q:re.value;if(H==="")H=`linear-gradient(${z}, ${ge}, ${ge}`;else{if(_.numeric<fe)break;X=me,H+=` ${oe}px, ${ge}`}}return H+")"}if(Y.isContinuous&&Y.getColors){const ne=Y.getColors(k);for(let se=0;se<ne.length;se++){const re=ne[se];if(H==="")H=`linear-gradient(${z}, ${re} 0px`;else{const q=se/(ne.length-1)*w;H+=`, ${re} ${q}px`}}return H+")"}return _.color??c.R}function S(N){if(N.valueDisplayMode==="text")return N.theme.colors.text.primary;const{value:w}=N;return w.color?w.color:c.R}function U(N,w,G,_,K,k){const z={color:w,height:`${_}px`,width:`${G}px`,display:"flex",alignItems:"center",lineHeight:D};let W=G;const Z=(0,u.zc)(N);return b(K)?(z.fontSize=k?.valueSize??(0,m.MX)(Z,W,_,D),z.justifyContent="center"):(z.fontSize=k?.valueSize??(0,m.MX)(Z,W-C*2,_,D),z.justifyContent="flex-end",z.paddingLeft=`${C}px`,z.paddingRight=`${C}px`,W-=C),z}},39543:(Q,A,e)=>{"use strict";e.d(A,{w6:()=>S,pc:()=>I,IG:()=>M,ap:()=>x,jG:()=>L});var n=e(76932),a=e(31733),i=e(51343),r=e(60850),o=e(37479),g=e(85666),u=e(86850),c=e(71199),l=e(63956),d=e(90854),f=e(64837),m=e(49311);const v=({percentChange:U,styles:N})=>{const w=U&&(U>0?"arrow-up":U<0?"arrow-down":void 0);return a.createElement("div",{style:N.containerStyles},w&&a.createElement(m.J,{name:w,height:N.iconSize,width:N.iconSize,viewBox:"6 6 12 12"}),E(U))},E=U=>U?.toLocaleString(void 0,{style:"percent",maximumSignificantDigits:3})??"",p=1.2,h=30,s=500;class y{constructor(N){this.props=N;const{width:w,height:G,value:_,text:K}=N;this.valueColor=_.color??"gray",this.panelPadding=G>100?12:8,this.textValues=R(N),this.justifyCenter=O(N.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=w-this.panelPadding*2,this.maxTextHeight=G-this.panelPadding*2,K&&(K.titleSize&&(this.titleFontSize=K.titleSize,this.titleToAlignTo=void 0),K.valueSize&&(this.valueFontSize=K.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const N={fontSize:`${this.titleFontSize}px`,lineHeight:p};return(this.props.colorMode===I.Background||this.props.colorMode===I.BackgroundSolid)&&(N.color=(0,l.bM)(this.valueColor,this.props.theme.isDark)),N}getValueStyles(){const N={fontSize:this.valueFontSize,fontWeight:s,lineHeight:p,position:"relative",zIndex:1};switch(this.justifyCenter&&(N.textAlign="center"),this.props.colorMode){case I.Value:N.color=this.valueColor;break;case I.Background:case I.BackgroundSolid:N.color=(0,l.bM)(this.valueColor,this.props.theme.isDark);break;case I.None:N.color=this.props.theme.colors.text.primary;break}return N}getPercentChangeStyles(N){const G=this.getValueAndTitleContainerStyles(),_=Math.max(this.valueFontSize/2.5,12);let K=Math.max(this.valueFontSize/3,10);const k=N>0?this.props.theme.visualization.getColorByName("green"):this.props.theme.visualization.getColorByName("red"),z={fontSize:_,fontWeight:s,lineHeight:p,position:"relative",display:"flex",alignItems:"center",gap:Math.max(_/3,4),zIndex:1,color:k};switch(this.justifyCenter&&(z.textAlign="center"),G.flexDirection==="column"&&_>12&&(z.marginTop=-(_/4)),G.flexDirection==="row"&&(z.alignItems="baseline",z.lineHeight=p*2.5),this.props.colorMode){case I.Background:case I.BackgroundSolid:z.color=(0,l.bM)(this.valueColor,this.props.theme.isDark);break}return this.props.textMode===L.None&&(z.fontSize=(0,d.MX)(E(N),this.maxTextWidth*.8,this.maxTextHeight*.8,p,void 0,s),K=z.fontSize*.8),{containerStyles:z,iconSize:K}}getValueAndTitleContainerStyles(){const N={display:"flex",flexWrap:"wrap"};return this.justifyCenter&&(N.alignItems="center",N.justifyContent="center",N.flexGrow=1,N.gap="0.75ch"),N}getPanelStyles(){const{width:N,height:w,theme:G,colorMode:_,textMode:K}=this.props,k={width:`${N}px`,height:`${w}px`,padding:`${K===L.None?2:this.panelPadding}px`,borderRadius:G.shape.radius.default,position:"relative",display:"flex"},z=G.isDark?1:-.7;switch(_){case I.Background:const W=(0,o.Z)(this.valueColor).darken(15*z).spin(8).toRgbString(),Z=(0,o.Z)(this.valueColor).darken(5*z).spin(-8).toRgbString();k.background=`linear-gradient(120deg, ${W}, ${Z})`;break;case I.BackgroundSolid:k.background=(0,o.Z)(this.valueColor).toString();break;case I.Value:k.background="transparent";break}return this.justifyCenter&&(k.alignItems="center",k.flexDirection="row"),k}renderChart(){const{sparkline:N,colorMode:w}=this.props;if(!N||N.y?.type!==g.fS.number)return null;let G,_;switch(w){case I.Background:case I.BackgroundSolid:G="rgba(255,255,255,0.4)",_=(0,o.Z)(this.valueColor).brighten(40).toRgbString();break;case I.None:case I.Value:default:_=this.valueColor,G=(0,o.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const K={custom:{drawStyle:c.l8.Line,lineWidth:1,fillColor:G,lineColor:_}};return a.createElement("div",{style:this.getChartStyles()},a.createElement(f.b,{height:this.chartHeight,width:this.chartWidth,sparkline:N,config:K,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class D extends y{constructor(N){super(N);const w=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*w,this.maxTextHeight,p,void 0,s)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,p,h),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="row",N.alignItems="center",N.flexGrow=1,this.justifyCenter||(N.justifyContent="space-between"),N}renderChart(){return null}getPanelStyles(){const N=super.getPanelStyles();return N.alignItems="center",N}}class C extends y{constructor(N){super(N);const{width:w,height:G}=N,_=.5,K=.6,k=1-K,z=.4;this.chartWidth=w,this.chartHeight=G*_,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*K,this.maxTextHeight*z,p,h)),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*k,this.maxTextHeight*_,p,void 0,s))}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="row",N.flexGrow=1,this.justifyCenter||(N.justifyContent="space-between"),N}getPanelStyles(){const N=super.getPanelStyles();return N.flexDirection="row",N.justifyContent="space-between",N}}class P extends y{constructor(N){super(N);const{width:w,height:G}=N,_=.15,K=.25;let k=0;this.chartHeight=G*K,this.chartWidth=w,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,G*_,p,h),k=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-k,p,void 0,s)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=G-this.titleFontSize*p-this.valueFontSize*p}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="column",N.justifyContent="center",N}getPanelStyles(){const N=super.getPanelStyles();return N.flexDirection="column",N}}class b extends y{constructor(N){super(N);const{height:w}=N,G=.15;let _=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,w*G,p,h),_=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-_,p,void 0,s)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="column",N.flexGrow=1,N}renderChart(){return null}getPanelStyles(){const N=super.getPanelStyles();return N.alignItems="center",N}}function T(U){const{width:N,height:w,sparkline:G}=U;return N/w>2.5&&!U.disableWideLayout?w>50&&G&&G.y.values.length>1?new C(U):new D(U):w>100&&G&&G.y.values.length>1?new P(U):new b(U)}function O(U,N){return U===x.Center?!0:(N??"").length===0}function R(U){const{value:N,alignmentFactors:w,count:G}=U;let{textMode:_}=U;const K=w?w.title:N.title,k=(0,u.zc)(w||N);switch(_===L.Auto&&(G??1)===1&&(_=L.Value),_){case L.Name:return{...N,title:void 0,prefix:void 0,suffix:void 0,text:N.title||"",titleToAlignTo:void 0,valueToAlignTo:K??"",tooltip:(0,u.zc)(N)};case L.Value:return{...N,title:void 0,titleToAlignTo:void 0,valueToAlignTo:k,tooltip:N.title};case L.None:return{numeric:N.numeric,color:N.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${N.title}
Value: ${(0,u.zc)(N)}`};case L.ValueAndName:default:return{...N,titleToAlignTo:K,valueToAlignTo:k}}}var I=(U=>(U.Background="background",U.BackgroundSolid="background_solid",U.None="none",U.Value="value",U))(I||{}),M=(U=>(U.None="none",U.Line="line",U.Area="area",U))(M||{}),x=(U=>(U.Auto="auto",U.Center="center",U))(x||{}),L=(U=>(U.Auto="auto",U.Value="value",U.ValueAndName="value_and_name",U.Name="name",U.None="none",U))(L||{});class S extends a.PureComponent{render(){const{onClick:N,className:w,hasLinks:G,theme:_}=this.props,K=T(this.props),k=K.getPanelStyles(),z=K.getValueAndTitleContainerStyles(),W=K.getValueStyles(),Z=K.getTitleStyles(),H=K.textValues,X=this.props.value.percentChange,Y=X!=null&&!Number.isNaN(X),ne=G?void 0:H.tooltip;return N?a.createElement("button",{type:"button",className:(0,n.cx)((0,i.gN)(_),w),style:k,onClick:N,title:ne},a.createElement("div",{style:z},H.title&&a.createElement("div",{style:Z},H.title),a.createElement(r.W,{value:H,style:W})),K.renderChart()):a.createElement("div",{className:w,style:k,title:ne},a.createElement("div",{style:z},H.title&&a.createElement("div",{style:Z},H.title),a.createElement(r.W,{value:H,style:W}),Y&&a.createElement(v,{percentChange:X,styles:K.getPercentChangeStyles(X)})),K.renderChart())}}S.defaultProps={justifyMode:"auto"}},43794:(Q,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(76932),a=e(31733),i=e(82732),r=e.n(i),o=e(76067),g=e(60089);const u=(0,a.forwardRef)(({name:l,value:d,hidden:f,facets:m,onClick:v,className:E,loading:p,searchTerm:h,active:s,style:y,title:D,highlightParts:C,...P},b)=>{const T=(0,o.l4)(),O=c(T),R=h?[h]:[],I=(0,a.useCallback)(x=>{v&&!f&&v(l,d,x)},[v,l,f,d]);let M=d||l;return m&&(M=`${M} (${m})`),a.createElement("button",{key:M,ref:b,onClick:I,style:y,title:D||M,type:"button",role:"option","aria-selected":!!s,className:(0,n.cx)(O.base,s&&O.active,p&&O.loading,f&&O.hidden,E,v&&!f&&O.hover),...P},C!==void 0?a.createElement(g.H,{text:M,highlightClassName:O.matchHighLight,highlightParts:C}):a.createElement(r(),{textToHighlight:M,searchWords:R,autoEscape:!0,highlightClassName:O.matchHighLight}))});u.displayName="Label";const c=l=>({base:(0,n.css)({display:"inline-block",cursor:"pointer",fontSize:l.typography.size.sm,lineHeight:l.typography.bodySmall.lineHeight,backgroundColor:l.colors.background.secondary,color:l.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:l.spacing(.5),borderRadius:l.shape.radius.default,border:"none",marginRight:l.spacing(1),marginBottom:l.spacing(.5)}),loading:(0,n.css)({fontWeight:l.typography.fontWeightMedium,backgroundColor:l.colors.primary.shade,color:l.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:l.colors.text.primary},"50%":{color:l.colors.text.secondary},"100%":{color:l.colors.text.disabled}}}),active:(0,n.css)({fontWeight:l.typography.fontWeightMedium,backgroundColor:l.colors.primary.main,color:l.colors.primary.contrastText}),matchHighLight:(0,n.css)({background:"inherit",color:l.components.textHighlight.text,backgroundColor:l.components.textHighlight.background}),hidden:(0,n.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,n.css)({["&:hover"]:{opacity:.85,cursor:"pointer"}})})},51343:(Q,A,e)=>{"use strict";e.d(A,{Qj:()=>f,_7:()=>s,c9:()=>p,fW:()=>m,gN:()=>h,zx:()=>d});var n=e(76932),a=e(31733),i=e(76067),r=e(83998),o=e(90119),g=e(49311),u=e(58037);const c=null,l=null,d=a.forwardRef(({variant:y="primary",size:D="md",fill:C="solid",icon:P,fullWidth:b,children:T,className:O,type:R="button",tooltip:I,tooltipPlacement:M,...x},L)=>{const S=(0,i.l4)(),U=m({theme:S,size:D,variant:y,fill:C,fullWidth:b,iconOnly:!T}),N=a.createElement("button",{className:(0,n.cx)(U.button,O),type:R,...x,ref:I?void 0:L},P&&a.createElement(g.J,{name:P,size:D,className:U.icon}),T&&a.createElement("span",{className:U.content},T));return I?a.createElement(u.u,{ref:L,content:I,placement:M},N):N});d.displayName="Button";const f=a.forwardRef(({variant:y="primary",size:D="md",fill:C="solid",icon:P,fullWidth:b,children:T,className:O,onBlur:R,onFocus:I,disabled:M,tooltip:x,tooltipPlacement:L,...S},U)=>{const N=(0,i.l4)(),w=m({theme:N,fullWidth:b,size:D,variant:y,fill:C,iconOnly:!T}),G=(0,n.cx)(w.button,{[(0,n.css)(w.disabled,{pointerEvents:"none"})]:M},O),_=a.createElement("a",{className:G,...S,tabIndex:M?-1:0,"aria-disabled":M,ref:x?void 0:U},P&&a.createElement(g.J,{name:P,size:D,className:w.icon}),T&&a.createElement("span",{className:w.content},T));return x?a.createElement(u.u,{ref:U,content:x,placement:L},_):_});f.displayName="LinkButton";const m=y=>{const{theme:D,variant:C,fill:P="solid",size:b,iconOnly:T,fullWidth:O}=y,{height:R,padding:I,fontSize:M}=(0,o.iL)(b,D),x=p(D,C,P),L=E(D,C,P),S=(0,r.getFocusStyles)(D),U=D.spacing.gridSize*I-1;return{button:(0,n.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:M,fontWeight:D.typography.fontWeightMedium,fontFamily:D.typography.fontFamily,padding:`0 ${U}px`,height:D.spacing(R),lineHeight:`${D.spacing.gridSize*R-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:D.shape.radius.default,"&:focus":S,"&:focus-visible":S,"&:focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(D),...O&&{flexGrow:1,justifyContent:"center"},...x,":disabled":L,"&[disabled]":L}),disabled:(0,n.css)(L),img:(0,n.css)({width:"16px",height:"16px",margin:D.spacing(0,1,0,.5)}),icon:T?(0,n.css)({marginRight:D.spacing(-I/2),marginLeft:D.spacing(-I/2)}):(0,n.css)({marginRight:D.spacing(I/2)}),content:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function v(y,D,C){let P=D.border,b="transparent",T="transparent";return D.name==="secondary"&&(b=D.border,T=y.colors.emphasize(D.border,.25),P=y.colors.border.strong),C==="outline"?{background:"transparent",color:D.text,border:`1px solid ${P}`,transition:y.transitions.create(["background-color","border-color","color"],{duration:y.transitions.duration.short}),"&:hover":{background:D.transparent,borderColor:y.colors.emphasize(P,.25),color:D.text}}:C==="text"?{background:"transparent",color:D.text,border:"1px solid transparent",transition:y.transitions.create(["background-color","color"],{duration:y.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:D.transparent,textDecoration:"none"}}:{background:D.main,color:D.contrastText,border:`1px solid ${b}`,transition:y.transitions.create(["background-color","box-shadow","border-color","color"],{duration:y.transitions.duration.short}),"&:hover":{background:D.shade,color:D.contrastText,boxShadow:y.shadows.z1,borderColor:T}}}function E(y,D,C){const P={cursor:"not-allowed",boxShadow:"none",color:y.colors.text.disabled,transition:"none"};return C==="text"?{...P,background:"transparent",border:"1px solid transparent"}:C==="outline"?{...P,background:"transparent",border:`1px solid ${y.colors.border.weak}`}:{...P,background:y.colors.action.disabledBackground,border:"1px solid transparent"}}function p(y,D,C){switch(D){case"secondary":return v(y,y.colors.secondary,C);case"destructive":return v(y,y.colors.error,C);case"success":return v(y,y.colors.success,C);case"primary":default:return v(y,y.colors.primary,C)}}const h=y=>(0,n.css)({background:"transparent",color:y.colors.text.primary,border:"none",padding:0}),s=y=>(0,n.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},5460:(Q,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=(0,a.forwardRef)(({className:g,children:u,...c},l)=>{const d=(0,i.wW)(o);return a.createElement("div",{ref:l,className:(0,n.cx)("button-group",d.wrapper,g),...c},u)});r.displayName="ButtonGroup";const o=g=>({wrapper:(0,n.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},5882:(Q,A,e)=>{"use strict";e.d(A,{f:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({className:g,children:u})=>{const c=(0,i.wW)(o);return a.createElement("div",{className:(0,n.cx)(c,g)},u)},o=()=>(0,n.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}})},30091:(Q,A,e)=>{"use strict";e.d(A,{O:()=>c});var n=e(76932),a=e(81898),i=e(31733),r=e(76067),o=e(51343),g=e(18926),u=e(49311);const c=d=>{const{onChange:f,className:m,loadData:v,icon:E,buttonProps:p,hideDownIcon:h,variant:s,disabled:y,...D}=d,C=(0,r.wW)(l);let P=d.children;return h||(P=[d.children,i.createElement(u.J,{key:"down-icon",name:"angle-down",className:C.icons.right})]),i.createElement(a.Z,{onChange:(0,g.K)(f),loadData:(0,g.p)(v),dropdownClassName:C.popup,...D,expandIcon:null},i.createElement(o.zx,{icon:E,disabled:y,variant:s,...p??{}},P))};c.displayName="ButtonCascader";const l=d=>({popup:(0,n.css)({label:"popup",zIndex:d.zIndex.dropdown}),icons:{right:(0,n.css)({margin:"1px 0 0 4px"}),left:(0,n.css)({margin:"-1px 4px 0 0"})}})},53567:(Q,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({message:g,callToActionElement:u,footer:c,className:l})=>{const d=(0,i.wW)(o);return a.createElement("div",{className:(0,n.cx)([d.wrapper,l])},g&&a.createElement("div",{className:d.message},g),u,c&&a.createElement("div",{className:d.footer},c))},o=g=>({wrapper:(0,n.css)({label:"call-to-action-card",background:g.colors.background.secondary,borderRadius:g.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:g.spacing(3),[g.breakpoints.down("sm")]:{padding:g.spacing(3,1)}}),message:(0,n.css)({marginBottom:g.spacing(3),fontStyle:"italic"}),footer:(0,n.css)({marginTop:g.spacing(3)})})},96305:(Q,A,e)=>{"use strict";e.d(A,{L:()=>b,Z:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(83998),o=e(24870);const g=a.createContext(null),u=({disabled:T,href:O,onClick:R,children:I,isSelected:M,className:x,...L})=>{const S=(0,a.useMemo)(()=>a.Children.toArray(I).some(G=>a.isValidElement(G)&&G.type===c),[I]),U=T||!R&&!O,N=R&&!T?R:void 0,w=(0,i.wW)(o.$,T,U,M);return a.createElement(o._,{disableEvents:T,disableHover:U,isSelected:M,className:(0,n.cx)(w.container,x),...L},a.createElement(g.Provider,{value:{href:O,onClick:N,disabled:T,isSelected:M}},!S&&a.createElement(c,null),I))},c=({children:T,className:O,"aria-label":R})=>{const I=(0,a.useContext)(g),M=(0,i.wW)(l),{href:x,onClick:L,isSelected:S}=I??{href:void 0,onClick:void 0,isSelected:void 0};return a.createElement("h2",{className:(0,n.cx)(M.heading,O)},x?a.createElement("a",{href:x,className:M.linkHack,"aria-label":R,onClick:L},T):L?a.createElement("button",{onClick:L,className:M.linkHack,"aria-label":R,type:"button"},T):a.createElement(a.Fragment,null,T),S!==void 0&&a.createElement("input",{"aria-label":"option",type:"radio",checked:S,readOnly:!0}))};c.displayName="Heading";const l=T=>({heading:(0,n.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:T.typography.size.md,letterSpacing:"inherit",lineHeight:T.typography.body.lineHeight,color:T.colors.text.primary,fontWeight:T.typography.fontWeightMedium,"& input[readonly]":{cursor:"inherit"}}),linkHack:(0,n.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:T.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,r.getFocusStyles)(T),zIndex:1}}})}),d=({children:T,className:O})=>{const R=(0,i.wW)(f);return a.createElement("div",{className:(0,n.cx)(R.tagList,O)},T)};d.displayName="Tags";const f=T=>({tagList:(0,n.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),m=({children:T,className:O})=>{const R=(0,i.wW)(v);return a.createElement("p",{className:(0,n.cx)(R.description,O)},T)};m.displayName="Description";const v=T=>({description:(0,n.css)({width:"100%",gridArea:"Description",margin:T.spacing(1,0,0),color:T.colors.text.secondary,lineHeight:T.typography.body.lineHeight})}),E=({children:T,align:O="start",className:R})=>{const I=(0,i.wW)(p);return a.createElement("div",{className:(0,n.cx)(I.media,R,(0,n.css)({alignSelf:O}))},T)};E.displayName="Figure";const p=T=>({media:(0,n.css)({position:"relative",gridArea:"Figure",marginRight:T.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),h=(0,a.memo)(({children:T,className:O,separator:R="|"})=>{const I=(0,i.wW)(s);let M=T;const x=a.Children.toArray(T).filter(Boolean);return x.length?(M=x.map((L,S)=>a.createElement("div",{key:`element_${S}`,className:I.metadataItem},L)),x.length>1&&R&&(M=x.reduce((L,S,U)=>[L,a.createElement("span",{key:`separator_${U}`,className:I.separator},R),S])),a.createElement("div",{className:(0,n.cx)(I.metadata,O)},M)):null});h.displayName="Meta";const s=T=>({metadata:(0,n.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:T.typography.size.sm,color:T.colors.text.secondary,margin:T.spacing(.5,0,0),lineHeight:T.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,n.css)({zIndex:0}),separator:(0,n.css)({margin:`0 ${T.spacing(1)}`})}),y=({children:T,disabled:O,variant:R,className:I})=>{const M=(0,i.wW)(D),L=(0,a.useContext)(g)?.disabled||O,S=R==="primary"?M.actions:M.secondaryActions;return a.createElement("div",{className:(0,n.cx)(S,I)},a.Children.map(T,U=>a.isValidElement(U)?(0,a.cloneElement)(U,{disabled:L,...U.props}):null))},D=T=>({actions:(0,n.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Actions",marginTop:T.spacing(2)}),secondaryActions:(0,n.css)({alignSelf:"center",color:T.colors.text.secondary,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Secondary",marginTop:T.spacing(2)})}),C=({children:T,disabled:O,className:R})=>a.createElement(y,{variant:"primary",disabled:O,className:R},T);C.displayName="Actions";const P=({children:T,disabled:O,className:R})=>a.createElement(y,{variant:"secondary",disabled:O,className:R},T);P.displayName="SecondaryActions";const b=T=>({inner:(0,n.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...l(T),...s(T),...v(T),...p(T),...D(T),...f(T)});u.Heading=c,u.Tags=d,u.Figure=E,u.Meta=h,u.Actions=C,u.SecondaryActions=P,u.Description=m},24870:(Q,A,e)=>{"use strict";e.d(A,{$:()=>c,_:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(83998);const o=({children:l,href:d})=>{const{inner:f}=(0,i.wW)(g);return d?a.createElement("a",{className:f,href:d},l):a.createElement(a.Fragment,null,l)},g=l=>({inner:(0,n.css)({display:"flex",width:"100%",padding:l.spacing(2)})}),u=({children:l,disableEvents:d,disableHover:f,isSelected:m,className:v,href:E,...p})=>{const{oldContainer:h}=(0,i.wW)(c,d,f,m);return a.createElement("div",{...p,className:(0,n.cx)(h,v)},a.createElement(o,{href:E},l))},c=(l,d=!1,f=!1,m)=>{const v=m!==void 0;return{container:(0,n.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:l.spacing(2),background:l.colors.background.secondary,borderRadius:l.shape.radius.default,marginBottom:"8px",pointerEvents:d?"none":"auto",transition:l.transitions.create(["background-color","box-shadow","border-color","color"],{duration:l.transitions.duration.short}),...!f&&{"&:hover":{background:l.colors.emphasize(l.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(l)},...v&&{cursor:"pointer"},...m&&{outline:`solid 2px ${l.colors.primary.border}`}}),oldContainer:(0,n.css)({display:"flex",width:"100%",background:l.colors.background.secondary,borderRadius:l.shape.radius.default,position:"relative",pointerEvents:d?"none":"auto",marginBottom:l.spacing(1),transition:l.transitions.create(["background-color","box-shadow","border-color","color"],{duration:l.transitions.duration.short}),...!f&&{"&:hover":{background:l.colors.emphasize(l.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(l)}})}}},3166:(Q,A,e)=>{"use strict";e.d(A,{v:()=>m});var n=e(76932),a=e(28454),i=e.n(a),r=e(81898),o=e(31733),g=e(49311),u=e(64516),c=e(38834),l=e(18926);const d=(0,n.css)({"&:focus":{outline:"none"}}),f=" / ";class m extends o.PureComponent{constructor(E){super(E),this.flattenOptions=(y,D=[])=>{let C=[];for(const P of y){const b=[...D];b.push(P),P.items?C=[...C,...this.flattenOptions(P.items,b)]:C.push({singleLabel:b[b.length-1].label,label:b.map(T=>T.label).join(this.props.separator||f),value:b.map(T=>T.value)})}return C},this.getSearchableOptions=i()(y=>this.flattenOptions(y)),this.onChange=(y,D)=>{const C=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?D.map(P=>P.label).join(this.props.separator||f):D[D.length-1].label;this.setState({rcValue:y,focusCascade:!0,activeLabel:C}),this.props.onSelect(D[D.length-1].value)},this.onSelect=y=>{const D=y.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||"",rcValue:D,isSearching:!1}),this.props.onSelect(D[D.length-1])},this.onCreateOption=y=>{this.setState({activeLabel:y,rcValue:[],isSearching:!1}),this.props.onSelect(y)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=y=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(y.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=y=>{y===""&&this.setState({isSearching:!1})};const p=this.getSearchableOptions(E.options),{rcValue:h,activeLabel:s}=this.setInitialValue(p,E.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:h,activeLabel:s}}setInitialValue(E,p){if(!p)return{rcValue:[],activeLabel:""};for(const h of E){const s=h.value||[];if(s[s.length-1]===p)return{rcValue:s,activeLabel:this.props.displayAllSelectedLevels?h.label:h.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:p}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:E,formatCreateLabel:p,placeholder:h,width:s,changeOnSelect:y,options:D}=this.props,{focusCascade:C,isSearching:P,rcValue:b,activeLabel:T}=this.state,O=this.getSearchableOptions(D);return o.createElement("div",null,P?o.createElement(c.Ph,{allowCustomValue:E,placeholder:h,autoFocus:!C,onChange:this.onSelect,onBlur:this.onBlur,options:O,onCreateOption:this.onCreateOption,formatCreateLabel:p,width:s,onInputChange:this.onSelectInputChange}):o.createElement(r.Z,{onChange:(0,l.K)(this.onChange),options:D,changeOnSelect:y,value:b.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},o.createElement("div",{className:d},o.createElement(u.I,{autoFocus:this.props.autoFocus,width:s,placeholder:h,onBlur:this.onBlurCascade,value:T,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:C?o.createElement(g.J,{name:"angle-up"}):o.createElement(g.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}m.defaultProps={changeOnSelect:!0}},18926:(Q,A,e)=>{"use strict";e.d(A,{K:()=>n,p:()=>a});const n=o=>(g,u)=>{o&&o(g.map(c=>String(c)),i(u))},a=o=>g=>{o&&o(i(g))},i=o=>o.map(r),r=o=>({value:o.value??"",label:o.label})},11550:(Q,A,e)=>{"use strict";e.d(A,{L:()=>a});var n=e(31733);class a extends n.PureComponent{constructor(){super(...arguments),this.myRef=(0,n.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=r=>{const o=this.myRef.current;(!o||r.target instanceof Node&&!o.contains(r.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return n.createElement("div",{ref:this.myRef},this.props.children)}}a.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}},5334:(Q,A,e)=>{"use strict";e.d(A,{m:()=>l});var n=e(76932),a=e(31733),i=e(82926),r=e(76067),o=e(51343),g=e(49311),u=e(14067);const c=2*1e3;function l({onClipboardCopy:m,onClipboardError:v,children:E,getText:p,icon:h,variant:s,...y}){const D=(0,r.wW)(f),[C,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let O;return C&&(O=setTimeout(()=>{P(!1)},c)),()=>{window.clearTimeout(O)}},[C]);const b=(0,a.useRef)(null),T=(0,a.useCallback)(async()=>{const O=p();try{await d(O,b),P(!0),m?.(O)}catch(R){v?.(O,R)}},[p,m,v]);return a.createElement(a.Fragment,null,C&&a.createElement(u.K,{placement:"top",referenceElement:b.current},a.createElement(i.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),a.createElement(o.zx,{onClick:T,icon:h,variant:C?"success":s,"aria-label":C?"Copied":void 0,...y,className:(0,n.cx)(D.button,C&&D.successButton,y.className),ref:b},E,C&&a.createElement("div",{className:D.successOverlay},a.createElement(g.J,{name:"check"}))))}const d=async(m,v)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(m);{const E=document.createElement("textarea");v.current?.appendChild(E),E.value=m,E.focus(),E.select(),document.execCommand("copy"),E.remove()}},f=m=>({button:(0,n.css)({position:"relative"}),successButton:(0,n.css)({"> *":(0,n.css)({visibility:"hidden"})}),successOverlay:(0,n.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},5284:(Q,A,e)=>{"use strict";e.d(A,{s:()=>l});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(76067),g=e(83998),u=e(49311),c=e(89719);const l=({label:f,isOpen:m,onToggle:v,className:E,contentClassName:p,children:h,labelId:s,loading:y=!1,headerDataTestId:D,contentDataTestId:C})=>{const[P,b]=(0,r.useState)(m),T=(0,o.wW)(d),O=M=>{M.target instanceof HTMLElement&&M.target.tagName==="A"||(M.preventDefault(),M.stopPropagation(),v?.(!P),b(!P))},{current:R}=(0,r.useRef)((0,a.uniqueId)()),I=s??`collapse-label-${R}`;return r.createElement(r.Fragment,null,r.createElement("div",{onClick:O,className:(0,n.cx)(T.header,E)},r.createElement("button",{type:"button",id:`collapse-button-${R}`,className:T.button,onClick:O,"aria-expanded":P&&!y,"aria-controls":`collapse-content-${R}`,"aria-labelledby":I},y?r.createElement(c.$,{className:T.spinner}):r.createElement(u.J,{name:P?"angle-up":"angle-down",className:T.icon})),r.createElement("div",{className:T.label,id:`collapse-label-${R}`,"data-testid":D},f)),P&&r.createElement("div",{id:`collapse-content-${R}`,className:(0,n.cx)(T.content,p),"data-testid":C},h))},d=f=>({header:(0,n.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:f.typography.size.lg,padding:`${f.spacing(.5)} 0`,"&:focus-within":(0,g.getFocusStyles)(f)}),button:(0,n.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,n.css)({color:f.colors.text.secondary}),content:(0,n.css)({padding:`${f.spacing(2)} 0`}),spinner:(0,n.css)({display:"flex",alignItems:"center",width:f.spacing(2)}),label:(0,n.css)({display:"flex"})})},27218:(Q,A,e)=>{"use strict";e.d(A,{U:()=>c,y:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(51343),o=e(49311);const g=l=>({collapse:(0,n.css)({label:"collapse",marginBottom:l.spacing(1),backgroundColor:l.colors.background.primary,border:`1px solid ${l.colors.border.weak}`,position:"relative",borderRadius:l.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,n.css)({label:"collapse__body",padding:l.spacing(l.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,n.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,n.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:l.spacing(.5)}),loaderActive:(0,n.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:l.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,n.css)({label:"collapse__header",padding:l.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,n.css)({label:"collapse__header--collapsed",padding:l.spacing(1,2,1,2)}),headerLabel:(0,n.css)({label:"collapse__header-label",fontWeight:l.typography.fontWeightMedium,marginRight:l.spacing(1),fontSize:l.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,n.css)({label:"collapse__icon",margin:l.spacing(.25,1,0,-1)})}),u=({isOpen:l,onToggle:d,...f})=>{const[m,v]=(0,a.useState)(l);return a.createElement(c,{isOpen:m,collapsible:!0,...f,onToggle:()=>{v(!m),d&&d(!m)}})},c=({isOpen:l,label:d,loading:f,collapsible:m,onToggle:v,className:E,children:p})=>{const h=(0,i.wW)(r.gN),s=(0,i.wW)(g),y=()=>{v&&v(!l)},D=(0,n.cx)([s.collapse,E]),C=f?(0,n.cx)([s.loader,s.loaderActive]):(0,n.cx)([s.loader]),P=m?(0,n.cx)([s.header]):(0,n.cx)([s.headerCollapsed]);return a.createElement("div",{className:D},a.createElement("button",{type:"button",className:(0,n.cx)(h,P),onClick:y},m&&a.createElement(o.J,{className:s.icon,name:l?"angle-down":"angle-right"}),a.createElement("div",{className:(0,n.cx)([s.headerLabel])},d)),l&&a.createElement("div",{className:(0,n.cx)([s.collapseBody])},a.createElement("div",{className:C}),a.createElement("div",{className:s.bodyContentWrapper},p)))};c.displayName="Collapse"},10012:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>l});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(37479),g=e(76067),u=e(64516);const c=(0,r.forwardRef)(({color:m,onChange:v,isClearable:E=!1,onClick:p,onBlur:h,disabled:s,buttonAriaLabel:y,...D},C)=>{const[P,b]=(0,r.useState)(m),[T,O]=(0,r.useState)(m),R=(0,r.useMemo)(()=>(0,a.debounce)(v,100),[]);(0,r.useEffect)(()=>{const x=(0,o.Z)(m);x.isValid()&&m!==T&&(b(x.toString()),O(m))},[m,T]);const I=x=>{const{value:L}=x.currentTarget;if(b(L),L===""&&E){R(L);return}const S=(0,o.Z)(L);S.isValid()&&R(S.toString())},M=x=>{(0,o.Z)(P).isValid()||b(m),h?.(x)};return r.createElement(u.I,{...D,value:P,onChange:I,disabled:s,onClick:p,onBlur:M,addonBefore:r.createElement(d,{onClick:p,ariaLabel:y,disabled:s,color:m}),ref:C})});c.displayName="ColorInput";const l=c,d=({color:m,onClick:v,disabled:E,ariaLabel:p})=>{const h=(0,g.wW)(f);return r.createElement("button",{type:"button",onClick:v,"aria-label":p,disabled:E||!v,className:(0,n.cx)(h,(0,n.css)({backgroundColor:m}))})},f=m=>(0,n.css)({height:"100%",width:`${m.spacing.gridSize*4}px`,borderRadius:`${m.shape.radius.default} 0 0 ${m.shape.radius.default}`,border:`1px solid ${m.colors.border.medium}`})},39236:(Q,A,e)=>{"use strict";e.d(A,{sp:()=>v,zH:()=>m});var n=e(76932),a=e(31733),i=e(76067),r=e(33227),o=e(71509),g=e(20425),u=e(72336),c=e(36201),l=e(90065),d=e(88937);const f=(p,h="ColorPicker")=>{var s;return s=class extends a.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,a.createRef)()}render(){const{theme:y,children:D,onChange:C,color:P}=this.props,b=E(y),T=a.createElement(p,{...this.props,children:null,onChange:C});return a.createElement(u.D,{content:T,hideAfter:300},(O,R,I)=>a.createElement(a.Fragment,null,this.pickerTriggerRef.current&&a.createElement(g.J,{...I,referenceElement:this.pickerTriggerRef.current,wrapperClassName:b.colorPicker,onMouseLeave:R,onMouseEnter:O,onKeyDown:M=>(0,o.i)(M,R)}),D?D({ref:this.pickerTriggerRef,showColorPicker:O,hideColorPicker:R}):a.createElement(l.b,{ref:this.pickerTriggerRef,onClick:O,onMouseLeave:R,color:y.visualization.getColorByName(P||"#000000"),"aria-label":P})))}},s.displayName=h,s},m=(0,i.HE)(f(c.h,"ColorPicker")),v=(0,i.HE)(f(d.j,"SeriesColorPicker")),E=(0,r.B)(p=>({colorPicker:(0,n.css)({position:"absolute",zIndex:p.zIndex.tooltip,color:p.colors.text.primary,maxWidth:"400px",fontSize:p.typography.size.sm,padding:"15px !important",'& [data-placement^="top"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="bottom"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="left"]':{paddingTop:"0 !important"},'& [data-placement^="right"]':{paddingTop:"0 !important"}})}))},62513:(Q,A,e)=>{"use strict";e.d(A,{T:()=>d});var n=e(76932),a=e(31733),i=e(9271),r=e(21770),o=e(77081),g=e(76067),u=e(11550),c=e(10012),l=e(68572);const d=(0,a.forwardRef)(({value:m="",onChange:v,returnColorAs:E="rgb",...p},h)=>{const[s,y]=(0,a.useState)(m),[D,C]=(0,a.useState)(!1),P=(0,g.l4)(),b=(0,g.wW)(f),T=(0,g.wW)(l.W);return(0,r.Z)(O=>{if(O===m)return;if(!O){v("");return}const R=P.visualization.getColorByName(O);v(E==="rgb"?o.asRgbString(R):o.asHexString(R))},500,[s]),a.createElement(u.L,{onClick:()=>C(!1)},a.createElement("div",{className:b.wrapper},D&&!p.disabled&&a.createElement(i.ef,{"data-testid":"color-popover",color:s,onChange:y,className:(0,n.cx)(T.root,b.picker)}),a.createElement(c.Z,{...p,theme:P,color:s,onChange:y,buttonAriaLabel:"Open color picker",onClick:()=>C(!0),onBlur:()=>C(!1),ref:h,isClearable:!0})))});d.displayName="ColorPickerInput";const f=m=>({wrapper:(0,n.css)({position:"relative"}),picker:(0,n.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,n.css)({position:"absolute"})})},36201:(Q,A,e)=>{"use strict";e.d(A,{h:()=>s});var n=e(76932),a=e(57353),i=e(31733),r=e(77081),o=e(76067),g=e(33227),u=e(90065),c=e(69781);function l(D,C){const P=new Array(D.length);for(let b=0;b<D.length;b++){const T=D.length-1-b;P[b]=C(D[T],T,D)}return P}const f=({hue:D,selectedColor:C,onColorSelect:P,...b})=>{const T=(0,c.upperFirst)(D.name),O=(0,o.wW)(m);return i.createElement("div",{className:O.colorRow},i.createElement("div",{className:O.colorLabel},T),i.createElement("div",{...b,className:O.swatchRow},l(D.shades,R=>i.createElement(u.b,{key:R.name,"aria-label":R.name,variant:R.primary?u.$.Large:u.$.Small,isSelected:R.name===C,color:R.color,onClick:()=>P(R.name)}))))},m=D=>({colorRow:(0,n.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:D.spacing(2),padding:D.spacing(.5,0),"&:hover":{background:D.colors.background.secondary}}),colorLabel:(0,n.css)({paddingLeft:D.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,n.css)({display:"flex",gap:D.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),v=({color:D,onChange:C})=>{const P=(0,o.l4)(),b=(0,o.wW)(E),T=[];for(const O of P.visualization.hues)T.push(i.createElement(f,{key:O.name,selectedColor:D,hue:O,onColorSelect:C}));return i.createElement(i.Fragment,null,i.createElement("div",{className:b.swatches},T),i.createElement("div",{className:b.extraColors},i.createElement(u.b,{isSelected:D==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>C("transparent")}),i.createElement(u.b,{isSelected:D==="text",color:P.colors.text.primary,label:"Text color",onClick:()=>C("text")})))},E=D=>({container:(0,n.css)({display:"flex",flexDirection:"column"}),extraColors:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:D.spacing(1),padding:D.spacing(1,0)}),swatches:(0,n.css)({display:"grid",flexGrow:1})});var p=e(68572);class h extends i.Component{constructor(C){super(C),this.getTabClassName=P=>{const{activePicker:b}=this.state;return`ColorPickerPopover__tab ${b===P&&"ColorPickerPopover__tab--active"}`},this.handleChange=P=>{const{onChange:b,enableNamedColors:T,theme:O}=this.props;if(T)return b(P);b(r.asHexString(O.visualization.getColorByName(P)))},this.onTabChange=P=>()=>this.setState({activePicker:P}),this.renderPicker=()=>{const{activePicker:P}=this.state,{color:b}=this.props;switch(P){case"spectrum":return i.createElement(p.Z,{color:b,onChange:this.handleChange});case"palette":return i.createElement(v,{color:b,onChange:this.handleChange});default:return this.renderCustomPicker(P)}},this.renderCustomPicker=P=>{const{customPickers:b,color:T,theme:O}=this.props;return b?i.createElement(b[P].tabComponent,{color:T,theme:O,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:P}=this.props;return P?i.createElement(i.Fragment,null,Object.keys(P).map(b=>i.createElement("button",{className:this.getTabClassName(b),onClick:this.onTabChange(b),key:b,type:"button"},P[b].name))):null},this.state={activePicker:"palette"}}render(){const{theme:C}=this.props,P=y(C);return i.createElement(a.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},i.createElement("div",{tabIndex:-1,className:P.colorPickerPopover},i.createElement("div",{className:P.colorPickerPopoverTabs},i.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),i.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),i.createElement("div",{className:P.colorPickerPopoverContent},this.renderPicker())))}}const s=(0,o.HE)(h);s.displayName="ColorPickerPopover";const y=(0,g.B)(D=>({colorPickerPopover:(0,n.css)({borderRadius:D.shape.radius.default,boxShadow:D.shadows.z3,background:D.colors.background.primary,border:`1px solid ${D.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:D.spacing(1,0),background:D.colors.background.secondary,color:D.colors.text.secondary,fontSize:D.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:D.colors.text.primary,fontWeight:D.typography.fontWeightMedium,background:D.colors.background.primary}}),colorPickerPopoverContent:(0,n.css)({width:"246px",fontSize:D.typography.bodySmall.fontSize,minHeight:"184px",padding:D.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,n.css)({display:"flex",width:"100%",borderRadius:`${D.shape.radius.default} ${D.shape.radius.default} 0 0`})}))},90065:(Q,A,e)=>{"use strict";e.d(A,{$:()=>u,b:()=>c});var n=e(76932),a=e(57353),i=e(31733),r=e(37479),o=e(21568),g=e(76067),u=(d=>(d.Small="small",d.Large="large",d))(u||{});const c=i.forwardRef(({color:d,label:f,variant:m="small",isSelected:v,"aria-label":E,...p},h)=>{const s=(0,g.l4)(),{isFocusVisible:y,focusProps:D}=(0,a.Fx)(),C=l(s,m,d,y,v),P=!!f,b=E||f;return i.createElement("div",{ref:h,className:C.wrapper,"data-testid":o.wl.components.ColorSwatch.name,...p},P&&i.createElement("span",{className:C.label},f),i.createElement("button",{className:C.swatch,...D,"aria-label":b?`${b} color`:"Pick a color",type:"button"}))}),l=(d,f,m,v,E)=>{const p=(0,r.Z)(m),s=f==="small"?"16px":"32px";let y="none";return p.getAlpha()<.1&&(y=`2px solid ${d.colors.border.medium}`),{wrapper:(0,n.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,n.css)({marginRight:d.spacing(1)}),swatch:(0,n.css)({width:s,height:s,background:`${m}`,border:y,borderRadius:d.shape.radius.circle,outlineOffset:"1px",outline:v?`2px solid  ${d.colors.primary.main}`:"none",boxShadow:E?`inset 0 0 0 2px ${m}, inset 0 0 0 4px ${d.colors.getContrastText(m)}`:"none",transition:d.transitions.create(["transform"],{duration:d.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};c.displayName="ColorSwatch"},88937:(Q,A,e)=>{"use strict";e.d(A,{j:()=>g,q:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(40782),o=e(36201);const g=l=>{const d=(0,i.wW)(c),{yaxis:f,onToggleAxis:m,color:v,...E}=l,p=m?{yaxis:{name:"Y-Axis",tabComponent(){return a.createElement(r.r,{key:"yaxisSwitch",label:"Use right y-axis",className:d.colorPickerAxisSwitch,labelClass:d.colorPickerAxisSwitchLabel,checked:f===2,onChange:()=>{m&&m()}})}}}:void 0;return a.createElement(o.h,{...E,color:v||"#000000",customPickers:p})},u=(0,i.HE)(g),c=()=>({colorPickerAxisSwitch:(0,n.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,n.css)({display:"flex",flexGrow:1})})},68572:(Q,A,e)=>{"use strict";e.d(A,{W:()=>d,Z:()=>f});var n=e(76932),a=e(31733),i=e(9271),r=e(21770),o=e(37479),g=e(77081),u=e(76067),c=e(10012);const l=({color:m,onChange:v})=>{const[E,p]=(0,a.useState)(m);(0,r.Z)(D=>{v(g.asHexString(h.visualization.getColorByName(D)))},500,[E]);const h=(0,u.l4)(),s=(0,u.wW)(d),y=(0,a.useMemo)(()=>E.startsWith("rgba")?E:(0,o.Z)(h.visualization.getColorByName(m)).toRgbString(),[E,h,m]);return a.createElement("div",{className:s.wrapper},a.createElement(i.ef,{className:s.root,color:y,onChange:p}),a.createElement(c.Z,{theme:h,color:y,onChange:p,className:s.colorInput}))},d=m=>({wrapper:(0,n.css)({flexGrow:1}),root:(0,n.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${m.shape.radius.default} ${m.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${m.shape.radius.default} ${m.shape.radius.default}`},"&__alpha, &__hue":{height:m.spacing(2),position:"relative"},"&__pointer":{height:m.spacing(2),width:m.spacing(2)}}}),colorInput:(0,n.css)({marginTop:m.spacing(2)})}),f=l},65420:(Q,A,e)=>{"use strict";e.d(A,{p:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(33227),o=e(51343);class g extends a.PureComponent{constructor(){super(...arguments),this.mainButtonRef=a.createRef(),this.confirmButtonRef=a.createRef(),this.state={showConfirm:!1},this.onClickButton=d=>{d&&d.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=d=>{d&&d.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=d=>{d&&d.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:d,className:f,size:m,disabled:v,confirmText:E,confirmVariant:p,children:h}=this.props,s=c(d),y=(0,n.cx)(f,this.state.showConfirm?s.buttonHide:s.buttonShow,v&&s.buttonDisabled),D=(0,n.cx)(s.confirmButton,this.state.showConfirm?s.confirmButtonShow:s.confirmButtonHide),C=v?()=>{}:this.onClickButton;return a.createElement("span",{className:s.buttonContainer},a.createElement("div",{className:(0,n.cx)(v&&s.disabled)},a.createElement("span",{className:y},typeof h=="string"?a.createElement(o.zx,{size:m,fill:"text",onClick:C,ref:this.mainButtonRef},h):a.cloneElement(h,{onClick:C,ref:this.mainButtonRef}))),a.createElement("span",{className:D},a.createElement(o.zx,{size:m,variant:p,onClick:this.onConfirm,ref:this.confirmButtonRef},E),a.createElement(o.zx,{size:m,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const u=(0,i.HE)(g),c=(0,r.B)(l=>({buttonContainer:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"flex-end"}),buttonDisabled:(0,n.css)({textDecoration:"none",color:l.colors.text.primary,opacity:.65,pointerEvents:"none"}),buttonShow:(0,n.css)({opacity:1,transition:"opacity 0.1s ease",zIndex:2}),buttonHide:(0,n.css)({opacity:0,transition:"opacity 0.1s ease, visibility 0 0.1s",visibility:"hidden",zIndex:0}),confirmButton:(0,n.css)({alignItems:"flex-start",background:l.colors.background.primary,display:"flex",position:"absolute",pointerEvents:"none"}),confirmButtonShow:(0,n.css)({zIndex:1,opacity:1,transition:"opacity 0.08s ease-out, transform 0.1s ease-out",transform:"translateX(0)",pointerEvents:"all"}),confirmButtonHide:(0,n.css)({opacity:0,visibility:"hidden",transition:"opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s",transform:"translateX(100px)"}),disabled:(0,n.css)({cursor:"not-allowed"})}));u.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},u.displayName="ConfirmButton"},94719:(Q,A,e)=>{"use strict";e.d(A,{m:()=>r});var n=e(31733),a=e(51343),i=e(65420);const r=({size:o,disabled:g,onConfirm:u,"aria-label":c,closeOnConfirm:l})=>n.createElement(i.p,{confirmText:"Delete",confirmVariant:"destructive",size:o||"md",disabled:g,onConfirm:u,closeOnConfirm:l},n.createElement(a.zx,{"aria-label":c,variant:"destructive",icon:"times",size:o||"sm"}))},90069:(Q,A,e)=>{"use strict";e.d(A,{s:()=>l});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(51343),g=e(64516),u=e(79106),c=e(5572);const l=({isOpen:f,title:m,body:v,description:E,confirmText:p,confirmVariant:h="destructive",confirmationText:s,dismissText:y="Cancel",dismissVariant:D="secondary",alternativeText:C,modalClass:P,icon:b="exclamation-triangle",onConfirm:T,onDismiss:O,onAlternative:R,confirmButtonVariant:I="destructive"})=>{const[M,x]=(0,a.useState)(!!s),L=(0,r.wW)(d),S=(0,a.useRef)(null),U=w=>{x(s?.toLowerCase().localeCompare(w.currentTarget.value.toLowerCase())!==0)};(0,a.useEffect)(()=>{f&&S.current?.focus()},[f]),(0,a.useEffect)(()=>{f&&x(!!s)},[f,s]);const N=async()=>{x(!0);try{await T()}finally{x(!1)}};return a.createElement(c.u,{className:(0,n.cx)(L.modal,P),title:m,icon:b,isOpen:f,onDismiss:O},a.createElement("div",{className:L.modalText},v,E?a.createElement("div",{className:L.modalDescription},E):null,s?a.createElement("div",{className:L.modalConfirmationInput},a.createElement(u.Lh,null,a.createElement(g.I,{placeholder:`Type "${s}" to confirm`,onChange:U}))):null),a.createElement(c.u.ButtonRow,null,a.createElement(o.zx,{variant:D,onClick:O,fill:"outline"},y),a.createElement(o.zx,{variant:I,onClick:N,disabled:M,ref:S,"data-testid":i.wl.pages.ConfirmModal.delete},p),R?a.createElement(o.zx,{variant:"primary",onClick:R},C):null))},d=f=>({modal:(0,n.css)({width:"500px"}),modalText:(0,n.css)({fontSize:f.typography.h5.fontSize,color:f.colors.text.primary}),modalDescription:(0,n.css)({fontSize:f.typography.body.fontSize}),modalConfirmationInput:(0,n.css)({paddingTop:f.spacing(1)})})},45502:(Q,A,e)=>{"use strict";e.d(A,{x:()=>g});var n=e(31733),a=e(3953),i=e(21568),r=e(63424),o=e(25108);const g=n.memo(({x:u,y:c,onClose:l,focusOnOpen:d=!0,renderMenuItems:f,renderHeader:m})=>{const v=(0,n.useRef)(null),[E,p]=(0,n.useState)({});(0,n.useLayoutEffect)(()=>{const C=v.current;if(C){const P=C.getBoundingClientRect(),b=5,T={right:window.innerWidth<u+P.width,bottom:window.innerHeight<c+P.height+b};p({position:"fixed",left:T.right?u-P.width-b:u-b,top:Math.max(0,T.bottom?c-P.height-b:c+b)})}},[u,c]),(0,a.Z)(v,()=>{l?.()});const h=m?.(),s=f?.(),y=C=>{d&&C(0)},D=C=>{C.key==="Escape"&&(C.preventDefault(),C.stopPropagation(),l?.())};return n.createElement(o.h_,null,n.createElement(r.v,{header:h,ref:v,style:E,ariaLabel:i.wl.components.Menu.MenuComponent("Context"),onOpen:y,onClick:l,onKeyDown:D},s))});g.displayName="ContextMenu"},79729:(Q,A,e)=>{"use strict";e.d(A,{z:()=>i});var n=e(31733),a=e(45502);const i=({children:r,renderMenuItems:o,focusOnOpen:g=!0})=>{const[u,c]=(0,n.useState)(!1),[l,d]=(0,n.useState)({x:0,y:0});return n.createElement(n.Fragment,null,r({openMenu:f=>{c(!0),d({x:f.pageX,y:f.pageY})}}),u&&n.createElement(a.x,{onClose:()=>c(!1),x:l.x,y:l.y,renderMenuItems:o,focusOnOpen:g}))}},37758:(Q,A,e)=>{"use strict";e.d(A,{$:()=>u,Z:()=>c});var n=e(76932),a=e(31733),i=e(9908),r=e(76067);const o=({children:d})=>{const[f,m]=(0,a.useState)(!1),[v,E]=(0,a.useState)(!1),p=(0,a.useRef)(null),h=(0,a.useRef)(null),s=(0,r.wW)(g);return(0,a.useEffect)(()=>{const y=new IntersectionObserver(D=>{D.forEach(C=>{C.target===p.current?m(!C.isIntersecting):C.target===h.current&&E(!C.isIntersecting)})});return[p,h].forEach(D=>{D.current&&y.observe(D.current)}),()=>y.disconnect()},[]),a.createElement(a.Fragment,null,a.createElement("div",{className:(0,n.cx)(s.scrollIndicator,s.scrollTopIndicator,{[s.scrollIndicatorVisible]:f})}),a.createElement("div",{className:s.scrollContent},a.createElement("div",{ref:p}),d,a.createElement("div",{ref:h})),a.createElement("div",{className:(0,n.cx)(s.scrollIndicator,s.scrollBottomIndicator,{[s.scrollIndicatorVisible]:v})}))},g=d=>({scrollContent:(0,n.css)({flex:1,position:"relative"}),scrollIndicator:(0,n.css)({height:d.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:d.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,n.css)({background:`linear-gradient(0deg, transparent, ${d.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,n.css)({background:`linear-gradient(180deg, transparent, ${d.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,n.css)({opacity:1})}),u=({autoHide:d=!1,autoHideTimeout:f=200,setScrollTop:m,className:v,testId:E,autoHeightMin:p="0",autoHeightMax:h="100%",hideTracksWhenNotNeeded:s=!1,hideHorizontalTrack:y,hideVerticalTrack:D,scrollRefCallback:C,showScrollIndicators:P=!1,updateAfterMountMs:b,scrollTop:T,onScroll:O,children:R})=>{const I=(0,a.useRef)(null),M=(0,r.wW)(l);(0,a.useEffect)(()=>{I.current&&C&&C(I.current.view)},[I,C]),(0,a.useEffect)(()=>{I.current&&T!=null&&I.current.scrollTop(T)},[T]),(0,a.useEffect)(()=>{b&&setTimeout(()=>{const _=I.current;_?.update&&_.update()},b)},[b]);function x(_,K,k){return k.style&&K&&(k.style.display="none"),a.createElement("div",{...k,className:_})}const L=(0,a.useCallback)(_=>x("track-horizontal",y,_),[y]),S=(0,a.useCallback)(_=>x("track-vertical",D,_),[D]),U=(0,a.useCallback)(_=>a.createElement("div",{..._,className:"thumb-horizontal"}),[]),N=(0,a.useCallback)(_=>a.createElement("div",{..._,className:"thumb-vertical"}),[]),w=(0,a.useCallback)(_=>(_.style&&_.style.WebkitOverflowScrolling==="touch"&&(_.style.WebkitOverflowScrolling="auto"),a.createElement("div",{..._,className:"scrollbar-view"})),[]),G=(0,a.useCallback)(()=>{I.current&&m&&m(I.current.getValues())},[m]);return a.createElement(i.ZP,{"data-testid":E,ref:I,className:(0,n.cx)(M.customScrollbar,v,{[M.scrollbarWithScrollIndicators]:P}),onScrollStop:G,autoHeight:!0,autoHide:d,autoHideTimeout:f,hideTracksWhenNotNeeded:s,autoHeightMax:h,autoHeightMin:p,renderTrackHorizontal:L,renderTrackVertical:S,renderThumbHorizontal:U,renderThumbVertical:N,renderView:w,onScroll:O},P?a.createElement(o,null,R):R)},c=u,l=d=>({customScrollbar:(0,n.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:d.shape.borderRadius(2),width:`${d.spacing(1)} !important`,right:0,bottom:d.spacing(.25),top:d.spacing(.25)},".track-horizontal":{borderRadius:d.shape.borderRadius(2),height:`${d.spacing(1)} !important`,right:d.spacing(.25),bottom:d.spacing(.25),left:d.spacing(.25)},".thumb-vertical":{background:d.colors.action.focus,borderRadius:d.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:d.colors.action.focus,borderRadius:d.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,n.css)({".scrollbar-view":{position:"static !important"}})})},92515:(Q,A,e)=>{"use strict";e.d(A,{k:()=>i});var n=e(31733),a=e(51343);function i({link:r,buttonProps:o}){return n.createElement("a",{href:r.href,target:r.target,rel:"noreferrer",onClick:r.onClick?g=>{!(g.ctrlKey||g.metaKey||g.shiftKey)&&r.onClick&&(g.preventDefault(),r.onClick(g))}:void 0},n.createElement(a.zx,{icon:r.target==="_blank"?"external-link-alt":void 0,variant:"primary",size:"sm",...o},r.title))}},14757:(Q,A,e)=>{"use strict";e.d(A,{v:()=>T});var n=e(76932),a=e(72470),i=e.n(a),r=e(31733),o=e(13076),g=e(41258),u=e(76485),c=e(38177),l=e(63908),d=e(81548),f=e(13811),m=e(76067),v=e(79488),E=e(37758),p=e(64516),h=e(25108),s=e(2284);class y{getBoundingClientRect(){const I=window.getSelection(),M=I&&I.anchorNode;return M&&M.parentElement?M.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const D=(R,I)=>R-I*Math.floor(R/I),C={builtInVariable:{pattern:/(\${\S+?})/}},P=[(0,f.Z)({onlyIn:R=>"type"in R&&R.type==="code_block",getSyntax:()=>"links"},{...i().languages,links:C})],b=R=>({input:(0,p.H)({theme:R,invalid:!1}).input,editor:(0,n.css)({".token.builtInVariable":{color:R.colors.success.text},".token.variable":{color:R.colors.primary.text}}),suggestionsWrapper:(0,n.css)({boxShadow:R.shadows.z2}),wrapperOverrides:(0,n.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),T=(0,r.memo)(({value:R,onChange:I,suggestions:M,placeholder:x="http://your-grafana.com/d/000000010/annotations"})=>{const L=(0,r.useRef)(null),S=(0,m.wW)(b),[U,N]=(0,r.useState)(!1),[w,G]=(0,r.useState)(0),[_,K]=(0,r.useState)((0,v.l1)(R)),k=(0,g.Z)(_),[z,W]=(0,r.useState)(0),Z=(0,r.useRef)({showingSuggestions:U,suggestions:M,suggestionsIndex:w,linkUrl:_,onChange:I});Z.current={showingSuggestions:U,suggestions:M,suggestionsIndex:w,linkUrl:_,onChange:I};const H=(0,r.useRef)(null);(0,r.useEffect)(()=>{W(O(H.current,w))},[w]);const X=(0,r.useMemo)(()=>new y,[]),Y=r.useCallback((ge,q)=>{if(!Z.current.showingSuggestions)return ge.key==="="||ge.key==="$"||ge.keyCode===32&&ge.ctrlKey?N(!0):q();switch(ge.key){case"Backspace":case"Escape":return N(!1),G(0);case"Enter":return ge.preventDefault(),se(Z.current.suggestions[Z.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":ge.preventDefault();const me=ge.key==="ArrowDown"?1:-1;return G(oe=>D(oe+me,Z.current.suggestions.length));default:return q()}},[]);(0,r.useEffect)(()=>{k&&k.selection.isFocused&&!_.selection.isFocused&&Z.current.onChange(u.Z.serialize(_))},[_,k]);const ne=r.useCallback(({value:ge})=>{K(ge)},[]),se=(ge,q=L.current)=>{const oe=re()==="$";ge.origin!==l.L8.Template||ge.value===d.W.includeVars?q.insertText(`${oe?"":"$"}{${ge.value}}`):q.insertText(`${oe?"":"$"}{${ge.value}:queryparam}`),K(q.value),N(!1),G(0),Z.current.onChange(u.Z.serialize(q.value))},re=()=>{const ge=document.getElementById("data-link-input");let q="",me,oe;return window.getSelection&&(me=window.getSelection(),me&&me.rangeCount>0&&(oe=me.getRangeAt(0).cloneRange(),oe.collapse(!0),oe.setStart(ge,0),q=oe.toString().slice(-1))),q};return r.createElement("div",{className:S.wrapperOverrides},r.createElement("div",{className:"slate-query-field__wrapper"},r.createElement("div",{id:"data-link-input",className:"slate-query-field"},U&&r.createElement(h.h_,null,r.createElement(o.r,{referenceElement:X,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:ge,style:q,placement:me})=>r.createElement("div",{ref:ge,style:q,"data-placement":me,className:S.suggestionsWrapper},r.createElement(E.Z,{scrollTop:z,autoHeightMax:"300px",setScrollTop:({scrollTop:oe})=>W(oe)},r.createElement(s.T,{activeRef:H,suggestions:Z.current.suggestions,onSuggestionSelect:se,onClose:()=>N(!1),activeIndex:w}))))),r.createElement(c.ML,{schema:v.Yi,ref:L,placeholder:x,value:Z.current.linkUrl,onChange:ne,onKeyDown:(ge,q,me)=>Y(ge,me),plugins:P,className:(0,n.cx)(S.editor,S.input,(0,n.css)({padding:"3px 8px"}))}))))});T.displayName="DataLinkInput";function O(R,I){return(R?.clientHeight??0)*I}},2284:(Q,A,e)=>{"use strict";e.d(A,{T:()=>l});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(89782),g=e(76067),u=e(65650);const c=f=>({list:(0,n.css)({borderBottom:`1px solid ${f.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,n.css)({background:f.colors.background.primary,width:"250px"}),item:(0,n.css)({background:"none",padding:"2px 8px",userSelect:"none",color:f.colors.text.primary,cursor:"pointer","&:hover":{background:f.colors.action.hover}}),label:(0,n.css)({color:f.colors.text.secondary}),activeItem:(0,n.css)({background:f.colors.background.secondary,"&:hover":{background:f.colors.background.secondary}}),itemValue:(0,n.css)({fontFamily:f.typography.fontFamilyMonospace,fontSize:f.typography.size.sm})}),l=({suggestions:f,...m})=>{const v=(0,r.useRef)(null);(0,o.Z)(v,()=>{m.onClose&&m.onClose()});const E=(0,r.useMemo)(()=>(0,a.groupBy)(f,h=>h.origin),[f]),p=(0,g.wW)(c);return r.createElement("div",{role:"menu",ref:v,className:p.wrapper},Object.keys(E).map((h,s)=>{const y=s===0?0:Object.keys(E).reduce((D,C,P)=>P>=s?D:D+E[C].length,0);return r.createElement(d,{...m,suggestions:E[h],label:`${(0,a.capitalize)(h)}`,activeIndex:m.activeIndex,activeIndexOffset:y,key:h})}))};l.displayName="DataLinkSuggestions";const d=r.memo(({activeIndex:f,activeIndexOffset:m,label:v,onClose:E,onSuggestionSelect:p,suggestions:h,activeRef:s})=>{const y=(0,g.wW)(c);return r.createElement(r.Fragment,null,r.createElement(u.a,{className:y.list,items:h,renderItem:(D,C)=>{const P=C+m===f;return r.createElement("div",{role:"menuitem",tabIndex:0,className:(0,n.cx)(y.item,P&&y.activeItem),ref:P?s:void 0,onClick:()=>{p(D)},title:D.documentation},r.createElement("span",{className:y.itemValue},r.createElement("span",{className:y.label},v)," ",D.label))}}))});d.displayName="DataLinkSuggestionsList"},60470:(Q,A,e)=>{"use strict";e.d(A,{V:()=>c});var n=e(76932),a=e(31733),i=e(21568),r=e(13386),o=e(79729),g=e(85115),u=e(46213);const c=({children:l,links:d,style:f})=>{const m=[{items:(0,r.R)(d),label:"Data links"}],v=m[0].items.length,E=()=>m.map((h,s)=>a.createElement(g.k,{key:`${h.label}${s}`,label:h.label},(h.items||[]).map((y,D)=>a.createElement(u.s,{key:`${h.label}-${s}-${D}}`,url:y.url,label:y.label,target:y.target,icon:y.icon,active:y.active,onClick:y.onClick})))),p=(0,n.css)({cursor:"context-menu"});if(v>1)return a.createElement(o.z,{renderMenuItems:E},({openMenu:h})=>l({openMenu:h,targetClassName:p}));{const h=d()[0];return a.createElement("a",{href:h.href,onClick:h.onClick,target:h.target,title:h.title,style:{...f,overflow:"hidden",display:"flex"},"data-testid":i.wl.components.DataLinksContextMenu.singleLink},l({}))}}},7122:(Q,A,e)=>{"use strict";e.d(A,{d:()=>D});var n=e(76932),a=e(69781),i=e(31733),r=e(76067),o=e(51343),g=e(5572),u=e(13386),c=e(85765),l=e(64516),d=e(76772),f=e(14757);const m=P=>({listItem:(0,n.css)({marginBottom:P.spacing()}),infoText:(0,n.css)({paddingBottom:P.spacing(2),marginLeft:"66px",color:P.colors.text.secondary})}),v=i.memo(({index:P,value:b,onChange:T,suggestions:O,isLast:R})=>{const I=(0,r.wW)(m),M=(S,U)=>{T(P,{...b,url:S},U)},x=S=>{T(P,{...b,title:S.target.value})},L=()=>{T(P,{...b,targetBlank:!b.targetBlank})};return i.createElement("div",{className:I.listItem},i.createElement(c.g,{label:"Title"},i.createElement(l.I,{value:b.title,onChange:x,placeholder:"Show details"})),i.createElement(c.g,{label:"URL",invalid:(0,u.g)(b.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},i.createElement(f.v,{value:b.url,onChange:M,suggestions:O})),i.createElement(c.g,{label:"Open in new tab"},i.createElement(d.r,{value:b.targetBlank||!1,onChange:L})),R&&i.createElement("div",{className:I.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});v.displayName="DataLinkEditor";const E=({link:P,index:b,getSuggestions:T,onSave:O,onCancel:R})=>{const[I,M]=(0,i.useState)(P);return i.createElement(i.Fragment,null,i.createElement(v,{value:I,index:b,isLast:!1,suggestions:T(),onChange:(x,L)=>{M(L)}}),i.createElement(g.u.ButtonRow,null,i.createElement(o.zx,{variant:"secondary",onClick:()=>R(b),fill:"outline"},"Cancel"),i.createElement(o.zx,{onClick:()=>{O(b,I)}},"Save")))};var p=e(65008),h=e(41354);const s=({link:P,onEdit:b,onRemove:T})=>{const O=(0,r.wW)(y),{title:R="",url:I=""}=P,M=R.trim()!=="",x=I.trim()!=="",L=(0,u.g)(I);return i.createElement("div",{className:O.wrapper},i.createElement("div",{className:O.titleWrapper},i.createElement("div",{className:(0,n.cx)(O.url,!x&&O.notConfigured,L&&O.errored)},M?R:"Data link title not provided"),i.createElement("div",{className:O.actionButtons},i.createElement(h.h,{name:"pen",onClick:b,tooltip:"Edit data link title"}),i.createElement(h.h,{name:"times",onClick:T,tooltip:"Remove data link title"}))),i.createElement("div",{className:(0,n.cx)(O.url,!x&&O.notConfigured,L&&O.errored),title:I},x?I:"Data link url not provided"),L&&i.createElement(p.S,null,"Explore data link may not work in the future. Please edit."))},y=P=>({wrapper:(0,n.css)({marginBottom:P.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,n.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,n.css)({marginLeft:P.spacing(1),display:"flex"}),errored:(0,n.css)({color:P.colors.error.text,fontStyle:"italic"}),notConfigured:(0,n.css)({fontStyle:"italic"}),title:(0,n.css)({color:P.colors.text.primary,fontSize:P.typography.size.sm,fontWeight:P.typography.fontWeightMedium}),url:(0,n.css)({color:P.colors.text.secondary,fontSize:P.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})}),D=({links:P,onChange:b,getSuggestions:T,data:O})=>{const[R,I]=(0,i.useState)(null),[M,x]=(0,i.useState)(!1),L=(0,r.wW)(C),S=P??[],U=R!==null,N=(K,k)=>{if(M)if(k.title.trim()===""&&k.url.trim()===""){x(!1),I(null);return}else I(null),x(!1);const z=(0,a.cloneDeep)(S);z[K]=k,b(z),I(null)},w=()=>{let K=(0,a.cloneDeep)(S);I(K.length),x(!0)},G=K=>{M&&x(!1),I(null)},_=K=>{const k=(0,a.cloneDeep)(S);k.splice(K,1),b(k)};return i.createElement(i.Fragment,null,S.length>0&&i.createElement("div",{className:L.wrapper},S.map((K,k)=>i.createElement(s,{key:`${K.title}/${k}`,index:k,link:K,onChange:N,onEdit:()=>I(k),onRemove:()=>_(k),data:O}))),U&&R!==null&&i.createElement(g.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{G(R)}},i.createElement(E,{index:R,link:M?{title:"",url:""}:S[R],data:O,onSave:N,onCancel:G,getSuggestions:T})),i.createElement(o.zx,{size:"sm",icon:"plus",onClick:w,variant:"secondary"},"Add link"))},C=P=>({wrapper:(0,n.css)({marginBottom:P.spacing(2)})})},64064:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(49311),o=e(92515);function g({links:c}){const l=(0,i.wW)(u);if(c.length===1)return a.createElement(o.k,{link:c[0]});const d=c.filter(m=>m.target==="_blank"),f=c.filter(m=>m.target==="_self");return a.createElement(a.Fragment,null,f.map((m,v)=>a.createElement(o.k,{key:v,link:m})),a.createElement("div",{className:l.wrapper},a.createElement("p",{className:l.externalLinksHeading},"External links"),d.map((m,v)=>a.createElement("a",{key:v,href:m.href,target:m.target,className:l.externalLink},a.createElement(r.J,{name:"external-link-alt"}),m.title))))}const u=c=>({wrapper:(0,n.css)({flexBasis:"150px",width:"100px",marginTop:c.spacing(1)}),externalLinksHeading:(0,n.css)({color:c.colors.text.secondary,fontWeight:c.typography.fontWeightRegular,fontSize:c.typography.size.sm,margin:0}),externalLink:(0,n.css)({color:c.colors.text.link,fontWeight:c.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:c.spacing(1)}})})},45394:(Q,A,e)=>{"use strict";e.d(A,{O:()=>r});var n=e(31733),a=e(76772),i=e(41164);function r({options:o,onOptionsChange:g}){return n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Alerting"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(i._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:o.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},n.createElement(a.x,{value:o.jsonData.manageAlerts!==!1,onChange:u=>g({...o,jsonData:{...o.jsonData,manageAlerts:u.currentTarget.checked}})}))))))}},34525:(Q,A,e)=>{"use strict";e.d(A,{W:()=>u});var n=e(31733),a=e(51343),i=e(41164),r=e(47701),o=e(64516),g=e(28718);const u=({hasCert:c,label:l,onChange:d,onClick:f,placeholder:m})=>n.createElement(r.Z,null,n.createElement(i._,{label:l,labelWidth:14,disabled:c},c?n.createElement(o.I,{type:"text",value:"configured",width:24}):n.createElement(g.K,{rows:7,onChange:d,placeholder:m,required:!0})),c&&n.createElement(a.zx,{variant:"secondary",onClick:f,style:{marginLeft:4}},"Reset"))},71952:(Q,A,e)=>{"use strict";e.d(A,{H:()=>m});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(76067),g=e(51343),u=e(14978),c=e(49311),l=e(53713);const d=()=>({layout:(0,n.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})}),f=({header:E,onBlur:p,onChange:h,onRemove:s,onReset:y})=>{const D=(0,o.wW)(d);return r.createElement("div",{className:D.layout},r.createElement(u.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:E.name||"",onChange:C=>h({...E,name:C.target.value}),onBlur:p}),r.createElement(l.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:E.configured,value:E.value,labelWidth:5,inputWidth:E.configured?11:12,placeholder:"Header Value",onReset:()=>y(E.id),onChange:C=>h({...E,value:C.target.value}),onBlur:p}),r.createElement(g.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:C=>s(E.id)},r.createElement(c.J,{name:"trash-alt"})))};f.displayName="CustomHeaderRow";class m extends r.PureComponent{constructor(p){super(p),this.state={headers:[]},this.updateSettings=()=>{const{headers:D}=this.state,C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([b,T])=>!b.startsWith("httpHeaderName"))),P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([b,T])=>!b.startsWith("httpHeaderValue")));for(const[b,T]of D.entries())C[`httpHeaderName${b+1}`]=T.name,T.configured||(P[`httpHeaderValue${b+1}`]=T.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:C,secureJsonData:P})},this.onHeaderAdd=()=>{this.setState(D=>({headers:[...D.headers,{id:(0,a.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(D,C)=>{this.setState(({headers:P})=>({headers:P.map((b,T)=>D!==T?b:{...C})}))},this.onHeaderReset=D=>{this.setState(({headers:C})=>({headers:C.map((P,b)=>P.id!==D?P:{...P,value:"",configured:!1})}))},this.onHeaderRemove=D=>{this.setState(({headers:C})=>({headers:C.filter(P=>P.id!==D)}),this.updateSettings)};const{jsonData:h,secureJsonData:s,secureJsonFields:y}=this.props.dataSourceConfig;this.state={headers:Object.keys(h).sort().filter(D=>D.startsWith("httpHeaderName")).map((D,C)=>({id:(0,a.uniqueId)(),name:h[D],value:s!==void 0?s[D]:"",configured:y&&y[`httpHeaderValue${C+1}`]||!1}))}}render(){const{headers:p}=this.state,{dataSourceConfig:h}=this.props;return r.createElement("div",{className:"gf-form-group"},r.createElement("div",{className:"gf-form"},r.createElement("h6",null,"Custom HTTP Headers")),r.createElement("div",null,p.map((s,y)=>r.createElement(f,{key:s.id,header:s,onChange:D=>{this.onHeaderChange(y,D)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!h.readOnly&&r.createElement("div",{className:"gf-form"},r.createElement(g.zx,{variant:"secondary",icon:"plus",type:"button",onClick:s=>{this.onHeaderAdd()}},"Add header")))}}var v=null},69671:(Q,A,e)=>{"use strict";e.d(A,{E:()=>O});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(14978),g=e(71918),u=e(41164),c=e(98146),l=e(49311),d=e(38834),f=e(76772),m=e(98572),v=e(53713);const E=({dataSourceConfig:R,onChange:I})=>{const M=R.secureJsonData?R.secureJsonData.basicAuthPassword:"",x=()=>{I({...R,secureJsonData:{...R.secureJsonData,basicAuthPassword:""},secureJsonFields:{...R.secureJsonFields,basicAuthPassword:!1}})},L=S=>{I({...R,secureJsonData:{...R.secureJsonData,basicAuthPassword:S.currentTarget.value}})};return a.createElement(a.Fragment,null,a.createElement(u._,{disabled:R.readOnly},a.createElement(o.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:R.basicAuthUser,onChange:S=>I({...R,basicAuthUser:S.currentTarget.value})})),a.createElement(u._,{disabled:R.readOnly},a.createElement(v.c,{isConfigured:!!(R.secureJsonFields&&R.secureJsonFields.basicAuthPassword),value:M||"",inputWidth:18,labelWidth:10,onReset:x,onChange:L})))};var p=e(71952);const h=26,s=({dataSourceConfig:R,onChange:I,showForwardOAuthIdentityOption:M=!0})=>a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"TLS Client Auth",labelWidth:h,disabled:R.readOnly},a.createElement(f.x,{id:"http-settings-tls-client-auth",value:R.jsonData.tlsAuth||!1,onChange:x=>I({...R.jsonData,tlsAuth:x.currentTarget.checked})})),a.createElement(u._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:h,disabled:R.readOnly},a.createElement(f.x,{id:"http-settings-ca-cert",value:R.jsonData.tlsAuthWithCACert||!1,onChange:x=>I({...R.jsonData,tlsAuthWithCACert:x.currentTarget.checked})}))),a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Skip TLS Verify",labelWidth:h,disabled:R.readOnly},a.createElement(f.x,{id:"http-settings-skip-tls-verify",value:R.jsonData.tlsSkipVerify||!1,onChange:x=>I({...R.jsonData,tlsSkipVerify:x.currentTarget.checked})}))),M&&a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:h,disabled:R.readOnly},a.createElement(f.x,{id:"http-settings-forward-oauth",value:R.jsonData.oauthPassThru||!1,onChange:x=>I({...R.jsonData,oauthPassThru:x.currentTarget.checked})}))));var y=e(41854),D=e(74947);const C=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],P={label:"Server (default)",value:"proxy"},b=()=>a.createElement("div",{className:"grafana-info-box m-t-2"},a.createElement("p",null,"Access mode controls how requests to the data source will be handled.",a.createElement("strong",null,"\xA0",a.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),a.createElement("div",{className:"alert-title"},"Server access mode (Default):"),a.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),a.createElement("div",{className:"alert-title"},"Browser access mode:"),a.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),T=26,O=R=>{const{defaultUrl:I,dataSourceConfig:M,onChange:x,showAccessOptions:L,sigV4AuthToggleEnabled:S,showForwardOAuthIdentityOption:U,azureAuthSettings:N,renderSigV4Editor:w,secureSocksDSProxyEnabled:G,urlLabel:_,urlDocs:K}=R,[k,z]=(0,a.useState)(!1),[W,Z]=(0,a.useState)(!1),H=(0,r.l4)();let X;const Y=(0,a.useCallback)(me=>{const oe=N?.azureAuthSupported&&N.getAzureAuthEnabled(M)||!1;if(Z(oe),oe){const fe=M.jsonData.oauthPassThru!==void 0?M.jsonData.oauthPassThru:!1;me={...me,jsonData:{...M.jsonData,oauthPassThru:oe?!1:fe}}}x({...M,...me})},[N,M,x]);switch(M.access){case"direct":X=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",K);break;case"proxy":X=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",K);break;default:X=a.createElement(a.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",K)}const ne=a.createElement(d.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:C,value:C.filter(me=>me.value===M.access)[0]||P,onChange:me=>Y({access:me.value}),disabled:M.readOnly}),se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(M.url),re=(0,n.css)({boxShadow:`inset 0 0px 5px ${H.v1.palette.red}`}),ge=(0,n.cx)({["width-20"]:!0,[re]:!se}),q=a.createElement(c.I,{className:ge,placeholder:I,value:M.url,"aria-label":i.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:me=>Y({url:me.currentTarget.value}),disabled:M.readOnly});return a.createElement("div",{className:"gf-form-group"},a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"HTTP"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(o.W,{interactive:!!K,label:_??"URL",labelWidth:13,tooltip:X,inputEl:q})),L&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(o.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:ne})),a.createElement("div",{className:"gf-form"},a.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>z(me=>!me)},"Help\xA0",a.createElement(l.J,{name:k?"angle-down":"angle-right",style:{marginBottom:0}})))),k&&a.createElement(b,null)),M.access==="proxy"&&a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(g.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),a.createElement(m.B,{tags:M.jsonData.keepCookies,width:40,onChange:me=>Y({jsonData:{...M.jsonData,keepCookies:me}}),disabled:M.readOnly})),a.createElement("div",{className:"gf-form"},a.createElement(o.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:M.jsonData.timeout,onChange:me=>{Y({jsonData:{...M.jsonData,timeout:parseInt(me.currentTarget.value,10)}})},disabled:M.readOnly}))))),a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Auth"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Basic auth",labelWidth:T,disabled:M.readOnly},a.createElement(f.x,{id:"http-settings-basic-auth",value:M.basicAuth,onChange:me=>{Y({basicAuth:me.currentTarget.checked})}})),a.createElement(u._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:T,disabled:M.readOnly},a.createElement(f.x,{id:"http-settings-with-credentials",value:M.withCredentials,onChange:me=>{Y({withCredentials:me.currentTarget.checked})}}))),N?.azureAuthSupported&&a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:T,disabled:M.readOnly},a.createElement(f.x,{id:"http-settings-azure-auth",value:W,onChange:me=>{Y(N.setAzureAuthEnabled(M,me.currentTarget.checked))}}))),S&&a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"SigV4 auth",labelWidth:T,disabled:M.readOnly},a.createElement(f.x,{id:"http-settings-sigv4-auth",value:M.jsonData.sigV4Auth||!1,onChange:me=>{Y({jsonData:{...M.jsonData,sigV4Auth:me.currentTarget.checked}})}}))),M.access==="proxy"&&a.createElement(s,{dataSourceConfig:M,onChange:me=>Y({jsonData:me}),showForwardOAuthIdentityOption:W?!1:U})),M.basicAuth&&a.createElement(a.Fragment,null,a.createElement("h6",null,"Basic Auth Details"),a.createElement("div",{className:"gf-form-group"},a.createElement(E,{...R}))),N?.azureAuthSupported&&W&&N.azureSettingsUI&&a.createElement(N.azureSettingsUI,{dataSourceConfig:M,onChange:x}),M.jsonData.sigV4Auth&&S&&w,(M.jsonData.tlsAuth||M.jsonData.tlsAuthWithCACert)&&a.createElement(D.s,{dataSourceConfig:M,onChange:x}),M.access==="proxy"&&a.createElement(p.H,{dataSourceConfig:M,onChange:x})),G&&a.createElement(y.i,{options:M,onOptionsChange:x}))}},41854:(Q,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(31733),a=e(76772),i=e(41164);function r({options:o,onOptionsChange:g}){return n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(i._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},n.createElement(a.x,{value:o.jsonData.enableSecureSocksProxy??!1,onChange:u=>g({...o,jsonData:{...o.jsonData,enableSecureSocksProxy:u.currentTarget.checked}})}))))))}},74947:(Q,A,e)=>{"use strict";e.d(A,{s:()=>u});var n=e(76932),a=e(31733),i=e(14978),r=e(49311),o=e(58037),g=e(34525);const u=({dataSourceConfig:c,onChange:l})=>{const d=c.secureJsonFields&&c.secureJsonFields.tlsCACert,f=c.secureJsonFields&&c.secureJsonFields.tlsClientCert,m=c.secureJsonFields&&c.secureJsonFields.tlsClientKey,v=c.jsonData&&c.jsonData.serverName,E=s=>y=>{y.preventDefault();const D={...c.secureJsonFields};D[s]=!1,l({...c,secureJsonFields:D})},p=s=>y=>{const D={...c.secureJsonData};D[s]=y.currentTarget.value,l({...c,secureJsonData:D})},h=s=>{const y={...c.jsonData,serverName:s.currentTarget.value};l({...c,jsonData:y})};return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:(0,n.cx)("gf-form",(0,n.css)({alignItems:"baseline"}))},a.createElement("h6",null,"TLS/SSL Auth Details"),a.createElement(o.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},a.createElement(r.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),a.createElement("div",null,c.jsonData.tlsAuthWithCACert&&a.createElement(g.W,{hasCert:!!d,onChange:p("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:E("tlsCACert")}),c.jsonData.tlsAuth&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form"},a.createElement(i.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:v&&c.jsonData.serverName,onChange:h})),a.createElement(g.W,{hasCert:!!f,label:"Client Cert",onChange:p("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:E("tlsClientCert")}),a.createElement(g.W,{hasCert:!!m,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:p("tlsClientKey"),onClick:E("tlsClientKey")}))))}},39934:(Q,A,e)=>{"use strict";e.d(A,{M:()=>c});var n=e(76932),a=e(31733),i=e(51377),r=e(76067),o=e(11550),g=e(49311),u=e(11335);const c=(0,a.memo)(f=>{const m=(0,r.wW)(d),{isOpen:v,onClose:E}=f;return v?a.createElement(o.L,{useCapture:!0,includeButtonPress:!1,onClick:E},a.createElement("div",{className:m.modal,"data-testid":"date-picker"},a.createElement(l,{...f}))):null});c.displayName="DatePicker";const l=(0,a.memo)(({value:f,minDate:m,maxDate:v,onChange:E})=>{const p=(0,r.wW)(u.mg);return a.createElement(i.ZP,{className:p.body,tileClassName:p.title,value:f||new Date,minDate:m,maxDate:v,nextLabel:a.createElement(g.J,{name:"angle-right"}),prevLabel:a.createElement(g.J,{name:"angle-left"}),onChange:h=>{h&&!Array.isArray(h)&&E(h)},locale:"en"})});l.displayName="Body";const d=f=>({modal:(0,n.css)({zIndex:f.zIndex.modal,position:"absolute",boxShadow:f.shadows.z3,backgroundColor:f.colors.background.primary,border:`1px solid ${f.colors.border.weak}`,borderTopLeftRadius:f.shape.radius.default,borderBottomLeftRadius:f.shape.radius.default,"button:disabled":{color:f.colors.text.disabled}})})},46606:(Q,A,e)=>{"use strict";e.d(A,{d:()=>c});var n=e(76932),a=e(31733),i=e(74011),r=e(76067),o=e(64516),g=e(39934);const u=d=>(0,i.CQ)(d).format("L"),c=({value:d,minDate:f,maxDate:m,onChange:v,closeOnSelect:E,placeholder:p="Date",...h})=>{const[s,y]=a.useState(!1),D=(0,r.wW)(l);return a.createElement("div",{className:D.container},a.createElement(o.I,{type:"text",autoComplete:"off",placeholder:p,value:d&&u(d),onClick:()=>y(!0),onChange:C=>{C.target.value===""&&v("")},className:D.input,...h}),a.createElement(g.M,{isOpen:s,value:d&&typeof d!="string"?d:(0,i.CQ)().toDate(),minDate:f,maxDate:m,onChange:C=>{v(C),E&&y(!1)},onClose:()=>y(!1)}))},l=()=>({container:(0,n.css)({position:"relative"}),input:(0,n.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}})})},35557:(Q,A,e)=>{"use strict";e.d(A,{x:()=>T});var n=e(76932),a=e(16749),i=e(57353),r=e(68420),o=e(31733),g=e(51377),u=e(48947),c=e(28447),l=e(40137),d=e(74011),f=e(71081),m=e(76067),v=e(51343),E=e(41164),p=e(49311),h=e(64516),s=e(79106),y=e(82336),D=e(25108),C=e(46776),P=e(11335),b=e(42617);const T=({date:M,maxDate:x,minDate:L,label:S,onChange:U,disabledHours:N,disabledMinutes:w,disabledSeconds:G,showSeconds:_=!0})=>{const[K,k]=(0,o.useState)(!1),z=(0,o.useRef)(null),{overlayProps:W,underlayProps:Z}=(0,r.Ir)({onClose:()=>k(!1),isDismissable:!0,isOpen:K,shouldCloseOnInteractOutside:pe=>{const Me=document.getElementsByClassName(C.F)[0];return!(Me&&Me.contains(pe))}},z),{dialogProps:H}=(0,a.R)({},z),X=(0,m.l4)(),{modalBackdrop:Y}=(0,m.wW)(y.J),ne=(0,c.Z)(`(min-width: ${X.breakpoints.values.lg}px)`),se=(0,m.wW)(I),[re,ge]=(0,o.useState)(),[q,me]=(0,o.useState)(),oe=(0,u.D)(re,q,{placement:"bottom-start"}),fe=(0,o.useCallback)(pe=>{k(!1),U(pe)},[U]),ve=(0,o.useCallback)(pe=>{pe.preventDefault(),k(!0)},[k]);return o.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},o.createElement(O,{date:M,onChange:U,isFullscreen:ne,onOpen:ve,label:S,ref:ge,showSeconds:_}),K?ne?o.createElement(D.h_,null,o.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("div",{ref:z,...W,...H},o.createElement(R,{date:M,onChange:fe,isFullscreen:!0,onClose:()=>k(!1),maxDate:x,minDate:L,ref:me,style:oe.styles.popper,showSeconds:_,disabledHours:N,disabledMinutes:w,disabledSeconds:G})))):o.createElement(D.h_,null,o.createElement("div",{className:Y,...Z}),o.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("div",{ref:z,...W,...H},o.createElement("div",{className:se.modal},o.createElement(R,{date:M,maxDate:x,minDate:L,onChange:fe,isFullscreen:!1,onClose:()=>k(!1),showSeconds:_,disabledHours:N,disabledMinutes:w,disabledSeconds:G}))))):null)},O=o.forwardRef(({date:M,label:x,onChange:L,onOpen:S,showSeconds:U=!0},N)=>{const w=U?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[G,_]=(0,o.useState)(()=>({value:M?(0,l.dq)(M):(0,l.dq)((0,d.CQ)()),invalid:!1}));(0,o.useEffect)(()=>{M&&_({invalid:!(0,b.J)((0,l.dq)(M,{format:w})),value:(0,d.v9)(M)?(0,l.dq)(M,{format:w}):M})},[M,w]);const K=(0,o.useCallback)(W=>{const Z=!(0,b.J)(W.currentTarget.value);_({value:W.currentTarget.value,invalid:Z})},[]),k=(0,o.useCallback)(()=>{if(!G.invalid){const W=(0,d.CQ)(G.value);L(W)}},[G,L]),z=o.createElement(v.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:S});return o.createElement(E._,{label:x,invalid:!!(G.value&&G.invalid),className:(0,n.css)({marginBottom:0})},o.createElement(h.I,{onChange:K,addonAfter:z,value:G.value,onBlur:k,"data-testid":f.z.DateTimePicker.input,placeholder:"Select date/time",ref:N}))});O.displayName="DateTimeInput";const R=o.forwardRef(({date:M,onClose:x,onChange:L,isFullscreen:S,maxDate:U,minDate:N,style:w,showSeconds:G=!0,disabledHours:_,disabledMinutes:K,disabledSeconds:k},z)=>{const W=(0,m.wW)(P.mg),Z=(0,m.wW)(I),[H,X]=(0,o.useState)(()=>M&&M.isValid()?M.toDate():new Date),Y=(0,o.useCallback)(se=>{se&&!Array.isArray(se)&&X(re=>(se.setHours(re.getHours()),se.setMinutes(re.getMinutes()),se.setSeconds(re.getSeconds()),se))},[]),ne=(0,o.useCallback)(se=>{X(se.toDate())},[]);return o.createElement("div",{className:(0,n.cx)(Z.container,{[Z.fullScreen]:S}),style:w,ref:z},o.createElement(g.ZP,{next2Label:null,prev2Label:null,value:H,nextLabel:o.createElement(p.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:o.createElement(p.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:Y,locale:"en",className:W.body,tileClassName:W.title,maxDate:U,minDate:N}),o.createElement("div",{className:Z.time},o.createElement(C.y,{showSeconds:G,onChange:ne,value:(0,d.CQ)(H),disabledHours:_,disabledMinutes:K,disabledSeconds:k})),o.createElement(s.Lh,null,o.createElement(v.zx,{type:"button",onClick:()=>L((0,d.CQ)(H))},"Apply"),o.createElement(v.zx,{variant:"secondary",type:"button",onClick:x},"Cancel")))});R.displayName="DateTimeCalendar";const I=M=>({container:(0,n.css)({padding:M.spacing(1),border:`1px ${M.colors.border.weak} solid`,borderRadius:M.shape.radius.default,backgroundColor:M.colors.background.primary,zIndex:M.zIndex.modal}),fullScreen:(0,n.css)({position:"absolute"}),time:(0,n.css)({marginBottom:M.spacing(2)}),modal:(0,n.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:M.zIndex.modal,maxWidth:"280px"})})},97771:(Q,A,e)=>{"use strict";e.d(A,{x:()=>C});var n=e(76932),a=e(16749),i=e(57353),r=e(68420),o=e(31733),g=e(48947),u=e(76067),c=e(82926),l=e(51343),d=e(37758),f=e(85765),m=e(49311),v=e(64516),E=e(58037),p=e(8463),h=e(97526),s=e(35771),y=e(28197);const D=s.r.filter(R=>(0,y.jD)(R.from));function C(R){const{timeRange:I,onChange:M}=R,[x,L]=(0,o.useState)(!1),S=(0,o.useCallback)(()=>L(!1),[]),U=(0,y.C_)(I),[N,w]=(0,o.useState)({value:U.from,validation:(0,y.x5)(U.from)}),[G,_]=(0,o.useState)({value:U.to,validation:(0,y.x5)(U.to)}),K=(0,o.useRef)(null),{overlayProps:k,underlayProps:z}=(0,r.Ir)({onClose:()=>L(!1),isDismissable:!0,isOpen:x},K),{dialogProps:W}=(0,a.R)({},K),[Z,H]=(0,o.useState)(null),[X,Y]=(0,o.useState)(null),ne=(0,g.D)(Z,X,{placement:"auto-start"}),se=(0,u.wW)(T(N.validation.errorMessage,G.validation.errorMessage)),re=me=>{const oe=(0,y.aw)(me);oe&&(S(),w({...N,value:me.from}),_({...G,value:me.to}),M(oe))},ge=(0,o.useCallback)(me=>{me.stopPropagation(),me.preventDefault(),L(!x)},[x]),q=me=>{if(me.preventDefault(),!G.validation.isValid||!N.validation.isValid)return;const oe=(0,y.aw)({from:N.value,to:G.value,display:""});oe&&(M(oe),L(!1))};return o.createElement("div",{className:se.container,ref:H},o.createElement("button",{className:se.pickerInput,type:"button",onClick:ge},o.createElement("span",{className:se.clockIcon},o.createElement(m.J,{name:"clock-nine"})),o.createElement("span",null,U.from," to ",U.to),o.createElement("span",{className:se.caretIcon},o.createElement(m.J,{name:x?"angle-up":"angle-down",size:"lg"}))),x&&o.createElement("div",null,o.createElement("div",{role:"presentation",className:se.backdrop,...z}),o.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("div",{ref:K,...k,...W},o.createElement("div",{className:se.content,ref:Y,style:ne.styles.popper,...ne.attributes},o.createElement("div",{className:se.body},o.createElement(d.Z,{className:se.leftSide,hideHorizontalTrack:!0},o.createElement(h.V,{title:(0,c.t)("time-picker.time-range.example-title","Example time ranges"),options:D,onChange:re,value:U})),o.createElement("div",{className:se.rightSide},o.createElement("div",{className:se.title},o.createElement(p.r,null,o.createElement(E.u,{content:o.createElement(P,null),placement:"bottom",theme:"info"},o.createElement("div",null,o.createElement(c.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",o.createElement(m.J,{name:"info-circle"})))))),o.createElement(f.g,{label:"From",invalid:!N.validation.isValid,error:N.validation.errorMessage},o.createElement(v.I,{onClick:me=>me.stopPropagation(),onBlur:()=>w({...N,validation:(0,y.x5)(N.value)}),onChange:me=>w({...N,value:me.currentTarget.value}),value:N.value})),o.createElement(f.g,{label:"To",invalid:!G.validation.isValid,error:G.validation.errorMessage},o.createElement(v.I,{onClick:me=>me.stopPropagation(),onBlur:()=>_({...G,validation:(0,y.x5)(G.value)}),onChange:me=>_({...G,value:me.currentTarget.value}),value:G.value})),o.createElement(l.zx,{"aria-label":"TimePicker submit button",onClick:q},"Apply time range"))))))))}const P=()=>{const R=(0,u.wW)(b);return o.createElement(o.Fragment,null,o.createElement("div",{className:R.supported},"Supported formats: ",o.createElement("code",{className:R.tooltip},"now-[digit]s/m/h/d/w")),o.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),o.createElement("code",{className:R.tooltip},"From: now-10m To: now"),o.createElement("div",{className:R.link},"For more information see"," ",o.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",o.createElement(m.J,{name:"external-link-alt"})),"."))},b=R=>({supported:(0,n.css)({marginBottom:R.spacing(1)}),tooltip:(0,n.css)({margin:0}),link:(0,n.css)({marginTop:R.spacing(1)})}),T=(R,I)=>M=>{const x=(0,v.H)({theme:M,invalid:!1}),S=250+O(M,R)+O(M,I);return{backdrop:(0,n.css)({position:"fixed",zIndex:M.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,n.css)({display:"flex",position:"relative"}),pickerInput:(0,n.cx)(x.input,x.wrapper,(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${M.spacing.gridSize*M.components.height.md-2}px`})),caretIcon:(0,n.cx)(x.suffix,(0,n.css)({position:"relative",marginLeft:M.spacing(.5)})),clockIcon:(0,n.cx)(x.prefix,(0,n.css)({position:"relative",marginRight:M.spacing(.5)})),content:(0,n.css)({background:M.colors.background.primary,boxShadow:M.shadows.z3,position:"absolute",zIndex:M.zIndex.modal,width:"500px",top:"100%",borderRadius:M.shape.radius.default,border:`1px solid ${M.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,n.css)({display:"flex",height:`${S}px`}),description:(0,n.css)({color:M.colors.text.secondary,fontSize:M.typography.size.sm}),leftSide:(0,n.css)({width:"50% !important",borderRight:`1px solid ${M.colors.border.medium}`}),rightSide:(0,n.css)({width:"50%",padding:M.spacing(1)}),title:(0,n.css)({marginBottom:M.spacing(1)})}};function O(R,I){return I?I.length>34?R.spacing.gridSize*6.5:R.spacing.gridSize*4:0}},28197:(Q,A,e)=>{"use strict";e.d(A,{C_:()=>i,aw:()=>a,jD:()=>o,x5:()=>r});const n=/^now$|^now\-(\d{1,10})([wdhms])$/,a=l=>({from:g(l.from),to:g(l.to)}),i=l=>{const d=c(l.from),f=c(l.to);return{from:d,to:f,display:`${d} to ${f}`}},r=(l,d=Date.now())=>o(l)?g(l)>Math.ceil(d/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},o=l=>n.test(l),g=l=>{const d=n.exec(l);if(!d||d.length!==3)return 0;const[,f,m]=d,v=parseInt(f,10);return isNaN(v)?0:v*u[m]},u={w:604800,d:86400,h:3600,m:60,s:1},c=l=>l<=0?"now":l>=u.w&&l%u.w===0?`now-${l/u.w}w`:l>=u.d&&l%u.d===0?`now-${l/u.d}d`:l>=u.h&&l%u.h===0?`now-${l/u.h}h`:l>=u.m&&l%u.m===0?`now-${l/u.m}m`:`now-${l}s`},46776:(Q,A,e)=>{"use strict";e.d(A,{F:()=>l,y:()=>d});var n=e(76932),a=e(94590),i=e(31733),r=e(74011),o=e(76067),g=e(83998),u=e(90119),c=e(49311);const l="time-of-day-picker-panel",d=({minuteStep:v=1,showHour:E=!0,showSeconds:p=!1,onChange:h,value:s,size:y="auto",disabled:D,disabledHours:C,disabledMinutes:P,disabledSeconds:b})=>{const T=(0,o.wW)(m);return i.createElement(a.Z,{className:(0,n.cx)((0,u.ht)()[y],T.input),popupClassName:(0,n.cx)(T.picker,l),defaultValue:(0,r.C_)(),onChange:O=>{if((0,r.D2)(O))return h((0,r.CQ)(O))},allowEmpty:!1,showSecond:p,value:(0,r.C_)(s),showHour:E,minuteStep:v,inputIcon:i.createElement(f,{wrapperStyle:T.caretWrapper}),disabled:D,disabledHours:C,disabledMinutes:P,disabledSeconds:b})},f=({wrapperStyle:v=""})=>i.createElement("div",{className:v},i.createElement(c.J,{name:"angle-down"})),m=v=>{const E=v.components.input.background,p=v.v1.palette.black,h=v.colors.background.secondary,s=v.shape.radius.default,y=v.components.input.borderColor;return{caretWrapper:(0,n.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:v.colors.text.secondary}),picker:(0,n.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:E,borderColor:y,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${v.v1.palette.orange}`,borderRadius:s},"&:hover":{background:h},"&.rc-time-picker-panel-select-option-disabled":{color:v.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${p}`,backgroundColor:E,borderColor:y,borderRadius:s,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:E,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,n.css)({".rc-time-picker-input":{backgroundColor:E,borderRadius:s,borderColor:y,height:v.spacing(4),"&:focus":(0,g.getFocusStyles)(v),"&:disabled":{backgroundColor:v.colors.action.disabledBackground,color:v.colors.action.disabledText,border:`1px solid ${v.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},30791:(Q,A,e)=>{"use strict";e.d(A,{K:()=>p});var n=e(76932),a=e(31733),i=e(74011),r=e(5333),o=e(21568),g=e(76067),u=e(11550),c=e(49311),l=e(64516),d=e(9877),f=e(12881),m=e(35771),v=e(42617);const E=()=>{},p=({value:s,onChange:y,onChangeTimeZone:D=E,clearable:C,hideTimeZone:P=!0,timeZone:b="browser",placeholder:T="Select time range",isReversed:O=!0,hideQuickRanges:R=!1,disabled:I=!1,showIcon:M=!1})=>{const[x,L]=(0,a.useState)(!1),S=(0,g.wW)(h,I),U=_=>{_.stopPropagation(),_.preventDefault(),!I&&L(!x)},N=()=>{L(!1)},w=_=>{N(),y(_)},G=_=>{_.stopPropagation();const K=(0,i.CQ)(null),k=(0,i.CQ)(null);y({from:K,to:k,raw:{from:K,to:k}})};return a.createElement("div",{className:S.container},a.createElement("button",{type:"button",className:S.pickerInput,"aria-label":o.wl.components.TimePicker.openButton,onClick:U},M&&a.createElement(c.J,{name:"clock-nine",size:"sm",className:S.icon}),a.createElement(f.q,{value:s,timeZone:b,placeholder:T}),!I&&a.createElement("span",{className:S.caretIcon},(0,v.v)(s)&&C&&a.createElement(c.J,{className:S.clearIcon,name:"times",size:"lg",onClick:G}),a.createElement(c.J,{name:x?"angle-up":"angle-down",size:"lg"}))),x&&a.createElement(u.L,{includeButtonPress:!1,onClick:N},a.createElement(d.x,{timeZone:b,value:(0,v.v)(s)?s:(0,r.JK)(),onChange:w,quickOptions:m.r,onChangeTimeZone:D,className:S.content,hideTimeZone:P,isReversed:O,hideQuickRanges:R})))},h=(s,y=!1)=>{const D=(0,l.H)({theme:s,invalid:!1});return{container:(0,n.css)({display:"flex",position:"relative"}),content:(0,n.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:s.zIndex.dropdown}),pickerInput:(0,n.cx)(D.input,y&&D.inputDisabled,D.wrapper,(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${s.spacing.gridSize*4-2}px`})),caretIcon:(0,n.cx)(D.suffix,(0,n.css)({position:"relative",top:"-1px",marginLeft:s.spacing(.5)})),clearIcon:(0,n.css)({marginRight:s.spacing(.5),"&:hover":{color:s.colors.text.maxContrast}}),placeholder:(0,n.css)({color:s.colors.text.disabled,opacity:1}),icon:(0,n.css)({marginRight:s.spacing(.5)})}}},20848:(Q,A,e)=>{"use strict";e.d(A,{IF:()=>P,Xc:()=>D,sU:()=>b});var n=e(76932),a=e(16749),i=e(57353),r=e(68420),o=e(31733),g=e(17201),u=e(40137),c=e(10020),l=e(89026),d=e(21568),f=e(76067),m=e(82926),v=e(5460),E=e(82336),p=e(73351),h=e(58037),s=e(9877),y=e(35771);function D(I){const[M,x]=(0,o.useState)(!1),{value:L,onMoveBackward:S,onMoveForward:U,onZoom:N,timeZone:w,fiscalYearStartMonth:G,timeSyncButton:_,isSynced:K,history:k,onChangeTimeZone:z,onChangeFiscalYearStartMonth:W,hideQuickRanges:Z,widthOverride:H,isOnCanvas:X,onToolbarTimePickerClick:Y}=I,ne=ke=>{I.onChange(ke),x(!1)};(0,o.useEffect)(()=>{M&&Y&&Y()},[M,Y]);const se=()=>{x(ke=>!ke)},re=()=>{x(!1)},ge=(0,o.createRef)(),q=(0,o.createRef)(),{overlayProps:me,underlayProps:oe}=(0,r.Ir)({onClose:re,isDismissable:!0,isOpen:M,shouldCloseOnInteractOutside:ke=>!q.current?.contains(ke)},ge),{dialogProps:fe}=(0,a.R)({},ge),ve=(0,f.wW)(O),{modalBackdrop:pe}=(0,f.wW)(E.J),Me=!g.isRelativeTime(L.raw.from)||!g.isRelativeTime(L.raw.to),Pe=K?"active":X?"canvas":"default",he=L?.to?.isBefore(L.from)?"exclamation-triangle":"clock-nine",Le=T(L,w);return o.createElement(v.h,{className:ve.container},Me&&o.createElement(p.h,{"aria-label":(0,m.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:Pe,onClick:S,icon:"angle-left",narrow:!0}),o.createElement(h.u,{ref:q,content:o.createElement(P,{timeRange:L,timeZone:w}),placement:"bottom",interactive:!0},o.createElement(p.h,{"data-testid":d.wl.components.TimePicker.openButton,"aria-label":(0,m.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:Le}),"aria-controls":"TimePickerContent",onClick:se,icon:he,isOpen:M,variant:Pe},o.createElement(b,{...I}))),M&&o.createElement("div",{"data-testid":d.wl.components.TimePicker.overlayContent},o.createElement("div",{role:"presentation",className:(0,n.cx)(pe,ve.backdrop),...oe}),o.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("section",{className:ve.content,ref:ge,...me,...fe},o.createElement(s.x,{timeZone:w,fiscalYearStartMonth:G,value:L,onChange:ne,quickOptions:y.r,history:k,showHistory:!0,widthOverride:H,onChangeTimeZone:z,onChangeFiscalYearStartMonth:W,hideQuickRanges:Z})))),_,Me&&o.createElement(p.h,{"aria-label":(0,m.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:U,icon:"angle-right",narrow:!0,variant:Pe}),o.createElement(h.u,{content:C,placement:"bottom"},o.createElement(p.h,{"aria-label":(0,m.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:N,icon:"search-minus",variant:Pe})))}D.displayName="TimeRangePicker";const C=()=>o.createElement(o.Fragment,null,o.createElement(m.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",o.createElement("br",null)," CTRL+Z")),P=({timeRange:I,timeZone:M})=>{const x=(0,f.wW)(R);return o.createElement(o.Fragment,null,(0,u.dq)(I.from,{timeZone:M}),o.createElement("div",{className:"text-center"},o.createElement(m.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,u.dq)(I.to,{timeZone:M}),o.createElement("div",{className:"text-center"},o.createElement("span",{className:x.utc},(0,c.Vs)(M))))},b=(0,o.memo)(({hideText:I,value:M,timeZone:x})=>{const L=(0,f.wW)(R);return I?null:o.createElement("span",{className:L.container},o.createElement("span",null,T(M,x)),o.createElement("span",{className:L.utc},g.describeTimeRangeAbbreviation(M,x)))});b.displayName="TimePickerButtonLabel";const T=(I,M)=>{const x={to:l.isMathString(I.raw.to)?I.raw.to:I.to,from:l.isMathString(I.raw.from)?I.raw.from:I.from};return g.describeTimeRange(x,M)},O=I=>({container:(0,n.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,n.css)({display:"none",[I.breakpoints.down("sm")]:{display:"block"}}),content:(0,n.css)({position:"absolute",right:0,top:"116%",zIndex:I.zIndex.dropdown,[I.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:I.zIndex.modal}})}),R=I=>({container:(0,n.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,n.css)({color:I.v1.palette.orange,fontSize:I.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:I.typography.fontWeightMedium})})},11335:(Q,A,e)=>{"use strict";e.d(A,{mg:()=>v,uT:()=>c});var n=e(76932),a=e(31733),i=e(51377),r=e(10020),o=e(42016),g=e(76067),u=e(49311);function c({onChange:E,from:p,to:h,timeZone:s}){const y=l(p,h,new Date,s),D=f(E,s),C=(0,g.wW)(v);return a.createElement(i.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:C.body,tileClassName:C.title,value:y,nextLabel:a.createElement(u.J,{name:"angle-right"}),prevLabel:a.createElement(u.J,{name:"angle-left"}),onChange:D,locale:"en"})}c.displayName="Body";function l(E,p,h=new Date,s){let y=E.isValid()?E.toDate():h,D=p.isValid()?p.toDate():h;return s&&([y,D]=d(y,D,s)),y>D?[D,y]:[y,D]}function d(E,p,h){const s=(0,r.nA)(h);if(!s)return[E,p];const y=s.utcOffset(E.getTime()),D=s.utcOffset(p.getTime()),C=E.getTimezoneOffset(),P=p.getTimezoneOffset(),b=y-C,T=D-P,O=new Date(E.getTime()-b*1e3*60),R=new Date(p.getTime()-T*1e3*60);return[O,R]}function f(E,p){return(0,a.useCallback)(h=>{if(!Array.isArray(h))return console.error("onCalendarChange: should be run in selectRange={true}");if(h[0]&&h[1]){const s=(0,o.J)(m(h[0]),{timeZone:p}),y=(0,o.J)(m(h[1]),{timeZone:p});E(s,y)}},[E,p])}function m(E){return[E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes(),E.getSeconds()]}const v=E=>{const p=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,n.css)({color:E.colors.text.primary,backgroundColor:E.colors.background.primary,fontSize:E.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:E.colors.action.disabledText}}),body:(0,n.css)({zIndex:E.zIndex.modal,backgroundColor:E.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:E.colors.text.primary,border:0,fontWeight:E.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:E.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${p}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:E.colors.primary.contrastText,fontWeight:E.typography.fontWeightMedium,background:E.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:E.colors.primary.contrastText,fontWeight:E.typography.fontWeightMedium,background:E.colors.primary.main,abbr:{backgroundColor:E.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${p}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${p}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},9877:(Q,A,e)=>{"use strict";e.d(A,{x:()=>pe});var n=e(76932),a=e(31733),i=e(74011),r=e(17201),o=e(21568),g=e(76067),u=e(83998),c=e(82926),l=e(37758),d=e(76804),f=e(49311),m=e(69781),v=e(10020),E=e(51343),p=e(85765),h=e(96856),s=e(38834),y=e(60100),D=e(60153),C=e(87512),P=e(88971),b=e(35771);const T=le=>{const{timeZone:Re,fiscalYearStartMonth:Ae,timestamp:Oe=Date.now(),onChangeTimeZone:$e,onChangeFiscalYearStartMonth:Ye}=le,[Ne,je]=(0,a.useState)(!1),[ut,Fe]=(0,a.useState)("tz"),Te=(0,a.useCallback)(ae=>{ae&&ae.stopPropagation(),je(!Ne)},[Ne,je]),Ve=(0,g.wW)(O);if(!(0,m.isString)(Re))return null;const tt=(0,v.Pr)(Re,Oe);return tt?a.createElement("div",null,a.createElement("section",{"aria-label":(0,c.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Ve.container},a.createElement("div",{className:Ve.timeZoneContainer},a.createElement("div",{className:Ve.timeZone},a.createElement(P.d,{title:tt.name}),a.createElement("div",{className:Ve.spacer}),a.createElement(D.K,{info:tt})),a.createElement(C.v,{timeZone:Re,timestamp:Oe})),a.createElement("div",{className:Ve.spacer}),a.createElement(E.zx,{variant:"secondary",onClick:Te,size:"sm"},a.createElement(c.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),Ne?a.createElement("div",{className:Ve.editContainer},a.createElement("div",null,a.createElement(h.S,{value:ut,options:[{label:(0,c.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,c.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:Fe})),ut==="tz"?a.createElement("section",{"data-testid":o.wl.components.TimeZonePicker.containerV2,className:(0,n.cx)(Ve.timeZoneContainer,Ve.timeSettingContainer)},a.createElement(y.O,{includeInternal:!0,onChange:ae=>{Te(),(0,m.isString)(ae)&&$e(ae)},onBlur:Te,menuShouldPortal:!1})):a.createElement("section",{"data-testid":o.wl.components.TimeZonePicker.containerV2,className:(0,n.cx)(Ve.timeZoneContainer,Ve.timeSettingContainer)},a.createElement(p.g,{className:Ve.fiscalYearField,label:(0,c.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},a.createElement(s.Ph,{value:Ae,menuShouldPortal:!1,options:b.E,onChange:ae=>{Ye&&Ye(ae.value??0)}})))):null):null},O=le=>({container:(0,n.css)({borderTop:`1px solid ${le.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,n.css)({borderTop:`1px solid ${le.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,n.css)({marginLeft:"7px"}),timeSettingContainer:(0,n.css)({paddingTop:le.spacing(1)}),fiscalYearField:(0,n.css)({marginBottom:0}),timeZoneContainer:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})});var R=e(8463),I=e(42016),M=e(40137),x=e(64516),L=e(58037),S=e(42617),U=e(16749),N=e(57353),w=e(68420),G=e(82336),_=e(11335),K=e(37739);function k({onClose:le,onApply:Re}){return a.createElement(K.K,{gap:2,justifyContent:"space-between"},a.createElement(E.zx,{variant:"secondary",onClick:le},a.createElement(c.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")),a.createElement(E.zx,{onClick:Re},a.createElement(c.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")))}k.displayName="Footer";var z=e(41354);function W({onClose:le}){return a.createElement(K.K,{justifyContent:"space-between"},a.createElement(R.r,null,a.createElement(c.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),a.createElement(z.h,{"data-testid":o.wl.components.TimePicker.calendar.closeButton,tooltip:(0,c.t)("time-picker.calendar.close","Close calendar"),name:"times",variant:"secondary",onClick:le}))}W.displayName="Header";const Z=(le,Re=!1)=>({container:(0,n.css)({top:0,position:"absolute",[`${Re?"left":"right"}`]:"546px"}),modalContainer:(0,n.css)({label:"modalContainer",margin:"0 auto"}),calendar:(0,n.css)({display:"flex",flexDirection:"column",gap:le.spacing(1),padding:le.spacing(1),label:"calendar",boxShadow:le.shadows.z3,backgroundColor:le.colors.background.primary,border:`1px solid ${le.colors.border.weak}`,borderRadius:le.shape.radius.default}),modal:(0,n.css)({label:"modal",boxShadow:le.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:le.zIndex.modal})});function H(le){const Re=(0,g.l4)(),{modalBackdrop:Ae}=(0,g.wW)(G.J),Oe=Z(Re,le.isReversed),{isOpen:$e,isFullscreen:Ye,onClose:Ne}=le,je=a.createRef(),{dialogProps:ut}=(0,U.R)({"aria-label":o.wl.components.TimePicker.calendar.label},je),{overlayProps:Fe}=(0,w.Ir)({isDismissable:!0,isOpen:$e,onClose:Ne},je),Te=!Ye;if(!$e)return null;const Ve=a.createElement("section",{className:Oe.calendar,ref:je,...Fe,...ut,"data-testid":o.wl.components.TimePicker.calendar.label},a.createElement(W,{...le}),a.createElement(_.uT,{...le}),Te&&a.createElement(k,{...le}));return Te?a.createElement(w.Xj,null,a.createElement("div",{className:Ae}),a.createElement(N.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{className:Oe.modal},a.createElement("div",{className:Oe.modalContainer},Ve)))):a.createElement(N.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},a.createElement("div",{className:Oe.container},Ve))}const X=(0,a.memo)(H);H.displayName="TimePickerCalendar";const Y={default:()=>(0,c.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,c.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},ne=le=>{const{value:Re,isFullscreen:Ae=!1,timeZone:Oe,onApply:$e,isReversed:Ye,fiscalYearStartMonth:Ne}=le,[je,ut]=re(Re.raw.from,Re.raw.to,Oe),Fe=(0,g.wW)(q),[Te,Ve]=(0,a.useState)(je),[tt,ae]=(0,a.useState)(ut),[J,te]=(0,a.useState)(!1),de=(0,a.useId)(),be=(0,a.useId)();(0,a.useEffect)(()=>{const[lt,ft]=re(Re.raw.from,Re.raw.to,Oe);Ve(lt),ae(ft)},[Re.raw.from,Re.raw.to,Oe]);const De=(0,a.useCallback)(lt=>{lt.preventDefault(),te(!0)},[te]),Ue=(0,a.useCallback)(()=>{if(tt.invalid||Te.invalid)return;const lt={from:Te.value,to:tt.value},ft=r.convertRawToRange(lt,Oe,Ne);$e(ft)},[Te.invalid,Te.value,$e,Oe,tt.invalid,tt.value,Ne]),We=(0,a.useCallback)((lt,ft)=>{const[yt,wt]=re(lt,ft,Oe);Ve(yt),ae(wt)},[Oe]),et=lt=>{lt.key==="Enter"&&Ue()},ze=r.convertRawToRange({from:"now/fy",to:"now/fy"},Oe,Ne),_e=(0,c.t)("time-picker.range-content.fiscal-year","Fiscal year"),qe=a.createElement("div",{className:Fe.tooltip},r.isFiscal(Re)?a.createElement(L.u,{content:`${_e}: ${ze.from.format("MMM-DD")} - ${ze.to.format("MMM-DD")}`},a.createElement(f.J,{name:"info-circle"})):null),at=a.createElement(E.zx,{"aria-label":(0,c.t)("time-picker.range-content.open-input-calendar","Open calendar"),"data-testid":o.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:De});return a.createElement("div",null,a.createElement("div",{className:Fe.fieldContainer},a.createElement(p.g,{label:(0,c.t)("time-picker.range-content.from-input","From"),invalid:Te.invalid,error:Te.errorMessage},a.createElement(x.I,{id:de,onClick:lt=>lt.stopPropagation(),onChange:lt=>We(lt.currentTarget.value,tt.value),addonAfter:at,onKeyDown:et,"data-testid":o.wl.components.TimePicker.fromField,value:Te.value})),qe),a.createElement("div",{className:Fe.fieldContainer},a.createElement(p.g,{label:(0,c.t)("time-picker.range-content.to-input","To"),invalid:tt.invalid,error:tt.errorMessage},a.createElement(x.I,{id:be,onClick:lt=>lt.stopPropagation(),onChange:lt=>We(Te.value,lt.currentTarget.value),addonAfter:at,onKeyDown:et,"data-testid":o.wl.components.TimePicker.toField,value:tt.value})),qe),a.createElement(E.zx,{"data-testid":o.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Ue},a.createElement(c.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),a.createElement(X,{isFullscreen:Ae,isOpen:J,from:(0,I.J)(Te.value,{timeZone:Oe}),to:(0,I.J)(tt.value,{timeZone:Oe}),onApply:Ue,onClose:()=>te(!1),onChange:We,timeZone:Oe,isReversed:Ye}))};function se(le,Re,Ae){const Oe={from:le,to:Re},$e=r.convertRawToRange(Oe,Ae);return!($e.from.isSame($e.to)||$e.from.isBefore($e.to))}function re(le,Re,Ae){const Oe=ge(le,Ae),$e=ge(Re,Ae),Ye=!(0,S.J)(Oe,!1,Ae),Ne=!(0,S.J)($e,!0,Ae),je=se(Oe,$e,Ae)&&!Ne;return[{value:Oe,invalid:Ye||je,errorMessage:je&&!Ye?Y.range():Y.default()},{value:$e,invalid:Ne,errorMessage:Y.default()}]}function ge(le,Re){return(0,i.v9)(le)?(0,M.dq)(le,{timeZone:Re}):le}function q(le){return{fieldContainer:(0,n.css)({display:"flex"}),tooltip:(0,n.css)({paddingLeft:le.spacing(1),paddingTop:le.spacing(3)})}}var me=e(97526);const oe=(le,Re)=>r.convertRawToRange({from:le.from,to:le.to},Re),fe=(le,Re)=>{const Ae=(0,M.dq)(le.from,{timeZone:Re}),Oe=(0,M.dq)(le.to,{timeZone:Re});return{from:Ae,to:Oe,display:`${Ae} to ${Oe}`}},ve=le=>{const{quickOptions:Re=[],isReversed:Ae,isFullscreen:Oe,hideQuickRanges:$e,timeZone:Ye,fiscalYearStartMonth:Ne,value:je,onChange:ut,history:Fe,showHistory:Te,className:Ve,hideTimeZone:tt,onChangeTimeZone:ae,onChangeFiscalYearStartMonth:J}=le,te=!Fe?.length,de=Oe&&Te||!Oe&&(Te&&!te||!$e),be=(0,g.wW)(ke,Ae,$e,de,Oe),De=he(Fe,Ye),Ue=Le(je.raw,Re),[We,et]=(0,a.useState)(""),ze=Re.filter(qe=>qe.display.toLowerCase().includes(We.toLowerCase())),_e=qe=>ut(oe(qe));return a.createElement("div",{id:"TimePickerContent",className:(0,n.cx)(be.container,Ve)},a.createElement("div",{className:be.body},(!Oe||!$e)&&a.createElement("div",{className:be.rightSide},a.createElement("div",{className:be.timeRangeFilter},a.createElement(d.H,{width:0,autoFocus:!0,value:We,onChange:et,placeholder:(0,c.t)("time-picker.content.filter-placeholder","Search quick ranges")})),a.createElement(l.$,null,!Oe&&a.createElement(Me,{...le,historyOptions:De}),!$e&&a.createElement(me.V,{options:ze,onChange:_e,value:Ue}))),Oe&&a.createElement("div",{className:be.leftSide},a.createElement(Pe,{...le,historyOptions:De}))),!tt&&Oe&&a.createElement(T,{timeZone:Ye,fiscalYearStartMonth:Ne,onChangeTimeZone:ae,onChangeFiscalYearStartMonth:J}))},pe=le=>{const{widthOverride:Re}=le,Ae=(0,g.l4)(),Oe=(Re||window.innerWidth)>=Ae.breakpoints.values.lg;return a.createElement(ve,{...le,isFullscreen:Oe})},Me=le=>{const{value:Re,hideQuickRanges:Ae,onChange:Oe,timeZone:$e,historyOptions:Ye=[],showHistory:Ne}=le,je=(0,g.wW)(ot),ut=(0,i.v9)(Re.raw.from)||(0,i.v9)(Re.raw.to),[Fe,Te]=(0,a.useState)(!ut),Ve=Ae?!1:Fe,tt=ae=>Oe(oe(ae,$e));return a.createElement("fieldset",null,a.createElement("div",{className:je.header},a.createElement("button",{type:"button",className:je.expandButton,onClick:()=>{Ae||Te(!Ve)},"data-testid":o.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Ve,"aria-controls":"expanded-timerange"},a.createElement(R.r,null,a.createElement(c.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Ae&&a.createElement(f.J,{name:Ve?"angle-down":"angle-up"}))),!Ve&&a.createElement("div",{className:je.body,id:"expanded-timerange"},a.createElement("div",{className:je.form},a.createElement(ne,{value:Re,onApply:Oe,timeZone:$e,isFullscreen:!1})),Ne&&a.createElement(me.V,{title:(0,c.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Ye,onChange:tt,placeholderEmpty:null})))},Pe=le=>{const{onChange:Re,value:Ae,timeZone:Oe,fiscalYearStartMonth:$e,isReversed:Ye,historyOptions:Ne}=le,je=(0,g.wW)(it,le.hideQuickRanges),ut=Fe=>Re(oe(Fe,Oe));return a.createElement(a.Fragment,null,a.createElement("div",{className:je.container},a.createElement("div",{className:je.title,"data-testid":o.wl.components.TimePicker.absoluteTimeRangeTitle},a.createElement(R.r,null,a.createElement(c.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),a.createElement(ne,{value:Ae,timeZone:Oe,fiscalYearStartMonth:$e,onApply:Re,isFullscreen:!0,isReversed:Ye})),le.showHistory&&a.createElement("div",{className:je.recent},a.createElement(me.V,{title:(0,c.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Ne||[],onChange:ut,placeholderEmpty:a.createElement(Ee,null)})))},Ee=(0,a.memo)(()=>{const le=(0,g.wW)(ce),Re=(0,c.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return a.createElement("div",{className:le.container},a.createElement("div",null,a.createElement("span",null,Re)),a.createElement(c.c,{i18nKey:"time-picker.content.empty-recent-list-docs"},a.createElement("div",null,a.createElement("a",{className:le.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),a.createElement("span",null," to find out more about how to enter custom time ranges."))))});function he(le,Re){return!Array.isArray(le)||le.length===0?[]:le.map(Ae=>fe(Ae,Re))}Ee.displayName="EmptyRecentList";const Le=(le,Re)=>(0,a.useMemo)(()=>{if(r.isRelativeTimeRange(le))return Re.find(Ae=>Ae.from===le.from&&Ae.to===le.to)},[le,Re]),ke=(le,Re,Ae,Oe,$e)=>({container:(0,n.css)({background:le.colors.background.primary,boxShadow:le.shadows.z3,width:`${$e?"546px":"262px"}`,borderRadius:le.shape.radius.default,border:`1px solid ${le.colors.border.weak}`,[`${Re?"left":"right"}`]:0}),body:(0,n.css)({display:"flex",flexDirection:"row-reverse",height:`${Oe?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,n.css)({display:"flex",flexDirection:"column",borderRight:`${Re?"none":`1px solid ${le.colors.border.weak}`}`,width:`${Ae?"100%":"60%"}`,overflow:"hidden",order:Re?1:0}),rightSide:(0,n.css)({width:`${$e?"40%":"100%"}; !important`,borderRight:Re?`1px solid ${le.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,n.css)({padding:le.spacing(1)}),spacing:(0,n.css)({marginTop:"16px"})}),ot=le=>({header:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${le.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,n.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,u.getFocusStyles)(le)}),body:(0,n.css)({borderBottom:`1px solid ${le.colors.border.weak}`}),form:(0,n.css)({padding:"7px 9px 7px 9px"})}),it=(le,Re)=>({container:(0,n.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:Re?"11px":"20%"}),title:(0,n.css)({marginBottom:"11px"}),recent:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:le.spacing(1)})}),ce=le=>({container:(0,n.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,n.css)({color:le.colors.text.link})})},8463:(Q,A,e)=>{"use strict";e.d(A,{r:()=>o});var n=e(76932),a=e(31733),i=e(76067);const r=g=>({text:(0,n.css)({fontSize:g.typography.size.md,fontWeight:g.typography.fontWeightMedium,color:g.colors.text.primary,margin:0,display:"flex"})}),o=(0,a.memo)(({children:g})=>{const u=(0,i.wW)(r);return a.createElement("h3",{className:u.text},g)});o.displayName="TimePickerTitle"},12881:(Q,A,e)=>{"use strict";e.d(A,{q:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(20848),o=e(42617);const g=(0,a.memo)(function({hideText:l,value:d,timeZone:f="browser",placeholder:m="No time range selected",className:v}){const E=(0,i.wW)(u);return l?null:a.createElement("span",{className:v},(0,o.v)(d)?a.createElement(r.sU,{value:d,timeZone:f}):a.createElement("span",{className:E.placeholder},m))}),u=c=>({placeholder:(0,n.css)({color:c.colors.text.disabled,opacity:1})})},97526:(Q,A,e)=>{"use strict";e.d(A,{V:()=>d});var n=e(76932),a=e(31733),i=e(76067),r=e(82926),o=e(8463),g=e(79117),u=e(83998);const c=h=>({container:(0,n.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,n.css)({background:h.colors.action.selected,fontWeight:h.typography.fontWeightMedium}),radio:(0,n.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,u.getFocusStyles)(h)}),label:(0,n.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:h.colors.action.hover,cursor:"pointer"}})}),l=(0,a.memo)(({value:h,onSelect:s,selected:y=!1,name:D})=>{const C=(0,i.wW)(c),P=(0,g.Z)();return a.createElement("li",{className:(0,n.cx)(C.container,y&&C.selected)},a.createElement("input",{className:C.radio,checked:y,name:D,type:"checkbox",id:P,onChange:()=>s(h)}),a.createElement("label",{className:C.label,htmlFor:P},h.display))});l.displayName="TimeRangeOption";const d=h=>{const s=(0,i.wW)(E),{title:y,options:D,placeholderEmpty:C}=h;return typeof C<"u"&&D.length<=0?a.createElement(a.Fragment,null,C):y?a.createElement("section",{"aria-label":y},a.createElement("fieldset",null,a.createElement("div",{className:s.title},a.createElement(o.r,null,y)),a.createElement(f,{...h}))):a.createElement(f,{...h})},f=({options:h,value:s,onChange:y,title:D})=>{const C=(0,i.wW)(p);return a.createElement(a.Fragment,null,a.createElement("ul",{"aria-roledescription":(0,r.t)("time-picker.time-range.aria-role","Time range selection")},h.map((P,b)=>a.createElement(l,{key:m(P,b),value:P,selected:v(P,s),onSelect:y,name:D??(0,r.t)("time-picker.time-range.default-title","Time ranges")}))),a.createElement("div",{className:C.grow}))};function m(h,s){return`${h.from}-${h.to}-${s}`}function v(h,s){return!s||!h?!1:s.from===h.from&&s.to===h.to}const E=()=>({title:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})}),p=()=>({grow:(0,n.css)({flexGrow:1,alignItems:"flex-start"})})},60100:(Q,A,e)=>{"use strict";e.d(A,{O:()=>y});var n=e(69781),a=e(31733),i=e(10020),r=e(82926),o=e(38834),g=e(76932),u=e(76067);const c=O=>{const{children:R,label:I}=O,M=(0,u.wW)(l);return I?a.createElement("div",null,a.createElement("div",{className:M.header},a.createElement("span",{className:M.label},I)),R):a.createElement("div",null,R)},l=O=>({header:(0,g.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${O.colors.border.weak}`,textTransform:"capitalize"}),label:(0,g.css)({fontSize:O.typography.size.sm,color:O.colors.text.secondary,fontWeight:O.typography.fontWeightMedium})});var d=e(87512),f=e(49311),m=e(60153),v=e(88971);const E="tz-utc-offset",p=O=>{const{children:R,innerProps:I,innerRef:M,data:x,isSelected:L,isFocused:S}=O,U=(0,u.wW)(s),N=Date.now(),w=(0,g.cx)(U.container,S&&U.containerFocused);if(!(0,n.isString)(x.value))return null;const G=(0,i.Pr)(x.value,N);return a.createElement("div",{className:w,...I,ref:M,"aria-label":"Select option"},a.createElement("div",{className:(0,g.cx)(U.leftColumn,U.row)},a.createElement("div",{className:(0,g.cx)(U.leftColumn,U.wideRow)},a.createElement(v.d,{title:R}),a.createElement("div",{className:U.spacer}),a.createElement(m.K,{info:G})),a.createElement("div",{className:U.rightColumn},a.createElement(d.v,{timeZone:G?.ianaName||x.value,timestamp:N,className:E}),L&&a.createElement("span",null,a.createElement(f.J,{name:"check"})))))},h=O=>{const{children:R,innerProps:I,innerRef:M,data:x,isSelected:L,isFocused:S}=O,U=(0,u.wW)(s),N=Date.now(),w=(0,g.cx)(U.container,S&&U.containerFocused);if(!(0,n.isString)(x.value))return null;const G=(0,i.Pr)(x.value,N);return a.createElement("div",{className:w,...I,ref:M,"aria-label":"Select option"},a.createElement("div",{className:U.body},a.createElement("div",{className:U.row},a.createElement("div",{className:U.leftColumn},a.createElement(v.d,{title:R})),a.createElement("div",{className:U.rightColumn},L&&a.createElement("span",null,a.createElement(f.J,{name:"check"})))),a.createElement("div",{className:U.row},a.createElement("div",{className:U.leftColumn},a.createElement(m.K,{info:G})),a.createElement("div",{className:U.rightColumn},a.createElement(d.v,{timestamp:N,timeZone:G?.ianaName||x.value,className:E})))))},s=O=>({container:(0,g.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:O.colors.action.hover}}),containerFocused:(0,g.css)({background:O.colors.action.hover}),body:(0,g.css)({display:"flex",fontWeight:O.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,g.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,g.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,g.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,g.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,g.css)({marginLeft:"6px"})}),y=O=>{const{onChange:R,width:I,autoFocus:M=!1,onBlur:x,value:L,includeInternal:S=!1,disabled:U=!1,inputId:N,menuShouldPortal:w=!0,openMenuOnFocus:G=!0}=O,_=D(S),K=C(_,L),k=b(),z=I&&I<=45?h:p,W=(0,a.useCallback)(Z=>{if(!Z||!(0,n.isString)(Z.value))return R(L);R(Z.value)},[R,L]);return a.createElement(o.Ph,{inputId:N,value:K,placeholder:(0,r.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:M,menuShouldPortal:w,openMenuOnFocus:G,width:I,filterOption:k,options:_,onChange:W,onBlur:x,components:{Option:z,Group:c},disabled:U,"aria-label":(0,r.t)("time-picker.zone.select-aria-label","Time zone picker")})},D=O=>{const R=Date.now();return(0,i.$8)(O).map(M=>{const x=M.zones.reduce((L,S)=>{const U=(0,i.Pr)(S,R);return U&&L.push({label:U.name,value:U.zone,searchIndex:T(U,R)}),L},[]);return{label:M.name,options:x}})},C=(O,R)=>(0,a.useMemo)(()=>{if(R===void 0)return;const I=(0,n.toLower)(R);return O.find(x=>x.label?I.startsWith((0,n.toLower)(x.label)):P(I))?.options.find(x=>(0,n.isEmpty)(I)?x.value===i.RQ.default:(0,n.toLower)(x.value)===I)},[O,R]),P=O=>{switch(O){case i.RQ.default:case i.RQ.localBrowserTime:case i.RQ.utc:return!0;default:return!1}},b=()=>(0,a.useCallback)((O,R)=>!R||!O.data||!O.data.searchIndex?!0:O.data.searchIndex.indexOf((0,n.toLower)(R))>-1,[]),T=(O,R)=>{const I=[(0,n.toLower)(O.name),(0,n.toLower)(O.abbreviation),(0,n.toLower)((0,d.k)(R,O.zone))];for(const M of O.countries)I.push((0,n.toLower)(M.name)),I.push((0,n.toLower)(M.code));return I.join("|")}},60153:(Q,A,e)=>{"use strict";e.d(A,{K:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({info:u})=>{const c=(0,i.wW)(g),l=o(u);return u?a.createElement("div",{className:c.description},l):null},o=u=>(0,a.useMemo)(()=>{const c=[];if(!u)return"";if(u.name==="Europe/Simferopol")return"Ukraine, EEST";if(u.countries.length>0){const l=u.countries[0];c.push(l.name)}return u.abbreviation&&c.push(u.abbreviation),c.join(", ")},[u]),g=u=>({description:(0,n.css)({fontWeight:"normal",fontSize:u.typography.size.sm,color:u.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},87512:(Q,A,e)=>{"use strict";e.d(A,{k:()=>c,v:()=>u});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(40137),g=e(76067);const u=d=>{const{timestamp:f,timeZone:m,className:v}=d,E=(0,g.wW)(l);return(0,a.isString)(m)?r.createElement(r.Fragment,null,r.createElement("span",{className:(0,n.cx)(E.offset,v)},c(f,m))):null},c=(d,f)=>{const m=(0,o.dq)(d,{timeZone:f,format:"Z"});return m==="+00:00"?"UTC":`UTC${m}`},l=d=>{const f=(0,n.css)({fontWeight:"normal",fontSize:d.typography.size.sm,color:d.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,n.css)(f,{color:d.colors.text.primary,background:d.colors.background.secondary,padding:"2px 5px",borderRadius:d.shape.radius.default,marginLeft:"4px"})}}},88971:(Q,A,e)=>{"use strict";e.d(A,{d:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({title:g})=>{const u=(0,i.wW)(o);return g?a.createElement("span",{className:u.title},g):null},o=g=>({title:(0,n.css)({fontWeight:g.typography.fontWeightRegular,textOverflow:"ellipsis"})})},55048:(Q,A,e)=>{"use strict";e.d(A,{z:()=>o});var n=e(31733),a=e(21568),i=e(38834);const r=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],o=g=>{const{onChange:u,width:c,autoFocus:l=!1,onBlur:d,value:f,disabled:m=!1,inputId:v}=g,E=(0,n.useCallback)(p=>{p.value!==void 0&&u(p.value)},[u]);return n.createElement(i.Ph,{inputId:v,value:r.find(p=>p.value===f)?.value,placeholder:a.wl.components.WeekStartPicker.placeholder,autoFocus:l,openMenuOnFocus:!0,width:c,options:r,onChange:E,onBlur:d,disabled:m})}},35771:(Q,A,e)=>{"use strict";e.d(A,{E:()=>a,r:()=>n});const n=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],a=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},42617:(Q,A,e)=>{"use strict";e.d(A,{J:()=>r,v:()=>o});var n=e(74011),a=e(89026),i=e(42016);function r(g,u,c){return(0,n.v9)(g)?g.isValid():a.isMathString(g)?a.isValid(g):(0,i.J)(g,{roundUp:u,timeZone:c}).isValid()}function o(g){return a.isValid(g.from)&&a.isValid(g.to)}},32528:(Q,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({direction:g="horizontal",spacing:u=2})=>{const c=(0,i.wW)(o,u);return g==="vertical"?a.createElement("div",{className:c.verticalDivider}):a.createElement("hr",{className:c.horizontalDivider})};r.displayName="Divider";const o=(g,u)=>({horizontalDivider:(0,n.css)({borderTop:`1px solid ${g.colors.border.weak}`,margin:g.spacing(u,0),width:"100%"}),verticalDivider:(0,n.css)({borderRight:`1px solid ${g.colors.border.weak}`,margin:g.spacing(0,u),height:"100%"})})},59899:(Q,A,e)=>{"use strict";e.d(A,{d:()=>v});var n=e(76932),a=e(16749),i=e(57353),r=e(68420),o=e(18325),g=e(31733),u=e(21568),c=e(76067),l=e(82926),d=e(37758),f=e(41354),m=e(36717);function v({children:h,onClose:s,closeOnMaskClick:y=!0,scrollableContent:D=!0,title:C,subtitle:P,width:b,size:T="md",tabs:O}){const R=(0,c.wW)(p),I=g.useRef(null),{dialogProps:M,titleProps:x}=(0,a.R)({},I),{overlayProps:L}=(0,r.Ir)({isDismissable:!1,isOpen:!0,onClose:s},I);E();const S=(0,n.cx)(R.drawer,!b&&R.sizes[T]),U=g.createElement("div",{className:R.content},h);return g.createElement(o.Z,{open:!0,onClose:s,placement:"right",width:b??"",getContainer:".main-view",className:R.drawerContent,rootClassName:S,motion:{motionAppear:!0,motionName:R.drawerMotion},maskClassName:R.mask,maskClosable:y,maskMotion:{motionAppear:!0,motionName:R.maskMotion}},g.createElement(i.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},g.createElement("div",{"aria-label":typeof C=="string"?u.wl.components.Drawer.General.title(C):u.wl.components.Drawer.General.title("no title"),className:R.container,...L,...M,ref:I},typeof C=="string"&&g.createElement("div",{className:(0,n.cx)(R.header,!!O&&R.headerWithTabs)},g.createElement("div",{className:R.actions},g.createElement(f.h,{name:"times",variant:"secondary",onClick:s,"data-testid":u.wl.components.Drawer.General.close,tooltip:(0,l.t)("drawer.close","Close Drawer")})),g.createElement("div",{className:R.titleWrapper},g.createElement(m.x,{element:"h3",...x},C),P&&g.createElement("div",{className:R.subtitle},P),O&&g.createElement("div",{className:R.tabsWrapper},O))),typeof C!="string"&&C,D?g.createElement(d.$,null,U):U)))}function E(){(0,g.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const p=h=>({container:(0,n.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%"}),drawer:(0,n.css)({".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:h.shadows.z3,[h.breakpoints.down("sm")]:{width:`calc(100% - ${h.spacing(2)}) !important`,minWidth:"0 !important"}}}),sizes:{sm:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:h.spacing(48)}}),md:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:h.spacing(60)}}),lg:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"85vw",minWidth:h.spacing(93),[h.breakpoints.down("md")]:{width:`calc(100% - ${h.spacing(2)}) !important`,minWidth:0}}})},drawerContent:(0,n.css)({backgroundColor:`${h.colors.background.primary} !important`,display:"flex",flexDirection:"column",overflow:"hidden",zIndex:h.zIndex.dropdown}),drawerMotion:(0,n.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${h.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,n.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${h.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,n.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:h.transitions.create("opacity")}}}),header:(0,n.css)({label:"drawer-header",flexGrow:0,padding:h.spacing(2,2,3),borderBottom:`1px solid ${h.colors.border.weak}`}),headerWithTabs:(0,n.css)({borderBottom:"none"}),actions:(0,n.css)({position:"absolute",right:h.spacing(1),top:h.spacing(1)}),titleWrapper:(0,n.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,n.css)({label:"drawer-subtitle",color:h.colors.text.secondary,paddingTop:h.spacing(1)}),content:(0,n.css)({padding:h.spacing(2),height:"100%",flexGrow:1}),tabsWrapper:(0,n.css)({label:"drawer-tabs",paddingLeft:h.spacing(2),margin:h.spacing(1,-1,-3,-3)})})},61513:(Q,A,e)=>{"use strict";e.d(A,{d:()=>m});var n=e(76932),a=e(67537),i=e(69710),r=e(8496),o=e(57353),g=e(31733),u=e(76067),c=e(63424),l=e(46213),d=e(73351);const f=E=>{const{className:p,options:h,value:s,onChange:y,narrow:D,variant:C,...P}=E,b=(0,u.wW)(v),[T,O]=(0,g.useState)(!1),R=[(0,a.cv)(0),(0,a.RR)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,a.uY)()],{context:I,refs:M,floatingStyles:x}=(0,i.YF)({open:T,placement:"bottom-end",onOpenChange:O,middleware:R,whileElementsMounted:r.Me}),L=(0,i.eS)(I),S=(0,i.bQ)(I),{getReferenceProps:U,getFloatingProps:N}=(0,i.NI)([S,L]),w=G=>{y(G),O(!1)};return g.createElement("div",{className:b.wrapper},g.createElement(d.h,{className:p,isOpen:T,narrow:D,variant:C,ref:M.setReference,...U(),...P},s?.label||(s?.value!=null?String(s?.value):null)),T&&g.createElement("div",{className:b.menuWrapper,ref:M.setFloating,...N(),style:x},g.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},g.createElement(c.v,{tabIndex:-1,onClose:()=>O(!1)},h.map(G=>g.createElement(l.s,{key:`${G.value}`,label:G.label??String(G.value),onClick:()=>w(G),active:G.value===s?.value,ariaChecked:G.value===s?.value,ariaLabel:G.ariaLabel||G.label,role:"menuitemradio"}))))))};f.displayName="ButtonSelect";const m=g.memo(f),v=E=>({wrapper:(0,n.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,n.css)({zIndex:E.zIndex.dropdown})})},67669:(Q,A,e)=>{"use strict";e.d(A,{L:()=>f});var n=e(76932),a=e(67537),i=e(69710),r=e(8496),o=e(57353),g=e(31733),u=e(54756),c=e(67978),l=e(17688),d=e(25108);const f=g.memo(({children:v,overlay:E,placement:p,offset:h,onVisibleChange:s})=>{const[y,D]=(0,g.useState)(!1),C=(0,g.useRef)(null);(0,g.useEffect)(()=>{s?.(y)},[s,y]);const P=[(0,a.cv)({mainAxis:h?.[0]??8,crossAxis:h?.[1]??0}),(0,a.RR)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,a.uY)()],{context:b,refs:T,floatingStyles:O}=(0,i.YF)({open:y,placement:(0,l.x)(p),onOpenChange:D,middleware:P,whileElementsMounted:r.Me}),R=(0,i.eS)(b),I=(0,i.bQ)(b),{getReferenceProps:M,getFloatingProps:x}=(0,i.NI)([I,R]),L=150,S=m(L),U=()=>{D(!1)},N=w=>{w.key==="Tab"&&D(!1)};return g.createElement(g.Fragment,null,g.cloneElement(v,{ref:T.setReference,...M()}),y&&g.createElement(d.h_,null,g.createElement(o.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},g.createElement("div",{ref:T.setFloating,style:O,onClick:U,onKeyDown:N},g.createElement(u.Z,{nodeRef:C,appear:!0,in:!0,timeout:{appear:L,exit:0,enter:0},classNames:S},g.createElement("div",{ref:C},c.renderOrCallToRender(E,{...x()})))))))});f.displayName="Dropdown";const m=v=>({appear:(0,n.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,n.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${v}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${v}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},75798:(Q,A,e)=>{"use strict";e.d(A,{K:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g})=>{const u=(0,i.wW)(o);return a.createElement("div",{className:u.container},g)},o=g=>({container:(0,n.css)({borderLeft:`3px solid ${g.colors.info.main}`,backgroundColor:`${g.colors.background.secondary}`,padding:g.spacing(2),minWidth:"350px",borderRadius:g.shape.radius.default,marginBottom:g.spacing(4)})})},8310:(Q,A,e)=>{"use strict";e.d(A,{Pf:()=>u,SV:()=>o,z4:()=>g});var n=e(31733),a=e(47121),i=e(25111),r=e(28069);class o extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(l,d){a.s?.api?.pushError(l),this.setState({error:l,errorInfo:d}),this.props.onError&&this.props.onError(l)}componentDidUpdate(l){const{dependencies:d,onRecover:f}=this.props;if(this.state.error&&d&&l.dependencies){for(let m=0;m<d.length;m++)if(d[m]!==l.dependencies[m]){this.setState({error:null,errorInfo:null}),f&&f();break}}}render(){const{children:l}=this.props,{error:d,errorInfo:f}=this.state;return l({error:d,errorInfo:f})}}class g extends n.PureComponent{render(){const{title:l,children:d,style:f,dependencies:m}=this.props;return n.createElement(o,{dependencies:m},({error:v,errorInfo:E})=>E?f==="alertbox"?n.createElement(i.b,{title:l||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},v&&v.toString(),n.createElement("br",null),E.componentStack)):n.createElement(r.X,{title:l||"",error:v,errorInfo:E}):d)}}g.defaultProps={title:"An unexpected error happened",style:"alertbox"};function u(c,l={}){const d=f=>n.createElement(g,{...l},n.createElement(c,{...f}));return d.displayName="WithErrorBoundary",d}},28069:(Q,A,e)=>{"use strict";e.d(A,{X:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({error:g,errorInfo:u,title:c})=>{const l=(0,i.wW)(o);return a.createElement("div",{className:l},a.createElement("h2",null,c),a.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),a.createElement("br",null),u&&u.componentStack))};r.displayName="ErrorWithStack";const o=()=>(0,n.css)({width:"500px",margin:"64px auto"})},54679:(Q,A,e)=>{"use strict";e.d(A,{A_:()=>p,Yo:()=>m});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(48412),g=e(91490),u=e(86850),c=e(76067),l=e(25111),d=e(49311),f=e(79159);function m({options:C,children:P,readAs:b,onLoad:T,fileListRenderer:O,onFileRemove:R}){const[I,M]=(0,r.useState)([]),[x,L]=(0,r.useState)([]),S=(0,u.Cf)("decbytes")(C?.maxSize?C?.maxSize:0),U=(0,r.useCallback)((Y,ne)=>{M(se=>se.map(re=>(re.id===Y.id&&ne(re),re)))},[]),N=(0,r.useCallback)((Y,ne,se)=>{let re=Y.map(y);if(C?.multiple===!1?M(re):M(ge=>[...ge,...re]),Z(ne),C?.onDrop)C.onDrop(Y,ne,se);else for(const ge of re){const q=new FileReader,me=()=>{b?q[b](ge.file):q.readAsText(ge.file)};U(ge,oe=>{oe.abortUpload=()=>{q.abort()},oe.retryUpload=()=>{U(ge,fe=>{fe.error=null,fe.progress=void 0}),me()}}),q.onabort=()=>{U(ge,oe=>{oe.error=new DOMException("Aborted")})},q.onprogress=oe=>{U(ge,fe=>{fe.progress=oe.loaded})},q.onload=()=>{T?.(q.result)},q.onerror=()=>{U(ge,oe=>{oe.error=q.error})},me()}},[T,C,b,U]),w=Y=>{const ne=I.filter(se=>Y.id!==se.id);M(ne),R?.(Y)},{getRootProps:G,getInputProps:_,isDragActive:K}=(0,o.uI)({...C,useFsAccessApi:!1,onDrop:N,accept:E(C?.accept)}),k=(0,c.l4)(),z=D(k,K),W=I.map(Y=>O?O(Y,w):r.createElement(f.K,{key:Y.id,file:Y,removeFile:w})),Z=Y=>{let ne=[];Y.map(se=>{se.errors.map(re=>{ne.findIndex(ge=>ge.code===re.code&&ge.message===re.message)===-1&&ne.push(re)})}),L(ne)},H=Y=>r.createElement("div",{className:z.errorAlert},r.createElement(l.b,{title:"Upload failed",severity:"error",onRemove:X},Y.map(ne=>{switch(ne.code){case g.jK.FileTooLarge:return r.createElement("div",{key:ne.message+ne.code},"File is larger than ",(0,u.zc)(S));default:return r.createElement("div",{key:ne.message+ne.code},ne.message)}}))),X=()=>{L([])};return r.createElement("div",{className:z.container},r.createElement("div",{"data-testid":"dropzone",...G({className:z.dropzone})},r.createElement("input",{..._()}),P??r.createElement(p,{primaryText:h(I,C)})),x.length>0&&H(x),r.createElement("small",{className:(0,n.cx)(z.small,z.acceptContainer)},C?.maxSize&&`Max file size: ${(0,u.zc)(S)}`,C?.maxSize&&C?.accept&&r.createElement("span",{className:z.acceptSeparator},"|"),C?.accept&&s(C.accept)),W)}function v(C){return["txt","json","csv","xls","yml"].some(P=>C.match(P))?"text/plain":"application/octet-stream"}function E(C){return(0,a.isString)(C)?{[v(C)]:[C]}:Array.isArray(C)?C.reduce((P,b)=>{const T=v(b);return P[T]=P[T]?[...P[T],b]:[b],P},{}):C}function p({primaryText:C="Drop file here or click to upload",secondaryText:P=""}){const b=(0,c.l4)(),T=D(b);return r.createElement("div",{className:(0,n.cx)(T.defaultDropZone),"data-testid":"file-drop-zone-default-children"},r.createElement(d.J,{className:(0,n.cx)(T.icon),name:"upload",size:"xl"}),r.createElement("h6",{className:(0,n.cx)(T.primaryText)},C),r.createElement("small",{className:T.small},P))}function h(C,P){return P?.multiple===void 0||P?.multiple?"Upload file":C.length?"Replace file":"Upload file"}function s(C){return(0,a.isString)(C)?`Accepted file type: ${C}`:Array.isArray(C)?`Accepted file types: ${C.join(", ")}`:`Accepted file types: ${Object.values(C).flat().join(", ")}`}function y(C){return{id:(0,a.uniqueId)("file"),file:C,error:null}}function D(C,P){return{container:(0,n.css)({display:"flex",flexDirection:"column",width:"100%",padding:C.spacing(2),borderRadius:C.shape.radius.default,border:`1px dashed ${C.colors.border.strong}`,backgroundColor:P?C.colors.background.secondary:C.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,n.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,n.css)({textAlign:"center"}),icon:(0,n.css)({marginBottom:C.spacing(1)}),primaryText:(0,n.css)({marginBottom:C.spacing(1)}),acceptContainer:(0,n.css)({textAlign:"center",margin:0}),acceptSeparator:(0,n.css)({margin:`0 ${C.spacing(1)}`}),small:(0,n.css)({color:C.colors.text.secondary}),errorAlert:(0,n.css)({paddingTop:"10px"})}}},79159:(Q,A,e)=>{"use strict";e.d(A,{K:()=>d});var n=e(76932),a=e(31733),i=e(86850),r=e(76067),o=e(82171),g=e(51343),u=e(49311),c=e(41354);const l="Remove file";function d({file:m,removeFile:v}){const E=(0,r.wW)(f),{file:p,progress:h,error:s,abortUpload:y,retryUpload:D}=m,C=()=>s?a.createElement(a.Fragment,null,a.createElement("span",{className:E.error},s.message),D&&a.createElement(c.h,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:D}),v&&a.createElement(c.h,{className:D?E.marginLeft:"",name:"trash-alt",onClick:()=>v(m),tooltip:l})):h&&p.size>h?a.createElement(a.Fragment,null,a.createElement("progress",{className:E.progressBar,max:p.size,value:h}),a.createElement("span",{className:E.paddingLeft},Math.round(h/p.size*100),"%"),y&&a.createElement(g.zx,{variant:"secondary",type:"button",fill:"text",onClick:y},"Cancel upload")):v&&a.createElement(c.h,{name:"trash-alt",onClick:()=>v(m),tooltip:l,tooltipPlacement:"top"}),P=(0,i.Cf)("decbytes")(p.size);return a.createElement("div",{className:E.fileListContainer},a.createElement("span",{className:E.fileNameWrapper},a.createElement(u.J,{name:"file-blank",size:"lg","aria-hidden":!0}),a.createElement("span",{className:E.padding},(0,o.O)(p.name)),a.createElement("span",null,(0,i.zc)(P))),a.createElement("div",{className:E.fileNameWrapper},C()))}function f(m){return{fileListContainer:(0,n.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:m.spacing(2),border:`1px dashed ${m.colors.border.medium}`,backgroundColor:`${m.colors.background.secondary}`,marginTop:m.spacing(1)}),fileNameWrapper:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,n.css)({padding:m.spacing(0,1)}),paddingLeft:(0,n.css)({paddingLeft:m.spacing(2)}),marginLeft:(0,n.css)({marginLeft:m.spacing(1)}),error:(0,n.css)({paddingRight:m.spacing(2),color:m.colors.error.text}),progressBar:(0,n.css)({borderRadius:m.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:m.colors.border.weak,borderRadius:m.shape.radius.default},"::-webkit-progress-value":{backgroundColor:m.colors.primary.main,borderRadius:m.shape.radius.default}})}}},60540:(Q,A,e)=>{"use strict";e.d(A,{A_:()=>n.A_,K$:()=>a.K,Yo:()=>n.Yo});var n=e(54679),a=e(79159)},74916:(Q,A,e)=>{"use strict";e.d(A,{p:()=>d});var n=e(76932),a=e(31733),i=e(79117),r=e(21568),o=e(76067),g=e(83998),u=e(82171),c=e(51343),l=e(49311);const d=({onFileUpload:m,className:v,children:E="Upload file",accept:p="*",size:h="md",showFileName:s})=>{const y=(0,o.wW)(f(h)),[D,C]=(0,a.useState)(""),P=(0,i.Z)(),b=(0,a.useCallback)(T=>{const O=T.currentTarget?.files?.[0];O&&C(O.name??""),m(T)},[m]);return a.createElement(a.Fragment,null,a.createElement("input",{type:"file",id:P,className:y.fileUpload,onChange:b,multiple:!1,accept:p,"data-testid":r.wl.components.FileUpload.inputField}),a.createElement("label",{htmlFor:P,className:(0,n.cx)(y.labelWrapper,v)},a.createElement(l.J,{name:"upload",className:y.icon}),E),s&&D&&a.createElement("span",{"aria-label":"File name",className:y.fileName,"data-testid":r.wl.components.FileUpload.fileNameSpan},(0,u.O)(D)))},f=m=>v=>{const E=(0,c.fW)({theme:v,variant:"primary",size:m,iconOnly:!1}),p=(0,g.getFocusStyles)(v);return{fileUpload:(0,n.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":p,"&:focus-visible + label":p}),labelWrapper:E.button,icon:E.icon,fileName:(0,n.css)({marginLeft:v.spacing(.5)})}}},76804:(Q,A,e)=>{"use strict";e.d(A,{H:()=>u});var n=e(31733),a=e(84834);function i(...c){const l=n.useRef(null);return n.useEffect(()=>{c.forEach(d=>{d&&(typeof d=="function"?d(l.current):d.current=l.current)})},[c]),l}var r=e(51343),o=e(49311),g=e(64516);const u=n.forwardRef(({value:c,width:l,onChange:d,escapeRegex:f=!0,...m},v)=>{const E=n.useRef(null),p=i(v,E),h=c!==""?n.createElement(r.zx,{icon:"times",fill:"text",size:"sm",onClick:s=>{E.current?.focus(),d(""),s.stopPropagation()}},"Clear"):null;return n.createElement(g.I,{prefix:n.createElement(o.J,{name:"search"}),suffix:h,width:l,type:"text",value:f?(0,a.x6)(c??""):c,onChange:s=>d(f?(0,a.GE)(s.currentTarget.value):s.currentTarget.value),...m,ref:p})});u.displayName="FilterInput"},65050:(Q,A,e)=>{"use strict";e.d(A,{B:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(51343),o=e(49311);const g=({label:c,selected:l,onClick:d,icon:f="check"})=>{const m=(0,i.wW)(u),v=(0,i.wW)(r.gN);return a.createElement("button",{type:"button",className:(0,n.cx)(v,m.wrapper,l&&m.selected),onClick:d},a.createElement("span",null,c),l&&a.createElement(o.J,{name:f,className:m.icon}))},u=c=>({wrapper:(0,n.css)({background:c.colors.background.secondary,borderRadius:c.shape.radius.pill,padding:c.spacing(0,2),fontSize:c.typography.bodySmall.fontSize,fontWeight:c.typography.fontWeightMedium,lineHeight:c.typography.bodySmall.lineHeight,color:c.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${c.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:c.colors.action.hover,color:c.colors.text.primary}}),selected:(0,n.css)({color:c.colors.text.primary,background:c.colors.action.selected,"&:hover":{background:c.colors.action.focus}}),icon:(0,n.css)({marginLeft:c.spacing(.5)})})},14978:(Q,A,e)=>{"use strict";e.d(A,{W:()=>o});var n=e(76932),a=e(31733),i=e(71918);const r={labelWidth:6,inputWidth:12},o=({label:u,tooltip:c,labelWidth:l,inputWidth:d,inputEl:f,className:m,interactive:v,...E})=>{const p=g();return a.createElement("div",{className:(0,n.cx)(p.formField,m)},a.createElement(i.c,{width:l,tooltip:c,interactive:v},u),f||a.createElement("input",{type:"text",className:`gf-form-input ${d?`width-${d}`:""}`,...E,disabled:E.disabled}))};o.displayName="FormField",o.defaultProps=r;const g=()=>({formField:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},71918:(Q,A,e)=>{"use strict";e.d(A,{c:()=>u});var n=e(52083),a=e.n(n),i=e(31733),r=e(49311),o=e(58037);const u=({children:c,isFocused:l,isInvalid:d,className:f,htmlFor:m,tooltip:v,width:E,interactive:p,...h})=>{const s=a()(f,`gf-form-label width-${E||"10"}`,{"gf-form-label--is-focused":l,"gf-form-label--is-invalid":d});return i.createElement("label",{className:s,...h,htmlFor:m},c,v&&i.createElement(o.u,{placement:"top",content:v,theme:"info",interactive:p},i.createElement(r.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},60850:(Q,A,e)=>{"use strict";e.d(A,{W:()=>i});var n=e(31733);function a(r){return r<20?.9:r<26?.8:.6}const i=({value:r,className:o,style:g,...u})=>{const c=(r.prefix??"").length>0,l=(r.suffix??"").length>0;let d;if(g&&g.fontSize&&typeof g.fontSize=="number"){const f=g.fontSize,m=a(f);d={fontSize:f*m}}return n.createElement("div",{className:o,style:g,...u},n.createElement("div",null,c&&n.createElement("span",null,r.prefix),n.createElement("span",null,r.text),l&&n.createElement("span",{style:d},r.suffix)))};i.displayName="FormattedDisplayValue"},36356:(Q,A,e)=>{"use strict";e.d(A,{X:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(83998),o=e(36667);const g=a.forwardRef(({label:c,description:l,value:d,htmlValue:f,onChange:m,disabled:v,className:E,indeterminate:p,invalid:h,...s},y)=>{const D=(0,a.useCallback)(b=>{m&&m(b)},[m]),C=(0,i.wW)(u,h),P=p?"mixed":void 0;return a.createElement("label",{className:(0,n.cx)(C.wrapper,E)},a.createElement("div",{className:C.checkboxWrapper},a.createElement("input",{type:"checkbox",className:(0,n.cx)(C.input,p&&C.inputIndeterminate),checked:d,disabled:v,onChange:D,value:f,"aria-checked":P,...s,ref:y}),a.createElement("span",{className:C.checkmark})),c&&a.createElement("span",{className:C.label},c),l&&a.createElement("span",{className:C.description},l))}),u=(c,l=!1)=>{const d=(0,o.F)(c),f=2,m=1,v=E=>l?c.colors.error.border:E;return{wrapper:(0,n.css)({display:"inline-grid",alignItems:"center",columnGap:c.spacing(m),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,n.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,r.getFocusStyles)(c),"&:focus:not(:focus-visible) + span":(0,r.getMouseFocusStyles)(c),"&:checked + span":{background:c.colors.primary.main,border:`1px solid ${v(c.colors.primary.main)}`,"&:hover":{background:c.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${c.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:c.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${v(c.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:c.colors.action.disabledBackground},"&:after":{borderColor:c.colors.action.disabledText}}}),inputIndeterminate:(0,n.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${v(c.colors.primary.main)}`,background:c.colors.primary.main,"&:hover":{background:c.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${c.colors.primary.contrastText}`,backgroundColor:c.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:c.colors.action.disabledBackground,border:`1px solid ${v(c.colors.error.transparent)}`,"&:after":{borderColor:c.colors.action.disabledText}}}),checkboxWrapper:(0,n.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,n.css)({position:"relative",zIndex:2,display:"inline-block",width:c.spacing(f),height:c.spacing(f),borderRadius:c.shape.radius.default,background:c.components.input.background,border:`1px solid ${v(c.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:v(c.components.input.borderHover)}}),label:(0,n.cx)(d.label,(0,n.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:c.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,n.cx)(d.description,(0,n.css)({gridColumnStart:2,gridRowStart:2,lineHeight:c.typography.bodySmall.lineHeight,marginTop:0}))}};g.displayName="Checkbox"},85765:(Q,A,e)=>{"use strict";e.d(A,{g:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(67978),o=e(65008),g=e(36667);const u=a.forwardRef(({label:d,description:f,horizontal:m,invalid:v,loading:E,disabled:p,required:h,error:s,children:y,className:D,validationMessageHorizontalOverflow:C,htmlFor:P,...b},T)=>{const O=(0,i.wW)(l),R=P??(0,r.getChildId)(y),I=typeof d=="string"?a.createElement(g._,{htmlFor:R,description:f},`${d}${h?" *":""}`):d,M=c({invalid:v,disabled:p,loading:E});return a.createElement("div",{className:(0,n.cx)(O.field,m&&O.fieldHorizontal,D),...b},I,a.createElement("div",null,a.createElement("div",{ref:T},a.cloneElement(y,M)),v&&s&&!m&&a.createElement("div",{className:(0,n.cx)(O.fieldValidationWrapper,{[O.validationMessageHorizontalOverflow]:!!C})},a.createElement(o.S,null,s))),v&&s&&m&&a.createElement("div",{className:(0,n.cx)(O.fieldValidationWrapper,O.fieldValidationWrapperHorizontal,{[O.validationMessageHorizontalOverflow]:!!C})},a.createElement(o.S,null,s)))});u.displayName="Field";function c(d){for(const f in d)d[f]===void 0&&delete d[f];return d}const l=d=>({field:(0,n.css)({display:"flex",flexDirection:"column",marginBottom:d.spacing(2)}),fieldHorizontal:(0,n.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,n.css)({marginTop:d.spacing(.5)}),fieldValidationWrapperHorizontal:(0,n.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,n.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},31844:(Q,A,e)=>{"use strict";e.d(A,{F:()=>a});var n=e(54126);const a=({name:i,control:r,children:o,...g})=>{const{fields:u,append:c,prepend:l,remove:d,swap:f,move:m,insert:v}=(0,n.Dq)({control:r,name:i,...g});return o({fields:u,append:c,prepend:l,remove:d,swap:f,move:m,insert:v})}},97216:(Q,A,e)=>{"use strict";e.d(A,{C:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(67683);const o=({label:u,children:c,className:l,...d})=>{const f=(0,i.wW)(g);return a.createElement("fieldset",{className:(0,n.cx)(f.wrapper,l),...d},u&&a.createElement(r.D,null,u),c)},g=u=>({wrapper:(0,n.css)({marginBottom:u.spacing(4),"&:last-child":{marginBottom:0}})})},65008:(Q,A,e)=>{"use strict";e.d(A,{S:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(49311);const o=({children:u,horizontal:c,className:l})=>{const d=(0,i.wW)(g),f=(0,n.cx)(c?d.horizontal:d.vertical,l);return a.createElement("div",{role:"alert",className:f},a.createElement(r.J,{className:d.fieldValidationMessageIcon,name:"exclamation-triangle"}),u)},g=u=>{const c=`
      font-size: ${u.typography.size.sm};
      font-weight: ${u.typography.fontWeightMedium};
      padding: ${u.spacing(.5,1)};
      color: ${u.colors.error.contrastText};
      background: ${u.colors.error.main};
      border-radius: ${u.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${u.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,n.css)(c,{margin:u.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${u.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,n.css)(c,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,n.css)({marginRight:u.spacing()})}}},17618:(Q,A,e)=>{"use strict";e.d(A,{l:()=>r});var n=e(76932),a=e(31733),i=e(54126);function r({defaultValues:o,onSubmit:g,validateOnMount:u=!1,validateFieldsOnMount:c,children:l,validateOn:d="onSubmit",maxWidth:f=600,...m}){const{handleSubmit:v,trigger:E,formState:p,...h}=(0,i.cI)({mode:d,defaultValues:o});return(0,a.useEffect)(()=>{u&&E(c)},[E,c,u]),a.createElement("form",{className:(0,n.css)({maxWidth:f!=="none"?f+"px":f,width:"100%"}),onSubmit:v(g),...m},l({errors:p.errors,formState:p,trigger:E,...h}))}},41164:(Q,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(67978),o=e(65008),g=e(20888);const u=({children:l,label:d,tooltip:f,labelWidth:m="auto",invalid:v,loading:E,disabled:p,required:h,className:s,htmlFor:y,grow:D,shrink:C,error:P,transparent:b,interactive:T,...O})=>{const R=(0,i.l4)(),I=c(R,D,C),M=y??(0,r.getChildId)(l),x=typeof d=="string"?a.createElement(g.W,{interactive:T,width:m,tooltip:f,htmlFor:M,transparent:b},`${d}${h?" *":""}`):d;return a.createElement("div",{className:(0,n.cx)(I.container,s),...O},x,a.createElement("div",{className:I.childContainer},a.cloneElement(l,{invalid:v,disabled:p,loading:E}),v&&P&&a.createElement("div",{className:(0,n.cx)(I.fieldValidationWrapper)},a.createElement(o.S,null,P))))};u.displayName="InlineField";const c=(l,d,f)=>({container:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${d?1:0} ${f?1:0} auto`,margin:`0 ${l.spacing(.5)} ${l.spacing(.5)} 0`}),childContainer:(0,n.css)({flex:`${d?1:0} ${f?1:0} auto`}),fieldValidationWrapper:(0,n.css)({marginTop:l.spacing(.5)})})},47701:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g,className:u,...c})=>{const l=(0,i.wW)(o);return a.createElement("div",{className:(0,n.cx)(l.container,u),...c},g)},o=g=>({container:(0,n.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:g.spacing(.5)})})},20888:(Q,A,e)=>{"use strict";e.d(A,{W:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(49311),o=e(58037);const g=({children:c,className:l,tooltip:d,width:f,transparent:m,interactive:v,as:E="label",...p})=>{const h=(0,i.wW)(u,m,f);return a.createElement(E,{className:(0,n.cx)(h.label,l),...p},c,d&&a.createElement(o.u,{interactive:v,placement:"top",content:d,theme:"info"},a.createElement(r.J,{tabIndex:0,name:"info-circle",size:"sm",className:h.icon})))},u=(c,l=!1,d)=>({label:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:c.spacing(0,1),fontWeight:c.typography.fontWeightMedium,fontSize:c.typography.size.sm,backgroundColor:l?"transparent":c.colors.background.secondary,height:c.spacing(c.components.height.md),lineHeight:c.spacing(c.components.height.md),marginRight:c.spacing(.5),borderRadius:c.shape.radius.default,border:"none",width:d?d!=="auto"?`${8*d}px`:d:"100%",color:c.colors.text.primary}),icon:(0,n.css)({color:c.colors.text.secondary,marginLeft:"10px",":hover":{color:c.colors.text.primary}})})},11950:(Q,A,e)=>{"use strict";e.d(A,{m:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g,className:u,grow:c,...l})=>{const d=(0,i.wW)(o,c);return a.createElement("div",{className:(0,n.cx)(d.container,u),...l},g)};r.displayName="InlineSegmentGroup";const o=(g,u)=>({container:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${u?1:0} 0 auto`,marginBottom:g.spacing(.5)})})},36667:(Q,A,e)=>{"use strict";e.d(A,{F:()=>g,_:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(49311);const o=({children:u,description:c,className:l,category:d,...f})=>{const m=(0,i.wW)(g),v=d?.map((E,p)=>a.createElement("span",{className:m.categories,key:`${E}/${p}`},a.createElement("span",null,E),a.createElement(r.J,{name:"angle-right",className:m.chevron})));return a.createElement("div",{className:(0,n.cx)(m.label,l)},a.createElement("label",{...f},a.createElement("div",{className:m.labelContent},v,u),c&&a.createElement("span",{className:m.description},c)))},g=u=>({label:(0,n.css)({label:"Label",fontSize:u.typography.size.sm,fontWeight:u.typography.fontWeightMedium,lineHeight:1.25,marginBottom:u.spacing(.5),color:u.colors.text.primary,maxWidth:"480px"}),labelContent:(0,n.css)({display:"flex",alignItems:"center"}),description:(0,n.css)({label:"Label-description",color:u.colors.text.secondary,fontSize:u.typography.size.sm,fontWeight:u.typography.fontWeightRegular,marginTop:u.spacing(.25),display:"block"}),categories:(0,n.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,n.css)({margin:u.spacing(0,.25)})})},98146:(Q,A,e)=>{"use strict";e.d(A,{G:()=>o,I:()=>g});var n=e(52083),a=e.n(n),i=e(31733),r=e(74881),o=(u=>(u.Invalid="invalid",u.Valid="valid",u))(o||{});class g extends i.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=c=>l=>{const d=(0,r.Gu)(l.target.value,c);this.setState(f=>({...f,error:d?d[0]:null}))},this.populateEventPropsWithStatus=(c,l)=>{const d={...c};return l&&Object.keys(r.JU).forEach(f=>{((0,r.z3)(f,l)||c[f])&&(d[f]=async m=>{m.persist(),(0,r.z3)(f,l)&&await this.validatorAsync(l[f]).apply(this,[m]),c[f]&&c[f].apply(null,[m,this.status])})}),d}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:c,className:l,hideErrorMessage:d,inputRef:f,...m}=this.props,{error:v}=this.state,E=a()("gf-form-input",{invalid:this.isInvalid},l),p=this.populateEventPropsWithStatus(m,c);return i.createElement("div",{style:{flexGrow:1}},i.createElement("input",{...p,ref:f,className:E}),v&&!d&&i.createElement("span",null,v))}}g.defaultProps={className:""}},52732:(Q,A,e)=>{"use strict";e.d(A,{B:()=>r,Z:()=>o});var n=e(31733),a=e(40166),i=e(49311);const r=g=>{const u=g.selectProps.menuIsOpen;return n.createElement(a.c.IndicatorsContainer,{...g},n.createElement(i.J,{name:u?"angle-up":"angle-down",style:{marginTop:"7px"}}))},o=r},31931:(Q,A,e)=>{"use strict";e.d(A,{P:()=>i,Z:()=>r});var n=e(31733),a=e(40166);const i=o=>{const{children:g}=o;return n.createElement(a.c.NoOptionsMessage,{...o},n.createElement("div",{className:"gf-form-select-box__desc-option"},n.createElement("div",{className:"gf-form-select-box__desc-option__body"},g)))},r=i},54205:(Q,A,e)=>{"use strict";e.d(A,{qb:()=>b,Ph:()=>P});var n=e(52083),a=e.n(n),i=e(31733),r=e(40166),o=e(61726),g=e(84996),u=e(4318),c=e(3854),l=e(37758),d=e(4900),f=e(84247),m=e(59496),v=e(58037),E=e(52732),p=e(31931),h=e(49311);const s=R=>{const{children:I,isSelected:M,data:x}=R;return i.createElement(r.c.Option,{...R},i.createElement("div",{className:"gf-form-select-box__desc-option"},x.imgUrl&&i.createElement("img",{className:"gf-form-select-box__desc-option__img",src:x.imgUrl,alt:""}),i.createElement("div",{className:"gf-form-select-box__desc-option__body"},i.createElement("div",null,I),x.description&&i.createElement("div",{className:"gf-form-select-box__desc-option__desc"},x.description)),M&&i.createElement(h.J,{name:"check","aria-hidden":"true"})))},y=null,D=R=>i.createElement(r.c.MenuList,{...R},i.createElement(l.$,{autoHide:!1,autoHeightMax:"inherit"},R.children)),C=class extends i.PureComponent{render(){const{defaultValue:R,getOptionLabel:I,getOptionValue:M,onChange:x,options:L,placeholder:S,width:U,value:N,className:w,isDisabled:G,isLoading:_,isSearchable:K,isClearable:k,backspaceRemovesValue:z,isMulti:W,autoFocus:Z,openMenuOnFocus:H,onBlur:X,maxMenuHeight:Y,noOptionsMessage:ne,isOpen:se,components:re,tooltipContent:ge,tabSelectsValue:q,onCloseMenu:me,onOpenMenu:oe,allowCustomValue:fe,formatCreateLabel:ve,"aria-label":pe}=this.props;let Me="";U&&(Me="width-"+U);let Pe=o.ZP;const Ee={};fe&&(Pe=u.Z,Ee.formatCreateLabel=ve??(ke=>ke));const he=a()("gf-form-input","gf-form-input--form-dropdown",Me,w),Le={...C.defaultProps.components,...re};return i.createElement(T,{onCloseMenu:me,onOpenMenu:oe,tooltipContent:ge,isOpen:se},(ke,ot)=>i.createElement(Pe,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:he,components:Le,defaultValue:R,value:N,getOptionLabel:I,getOptionValue:M,menuShouldScrollIntoView:!1,isSearchable:K,onChange:x,options:L,placeholder:S||"Choose",styles:(0,m.Z)(this.context),isDisabled:G,isLoading:_,isClearable:k,autoFocus:Z,onBlur:X,openMenuOnFocus:H,maxMenuHeight:Y,noOptionsMessage:ne,isMulti:W,backspaceRemovesValue:z,menuIsOpen:se,onMenuOpen:ke,onMenuClose:ot,tabSelectsValue:q,"aria-label":pe,...Ee}))}};let P=C;P.contextType=c.N,P.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:s,SingleValue:f.P,IndicatorsContainer:E.Z,MenuList:D,Group:d.n}};class b extends i.PureComponent{render(){const{defaultValue:I,getOptionLabel:M,getOptionValue:x,onChange:L,placeholder:S,width:U,value:N,className:w,loadOptions:G,defaultOptions:_,isLoading:K,loadingMessage:k,noOptionsMessage:z,isDisabled:W,isSearchable:Z,isClearable:H,backspaceRemovesValue:X,autoFocus:Y,onBlur:ne,openMenuOnFocus:se,maxMenuHeight:re,isMulti:ge,tooltipContent:q,onCloseMenu:me,onOpenMenu:oe,isOpen:fe}=this.props;let ve="";U&&(ve="width-"+U);const pe=a()("gf-form-input","gf-form-input--form-dropdown",ve,w);return i.createElement(T,{onCloseMenu:me,onOpenMenu:oe,tooltipContent:q,isOpen:fe},(Me,Pe)=>i.createElement(g.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:pe,components:{Option:s,SingleValue:f.P,IndicatorsContainer:E.Z,NoOptionsMessage:p.Z},defaultValue:I,value:N,getOptionLabel:M,getOptionValue:x,menuShouldScrollIntoView:!1,onChange:L,loadOptions:G,isLoading:K,defaultOptions:_,placeholder:S||"Choose",styles:(0,m.Z)(this.context),loadingMessage:k,noOptionsMessage:z,isDisabled:W,isSearchable:Z,isClearable:H,autoFocus:Y,onBlur:ne,openMenuOnFocus:se,maxMenuHeight:re,isMulti:ge,backspaceRemovesValue:X}))}}b.contextType=c.N,b.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class T extends i.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:I}=this.props;I&&I(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:I}=this.props;I&&I(),this.setState({isOpenInternal:!1})}}render(){const{children:I,isOpen:M,tooltipContent:x}=this.props,{isOpenInternal:L}=this.state;let S;return(L||M)&&(S=!1),x?i.createElement(v.u,{show:S,content:x,placement:"bottom"},i.createElement("div",null,I(this.onOpenMenu,this.onCloseMenu))):i.createElement("div",null,I(this.onOpenMenu,this.onCloseMenu))}}const O=null},40782:(Q,A,e)=>{"use strict";e.d(A,{r:()=>g});var n=e(69781),a=e.n(n),i=e(31733),r=e(49311),o=e(58037);class g extends i.PureComponent{constructor(){super(...arguments),this.state={id:(0,n.uniqueId)()},this.internalOnChange=c=>{c.stopPropagation(),this.props.onChange(c)}}render(){const{labelClass:c="",switchClass:l="",label:d,checked:f,disabled:m,transparent:v,className:E,tooltip:p,tooltipPlacement:h}=this.props,s=this.state.id,y=`gf-form-label ${c} ${v?"gf-form-label--transparent":""} pointer`,D=`gf-form-switch ${l} ${v?"gf-form-switch--transparent":""}`;return i.createElement("div",{className:"gf-form-switch-container-react"},i.createElement("label",{htmlFor:s,className:`gf-form gf-form-switch-container ${E||""}`},d&&i.createElement("div",{className:y},d,p&&i.createElement(o.u,{placement:h||"auto",content:p,theme:"info"},i.createElement(r.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),i.createElement("div",{className:D},i.createElement("input",{disabled:m,id:s,type:"checkbox",checked:f,onChange:this.internalOnChange}),i.createElement("span",{className:"gf-form-switch__slider"}))))}}},67683:(Q,A,e)=>{"use strict";e.d(A,{D:()=>o});var n=e(76932),a=e(31733),i=e(76067);const r=g=>({legend:(0,n.css)({fontSize:g.typography.h3.fontSize,fontWeight:g.typography.fontWeightRegular,margin:g.spacing(0,0,2,0)})}),o=({children:g,className:u,...c})=>{const l=(0,i.wW)(r);return a.createElement("legend",{className:(0,n.cx)(l.legend,u),...c},g)}},96856:(Q,A,e)=>{"use strict";e.d(A,{S:()=>v});var n=e(76932),a=e(69781),i=e(31733),r=e(7820),o=e(76067),g=e(49311),u=e(21568),c=e(83998),l=e(58037),d=e(90119);const f=i.forwardRef(({children:p,active:h=!1,disabled:s=!1,size:y="md",onChange:D,onClick:C,id:P,name:b=void 0,description:T,fullWidth:O,"aria-label":R},I)=>{const M=(0,o.wW)(m,y,O),x=i.createElement("input",{type:"radio",className:M.radio,onChange:D,onClick:C,disabled:s,id:P,checked:h,name:b,"aria-label":R,ref:I});return T?i.createElement("div",{className:M.radioOption,"data-testid":u.wl.components.RadioButton.container},i.createElement(l.u,{content:T,placement:"bottom"},x),i.createElement("label",{className:M.radioLabel,htmlFor:P,title:T||R},p)):i.createElement("div",{className:M.radioOption,"data-testid":u.wl.components.RadioButton.container},x,i.createElement("label",{className:M.radioLabel,htmlFor:P,title:T||R},p))});f.displayName="RadioButton";const m=(p,h,s)=>{const{fontSize:y,height:D,padding:C}=(0,d.iL)(h,p),P=p.colors.text.secondary,b=p.colors.text.primary,T=D*p.spacing.gridSize-4-2;return{radioOption:(0,n.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:s?"1 0 0":"none",textAlign:"center"}),radio:(0,n.css)({position:"absolute",opacity:0,zIndex:2,width:"100% !important",height:"100%",cursor:"pointer","&:checked + label":{color:p.colors.text.primary,fontWeight:p.typography.fontWeightMedium,background:p.colors.action.selected,zIndex:1},"&:focus + label, &:focus-visible + label":(0,c.getFocusStyles)(p),"&:focus:not(:focus-visible) + label":(0,c.getMouseFocusStyles)(p),"&:disabled + label":{color:p.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"center",fontSize:y,height:`${T}px`,lineHeight:`${T}px`,color:P,padding:p.spacing(0,C),borderRadius:p.shape.radius.default,background:p.colors.background.primary,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:b}})}};function v({options:p,value:h,onChange:s,onClick:y,disabled:D,disabledOptions:C,size:P="md",id:b,className:T,fullWidth:O=!1,autoFocus:R=!1,"aria-label":I,invalid:M=!1}){const x=(0,i.useCallback)(G=>()=>{s&&s(G.value)},[s]),L=(0,i.useCallback)(G=>()=>{y&&y(G.value)},[y]),S=b??(0,a.uniqueId)("radiogroup-"),U=(0,i.useRef)(S),N=(0,o.wW)(E),w=(0,i.useRef)(null);return(0,i.useEffect)(()=>{R&&w.current&&w.current.focus()},[R]),i.createElement("div",{role:"radiogroup","aria-label":I,className:(0,n.cx)(N.radioGroup,O&&N.fullWidth,M&&N.invalid,T)},p.map((G,_)=>{const K=C&&G.value&&C.includes(G.value),k=G.icon?(0,r.iJ)(G.icon):void 0,z=!!(G.imgUrl||G.label||G.component);return i.createElement(f,{size:P,disabled:K||D,active:h===G.value,key:`o.label-${_}`,"aria-label":G.ariaLabel,onChange:x(G),onClick:L(G),id:`option-${G.value}-${S}`,name:U.current,description:G.description,fullWidth:O,ref:h===G.value?w:void 0},k&&i.createElement(g.J,{name:k,className:(0,n.cx)(z&&N.icon)}),G.imgUrl&&i.createElement("img",{src:G.imgUrl,alt:G.label,className:N.img}),G.label," ",G.component?i.createElement(G.component,null):null)}))}v.displayName="RadioButtonGroup";const E=p=>({radioGroup:(0,n.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${p.components.input.borderColor}`,borderRadius:p.shape.radius.default,padding:"2px"}),fullWidth:(0,n.css)({display:"flex"}),icon:(0,n.css)({marginRight:"6px"}),img:(0,n.css)({width:p.spacing(2),height:p.spacing(2),marginRight:p.spacing(1)}),invalid:(0,n.css)({border:`1px solid ${p.colors.error.border}`})})},68432:(Q,A,e)=>{"use strict";e.d(A,{x:()=>u});var n=e(76932),a=e(69781),i=e(31733),r=e(76067);const o=({id:l,name:d,label:f,checked:m,value:v,disabled:E,description:p,onChange:h})=>{const s=(0,r.wW)(g);return i.createElement("label",{title:p,className:s.label},i.createElement("input",{id:l,name:d,type:"radio",checked:m,value:v,disabled:E,className:s.input,onChange:()=>h&&h(l)}),i.createElement("div",null,f,p&&i.createElement("div",{className:s.description},p)))},g=l=>({input:(0,n.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:l.colors.background.canvas,width:`${l.spacing(2)} !important`,height:l.spacing(2),border:`1px solid ${l.colors.border.medium}`,borderRadius:l.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:l.v1.palette.white,border:`5px solid ${l.colors.primary.main}`},":disabled":{backgroundColor:`${l.colors.action.disabledBackground} !important`,borderColor:l.colors.border.weak},":disabled:checked":{border:`1px solid ${l.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:l.colors.text.disabled,borderRadius:l.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${l.colors.background.canvas}, 0 0 0 3px ${l.colors.primary.main}`}}),label:(0,n.css)({fontSize:l.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${l.spacing(2)} auto`,gap:l.spacing(1)}),description:(0,n.css)({fontSize:l.typography.size.sm,color:l.colors.text.secondary})});function u({name:l,id:d,options:f,value:m,onChange:v,className:E,disabled:p,disabledOptions:h=[]}){const s=(0,r.wW)(c),y=d??(0,a.uniqueId)("radiogroup-list-");return i.createElement("div",{id:d,className:(0,n.cx)(s.container,E),role:"radiogroup"},f.map((D,C)=>{const P=`${y}-${C}`,b=m&&m===D.value,T=p||h.some(R=>R===D.value),O=()=>v&&D.value&&v(D.value);return i.createElement(o,{key:C,id:P,name:l,label:D.label,description:D.description,checked:b,value:D.value,disabled:T,onChange:O})}))}const c=l=>({container:(0,n.css)({display:"grid",gap:l.spacing(1)})})},90119:(Q,A,e)=>{"use strict";e.d(A,{GL:()=>i,RK:()=>r,ht:()=>g,iL:()=>c,nf:()=>o});var n=e(76932),a=e(83998);const i=l=>(0,n.css)({"&:focus":(0,a.getFocusStyles)(l)}),r=(l,d=!1)=>{const f=d?l.colors.error.border:l.components.input.borderColor,m=d?l.colors.error.shade:l.components.input.borderHover,v=l.components.input.background,E=l.components.input.text,p=l.isDark?"#2e2f35":"#bab4ca";return(0,n.cx)(o(l),(0,n.css)({background:v,lineHeight:l.typography.body.lineHeight,fontSize:l.typography.size.md,color:E,border:`1px solid ${f}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${v}!important`,WebkitTextFillColor:`${E} !important`,borderColor:p},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${l.colors.background.primary}, 0 0 0px 4px ${l.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${v}!important`,WebkitTextFillColor:`${E} !important`},"&:hover":{borderColor:m},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:l.colors.action.disabledBackground,color:l.colors.action.disabledText,border:`1px solid ${l.colors.action.disabledBackground}`,"&:hover":{borderColor:f}},"&::placeholder":{color:l.colors.text.disabled,opacity:1}}))},o=l=>(0,n.css)({padding:l.spacing(0,1,0,1)}),g=()=>({sm:(0,n.css)({width:u("sm")}),md:(0,n.css)({width:u("md")}),lg:(0,n.css)({width:u("lg")}),auto:(0,n.css)({width:u("auto")})}),u=l=>{switch(l){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function c(l,d){switch(l){case"sm":return{padding:1,fontSize:d.typography.size.sm,height:d.components.height.sm};case"lg":return{padding:3,fontSize:d.typography.size.lg,height:d.components.height.lg};case"md":default:return{padding:2,fontSize:d.typography.size.md,height:d.components.height.md}}}},78688:(Q,A,e)=>{"use strict";e.d(A,{a:()=>p});var n=e(341),a=e.n(n),i=e(31733),r=e(86850),o=e(6485),g=e(47423),u=e(71199),c=e(90854),l=e(51343),d=e(91507),f=e(27369);const m={mode:g.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function v(h,s,y,D){const C=y!=null,P=D===u.wm.Vertical?s:h,b=Math.min(P*.15/1.5,20),T=b*1.5,O=C?s-T:s,R=Math.min(O,h);return{showLabel:C,gaugeHeight:R,titleFontSize:b}}function E(h,s,y,D){if(s.color?.mode!==d.S.Thresholds)return[{value:s.min??o.Hx,color:y.color??d.R}];const C=s.thresholds??m,P=C.mode===g.H.Percentage,b=C.steps;let T=s.min??o.Hx,O=s.max??o.Z3;P&&(T=0,O=100);const R=(0,f.m1)(T,b),I=(0,f.m1)(O,b),M=[{value:+T.toFixed(h),color:D.visualization.getColorByName(R.color)}];let x=!0;for(let L=0;L<b.length;L++){const S=b[L];if(x){R===S&&(x=!1);continue}const U=b[L-1];if(M.push({value:S.value,color:D.visualization.getColorByName(U.color)}),S===I)break}return M.push({value:+O.toFixed(h),color:D.visualization.getColorByName(I.color)}),M}class p extends i.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:s,value:y,height:D,onClick:C,text:P,theme:b,orientation:T}=this.props,O=v(s,D,y.title,T),R=T===u.wm.Vertical?`${O.gaugeHeight}px`:"100%",I=i.createElement("div",{style:{height:`${O.gaugeHeight}px`,width:R},ref:M=>this.canvasElement=M});return i.createElement(i.Fragment,null,C?i.createElement("button",{className:(0,l.gN)(b),type:"button",onClick:C},I):I,O.showLabel&&i.createElement("div",{style:{textAlign:"center",fontSize:P?.titleSize??O.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:R,top:"-4px",cursor:"default"}},y.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:s,showThresholdLabels:y,showThresholdMarkers:D,width:C,height:P,theme:b,value:T,orientation:O}=this.props,R=v(C,P,T.title),I=O===u.wm.Vertical?R.gaugeHeight:C,M=Math.min(I,R.gaugeHeight),x=b.colors.background.secondary,L=y?1.5:1,S=Math.min(M/5.5,40)/L,U=S/5,N=(0,r.zc)(T),G=Math.min(I,M*1.3)*.9-((S+(D?U:0)+(y?10:0))*2+10),_=this.props.text?.valueSize??(0,c.MX)(N,G,M,1,S*1.7),K=Math.max(_/2.5,12);let k=s.min??o.Hx,z=s.max??o.Z3,W=T.numeric;s.thresholds?.mode===g.H.Percentage&&(k=0,z=100,T.percent===void 0?W=(W-k)/(z-k)*100:W=T.percent*100);const Z=s.decimals===void 0?2:s.decimals;D&&(k=+k.toFixed(Z),z=+z.toFixed(Z));const H={series:{gauges:{gauge:{min:k,max:z,neutralValue:s.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:S},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:E(Z,s,T,b),label:{show:y,margin:U+1,font:{size:K}},show:D,width:U},value:{color:T.color,formatter:()=>N,font:{size:_,family:b.typography.fontFamily}},show:!0}}},X={data:[[0,W]],label:T.title};try{this.canvasElement&&a().plot(this.canvasElement,[X],H)}catch(Y){console.error("Gauge rendering error",Y,H,T)}}render(){return i.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}p.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:m}}},49311:(Q,A,e)=>{"use strict";e.d(A,{J:()=>c});var n=e(76932),a=e(31733),i=e(55793),r=e(7820),o=e(76067),g=e(44047);const u=l=>({icon:(0,n.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"}),orange:(0,n.css)({fill:l.v1.palette.orange})}),c=a.forwardRef(({size:l="md",type:d="default",name:f,className:m,style:v,title:E="",...p},h)=>{const s=(0,o.wW)(u);(0,r.Mo)(f)||console.warn("Icon component passed an invalid icon name",f);const y=f==="fa fa-spinner"?"spinner":f,D=(0,g.lK)(),C=(0,g.Bm)(l),P=C,b=f.startsWith("gf-bar-align")?16:f.startsWith("gf-interp")?30:C,T=(0,g.y_)(y,d),O=`${D}${T}/${y}.svg`,R=(0,n.cx)(s.icon,m,d==="mono"?{[s.orange]:f==="favorite"}:"",y==="spinner"&&"fa-spin");return a.createElement(i.default,{innerRef:h,src:O,width:b,height:P,title:E,className:R,style:v,...p})});c.displayName="Icon"},44047:(Q,A,e)=>{"use strict";e.d(A,{Bm:()=>i,lK:()=>o,y_:()=>a});const n=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function a(g,u){return g?.startsWith("gf-")?"custom":n.includes(g)?"mono":u==="default"?"unicons":u==="solid"?"solid":"mono"}function i(g){switch(g){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}let r;function o(){if(r)return r;const g=typeof window<"u"&&window.__grafana_public_path__;return g?r=g+"img/icons/":r="public/img/icons/",r}},41354:(Q,A,e)=>{"use strict";e.d(A,{h:()=>d});var n=e(76932),a=e(31733),i=e(74687),r=e(77081),o=e(76067),g=e(83998),u=e(49311),c=e(44047),l=e(58037);const d=a.forwardRef((m,v)=>{const{size:E="md",variant:p="secondary"}=m;let h;E==="xxl"||E==="xxxl"?((0,i.d)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),h="xl"):h=E;const s=(0,o.wW)(f,h,p);let y,D;if("tooltip"in m){const{tooltip:C}=m;y=typeof C=="string"?C:void 0}else if("ariaLabel"in m||"aria-label"in m){const{ariaLabel:C,["aria-label"]:P}=m;y=P||C,D=v}if("tooltip"in m){const{name:C,iconType:P,className:b,tooltip:T,tooltipPlacement:O,...R}=m;return a.createElement(l.u,{ref:v,content:T,placement:O},a.createElement("button",{...R,ref:D,"aria-label":y,className:(0,n.cx)(s.button,b),type:"button"},a.createElement(u.J,{name:C,size:h,className:s.icon,type:P})))}else{const{name:C,iconType:P,className:b,...T}=m;return a.createElement("button",{...T,ref:D,"aria-label":y,className:(0,n.cx)(s.button,b),type:"button"},a.createElement(u.J,{name:C,size:h,className:s.icon,type:P}))}});d.displayName="IconButton";const f=(m,v,E)=>{const p=(0,c.Bm)(v)+m.spacing.gridSize;let h=m.colors.text.primary;return E==="primary"?h=m.colors.primary.text:E==="destructive"&&(h=m.colors.error.text),{button:(0,n.css)({zIndex:0,position:"relative",margin:`0 ${m.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:h,"&[disabled], &:disabled":{cursor:"not-allowed",color:m.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${p}px`,height:`${p}px`,borderRadius:m.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,g.getFocusStyles)(m),"&:focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(m),"&:hover":{"&:before":{backgroundColor:E==="secondary"?m.colors.action.hover:r.alpha(h,.12),opacity:1}}}),icon:(0,n.css)({verticalAlign:"baseline"})}}},23006:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>u,a:()=>l});var n=e(76932),a=e(31733),i=e(44343),r=e(76067),o=e(50248),g=e(50140);const u=a.memo(a.forwardRef(({title:f,featureState:m,...v},E)=>{const p=(0,r.wW)(c),h=m?a.createElement(a.Fragment,null,a.createElement("div",{className:p.badge},a.createElement(l,{featureState:m})),a.createElement("h3",null,f)):a.createElement("h3",null,f);return a.createElement(g.v,{branded:!0,title:h,urlTitle:"Read documentation",ref:E,...v})}));u.displayName="FeatureInfoBox";const c=f=>({badge:(0,n.css)({marginBottom:f.spacing(1)})}),l=({featureState:f,tooltip:m})=>{const v=d(f);return a.createElement(o.C,{text:v.text,color:v.color,icon:v.icon,tooltip:m})};function d(f){switch(f){case i.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},50140:(Q,A,e)=>{"use strict";e.d(A,{v:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(25111),o=e(49311);const g=a.memo(a.forwardRef(({title:c,className:l,children:d,branded:f,url:m,urlTitle:v,onDismiss:E,severity:p="info",...h},s)=>{const y=(0,i.wW)(u);return a.createElement(r.b,{severity:p,className:l,...h,ref:s,title:c},a.createElement("div",null,d),m&&a.createElement("a",{href:m,className:(0,n.cx)("external-link",y.docsLink),target:"_blank",rel:"noreferrer"},a.createElement(o.J,{name:"book"})," ",v||"Read more"))}));g.displayName="InfoBox";const u=c=>({docsLink:(0,n.css)({display:"inline-block",marginTop:c.spacing(2)})})},14067:(Q,A,e)=>{"use strict";e.d(A,{K:()=>u});var n=e(76932),a=e(31733),i=e(48947),r=e(76067),o=e(49311),g=e(25108);function u({referenceElement:m,children:v,suffixIcon:E,placement:p,alternativePlacement:h}){const[s,y]=(0,a.useState)(null),[D,C]=(0,a.useState)(p),P=(0,i.D)(m,s,{placement:D}),b=(0,r.wW)(c),T=(0,r.wW)(f);return a.useEffect(()=>{h&&l(p,s,m)&&C(h)},[h,p,s,m]),a.createElement(g.h_,null,a.createElement("div",{style:{display:"inline-block",...P.styles.popper},...P.attributes.popper,ref:y,"aria-live":"polite"},a.createElement("span",{className:(0,n.cx)(b.root,T[D])},v&&a.createElement("span",null,v),E&&a.createElement(o.J,{name:E}))))}const c=m=>({root:(0,n.css)({...m.typography.bodySmall,willChange:"transform",background:m.components.tooltip.background,color:m.components.tooltip.text,padding:m.spacing(.5,1.5),borderRadius:m.shape.radius.pill,display:"inline-flex",gap:m.spacing(.5),alignItems:"center"})}),l=(m,v,E)=>{const p=v?.getBoundingClientRect(),h=E?.getBoundingClientRect();if(!p||!h)return!1;switch(m){case"right":return p.width+h.right>window.innerWidth;case"bottom":return p.height+h.bottom>window.innerHeight;case"left":return h.left-p.width<0;case"top":return h.top-p.height<0;default:return!1}},d=(m,v)=>(0,n.keyframes)({from:{opacity:0,transform:`translate(${m}, ${v})`},to:{opacity:1,transform:"translate(0, 0px)"}}),f=m=>{const E=d(0,m.spacing(1)),p=d(0,m.spacing(1*-1)),h=d(m.spacing(1),0),s=d(m.spacing(1*-1),0);return{top:(0,n.css)({marginBottom:m.spacing(1),animation:`${E} ease-out 100ms`}),bottom:(0,n.css)({marginTop:m.spacing(1),animation:`${p} ease-out 100ms`}),left:(0,n.css)({marginRight:m.spacing(1),animation:`${h} ease-out 100ms`}),right:(0,n.css)({marginLeft:m.spacing(1),animation:`${s} ease-out 100ms`})}}},1537:(Q,A,e)=>{"use strict";e.d(A,{H:()=>r});var n=e(31733),a=e(90854),i=e(64516);const r=n.forwardRef((g,u)=>{const{defaultValue:c="",minWidth:l=10,maxWidth:d,onCommitChange:f,onKeyDown:m,onBlur:v,...E}=g,[p,h]=n.useState(c),[s,y]=n.useState(l);return(0,n.useEffect)(()=>{y(o(p.toString(),l,d))},[p,d,l]),n.createElement(i.I,{...E,ref:u,value:p.toString(),onChange:D=>{h(D.currentTarget.value)},width:s,onBlur:D=>{v?v(D):f&&f(D)},onKeyDown:D=>{m?m(D):D.key==="Enter"&&f&&f(D)},"data-testid":"autosize-input"})});function o(g,u,c){if(!g)return u;const l=3,d=(0,a.X1)(g.toString(),14).width/8+l;return u&&d<u?u:c&&d>c?c:d}r.displayName="AutoSizeInput"},64516:(Q,A,e)=>{"use strict";e.d(A,{H:()=>l,I:()=>c});var n=e(76932),a=e(31733),i=e(35013),r=e(76067),o=e(33227),g=e(90119),u=e(89719);const c=a.forwardRef((d,f)=>{const{className:m,addonAfter:v,addonBefore:E,prefix:p,suffix:h,invalid:s,loading:y,width:D=0,...C}=d,[P,b]=(0,i.Z)(),[T,O]=(0,i.Z)(),R=(0,r.l4)(),I=l({theme:R,invalid:!!s,width:D});return a.createElement("div",{className:(0,n.cx)(I.wrapper,m),"data-testid":"input-wrapper"},!!E&&a.createElement("div",{className:I.addon},E),a.createElement("div",{className:I.inputWrapper},p&&a.createElement("div",{className:I.prefix,ref:P},p),a.createElement("input",{ref:f,className:I.input,...C,style:{paddingLeft:p?b.width+12:void 0,paddingRight:h||y?O.width+12:void 0}}),(h||y)&&a.createElement("div",{className:I.suffix,ref:T},y&&a.createElement(u.$,{className:I.loadingIndicator,inline:!0}),h)),!!v&&a.createElement("div",{className:I.addon},v))});c.displayName="Input";const l=(0,o.B)(({theme:d,invalid:f=!1,width:m})=>{const v="28px",E=(0,n.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:d.typography.size.md,height:"100%",minWidth:v,color:d.colors.text.secondary});return{wrapper:(0,n.cx)((0,n.css)({label:"input-wrapper",display:"flex",width:m?d.spacing(m):"100%",height:d.spacing(d.components.height.md),borderRadius:d.shape.radius.default,"&:hover":{"> .prefix, .suffix, .input":{borderColor:f?d.colors.error.border:d.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,n.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:v},"&:not(:last-child)":{paddingRight:v},"&[readonly]":{cursor:"default"}}}),input:(0,n.cx)((0,g.GL)(d),(0,g.RK)(d,f),(0,n.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:d.shape.radius.default,height:"100%",width:"100%"})),inputDisabled:(0,n.css)({backgroundColor:d.colors.action.disabledBackground,color:d.colors.action.disabledText,border:`1px solid ${d.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,n.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,n.cx)(E,(0,n.css)({label:"input-prefix",paddingLeft:d.spacing(1),paddingRight:d.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,n.cx)(E,(0,n.css)({label:"input-suffix",paddingLeft:d.spacing(1),paddingRight:d.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,n.css)({"& + *":{marginLeft:d.spacing(.5)}})}})},32901:(Q,A,e)=>{"use strict";e.d(A,{g:()=>a});var n=e(54126);const a=n.Qr},77543:(Q,A,e)=>{"use strict";e.d(A,{e:()=>h});var n=e(76932),a=e(69781),i=e(31733),r=e(37109),o=e(20298),g=e(76067),u=e(49311),c=e(47808),l=e(58037),d=e(41354);const f=(0,n.css)({display:"flex",alignItems:"center",height:"100%"});function m({row:C,__rowID:P}){return i.createElement("div",{className:f},i.createElement(d.h,{tooltip:"toggle row expanded","aria-controls":P,name:C.isExpanded?"angle-down":"angle-right","aria-expanded":C.isExpanded,...C.getToggleRowExpandedProps(),size:"lg"}))}const v="__expander";function E(C){return[{id:v,Cell:m,disableSortBy:!0,width:0},...C.map(P=>({id:P.id,accessor:P.id,Header:P.header||(()=>null),sortType:P.sortType||"alphanumeric",disableSortBy:!P.sortType,width:P.disableGrow?0:void 0,visible:P.visible,...P.cell&&{Cell:P.cell}}))]}const p=C=>{const P=C.colors.emphasize(C.colors.background.primary,.03);return{container:(0,n.css)({display:"flex",gap:C.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),table:(0,n.css)({borderRadius:C.shape.radius.default,width:"100%",td:{padding:C.spacing(1)},"td, th":{minWidth:C.spacing(3)}}),disableGrow:(0,n.css)({width:0}),header:(0,n.css)({borderBottom:`1px solid ${C.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:C.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:C.spacing(2.5),textAlign:"left",fontWeight:C.typography.fontWeightMedium}}),row:(0,n.css)({label:"row",borderBottom:`1px solid ${C.colors.border.weak}`,"&:hover":{backgroundColor:P},"&:last-child":{borderBottom:0}}),expandedRow:(0,n.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,n.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${C.colors.border.weak}`,position:"relative",padding:C.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:C.spacing(2),background:C.colors.border.medium}}}),sortableHeader:(0,n.css)({"&&":{padding:0}})}};function h({className:C,columns:P,data:b,getRowId:T,headerTooltips:O,pageSize:R=0,renderExpandedRow:I,fetchData:M}){const x=(0,g.wW)(p),L=(0,i.useMemo)(()=>E(P),[P]),S=s(),U=(0,i.useCallback)(Z=>`${S}-${Z.id}`.replace(/\s/g,""),[S]),N=[r.useSortBy,r.useExpanded],w=R>0;w&&N.push(r.usePagination);const G=(0,r.useTable)({columns:L,data:b,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!M,getRowId:T,initialState:{hiddenColumns:[!I&&v,...L.filter(Z=>!(!Z.visible||Z.visible(b))).map(Z=>Z.id).filter(o.fQ)].filter(o.fQ)}},...N),{getTableProps:_,getTableBodyProps:K,headerGroups:k,prepareRow:z}=G,{sortBy:W}=G.state;return(0,i.useEffect)(()=>{M&&M({sortBy:W})},[W,M]),(0,i.useEffect)(()=>{w&&G.setPageSize(R)},[w,R,G.setPageSize,G]),i.createElement("div",{className:x.container},i.createElement("table",{..._(),className:(0,n.cx)(x.table,C)},i.createElement("thead",null,k.map(Z=>{const{key:H,...X}=Z.getHeaderGroupProps();return i.createElement("tr",{key:H,...X},Z.headers.map(Y=>{const{key:ne,...se}=Y.getHeaderProps(),re=O?.[Y.id];return i.createElement("th",{key:ne,className:(0,n.cx)(x.header,{[x.disableGrow]:Y.width===0,[x.sortableHeader]:Y.canSort}),...se,...Y.isSorted&&{"aria-sort":Y.isSortedDesc?"descending":"ascending"}},i.createElement(D,{column:Y,headerTooltip:re}))}))})),i.createElement("tbody",{...K()},(w?G.page:G.rows).map(Z=>{z(Z);const{key:H,...X}=Z.getRowProps(),Y=U(Z),ne=Z.isExpanded;return i.createElement(i.Fragment,{key:H},i.createElement("tr",{...X,className:(0,n.cx)(x.row,ne&&x.expandedRow)},Z.cells.map(se=>{const{key:re,...ge}=se.getCellProps();return i.createElement("td",{key:re,...ge},se.render("Cell",{__rowID:Y}))})),ne&&I&&i.createElement("tr",{...X,id:Y,className:x.expandedContentRow},i.createElement("td",{colSpan:Z.cells.length},I(Z.original))))}))),w&&i.createElement("span",null,i.createElement(c.t,{currentPage:G.state.pageIndex+1,numberOfPages:G.pageOptions.length,onNavigate:Z=>G.gotoPage(Z-1)})))}const s=()=>(0,i.useMemo)(()=>(0,a.uniqueId)("InteractiveTable"),[]),y=C=>({sortIcon:(0,n.css)({position:"absolute",top:C.spacing(1)}),headerTooltipIcon:(0,n.css)({marginLeft:C.spacing(.5)})});function D({column:{canSort:C,render:P,isSorted:b,isSortedDesc:T,getSortByToggleProps:O},headerTooltip:R}){const I=(0,g.wW)(y),{onClick:M}=O(),x=i.createElement(i.Fragment,null,P("Header"),R&&i.createElement(l.u,{theme:"info-alt",content:R.content,placement:"top-end"},i.createElement(u.J,{className:I.headerTooltipIcon,name:R.iconName||"info-circle","data-testid":"header-tooltip-icon"})),b&&i.createElement("span",{"aria-hidden":"true",className:I.sortIcon},i.createElement(u.J,{name:T?"angle-down":"angle-up"})));return C?i.createElement("button",{type:"button",onClick:M},x):x}},79300:(Q,A,e)=>{"use strict";e.d(A,{g:()=>i});var n=e(31733),a=e(71756);class i extends n.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,n.createRef)(),this.renderJson=()=>{const{json:o,config:g,open:u,onDidRender:c}=this.props,l=this.wrapperRef.current,d=new a.u(o,u,g);l.hasChildNodes()?l.replaceChild(d.render(),l.lastChild):l.appendChild(d.render()),c&&c(d.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:o}=this.props;return n.createElement("div",{className:o,ref:this.wrapperRef})}}i.defaultProps={open:3,config:{animateOpen:!0}}},71756:(Q,A,e)=>{"use strict";e.d(A,{u:()=>s});var n=e(69781);function a(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function i(y){return!!y&&typeof y==="object"}function r(y){if(y===void 0)return"";if(y===null||typeof y=="object"&&!y.constructor)return"Object";const C=/function ([^(]*)/.exec(y.constructor.toString());return C&&C.length>1?C[1]:""}function o(y){return y===null?"null":typeof y}function g(y,D){const C=o(y);return C==="null"||C==="undefined"?C:(C==="string"&&(D='"'+a(D)+'"'),C==="function"?y.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":D)}let u="";function c(y){return i(y)?(u=r(y),Array.isArray(y)&&(u+="["+y.length+"]")):u=g(y,y.toString()),u}function l(y){return`json-formatter-${y}`}function d(y,D,C){const P=document.createElement(y);return D&&P.classList.add(l(D)),C!==void 0&&(C instanceof Node?P.appendChild(C):P.appendChild(document.createTextNode(String(C)))),P}const f=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,m=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,v=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,E=10,p=typeof window<"u"&&window.requestAnimationFrame||(y=>(y(),0)),h={animateOpen:!0,animateClose:!0};class s{constructor(D,C=1,P=h,b){this.json=D,this.open=C,this.config=P,this.key=b,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(D){this._isOpen=D}get isDate(){return this.type==="string"&&(f.test(this.json)||v.test(this.json)||m.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return i(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return r(this.json)}get type(){return o(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(D=>D||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(l("open")))}openAtDepth(D=1){D<0||(this.open=D,this.isOpen=D!==0,this.element&&(this.removeChildren(!1),D===0?this.element.classList.remove(l("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(l("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,n.isNumber)(this.json[0])||(0,n.isNumber)(this.json[1]))}renderArray(){const D=d("span");return D.appendChild(d("span","bracket","[")),this.isNumberArray()?(this.json.forEach((C,P)=>{P>0&&D.appendChild(d("span","array-comma",",")),D.appendChild(d("span","number",C))}),this.skipChildren=!0):D.appendChild(d("span","number",this.json.length)),D.appendChild(d("span","bracket","]")),D}render(D=!1){this.element=d("div","row");const C=d("a","toggler-link"),P=d("span","toggler");if(this.isObject&&C.appendChild(P),this.hasKey&&C.appendChild(d("span","key",`${this.key}:`)),this.isObject){const T=d("span","value"),O=d("span"),R=d("span","constructor-name",this.constructorName);if(O.appendChild(R),this.isArray){const I=this.renderArray();O.appendChild(I)}T.appendChild(O),C.appendChild(T)}else{const T=this.isUrl?d("a"):d("span");T.classList.add(l(this.type)),this.isDate&&T.classList.add(l("date")),this.isUrl&&(T.classList.add(l("url")),T.setAttribute("href",this.json));const O=g(this.json,this.json);T.appendChild(document.createTextNode(O)),C.appendChild(T)}const b=d("div","children");return this.isObject&&b.classList.add(l("object")),this.isArray&&b.classList.add(l("array")),this.isEmpty&&b.classList.add(l("empty")),this.config&&this.config.theme&&this.element.classList.add(l(this.config.theme)),this.isOpen&&this.element.classList.add(l("open")),D||this.element.appendChild(C),this.skipChildren?C.removeChild(P):this.element.appendChild(b),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&C.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(D=!1){const C=this.element&&this.element.querySelector(`div.${l("children")}`);if(!(!C||this.isEmpty))if(D){let P=0;const b=()=>{const T=this.keys[P],O=new s(this.json[T],this.open-1,this.config,T);C.appendChild(O.render()),P+=1,P<this.keys.length&&(P>E?b():p(b))};p(b)}else this.keys.forEach(P=>{const b=new s(this.json[P],this.open-1,this.config,P);C.appendChild(b.render())})}removeChildren(D=!1){const C=this.element&&this.element.querySelector(`div.${l("children")}`);if(D){let P=0;const b=()=>{C&&C.children.length&&(C.removeChild(C.children[0]),P+=1,P>E?b():p(b))};p(b)}else C&&(C.innerHTML="")}}},68833:(Q,A,e)=>{"use strict";e.d(A,{x:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(46591);const o=(0,a.forwardRef)((l,d)=>{const{children:f,margin:m,marginX:v,marginY:E,marginTop:p,marginBottom:h,marginLeft:s,marginRight:y,padding:D,paddingX:C,paddingY:P,paddingTop:b,paddingBottom:T,paddingLeft:O,paddingRight:R,display:I,backgroundColor:M,grow:x,shrink:L,basis:S,flex:U,borderColor:N,borderStyle:w,borderRadius:G,justifyContent:_,alignItems:K,boxShadow:k,element:z,gap:W,...Z}=l,H=(0,i.wW)(c,m,v,E,p,h,s,y,D,C,P,b,T,O,R,I,M,x,L,S,U,N,w,G,_,K,k,W),X=z??"div";return a.createElement(X,{ref:d,className:H.root,...Z},f)});o.displayName="Box";const g=(l,d)=>{switch(l){case"error":case"success":case"info":case"warning":return d.colors[l].borderTransparent;default:return l?d.colors.border[l]:void 0}},u=(l,d)=>{switch(l){case"error":case"success":case"info":case"warning":return d.colors[l].transparent;default:return l?d.colors.background[l]:void 0}},c=(l,d,f,m,v,E,p,h,s,y,D,C,P,b,T,O,R,I,M,x,L,S,U,N,w,G,_,K)=>({root:(0,n.css)([(0,r.U)(l,d,k=>({margin:l.spacing(k)})),(0,r.U)(l,f,k=>({marginLeft:l.spacing(k),marginRight:l.spacing(k)})),(0,r.U)(l,m,k=>({marginTop:l.spacing(k),marginBottom:l.spacing(k)})),(0,r.U)(l,v,k=>({marginTop:l.spacing(k)})),(0,r.U)(l,E,k=>({marginBottom:l.spacing(k)})),(0,r.U)(l,p,k=>({marginLeft:l.spacing(k)})),(0,r.U)(l,h,k=>({marginRight:l.spacing(k)})),(0,r.U)(l,s,k=>({padding:l.spacing(k)})),(0,r.U)(l,y,k=>({paddingLeft:l.spacing(k),paddingRight:l.spacing(k)})),(0,r.U)(l,D,k=>({paddingTop:l.spacing(k),paddingBottom:l.spacing(k)})),(0,r.U)(l,C,k=>({paddingTop:l.spacing(k)})),(0,r.U)(l,P,k=>({paddingBottom:l.spacing(k)})),(0,r.U)(l,b,k=>({paddingLeft:l.spacing(k)})),(0,r.U)(l,T,k=>({paddingRight:l.spacing(k)})),(0,r.U)(l,O,k=>({display:k})),(0,r.U)(l,R,k=>({backgroundColor:u(k,l)})),(0,r.U)(l,I,k=>({flexGrow:k})),(0,r.U)(l,M,k=>({flexShrink:k})),(0,r.U)(l,x,k=>({flexBasis:k})),(0,r.U)(l,L,k=>({flex:k})),(0,r.U)(l,U,k=>({borderStyle:k})),(0,r.U)(l,S,k=>({borderColor:g(k,l)})),(U||S)&&{borderWidth:"1px"},(0,r.U)(l,w,k=>({justifyContent:k})),(0,r.U)(l,G,k=>({alignItems:k})),(0,r.U)(l,N,k=>({borderRadius:l.shape.radius[k]})),(0,r.U)(l,_,k=>({boxShadow:l.shadows[k]})),(0,r.U)(l,K,k=>({gap:l.spacing(k)}))])})},41431:(Q,A,e)=>{"use strict";e.d(A,{r:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(46591);const o=(0,a.forwardRef)((u,c)=>{const{children:l,gap:d,columns:f,minColumnWidth:m,...v}=u,E=(0,i.wW)(g,d,f,m);return a.createElement("div",{ref:c,...v,className:E.grid},l)});o.displayName="Grid";const g=(u,c,l,d)=>({grid:(0,n.css)([{display:"grid"},(0,r.U)(u,c,f=>({gap:u.spacing(f)})),d&&(0,r.U)(u,d,f=>({gridTemplateColumns:`repeat(auto-fill, minmax(${u.spacing(f)}, 1fr))`})),l&&(0,r.U)(u,l,f=>({gridTemplateColumns:`repeat(${f}, 1fr)`}))])})},79106:(Q,A,e)=>{"use strict";e.d(A,{Ar:()=>o,Lh:()=>g,W2:()=>c,wc:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=(m=>(m[m.Horizontal=0]="Horizontal",m[m.Vertical=1]="Vertical",m))(r||{});const o=({children:m,orientation:v=0,spacing:E="sm",justify:p="flex-start",align:h="normal",wrap:s=!1,width:y="100%",height:D="100%",...C})=>{const P=(0,i.wW)(l,v,E,p,h,s);return a.createElement("div",{className:P.layout,style:{width:y,height:D},...C},a.Children.toArray(m).filter(Boolean).map((b,T)=>a.createElement("div",{className:P.childWrapper,key:T},b)))},g=({children:m,spacing:v,justify:E,align:p="center",wrap:h,width:s,height:y})=>a.createElement(o,{spacing:v,justify:E,orientation:0,align:p,width:s,height:y,wrap:h},m),u=({children:m,spacing:v,justify:E,align:p,width:h,height:s})=>a.createElement(o,{spacing:v,justify:E,orientation:1,align:p,width:h,height:s},m),c=({children:m,padding:v,margin:E,grow:p,shrink:h})=>{const s=(0,i.wW)(f,v,E);return a.createElement("div",{className:(0,n.cx)(s.wrapper,p!==void 0&&(0,n.css)({flexGrow:p}),h!==void 0&&(0,n.css)({flexShrink:h}))},m)},l=(m,v,E,p,h,s)=>{const y=E!=="none"?m.spacing(d[E]):0,D=v===0&&!s||v===1?0:`-${y}`,C=v===1?"vertical-group":"horizontal-group";return{layout:(0,n.css)({label:C,display:"flex",flexDirection:v===1?"column":"row",flexWrap:s?"wrap":"nowrap",justifyContent:p,alignItems:h,height:"100%",maxWidth:"100%",marginBottom:D}),childWrapper:(0,n.css)({label:"layoutChildrenWrapper",marginBottom:v===0&&!s?0:y,marginRight:v===0?y:0,display:"flex",alignItems:h,"&:last-child":{marginBottom:v===1?0:void 0,marginRight:v===0?0:void 0}})}},d={none:0,xs:.5,sm:1,md:2,lg:3},f=(m,v,E)=>{const p=v&&v!=="none"&&m.spacing(d[v])||0,h=E&&E!=="none"&&m.spacing(d[E])||0;return{wrapper:(0,n.css)({label:"container",margin:h,padding:p})}}},37739:(Q,A,e)=>{"use strict";e.d(A,{K:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(46591);const o=a.forwardRef((u,c)=>{const{gap:l=1,alignItems:d,justifyContent:f,direction:m,wrap:v,children:E,grow:p,shrink:h,basis:s,flex:y,...D}=u,C=(0,i.wW)(g,l,d,f,m,v,p,h,s,y);return a.createElement("div",{ref:c,className:C.flex,...D},E)});o.displayName="Stack";const g=(u,c,l,d,f,m,v,E,p,h)=>({flex:(0,n.css)([{display:"flex"},(0,r.U)(u,f,s=>({flexDirection:s})),(0,r.U)(u,m,s=>({flexWrap:s})),(0,r.U)(u,l,s=>({alignItems:s})),(0,r.U)(u,d,s=>({justifyContent:s})),(0,r.U)(u,c,s=>({gap:u.spacing(s)})),(0,r.U)(u,v,s=>({flexGrow:s})),(0,r.U)(u,E,s=>({flexShrink:s})),(0,r.U)(u,p,s=>({flexBasis:s})),(0,r.U)(u,h,s=>({flex:s}))])})},46591:(Q,A,e)=>{"use strict";e.d(A,{U:()=>a});function n(i,r,o,g){const u=r[g];if(u!=null)return{[i.breakpoints.up(g)]:o(u)}}function a(i,r,o){return r==null?null:typeof r!="object"||!("xs"in r)?o(r):[n(i,r,o,"xs"),n(i,r,o,"sm"),n(i,r,o,"md"),n(i,r,o,"lg"),n(i,r,o,"xl"),n(i,r,o,"xxl")]}},34037:(Q,A,e)=>{"use strict";e.d(A,{r:()=>o});var n=e(31733),a=e(16425),i=e(84912),r=e(98827);const o=(0,n.forwardRef)(({href:g,children:u,...c},l)=>{const d=i.u.stripBaseFromUrl(r.QX.sanitizeUrl(g??""));return n.createElement(a.Link,{ref:l,to:d,...c},u)});o.displayName="Link"},94746:(Q,A,e)=>{"use strict";e.d(A,{h:()=>d});var n=e(76932),a=e(31733),i=e(84912),r=e(98827),o=e(76067),g=e(49311),u=e(27564),c=e(34037);const l={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},d=(0,a.forwardRef)(({href:m,color:v="link",external:E=!1,inline:p=!0,variant:h="body",weight:s,icon:y,children:D,...C},P)=>{const b=i.u.stripBaseFromUrl(r.QX.sanitizeUrl(m??"")),T=(0,o.l4)(),O=f(T,p,h,s,v),R=y||"external-link-alt";return E?a.createElement("a",{href:b,ref:P,...C,target:"_blank",rel:"noreferrer",className:O},D,a.createElement(g.J,{size:l[h]||"md",name:R})):a.createElement(c.r,{ref:P,href:b,...C,className:O},D,y&&a.createElement(g.J,{name:y,size:l[h]||"md"}))});d.displayName="TextLink";const f=(m,v,E,p,h)=>(0,n.css)([E&&{...m.typography[E]},p&&{fontWeight:(0,u.RC)(p,m)},h&&{color:m.colors.text[h]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:m.colors.text.link}},v&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},64674:(Q,A,e)=>{"use strict";e.d(A,{L:()=>o});var n=e(76932),a=e(31733),i=e(33227);const r=(0,i.B)((g=!1)=>({list:(0,n.css)({listStyleType:"none",margin:0,padding:0}),item:(0,n.css)({display:g&&"inline-block"||"block"})}));class o extends a.PureComponent{constructor(u){super(u)}render(){const{items:u,renderItem:c,getItemKey:l,className:d,inline:f}=this.props,m=r(f);return a.createElement("ul",{className:(0,n.cx)(m.list,d)},u.map((v,E)=>a.createElement("li",{className:m.item,key:l?l(v):E},c(v,E))))}}},37623:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>i});var n=e(31733),a=e(64674);class i extends n.PureComponent{render(){return n.createElement(a.L,{inline:!0,...this.props})}}},65650:(Q,A,e)=>{"use strict";e.d(A,{a:()=>i});var n=e(31733),a=e(64674);class i extends n.PureComponent{render(){return n.createElement(a.L,{...this.props})}}},13069:(Q,A,e)=>{"use strict";e.d(A,{F:()=>d});var n=e(76932),a=e(31733),i=e(76067);const r=28,o=2.4,g=500,u=4e3,c=300,l=100/r*100;function d({width:m,delay:v=c,ariaLabel:E="Loading bar"}){const p=Math.min(Math.max(Math.round(m*o),g),u),h=(0,i.wW)(f,v,p),s={overflow:"hidden"};return a.createElement("div",{style:s},a.createElement("div",{"aria-label":E,className:h.bar}))}const f=(m,v,E)=>{const p=(0,n.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${l}%)`}});return{bar:(0,n.css)({width:r+"%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)",transform:"translateX(-100%)",animationName:p,animationDelay:`${v}ms`,animationDuration:`${E}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",willChange:"transform"})}}},61375:(Q,A,e)=>{"use strict";e.d(A,{u:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(89719);const o=({text:u,className:c,...l})=>{const d=(0,i.wW)(g);return a.createElement("div",{className:(0,n.cx)(d.container,c),...l},u," ",a.createElement(r.$,{inline:!0}))},g=u=>({container:(0,n.css)({marginBottom:u.spacing(4)})})},94993:(Q,A,e)=>{"use strict";e.d(A,{b:()=>r});var n=e(31733),a=e(38834),i=e(51395);const r=({value:o,onChange:g,context:u,item:c})=>{const l=c.settings??{},d=(0,i.IX)(u.data,l?.filter),f=(0,i.nw)(d,o,void 0,void 0,l.baseNameMode),m=(0,n.useCallback)(E=>{if(!(E&&!(0,i.w3)(E.value,d)))return g(E?.value)},[d,g]),v=f.find(E=>E.value===o);return n.createElement(n.Fragment,null,n.createElement(a.Ph,{value:v,placeholder:l.placeholderText??"Select field",options:f,onChange:m,noOptionsMessage:l.noFieldsMessage,width:l.width,isClearable:l.isClearable!==!1}))}},19679:(Q,A,e)=>{"use strict";e.d(A,{$w:()=>f,OL:()=>c});var n=e(31733),a=e(85666),i=e(18198),r=e(85610),o=e(84022),g=e(38834);const u=(0,n.memo)(m=>{const{data:v,options:E,onChange:p,id:h}=m,s=l(v),y=d(s,E),D=(0,n.useCallback)(P=>p(P.value),[p]),C=y.find(P=>P.value===E);return n.createElement(g.Ph,{inputId:h,value:C,options:y,onChange:D})});u.displayName="FieldTypeMatcherEditor";const c=[{value:a.fS.number,label:"Number",icon:(0,o.WZ)(a.fS.number)},{value:a.fS.string,label:"String",icon:(0,o.WZ)(a.fS.string)},{value:a.fS.time,label:"Time",icon:(0,o.WZ)(a.fS.time)},{value:a.fS.boolean,label:"Boolean",icon:(0,o.WZ)(a.fS.boolean)},{value:a.fS.trace,label:"Traces",icon:(0,o.WZ)(a.fS.trace)},{value:a.fS.enum,label:"Enum",icon:(0,o.WZ)(a.fS.enum)},{value:a.fS.other,label:"Other",icon:(0,o.WZ)(a.fS.other)}],l=m=>(0,n.useMemo)(()=>{const v=new Map;for(const E of c)v.set(E.value,0);for(const E of m)for(const p of E.fields){const h=p.type||a.fS.other;let s=v.get(h);s||(s=0),v.set(h,s+1)}return v},[m]),d=(m,v)=>(0,n.useMemo)(()=>{let E=!1;const p=[];for(const h of c){const s=m.get(h.value),y=v===h.value;(s||y)&&p.push({...h,label:`${h.label} (${m.get(h.value)})`}),y&&(E=!0)}return v&&!E&&p.push({value:v,label:`${v} (No matches)`}),p},[m,v]),f={id:i.mi.byType,component:u,matcher:r.Ls.get(i.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:m=>m}},22385:(Q,A,e)=>{"use strict";e.d(A,{J8:()=>d,fN:()=>E});var n=e(76932),a=e(31733),i=e(66542),r=e(18198),o=e(85610),g=e(71199),u=e(76067),c=e(64516),l=e(38834);const d=[{label:"==",value:g.Bd.EQ},{label:"!=",value:g.Bd.NEQ},{label:">",value:g.Bd.GT},{label:">=",value:g.Bd.GTE},{label:"<",value:g.Bd.LT},{label:"<=",value:g.Bd.LTE}];function f(p){return p===i.gz.allIsNull||p===i.gz.allIsZero}const m=({options:p,onChange:h})=>{const s=(0,u.wW)(v),y=(0,a.useMemo)(()=>i.TB.selectOptions([p?.reducer]),[p?.reducer]),D=(0,a.useCallback)(O=>h({...p,reducer:O.value}),[p,h]),C=(0,a.useCallback)(O=>h({...p,op:O.value}),[p,h]),P=(0,a.useCallback)(O=>{const R=O.currentTarget.valueAsNumber;return h({...p,value:R})},[p,h]),b=p??{},T=f(p.reducer);return a.createElement("div",{className:s.spot},a.createElement(l.Ph,{value:y.current,options:y.options,onChange:D,placeholder:"Select field reducer"}),b.reducer&&!T&&a.createElement(a.Fragment,null,a.createElement(l.Ph,{value:d.find(O=>O.value===b.op),options:d,onChange:C,"aria-label":"Comparison operator",width:19}),a.createElement(c.I,{type:"number",value:b.value,onChange:P})))},v=p=>({spot:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),E={id:r.mi.byValue,component:m,matcher:o.Ls.get(r.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:p=>`${p?.reducer} ${p?.op} ${p?.value}`}},33279:(Q,A,e)=>{"use strict";e.d(A,{O:()=>u,S:()=>d});var n=e(31733),a=e(27957),i=e(18198),r=e(85610),o=e(38834);const g=(f,m,v)=>{if(!v)return;let E=f.find(p=>!m.some(h=>p===h));if(E)return E};function u({value:f,data:m,onChange:v,placeholder:E}){const p=(0,n.useMemo)(()=>c(m),[m]),[h,s]=(0,n.useState)({refIds:[],value:void 0}),y=(0,n.useMemo)(()=>p.find(C=>C.value===f)??g(p,h.refIds,h.value),[f,p,h]),D=(0,n.useCallback)(C=>{v(C?.value)},[v]);return(p!==h.refIds||y?.value!==h.value)&&s({refIds:p,value:y?.value}),n.createElement(o.Ph,{options:p,onChange:D,isClearable:!0,placeholder:E??"Select query refId",value:y})}function c(f){const m=new Map;for(const E of f){const p=E.refId??"",h=m.get(p)??[];h.length===0&&m.set(p,h),h.push(E)}const v=[];for(const[E,p]of m.entries())v.push({value:E,label:`Query: ${E??"(missing refId)"}`,description:l(p)});return v}function l(f){return`Frames (${f.length}):
    ${f.slice(0,Math.min(3,f.length)).map(m=>(0,a.nf)(m)).join(", ")} ${f.length>3?"...":""}`}const d={id:i.mi.byFrameRefID,component:f=>n.createElement(u,{value:f.options,data:f.data,onChange:f.onChange}),matcher:r.Ls.get(i.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:f=>f}},45418:(Q,A,e)=>{"use strict";e.d(A,{i:()=>s});var n=e(18662),a=e(31733),i=e(18198),r=e(85610),o=e(64516);const g=(0,a.memo)(y=>{const{options:D,onChange:C}=y,P=(0,a.useCallback)(b=>C(b.target.value),[C]);return a.createElement(o.I,{placeholder:"Enter regular expression",defaultValue:D,onBlur:P})});g.displayName="FieldNameByRegexMatcherEditor";const u={id:i.mi.byRegexp,component:g,matcher:r.Ls.get(i.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:y=>y};var c=e(38834),l=e(51395);const d=(0,a.memo)(y=>{const{data:D,options:C,onChange:P,id:b}=y,T=(0,l.IX)(D),O=(0,l.nw)(T,C),R=(0,a.useCallback)(M=>{if((0,l.w3)(M.value,T))return P(M.value)},[T,P]),I=O.find(M=>M.value===C);return a.createElement(c.Ph,{value:I,options:O,onChange:R,inputId:b})});d.displayName="FieldNameMatcherEditor";const f={id:i.mi.byName,component:d,matcher:r.Ls.get(i.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:y=>y},m=(0,a.memo)(y=>{const{data:D,options:C,onChange:P}=y,{readOnly:b,prefix:T}=C,O=(0,l.IX)(D),R=(0,l.nw)(O,void 0),I=(0,a.useCallback)(M=>{if(Array.isArray(M))return P({...C,names:M.reduce((x,L)=>((0,l.w3)(L.value,O)&&x.push(L.value),x),[])})},[O,P,C]);if(b){const M=(C.names??[]).join(", ");return a.createElement(o.I,{value:M,readOnly:!0,disabled:!0,prefix:T})}return a.createElement(c.NU,{value:C.names,options:R,onChange:I})});m.displayName="FieldNameMatcherEditor";const v={id:i.mi.byNames,component:m,matcher:r.Ls.get(i.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:y=>(y.names??[]).join(", "),excludeFromPicker:!0};var E=e(19679),p=e(22385),h=e(33279);const s=new n.B(()=>[f,u,E.$w,h.S,v,p.fN])},51395:(Q,A,e)=>{"use strict";e.d(A,{IX:()=>u,g2:()=>g,nw:()=>c,w3:()=>o});var n=e(31733),a=e(27957),i=e(15476),r=e(84022);function o(l,d){return l?d.display.has(l)||d.raw.has(l):!1}function g(l,d){const f={display:new Set,raw:new Set,fields:new Map};for(const m of l)for(const v of m.fields){if(d&&!d(v))continue;const E=(0,a.CZ)(v,m,l);f.display.add(E),f.fields.set(E,v),v.name&&E!==v.name&&(f.raw.add(v.name),f.fields.set(v.name,v))}return f}function u(l,d){return(0,n.useMemo)(()=>g(l,d),[l,d])}function c(l,d,f,m,v){return(0,n.useMemo)(()=>{let E=!1;const p=[];if(f&&p.push(f),v===i.ii.OnlyBaseNames)for(const h of l.raw)!E&&h===d&&(E=!0),p.push({value:h,label:`${h} (base field name)`});else{for(const h of l.display){!E&&h===d&&(E=!0);const s=l.fields.get(h);(!m||m===s?.type)&&p.push({value:h,label:h,icon:s?(0,r.e7)(s):void 0})}if(v!==i.ii.ExcludeBaseNames)for(const h of l.raw)l.display.has(h)||(!E&&h===d&&(E=!0),p.push({value:h,label:`${h} (base field name)`}))}return d&&!E&&p.push({value:d,label:`${d} (not found)`}),p},[l,d,f,m,v])}},63424:(Q,A,e)=>{"use strict";e.d(A,{v:()=>l});var n=e(76932),a=e(31733),i=e(76067),r=e(17863),o=e(85115),g=e(46213),u=e(96948);const c=a.forwardRef(({header:f,children:m,ariaLabel:v,onOpen:E,onClose:p,onKeyDown:h,...s},y)=>{const D=(0,i.wW)(d),C=(0,a.useRef)(null);(0,a.useImperativeHandle)(y,()=>C.current);const[P]=(0,u.d)({localRef:C,onOpen:E,onClose:p,onKeyDown:h});return a.createElement("div",{...s,tabIndex:-1,ref:C,className:D.wrapper,role:"menu","aria-label":v,onKeyDown:P},f&&a.createElement("div",{className:(0,n.cx)(D.header,!!m&&a.Children.toArray(m).length>0&&D.headerBorder)},f),m)});c.displayName="Menu";const l=Object.assign(c,{Item:g.s,Divider:r.R,Group:o.k}),d=f=>({header:(0,n.css)({padding:`${f.spacing(.5,1,1,1)}`}),headerBorder:(0,n.css)({borderBottom:`1px solid ${f.colors.border.weak}`}),wrapper:(0,n.css)({background:`${f.colors.background.primary}`,boxShadow:`${f.shadows.z3}`,display:"inline-block",borderRadius:`${f.shape.radius.default}`,padding:`${f.spacing(.5,0)}`})})},17863:(Q,A,e)=>{"use strict";e.d(A,{R:()=>r});var n=e(76932),a=e(31733),i=e(76067);function r(){const g=(0,i.wW)(o);return a.createElement("div",{className:g.divider})}const o=g=>({divider:(0,n.css)({height:1,backgroundColor:g.colors.border.weak,margin:g.spacing(.5,0)})})},85115:(Q,A,e)=>{"use strict";e.d(A,{k:()=>g});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(76067);const g=({label:c,ariaLabel:l,children:d})=>{const f=(0,o.wW)(u),m=`group-label-${(0,a.uniqueId)()}`;return r.createElement("div",{role:"group","aria-labelledby":!l&&c?m:void 0,"aria-label":l},c&&r.createElement("label",{id:m,className:f.groupLabel,"aria-hidden":!0},c),d)};g.displayName="MenuGroup";const u=c=>({groupLabel:(0,n.css)({color:c.colors.text.secondary,fontSize:c.typography.size.sm,padding:c.spacing(.5,1)})})},46213:(Q,A,e)=>{"use strict";e.d(A,{s:()=>m});var n=e(76932),a=e(31733),i=e(76067),r=e(83998),o=e(49311),g=e(37739),u=e(21568),c=e(96948);const l=E=>{if(!E)return!1;const p=E.parentElement.getBoundingClientRect(),h=E.getBoundingClientRect();return h.width!==0&&p.right+h.width+10>window.innerWidth},d=a.memo(({items:E,isOpen:p,openedWithArrow:h,setOpenedWithArrow:s,close:y,customStyle:D})=>{const C=(0,i.wW)(f),P=(0,a.useRef)(null),[b]=(0,c.d)({localRef:P,isMenuOpen:p,openedWithArrow:h,setOpenedWithArrow:s,close:y}),[T,O]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{p&&P.current&&O(l(P.current))},[p]),a.createElement(a.Fragment,null,a.createElement("div",{className:C.iconWrapper,"aria-hidden":!0,"data-testid":u.wl.components.Menu.SubMenu.icon},a.createElement(o.J,{name:"angle-right",className:C.icon})),p&&a.createElement("div",{ref:P,className:(0,n.cx)(C.subMenu,{[C.pushLeft]:T}),"data-testid":u.wl.components.Menu.SubMenu.container,style:D},a.createElement("div",{tabIndex:-1,className:C.itemsWrapper,role:"menu",onKeyDown:b},E)))});d.displayName="SubMenu";const f=E=>({iconWrapper:(0,n.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,n.css)({opacity:.7,marginLeft:E.spacing(1),color:E.colors.text.secondary}),itemsWrapper:(0,n.css)({background:E.colors.background.primary,boxShadow:E.shadows.z3,display:"inline-block",borderRadius:E.shape.radius.default}),pushLeft:(0,n.css)({right:"100%",left:"unset"}),subMenu:(0,n.css)({position:"absolute",top:0,left:"100%",zIndex:E.zIndex.dropdown})}),m=a.memo(a.forwardRef((E,p)=>{const{url:h,icon:s,label:y,description:D,ariaLabel:C,ariaChecked:P,target:b,onClick:T,className:O,active:R,disabled:I,destructive:M,childItems:x,role:L="menuitem",tabIndex:S=-1,customSubMenuContainerStyles:U,shortcut:N,testId:w}=E,G=(0,i.wW)(v),[_,K]=(0,a.useState)(R),[k,z]=(0,a.useState)(!1),[W,Z]=(0,a.useState)(!1),H=(0,a.useCallback)(()=>{I||(z(!0),K(!0))},[I]),X=(0,a.useCallback)(()=>{I||(z(!1),K(!1))},[I]),Y=x&&x.length>0,ne=Y?"div":h===void 0?"button":"a",se=(0,n.cx)({[G.item]:!0,[G.active]:_,[G.disabled]:I,[G.destructive]:M&&!I},O),re={[ne==="button"?"disabled":"aria-disabled"]:I,...ne==="a"&&I&&{href:void 0,onClick:void 0},...I&&{tabIndex:-1,["data-disabled"]:I}},ge=(0,a.useRef)(null);(0,a.useImperativeHandle)(p,()=>ge.current);const q=fe=>{switch(fe.key){case"ArrowRight":fe.preventDefault(),fe.stopPropagation(),Y&&(z(!0),Z(!0),K(!0));break;default:break}},me=()=>{z(!1),K(!1),ge?.current?.focus()},oe=!!(N&&N.length>0);return a.createElement(ne,{target:b,className:se,rel:b==="_blank"?"noopener noreferrer":void 0,href:h,onClick:T,onMouseEnter:H,onMouseLeave:X,onKeyDown:q,role:h===void 0?L:void 0,"data-role":"menuitem",ref:ge,"data-testid":w,"aria-label":C,"aria-checked":P,tabIndex:S,...re},a.createElement(g.K,{direction:"row",justifyContent:"flex-start",alignItems:"center"},s&&a.createElement(o.J,{name:s,className:G.icon,"aria-hidden":!0}),a.createElement("span",{className:G.ellipsis},y),a.createElement("div",{className:(0,n.cx)(G.rightWrapper,{[G.withShortcut]:oe})},oe&&a.createElement("div",{className:G.shortcut},a.createElement(o.J,{name:"keyboard",title:"keyboard shortcut"}),N),Y&&a.createElement(d,{items:x,isOpen:k,openedWithArrow:W,setOpenedWithArrow:Z,close:me,customStyle:U}))),D&&a.createElement("div",{className:(0,n.cx)(G.description,G.ellipsis,{[G.descriptionWithIcon]:s!==void 0})},D))}));m.displayName="MenuItem";const v=E=>({item:(0,n.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:E.colors.text.primary,display:"flex",flexDirection:"column",alignItems:"stretch",padding:E.spacing(.5,2),minHeight:E.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus, &:focus-visible":{background:E.colors.action.hover,color:E.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,r.getFocusStyles)(E)}),active:(0,n.css)({background:E.colors.action.hover}),destructive:(0,n.css)({color:E.colors.error.text,svg:{color:E.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:E.colors.error.main,color:E.colors.error.contrastText,svg:{color:E.colors.error.contrastText}}}),disabled:(0,n.css)({color:E.colors.action.disabledText,label:"menu-item-disabled","&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:E.colors.action.disabledText}}),icon:(0,n.css)({opacity:.7,color:E.colors.text.secondary}),rightWrapper:(0,n.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),withShortcut:(0,n.css)({minWidth:E.spacing(10.5)}),shortcut:(0,n.css)({display:"flex",alignItems:"center",gap:E.spacing(1),marginLeft:E.spacing(2),color:E.colors.text.secondary,opacity:.7}),description:(0,n.css)({...E.typography.bodySmall,color:E.colors.text.secondary,textAlign:"start"}),descriptionWithIcon:(0,n.css)({marginLeft:E.spacing(3)}),ellipsis:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})})},96948:(Q,A,e)=>{"use strict";e.d(A,{d:()=>o});var n=e(31733),a=e(26124);const i=(g,u)=>(g%u+u)%u,r=-1,o=({localRef:g,isMenuOpen:u,openedWithArrow:c,setOpenedWithArrow:l,close:d,onOpen:f,onClose:m,onKeyDown:v})=>{const[E,p]=(0,n.useState)(r);return(0,n.useEffect)(()=>{u&&c&&(p(0),l?.(!1))},[u,c,l]),(0,n.useEffect)(()=>{const s=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');s?.[E]?.focus(),s?.forEach((y,D)=>{y.tabIndex=D===E?0:-1})},[g,E]),(0,a.Z)(()=>{f?.(p)}),[s=>{const y=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),D=y?.length??0;switch(s.key){case"ArrowUp":s.preventDefault(),s.stopPropagation(),p(i(E-1,D));break;case"ArrowDown":s.preventDefault(),s.stopPropagation(),p(i(E+1,D));break;case"ArrowLeft":s.preventDefault(),s.stopPropagation(),p(r),d?.();break;case"Home":s.preventDefault(),s.stopPropagation(),p(0);break;case"End":s.preventDefault(),s.stopPropagation(),p(D-1);break;case"Enter":s.preventDefault(),s.stopPropagation(),y?.[E]?.click();break;case"Escape":m?.();break;case"Tab":s.preventDefault(),m?.();break;default:break}v?.(s)}]}},5572:(Q,A,e)=>{"use strict";e.d(A,{u:()=>m});var n=e(76932),a=e(16749),i=e(57353),r=e(68420),o=e(31733),g=e(76067),u=e(82926),c=e(41354),l=e(79106),d=e(89427),f=e(82336);function m(p){const{title:h,children:s,isOpen:y=!1,closeOnEscape:D=!0,closeOnBackdropClick:C=!0,className:P,contentClassName:b,onDismiss:T,onClickBackdrop:O,trapFocus:R=!0}=p,I=(0,g.wW)(f.J),M=(0,o.useRef)(null),{overlayProps:x,underlayProps:L}=(0,r.Ir)({isKeyboardDismissDisabled:!D,isOpen:y,onClose:T},M),{dialogProps:S,titleProps:U}=(0,a.R)({},M);if(!y)return null;const N=(0,n.cx)(I.modalHeader,typeof h!="string"&&I.modalHeaderWithTabs);return o.createElement(r.Xj,null,o.createElement("div",{role:"presentation",className:I.modalBackdrop,onClick:O||(C?T:void 0),...L}),o.createElement(i.MT,{contain:R,autoFocus:!0,restoreFocus:!0},o.createElement("div",{className:(0,n.cx)(I.modal,P),ref:M,...x,...S},o.createElement("div",{className:N},typeof h=="string"&&o.createElement(E,{...p,title:h,id:U.id}),typeof h!="string"&&h,o.createElement("div",{className:I.modalHeaderClose},o.createElement(c.h,{name:"times",size:"xl",onClick:T,"aria-label":(0,u.t)("grafana-ui.modal.close-tooltip","Close")}))),o.createElement("div",{className:(0,n.cx)(I.modalContent,b)},s))))}function v({leftItems:p,children:h}){const s=(0,g.wW)(f.J);return p?o.createElement("div",{className:s.modalButtonRow},o.createElement(l.Lh,{justify:"space-between"},o.createElement(l.Lh,{justify:"flex-start",spacing:"md"},p),o.createElement(l.Lh,{justify:"flex-end",spacing:"md"},h))):o.createElement("div",{className:s.modalButtonRow},o.createElement(l.Lh,{justify:"flex-end",spacing:"md",wrap:!0},h))}m.ButtonRow=v;function E({icon:p,iconTooltip:h,title:s,id:y}){return o.createElement(d.x,{icon:p,iconTooltip:h,title:s,id:y})}},89427:(Q,A,e)=>{"use strict";e.d(A,{x:()=>r});var n=e(31733),a=e(76067),i=e(82336);const r=({icon:o,iconTooltip:g,title:u,children:c,id:l})=>{const d=(0,a.wW)(i.J);return n.createElement(n.Fragment,null,n.createElement("h2",{className:d.modalHeaderTitle,id:l},u),c)}},64075:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>a});var n=e(31733);const a=({children:i})=>n.createElement("div",{className:"share-modal-body"},n.createElement("div",{className:"share-modal-header"},n.createElement("div",{className:"share-modal-content"},i)))},13883:(Q,A,e)=>{"use strict";e.d(A,{H:()=>o});var n=e(31733),a=e(4981),i=e(88062),r=e(89427);const o=({icon:g,title:u,tabs:c,activeTab:l,onChangeTab:d})=>n.createElement(r.x,{icon:g,title:u},n.createElement(i.J,{hideBorder:!0},c.map((f,m)=>n.createElement(a.O,{key:`${f.value}-${m}`,label:f.label,icon:f.icon,suffix:f.tabSuffix,active:f.value===l,onChangeTab:()=>d(f)}))))},58947:(Q,A,e)=>{"use strict";e.d(A,{$i:()=>i,JY:()=>o,Y0:()=>r,kr:()=>a});var n=e(31733);const a=n.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class i extends n.Component{constructor(u){super(u),this.showModal=(c,l)=>{this.setState({component:c,props:l})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:u.component||null,props:u.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return n.createElement(a.Provider,{value:this.state},this.props.children)}}const r=()=>n.createElement(a.Consumer,null,({component:g,props:u})=>g?n.createElement(g,{...u}):null),o=a.Consumer},82336:(Q,A,e)=>{"use strict";e.d(A,{J:()=>a});var n=e(76932);const a=i=>{const r=i.shape.radius.default;return{modal:(0,n.css)({position:"fixed",zIndex:i.zIndex.modal,background:i.colors.background.primary,boxShadow:i.shadows.z3,borderRadius:r,border:`1px solid ${i.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,n.css)({position:"fixed",zIndex:i.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:i.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,n.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:i.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,n.css)({borderBottom:`1px solid ${i.colors.border.weak}`}),modalHeaderTitle:(0,n.css)({fontSize:i.typography.size.lg,margin:i.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,n.css)({marginRight:i.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,n.css)({height:"100%",display:"flex",alignItems:"center",color:i.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,n.css)({overflow:"auto",padding:i.spacing(3),width:"100%"}),modalButtonRow:(0,n.css)({paddingTop:i.spacing(3)})}}},73642:(Q,A,e)=>{"use strict";e.d(A,{p:()=>v});var n=e(76932),a=e(31733),i=e(22814),r=e(21568),o=e(76067),g=e(43017),u=e(6697);function c(p){for(let h=p.length-1;h>0;h--){const s=p.charAt(h);if(s==="$")return{index:h,prefix:p.substring(h)};if(s===" "||s==="	"||s==='"'||s==="'")return{index:h+1,prefix:p.substring(h+1)}}return{index:0,prefix:p}}function l(p,h,s,y){const D=[];for(const C of s)h&&!C.label.startsWith(h)||D.push({...C,kind:d(p,C.kind),range:y,insertText:C.insertText??C.label});return D}function d(p,h){switch(h){case u.k.Method:return p.languages.CompletionItemKind.Method;case u.k.Field:return p.languages.CompletionItemKind.Field;case u.k.Property:return p.languages.CompletionItemKind.Property;case u.k.Constant:return p.languages.CompletionItemKind.Constant;case u.k.Text:return p.languages.CompletionItemKind.Text}return p.languages.CompletionItemKind.Text}function f(p,h,s,y){if(!(!h||!s))return p.languages.registerCompletionItemProvider(h,{triggerCharacters:["$"],provideCompletionItems:(D,C,P)=>{if(D.id!==y)return;const b={startLineNumber:C.lineNumber,endLineNumber:C.lineNumber,startColumn:C.column,endColumn:C.column};if(P.triggerCharacter==="$")return b.startColumn=C.column-1,{suggestions:l(p,"$",s(),b)};const T=D.getValueInRange({startLineNumber:C.lineNumber,startColumn:1,endLineNumber:C.lineNumber,endColumn:C.column}),{index:O,prefix:R}=c(T);b.startColumn=O+1;const I=l(p,R,s(),b);if(I.length)return{suggestions:I}}})}class m extends a.PureComponent{constructor(h){super(h),this.loadCustomLanguage=()=>{const{language:s}=this.props,y=i.F.getIfExists(s);return y?y.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:s}=this.props;s&&s(this.getEditorValue())},this.onFocus=()=>{const{onFocus:s}=this.props;s&&s(this.getEditorValue())},this.onSave=()=>{const{onSave:s}=this.props;s&&s(this.getEditorValue())},this.handleBeforeMount=s=>{this.monaco=s;const{onBeforeEditorMount:y}=this.props;y?.(s)},this.handleOnMount=(s,y)=>{const{getSuggestions:D,language:C,onChange:P,onEditorDidMount:b}=this.props;this.modelId=s.getModel()?.id,this.getEditorValue=()=>s.getValue(),D&&this.modelId&&(this.completionCancel=f(y,C,D,this.modelId)),s.onKeyDown(O=>{O.keyCode===y.KeyCode.KeyS&&(O.ctrlKey||O.metaKey)&&(O.preventDefault(),this.onSave())});const T=this.loadCustomLanguage();P&&s.getModel()?.onDidChangeContent(()=>P(s.getValue())),b&&T.then(()=>b(s,y))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose(),this.props.onEditorWillUnmount?.()}componentDidUpdate(h){const{getSuggestions:s,language:y}=this.props,D=h.language!==y;if(h.getSuggestions!==s||D){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}s&&this.modelId&&(this.completionCancel=f(this.monaco,y,s,this.modelId))}D&&this.loadCustomLanguage()}render(){const{theme:h,language:s,width:y,height:D,showMiniMap:C,showLineNumbers:P,readOnly:b,monacoOptions:T}=this.props,{alwaysConsumeMouseWheel:O,...R}=T??{},I=this.props.value??"",M=I.length>100,x=this.props.containerStyles??E(h).container,L={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:M&&C,renderCharacters:!1},readOnly:b,lineNumbersMinChars:4,lineDecorationsWidth:1*h.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*h.spacing.gridSize,bottom:.5*h.spacing.gridSize},fixedOverflowWidgets:!0,scrollbar:{alwaysConsumeMouseWheel:O??!1}};return P||(L.glyphMargin=!1,L.folding=!1,L.lineNumbers="off",L.lineNumbersMinChars=0),a.createElement("div",{className:x,onFocus:this.onFocus,onBlur:this.onBlur,"data-testid":r.wl.components.CodeEditor.container},a.createElement(g.o,{width:y,height:D,language:s,value:I,options:{...L,...R??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const v=(0,o.HE)(m),E=p=>({container:(0,n.css)({borderRadius:p.shape.radius.default,border:`1px solid ${p.components.input.borderColor}`})})},43017:(Q,A,e)=>{"use strict";e.d(A,{o:()=>g});var n=e(31733),a=e(59326);const i=u=>{const c=(0,a.Z)(async()=>await u);return{...c,dependency:c.value}};var r=e(28069),o=e(61375);const g=u=>{const{loading:c,error:l,dependency:d}=i(e.e(2462).then(e.bind(e,48331)));if(c)return n.createElement(o.u,{text:""});if(l)return n.createElement(r.X,{title:"React Monaco Editor failed to load",error:l,errorInfo:{componentStack:l?.stack||""}});const f=d.ReactMonacoEditor;return n.createElement(f,{...u})}},6697:(Q,A,e)=>{"use strict";e.d(A,{k:()=>n});var n=(a=>(a.Method="method",a.Field="field",a.Property="property",a.Constant="constant",a.Text="text",a))(n||{})},35921:(Q,A,e)=>{"use strict";e.d(A,{T:()=>a});var n=e(6697);function a(i){const r="${"+i.value+"}",o=i.value===i.label?i.origin:`${i.label} / ${i.origin}`;return{label:r,kind:n.k.Property,detail:o,documentation:i.documentation}}},92795:(Q,A,e)=>{"use strict";e.d(A,{X:()=>d});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(83998),g=e(49311),u=e(41354),c=e(34037),l=e(71460);const d=a.memo(({title:m,section:v,parent:E,pageIcon:p,onGoBack:h,children:s,titleHref:y,parentHref:D,leftItems:C,isFullscreen:P,className:b,"aria-label":T,buttonOverflowAlignment:O="right",forceShowLeftItems:R=!1})=>{const I=(0,r.wW)(f),M=(0,n.cx)("page-toolbar",I.toolbar,{["page-toolbar--fullscreen"]:P,[I.noPageIcon]:!p},b),x=a.createElement(a.Fragment,null,a.createElement("span",{className:I.truncateText},m),v&&a.createElement("span",{className:I.pre}," / ",v));return a.createElement("nav",{className:M,"aria-label":T},a.createElement("div",{className:I.leftWrapper},p&&!h&&a.createElement("div",{className:I.pageIcon},a.createElement(g.J,{name:p,size:"lg","aria-hidden":!0})),h&&a.createElement("div",{className:I.pageIcon},a.createElement(u.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","data-testid":i.wl.components.BackButton.backArrow,onClick:h})),a.createElement("nav",{"aria-label":"Search links",className:I.navElement},E&&D&&a.createElement(a.Fragment,null,a.createElement(c.r,{"aria-label":`Search dashboard in the ${E} folder`,className:(0,n.cx)(I.titleText,I.parentLink,I.titleLink,I.truncateText),href:D},E," ",a.createElement("span",{className:I.parentIcon})),y&&a.createElement("span",{className:(0,n.cx)(I.titleText,I.titleDivider),"aria-hidden":!0},"/")),(m||!!C?.length)&&a.createElement("div",{className:I.titleWrapper},m&&a.createElement("h1",{className:I.h1Styles},y?a.createElement(c.r,{"aria-label":"Search dashboard by name",className:(0,n.cx)(I.titleText,I.titleLink),href:y},x):a.createElement("div",{className:I.titleText},x)),C?.map((L,S)=>a.createElement("div",{className:(0,n.cx)(I.leftActionItem,{[I.forceShowLeftActionItems]:R}),key:S},L))))),a.createElement(l.R,{alignment:O},a.Children.toArray(s).filter(Boolean)))});d.displayName="PageToolbar";const f=m=>{const{spacing:v,typography:E}=m,p=(0,o.getFocusStyles)(m);return{pre:(0,n.css)({whiteSpace:"pre"}),toolbar:(0,n.css)({alignItems:"center",background:m.colors.background.canvas,display:"flex",gap:m.spacing(2),justifyContent:"space-between",padding:m.spacing(1.5,2),[m.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,n.css)({[m.breakpoints.down("md")]:{paddingLeft:m.spacing(2)}}),leftWrapper:(0,n.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,n.css)({display:"none",[m.breakpoints.up("sm")]:{display:"flex",paddingRight:m.spacing(1),alignItems:"center"}}),truncateText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,n.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,n.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,n.css)({margin:v(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,n.css)({marginLeft:m.spacing(.5)}),titleText:(0,n.css)({display:"flex",fontSize:E.size.lg,margin:0,borderRadius:m.shape.radius.default}),titleLink:(0,n.css)({"&:focus-visible":p}),titleDivider:(0,n.css)({padding:v(0,.5,0,.5),display:"none",[m.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,n.css)({display:"none",[m.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,n.css)({display:"none",alignItems:"center",paddingRight:v(.5),[m.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,n.css)({display:"flex"})}}},47808:(Q,A,e)=>{"use strict";e.d(A,{t:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(51343),o=e(49311);const g=({currentPage:c,numberOfPages:l,onNavigate:d,hideWhenSinglePage:f,showSmallVersion:m,className:v})=>{const E=(0,i.wW)(u),p=m?1:8,h=(0,a.useMemo)(()=>{const s=[...new Array(l).keys()],y=l>p,D=(C,P)=>a.createElement("li",{key:C,className:E.item},a.createElement(r.zx,{size:"sm",variant:P,onClick:()=>d(C)},C));return s.reduce((C,P)=>{const b=P+1,T=b===c?"primary":"secondary",O=p,R=l-p+1,I=R-O,M=b===1||b===l,x=I>-1&&c>=O&&c<=R,L=m?1:3,S=m?0:2;return y?M||c<O&&b<O||I>=0&&c>R&&b>R||I<0&&c>=O&&b>R||x&&b>=c-S&&b<=c+S?C.push(D(b,T)):(b===O&&c<O||b===R&&c>R||x&&(b===c-L||b===c+L))&&C.push(a.createElement("li",{key:b,className:E.item},a.createElement(o.J,{className:E.ellipsis,name:"ellipsis-v"}))):C.push(D(b,T)),C},[])},[c,l,d,p,m,E.ellipsis,E.item]);return f&&l<=1?null:a.createElement("div",{className:(0,n.cx)(E.container,v)},a.createElement("ol",null,a.createElement("li",{className:E.item},a.createElement(r.zx,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>d(c-1),disabled:c===1},a.createElement(o.J,{name:"angle-left"}))),h,a.createElement("li",{className:E.item},a.createElement(r.zx,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>d(c+1),disabled:c===l},a.createElement(o.J,{name:"angle-right"})))))},u=()=>({container:(0,n.css)({float:"right"}),item:(0,n.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,n.css)({transform:"rotate(90deg)"})})},23913:(Q,A,e)=>{"use strict";e.d(A,{T:()=>u});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(49311),g=e(58037);const u=({onCancel:l,loading:d})=>{const f=(0,r.wW)(c);return d?a.createElement(g.u,{content:"Cancel query"},a.createElement(o.J,{className:(0,n.cx)("spin-clockwise",{[f.clickable]:!!l}),name:"sync",size:"sm",onClick:l,"aria-label":i.wl.components.LoadingIndicator.icon})):null},c=()=>({clickable:(0,n.css)({cursor:"pointer"})})},22920:(Q,A,e)=>{"use strict";e.d(A,{f:()=>T});var n=e(76932),a=e(31733),i=e(83870),r=e(92666),o=e(20298),g=e(21568),u=e(76067),c=e(83998);function l({children:x,delay:L}){const[S,U]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{window.setTimeout(()=>{U(!0)},L)},[x,L]),a.createElement(a.Fragment,null,S?x:null)}var d=e(49311),f=e(13069),m=e(58037),v=e(67669),E=e(73351);function p({menu:x,title:L,placement:S="bottom",offset:U,dragClassCancel:N,menuButtonClass:w,onOpenMenu:G}){const _=L?g.wl.components.Panels.Panel.menu(L):"panel-menu-button",K=(0,a.useCallback)(k=>{k&&G&&G()},[G]);return a.createElement(v.L,{overlay:x,placement:S,offset:U,onVisibleChange:K},a.createElement(E.h,{"aria-label":`Menu for panel with ${L?`title ${L}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":_,className:(0,n.cx)(w,N)}))}function h({menu:x,title:L,dragClass:S,children:U,offset:N=-32,onOpenMenu:w}){const G=(0,u.wW)(s),_=(0,a.useRef)(null),K=g.wl.components.Panels.Panel.HoverWidget,k=(0,a.useCallback)(W=>{_.current?.setPointerCapture(W.pointerId)},[]),z=(0,a.useCallback)(W=>{_.current?.releasePointerCapture(W.pointerId)},[]);return U===void 0||a.Children.count(U)===0?null:a.createElement("div",{className:(0,n.cx)(G.container,"show-on-hover"),style:{top:N},"data-testid":K.container},S&&a.createElement("div",{className:(0,n.cx)(G.square,G.draggable,S),onPointerDown:k,onPointerUp:z,ref:_,"data-testid":K.dragIcon},a.createElement(d.J,{name:"expand-arrows",className:G.draggableIcon})),U,x&&a.createElement(p,{menu:x,title:L,placement:"bottom",menuButtonClass:G.menuButton,onOpenMenu:w}))}function s(x){return{container:(0,n.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:x.colors.background.secondary,color:x.colors.text.primary,border:`1px solid ${x.colors.border.weak}`,borderRadius:x.shape.radius.default,height:x.spacing(4),boxShadow:x.shadows.z1}),square:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",width:x.spacing(4),height:"100%"}),draggable:(0,n.css)({cursor:"move",[x.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,n.css)({background:"inherit",border:"none","&:hover":{background:x.colors.secondary.main}}),draggableIcon:(0,n.css)({transform:"rotate(45deg)",color:x.colors.text.secondary,"&:hover":{color:x.colors.text.primary}})}}var y=e(53594);function D({description:x,className:L}){const S=(0,u.wW)(C),U=()=>{const N=typeof x=="function"?x():x;return a.createElement("div",{className:"panel-info-content markdown-html"},a.createElement("div",{dangerouslySetInnerHTML:{__html:N}}))};return x!==""?a.createElement(m.u,{interactive:!0,content:U},a.createElement(y.a,{className:(0,n.cx)(L,S.description)},a.createElement(d.J,{name:"info-circle",size:"md"}))):null}const C=x=>({description:(0,n.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function P({message:x,onClick:L,ariaLabel:S="status"}){const U=(0,u.wW)(b);return a.createElement(E.h,{className:U.buttonStyles,onClick:L,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:x||"","aria-label":S,"data-testid":g.wl.components.Panels.Panel.status("error")})}const b=x=>{const{headerHeight:L,padding:S}=x.components.panel;return{buttonStyles:(0,n.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:x.spacing(S),width:x.spacing(L),height:x.spacing(L),borderRadius:x.shape.radius.default})}};function T({width:x,height:L,children:S,padding:U="md",title:N="",description:w="",displayMode:G="default",titleItems:_,menu:K,dragClass:k,dragClassCancel:z,hoverHeader:W=!1,hoverHeaderOffset:Z,loadingState:H,statusMessage:X,statusMessageOnClick:Y,leftItems:ne,actions:se,onCancelQuery:re,onOpenMenu:ge,collapsible:q=!1,collapsed:me,onToggleCollapse:oe}){const fe=(0,u.l4)(),ve=(0,u.wW)(M),pe=(0,a.useId)(),Me=!W,[Pe,Ee]=(0,i.Z)(!0);me===void 0&&(me=!Pe);const he="show-on-hover",Le=G==="transparent",ke=R(fe,Me),{contentStyle:ot,innerWidth:it,innerHeight:ce}=I(U,fe,ke,me,L,x),le={height:ke,cursor:k?"move":"auto"},Re={width:x,height:me?void 0:L},[Ae,{width:Oe}]=(0,r.Z)();ne&&(se=ne);const $e=N?g.wl.components.Panels.Panel.title(N):"Panel",Ye=a.createElement(a.Fragment,null,!q&&N&&a.createElement("h6",{title:N,className:ve.title},N),q&&a.createElement("h6",{className:ve.title},a.createElement("button",{type:"button",className:ve.clearButtonStyles,onClick:()=>{Ee(),oe&&oe(!me)},"aria-expanded":!me,"aria-controls":me?void 0:pe},a.createElement(d.J,{name:me?"angle-right":"angle-down","aria-hidden":!!N,"aria-label":N?void 0:"toggle collapse panel"}),N)),a.createElement("div",{className:(0,n.cx)(ve.titleItems,z),"data-testid":"title-items-container"},a.createElement(D,{description:w,className:z}),_),H===o.Gu.Streaming&&a.createElement(m.u,{content:re?"Stop streaming":"Streaming"},a.createElement(y.a,{className:z,"data-testid":"panel-streaming",onClick:re},a.createElement(d.J,{name:"circle-mono",size:"md",className:ve.streaming}))),H===o.Gu.Loading&&re&&a.createElement(l,{delay:2e3},a.createElement(m.u,{content:"Cancel query"},a.createElement(y.a,{className:(0,n.cx)(z,ve.pointer),"data-testid":"panel-cancel-query",onClick:re},a.createElement(d.J,{name:"sync-slash",size:"md"})))),a.createElement("div",{className:ve.rightAligned},se&&a.createElement("div",{className:ve.rightActions},O(se,Ne=>Ne))));return a.createElement("div",{className:(0,n.cx)(ve.container,{[ve.transparentContainer]:Le}),style:Re,"data-testid":$e,tabIndex:0,ref:Ae},a.createElement("div",{className:ve.loadingBarContainer},H===o.Gu.Loading?a.createElement(f.F,{width:Oe,ariaLabel:"Panel loading bar"}):null),W&&a.createElement(a.Fragment,null,a.createElement(h,{menu:K,title:N,offset:Z,dragClass:k,onOpenMenu:ge},Ye),X&&a.createElement("div",{className:ve.errorContainerFloating},a.createElement(P,{message:X,onClick:Y,ariaLabel:"Panel status"}))),Me&&a.createElement("div",{className:(0,n.cx)(ve.headerContainer,k),style:le,"data-testid":"header-container"},X&&a.createElement("div",{className:z},a.createElement(P,{message:X,onClick:Y,ariaLabel:"Panel status"})),Ye,K&&a.createElement(p,{menu:K,title:N,placement:"bottom-end",menuButtonClass:(0,n.cx)(ve.menuItem,z,he),onOpenMenu:ge})),!me&&a.createElement("div",{id:pe,className:(0,n.cx)(ve.content,L===void 0&&ve.containNone),style:ot},typeof S=="function"?S(it,ce):S))}const O=(x,L)=>{const S=a.Children.toArray(x).filter(Boolean);return S.length>0?L(S):null},R=(x,L)=>L?x.spacing.gridSize*x.components.panel.headerHeight:0,I=(x,L,S,U,N,w)=>{const G=(x==="md"?L.components.panel.padding:0)*L.spacing.gridSize,_=G*2,K=1*2;let k=0;w&&(k=w-_-K);let z=0;return N&&(z=N-S-_-K),U&&(z=S),{contentStyle:{padding:G},innerWidth:k,innerHeight:z}},M=x=>{const{background:L,borderColor:S,padding:U}=x.components.panel;return{container:(0,n.css)({label:"panel-container",backgroundColor:L,border:`1px solid ${S}`,position:"relative",borderRadius:x.shape.radius.default,height:"100%",display:"flex",flexDirection:"column","> *":{zIndex:0},"&:hover, &:active, &:focus":{zIndex:x.zIndex.activePanel},".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,c.getFocusStyles)(x),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,n.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${S}`}}),loadingBarContainer:(0,n.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%"}),containNone:(0,n.css)({contain:"none"}),content:(0,n.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,n.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,n.css)({cursor:"pointer"}),streaming:(0,n.css)({label:"panel-streaming",marginRight:0,color:x.colors.success.text,"&:hover":{color:x.colors.success.text}}),title:(0,n.css)({label:"panel-title",display:"flex",marginBottom:0,padding:x.spacing(0,U),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:x.typography.h6.fontSize,fontWeight:x.typography.h6.fontWeight}),items:(0,n.css)({display:"flex"}),item:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,n.css)({visibility:"hidden"}),menuItem:(0,n.css)({label:"panel-menu",border:"none",background:x.colors.secondary.main,"&:hover":{background:x.colors.secondary.shade}}),errorContainerFloating:(0,n.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:1}),rightActions:(0,n.css)({display:"flex",padding:x.spacing(0,U),gap:x.spacing(1)}),rightAligned:(0,n.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,n.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,n.css)({alignItems:"center",display:"flex",gap:x.spacing(.5),background:"transparent",color:x.colors.text.primary,border:"none",padding:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:x.typography.h6.fontSize,fontWeight:x.typography.h6.fontWeight})}}},43348:(Q,A,e)=>{"use strict";e.d(A,{R9:()=>o,_w:()=>r,bb:()=>i});var n=e(31733),a=e(83994);const i=n.createContext({eventsScope:"global",eventBus:new a.F}),r=i.Provider,o=()=>n.useContext(i)},53594:(Q,A,e)=>{"use strict";e.d(A,{a:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(83998),o=e(51343);const g=(0,a.forwardRef)(({className:c,children:l,href:d,onClick:f,target:m,title:v,...E},p)=>{const h=(0,i.wW)(u);return d?a.createElement("a",{ref:p,href:d,onClick:f,target:m,title:v,className:(0,n.cx)(h.linkItem,c),...E},l):f?a.createElement(o.zx,{ref:p,className:(0,n.cx)(h.item,c),variant:"secondary",fill:"text",onClick:f},l):a.createElement("span",{ref:p,className:(0,n.cx)(h.item,c),...E},l)});g.displayName="TitleItem";const u=c=>{const l=(0,n.css)({color:`${c.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${c.shape.radius.default}`,padding:`${c.spacing(0,1)}`,height:`${c.spacing(c.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,r.getFocusStyles)(c),zIndex:1},"&: focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(c),"&:hover ":{boxShadow:`${c.shadows.z1}`,background:`${c.colors.background.secondary}`,color:`${c.colors.text.primary}`}});return{item:l,linkItem:(0,n.cx)(l,(0,n.css)({cursor:"pointer"}))}}},48011:(Q,A,e)=>{"use strict";e.d(A,{fm:()=>r});var n=e(23913),a=e(22920),i=e(53594);const r=a.f;r.LoadingIndicator=n.T,r.TitleItem=i.a},74779:(Q,A,e)=>{"use strict";e.d(A,{R:()=>n});var n=(a=>(a.ToggleSelection="select",a.AppendToSelection="append",a))(n||{})},94319:(Q,A,e)=>{"use strict";e.d(A,{l:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g,className:u,...c})=>{const l=(0,i.wW)(o);return a.createElement("div",{className:(0,n.cx)(l,u),...c},g)},o=g=>(0,n.css)({backgroundColor:g.components.panel.background,border:`1px solid ${g.components.panel.borderColor}`,borderRadius:g.shape.radius.default})},22525:(Q,A,e)=>{"use strict";e.d(A,{o:()=>r});var n=e(31733),a=e(59889),i=e(50248);const r=({status:g,color:u,...c})=>{const l=o(g);return n.createElement(i.C,{text:l.text,color:l.color,icon:l.icon,tooltip:l.tooltip,...c})};r.displayName="PluginSignatureBadge";function o(g){switch(g||(g=a.Xy.invalid),g){case a.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case a.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case a.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case a.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case a.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},25108:(Q,A,e)=>{"use strict";e.d(A,{RN:()=>o,h_:()=>r,lO:()=>g});var n=e(31733),a=e(45607),i=e(76067);function r(c){const{children:l,className:d,root:f,forwardedRef:m}=c,v=(0,i.l4)(),E=(0,n.useRef)(null),p=f??o();return E.current||(E.current=document.createElement("div"),d&&(E.current.className=d),E.current.style.position="relative",E.current.style.zIndex=`${v.zIndex.portal}`),(0,n.useLayoutEffect)(()=>(E.current&&p.appendChild(E.current),()=>{E.current&&p.removeChild(E.current)}),[p]),a.createPortal(n.createElement("div",{ref:m},l),E.current)}function o(){return window.document.getElementById("grafana-portal-container")??document.body}function g(){return n.createElement("div",{id:"grafana-portal-container"})}const u=n.forwardRef((c,l)=>n.createElement(r,{...c,forwardedRef:l}));u.displayName="RefForwardingPortal"},59328:(Q,A,e)=>{"use strict";e.d(A,{q:()=>P});var n=e(76932),a=e(52083),i=e.n(a),r=e(69781),o=e.n(r),g=e(31733),u=e(76485),c=e(38177),l=e(21568),d=e(52459),f=e(22993),m=e(38966),v=e(66464),E=e(54188),p=e(97979),h=e(98703),s=e(76067),y=e(83998),D=e(79488);class C extends g.PureComponent{constructor(O){super(O),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(L,S)=>{const U=L.document!==this.state.value.document,N=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(L),this.setState({value:L},()=>{if(U){const w=u.Z.serialize(N)!==u.Z.serialize(L);w&&S&&this.runOnChangeAndRunQuery(),w&&!S&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:L}=this.props,S=u.Z.serialize(this.state.value);L&&L(this.cleanText(S))},this.runOnRunQuery=()=>{const{onRunQuery:L}=this.props;L&&(L(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(L,S,U)=>{const{onBlur:N}=this.props;if(N)N();else{const w=this.lastExecutedValue?u.Z.serialize(this.lastExecutedValue):"",G=u.Z.serialize(S.value);w!==G&&this.runOnChangeAndRunQuery()}return U()},this.runOnChangeDebounced=(0,r.debounce)(this.runOnChange,500);const{onTypeahead:R,cleanText:I,portalOrigin:M,onWillApplySuggestion:x}=O;this.plugins=[(0,d.b)({onTypeahead:R,cleanText:I,portalOrigin:M,onWillApplySuggestion:x}),(0,f.d)({handler:this.runOnChangeAndRunQuery}),(0,m.z)(),(0,v.G)(),(0,E.$)(),(0,p.R)(),(0,h.w)(),...O.additionalPlugins||[]].filter(L=>L),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,D.l1)(O.query||"",O.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(O,R){const{query:I,syntax:M,syntaxLoaded:x}=this.props;if(!O.syntaxLoaded&&x&&this.editor){const S=this.editor.insertText(" ").deleteBackward(1);this.onChange(S.value,!0)}const{value:L}=this.state;I!==O.query&&I!==u.Z.serialize(L)&&this.setState({value:(0,D.l1)(I||"",M)})}cleanText(O){return O.replace(/[\r]/g,"")}render(){const{disabled:O,theme:R}=this.props,I=i()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":O}),M=b(R);return g.createElement("div",{className:(0,n.cx)(I,M.wrapper)},g.createElement("div",{className:"slate-query-field","data-testid":l.wl.components.QueryField.container},g.createElement(c.ML,{ref:x=>this.editor=x,schema:D.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:x=>{this.onChange(x.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const P=(0,s.HE)(C);P.defaultProps={onBlur:()=>{}};const b=T=>{const O=(0,y.getFocusStyles)(T);return{wrapper:(0,n.css)({"&:focus-within":O})}}},20685:(Q,A,e)=>{"use strict";e.d(A,{dP:()=>f,o5:()=>l});var n=e(21059),a=e(31733),i=e(16528),r=e(21568),o=e(82926),g=e(5460),u=e(61513),c=e(73351);const l=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],d=class extends a.PureComponent{constructor(E){super(E),this.onChangeSelect=p=>{const{onIntervalChanged:h}=this.props;h&&p.value!=null&&h(p.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:E,intervals:p,tooltip:h,value:s,text:y,isLoading:D,noIntervalPicker:C,width:P,showAutoInterval:b}=this.props,T=s||"",O=this.getVariant(),R=v({intervals:p,showAutoInterval:b}),I=R.find(({value:K})=>K===T),M=m(d.offOption.value);let x=I||M;x.label===M.label&&(x={value:""});const L=x.ariaLabel,S=(0,o.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:L}),U=(0,o.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),N=x.value===""?U:S,w=(0,o.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),G=(0,o.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),_=x.value===""?G:w;return a.createElement(g.h,{className:"refresh-picker"},a.createElement(c.h,{"aria-label":y,tooltip:h,onClick:E,variant:O,icon:D?"spinner":"sync",style:P?{width:P}:void 0,"data-testid":r.wl.components.RefreshPicker.runButtonV2},y),!C&&a.createElement(u.d,{value:x,options:R,onChange:this.onChangeSelect,variant:O,"data-testid":r.wl.components.RefreshPicker.intervalButtonV2,"aria-label":N,tooltip:_}))}};let f=d;f.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},f.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},f.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"},f.isLive=E=>E===d.liveOption.value;function m(E){switch(E){case f.liveOption.value:return{label:(0,o.t)("refresh-picker.live-option.label","Live"),value:E,ariaLabel:(0,o.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case f.offOption.value:return{label:(0,o.t)("refresh-picker.off-option.label","Off"),value:E,ariaLabel:(0,o.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case f.autoOption.value:return{label:(0,o.t)("refresh-picker.auto-option.label",f.autoOption.label),value:E,ariaLabel:(0,o.t)("refresh-picker.auto-option.aria-label",f.autoOption.ariaLabel)}}return{label:E,value:E}}function v({intervals:E=l,showAutoInterval:p=!1}={}){const h=E.map(s=>{const y=(0,i.RA)(s),D=(0,n.Z)(y);return{label:s,value:s,ariaLabel:D}});return p&&h.unshift(m(f.autoOption.value)),h.unshift(m(f.offOption.value)),h}},97124:(Q,A,e)=>{"use strict";e.d(A,{D:()=>i});var n=e(31733),a=e(98827);function i({component:r,content:o,...g}){return n.createElement(r||"span",{dangerouslySetInnerHTML:{__html:a.QX.sanitize(o)},...g})}},53713:(Q,A,e)=>{"use strict";e.d(A,{c:()=>c});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(51343),g=e(14978);const u=()=>({noRadiusInput:(0,n.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,n.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),c=({label:l="Password",labelWidth:d,inputWidth:f=12,onReset:m,isConfigured:v,tooltip:E,placeholder:p="Password",interactive:h,...s})=>{const y=u();return r.createElement(g.W,{label:l,tooltip:E,interactive:h,labelWidth:d,inputEl:v?r.createElement(r.Fragment,null,r.createElement("input",{type:"text",className:(0,n.cx)(`gf-form-input width-${f}`,y.noRadiusInput),disabled:!0,value:"configured",...(0,a.omit)(s,"value")}),r.createElement(o.zx,{onClick:m,variant:"secondary",type:"button"},"Reset")):r.createElement("input",{type:"password",className:`gf-form-input width-${f}`,placeholder:p,...s})})};c.displayName="SecretFormField"},33904:(Q,A,e)=>{"use strict";e.d(A,{m4:()=>u});var n=e(31733),a=e(51343),i=e(64516),r=e(37739);const o="configured",g="Reset",u=({isConfigured:c,onReset:l,...d})=>n.createElement(r.K,null,!c&&n.createElement(i.I,{...d,type:"password"}),c&&n.createElement(n.Fragment,null,n.createElement(i.I,{...d,type:"text",disabled:!0,value:o}),n.createElement(a.zx,{onClick:l,variant:"secondary"},g)))},89080:(Q,A,e)=>{"use strict";e.d(A,{m:()=>n.m4});var n=e(33904)},24444:(Q,A,e)=>{"use strict";e.d(A,{Zk:()=>d});var n=e(76932),a=e(31733),i=e(76067),r=e(51343),o=e(79106),g=e(28718);const u="configured",c="Reset",l=f=>({configuredStyle:(0,n.css)({minHeight:f.spacing(f.components.height.md),paddingTop:f.spacing(.5),resize:"none"})}),d=({isConfigured:f,onReset:m,...v})=>{const E=(0,i.wW)(l);return a.createElement(o.Lh,null,!f&&a.createElement(g.K,{...v}),f&&a.createElement(g.K,{...v,rows:1,disabled:!0,value:u,className:(0,n.cx)(E.configuredStyle)}),f&&a.createElement(r.zx,{onClick:m,variant:"secondary"},c))}},21043:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>n.Zk});var n=e(24444)},77932:(Q,A,e)=>{"use strict";e.d(A,{X:()=>d});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(76067),g=e(20888),u=e(56072),c=e(40739),l=e(21860);function d({options:f,value:m,onChange:v,Component:E,className:p,allowCustomValue:h,allowEmptyValue:s,placeholder:y,disabled:D,inputMinWidth:C,inputPlaceholder:P,onExpandedChange:b,autofocus:T=!1,...O}){const[R,I,M,x]=(0,l._)(T,b),L=C?Math.max(C,I):I,S=(0,o.wW)(c.N);if(!M){const U=(0,a.isObject)(m)?m.label:m,N=U!=null?String(U):void 0;return r.createElement(R,{disabled:D,Component:E||r.createElement(g.W,{className:(0,n.cx)(S.segment,{[S.queryPlaceholder]:y!==void 0&&!m,[S.disabled]:D},p)},N||y)})}return r.createElement(u.V,{...O,value:m&&!(0,a.isObject)(m)?{value:m}:m,placeholder:P,options:f,width:L,onClickOutside:()=>x(!1),allowCustomValue:h,allowEmptyValue:s,onChange:U=>{x(!1),v(U)}})}},68777:(Q,A,e)=>{"use strict";e.d(A,{V:()=>m});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(41710),g=e(76067),u=e(82926),c=e(20888),l=e(56072),d=e(40739),f=e(21860);function m({value:E,onChange:p,loadOptions:h,reloadOptionsOnChange:s=!1,Component:y,className:D,allowCustomValue:C,allowEmptyValue:P,disabled:b,placeholder:T,inputMinWidth:O,inputPlaceholder:R,autofocus:I=!1,onExpandedChange:M,noOptionMessageHandler:x=v,...L}){const[S,U]=(0,o.Z)(h,[h]),[N,w,G,_]=(0,f._)(I,M),K=O?Math.max(O,w):w,k=(0,g.wW)(d.N);if(!G){const z=(0,a.isObject)(E)?E.label:E,W=z!=null?String(z):void 0;return r.createElement(N,{onClick:s?void 0:U,disabled:b,Component:y||r.createElement(c.W,{className:(0,n.cx)(k.segment,{[k.queryPlaceholder]:T!==void 0&&!E,[k.disabled]:b},D)},W||T)})}return r.createElement(l.V,{...L,value:E&&!(0,a.isObject)(E)?{value:E}:E,placeholder:R,options:S.value??[],loadOptions:s?U:void 0,width:K,noOptionsMessage:x(S),allowCustomValue:C,allowEmptyValue:P,onClickOutside:()=>{_(!1)},onChange:z=>{_(!1),p(z)}})}function v(E){return E.loading?(0,u.t)("grafana-ui.segment-async.loading","Loading options..."):E.error?(0,u.t)("grafana-ui.segment-async.error","Failed to load options"):(0,u.t)("grafana-ui.segment-async.no-options","No options found")}},70897:(Q,A,e)=>{"use strict";e.d(A,{X:()=>d});var n=e(76932),a=e(31733),i=e(89782),r=e(76067),o=e(90854),g=e(20888),u=e(40739),c=e(21860);const l=14;function d({value:f,onChange:m,Component:v,className:E,placeholder:p,inputPlaceholder:h,disabled:s,autofocus:y=!1,onExpandedChange:D,...C}){const P=(0,a.useRef)(null),[b,T]=(0,a.useState)(f),[O,R]=(0,a.useState)((0,o.X1)((f||"").toString(),l).width),[I,,M,x]=(0,c._)(y,D),L=(0,r.wW)(u.N);if((0,i.Z)(P,()=>{x(!1),m(b)}),!M)return a.createElement(I,{disabled:s,Component:v||a.createElement(g.W,{className:(0,n.cx)(L.segment,{[L.queryPlaceholder]:p!==void 0&&!b,[L.disabled]:s},E)},f||p)});const S=(0,n.css)({width:`${Math.max(O+20,32)}px`});return a.createElement("input",{...C,ref:P,autoFocus:!0,className:(0,n.cx)("gf-form gf-form-input",S),value:b,placeholder:h,onChange:U=>{const{width:N}=(0,o.X1)(U.target.value,l);R(N),T(U.target.value)},onBlur:()=>{x(!1),m(b)},onKeyDown:U=>{[13,27].includes(U.keyCode)&&(x(!1),m(b))}})}},31719:(Q,A,e)=>{"use strict";e.d(A,{f:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(47701),o=e(20888);const g=({label:c,htmlFor:l,children:d,fill:f})=>{const m=(0,i.wW)(u);return a.createElement(a.Fragment,null,a.createElement(r.Z,null,a.createElement(o.W,{htmlFor:l,width:12,className:m.label},c),d,f&&a.createElement("div",{className:m.fill},a.createElement(o.W,null,""))))},u=c=>({label:(0,n.css)({color:c.colors.primary.text}),fill:(0,n.css)({flexGrow:1,marginBottom:c.spacing(.5)})})},56072:(Q,A,e)=>{"use strict";e.d(A,{V:()=>r});var n=e(31733),a=e(76067),i=e(38834);function r({value:o,placeholder:g="",options:u=[],onChange:c,onClickOutside:l,loadOptions:d=void 0,width:f,noOptionsMessage:m="",allowCustomValue:v=!1,allowEmptyValue:E=!1,...p}){const h=(0,n.useRef)(null),s=(0,a.l4)();let y=f>0?f/s.spacing.gridSize:void 0,D,C={};return d?(D=i.qb,C={loadOptions:d,defaultOptions:!0}):D=i.Ph,n.createElement("div",{...p,ref:h},n.createElement(D,{width:y,noOptionsMessage:m,placeholder:g,autoFocus:!0,isOpen:!0,onChange:c,options:u,value:o,closeMenuOnSelect:!1,onCloseMenu:()=>{if(h&&h.current){const P=h.current.querySelector('input[id^="react-select-"]');P&&(P.value||E)?c({value:P.value,label:P.value}):l()}},allowCustomValue:v,...C}))}},40739:(Q,A,e)=>{"use strict";e.d(A,{N:()=>a});var n=e(76932);const a=i=>{const r="v1"in i?i.v1.palette:i.palette;return{segment:(0,n.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,n.css)({color:r.gray2}),disabled:(0,n.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},21860:(Q,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(31733),a=e(76067),i=e(51343);const r=(o,g)=>{const u=(0,n.useRef)(null),c=(0,a.wW)(i.gN),[l,d]=(0,n.useState)(o),[f,m]=(0,n.useState)(0),v=p=>{d(p),g&&g(p)};return[({Component:p,onClick:h,disabled:s})=>n.createElement("button",{type:"button",className:c,ref:u,disabled:s,onClick:()=>{v(!0),u&&u.current&&m(u.current.clientWidth*1.25),h?.()}},p),f,l,v]}},38834:(Q,A,e)=>{"use strict";e.d(A,{M8:()=>X,qb:()=>W,gY:()=>H,NU:()=>z,Ph:()=>k,eI:()=>b.e,LT:()=>Z});var n=e(31733),a=e(70576),i=e(61726),r=e(84996),o=e(92460),g=e(4318),u=e(84275),c=e(76067),l=e(49311),d=e(89719);function f({selectProps:Y}){const ne=Y.menuIsOpen,se=ne?"search":"angle-down",re=ne?"sm":"md";return n.createElement(l.J,{name:se,size:re})}var m=e(76932),v=e(64516);const E=n.forwardRef((Y,ne)=>{const{children:se}=Y,re=(0,c.l4)(),ge=(0,v.H)({theme:re,invalid:!1});return n.createElement("div",{className:(0,m.cx)(ge.suffix,(0,m.css)({position:"relative"})),ref:ne},se)});E.displayName="IndicatorsContainer";var p=e(90119);const h=n.forwardRef(function({focused:ne,invalid:se,disabled:re,children:ge,innerProps:q,prefix:me,...oe},fe){const ve=(0,c.wW)(s,se,!!me);return n.createElement("div",{className:ve.input,...q,ref:fe},me&&n.createElement("div",{className:(0,m.cx)(ve.prefix)},me),ge)}),s=(Y,ne,se)=>{const re=(0,v.H)({theme:Y,invalid:ne});return{input:(0,m.cx)((0,p.nf)(Y),(0,m.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),se&&(0,m.css)({paddingLeft:0})),prefix:(0,m.cx)(re.prefix,(0,m.css)({position:"relative"}))}};var y=e(41354),D=e(33789);const C=({innerProps:Y,children:ne})=>{const se=(0,c.l4)(),re=(0,D.D)(se);return n.createElement("div",{...Y,className:re.multiValueContainer},ne)},P=({children:Y,innerProps:ne})=>{const se=(0,c.l4)(),re=(0,D.D)(se);return n.createElement(y.h,{...ne,name:"times",size:"sm",className:re.multiValueRemove,tooltip:"Remove"})};var b=e(40650),T=e(23491),O=e(4900),R=e(84247);class I extends n.Component{render(){const{children:ne}=this.props,{selectProps:se}=this.props;if(se&&Array.isArray(ne)&&Array.isArray(ne[0])&&se.maxVisibleValues!==void 0&&!(se.showAllSelectedWhenOpen&&se.menuIsOpen)){const[re,...ge]=ne,q=re.slice(0,se.maxVisibleValues);return this.renderContainer([q,...ge])}return this.renderContainer(ne)}renderContainer(ne){const{isMulti:se,theme:re,selectProps:ge}=this.props,q=this.props.selectProps?.noMultiValueWrap&&!this.props.selectProps?.menuIsOpen,me=(0,D.D)(re),oe=ge["data-testid"],fe=(0,m.cx)(me.valueContainer,se&&me.valueContainerMulti,q&&me.valueContainerMultiNoWrap);return n.createElement("div",{"data-testid":oe,className:fe},ne)}}const M=(0,c.HE)(I);var x=e(59496);const L=(Y,ne)=>{if(Array.isArray(Y)){const se=Y.filter(Boolean);return se?.length?se:void 0}if(typeof Y=="object")return[Y];if(typeof Y=="string"||typeof Y=="number"){const se=S(Y,ne);if(se)return[se]}},S=(Y,ne)=>{for(const se of ne)if("options"in se){let re=S(Y,se.options);if(re)return re}else if("value"in se&&se.value===Y)return se;return null},U=Y=>Y.map(({description:ne,...se})=>se),N=Y=>{const{children:ne,innerProps:se,selectProps:{menuIsOpen:re,onMenuClose:ge,onMenuOpen:q},isFocused:me,isMulti:oe,getValue:fe,innerRef:ve}=Y,pe=Y.selectProps;return pe.renderControl?n.createElement(pe.renderControl,{isOpen:re,value:oe?fe():fe()[0],ref:ve,onClick:re?ge:q,onBlur:ge,disabled:!!pe.disabled,invalid:!!pe.invalid}):n.createElement(h,{ref:ve,innerProps:se,prefix:pe.prefix,focused:me,invalid:!!pe.invalid,disabled:!!pe.disabled},ne)};function w({allowCustomValue:Y=!1,allowCreateWhileLoading:ne=!1,"aria-label":se,"data-testid":re,autoFocus:ge=!1,backspaceRemovesValue:q=!0,blurInputOnSelect:me,cacheOptions:oe,className:fe,closeMenuOnSelect:ve=!0,components:pe,createOptionPosition:Me="last",defaultOptions:Pe,defaultValue:Ee,disabled:he=!1,filterOption:Le,formatCreateLabel:ke,getOptionLabel:ot,getOptionValue:it,inputValue:ce,invalid:le,isClearable:Re=!1,id:Ae,isLoading:Oe=!1,isMulti:$e=!1,inputId:Ye,isOpen:Ne,isOptionDisabled:je,isSearchable:ut=!0,loadOptions:Fe,loadingMessage:Te="Loading options...",maxMenuHeight:Ve=300,minMenuHeight:tt,maxVisibleValues:ae,menuPlacement:J="auto",menuPosition:te,menuShouldPortal:de=!0,noOptionsMessage:be=(0,a.t)("grafana-ui.select.no-options-label","No options found"),onBlur:De,onChange:Ue,onCloseMenu:We,onCreateOption:et,onInputChange:ze,onKeyDown:_e,onMenuScrollToBottom:qe,onMenuScrollToTop:at,onOpenMenu:lt,onFocus:ft,openMenuOnFocus:yt=!1,options:wt=[],placeholder:zt=(0,a.t)("grafana-ui.select.placeholder","Choose"),prefix:$t,renderControl:Ie,showAllSelectedWhenOpen:st=!0,tabSelectsValue:Mt=!0,value:ct,virtualized:nt=!1,noMultiValueWrap:Ct,width:kt,isValidNewOption:Jt,formatOptionLabel:tn,hideSelectedOptions:Kt,...cn}){const dn=(0,c.l4)(),Sn=(0,D.D)(dn),Zn=(0,n.useRef)(null),[_n,Ut]=(0,n.useState)(!1),Xt=(0,x.O)(dn,kt),[en,gn]=(0,n.useState)(!!ce);(0,n.useEffect)(()=>{if(Fe&&Ne&&Zn.current&&Zn.current.controlRef&&J==="auto"){const $n=window.innerHeight-Zn.current.controlRef.getBoundingClientRect().bottom;Ut($n<Ve)}},[Ve,J,Fe,Ne]);const ln=(0,n.useCallback)(($n,Wn)=>{if($e&&$n==null)return Ue([],Wn);Ue($n,Wn)},[$e,Ue]);let xn=i.ZP;const Dn={};let Ln={},hn;if($e&&Fe)hn=ct;else if($e&&ct&&Array.isArray(ct)&&!Fe)hn=ct.map($n=>{const Wn=S($n.value??$n,wt);return!Y||Wn?Wn:typeof $n=="string"?(0,u.E)($n):$n});else if(Fe){const $n=Ee||ct;hn=$n?[$n]:[]}else hn=L(ct,wt);const Gn={"aria-label":se,"data-testid":re,autoFocus:ge,backspaceRemovesValue:q,blurInputOnSelect:me,captureMenuScroll:qe||at,closeMenuOnSelect:ve,defaultValue:Ee,disabled:he,filterOption:en?Le:null,getOptionLabel:ot,getOptionValue:it,hideSelectedOptions:Kt,inputValue:ce,invalid:le,isClearable:Re,id:Ae,isDisabled:he,isLoading:Oe,isMulti:$e,inputId:Ye,isOptionDisabled:je,isSearchable:ut,maxMenuHeight:Ve,minMenuHeight:tt,maxVisibleValues:ae,menuIsOpen:Ne,menuPlacement:J==="auto"&&_n?"top":J,menuPosition:te,menuShouldBlockScroll:!0,menuPortalTarget:de&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:De,onChange:ln,onInputChange:($n,Wn)=>{gn(!!$n),ze?.($n,Wn)},onKeyDown:_e,onMenuClose:We,onMenuOpen:lt,onMenuScrollToBottom:qe,onMenuScrollToTop:at,onFocus:ft,formatOptionLabel:tn,openMenuOnFocus:yt,options:nt?U(wt):wt,placeholder:zt,prefix:$t,renderControl:Ie,showAllSelectedWhenOpen:st,tabSelectsValue:Mt,value:$e?hn:hn?.[0],noMultiValueWrap:Ct};Y&&(xn=g.Z,Dn.allowCreateWhileLoading=ne,Dn.formatCreateLabel=ke??G,Dn.onCreateOption=et,Dn.createOptionPosition=Me,Dn.isValidNewOption=Jt),Fe&&(xn=Y?o.Z:r.Z,Ln={loadOptions:Fe,cacheOptions:oe,defaultOptions:Pe});const Vn=nt?T.r4:T.SA;return n.createElement(n.Fragment,null,n.createElement(xn,{ref:Zn,components:{MenuList:Vn,Group:O.n,ValueContainer:M,IndicatorsContainer:_,IndicatorSeparator:K,Control:N,Option:T.Qn,ClearIndicator($n){const{clearValue:Wn}=$n;return n.createElement(l.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Sn.singleValueRemove,onMouseDown:Pn=>{Pn.preventDefault(),Pn.stopPropagation(),Wn()}})},LoadingIndicator(){return n.createElement(d.$,{inline:!0})},LoadingMessage(){return n.createElement("div",{className:Sn.loadingMessage},Te)},NoOptionsMessage(){return n.createElement("div",{className:Sn.loadingMessage,"aria-label":"No options provided"},be)},DropdownIndicator:f,SingleValue($n){return n.createElement(R.P,{...$n,isDisabled:he})},SelectContainer:b.e,MultiValueContainer:C,MultiValueRemove:he?()=>null:P,...pe},styles:Xt,className:fe,...Gn,...Dn,...Ln,...cn}))}function G(Y){return n.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},n.createElement("div",null,Y),n.createElement("div",{style:{flexGrow:1}}),n.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function _(Y){const{showAllSelectedWhenOpen:ne,maxVisibleValues:se,menuIsOpen:re}=Y.selectProps,ge=Y.getValue();if(se!==void 0&&Array.isArray(Y.children)){const q=ge.length;if(q>se&&!(ne&&re)){const me=[...Y.children];return me.splice(-1,0,n.createElement("span",{key:"excess-values",id:"excess-values"},"(+",q-se,")")),n.createElement(E,{...Y},me)}}return n.createElement(E,{...Y})}function K(){return n.createElement(n.Fragment,null)}function k(Y){return n.createElement(w,{...Y})}function z(Y){return n.createElement(w,{...Y,isMulti:!0})}function W(Y){return n.createElement(w,{...Y})}function Z(Y){return n.createElement(w,{virtualized:!0,...Y})}function H(Y){return n.createElement(w,{virtualized:!0,...Y})}function X(Y){return n.createElement(w,{...Y,isMulti:!0})}},40650:(Q,A,e)=>{"use strict";e.d(A,{e:()=>c});var n=e(76932),a=e(31733),i=e(40166),r=e(76067),o=e(83998),g=e(90119),u=e(64516);const c=d=>{const{isDisabled:f,isFocused:m,children:v,selectProps:{invalid:E=!1}}=d,p=(0,r.wW)(l,m,f,E);return a.createElement(i.c.SelectContainer,{...d,className:(0,n.cx)(p.wrapper,d.className)},v)},l=(d,f,m,v)=>{const E=(0,u.H)({theme:d,invalid:v});return{wrapper:(0,n.cx)(E.wrapper,(0,g.RK)(d,v),f&&(0,n.css)((0,o.getFocusStyles)(d)),m&&E.inputDisabled,(0,n.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:m?"not-allowed":"pointer"}))}}},23491:(Q,A,e)=>{"use strict";e.d(A,{Qn:()=>p,SA:()=>f,r4:()=>E});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(61231),g=e(7820),u=e(76067),c=e(37758),l=e(49311),d=e(33789);const f=({children:h,maxHeight:s,innerRef:y,innerProps:D})=>{const C=(0,u.l4)(),P=(0,d.D)(C);return r.createElement("div",{...D,className:P.menu,style:{maxHeight:s},"aria-label":"Select options menu"},r.createElement(c.$,{scrollRefCallback:y,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},h))};f.displayName="SelectMenu";const m=37,v=7,E=({children:h,maxHeight:s,options:y,getValue:D})=>{const C=(0,u.l4)(),P=(0,d.D)(C),[b]=D(),O=(b?y.findIndex(x=>x.value===b.value):0)*m;if(!Array.isArray(h))return null;const I=((0,a.max)(y.map(x=>x.label?.length))??0)*v,M=Math.min(y.length*m,s);return r.createElement(o.t7,{className:P.menu,height:M,width:I,"aria-label":"Select options menu",itemCount:h.length,itemSize:m,initialScrollOffset:O},({index:x,style:L})=>r.createElement("div",{style:{...L,overflow:"hidden"}},h[x]))};E.displayName="VirtualizedSelectMenu";const p=({children:h,data:s,innerProps:y,innerRef:D,isFocused:C,isSelected:P,renderOptionLabel:b})=>{const T=(0,u.l4)(),O=(0,d.D)(T),R=s.icon?(0,g.iJ)(s.icon):void 0,{onMouseMove:I,onMouseOver:M,...x}=y;return r.createElement("div",{ref:D,className:(0,n.cx)(O.option,C&&O.optionFocused,P&&O.optionSelected,s.isDisabled&&O.optionDisabled),...x,"aria-label":"Select option",title:s.title},R&&r.createElement(l.J,{name:R,className:O.optionIcon}),s.imgUrl&&r.createElement("img",{className:O.optionImage,src:s.imgUrl,alt:s.label||String(s.value)}),r.createElement("div",{className:O.optionBody},r.createElement("span",null,b?b(s):h),s.description&&r.createElement("div",{className:O.optionDescription},s.description),s.component&&r.createElement(s.component,null)))};p.displayName="SelectMenuOptions"},4900:(Q,A,e)=>{"use strict";e.d(A,{n:()=>c});var n=e(76932),a=e(31733),i=e(33227),r=e(76067),o=e(49311);const g=(0,i.B)(l=>({header:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${l.colors.background.secondary}`,"&:hover":{color:l.colors.text.maxContrast}}),label:(0,n.css)({flexGrow:1}),icon:(0,n.css)({paddingRight:"2px"})}));class u extends a.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(d=>({expanded:!d.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:d}=this.props.selectProps.value;d&&this.props.options.some(f=>f.value===d)&&this.setState({expanded:!0})}}componentDidUpdate(d){d.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:d,label:f,theme:m}=this.props,{expanded:v}=this.state,E=g(m);return a.createElement("div",null,a.createElement("div",{className:E.header,onClick:this.onToggleChildren,role:"presentation"},a.createElement("span",{className:E.label},f),a.createElement(o.J,{className:E.icon,name:v?"angle-up":"angle-down"})),v&&d)}}const c=(0,r.HE)(u)},84247:(Q,A,e)=>{"use strict";e.d(A,{P:()=>m});var n=e(76932),a=e(31733),i=e(40166),r=e(7820),o=e(76067);function g(E,p={}){const{duration:h=250,delay:s=250}=p,[y,D]=(0,a.useState)(E),C=(0,a.useRef)();return(0,a.useEffect)(()=>{let P;if(E)P=setTimeout(()=>{C.current=new Date,D(E)},s);else{const b=C.current?Date.now()-C.current.valueOf():0,T=()=>{C.current=void 0,D(E)};b>=h?T():P=setTimeout(T,h-b)}return()=>{P&&(clearTimeout(P),P=void 0)}},[E,h,s]),y}var u=e(49311),c=e(89719),l=e(86141),d=e(16240);const f=E=>({singleValue:(0,n.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,n.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,n.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,n.css)({marginRight:E.spacing(1),color:E.colors.text.secondary}),disabled:(0,n.css)({color:E.colors.text.disabled}),isOpen:(0,n.css)({color:E.colors.text.disabled})}),m=E=>{const{children:p,data:h,isDisabled:s}=E,y=(0,o.wW)(f),D=g(h.loading||!1,{delay:250,duration:750}),C=h.icon?(0,r.iJ)(h.icon):void 0;return a.createElement(i.c.SingleValue,{...E,className:(0,n.cx)(y.singleValue,s&&y.disabled,E.selectProps.menuIsOpen&&y.isOpen)},h.imgUrl?a.createElement(v,{loading:D,imgUrl:h.imgUrl,styles:y,alt:String(h.label??h.value)}):a.createElement(a.Fragment,null,a.createElement(d.R,{horizontal:!0,size:16,visible:D,duration:150},a.createElement("div",{className:y.spinnerWrapper},a.createElement(c.$,{className:y.spinnerIcon,inline:!0}))),C&&a.createElement(u.J,{name:C,role:"img",className:y.optionIcon})),!h.hideText&&p)},v=E=>a.createElement("div",{className:E.styles.spinnerWrapper},a.createElement(l.n,{duration:150,visible:E.loading},a.createElement(c.$,{className:E.styles.spinnerIcon,inline:!0})),a.createElement(l.n,{duration:150,visible:!E.loading},a.createElement("img",{className:E.styles.spinnerIcon,src:E.imgUrl,alt:E.alt})))},33789:(Q,A,e)=>{"use strict";e.d(A,{D:()=>i});var n=e(76932),a=e(33227);const i=(0,a.B)(r=>({menu:(0,n.css)({label:"grafana-select-menu",background:r.components.dropdown.background,boxShadow:r.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,n.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:r.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${r.colors.primary.border}`}}}),optionIcon:(0,n.css)({marginRight:r.spacing(1)}),optionImage:(0,n.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,n.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:r.typography.size.sm,color:r.colors.text.secondary,whiteSpace:"normal",lineHeight:r.typography.body.lineHeight}),optionBody:(0,n.css)({label:"grafana-select-option-body",display:"flex",fontWeight:r.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,n.css)({label:"grafana-select-option-focused",background:r.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${r.colors.primary.border}`}}),optionSelected:(0,n.css)({background:r.colors.action.selected}),optionDisabled:(0,n.css)({label:"grafana-select-option-disabled",backgroundColor:r.colors.action.disabledBackground,color:r.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,n.css)({label:"grafana-select-single-value",color:r.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,n.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,n.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),valueContainerMultiNoWrap:(0,n.css)({flexWrap:"nowrap"}),loadingMessage:(0,n.css)({label:"grafana-select-loading-message",padding:r.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,n.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:r.colors.background.secondary,borderRadius:r.shape.radius.default,margin:r.spacing(.25,1,.25,0),padding:r.spacing(.25,0,.25,1),color:r.colors.text.primary,fontSize:r.typography.size.sm,overflow:"hidden",whiteSpace:"nowrap","&:hover":{background:r.colors.emphasize(r.colors.background.secondary)}}),multiValueRemove:(0,n.css)({label:"grafana-select-multi-value-remove",margin:r.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,n.css)({cursor:"pointer","&:hover":{color:r.colors.text.primary}})}))},59496:(Q,A,e)=>{"use strict";e.d(A,{O:()=>i,Z:()=>a});var n=e(31733);function a(r){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(o){return{...o,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:o})=>({maxHeight:o}),multiValue:()=>({}),multiValueLabel:()=>({overflow:"hidden",textOverflow:"ellipsis"}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:o=>({...o,color:r.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function i(r,o){return(0,n.useMemo)(()=>({...a(r),menuPortal:g=>({...g,zIndex:r.zIndex.portal}),menu:({top:g,bottom:u,position:c})=>({top:g,bottom:u,position:c,minWidth:"100%",zIndex:r.zIndex.dropdown}),container:()=>({width:o?r.spacing(o):"100%",display:o==="auto"?"inline-flex":"flex"}),option:(g,u)=>({...g,opacity:u.isDisabled?.5:1})}),[r,o])}},7355:()=>{},79977:(Q,A,e)=>{"use strict";e.d(A,{F:()=>v});var n=e(69781),a=e.n(n),i=e(31733),r=e(94557),o=e(86457),g=e(38357),u=e(99942),c=e(51517),l=e(89852),d=e(84834),f=e(20685);function m(E){return{label:E,value:stringToMs(E)}}class v extends i.PureComponent{constructor(p){super(p),this.propsSubject=new r.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,c.w)(p=>f.dP.isLive(p.interval)?(0,o.of)({}):p.loading?g.C:(0,u.F)((0,d.e0)(p.interval))),(0,l.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(p){f.dP.isLive(p.interval)&&f.dP.isLive(this.props.interval)||(0,n.isEqual)(p,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},95070:(Q,A,e)=>{"use strict";e.d(A,{PR:()=>s,ZH:()=>f,rD:()=>v});var n=e(69781),a=e.n(n),i=e(66542),r=e(55632),o=e(47423),g=e(55156),u=e(91507),c=e(19596),l=e(27369);const d=["reduceOptions","orientation"];function f(y,D,C){let P=y.options;if(y.fieldConfig=y.fieldConfig||{defaults:{},overrides:[]},D==="singlestat"&&C.angular)return m(y,C);for(const b of d)C.hasOwnProperty(b)&&(P[b]=(0,n.cloneDeep)(C[b]));return P}function m(y,D){const C=D.angular,P=i.TB.getIfExists(C.valueName),b={reduceOptions:{calcs:[P?P.id:i.gz.mean]},orientation:r.wm.Horizontal},T={};if(C.format&&(T.unit=C.format),C.tableColumn&&(b.reduceOptions.fields=`/^${C.tableColumn}$/`),C.nullPointMode&&(T.nullValueMode=C.nullPointMode),C.nullText&&(T.noValue=C.nullText),(C.decimals||C.decimals===0)&&(T.decimals=C.decimals),C.thresholds&&C.colors){const R=C.thresholds.split(",").map(M=>Number(M.trim())),I=[];for(const M of C.colors){const x=I.length-1;x>=0?I.push({value:R[x],color:M}):I.push({value:-1/0,color:M})}T.thresholds={mode:o.H.Absolute,steps:I}}const O=(0,g.Jb)(C,T.thresholds);return O&&O.length&&(T.mappings=O),C.gauge&&C.gauge.show&&(T.min=C.gauge.minValue,T.max=C.gauge.maxValue),y.fieldConfig.defaults=T,b}function v(y){if(!y.options)return{};const D=parseFloat(y.pluginVersion||"6.1");let C=y.options;D<6.2&&(C=p(C)),D<6.3&&(C=E(C));const{fieldOptions:P}=C;if(D<6.6&&P){if(P&&P.override){const{override:O,...R}=C.fieldOptions;C={...C,fieldOptions:{...R,overrides:[]}}}let b=P?.defaults?.thresholds;b?delete P.defaults.thresholds:(b=P?.thresholds,delete P.thresholds),b&&(P.defaults.thresholds={mode:o.H.Absolute,steps:b});const{defaults:T}=P;T.color&&typeof T.color=="string"&&(T.color={mode:u.S.Fixed,fixedColor:T.color}),(0,c.gb)(T)}if(D<7&&(y.fieldConfig=y.fieldConfig||{defaults:{},overrides:[]},y.fieldConfig={defaults:P&&P.defaults?{...y.fieldConfig.defaults,...P.defaults}:y.fieldConfig.defaults,overrides:P&&P.overrides?[...y.fieldConfig.overrides,...P.overrides]:y.fieldConfig.overrides},P&&(C.reduceOptions={values:P.values,limit:P.limit,calcs:P.calcs}),delete C.fieldOptions),D<7.1){const b=y.fieldConfig.defaults.title;b!=null&&(y.fieldConfig.defaults.displayName=b,delete y.fieldConfig.defaults.title)}if(D<8){const b=y.fieldConfig?.defaults;let T=b?.unit;T==="percent"?((0,n.isNumber)(b.min)||(b.min=0),(0,n.isNumber)(b.max)||(b.max=100)):T==="percentunit"&&((0,n.isNumber)(b.min)||(b.min=0),(0,n.isNumber)(b.max)||(b.max=1))}return C}function E(y){const{fieldOptions:D}=y;if(!D)return y;const{mappings:C,...P}=y.fieldOptions;let b;return y.thresholds&&(b={mode:o.H.Absolute,steps:h(y.thresholds)}),{...y,fieldOptions:{...P,defaults:{...D.defaults,mappings:C,thresholds:b}}}}function p(y){const{valueOptions:D}=y;if(!D)return y;const C={},P={};if(C.mappings=y.valueMappings,C.thresholds=y.thresholds,C.defaults=P,P.unit=D.unit,P.decimals=D.decimals,D.stat){const T=i.TB.get(D.stat);T&&(C.calcs=[T.id])}P.min=y.minValue,P.max=y.maxValue;const b={...y,fieldOptions:C};return(0,n.omit)(b,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function h(y){if(!y||!y.length)return;const D=y.map(C=>({value:C.value===null?-1/0:C.value,color:C.color}));return(0,l.bP)(D),D[0].value=-1/0,D}function s(y){return(0,g.Jb)(y)}},13392:(Q,A,e)=>{"use strict";e.d(A,{PR:()=>n.PR,ZH:()=>n.ZH,rD:()=>n.rD});var n=e(95070)},21660:(Q,A,e)=>{"use strict";e.d(A,{U:()=>f});var n=e(76932),a=e(29422),i=e(93948),r=e(31733),o=e(76067),g=e(53186);const u=m=>{const{value:v,children:E,visible:p,placement:h,tipFormatter:s,...y}=m,D=(0,r.useRef)(null),C=(0,r.useRef)(null),P=(0,o.wW)(c);function b(){C.current!==null&&cancelAnimationFrame(C.current)}function T(){C.current=requestAnimationFrame(()=>{D.current?.forceAlign()})}return(0,r.useEffect)(()=>(p?T():b(),b),[v,p]),r.createElement(g.Z,{overlayClassName:P.tooltip,placement:h,overlay:s??v,overlayInnerStyle:{minHeight:"auto"},ref:D,visible:p,...y},E)},c=m=>({tooltip:(0,n.css)({position:"absolute",display:"block",visibility:"visible",fontSize:m.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:m.zIndex.tooltip})}),l=u;var d=e(86840);const f=({min:m,max:v,onChange:E,onAfterChange:p,orientation:h="horizontal",reverse:s,step:y,formatTooltipResult:D,value:C,tooltipAlwaysVisible:P=!0})=>{const b=(0,r.useCallback)(M=>{E?.(typeof M=="number"?[M,M]:M)},[E]),T=(0,r.useCallback)(M=>{p?.(typeof M=="number"?[M,M]:M)},[p]),O=h==="horizontal",R=(0,o.wW)(d.W,O),I=(M,x)=>r.createElement(l,{value:x.value,visible:P||x.dragging,tipFormatter:D?()=>D(x.value):void 0,placement:O?"top":"right"},M);return r.createElement("div",{className:(0,n.cx)(R.container,R.slider)},r.createElement(a.Global,{styles:R.tooltip}),r.createElement(i.Z,{min:m,max:v,step:y,defaultValue:C,range:!0,onChange:b,onAfterChange:T,vertical:!O,reverse:s,handleRender:I}))};f.displayName="RangeSlider"},77970:(Q,A,e)=>{"use strict";e.d(A,{i:()=>c});var n=e(76932),a=e(29422),i=e(93948),r=e(31733),o=e(76067),g=e(64516),u=e(86840);const c=({min:l,max:d,onChange:f,onAfterChange:m,orientation:v="horizontal",reverse:E,step:p,value:h,ariaLabelForHandle:s,marks:y,included:D})=>{const C=v==="horizontal",P=(0,o.wW)(u.W,C,!!y),b=i.Z,[T,O]=(0,r.useState)(h??l),R=(0,r.useCallback)(U=>{const N=typeof U=="number"?U:U[0];O(N),f?.(N)},[O,f]),I=(0,r.useCallback)(U=>{let N=+U.target.value;Number.isNaN(N)&&(N=0),O(N),f&&f(N),m&&m(N)},[f,m]),M=(0,r.useCallback)(U=>{const N=+U.target.value;N>d?O(d):N<l&&O(l)},[d,l]),x=(0,r.useCallback)(U=>{const N=typeof U=="number"?U:U[0];m?.(N)},[m]),L=C?[]:[P.sliderInputVertical],S=C?[]:[P.sliderInputFieldVertical];return r.createElement("div",{className:(0,n.cx)(P.container,P.slider)},r.createElement(a.Global,{styles:P.tooltip}),r.createElement("div",{className:(0,n.cx)(P.sliderInput,...L)},r.createElement(b,{min:l,max:d,step:p,defaultValue:h,value:T,onChange:R,onAfterChange:x,vertical:!C,reverse:E,ariaLabelForHandle:s,marks:y,included:D}),r.createElement(g.I,{type:"text",className:(0,n.cx)(P.sliderInputField,...S),value:T,onChange:I,onBlur:M,min:l,max:d})))};c.displayName="Slider"},86840:(Q,A,e)=>{"use strict";e.d(A,{W:()=>i});var n=e(76932),a=e(29422);const i=(r,o,g=!1)=>{const{spacing:u}=r,c=r.colors.border.strong,l=r.colors.primary.main,d=r.colors.primary.main,m=`box-shadow: 0px 0px 0px 6px ${r.colors.primary.transparent}`;return{container:(0,n.css)({width:"100%",margin:o?"inherit":u(1,3,1,1),paddingBottom:o&&g?r.spacing(1):"inherit",height:o?"auto":"100%"}),slider:(0,n.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${r.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${r.colors.text.disabled};
        font-size: ${r.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${r.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${d};
        box-shadow: ${r.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${m};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${r.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${r.colors.text.primary};
        border-color: ${r.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${l};
      }
      .rc-slider-rail {
        background-color: ${c};
        cursor: pointer;
      }
    `,tooltip:(0,a.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${r.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${r.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,n.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,n.css)({marginLeft:r.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,n.css)({margin:`0 0 ${r.spacing(3)} 0`,order:1})}}},64837:(Q,A,e)=>{"use strict";e.d(A,{b:()=>p});var n=e(69781),a=e(31733),i=e(82401),r=e(85666),o=e(99326),g=e(71199),u=e(64125),c=e(50282),l=e(80431),d=e(96609),f=e(98147),m=e(63621);function v(h,s){const y=h.y.values.length,D={...h.y.config,...s},C=h.x??{name:"",values:[...Array(y).keys()],type:r.fS.number,config:{}};let P={refId:"sparkline",fields:[C,{...h.y,config:D}],length:y};return(0,d.lP)(C.values)||(P=(0,f.aK)(P,0)),(0,m.w)({frame:P,refFieldPseudoMin:h.timeRange?.from.valueOf(),refFieldPseudoMax:h.timeRange?.to.valueOf()})}const E={drawStyle:g.l8.Line,showPoints:g.Jp.Auto,axisPlacement:g.LB.Hidden,pointSize:2};class p extends a.PureComponent{constructor(s){super(s);const y=v(s.sparkline,s.config);this.state={data:(0,l.Bj)(y,(0,l.i7)(y)),alignedDataFrame:y,configBuilder:this.prepareConfig(y)}}static getDerivedStateFromProps(s,y){const D=v(s.sparkline,s.config);return D?{...y,data:(0,l.Bj)(D,(0,l.i7)(D)),alignedDataFrame:D}:{...y}}componentDidUpdate(s,y){const{alignedDataFrame:D}=this.state;if(!D)return;let C=!1;s.sparkline!==this.props.sparkline?C=!(0,i.Ch)(this.state.alignedDataFrame,y.alignedDataFrame):C=!(0,n.isEqual)(s.config,this.props.config),C&&this.setState({configBuilder:this.prepareConfig(D)})}getYRange(s){let{min:y,max:D}=this.state.alignedDataFrame.fields[1].state?.range;return y===D?(y===0?D=100:(y=0,D*=2),[y,D]):[Math.max(y,s.config.min??-1/0),Math.min(D,s.config.max??1/0)]}prepareConfig(s){const{theme:y}=this.props,D=new c.U;D.setCursor({show:!1,x:!1,y:!1});const C=s.fields[0];D.addScale({scaleKey:"x",orientation:g.wN.Horizontal,direction:g.bQ.Right,isTime:!1,range:()=>{const{sparkline:P}=this.props;if(P.x){if(P.timeRange&&P.x.type===r.fS.time)return[P.timeRange.from.valueOf(),P.timeRange.to.valueOf()];const b=P.x.values;return[b[0],b[b.length-1]]}return[0,P.y.values.length-1]}}),D.addAxis({scaleKey:"x",theme:y,placement:g.LB.Hidden});for(let P=0;P<s.fields.length;P++){const b=s.fields[P],T=b.config,O={...E,...T.custom};if(b===C||b.type!==r.fS.number)continue;const R=T.unit||"__fixed";D.addScale({scaleKey:R,orientation:g.wN.Vertical,direction:g.bQ.Up,range:()=>this.getYRange(b)}),D.addAxis({scaleKey:R,theme:y,placement:g.LB.Hidden});const I=(0,o.fD)(b),M=I.getCalculator(b,y)(0,0),x=O.drawStyle===g.l8.Points?g.Jp.Always:O.showPoints;D.addSeries({pxAlign:!1,scaleKey:R,theme:y,colorMode:I,thresholds:T.thresholds,drawStyle:O.drawStyle,lineColor:O.lineColor??M,lineWidth:O.lineWidth,lineInterpolation:O.lineInterpolation,showPoints:x,pointSize:O.pointSize,fillOpacity:O.fillOpacity,fillColor:O.fillColor,lineStyle:O.lineStyle,gradientMode:O.gradientMode})}return D}render(){const{data:s,configBuilder:y}=this.state,{width:D,height:C}=this.props;return a.createElement(u.N,{data:s,config:y,width:D,height:C})}}},89719:(Q,A,e)=>{"use strict";e.d(A,{$:()=>c});var n=e(76932),a=e(31733),i=e(55793),r=e(76067),o=e(84022),g=e(49311),u=e(44047);const c=({className:f,inline:m=!1,iconClassName:v,style:E,size:p="md"})=>{const h=(0,r.wW)(l),s=(0,r.wW)(d,p);if(typeof p!="string"||!(0,o.D)(p)){const y=(0,u.lK)(),D="spinner",C=(0,u.y_)(D,"default"),P=`${y}${C}/${D}.svg`;return a.createElement("div",{"data-testid":"Spinner",style:E,className:(0,n.cx)({[h.inline]:m},s.wrapper,f)},a.createElement(i.default,{src:P,width:p,height:p,className:(0,n.cx)("fa-spin",s.icon,f),style:E}))}return a.createElement("div",{"data-testid":"Spinner",style:E,className:(0,n.cx)({[h.inline]:m},f)},a.createElement(g.J,{className:(0,n.cx)("fa-spin",v),name:"spinner",size:p,"aria-label":"loading spinner"}))},l=f=>({inline:(0,n.css)({display:"inline-block"})}),d=(f,m)=>({wrapper:(0,n.css)({fontSize:typeof m=="string"?m:`${m}px`}),icon:(0,n.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"})})},79043:(Q,A,e)=>{"use strict";e.d(A,{m:()=>g});var n=e(69781),a=e.n(n),i=e(31733),r=e(66542),o=e(38834);class g extends i.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:c,allowMultiple:l,defaultStat:d,onChange:f}=this.props,m=r.TB.list(c);if(m.length!==c.length){const v=m.map(p=>p.id),E=(0,n.difference)(c,v);console.warn("Unknown stats",E,c),f(m.map(p=>p.id))}!l&&c.length>1&&(console.warn("Removing extra stat",c),f([c[0]])),d&&c.length<1&&f([d])},this.onSelectionChange=c=>{const{onChange:l}=this.props;Array.isArray(c)?l(c.map(d=>d.value)):l(c&&c.value?[c.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(c){this.checkInput()}render(){const{stats:c,allowMultiple:l,defaultStat:d,placeholder:f,className:m,menuPlacement:v,width:E,inputId:p,filterOptions:h}=this.props,s=r.TB.selectOptions(c,h);return i.createElement(o.Ph,{value:s.current,className:m,isClearable:!d,isMulti:l,width:E,isSearchable:!0,options:s.options,placeholder:f,onChange:this.onSelectionChange,menuPlacement:v,inputId:p})}}g.defaultProps={allowMultiple:!1}},76772:(Q,A,e)=>{"use strict";e.d(A,{r:()=>c,x:()=>l});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(74687),g=e(76067),u=e(83998);const c=r.forwardRef(({value:f,checked:m,onChange:v,id:E,label:p,disabled:h,invalid:s=!1,...y},D)=>{m&&(0,o.d)("Switch","checked prop","value");const C=(0,g.wW)(d),P=(0,r.useRef)(E||(0,a.uniqueId)("switch-"));return r.createElement("div",{className:(0,n.cx)(C.switch,s&&C.invalid)},r.createElement("input",{type:"checkbox",disabled:h,checked:f,onChange:b=>{!h&&v?.(b)},id:P.current,...y,ref:D}),r.createElement("label",{htmlFor:P.current,"aria-label":p??"Toggle switch"}))});c.displayName="Switch";const l=r.forwardRef(({transparent:f,className:m,showLabel:v,label:E,value:p,id:h,invalid:s,...y},D)=>{const C=(0,g.wW)(d,f);return r.createElement("div",{className:(0,n.cx)(C.inlineContainer,m,y.disabled&&C.disabled,s&&C.invalid)},v&&r.createElement("label",{htmlFor:h,className:(0,n.cx)(C.inlineLabel,p&&C.inlineLabelEnabled,"inline-switch-label")},E),r.createElement(c,{...y,id:h,label:E,ref:D,value:p}))});l.displayName="Switch";const d=(f,m)=>({switch:(0,n.css)({width:"32px",height:"16px",position:"relative",input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:checked + label":{background:f.colors.primary.main,borderColor:f.colors.primary.main,"&:hover":{background:f.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:f.colors.primary.contrastText}},"&:disabled + label":{background:f.colors.action.disabledBackground,borderColor:f.colors.border.weak,cursor:"not-allowed","&:hover":{background:f.colors.action.disabledBackground}},"&:disabled:checked + label":{"&::after":{background:f.colors.text.disabled}},"&:focus + label, &:focus-visible + label":(0,u.getFocusStyles)(f),"&:focus:not(:focus-visible) + label":(0,u.getMouseFocusStyles)(f)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:f.shape.radius.pill,background:f.components.input.background,border:`1px solid ${f.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:f.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:f.shape.radius.circle,background:f.colors.text.secondary,boxShadow:f.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,n.css)({padding:f.spacing(0,1),height:f.spacing(f.components.height.md),display:"inline-flex",alignItems:"center",background:m?"transparent":f.components.input.background,border:`1px solid ${m?"transparent":f.components.input.borderColor}`,borderRadius:f.shape.radius.default,"&:hover":{border:`1px solid ${m?"transparent":f.components.input.borderHover}`,".inline-switch-label":{color:f.colors.text.primary}}}),disabled:(0,n.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,n.css)({cursor:"pointer",paddingRight:f.spacing(1),color:f.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,n.css)({color:f.colors.text.primary}),invalid:(0,n.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${f.colors.error.border}`}})})},70098:(Q,A,e)=>{"use strict";e.d(A,{W:()=>l});var n=e(76932),a=e(31733),i=e(41354),r=e(88062),o=e(4981),g=e(31805),u=e(76067),c=e(37758);function l({tabs:f,defaultTab:m,closeIconTooltip:v,onClose:E}){const[p,h]=(0,a.useState)(f.some(D=>D.value===m)?m:f[0].value),s=D=>{h(D.value)},y=(0,u.wW)(d);return a.createElement("div",{className:y.container},a.createElement(r.J,{className:y.tabs},f.map(D=>a.createElement(o.O,{key:D.value,label:D.label,active:D.value===p,onChangeTab:()=>s(D),icon:D.icon})),a.createElement(i.h,{className:y.close,onClick:E,name:"times",tooltip:v??"Close"})),a.createElement(c.$,{autoHeightMin:"100%"},a.createElement(g.I,{className:y.tabContent},f.find(D=>D.value===p)?.content)))}const d=f=>({container:(0,n.css)({height:"100%"}),tabContent:(0,n.css)({padding:f.spacing(2),backgroundColor:f.colors.background.primary,height:`calc(100% - ${f.components.menuTabs.height}px)`}),close:(0,n.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:f.typography.size.lg}),tabs:(0,n.css)({paddingTop:f.spacing(1),borderColor:f.colors.border.weak,ul:{marginLeft:f.spacing(2)}})})},27632:(Q,A,e)=>{"use strict";e.d(A,{i:()=>u,c:()=>l});var n=e(31733),a=e(66542),i=e(21568),r=e(76932);const o=d=>{const f=(0,r.css)({width:"100%",listStyle:"none"}),m=(0,r.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return d.value&&!Array.isArray(d.value)?n.createElement("span",null,d.value):d.value&&Array.isArray(d.value)&&d.value.length>0?n.createElement("ul",{className:f},d.value.map((v,E)=>{const p=Object.keys(v)[0];return n.createElement("li",{className:m,key:E},n.createElement("span",null,p),n.createElement("span",null,v[p]))})):g},g=()=>n.createElement("span",null,"\xA0");function u(d){const{totalColumnsWidth:f,footerGroups:m,isPaginationVisible:v,tableStyles:E}=d,p=i.wl.components.Panels.Visualization.Table;return n.createElement("div",{style:{position:v?"relative":"absolute",width:f?`${f}px`:"100%",bottom:"0px"}},m.map(h=>{const{key:s,...y}=h.getFooterGroupProps();return n.createElement("div",{className:E.tfoot,...y,key:s,"data-testid":p.footer},h.headers.map(D=>c(D,E)))}))}function c(d,f){const m=d.getHeaderProps();return m?(m.style=m.style??{},m.style.position="absolute",m.style.justifyContent=d.justifyContent,n.createElement("div",{className:f.headerCell,...m},d.render("Footer"))):null}function l(d,f,m){if(f===void 0)return g;if(m){if(f[d]===void 0)return g;const v=a.TB.get(a.gz.count).name;return o({value:[{[v]:String(f[d])}]})}return o({value:f[d]})}},75703:(Q,A,e)=>{"use strict";e.d(A,{A:()=>m,U:()=>f});var n=e(31733),a=e(56106),i=e(98147),r=e(85666),o=e(71199),g=e(76067),u=e(90854),c=e(60850),l=e(64837),d=e(9596);const f={type:o.h2.Sparkline,drawStyle:o.l8.Line,lineInterpolation:o.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:o.FI.Hue,pointSize:2,barAlignment:o.pu.Center,showPoints:o.Jp.Never,hideValue:!1},m=p=>{const{field:h,innerWidth:s,tableStyles:y,cell:D,cellProps:C,timeRange:P}=p,b=v(D.value),T=(0,g.l4)();if(!b)return n.createElement("div",{...C,className:y.cellContainer},h.config.noValue||"no data");b.x&&!b.x.config.interval&&b.x.values.length>1&&(b.x.config.interval=b.x.values[1]-b.x.values[0]),b.y.values=b.y.values.map(S=>Number.isFinite(S)?S:null);const O=(0,a.dz)(b.y);b.y.config.min=O.min,b.y.config.max=O.max,b.y.state={range:O},b.timeRange=P;const R=E(h),I={color:h.config.color,custom:{...f,...R}},M=h.config.custom?.cellOptions?.hideValue;let x=0,L=null;if(!M){const S=(0,i.z4)(D.value)?D.value.value:null,U=h.display(S),N=(0,d.f2)(h,U,D.row.index);x=(0,u.X1)(`${N.prefix??""}${N.text}${N.suffix??""}`,16).width+T.spacing.gridSize,L=n.createElement(c.W,{style:{width:`${x-T.spacing.gridSize}px`,textAlign:"right",marginRight:T.spacing(1)},value:U})}return n.createElement("div",{...C,className:y.cellContainer},L,n.createElement("div",null,n.createElement(l.b,{width:s-x,height:y.cellHeightInner,sparkline:b,config:I,theme:y.theme})))};function v(p){if(Array.isArray(p))return{y:{name:"test",type:r.fS.number,values:p,config:{}}};if((0,i.aY)(p)){const h=p.fields.find(y=>y.type===r.fS.time),s=p.fields.find(y=>y.type===r.fS.number);if(h&&s)return{x:h,y:s}}}function E(p){let h=(0,d.S_)(p);if(h.type===o.h2.Auto&&(h={...h,type:o.h2.Sparkline}),h.type===o.h2.Sparkline)return h;throw new Error(`Expected options type ${o.h2.Sparkline} but got ${h.type}`)}},47687:(Q,A,e)=>{"use strict";e.d(A,{i:()=>pe});var n=e(31733),a=e(37109),i=e(66542),r=e(85666),o=e(21568),g=e(71199),u=e(76067),c=e(37758),l=e(47808),d=e(27632),f=e(84022),m=e(49311),v=e(76932),E=e(20425),p=e(11550),h=e(79106),s=e(36667),y=e(41354),D=e(51343),C=e(61231),P=e(76804),b=e(36356);const T=28,O=T*5,R=({options:Me,values:Pe,caseSensitive:Ee,onChange:he})=>{const[Le,ke]=(0,n.useState)(""),ot=(0,n.useMemo)(()=>new RegExp(Le,Ee?void 0:"i"),[Le,Ee]),it=(0,n.useMemo)(()=>Me.filter(Te=>Te.label===void 0?!1:ot.test(Te.label)),[Me,ot]),ce=(0,n.useMemo)(()=>it.filter(Te=>Pe.includes(Te)),[it,Pe]),le=(0,n.useMemo)(()=>it.length===ce.length,[it,ce]),Re=(0,n.useMemo)(()=>ce.length>0&&it.length>ce.length,[it,ce]),Ae=(0,n.useMemo)(()=>ce.length?`${ce.length} selected`:"Select all",[ce]),Oe=(0,n.useMemo)(()=>it.length!==ce.length?"Add all displayed values to the filter":"Remove all displayed values from the filter",[it,ce]),$e=(0,u.wW)(I),Ne=(0,u.l4)().spacing.gridSize,je=(0,n.useMemo)(()=>Math.min(it.length*T,O)+Ne,[Ne,it.length]),ut=(0,n.useCallback)(Te=>Ve=>{const tt=Ve.currentTarget.checked?Pe.concat(Te):Pe.filter(ae=>ae.value!==Te.value);he(tt)},[he,Pe]),Fe=(0,n.useCallback)(()=>{if(it.length===ce.length){const Te=Pe.filter(Ve=>!it.includes(Ve));he(Te)}else{const Te=[...new Set([...Pe,...it])];he(Te)}},[he,Pe,it,ce]);return n.createElement(h.wc,{spacing:"md"},n.createElement(P.H,{placeholder:"Filter values",onChange:ke,value:Le}),!it.length&&n.createElement(s._,null,"No values"),it.length&&n.createElement(C.t7,{height:je,itemCount:it.length,itemSize:T,width:"100%",className:$e.filterList},({index:Te,style:Ve})=>{const tt=it[Te],{value:ae,label:J}=tt,te=Pe.find(de=>de.value===ae)!==void 0;return n.createElement("div",{className:$e.filterListRow,style:Ve,title:J},n.createElement(b.X,{value:te,label:J,onChange:ut(tt)}))}),it.length&&n.createElement(h.wc,{spacing:"xs"},n.createElement("div",{className:(0,v.cx)($e.selectDivider)}),n.createElement("div",{className:(0,v.cx)($e.filterListRow)},n.createElement(b.X,{value:le,indeterminate:Re,label:Ae,description:Oe,onChange:Fe}))))},I=Me=>({filterList:(0,v.css)({label:"filterList"}),filterListRow:(0,v.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:Me.spacing(.5),":hover":{backgroundColor:Me.colors.action.hover}}),selectDivider:(0,v.css)({label:"selectDivider",width:"100%",borderTop:`1px solid ${Me.colors.border.medium}`,padding:Me.spacing(.5,2)})});var M=e(9596);const x=({column:{preFilteredRows:Me,filterValue:Pe,setFilter:Ee},onClose:he,field:Le})=>{const ke=(0,u.l4)(),ot=(0,n.useMemo)(()=>(0,M.AF)(Me,Le),[Me,Le]),it=(0,n.useMemo)(()=>(0,M.mP)(ot),[ot]),ce=(0,n.useMemo)(()=>(0,M.n0)(it,Pe),[it,Pe]),[le,Re]=(0,n.useState)(ce),[Ae,Oe]=(0,n.useState)(!1),$e=(0,n.useCallback)(Fe=>he(),[he]),Ye=(0,n.useCallback)(Fe=>{const Te=le.length?le:void 0;Ee(Te),he()},[Ee,le,he]),Ne=(0,n.useCallback)(Fe=>{Ee(void 0),he()},[Ee,he]),je=(0,n.useMemo)(()=>Pe!==void 0,[Pe]),ut=(0,u.wW)(L);return n.createElement(p.L,{onClick:$e,useCapture:!0},n.createElement("div",{className:(0,v.cx)(ut.filterContainer),onClick:S},n.createElement(h.wc,{spacing:"lg"},n.createElement(h.wc,{spacing:"xs"},n.createElement(h.Lh,{justify:"space-between",align:"center"},n.createElement(s._,{className:ut.label},"Filter by values:"),n.createElement(y.h,{name:"text-fields",tooltip:"Match case",style:{color:Ae?ke.colors.text.link:ke.colors.text.disabled},onClick:()=>{Oe(Fe=>!Fe)}})),n.createElement("div",{className:(0,v.cx)(ut.listDivider)}),n.createElement(R,{onChange:Re,values:le,options:it,caseSensitive:Ae})),n.createElement(h.Lh,{spacing:"lg"},n.createElement(h.Lh,null,n.createElement(D.zx,{size:"sm",onClick:Ye},"Ok"),n.createElement(D.zx,{size:"sm",variant:"secondary",onClick:$e},"Cancel")),je&&n.createElement(h.Lh,null,n.createElement(D.zx,{fill:"text",size:"sm",onClick:Ne},"Clear filter"))))))},L=Me=>({filterContainer:(0,v.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:Me.colors.background.primary,border:`1px solid ${Me.colors.border.weak}`,padding:Me.spacing(2),margin:Me.spacing(1,0),boxShadow:Me.shadows.z3,borderRadius:Me.shape.radius.default}),listDivider:(0,v.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${Me.colors.border.medium}`,padding:Me.spacing(.5,2)}),label:(0,v.css)({marginBottom:0})}),S=Me=>{Me.stopPropagation()},U=({column:Me,field:Pe,tableStyles:Ee})=>{const he=(0,n.useRef)(null),[Le,ke]=(0,n.useState)(!1),ot=(0,u.wW)(N),it=(0,n.useMemo)(()=>!!Me.filterValue,[Me.filterValue]),ce=(0,n.useCallback)(()=>ke(!0),[ke]),le=(0,n.useCallback)(()=>ke(!1),[ke]);return!Pe||!Pe.config.custom?.filterable?null:n.createElement("button",{className:(0,v.cx)(Ee.headerFilter,it?ot.filterIconEnabled:ot.filterIconDisabled),ref:he,type:"button",onClick:ce},n.createElement(m.J,{name:"filter"}),Le&&he.current&&n.createElement(E.J,{content:n.createElement(x,{column:Me,tableStyles:Ee,field:Pe,onClose:le}),placement:"bottom-start",referenceElement:he.current,show:!0}))},N=Me=>({filterIconEnabled:(0,v.css)({label:"filterIconEnabled",color:Me.colors.primary.text}),filterIconDisabled:(0,v.css)({label:"filterIconDisabled",color:Me.colors.text.disabled})}),w=Me=>{const{headerGroups:Pe,showTypeIcons:Ee,tableStyles:he}=Me,Le=o.wl.components.Panels.Visualization.Table;return n.createElement("div",{role:"rowgroup",className:he.headerRow},Pe.map(ke=>{const{key:ot,...it}=ke.getHeaderGroupProps();return n.createElement("div",{className:he.thead,...it,key:ot,"aria-label":Le.header,role:"row"},ke.headers.map((ce,le)=>G(ce,he,Ee)))}))};function G(Me,Pe,Ee){const he=Me.getHeaderProps(),Le=Me.field??null;return Me.canResize&&(he.style.userSelect=Me.isResizing?"none":"auto"),he.style.position="absolute",he.style.justifyContent=Me.justifyContent,n.createElement("div",{className:Pe.headerCell,...he,role:"columnheader"},Me.canSort&&n.createElement(n.Fragment,null,n.createElement("button",{...Me.getSortByToggleProps(),className:Pe.headerCellLabel},Ee&&n.createElement(m.J,{name:(0,f.e7)(Le),title:Le?.type,size:"sm",className:Pe.typeIcon}),n.createElement("div",null,Me.render("Header")),Me.isSorted&&(Me.isSortedDesc?n.createElement(m.J,{size:"lg",name:"arrow-down",className:Pe.sortIcon}):n.createElement(m.J,{name:"arrow-up",size:"lg",className:Pe.sortIcon}))),Me.canFilter&&n.createElement(U,{column:Me,tableStyles:Pe,field:Le})),!Me.canSort&&Me.render("Header"),!Me.canSort&&Me.canFilter&&n.createElement(U,{column:Me,tableStyles:Pe,field:Le}),Me.canResize&&n.createElement("div",{...Me.getResizerProps(),className:Pe.resizeHandle}))}var _=e(40510),K=e(37358),k=e(23498),z=e(93670),W=e(43348);function Z({tableStyles:Me,nestedData:Pe,rowIndex:Ee,width:he,cellHeight:Le}){const ke=Pe.values,ot=[],it=(0,u.l4)(),ce=(0,u.wW)(H);let le=Me.rowHeight+it.spacing.gridSize;return ke[Ee].forEach((Re,Ae)=>{const Oe=!!Re.meta?.custom?.noHeader,$e=Me.rowHeight*(Re.length+(Oe?0:1)),Ye={height:$e,paddingLeft:M.bc,position:"absolute",top:le};le+=$e+it.spacing.gridSize,ot.push(n.createElement("div",{style:Ye,key:`subTable_${Ee}_${Ae}`},n.createElement(pe,{data:Re,width:he-M.bc,height:Me.rowHeight*(Re.length+1),noHeader:Oe,cellHeight:Le})))}),n.createElement("div",{className:ce.subTables},ot)}const H=Me=>({subTables:(0,v.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:Me.spacing(5),left:Me.spacing(1),bottom:Me.spacing(2),background:Me.colors.border.medium}})});function X(Me,Pe,Ee){return Me.values[Pe].reduce((ke,ot)=>{if(ot.length){const it=!!ot.meta?.custom?.noHeader;return ke+Ee.rowHeight*(ot.length+(it?0:1))+8}return ke},Ee.rowHeight)??Ee.rowHeight}var Y=e(37300);const ne=Me=>{const{data:Pe,rows:Ee,headerHeight:he,footerPaginationEnabled:Le,rowHeight:ke,itemCount:ot,pageIndex:it,tableState:ce,prepareRow:le,onCellFilterAdded:Re,width:Ae,cellHeight:Oe=g.Ss.Sm,timeRange:$e,tableStyles:Ye,nestedDataField:Ne,listHeight:je,listRef:ut,enableSharedCrosshair:Fe=!1}=Me,[Te,Ve]=(0,n.useState)(void 0),tt=(0,u.l4)(),ae=(0,W.R9)(),J=(0,n.useMemo)(()=>{const _e=Pe.fields.find(qe=>qe.type===r.fS.time);return _e?(0,M._9)(_e):0},[Pe]),te=(0,n.useCallback)((_e,qe)=>{if(!ae||!Fe||!(0,k.jT)(qe))return;const at=qe.fields.find(lt=>lt.type===r.fS.time);ae.eventBus.publish(new z.es({point:{time:at.values[_e]}}))},[Fe,ae]),de=(0,n.useCallback)(()=>{!ae||!Fe||ae.eventBus.publish(new z.xH)},[Fe,ae]),be=(0,n.useCallback)(_e=>{if(_e.payload.point?.time&&_e.payload.rowIndex!==void 0){const qe=Pe.fields.find(yt=>yt.type===r.fS.time),at=qe.values[_e.payload.rowIndex],lt=_e.payload.point.time;if((0,M.Hw)(lt,at,J)){Ve(_e.payload.rowIndex);return}const ft=qe.values.findIndex(yt=>(0,M.Hw)(lt,yt,J));if(ft!==-1){Ve(ft);return}Ve(void 0)}},[Pe.fields,J]);(0,n.useEffect)(()=>{if(!ae||!Fe||!(0,k.jT)(Pe)||Le)return;const _e=new _.w0;return _e.add(ae.eventBus.getStream(z.es).pipe((0,K.b)(250)).subscribe({next:qe=>{ae.eventBus!==qe.origin&&be(qe)}})),_e.add(ae.eventBus.getStream(z.xH).pipe((0,K.b)(250)).subscribe({next:qe=>{ae.eventBus!==qe.origin&&Ve(void 0)}})),()=>{_e.unsubscribe()}},[Pe,Fe,Le,be,ae]);let De;if(Te!==void 0){const _e=Ee.findIndex(qe=>qe.index===Te);_e!==-1&&(De=he+(_e-1)*ke)}const Ue=(0,n.useCallback)(_e=>ce.pageIndex*ce.pageSize+_e,[ce.pageIndex,ce.pageSize]),We=(0,n.useCallback)(({index:_e,style:qe,rowHighlightIndex:at})=>{const lt=Ue(_e),ft=Ee[lt];le(ft);const yt=ce.expanded[ft.index]?(0,v.css)({"&:hover":{background:"inherit"}}):{};return at!==void 0&&ft.index===at&&(qe={...qe,backgroundColor:tt.components.table.rowHoverBackground}),n.createElement("div",{...ft.getRowProps({style:qe}),className:(0,v.cx)(Ye.row,yt),onMouseEnter:()=>te(_e,Pe),onMouseLeave:de},Ne&&ce.expanded[ft.index]&&n.createElement(Z,{nestedData:Ne,tableStyles:Ye,rowIndex:_e,width:Ae,cellHeight:Oe}),ft.cells.map((wt,zt)=>n.createElement(Y.p,{key:zt,tableStyles:Ye,cell:wt,onCellFilterAdded:Re,columnIndex:zt,columnCount:ft.cells.length,timeRange:$e,frame:Pe})))},[Oe,Pe,Ne,Re,te,de,le,Ue,Ee,ce.expanded,Ye,tt.components.table.rowHoverBackground,$e,Ae]),et=_e=>{const qe=Ue(_e),at=Ee[qe];return ce.expanded[at.index]&&Ne?X(Ne,_e,Ye):Ye.rowHeight},ze=_e=>{const{scrollTop:qe}=_e.currentTarget;ut.current!==null&&ut.current.scrollTo(qe)};return n.createElement(n.Fragment,null,n.createElement(c.Z,{onScroll:ze,hideHorizontalTrack:!0,scrollTop:De},n.createElement(C.S_,{key:ke+it,height:je,itemCount:ot,itemSize:et,width:"100%",ref:ut,style:{overflow:void 0}},({index:_e,style:qe})=>We({index:_e,style:qe,rowHighlightIndex:Te}))))};function se(Me,Pe){(0,n.useEffect)(()=>{if(Me.current&&Pe.current){const Ee=Me.current.querySelector(".track-vertical"),he=Pe.current.firstChild;he&&Ee&&(Ee.remove(),he instanceof HTMLElement&&(he.querySelector(":scope > .track-vertical")?.remove(),he.append(Ee)))}})}function re(Me,Pe,Ee){(0,n.useEffect)(()=>{if(Me.lastExpandedIndex!==void 0){let he=Me.lastExpandedIndex;const Le=Object.keys(Me.expanded);if(Le.length>0){const ot=parseInt(Le[0],10);isNaN(ot)||(he=Math.min(he,ot))}const ke=Me.pageIndex===0?he-1:he-Me.pageIndex-Me.pageIndex*Me.pageSize;Pe.current?.resetAfterIndex(Math.max(ke,0));return}},[Me.lastExpandedIndex,Me.toggleRowExpandedCounter,Me.pageIndex,Me.pageSize,Pe,Ee,Me.expanded])}var ge=e(27957);function q({onColumnResize:Me,onSortByChange:Pe,data:Ee}){return(0,n.useCallback)((he,Le)=>{switch(Le.type){case"columnDoneResizing":if(Me){const ot=he.columnResizing.headerIdWidths[0][0],it=parseInt(ot,10),ce=Math.round(he.columnResizing.columnWidths[ot]),le=Ee.fields[it];if(!le)return he;const Re=(0,ge.CZ)(le,Ee);Me(Re,ce)}case"toggleSortBy":if(Pe){const ke=[];for(const ot of he.sortBy){const it=Ee.fields[parseInt(ot.id,10)];it&&ke.push({displayName:(0,ge.CZ)(it,Ee),desc:ot.desc})}Pe(ke)}case"toggleRowExpanded":if(Le.id)return{...he,lastExpandedIndex:parseInt(Le.id,10),toggleRowExpandedCounter:he.toggleRowExpandedCounter+1}}return he},[Ee,Me,Pe])}function me(Me,Pe){const Ee={toggleRowExpandedCounter:0};if(Me){Ee.sortBy=[];for(const he of Me)for(const Le of Pe)Le.Header===he.displayName&&Ee.sortBy.push({id:Le.id,desc:he.desc})}return Ee}var oe=e(82687);const fe=150,ve=36,pe=(0,n.memo)(Me=>{const{ariaLabel:Pe,data:Ee,height:he,onCellFilterAdded:Le,width:ke,columnMinWidth:ot=fe,noHeader:it,resizable:ce=!0,initialSortBy:le,footerOptions:Re,showTypeIcons:Ae,footerValues:Oe,enablePagination:$e,cellHeight:Ye=g.Ss.Sm,timeRange:Ne,enableSharedCrosshair:je=!1}=Me,ut=(0,n.useRef)(null),Fe=(0,n.useRef)(null),Te=(0,n.useRef)(null),Ve=(0,u.l4)(),tt=(0,oe.p)(Ve,Ye),ae=it?0:tt.rowHeight,[J,te]=(0,n.useState)(Oe),de=(0,n.useMemo)(()=>{const Sn=ve;let Zn=0;if(!J)return 0;for(const _n of J)Array.isArray(_n)&&_n.length>Zn&&(Zn=_n.length);return Zn>1?Sn*Zn:Sn},[J]),be=(0,n.useMemo)(()=>Ee.fields.length?Array(Ee.length).fill(0):[],[Ee]),De=!!(Re?.countRows&&Re.reducer&&Re.reducer.length&&Re.reducer[0]===i.gz.count),Ue=Ee.fields.find(Sn=>Sn.type===r.fS.nestedFrames),We=Ue!==void 0,et=(0,n.useMemo)(()=>(0,M.Pu)(Ee,ke,ot,We,J,De),[Ee,ke,ot,J,We,De]),ze=(0,n.useRef)(),_e=q({...Me,onSortByChange:Sn=>{ze.current(!1),Me.onSortByChange&&Me.onSortByChange(Sn)}}),qe=(0,n.useMemo)(()=>({columns:et,data:be,disableResizing:!ce,stateReducer:_e,autoResetPage:!1,initialState:me(le,et),autoResetFilters:!1,sortTypes:{number:M.QT,"alphanumeric-insensitive":M.nl}}),[le,et,be,ce,_e]),{getTableProps:at,headerGroups:lt,footerGroups:ft,rows:yt,prepareRow:wt,totalColumnsWidth:zt,page:$t,state:Ie,gotoPage:st,setPageSize:Mt,pageOptions:ct,toggleAllRowsExpanded:nt}=(0,a.useTable)(qe,a.useFilters,a.useSortBy,a.useAbsoluteLayout,a.useResizeColumns,a.useExpanded,a.usePagination),Ct=Ie;ze.current=nt;const kt=JSON.stringify(Object.keys(Ie.expanded));(0,n.useEffect)(()=>{ut.current?.resetAfterIndex(0)},[kt]),(0,n.useEffect)(()=>{Re||te(Oe)},[Oe,Re]),(0,n.useEffect)(()=>{if(!Re)return;if(!Re.show){te(void 0);return}if(De){const Zn=[];Zn[0]=lt[0]?.headers[0]?.filteredRows.length.toString()??Ee.length.toString(),te(Zn);return}const Sn=(0,M.jB)(lt[0].headers,(0,M.KF)(yt),Re,Ve);te(Sn)},[Re,Ve,Ie.filters,Ee]);let Jt=he-(ae+de);$e&&(Jt-=tt.cellHeight);const tn=Math.round(Jt/tt.rowHeight)-1;(0,n.useEffect)(()=>{tn<=0||Mt(tn)},[tn,Mt]),re(Ct,ut,Ee),se(Te,Fe);const Kt=(0,n.useCallback)(Sn=>{st(Sn-1)},[st]),cn=$e?$t.length:yt.length;let dn=null;if($e){const Sn=Ie.pageIndex*Ie.pageSize+1;let Zn=Sn+Ie.pageSize-1;const _n=ke<550;Zn>Ee.length&&(Zn=Ee.length),dn=n.createElement("div",{className:tt.paginationWrapper},n.createElement(l.t,{currentPage:Ie.pageIndex+1,numberOfPages:ct.length,showSmallVersion:_n,onNavigate:Kt}),_n?null:n.createElement("div",{className:tt.paginationSummary},Sn," - ",Zn," of ",Ee.length," rows"))}return n.createElement("div",{...at(),className:tt.table,"aria-label":Pe,role:"table",ref:Fe,style:{width:ke,height:he}},n.createElement(c.$,{hideVerticalTrack:!0},n.createElement("div",{className:tt.tableContentWrapper(zt)},!it&&n.createElement(w,{headerGroups:lt,showTypeIcons:Ae,tableStyles:tt}),cn>0?n.createElement("div",{"data-testid":o.wl.components.Panels.Visualization.Table.body,ref:Te},n.createElement(ne,{data:Ee,rows:yt,width:ke,cellHeight:Ye,headerHeight:ae,rowHeight:tt.rowHeight,itemCount:cn,pageIndex:Ie.pageIndex,listHeight:Jt,listRef:ut,tableState:Ie,prepareRow:wt,timeRange:Ne,onCellFilterAdded:Le,nestedDataField:Ue,tableStyles:tt,footerPaginationEnabled:!!$e,enableSharedCrosshair:je})):n.createElement("div",{style:{height:he-ae,width:ke},className:tt.noData},"No data"),J&&n.createElement(d.i,{isPaginationVisible:!!$e,footerValues:J,footerGroups:ft,totalColumnsWidth:zt,tableStyles:tt}))),dn)});pe.displayName="Table"},37300:(Q,A,e)=>{"use strict";e.d(A,{p:()=>a});var n=e(31733);const a=({cell:i,tableStyles:r,onCellFilterAdded:o,timeRange:g,userProps:u,frame:c})=>{const l=i.getCellProps(),d=i.column.field;if(!d?.display)return null;l.style&&(l.style.minWidth=l.style.width,l.style.justifyContent=i.column.justifyContent);let f=(typeof i.column.width=="number"?i.column.width:24)-r.cellPadding*2;return n.createElement(n.Fragment,null,i.render("Cell",{field:d,tableStyles:r,onCellFilterAdded:o,cellProps:l,innerWidth:f,timeRange:g,userProps:u,frame:c}))}},82687:(Q,A,e)=>{"use strict";e.d(A,{p:()=>a});var n=e(76932);function a(r,o){const g=r.colors.border.weak,u=r.colors.primary.border,c=6,l=i(r,o,c),d=l+2,f=28,m=(v,E,p,h)=>(0,n.css)({label:p?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${c}px`,width:"100%",height:`${d-1}px`,display:h?"block":"flex",...h?{overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}:{},alignItems:"center",borderRight:`1px solid ${g}`,color:v??void 0,background:E??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:p?"visible":void 0,width:p?"auto !important":void 0,boxShadow:p?`0 0 2px ${r.colors.primary.main}`:void 0,background:p?E??r.components.table.rowHoverBackground:void 0,zIndex:p?1:void 0,".cellActions":{visibility:"visible",opacity:1,width:"auto"}},a:{color:"inherit"},".cellActions":{display:"flex",position:p?void 0:"absolute",top:p?void 0:0,right:p?void 0:0,margin:p?r.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:r.spacing(1,.5,1,.5),background:E?"none":r.colors.emphasize(r.colors.background.primary,.03),svg:{color:v}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:r,cellHeight:l,buildCellContainerStyle:m,cellPadding:c,cellHeightInner:l-c*2,rowHeight:d,table:(0,n.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,n.css)({label:"thead",height:`${f}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,n.css)({label:"tfoot",height:`${f}px`,borderTop:`1px solid ${g}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,n.css)({label:"row",borderBottom:`1px solid ${g}`}),headerCell:(0,n.css)({height:"100%",padding:`0 ${c}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:r.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,n.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:r.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:r.spacing(.5),"&:hover":{textDecoration:"underline",color:r.colors.text.link}}),cellContainerText:m(void 0,void 0,!0,!0),cellContainerTextNoOverflow:m(void 0,void 0,!1,!0),cellContainer:m(void 0,void 0,!0,!1),cellContainerNoOverflow:m(void 0,void 0,!1,!1),cellText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,n.css)({marginLeft:r.spacing(.5)}),cellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:r.colors.text.link,fontWeight:r.typography.fontWeightMedium,"&:hover":{textDecoration:"underline",color:r.colors.text.link}}),cellLinkForColoredCell:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:r.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,n.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,n.css)({display:"flex",height:`${l}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,n.css)({color:r.colors.text.secondary,fontSize:r.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:r.spacing(0,1,0,2)}),tableContentWrapper:v=>{const E=v!==void 0?`${v}px`:"100%";return(0,n.css)({label:"tableContentWrapper",width:E,display:"flex",flexDirection:"column"})},row:(0,n.css)({label:"row",borderBottom:`1px solid ${g}`,"&:hover":{backgroundColor:r.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,n.css)({height:"100%"}),resizeHandle:(0,n.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:u,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:r.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,n.css)({marginRight:r.spacing(1),color:r.colors.text.secondary}),noData:(0,n.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${d}px`,cursor:"pointer"})}}function i(r,o,g){const u=r.typography.fontSize,c=r.typography.body.lineHeight;switch(o){case"md":return 42;case"lg":return 48;case"sm":default:return g*2+u*c}}},94361:(Q,A,e)=>{"use strict";e.d(A,{PT:()=>n,tE:()=>a});const n="=",a="!="},9596:(Q,A,e)=>{"use strict";e.d(A,{bc:()=>re,_9:()=>Ye,AF:()=>fe,KF:()=>it,f2:()=>Oe,S_:()=>le,Pu:()=>q,n0:()=>Pe,jB:()=>ke,E4:()=>ge,Hw:()=>$e,q7:()=>Re,nl:()=>Ee,QT:()=>he,mP:()=>pe});var n=e(69781),a=e(28454),i=e.n(a),r=e(85666),o=e(27957),g=e(98147),u=e(23498),c=e(86850),l=e(66542),d=e(28073),f=e(71199),m=e(31733),v=e(47423),E=e(56106),p=e(55632),h=e(42023),s=e(60470);const y={mode:v.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},D=Ne=>{const{field:je,innerWidth:ut,tableStyles:Fe,cell:Te,cellProps:Ve,row:tt}=Ne,ae=je.display(Te.value),J=le(je);let te=(0,E.xD)(je,!1);te.thresholds||(te={...te,thresholds:y});let de=f.QH.Gradient,be;J.type===f.h2.Gauge&&(de=J.mode??f.QH.Gradient,be=J.valueDisplayMode!==void 0?J.valueDisplayMode:f.M8.Text);const De=()=>(0,n.isFunction)(je.getLinks)?je.getLinks({valueRowIndex:tt.index}):[],Ue=!!De().length,We=Oe(je,ae,Te.row.index),et=ze=>{const{openMenu:_e,targetClassName:qe}=ze;return m.createElement(h.xf,{width:ut,height:Fe.cellHeightInner,field:te,display:je.display,text:{valueSize:14},value:ae,orientation:p.wm.Horizontal,theme:Fe.theme,alignmentFactors:We,onClick:_e,className:qe,itemSpacing:1,lcdCellWidth:8,displayMode:de,valueDisplayMode:be})};return m.createElement("div",{...Ve,className:Fe.cellContainer},Ue&&m.createElement(s.V,{links:De,style:{display:"flex",width:"100%"}},ze=>et(ze)),!Ue&&et({}))};var C=e(76932),P=e(37479),b=e(76067),T=e(87261),O=e(63956),R=e(51343),I=e(41354),M=e(79106),x=e(5334),L=e(5572),S=e(73642);function U({value:Ne,onDismiss:je,mode:ut}){let Fe=Ne;if((0,n.isString)(Ne))try{Ne=JSON.parse(Ne)}catch{}else Fe=JSON.stringify(Ne,null," ");let Te=Fe;return ut==="code"&&(Te=JSON.stringify(Ne,null," ")),m.createElement(L.u,{onDismiss:je,isOpen:!0,title:"Inspect value"},ut==="code"?m.createElement(S.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(Te&&Te.length)>100,value:Te,readOnly:!0}):m.createElement("pre",null,Te),m.createElement(L.u.ButtonRow,null,m.createElement(x.m,{icon:"copy",getText:()=>Te},"Copy to Clipboard")))}var N=e(94361);function w({field:Ne,cell:je,previewMode:ut,showFilters:Fe,onCellFilterAdded:Te}){const[Ve,tt]=(0,m.useState)(!1),ae=ge(Ne)==="flex-end",J=!!Ne.config.custom?.inspect,te={size:"sm",tooltipPlacement:"top"},de=(0,m.useCallback)(De=>{Te&&Te({key:Ne.name,operator:N.PT,value:je.value})},[je,Ne,Te]),be=(0,m.useCallback)(De=>{Te&&Te({key:Ne.name,operator:N.tE,value:je.value})},[je,Ne,Te]);return m.createElement(m.Fragment,null,m.createElement("div",{className:`cellActions ${ae?"cellActionsLeft":""}`},m.createElement(M.Lh,{spacing:"xs"},J&&m.createElement(I.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{tt(!0)},...te}),Fe&&m.createElement(I.h,{name:"search-plus",onClick:de,tooltip:"Filter for value",...te}),Fe&&m.createElement(I.h,{name:"search-minus",onClick:be,tooltip:"Filter out value",...te}))),Ve&&m.createElement(U,{mode:ut,value:je.value,onDismiss:()=>{tt(!1)}}))}const G=Ne=>{const{field:je,cell:ut,tableStyles:Fe,row:Te,cellProps:Ve,frame:tt}=Ne,ae=!!je.config.custom?.inspect,J=je.display(ut.value),te=Ne.onCellFilterAdded&&je.config.filterable,de=te&&ut.value!==void 0||ae,be=le(je),De=!!(0,T.i)(je,Te)?.length,Ue=(0,b.wW)(R._7),[We,et]=(0,m.useState)(!1);let ze;const _e=()=>{et(!1)},qe=()=>{et(!0)};if(be.type===f.h2.Custom){const ft=be.cellComponent;ze=m.createElement(ft,{field:je,value:ut.value,rowIndex:Te.index,frame:tt})}else m.isValidElement(ut.value)?ze=ut.value:ze=(0,c.zc)(J);const at=typeof ze=="string",lt=_(Fe,be,J,ae,at);if(at){let ft=Ve.style?.justifyContent;ft==="flex-end"?Ve.style={...Ve.style,textAlign:"right"}:ft==="center"&&(Ve.style={...Ve.style,textAlign:"center"})}return m.createElement("div",{...Ve,onMouseEnter:de?qe:void 0,onMouseLeave:de?_e:void 0,className:lt},!De&&(at?`${ze}`:m.createElement("div",{className:Fe.cellText},ze)),De&&m.createElement(s.V,{links:()=>(0,T.i)(je,Te)||[]},ft=>ft.openMenu?m.createElement("button",{className:(0,C.cx)(Ue,K(Fe,be,ft.targetClassName)),onClick:ft.openMenu},ze):m.createElement("div",{className:K(Fe,be,ft.targetClassName)},ze)),We&&de&&m.createElement(w,{...Ne,previewMode:"text",showFilters:te}))};function _(Ne,je,ut,Fe=!1,Te=!1){const Ve=Ne.theme.isDark?1:-.7;let tt,ae;if(je.type===f.h2.ColorText)tt=ut.color;else if(je.type===f.h2.ColorBackground){const J=je.mode??f.v7.Gradient;if(J===f.v7.Basic)tt=(0,O.bM)(ut.color,Ne.theme.isDark),ae=(0,P.Z)(ut.color).toRgbString();else if(J===f.v7.Gradient){const te=(0,P.Z)(ut.color).darken(10*Ve).spin(5);tt=(0,O.bM)(ut.color,Ne.theme.isDark),ae=`linear-gradient(120deg, ${te.toRgbString()}, ${ut.color})`}}return tt!==void 0||ae!==void 0?Ne.buildCellContainerStyle(tt,ae,!Fe,Te):Te?Fe?Ne.cellContainerTextNoOverflow:Ne.cellContainerText:Fe?Ne.cellContainerNoOverflow:Ne.cellContainer}function K(Ne,je,ut){return je.type===f.h2.Auto?(0,C.cx)(Ne.cellLink,ut):(0,C.cx)(Ne.cellLinkForColoredCell,ut)}var k=e(27632),z=e(99934),W=e(74771);function Z(Ne){const{cell:je,tableStyles:ut,cellProps:Fe}=Ne;let Te="";return je.value instanceof W.Z?Te=new z.Z().writeGeometry(je.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):je.value!=null&&(Te=`${je.value}`),m.createElement("div",{...Fe,className:ut.cellContainer},m.createElement("div",{className:ut.cellText,style:{fontFamily:"monospace"}},Te))}const H=Ne=>{const{field:je,cell:ut,tableStyles:Fe,row:Te,cellProps:Ve}=Ne,tt=je.display(ut.value),ae=!!(0,T.i)(je,Te)?.length,J=(0,b.wW)(R._7);return m.createElement("div",{...Ve,className:Fe.cellContainer},!ae&&m.createElement("img",{src:tt.text,className:Fe.imageCell,alt:""}),ae&&m.createElement(s.V,{style:{height:"100%"},links:()=>(0,T.i)(je,Te)||[]},te=>{const de=m.createElement("img",{src:tt.text,className:Fe.imageCell,alt:""});return te.openMenu?m.createElement(R.zx,{className:(0,C.cx)(J),onClick:te.openMenu},de):de}))};function X(Ne){const{cell:je,tableStyles:ut,cellProps:Fe,field:Te,row:Ve}=Ne,tt=!!Te.config.custom?.inspect,ae=(0,C.css)({cursor:"pointer",fontFamily:"monospace"});let J=je.value,te=J;if((0,n.isString)(J))try{J=JSON.parse(J)}catch{}else te=JSON.stringify(J,null," ");const de=!!(0,T.i)(Te,Ve)?.length,be=(0,b.wW)(R._7);return m.createElement("div",{...Fe,className:tt?ut.cellContainerNoOverflow:ut.cellContainer},m.createElement("div",{className:(0,C.cx)(ut.cellText,ae)},!de&&m.createElement("div",{className:ut.cellText},te),de&&m.createElement(s.V,{links:()=>(0,T.i)(Te,Ve)||[]},De=>De.openMenu?m.createElement(R.zx,{className:(0,C.cx)(be),onClick:De.openMenu},te):m.createElement(m.Fragment,null,te))),tt&&m.createElement(w,{...Ne,previewMode:"code"}))}var Y=e(49311);function ne({row:Ne,tableStyles:je}){return m.createElement("div",{className:je.expanderCell,...Ne.getToggleRowExpandedProps()},m.createElement(Y.J,{"aria-label":Ne.isExpanded?"Collapse row":"Expand row",name:Ne.isExpanded?"angle-down":"angle-right",size:"lg"}))}var se=e(75703);const re=50;function ge(Ne){if(!Ne)return"flex-start";if(Ne.config.custom)switch(Ne.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return Ne.type===r.fS.number?"flex-end":"flex-start"}function q(Ne,je,ut,Fe,Te,Ve){const tt=[];let ae=0;Fe&&(tt.push({Header:()=>null,id:"expander",Cell:ne,width:re,minWidth:re,filter:(te,de,be)=>[],justifyContent:"left",field:Ne.fields[0],sortType:"basic"}),je-=re);for(const[te,de]of Ne.fields.entries()){const be=de.config.custom||{};if(be.hidden||de.type===r.fS.nestedFrames)continue;be.width?je-=be.width:ae++;const De=We=>{switch(We){case r.fS.number:case r.fS.frame:return"number";case r.fS.time:return"basic";default:return"alphanumeric-insensitive"}},Ue=me(be.cellOptions?.type,de);tt.push({Cell:Ue,id:te.toString(),field:de,Header:be.hideHeader?"":(0,o.CZ)(de,Ne),accessor:(We,et)=>de.values[et],sortType:De(de.type),width:be.width,minWidth:be.minWidth??ut,filter:i()(oe(de)),justifyContent:ge(de),Footer:(0,k.c)(te,Te,Ve)})}let J=je/ae;for(let te=ae;te>0;te--)for(const de of tt)!de.width&&de.minWidth>J&&(de.width=de.minWidth,je-=de.width,ae-=1,J=je/ae);for(const te of tt)te.width||(te.width=J),te.minWidth=50;return tt}function me(Ne,je){switch(Ne){case f.h2.Custom:case f.h2.ColorText:case f.h2.ColorBackground:return G;case f.h2.Image:return H;case f.h2.Gauge:return D;case f.h2.Sparkline:return se.A;case f.h2.JSONView:return X}if(je.type===r.fS.geo)return Z;if(je.type===r.fS.frame){const ut=je.values[0];return(0,g.aY)(ut)&&(0,u.pP)(ut)?se.A:X}return je.type===r.fS.other?X:G}function oe(Ne){return function(je,ut,Fe){return je.length===0||!Fe||!Ne?je:je.filter(Te=>{if(!Te.values.hasOwnProperty(ut))return!1;const Ve=ve(Te,Ne);return Fe.find(tt=>tt.value===Ve)!==void 0})}}function fe(Ne,je){if(!je||Ne.length===0)return{};const ut={};for(let Fe=0;Fe<Ne.length;Fe++){const Te=ve(Ne[Fe],je);ut[Te||"(Blanks)"]=Te}return ut}function ve(Ne,je){if(!je||!Ne)return"";const ut=je.values[Ne.index],Fe=je.display?je.display(ut):ut;return je.display?(0,c.zc)(Fe):Fe}function pe(Ne){return Object.keys(Ne).reduce((je,ut)=>je.concat({value:Ne[ut],label:ut}),[]).sort(Me)}function Me(Ne,je){return Ne.label===void 0&&je.label===void 0?0:Ne.label===void 0&&je.label!==void 0?-1:Ne.label!==void 0&&je.label===void 0?1:Ne.label<je.label?-1:Ne.label>je.label?1:0}function Pe(Ne,je){return je?Ne.filter(ut=>je.some(Fe=>Fe.value===ut.value)):[]}function Ee(Ne,je,ut){return String(Ne.values[ut]).localeCompare(String(je.values[ut]),void 0,{sensitivity:"base"})}function he(Ne,je,ut){const Fe=Le(Ne.values[ut]),Te=Le(je.values[ut]);return Fe===Te?0:Fe>Te?1:-1}function Le(Ne){return(0,g.z4)(Ne)?Ne.value??Number.NEGATIVE_INFINITY:Ne==null||Ne===""||isNaN(Ne)?Number.NEGATIVE_INFINITY:typeof Ne=="number"?Ne:Number(Ne)}function ke(Ne,je,ut,Fe){return Ae(Ne),Ne.map((Te,Ve)=>{if(Te?.field?.type!==r.fS.number)return Ve===0&&ut.reducer&&ut.reducer.length>0?l.TB.get(ut.reducer[0]).name:void 0;let tt=(0,n.clone)(Te.field);return tt.values=je[Te.id],tt.state=void 0,Te.field=tt,ut.fields&&ut.fields.length>0?ut.fields.find(J=>J===Te?.field?.name)?ot(Te.field,ut.reducer,Fe):void 0:ot(Te.field,ut.reducer||[],Fe)})}function ot(Ne,je,ut){const Fe=Ne.display??(0,d.U)({field:Ne,theme:ut}),Te=je[0],Ve=(0,l.Kx)({field:Ne,reducers:je})[Te];return(0,c.zc)(Fe(Ve))}function it(Ne){const je=[];for(const ut in Ne)for(const[Fe,Te]of Object.entries(Ne[ut].values))je[Fe]===void 0&&(je[Fe]=[]),je[Fe].push(Te);return je}const ce={type:f.h2.Auto};function le(Ne){return Ne.config.custom?.displayMode?Re(Ne.config.custom?.displayMode):Ne.config.custom?.cellOptions?Ne.config.custom.cellOptions:ce}function Re(Ne){switch(Ne){case"basic":case"gradient-gauge":case"lcd-gauge":let je=f.QH.Basic;return Ne==="gradient-gauge"?je=f.QH.Gradient:Ne==="lcd-gauge"&&(je=f.QH.Lcd),{type:f.h2.Gauge,mode:je};case"color-background":case"color-background-solid":let ut=f.v7.Basic;return Ne==="color-background"&&(ut=f.v7.Gradient),{type:f.h2.ColorBackground,mode:ut};default:return{type:Ne}}}function Ae(Ne){const je=Ne.findIndex((ut,Fe)=>ut?.id!==String(Fe));je===-1||Ne[je]?.id==="expander"||(Ne.splice(je,0,{id:String(je)}),Ae(Ne))}function Oe(Ne,je,ut){let Fe=Ne.state?.alignmentFactors;if(Fe)return Fe.text.length<je.text.length&&(Fe.text=je.text),Fe;{Fe={...je};const Te=Math.min(Ne.values.length,ut+1e3);for(let Ve=ut+1;Ve<Te;Ve++)Ne.display(Ne.values[Ve]).text.length>Fe.text.length&&(Fe.text=je.text);return Ne.state?Ne.state.alignmentFactors=Fe:Ne.state={alignmentFactors:Fe},Fe}}function $e(Ne,je,ut){return Math.abs(Math.floor(Ne)-je)<ut}function Ye(Ne){let je=-Number.MAX_VALUE,ut=Number.MAX_VALUE;if(Ne.values.length<2)return 0;for(let Fe=0;Fe<Ne.values.length;Fe++){const Te=Ne.values[Fe];Te>je&&(je=Te),Te<ut&&(ut=Te)}return(je-ut)/Ne.values.length}},50575:(Q,A,e)=>{"use strict";e.d(A,{w:()=>f});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(67246),g=e(76067),u=e(33227),c=e(49311),l=e(28718);class d extends r.PureComponent{constructor(E){super(E),this.readCSV=(0,a.debounce)(()=>{const{config:s}=this.props,{text:y}=this.state;this.setState({data:(0,o.uP)(y,{config:s})})},150),this.onTextChange=s=>{this.setState({text:s.target.value})};const{text:p,config:h}=E;this.state={text:p,data:(0,o.uP)(p,{config:h})}}componentDidUpdate(E,p){const{text:h}=this.state;(h!==p.text||this.props.config!==E.config)&&this.readCSV(),this.props.text!==E.text&&this.props.text!==h&&this.setState({text:this.props.text}),this.state.data!==p.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:E,height:p,theme:h}=this.props,{data:s}=this.state,y=m(h);return r.createElement("div",{className:y.tableInputCsv},r.createElement(l.K,{style:{width:E,height:p},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:y.textarea}),s&&r.createElement("footer",{className:y.footer},s.map((D,C)=>r.createElement("span",{key:C},"Rows:",D.length,", Columns:",D.fields.length," \xA0",r.createElement(c.J,{name:"check-circle"})))))}}const f=(0,g.HE)(d);f.displayName="TableInputCSV";const m=(0,u.B)(v=>({tableInputCsv:(0,n.css)({position:"relative"}),textarea:(0,n.css)({height:"100%",width:"100%"}),footer:(0,n.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:v.colors.success.main,padding:`1px ${v.spacing(.5)}`,fontSize:"80%"})}))},2431:(Q,A,e)=>{"use strict";e.d(A,{A:()=>o});var n=e(76932),a=e(31733),i=e(86850),r=e(76067);const o=({value:u})=>{const c=(0,r.wW)(g);return a.createElement("span",{className:c.counter},(0,i.SP)(u,0).text)},g=u=>({counter:(0,n.css)({label:"counter",marginLeft:u.spacing(1),borderRadius:u.spacing(3),backgroundColor:u.colors.action.hover,padding:u.spacing(.25,1),color:u.colors.text.secondary,fontWeight:u.typography.fontWeightMedium,fontSize:u.typography.size.sm})})},4981:(Q,A,e)=>{"use strict";e.d(A,{O:()=>l});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(83998),g=e(51343),u=e(49311),c=e(2431);const l=a.forwardRef(({label:f,active:m,icon:v,onChangeTab:E,counter:p,suffix:h,className:s,href:y,...D},C)=>{const P=(0,r.wW)(d),b=(0,r.wW)(g.gN),T=()=>a.createElement(a.Fragment,null,v&&a.createElement(u.J,{name:v}),f,typeof p=="number"&&a.createElement(c.A,{value:p}),h&&a.createElement(h,{className:P.suffix})),R={className:(0,n.cx)(b,P.link,m?P.activeStyle:P.notActive),...D,onClick:E,"aria-label":D["aria-label"]||i.wl.components.Tab.title(f),role:"tab","aria-selected":m};return y?a.createElement("div",{className:P.item},a.createElement("a",{...R,href:y,ref:C},T())):a.createElement("div",{className:P.item},a.createElement("button",{...R,type:"button",ref:C},T()))});l.displayName="Tab";const d=f=>({item:(0,n.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:f.spacing(.5)}),link:(0,n.css)({color:f.colors.text.secondary,padding:f.spacing(1,1.5,.5),borderRadius:f.shape.radius.default,display:"block",height:"100%",svg:{marginRight:f.spacing(1)},"&:focus-visible":(0,o.getFocusStyles)(f),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:f.shape.radius.default,bottom:0}}),notActive:(0,n.css)({"a:hover, &:hover, &:focus":{color:f.colors.text.primary,"&::before":{backgroundColor:f.colors.action.hover}}}),activeStyle:(0,n.css)({label:"activeTabStyle",color:f.colors.text.primary,overflow:"hidden","&::before":{backgroundImage:f.colors.gradients.brandHorizontal}}),suffix:(0,n.css)({marginLeft:f.spacing(1)})})},31805:(Q,A,e)=>{"use strict";e.d(A,{I:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g,className:u,...c})=>{const l=(0,i.wW)(o);return a.createElement("div",{...c,className:(0,n.cx)(l.tabContent,u)},g)},o=g=>({tabContent:(0,n.css)({background:g.colors.background.primary})})},88062:(Q,A,e)=>{"use strict";e.d(A,{J:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=a.forwardRef(({children:g,className:u,hideBorder:c=!1},l)=>{const d=(0,i.wW)(o);return a.createElement("div",{className:(0,n.cx)(d.tabsWrapper,c&&d.noBorder,u),ref:l},a.createElement("div",{className:d.tabs,role:"tablist"},g))}),o=g=>({tabsWrapper:(0,n.css)({borderBottom:`1px solid ${g.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,n.css)({borderBottom:0}),tabs:(0,n.css)({position:"relative",display:"flex",height:`${g.components.menuTabs.height}px`,alignItems:"center"})});r.displayName="TabsBar"},53534:(Q,A,e)=>{"use strict";e.d(A,{L:()=>u});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(49311),g=e(2431);const u=a.forwardRef(({label:l,active:d,icon:f,counter:m,className:v,suffix:E,onChangeTab:p,href:h,...s},y)=>{const D=(0,r.wW)(c),C=()=>a.createElement(a.Fragment,null,f&&a.createElement(o.J,{name:f}),l,typeof m=="number"&&a.createElement(g.A,{value:m}),E&&a.createElement(E,{className:D.suffix})),P=(0,n.cx)(D.link,d&&D.activeStyle);return a.createElement("a",{href:h,className:P,...s,onClick:p,"aria-label":s["aria-label"]||i.wl.components.Tab.title(l),role:"tab","aria-selected":d,ref:y},C())});u.displayName="Tab";const c=l=>({link:(0,n.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:l.colors.text.primary,svg:{marginRight:l.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,n.css)({label:"activeTabStyle",color:l.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:l.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,n.css)({marginLeft:l.spacing(1)})})},14496:(Q,A,e)=>{"use strict";e.d(A,{V:()=>d});var n=e(76932),a=e(31733),i=e(49876),r=e(76067),o=e(7225),g=e(95885),u=e(49311);const c=(0,a.forwardRef)(({name:v,onClick:E,icon:p,className:h,colorIndex:s,...y},D)=>{const C=(0,r.l4)(),P=m(C,v,s),b=O=>{O.preventDefault(),O.stopPropagation(),E?.(v,O)},T=(0,n.cx)(P.wrapper,h,{[P.hover]:E!==void 0});return E?a.createElement("button",{...y,className:T,onClick:b,ref:D},p&&a.createElement(u.J,{name:p}),v):a.createElement("span",{...y,className:T,ref:D},p&&a.createElement(u.J,{name:p}),v)});c.displayName="Tag";const l=({rootProps:v})=>{const E=(0,r.wW)(f);return a.createElement(i.Z,{width:60,height:22,containerClassName:E.container,...v})},d=(0,g.y)(c,l),f=()=>({container:(0,n.css)({lineHeight:1})}),m=(v,E,p)=>{let h;return p===void 0?h=(0,o.Bx)(E):h=(0,o.vm)(p),{wrapper:(0,n.css)({appearance:"none",borderStyle:"none",fontWeight:v.typography.fontWeightMedium,fontSize:v.typography.size.sm,lineHeight:v.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:h.color,color:v.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:v.shape.radius.default}),hover:(0,n.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},60196:(Q,A,e)=>{"use strict";e.d(A,{P:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(95885),o=e(14496);const g=(0,a.memo)((0,a.forwardRef)(({displayMax:f,tags:m,icon:v,onClick:E,className:p,getAriaLabel:h,getColorIndex:s},y)=>{const D=(0,i.l4)(),C=d(D,!!(f&&f>0)),P=m.length,b=f?m.slice(0,f):m;return a.createElement("ul",{className:(0,n.cx)(C.wrapper,p),"aria-label":"Tags",ref:y},b.map((T,O)=>a.createElement("li",{className:C.li,key:T},a.createElement(o.V,{name:T,icon:v,onClick:E,"aria-label":h?.(T,O),"data-tag-id":O,colorIndex:s?.(T,O)}))),f&&f>0&&P-f>0&&a.createElement("span",{className:C.moreTagsLabel},"+ ",P-f))}));g.displayName="TagList";const u=({rootProps:f})=>{const m=(0,i.wW)(l);return a.createElement("div",{className:m.container,...f},a.createElement(o.V.Skeleton,null),a.createElement(o.V.Skeleton,null))},c=(0,r.y)(g,u),l=f=>({container:(0,n.css)({display:"flex",gap:f.spacing(1)})}),d=(f,m)=>({wrapper:(0,n.css)({position:"relative",alignItems:m?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:m?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,n.css)({color:f.colors.text.secondary,fontSize:f.typography.size.sm}),li:(0,n.css)({listStyle:"none"})})},98572:(Q,A,e)=>{"use strict";e.d(A,{B:()=>d});var n=e(76932),a=e(31733),i=e(76067),r=e(51343),o=e(64516),g=e(7225),u=e(41354);const c=({name:m,disabled:v,onRemove:E})=>{const{color:p,borderColor:h}=(0,a.useMemo)(()=>(0,g.Bx)(m),[m]),s=(0,i.wW)(l);return a.createElement("li",{className:s.itemStyle,style:{backgroundColor:p,borderColor:h}},a.createElement("span",{className:s.nameStyle},m),a.createElement(u.h,{name:"times",size:"lg",disabled:v,tooltip:`Remove "${m}" tag`,onClick:()=>E(m),className:s.buttonStyles}))},l=m=>{const v=m.spacing.gridSize*3;return{itemStyle:(0,n.css)({display:"flex",gap:"3px",alignItems:"center",height:`${v}px`,lineHeight:`${v-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:m.shape.radius.default,padding:`0 ${m.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:m.typography.size.sm}),nameStyle:(0,n.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,n.css)({margin:0,"&:hover::before":{display:"none"}})}},d=({placeholder:m="New tag (enter key to add)",tags:v=[],onChange:E,width:p,className:h,disabled:s,addOnBlur:y,invalid:D,id:C})=>{const[P,b]=(0,a.useState)(""),T=(0,i.wW)(f),O=(0,i.l4)(),R=(0,a.useCallback)(S=>{b(S.target.value)},[]),I=S=>{E(v.filter(U=>U!==S))},M=S=>{S?.preventDefault(),v.includes(P)||E(v.concat(P)),b("")},x=()=>{y&&P&&M()},L=S=>{S.key==="Enter"&&P!==""&&M(S)};return a.createElement("div",{className:(0,n.cx)(T.wrapper,h,p?(0,n.css)({width:O.spacing(p)}):"")},a.createElement(o.I,{id:C,disabled:s,placeholder:m,onChange:R,value:P,onKeyDown:L,onBlur:x,invalid:D,suffix:a.createElement(r.zx,{fill:"text",className:T.addButtonStyle,onClick:M,size:"md",disabled:P.length<=0},"Add")}),v?.length>0&&a.createElement("ul",{className:T.tags},v.map(S=>a.createElement(c,{key:S,name:S,onRemove:I,disabled:s}))))},f=m=>({wrapper:(0,n.css)({minHeight:m.spacing(4),display:"flex",flexDirection:"column",gap:m.spacing(1),flexWrap:"wrap"}),tags:(0,n.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:m.spacing(.5)}),addButtonStyle:(0,n.css)({margin:`0 -${m.spacing(1)}`})})},36717:(Q,A,e)=>{"use strict";e.d(A,{x:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(62308),o=e(58037);const g=a.forwardRef(({childElement:d,children:f},m)=>{const[v,E]=(0,a.useState)(!1),p=(0,a.useRef)(null);(0,a.useImperativeHandle)(m,()=>p.current);const h=(0,a.useMemo)(()=>new ResizeObserver(y=>{for(const D of y)D.target.clientWidth&&D.target.scrollWidth&&(D.target.scrollWidth>D.target.clientWidth&&E(!0),D.target.scrollWidth<=D.target.clientWidth&&E(!1))}),[]);(0,a.useEffect)(()=>{const{current:y}=p;return y&&h.observe(y),()=>{h.disconnect()}},[E,h]);const s=y=>typeof y=="string"?y:r.renderToStaticMarkup(a.createElement(a.Fragment,null,y)).replace(/(<([^>]+)>)/gi,"");return v?a.createElement(o.u,{ref:p,content:s(f)},d(void 0)):d(p)});g.displayName="TruncatedText";var u=e(27564);const c=a.forwardRef(({element:d="span",variant:f,weight:m,color:v,truncate:E,italic:p,textAlignment:h,children:s,...y},D)=>{const C=(0,i.wW)(l,d,f,v,m,E,p,h),P=b=>(0,a.createElement)(d,{...y,style:void 0,className:C,ref:b},s);return!E||d==="span"?P(void 0):a.createElement(g,{childElement:P,children:s,ref:D})});c.displayName="Text";const l=(d,f,m,v,E,p,h,s)=>(0,n.css)([{margin:0,padding:0,...(0,u.jt)(d,f,m)},m&&{...d.typography[m]},v&&{color:(0,u.Jx)(v,d)},E&&{fontWeight:(0,u.RC)(E,d)},p&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},h&&{fontStyle:"italic"},s&&{textAlign:s}])},27564:(Q,A,e)=>{"use strict";e.d(A,{Jx:()=>a,RC:()=>n,jt:()=>i});const n=(r,o)=>{switch(r){case"bold":return o.typography.fontWeightBold;case"medium":return o.typography.fontWeightMedium;case"light":return o.typography.fontWeightLight;case"regular":case void 0:return o.typography.fontWeightRegular}},a=(r,o)=>{switch(r){case"error":return o.colors.error.text;case"success":return o.colors.success.text;case"info":return o.colors.info.text;case"warning":return o.colors.warning.text;default:return r?o.colors.text[r]:void 0}},i=(r,o,g)=>{if(g)return r.typography[g];switch(o){case"span":return;case"h1":return r.typography.h1;case"h2":return r.typography.h2;case"h3":return r.typography.h3;case"h4":return r.typography.h4;case"h5":return r.typography.h5;case"h6":return r.typography.h6;default:return r.typography.body}}},28718:(Q,A,e)=>{"use strict";e.d(A,{K:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(90119);const o=a.forwardRef(({invalid:u,className:c,...l},d)=>{const f=(0,i.wW)(g,u);return a.createElement("textarea",{...l,className:(0,n.cx)(f.textarea,c),ref:d})}),g=(u,c=!1)=>({textarea:(0,n.cx)((0,r.RK)(u),(0,r.GL)(u),(0,n.css)({display:"block",borderRadius:u.shape.radius.default,padding:`${u.spacing.gridSize/4}px ${u.spacing.gridSize}px`,width:"100%",borderColor:c?u.colors.error.border:u.components.input.borderColor}))});o.displayName="TextArea"},65930:(Q,A,e)=>{"use strict";e.d(A,{P:()=>d});var n=e(76932),a=e(67537),i=e(4587),r=e(69710),o=e(8496),g=e(31733),u=e(76067),c=e(17688),l=e(41354);const d=g.memo(({children:m,theme:v="info",placement:E="auto",content:p,title:h,closeButton:s=!0,onClose:y,footer:D,fitContent:C=!1,onOpen:P,show:b})=>{const T=(0,g.useRef)(null),O=(0,u.l4)(),R=(0,u.wW)(f),I=R[v],[M,x]=(0,g.useState)(b),L=b??M,S=[(0,a.cv)(8),(0,a.RR)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,a.uY)(),(0,i.x7)({element:T})],{context:U,refs:N,floatingStyles:w}=(0,r.YF)({open:L,placement:(0,c.x)(E),onOpenChange:z=>{b===void 0&&x(z),z?P?.():y?.()},middleware:S,whileElementsMounted:o.Me,strategy:"fixed"}),G=(0,r.eS)(U),_=(0,r.bQ)(U),{getReferenceProps:K,getFloatingProps:k}=(0,r.NI)([_,G]);return g.createElement(g.Fragment,null,g.cloneElement(m,{ref:N.setReference,tabIndex:0,"aria-expanded":L,...K()}),L&&g.createElement(r.wD,{context:U,modal:!1,closeOnFocusOut:!1},g.createElement("div",{"data-testid":"toggletip-content",className:(0,n.cx)(I.container,{[R.fitContent]:C}),ref:N.setFloating,style:w,...k()},g.createElement(r.Y$,{strokeWidth:.3,stroke:O.colors.border.weak,className:I.arrow,ref:T,context:U}),!!h&&g.createElement("div",{className:I.header},h),s&&g.createElement("div",{className:I.headerClose},g.createElement(l.h,{"aria-label":"Close",name:"times","data-testid":"toggletip-header-close",onClick:()=>{x(!1),y?.()}})),g.createElement("div",{className:I.body},(typeof p=="string"||g.isValidElement(p))&&p,typeof p=="function"&&p({})),!!D&&g.createElement("div",{className:I.footer},D))))});d.displayName="Toggletip";const f=m=>{const v=(0,c.k)(m,m.colors.background.primary,m.colors.border.weak,m.components.tooltip.text,{topBottom:2,rightLeft:2}),E=(0,c.k)(m,m.colors.error.main,m.colors.error.main,m.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:v,error:E,fitContent:(0,n.css)({maxWidth:"fit-content"})}}},73351:(Q,A,e)=>{"use strict";e.d(A,{h:()=>d});var n=e(76932),a=e(31733),i=e(7820),r=e(21568),o=e(76067),g=e(83998),u=e(51343),c=e(49311),l=e(58037);const d=(0,a.forwardRef)(({tooltip:E,icon:p,iconSize:h,className:s,children:y,imgSrc:D,imgAlt:C,fullWidth:P,isOpen:b,narrow:T,variant:O="default",iconOnly:R,"aria-label":I,isHighlighted:M,...x},L)=>{const S=(0,o.wW)(v),U=(0,n.cx)({[S.button]:!0,[S.buttonFullWidth]:P,[S.narrow]:T},S[O],s),N=(0,n.cx)({[S.content]:!0,[S.contentWithIcon]:!!p,[S.contentWithRightIcon]:b!==void 0}),w=a.createElement("button",{ref:L,className:U,"aria-label":f(I,E),"aria-expanded":b,...x},m(p,h),D&&a.createElement("img",{className:S.img,src:D,alt:C??""}),y&&!R&&a.createElement("div",{className:N},y),b===!1&&a.createElement(c.J,{name:"angle-down"}),b===!0&&a.createElement(c.J,{name:"angle-up"}),M&&a.createElement("div",{className:S.highlight}));return E?a.createElement(l.u,{ref:L,content:E,placement:"bottom"},w):w});d.displayName="ToolbarButton";function f(E,p){return E||(p?r.wl.components.PageToolbar.item(p):void 0)}function m(E,p){return E?(0,i.Mo)(E)?a.createElement(c.J,{name:E,size:`${p||"lg"}`}):E:null}const v=E=>{const p=(0,u.c9)(E,"primary","solid"),h=(0,u.c9)(E,"destructive","solid"),s=(0,n.css)({color:E.colors.text.primary,background:E.colors.secondary.main,"&:hover":{color:E.colors.text.primary,background:E.colors.secondary.shade,border:`1px solid ${E.colors.border.medium}`}});return{button:(0,n.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:E.spacing(E.components.height.md),padding:E.spacing(0,1),borderRadius:E.shape.radius.default,lineHeight:`${E.components.height.md*E.spacing.gridSize-2}px`,fontWeight:E.typography.fontWeightMedium,border:`1px solid ${E.colors.secondary.border}`,whiteSpace:"nowrap",transition:E.transitions.create(["background","box-shadow","border-color","color"],{duration:E.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,g.getFocusStyles)(E),zIndex:1},"&:focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(E),"&:hover":{boxShadow:E.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:E.colors.action.disabledOpacity,background:E.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:E.colors.text.disabled,background:E.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,n.css)({color:E.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:E.colors.text.primary,background:E.colors.background.secondary}}),canvas:s,active:(0,n.cx)(s,(0,n.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:E.shape.radius.default,backgroundImage:E.colors.gradients.brandHorizontal}})),primary:(0,n.css)(p),destructive:(0,n.css)(h),narrow:(0,n.css)({padding:E.spacing(0,.5)}),img:(0,n.css)({width:"16px",height:"16px",marginRight:E.spacing(1)}),buttonFullWidth:(0,n.css)({flexGrow:1}),content:(0,n.css)({flexGrow:1}),contentWithIcon:(0,n.css)({display:"none",paddingLeft:E.spacing(1),[`@media ${g.mediaUp(E.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,n.css)({paddingRight:E.spacing(.5)}),highlight:(0,n.css)({backgroundColor:E.colors.success.main,borderRadius:E.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},71460:(Q,A,e)=>{"use strict";e.d(A,{R:()=>l});var n=e(76932),a=e(16749),i=e(57353),r=e(68420),o=e(31733),g=e(76067),u=e(25108),c=e(73351);const l=(0,o.forwardRef)(({alignment:f="left",className:m,children:v,...E},p)=>{const h=o.Children.toArray(v).filter(L=>L!=null),[s,y]=(0,o.useState)(Array(h.length).fill(!1)),D=(0,o.useRef)(null),[C,P]=(0,o.useState)(!1),b=(0,o.useRef)(null),T=(0,o.createRef)(),{overlayProps:O}=(0,r.Ir)({onClose:()=>P(!1),isDismissable:!0,isOpen:C,shouldCloseOnInteractOutside:L=>{const S=(0,u.RN)();return!b.current?.contains(L)&&!S.contains(L)}},T),{dialogProps:R}=(0,a.R)({},T),I=(0,g.l4)(),M=f==="left"?s.indexOf(!1)-1:s.length,x=d(I,M,f);return(0,o.useLayoutEffect)(()=>{const L=new IntersectionObserver(S=>{S.forEach(U=>{if(U.target instanceof HTMLElement&&U.target.parentNode){const N=Array.prototype.indexOf.call(U.target.parentNode.children,U.target);y(w=>{const G=[...w];return G[N]=U.isIntersecting,G})}})},{threshold:1,root:D.current});return D.current&&Array.from(D.current.children).forEach(S=>{S instanceof HTMLElement&&S!==b.current&&L.observe(S)}),()=>L.disconnect()},[v]),o.createElement("div",{ref:D,className:(0,n.cx)(x.container,m),...E},h.map((L,S)=>o.createElement("div",{key:S,style:{order:S,visibility:s[S]?"visible":"hidden"},className:x.childWrapper},L)),s.includes(!1)&&o.createElement("div",{ref:b,className:x.overflowButton},o.createElement(c.h,{variant:C?"active":"default",tooltip:"Show more items",onClick:()=>P(!C),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),C&&o.createElement(i.MT,{contain:!0,autoFocus:!0},o.createElement("div",{className:x.overflowItems,ref:T,...O,...R},h.map((L,S)=>!s[S]&&L)))))});l.displayName="ToolbarButtonRow";const d=(f,m,v)=>({overflowButton:(0,n.css)({order:m}),overflowItems:(0,n.css)({alignItems:"center",backgroundColor:f.colors.background.primary,borderRadius:f.shape.radius.default,boxShadow:f.shadows.z3,display:"flex",flexWrap:"wrap",gap:f.spacing(1),marginTop:f.spacing(1),maxWidth:"80vw",padding:f.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:f.zIndex.sidemenu}),container:(0,n.css)({alignItems:"center",display:"flex",gap:f.spacing(1),justifyContent:v==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,n.css)({alignItems:"center",display:"flex",gap:f.spacing(1)})})},20425:(Q,A,e)=>{"use strict";e.d(A,{J:()=>c});var n=e(31733),a=e(57962),i=e(13076),r=e(29691),o=e(25108);const g={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},u={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class c extends n.PureComponent{render(){const{content:d,show:f,placement:m,className:v,wrapperClassName:E,renderArrow:p,referenceElement:h,...s}=this.props;return n.createElement(a.dK,null,n.createElement(r.ZP,{in:f,timeout:100,mountOnEnter:!0,unmountOnExit:!0},y=>n.createElement(o.h_,null,n.createElement(i.r,{placement:m,referenceElement:h,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:D,style:C,placement:P,arrowProps:b,update:T})=>n.createElement("div",{ref:D,style:{...C,...g,...u[y]},"data-placement":P,className:`${E}`,...s},n.createElement("div",{className:v},typeof d=="string"&&d,n.isValidElement(d)&&n.cloneElement(d),typeof d=="function"&&d({updatePopperPosition:T}),p&&p({arrowProps:b,placement:P})))))))}}},72336:(Q,A,e)=>{"use strict";e.d(A,{D:()=>a});var n=e(31733);class a extends n.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:r,content:o,placement:g="auto"}=this.props,{show:u}=this.state;return r(this.showPopper,this.hidePopper,{show:u,placement:g,content:o})}}},58037:(Q,A,e)=>{"use strict";e.d(A,{u:()=>d});var n=e(67537),a=e(4587),i=e(69710),r=e(8496),o=e(31733),g=e(21568),u=e(76067),c=e(17688),l=e(25108);const d=o.forwardRef(({children:m,theme:v,interactive:E,show:p,placement:h,content:s},y)=>{const D=(0,o.useRef)(null),[C,P]=(0,o.useState)(p),b=p??C,T=[(0,n.cv)(8),(0,n.RR)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,n.uY)(),(0,a.x7)({element:D})],{context:O,refs:R,floatingStyles:I}=(0,i.YF)({open:b,placement:(0,c.x)(h),onOpenChange:P,middleware:T,whileElementsMounted:r.Me}),M=(0,o.useId)(),x=(0,i.XI)(O,{delay:{close:E?100:0},move:!1}),L=(0,i.KK)(O),S=(0,i.bQ)(O),{getReferenceProps:U,getFloatingProps:N}=(0,i.NI)([S,x,L]),w=typeof s=="function",_=(0,u.wW)(f)[v??"info"],K=(0,o.useCallback)(z=>{R.setReference(z),typeof y=="function"?y(z):y&&(y.current=z)},[y,R]),k="aria-label"in m.props&&m.props["aria-label"]===s;return o.createElement(o.Fragment,null,o.cloneElement(m,{ref:K,tabIndex:0,"aria-describedby":!k&&b?M:void 0,...U()}),b&&o.createElement(l.h_,null,o.createElement("div",{ref:R.setFloating,style:I,...N()},o.createElement(i.Y$,{className:_.arrow,ref:D,context:O}),o.createElement("div",{"data-testid":g.wl.components.Tooltip.container,id:M,role:"tooltip",className:_.container},typeof s=="string"&&s,o.isValidElement(s)&&o.cloneElement(s),w&&s({})))))});d.displayName="Tooltip";const f=m=>{const v=(0,c.k)(m,m.components.tooltip.background,m.components.tooltip.background,m.components.tooltip.text,{topBottom:.5,rightLeft:1}),E=(0,c.k)(m,m.colors.error.main,m.colors.error.main,m.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:v,["info-alt"]:v,error:E}}},60089:(Q,A,e)=>{"use strict";e.d(A,{H:()=>i});var n=e(31733);function a(r,o){const g=[];return r.forEach(u=>{g.push(u.start,u.end+1)}),g[0]!==0&&g.unshift(0),g[g.length-1]!==o&&g.push(o),g}const i=r=>{let{highlightParts:o,text:g,highlightClassName:u}=r;if(!o?.length)return null;let c=[],l=a(o,g.length),d=o[0].start===0;for(let f=1;f<l.length;f++){let m=l[f-1],v=l[f];c.push((0,n.createElement)(d?"mark":"span",{key:f-1,className:d?u:void 0},g.substring(m,v))),d=!d}return n.createElement("div",null,c)}},40154:(Q,A,e)=>{"use strict";e.d(A,{n:()=>o});var n=e(31733),a=e(86850),i=e(3166);function r(g){return`Custom unit: ${g}`}class o extends n.PureComponent{constructor(){super(...arguments),this.onChange=u=>{this.props.onChange(u.value)}}render(){const{value:u,width:c}=this.props;let l;const f=(0,a.QW)().map(m=>{const v=m.submenu.map(E=>{const p={label:E.text,value:E.value};return E.value===u&&(l=p),p});return{label:m.text,value:m.text,items:v}});return u&&!l&&(l={value:u,label:u}),n.createElement(i.v,{width:c,initialValue:l&&l.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:r,options:f,placeholder:"Choose",onSelect:this.props.onChange})}}},10851:(Q,A,e)=>{"use strict";e.d(A,{q:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(46591);const o=({src:u,alt:c,width:l,height:d})=>{const f=(0,i.wW)(g,l,d);return a.createElement("img",{className:f.image,src:u,alt:c})},g=(u,c=3,l=3)=>({image:(0,n.css)([(0,r.U)(u,c,d=>({width:u.spacing(d)})),(0,r.U)(u,l,d=>({height:u.spacing(d)})),{borderRadius:u.shape.radius.circle}])})},75634:(Q,A,e)=>{"use strict";e.d(A,{t:()=>c});var n=e(76932),a=e(31733),i=e(74011),r=e(76067),o=e(58037);const g=f=>{const v=(0,i.CQ)(f).diff((0,i.CQ)(),"hours",!1);return`Active last ${(Math.floor(-v/24)+1)*24}h`},u=f=>{if(!f)return"";const[m,v]=f.split(" ");return`${m?.[0]??""}${v?.[0]??""}`.toUpperCase()},c=({userView:f,className:m,children:v,onClick:E,showTooltip:p=!0})=>{const{user:h,lastActiveAt:s}=f,y=(0,i.CQ)(s).diff((0,i.CQ)(),"minutes",!0)>=-15,D=(0,r.l4)(),C=(0,a.useMemo)(()=>d(D,y),[D,y]),P=a.createElement("button",{type:"button",onClick:E,className:(0,n.cx)(C.container,E&&C.pointer,m),"aria-label":`${h.name} icon`},v?a.createElement("div",{className:(0,n.cx)(C.content,C.textContent)},v):h.avatarUrl?a.createElement("img",{className:C.content,src:h.avatarUrl,alt:`${h.name} avatar`}):a.createElement("div",{className:(0,n.cx)(C.content,C.textContent)},u(h.name)));if(p){const b=a.createElement("div",{className:C.tooltipContainer},a.createElement("div",{className:C.tooltipName},h.name),a.createElement("div",{className:C.tooltipDate},y?a.createElement("div",{className:C.dotContainer},a.createElement("span",null,"Active last 15m"),a.createElement("span",{className:C.dot})):g(s)));return a.createElement(o.u,{content:b},P)}else return P},l=f=>`0 0 0 1px ${f}`,d=(f,m)=>{const v=m?f.colors.primary.main:f.colors.border.medium,E=m?f.colors.primary.text:f.colors.border.strong;return{container:(0,n.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:f.shape.radius.circle,"& > *":{borderRadius:f.shape.radius.circle}}),content:(0,n.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${f.colors.background.primary} solid`,boxShadow:l(v),backgroundClip:"padding-box","&:hover":{boxShadow:l(E)}}),textContent:(0,n.css)({background:f.colors.background.primary,padding:0,color:f.colors.text.secondary,textAlign:"center",fontSize:f.typography.size.sm,"&:focus":{boxShadow:l(v)}}),tooltipContainer:(0,n.css)({textAlign:"center",padding:f.spacing(0,1)}),tooltipName:(0,n.css)({fontWeight:f.typography.fontWeightBold}),tooltipDate:(0,n.css)({fontWeight:f.typography.fontWeightRegular}),dotContainer:(0,n.css)({display:"flex",alignItems:"center"}),dot:(0,n.css)({height:"6px",width:"6px",backgroundColor:f.colors.primary.main,borderRadius:f.shape.radius.circle,display:"inline-block",marginLeft:f.spacing(1)}),pointer:(0,n.css)({cursor:"pointer"})}}},84333:(Q,A,e)=>{"use strict";e.d(A,{b:()=>g});var n=e(31733),a=e(21568),i=e(76067),r=e(51343),o=e(38834);function g({"aria-label":u,label:c,icon:l,options:d,onChange:f,variant:m,minWidth:v=16,size:E="sm",isFullWidth:p=!0,menuPlacement:h,fill:s,buttonCss:y}){const[D,C]=(0,n.useState)(!1),P=(0,i.l4)();return n.createElement(n.Fragment,null,!D&&n.createElement(r.zx,{size:E||"sm",className:y,icon:l||"plus",onClick:()=>C(!0),variant:m,fill:s,fullWidth:p,"data-testid":a.wl.components.ValuePicker.button(u??c)},c),D&&n.createElement("span",{style:{minWidth:P.spacing(v),flexGrow:p?1:void 0}},n.createElement(o.Ph,{placeholder:c,options:d,"aria-label":a.wl.components.ValuePicker.select(u??c),isOpen:!0,onCloseMenu:()=>C(!1),autoFocus:!0,onChange:b=>{C(!1),f(b)},menuPlacement:h})))}},66246:(Q,A,e)=>{"use strict";e.d(A,{AY:()=>u});var n=e(76932),a=e(31733),i=e(92666),r=e(76067),o=e(83998),g=e(37758);const u=({width:d,height:f,legend:m,children:v})=>{const E=(0,r.l4)(),p=(0,r.wW)(c),h={display:"flex",width:`${d}px`,height:`${f}px`},[s,y]=(0,i.Z)();if(!m)return a.createElement(a.Fragment,null,a.createElement("div",{style:h,className:p.viz},v(d,f)));let{placement:D,maxHeight:C="35%",maxWidth:P="60%"}=m.props;document.body.clientWidth<E.breakpoints.values.lg&&(D="bottom");let b=null;const T={};switch(D){case"bottom":h.flexDirection="column",T.maxHeight=C,y.height&&(b={width:d,height:f-y.height});break;case"right":h.flexDirection="row",T.maxWidth=P,y.width&&(b={width:d-y.width,height:f}),m.props.width&&(T.width=m.props.width,b={width:d-m.props.width,height:f});break}return b?.width===0&&(b.width=d),b?.height===0&&(b.height=f),a.createElement("div",{style:h},a.createElement("div",{className:p.viz},b&&v(b.width,b.height)),a.createElement("div",{style:T,ref:s},a.createElement(g.$,{hideHorizontalTrack:!0},m)))},c=d=>({viz:(0,n.css)({flexGrow:2,borderRadius:d.shape.radius.default,"&:focus-visible":(0,o.getFocusStyles)(d)})}),l=({children:d})=>a.createElement(a.Fragment,null,d);u.Legend=l},97810:(Q,A,e)=>{"use strict";e.d(A,{F:()=>o});var n=e(76932),a=e(31733),i=e(99326),r=e(76067);const o=a.memo(a.forwardRef(({color:u,className:c,gradient:l,...d},f)=>{const m=(0,r.l4)(),v=(0,r.wW)(g);let E;if(l){const h=i.WO.get(l).getColors?.(m);h?.length?E=`linear-gradient(90deg, ${h.join(", ")})`:E=m.visualization.getColorByName("")}else E=u;const p={background:E,width:"14px",height:"4px",borderRadius:m.shape.radius.pill,display:"inline-block",marginRight:"8px"};return a.createElement("div",{"data-testid":"series-icon",ref:f,className:(0,n.cx)(c,v.forcedColors),style:p,...d})})),g=()=>({forcedColors:(0,n.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});o.displayName="SeriesIcon"},34588:(Q,A,e)=>{"use strict";e.d(A,{l:()=>R});var n=e(31733),a=e(93670),i=e(71199),r=e(43348),o=e(74779),g=e(76932),u=e(76067),c=e(37623),l=e(65650),d=e(27229);const f=({items:I,itemRenderer:M,onLabelMouseOver:x,onLabelMouseOut:L,onLabelClick:S,placement:U,className:N,readonly:w})=>{const G=(0,u.wW)(m);M||(M=K=>n.createElement(d.e,{item:K,onLabelClick:S,onLabelMouseOver:x,onLabelMouseOut:L,readonly:w}));const _=K=>`${K.getItemKey?K.getItemKey():K.label}`;switch(U){case"right":{const K=(k,z)=>n.createElement("span",{className:G.itemRight},M(k,z));return n.createElement("div",{className:(0,g.cx)(G.rightWrapper,N)},n.createElement(l.a,{items:I,renderItem:K,getItemKey:_}))}case"bottom":default:{const K=I.filter(W=>W.yAxis===1),k=I.filter(W=>W.yAxis!==1),z=(W,Z)=>n.createElement("span",{className:G.itemBottom},M(W,Z));return n.createElement("div",{className:(0,g.cx)(G.bottomWrapper,N)},K.length>0&&n.createElement("div",{className:G.section},n.createElement(c.Y,{items:K,renderItem:z,getItemKey:_})),k.length>0&&n.createElement("div",{className:(0,g.cx)(G.section,G.sectionRight)},n.createElement(c.Y,{items:k,renderItem:z,getItemKey:_})))}}};f.displayName="VizLegendList";const m=I=>{const M=(0,g.css)({paddingRight:"10px",display:"flex",fontSize:I.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:M,itemRight:(0,g.cx)(M,(0,g.css)({marginBottom:I.spacing(.5)})),rightWrapper:(0,g.css)({paddingLeft:I.spacing(.5)}),bottomWrapper:(0,g.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:I.spacing(.5),gap:"15px 25px"}),section:(0,g.css)({display:"flex"}),sectionRight:(0,g.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var v=e(49311),E=e(86850),p=e(83998),h=e(12973);const s=({item:I,onLabelClick:M,onLabelMouseOver:x,onLabelMouseOut:L,className:S,readonly:U})=>{const N=(0,u.wW)(y),w=(0,n.useCallback)(K=>{x&&x(I,K)},[I,x]),G=(0,n.useCallback)(K=>{L&&L(I,K)},[I,L]),_=(0,n.useCallback)(K=>{M&&M(I,K)},[I,M]);return n.createElement("tr",{className:(0,g.cx)(N.row,S)},n.createElement("td",null,n.createElement("span",{className:N.itemWrapper},n.createElement(h.i,{color:I.color,seriesName:I.label,readonly:U}),n.createElement("button",{disabled:U,type:"button",title:I.label,onBlur:G,onFocus:w,onMouseOver:w,onMouseOut:G,onClick:U?void 0:_,className:(0,g.cx)(N.label,I.disabled&&N.labelDisabled)},I.label," ",I.yAxis===2&&n.createElement("span",{className:N.yAxisLabel},"(right y-axis)")))),I.getDisplayValues&&I.getDisplayValues().map((K,k)=>n.createElement("td",{className:N.value,key:`${K.title}-${k}`},(0,E.zc)(K))))};s.displayName="LegendTableItem";const y=I=>{const M=p.hoverColor(I.colors.background.primary,I);return{row:(0,g.css)({label:"LegendRow",fontSize:I.v1.typography.size.sm,borderBottom:`1px solid ${I.colors.border.weak}`,td:{padding:I.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:M}}),label:(0,g.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden"}),labelDisabled:(0,g.css)({label:"LegendLabelDisabled",color:I.colors.text.disabled}),itemWrapper:(0,g.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,g.css)({textAlign:"right"}),yAxisLabel:(0,g.css)({color:I.colors.text.secondary})}},D="Name",C=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,P=({items:I,sortBy:M,sortDesc:x,itemRenderer:L,className:S,onToggleSort:U,onLabelClick:N,onLabelMouseOver:w,onLabelMouseOut:G,readonly:_,isSortable:K})=>{const k=(0,u.wW)(b),z={};K&&(z[D]="");for(const W of I)if(W.getDisplayValues)for(const Z of W.getDisplayValues())z[Z.title??"?"]=Z.description??"";if(M!=null){let W=new Map;I.forEach(H=>{if(M!==D&&H.getDisplayValues){const X=H.getDisplayValues().find(ne=>ne.title===M),Y=X==null||Number.isNaN(X.numeric)?-1/0:X.numeric;W.set(H,Y)}});let Z=x?-1:1;M===D?I.sort((H,X)=>Z*C(H.label,X.label)):I.sort((H,X)=>{const Y=W.get(H)??0,ne=W.get(X)??0;return Z*(Y-ne)})}return L||(L=(W,Z)=>n.createElement(s,{key:`${W.label}-${Z}`,item:W,onLabelClick:N,onLabelMouseOver:w,onLabelMouseOut:G,readonly:_})),n.createElement("table",{className:(0,g.cx)(k.table,S)},n.createElement("thead",null,n.createElement("tr",null,!K&&n.createElement("th",null),Object.keys(z).map(W=>n.createElement("th",{title:z[W],key:W,className:(0,g.cx)(k.header,U&&k.headerSortable,K&&k.nameHeader,{[k.withIcon]:M===W}),onClick:()=>{U&&U(W)}},W,M===W&&n.createElement(v.J,{size:"xs",name:x?"angle-down":"angle-up"}))))),n.createElement("tbody",null,I.map(L)))},b=I=>({table:(0,g.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${I.colors.border.weak}`}}),header:(0,g.css)({color:I.colors.primary.text,fontWeight:I.typography.fontWeightMedium,borderBottom:`1px solid ${I.colors.border.weak}`,padding:I.spacing(.25,1,.25,1),fontSize:I.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,g.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,g.css)({paddingRight:"4px"}),headerSortable:(0,g.css)({cursor:"pointer"})});var T=e(28463);function O(I){return I.ctrlKey||I.metaKey||I.shiftKey?o.R.AppendToSelection:o.R.ToggleSelection}function R({items:I,displayMode:M,sortBy:x,seriesVisibilityChangeBehavior:L=T.Y.Isolate,sortDesc:S,onLabelClick:U,onToggleSort:N,placement:w,className:G,itemRenderer:_,readonly:K,isSortable:k}){const{eventBus:z,onToggleSeriesVisibility:W,onToggleLegendSort:Z}=(0,r.R9)(),H=(0,n.useCallback)((ne,se)=>{z?.publish({type:a.es.type,payload:{raw:se,x:0,y:0,dataId:ne.label}})},[z]),X=(0,n.useCallback)((ne,se)=>{z?.publish({type:a.xH.type,payload:{raw:se,x:0,y:0,dataId:ne.label}})},[z]),Y=(0,n.useCallback)((ne,se)=>{U&&U(ne,se),W&&W(ne.label,L===T.Y.Hide?o.R.AppendToSelection:O(se))},[W,U,L]);switch(M){case i.jK.Table:return n.createElement(P,{className:G,items:I,placement:w,sortBy:x,sortDesc:S,onLabelClick:Y,onToggleSort:N||Z,onLabelMouseOver:H,onLabelMouseOut:X,itemRenderer:_,readonly:K,isSortable:k});case i.jK.List:return n.createElement(f,{className:G,items:I,placement:w,onLabelMouseOver:H,onLabelMouseOut:X,onLabelClick:Y,itemRenderer:_,readonly:K});default:return null}}R.displayName="VizLegend"},27229:(Q,A,e)=>{"use strict";e.d(A,{e:()=>f});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(12973),g=e(69781),u=e(86850),c=e(37623);const l=({stats:v})=>{const E=(0,r.wW)(d);return v.length===0?null:a.createElement(c.Y,{className:E.list,items:v,renderItem:p=>a.createElement("div",{className:E.item,title:p.description},p.title&&`${(0,g.capitalize)(p.title)}:`," ",(0,u.zc)(p))})},d=()=>({list:(0,n.css)({flexGrow:1,textAlign:"right"}),item:(0,n.css)({marginLeft:"8px"})});l.displayName="VizLegendStatsList";const f=({item:v,onLabelClick:E,onLabelMouseOver:p,onLabelMouseOut:h,className:s,readonly:y})=>{const D=(0,r.wW)(m),C=(0,a.useCallback)(T=>{p&&p(v,T)},[v,p]),P=(0,a.useCallback)(T=>{h&&h(v,T)},[v,h]),b=(0,a.useCallback)(T=>{E&&E(v,T)},[v,E]);return a.createElement("div",{className:(0,n.cx)(D.itemWrapper,v.disabled&&D.itemDisabled,s),"data-testid":i.wl.components.VizLegend.seriesName(v.label)},a.createElement(o.i,{seriesName:v.label,color:v.color,gradient:v.gradient,readonly:y}),a.createElement("button",{disabled:y,type:"button",onBlur:P,onFocus:C,onMouseOver:C,onMouseOut:P,onClick:b,className:D.label},v.label),v.getDisplayValues&&a.createElement(l,{stats:v.getDisplayValues()}))};f.displayName="VizLegendListItem";const m=v=>({label:(0,n.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,n.css)({label:"LegendLabelDisabled",color:v.colors.text.disabled}),itemWrapper:(0,n.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,n.css)({textAlign:"right"}),yAxisLabel:(0,n.css)({color:v.v1.palette.gray2})})},12973:(Q,A,e)=>{"use strict";e.d(A,{i:()=>o});var n=e(31733),a=e(39236),i=e(43348),r=e(97810);const o=n.memo(({seriesName:g,color:u,gradient:c,readonly:l})=>{const{onSeriesColorChange:d}=(0,i.R9)(),f=(0,n.useCallback)(m=>d(g,m),[g,d]);return g&&d&&u&&!l?n.createElement(a.sp,{color:u,onChange:f,enableNamedColors:!0},({ref:m,showColorPicker:v,hideColorPicker:E})=>n.createElement(r.F,{color:u,className:"pointer",ref:m,onClick:v,onMouseLeave:E})):n.createElement(r.F,{color:u,gradient:c})});o.displayName="VizLegendSeriesIcon"},28463:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>n});var n=(a=>(a[a.Isolate=0]="Isolate",a[a.Hide=1]="Hide",a))(n||{})},44203:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>g});var n=e(69781),a=e(31733),i=e(55632);const r=(c,l,d,f)=>{const m=o(c,l,f),v=o(l,c,f),E=Math.max(m,v);let p=Math.floor(c/E),h=Math.ceil(f/p);p=Math.ceil(f/h);const s=p-(p*h-f),y=c/s-d+d/s;return{width:c/p-d+d/p,height:l/h-d+d/h,widthOnLastRow:y,xCount:p,yCount:h}};function o(c,l,d){const f=Math.ceil(Math.sqrt(d*c/l));return Math.floor(f*l/c)*f<d?l/Math.ceil(f*l/c):c/f}class g extends a.PureComponent{constructor(l){super(l),this.state={values:l.getValues()}}componentDidUpdate(l){const{renderCounter:d,source:f}=this.props;(d!==l.renderCounter||f!==l.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:l,width:d,height:f}=this.props;return l===i.wm.Auto?d>f?i.wm.Vertical:i.wm.Horizontal:l}renderGrid(){const{renderValue:l,height:d,width:f,itemSpacing:m,getAlignmentFactors:v,orientation:E}=this.props,{values:p}=this.state,h=r(f,d,m,p.length),s=v?v(p,h.width,h.height):{};let y=0,D=0,C=[];for(let P=0;P<p.length;P++){const b=p[P],O=D===h.yCount-1?h.widthOnLastRow:h.width,R=h.height,I=y*O+m*y,M=D*R+m*D,x={position:"absolute",left:I,top:M,width:`${O}px`,height:`${R}px`};C.push(a.createElement("div",{key:P,style:x},l({value:b,width:O,height:R,alignmentFactors:s,orientation:E,count:p.length}))),y++,y===h.xCount&&(y=0,D++)}return a.createElement("div",{style:{position:"relative"}},C)}render(){const{renderValue:l,height:d,width:f,itemSpacing:m,getAlignmentFactors:v,autoGrid:E,orientation:p,maxVizHeight:h,minVizWidth:s,minVizHeight:y}=this.props,{values:D}=this.state;if(E&&p===i.wm.Auto)return this.renderGrid();const C={display:"flex"},P={display:"flex",overflow:`${s?"auto":"hidden"} ${y?"auto":"hidden"}`};let b=d,T=f;const O=this.getOrientation();switch(O){case i.wm.Horizontal:const I=(d+m)/D.length-m;P.flexDirection="column",P.height=`${d}px`,C.marginBottom=`${m}px`,T=f,b=(0,n.clamp)(I,y??0,h??I);break;case i.wm.Vertical:P.flexDirection="row",P.justifyContent="space-between",C.marginRight=`${m}px`,b=d,T=Math.max(f/D.length-m+m/D.length,s??0)}C.width=`${T}px`,C.height=`${b}px`;const R=v?v(D,T,b):{};return a.createElement("div",{style:P},D.map((I,M)=>a.createElement("div",{key:M,style:u(C,M,D.length)},l({value:I,width:T,height:b,alignmentFactors:R,orientation:O,count:D.length}))))}}g.defaultProps={itemSpacing:8};function u(c,l,d){return l===d-1?{...c,marginRight:0,marginBottom:0}:c}},53910:(Q,A,e)=>{"use strict";e.d(A,{V:()=>g,c:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(97810);const o=c=>({icon:(0,n.css)({marginRight:c.spacing(1),verticalAlign:"middle"}),seriesTable:(0,n.css)({display:"table"}),seriesTableRow:(0,n.css)({display:"table-row",fontSize:c.typography.bodySmall.fontSize}),seriesTableCell:(0,n.css)({display:"table-cell"}),label:(0,n.css)({wordBreak:"break-all"}),value:(0,n.css)({paddingLeft:c.spacing(2),textAlign:"right"}),activeSeries:(0,n.css)({fontWeight:c.typography.fontWeightBold,color:c.colors.text.maxContrast}),timestamp:(0,n.css)({fontWeight:c.typography.fontWeightBold,fontSize:c.typography.bodySmall.fontSize})}),g=({color:c,label:l,value:d,isActive:f})=>{const m=(0,i.wW)(o);return a.createElement("div",{"data-testid":"SeriesTableRow",className:(0,n.cx)(m.seriesTableRow,f&&m.activeSeries)},c&&a.createElement("div",{className:m.seriesTableCell},a.createElement(r.F,{color:c,className:m.icon})),l&&a.createElement("div",{className:(0,n.cx)(m.seriesTableCell,m.label)},l),d&&a.createElement("div",{className:(0,n.cx)(m.seriesTableCell,m.value)},d))},u=({timestamp:c,series:l})=>{const d=(0,i.wW)(o);return a.createElement(a.Fragment,null,c&&a.createElement("div",{className:d.timestamp,"aria-label":"Timestamp"},c),l.map((f,m)=>a.createElement(g,{isActive:f.isActive,label:f.label,color:f.color,value:f.value,key:`${f.label}-${m}`})))}},87563:(Q,A,e)=>{"use strict";e.d(A,{I:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(25108),o=e(40429);const g=({content:c,position:l,offset:d})=>{const f=(0,i.wW)(u);return l?a.createElement(r.h_,{className:f.portal},a.createElement(o.S,{position:l,offset:d||{x:0,y:0}},c)):null};g.displayName="VizTooltip";const u=()=>({portal:(0,n.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},40429:(Q,A,e)=>{"use strict";e.d(A,{S:()=>u});var n=e(76932),a=e(31733),i=e(99841),r=e(76067),o=e(83998),g=e(74055);const u=({position:{x:l,y:d},offset:{x:f,y:m},children:v,allowPointerEvents:E=!1,className:p,...h})=>{const s=(0,a.useRef)(null),[y,D]=(0,a.useState)({width:0,height:0}),{width:C,height:P}=(0,i.Z)(),[b,T]=(0,a.useState)({x:l+f,y:d+m}),O=(0,a.useMemo)(()=>new ResizeObserver(I=>{for(let M of I){const x=Math.floor(M.contentRect.width+16),L=Math.floor(M.contentRect.height+2*8);(y.width!==x||y.height!==L)&&D({width:Math.min(x,C),height:Math.min(L,P)})}}),[y,C,P]);(0,a.useLayoutEffect)(()=>(s.current&&O.observe(s.current),()=>{O.disconnect()}),[O]),(0,a.useLayoutEffect)(()=>{if(s&&s.current){const{x:I,y:M}=(0,g.H)(l,d,y.width,y.height,f,m,C,P);T({x:I,y:M})}},[C,P,l,f,d,m,y]);const R=(0,r.wW)(c);return a.createElement("div",{ref:s,style:{position:"fixed",left:0,pointerEvents:E?"auto":"none",top:0,transform:`translate(${b.x}px, ${b.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...h,className:(0,n.cx)(R.wrapper,p)},v)};u.displayName="VizTooltipContainer";const c=l=>({wrapper:(0,n.css)((0,o.getTooltipContainerStyles)(l))})},54565:(Q,A,e)=>{"use strict";e.d(A,{X:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(90504);const o=({contentLabelValue:u,customContent:c,isPinned:l})=>{const d=(0,i.wW)(g);return a.createElement("div",{className:d.wrapper},a.createElement("div",null,u.map((f,m)=>{const{label:v,value:E,color:p,colorIndicator:h,colorPlacement:s,isActive:y}=f;return a.createElement(r.F,{key:m,label:v,value:E,color:p,colorIndicator:h,colorPlacement:s,isActive:y,justify:"space-between",isPinned:l})})),c?.map((f,m)=>a.createElement("div",{key:m,className:d.customContentPadding},f)))},g=u=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${u.colors.border.medium}`,padding:u.spacing(1)}),customContentPadding:(0,n.css)({padding:`${u.spacing(1)} 0`})})},32684:(Q,A,e)=>{"use strict";e.d(A,{c:()=>c});var n=e(76932),a=e(31733),i=e(79106),r=e(92515),o=e(51343),g=e(76067);const u="add-annotation-button",c=({dataLinks:d,canAnnotate:f})=>{const m=(0,g.wW)(l),v=()=>{const E={variant:"secondary"};return a.createElement(i.Lh,null,d.map((p,h)=>a.createElement(r.k,{key:h,link:p,buttonProps:E})))};return a.createElement("div",{className:m.wrapper},d.length>0&&a.createElement("div",{className:m.dataLinks},v()),f&&a.createElement("div",{className:m.addAnnotations},a.createElement(o.zx,{icon:"comment-alt",variant:"secondary",size:"sm",id:u},"Add annotation")))},l=d=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,padding:d.spacing(0)}),dataLinks:(0,n.css)({overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",maskImage:"linear-gradient(90deg, rgba(0, 0, 0, 1) 80%, transparent)",borderTop:`1px solid ${d.colors.border.medium}`,padding:d.spacing(1)}),addAnnotations:(0,n.css)({borderTop:`1px solid ${d.colors.border.medium}`,padding:d.spacing(1)})})},45597:(Q,A,e)=>{"use strict";e.d(A,{r:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(90504);const o=({headerLabel:l,isPinned:d})=>{const{label:f,value:m,color:v,colorIndicator:E}=l;return a.createElement(r.F,{label:f,value:m,color:v,colorIndicator:E,marginRight:"22px",isPinned:d})},g=({keyValuePairs:l,isPinned:d})=>a.createElement(a.Fragment,null,l?.map((f,m)=>a.createElement(r.F,{key:m,label:f.label,value:f.value,color:f.color,colorIndicator:f.colorIndicator,justify:"space-between",isPinned:d}))),u=({headerLabel:l,keyValuePairs:d,customValueDisplay:f,isPinned:m})=>{const v=(0,i.wW)(c);return a.createElement("div",{className:v.wrapper},a.createElement(o,{headerLabel:l,isPinned:m}),f||a.createElement(g,{keyValuePairs:d,isPinned:m}))},c=l=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,padding:l.spacing(1)})})},90504:(Q,A,e)=>{"use strict";e.d(A,{F:()=>d});var n=e(76932),a=e(31733),i=e(76067),r=e(58037),o=e(91507),g=e(41614),u=e(74055);const c=({color:m=o.R,colorIndicator:v=g.VK})=>{const E=(0,i.wW)(l);return a.createElement("span",{style:{backgroundColor:m},className:(0,n.cx)(E.colorIndicator,(0,u.L)(v,E))})},l=m=>({colorIndicator:(0,n.css)({marginRight:m.spacing(.5)}),series:(0,n.css)({width:"14px",height:"4px",borderRadius:m.shape.radius.pill,minWidth:"14px"}),value:(0,n.css)({width:"12px",height:"12px",borderRadius:m.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,n.css)({}),pie_1_4:(0,n.css)({}),pie_2_4:(0,n.css)({}),pie_3_4:(0,n.css)({}),marker_sm:(0,n.css)({width:"4px",height:"4px",borderRadius:m.shape.radius.circle,minWidth:"4px"}),marker_md:(0,n.css)({width:"8px",height:"8px",borderRadius:m.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,n.css)({width:"12px",height:"12px",borderRadius:m.shape.radius.circle,minWidth:"12px"})}),d=({label:m,value:v,color:E,colorIndicator:p,colorPlacement:h=g.Z2.first,justify:s="flex-start",isActive:y=!1,marginRight:D="0px",isPinned:C})=>{const P=(0,i.wW)(f,s,D),[b,T]=(0,a.useState)(!1),[O,R]=(0,a.useState)(!1),I=S=>{S.currentTarget.offsetWidth<S.currentTarget.scrollWidth&&T(!0)},M=()=>T(!1),x=S=>{S.currentTarget.offsetWidth<S.currentTarget.scrollWidth&&R(!0)},L=()=>R(!1);return a.createElement("div",{className:P.contentWrapper},(E||m)&&a.createElement("div",{className:P.valueWrapper},E&&h===g.Z2.first&&a.createElement(c,{color:E,colorIndicator:p}),C?a.createElement(r.u,{content:m,interactive:!1,show:b},a.createElement("div",{className:(0,n.cx)(P.label,y&&P.activeSeries),onMouseEnter:I,onMouseLeave:M},m)):a.createElement("div",{className:(0,n.cx)(P.label,y&&P.activeSeries)},m)),a.createElement("div",{className:P.valueWrapper},E&&h===g.Z2.leading&&a.createElement(c,{color:E,colorIndicator:p}),C?a.createElement(r.u,{content:v?v.toString():"",interactive:!1,show:O},a.createElement("div",{className:(0,n.cx)(P.value,y),onMouseEnter:x,onMouseLeave:L},v)):a.createElement("div",{className:(0,n.cx)(P.value,y)},v),E&&h===g.Z2.trailing&&a.createElement(a.Fragment,null,"\xA0",a.createElement(c,{color:E,colorIndicator:p}))))},f=(m,v,E)=>({contentWrapper:(0,n.css)({display:"flex",alignItems:"center",justifyContent:v,flexWrap:"wrap",marginRight:E}),label:(0,n.css)({color:m.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:m.spacing(.5)}),value:(0,n.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,n.css)({display:"flex",alignItems:"center",minWidth:0}),activeSeries:(0,n.css)({fontWeight:m.typography.fontWeightBold,color:m.colors.text.maxContrast})})},41614:(Q,A,e)=>{"use strict";e.d(A,{F_:()=>n,VK:()=>i,Z2:()=>a});var n=(r=>(r.series="series",r.value="value",r.hexagon="hexagon",r.pie_1_4="pie_1_4",r.pie_2_4="pie_2_4",r.pie_3_4="pie_3_4",r.marker_sm="marker_sm",r.marker_md="marker_md",r.marker_lg="marker_lg",r))(n||{}),a=(r=>(r.hidden="hidden",r.first="first",r.leading="leading",r.trailing="trailing",r))(a||{});const i="series"},74055:(Q,A,e)=>{"use strict";e.d(A,{H:()=>a,L:()=>i});var n=e(41614);const a=(r=0,o=0,g=0,u=0,c=0,l=0,d=0,f=0)=>{let m=r,v=o;const E=Math.max(r+c+g-(d-c),0),p=Math.abs(Math.min(r-c-g-c,0)),h=E>0,s=p>0,y=Math.max(o+l+u-(f-l),0),D=Math.abs(Math.min(o-l-u-l,0)),C=y>0,P=D>0;return h&&s?m=E>p?c:d-c-g:h?m=r-c-g:m=r+c,C&&P?v=y>D?l:f-l-u:C?v=o-l-u:v=o+l,{x:m,y:v}},i=(r,o)=>{switch(r){case n.F_.value:return o.value;case n.F_.series:return o.series;case n.F_.hexagon:return o.hexagon;case n.F_.pie_1_4:return o.pie_1_4;case n.F_.pie_2_4:return o.pie_2_4;case n.F_.pie_3_4:return o.pie_3_4;case n.F_.marker_sm:return o.marker_sm;case n.F_.marker_md:return o.marker_md;case n.F_.marker_lg:return o.marker_lg;default:return o.value}}},5279:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{Alert:()=>et.b,AlertingSettings:()=>Xt.O,AsyncMultiSelect:()=>sr.M8,AsyncSelect:()=>sr.qb,AsyncVirtualizedSelect:()=>sr.gY,AutoSaveField:()=>Y.h,AutoSizeInput:()=>rs.H,Avatar:()=>on.q,Badge:()=>io.C,BarGauge:()=>Fe.xf,BarGaugeDisplayMode:()=>kn.QH,BigValue:()=>Ne.w6,BigValueColorMode:()=>Ne.pc,BigValueGraphMode:()=>Ne.IG,BigValueJustifyMode:()=>Ne.ap,BigValueTextMode:()=>Ne.jG,Box:()=>Xa.x,BrowserLabel:()=>ns._,Button:()=>ga.zx,ButtonCascader:()=>P.O,ButtonGroup:()=>ys.h,ButtonSelect:()=>Tt.d,CallToActionCard:()=>zt._,Card:()=>lo.Z,CardContainer:()=>Lo._,Cascader:()=>C.v,CertificationKey:()=>ln.W,Checkbox:()=>xt.X,ClickOutsideWrapper:()=>yt.L,ClipboardButton:()=>D.m,CodeEditor:()=>oe.p,CodeEditorSuggestionItemKind:()=>ve.k,CollapsableSection:()=>qe.s,Collapse:()=>_e.U,ColorPicker:()=>R.zH,ColorPickerInput:()=>I.T,ConfirmButton:()=>d.p,ConfirmModal:()=>q.s,Container:()=>Eo.W2,ContextMenu:()=>$t.x,ControlledCollapse:()=>_e.y,Counter:()=>$e.A,CustomHeadersSettings:()=>Ut.H,CustomScrollbar:()=>s.$,DataLinkButton:()=>at.k,DataLinkInput:()=>Ct.v,DataLinksContextMenu:()=>kt.V,DataLinksInlineEditor:()=>nt.d,DataSourceHttpSettings:()=>_n.E,DatePicker:()=>k.M,DatePickerWithInput:()=>z.d,DateTimePicker:()=>W.x,DeleteButton:()=>f.m,Divider:()=>Tn.i,Drawer:()=>Pn.d,Dropdown:()=>Pt.L,EmptySearchResult:()=>x.K,ErrorBoundary:()=>Sn.SV,ErrorBoundaryAlert:()=>Sn.z4,ErrorWithStack:()=>Zn.X,EventsCanvas:()=>Ms.TZ,FIXED_UNIT:()=>_s.j,FadeTransition:()=>Dn.n,FeatureBadge:()=>Kt.a,FeatureInfoBox:()=>Kt.Z,Field:()=>ks.g,FieldArray:()=>Wr.F,FieldLinkList:()=>lt.Z,FieldSet:()=>qa.C,FieldValidationMessage:()=>za.S,FileDropzone:()=>ur.Yo,FileDropzoneDefaultChildren:()=>ur.A_,FileListItem:()=>ur.K$,FileUpload:()=>Ao.p,FilterInput:()=>jr.H,FilterPill:()=>ge.B,Form:()=>An.l,FormattedValueDisplay:()=>co.W,FullWidthButtonContainer:()=>ft.f,Gauge:()=>ut.a,Graph:()=>Vr.k,GraphContextMenu:()=>La.w,GraphContextMenuHeader:()=>La.b,GraphNG:()=>fr.d,GraphSeriesToggler:()=>ze.U,GraphWithLegend:()=>os.U,Grid:()=>Nr.r,HorizontalGroup:()=>Eo.Lh,Icon:()=>c.J,IconButton:()=>l.h,InfoBox:()=>tn.v,InlineField:()=>Is._,InlineFieldRow:()=>Ns.Z,InlineFormLabel:()=>En.c,InlineLabel:()=>dr.W,InlineSegmentGroup:()=>vr.m,InlineSwitch:()=>Un.x,InlineToast:()=>b.K,Input:()=>Ss.I,InputControl:()=>ra.g,InteractiveTable:()=>H.e,JSONFormatter:()=>cn.g,JsonExplorer:()=>dn.u,KeyboardPlugin:()=>Ga.Cm,Label:()=>cs._,LegacyForms:()=>ao,LegacyInputStatus:()=>a.G,Legend:()=>Hs.D,Link:()=>Es.r,LinkButton:()=>ga.Qj,List:()=>Z.a,LoadingBar:()=>O.F,LoadingPlaceholder:()=>T.u,Marker:()=>Ms.Jx,Menu:()=>Ie.v,MenuGroup:()=>st.k,MenuItem:()=>Mt.s,Modal:()=>Me.u,ModalHeader:()=>Pe.x,ModalRoot:()=>Le.Y0,ModalTabContent:()=>he.Q,ModalTabsHeader:()=>Ee.H,ModalsContext:()=>Le.kr,ModalsController:()=>Le.JY,ModalsProvider:()=>Le.$i,MultiSelect:()=>sr.NU,PageToolbar:()=>ke.X,Pagination:()=>ne.t,PanelChrome:()=>J.fm,PanelChromeLoadingIndicator:()=>te.T,PanelContainer:()=>Rs.l,PanelContextProvider:()=>de._w,PanelContextRoot:()=>de.bb,PlotLegend:()=>Aa.l,PluginSignatureBadge:()=>qt.o,Popover:()=>E.J,PopoverController:()=>v.D,Portal:()=>h.h_,PortalContainer:()=>h.lO,QueryField:()=>me.q,RadioButtonGroup:()=>Er.S,RadioButtonList:()=>Ro.x,RangeSlider:()=>va.U,ReactMonacoEditor:()=>fe.o,RefreshPicker:()=>U.dP,RelativeTimeRangePicker:()=>mr.x,RenderUserContentAsHTML:()=>Ye.D,ScaleDistribution:()=>kn.wf,SecretInput:()=>Oa.m,SecretTextArea:()=>Ka.Z,SecureSocksProxySettings:()=>en.i,Segment:()=>hn.X,SegmentAsync:()=>Gn.V,SegmentInput:()=>Vn.X,SegmentSection:()=>Wn.f,SegmentSelect:()=>$n.V,Select:()=>sr.Ph,SelectContainer:()=>sr.eI,SeriesColorPicker:()=>R.sp,SeriesColorPickerPopover:()=>M.j,SeriesColorPickerPopoverWithTheme:()=>M.q,SeriesIcon:()=>Jt.F,SeriesTable:()=>tt.c,SeriesTableRow:()=>tt.V,SeriesVisibilityChangeBehavior:()=>De.Y,SeriesVisibilityChangeMode:()=>us.R,SetInterval:()=>ot.F,SlideOutTransition:()=>Ln.R,Slider:()=>sa.i,Sparkline:()=>je.b,Spinner:()=>xn.$,Stack:()=>bs.K,StatsPicker:()=>S.m,Switch:()=>Un.r,TLSAuthSettings:()=>gn.s,Tab:()=>Re.O,TabContent:()=>Oe.I,TabbedContainer:()=>y.W,Table:()=>it.i,TableInputCSV:()=>ce.w,TabsBar:()=>le.J,Tag:()=>se.V,TagList:()=>re.P,TagsInput:()=>X.B,Text:()=>ts.x,TextArea:()=>Tr.K,TextLink:()=>Os.h,TimeOfDayPicker:()=>G.y,TimePickerTooltip:()=>N.IF,TimeRangeInput:()=>Kr.K,TimeRangeLabel:()=>w.q,TimeRangePicker:()=>N.Xc,TimeSeries:()=>Ta.p,TimeZonePicker:()=>_.O,Toggletip:()=>p.P,ToolbarButton:()=>ds.h,ToolbarButtonRow:()=>Ja.R,Tooltip:()=>m.u,TooltipPlugin:()=>Ga.ii,TooltipPlugin2:()=>Ga.x2,UPLOT_AXIS_FONT_SIZE:()=>ta.gD,UPlotChart:()=>ia.N,UPlotConfigBuilder:()=>Ea.U,UnitPicker:()=>L.n,UserIcon:()=>jt.t,ValuePicker:()=>_a.b,VerticalGroup:()=>Eo.wc,VerticalTab:()=>Ae.L,VirtualizedSelect:()=>sr.LT,VizLayout:()=>be.AY,VizLegend:()=>Ue.l,VizLegendListItem:()=>We.e,VizRepeater:()=>ae.Q,VizTooltip:()=>Te.I,VizTooltipContainer:()=>Ve.S,WeekStartPicker:()=>K.z,WithContextMenu:()=>ct.z,XYCanvas:()=>Ms.K2,ZoomPlugin:()=>Ga.Rb,buildScaleKey:()=>Qr.z1,clearButtonStyles:()=>ga.gN,convertOldAngularValueMapping:()=>wt.PR,defaultIntervals:()=>U.o5,fieldMatchersUI:()=>ls.i,getCardStyles:()=>lo.L,getInputStyles:()=>Ss.H,getPortalContainer:()=>h.RN,getSelectStyles:()=>Gr.D,graphFieldOptions:()=>Nn.q,graphTickFormatter:()=>ms.sV,graphTimeFormat:()=>ms.mc,preparePlotFrame:()=>Qr.Rn,resetSelectStyles:()=>$o.Z,sharedInputStyle:()=>Xn.RK,sharedSingleStatMigrationHandler:()=>wt.rD,sharedSingleStatPanelChangedHandler:()=>wt.ZH,useGraphNGContext:()=>rr.z,usePanelContext:()=>de.R9,variableSuggestionToCodeEditorSuggestion:()=>pe.T,withErrorBoundary:()=>Sn.Pf});var n=e(14978),a=e(98146),i=e(52732),r=e(31931),o=e(54205),g=e(40782),u=e(53713),c=e(49311),l=e(41354),d=e(65420),f=e(94719),m=e(58037),v=e(72336),E=e(20425),p=e(65930),h=e(25108),s=e(37758),y=e(70098),D=e(5334),C=e(3166),P=e(30091),b=e(14067),T=e(61375),O=e(13069),R=e(39236),I=e(62513),M=e(88937),x=e(75798),L=e(40154),S=e(79043),U=e(20685),N=e(20848),w=e(12881),G=e(46776),_=e(60100),K=e(55048),k=e(39934),z=e(46606),W=e(35557),Z=e(65650),H=e(77543),X=e(98572),Y=e(95712),ne=e(47808),se=e(14496),re=e(60196),ge=e(65050),q=e(90069),me=e(59328),oe=e(73642),fe=e(43017),ve=e(6697),pe=e(35921),Me=e(5572),Pe=e(89427),Ee=e(13883),he=e(64075),Le=e(58947),ke=e(92795),ot=e(79977),it=e(47687),ce=e(50575),le=e(88062),Re=e(4981),Ae=e(53534),Oe=e(31805),$e=e(2431),Ye=e(97124),Ne=e(39543),je=e(64837),ut=e(78688),Fe=e(42023),Te=e(87563),Ve=e(40429),tt=e(53910),ae=e(44203),J=e(48011),te=e(23913),de=e(43348),be=e(66246),De=e(28463),Ue=e(34588),We=e(27229),et=e(25111),ze=e(63382),_e=e(27218),qe=e(5284),at=e(92515),lt=e(64064),ft=e(5882),yt=e(11550),wt=e(13392),zt=e(53567),$t=e(45502),Ie=e(63424),st=e(85115),Mt=e(46213),ct=e(79729),nt=e(7122),Ct=e(14757),kt=e(60470),Jt=e(97810),tn=e(50140),Kt=e(23006),cn=e(79300),dn=e(71756),Sn=e(8310),Zn=e(28069),_n=e(69671),Ut=e(71952),Xt=e(45394),en=e(41854),gn=e(74947),ln=e(34525),xn=e(89719),Dn=e(86141),Ln=e(16240),hn=e(77932),Gn=e(68777),Vn=e(70897),$n=e(56072),Wn=e(31719),Pn=e(59899),sa=e(77970),va=e(21660),An=e(17618),Xn=e(90119),ra=e(32901),ga=e(51343),ys=e(5460),ds=e(73351),Ja=e(71460),_a=e(84333),ls=e(45418),Es=e(34037),Os=e(94746),ts=e(36717),Xa=e(68833),bs=e(37739),Nr=e(41431),cs=e(36667),ks=e(85765),Hs=e(67683),qa=e(97216),za=e(65008),Is=e(41164),vr=e(11950),dr=e(20888),Ns=e(47701),Wr=e(31844),$o=e(59496),sr=e(38834),Gr=e(33789),ka=e(7355),Fr=e.n(ka),Vs={};for(const uo in ka)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(uo)<0&&(Vs[uo]=()=>ka[uo]);e.d(A,Vs);var Eo=e(79106),io=e(50248),Er=e(96856),Ro=e(68432),Ss=e(64516),rs=e(1537),jr=e(76804),Oa=e(89080),Ka=e(21043),Un=e(76772),xt=e(36356),Tr=e(28718),Ao=e(74916),ur=e(60540),Kr=e(30791),mr=e(97771),lo=e(96305),Lo=e(24870),co=e(60850),Tt=e(61513),Pt=e(67669),qt=e(22525),jt=e(75634),on=e(10851),En=e(71918),Tn=e(32528),Nn=e(31180),kn=e(71199),Ea=e(50282),ta=e(29129),ia=e(64125),Aa=e(91384),Ms=e(93492),Ga=e(60378),_s=e(18700),us=e(74779),ns=e(43794),Rs=e(94319),Vr=e(69153),os=e(7855),La=e(6037),ms=e(32603),fr=e(68942),Ta=e(22055),rr=e(26302),Qr=e(1500);const ao={SecretFormField:u.c,FormField:n.W,Select:o.Ph,AsyncSelect:o.qb,IndicatorsContainer:i.B,NoOptionsMessage:r.P,Input:a.I,Switch:g.r}},86141:(Q,A,e)=>{"use strict";e.d(A,{n:()=>o});var n=e(76932),a=e(31733),i=e(54756),r=e(76067);function o(u){const{visible:c,children:l,duration:d=250}=u,f=(0,r.wW)(g,d);return a.createElement(i.Z,{in:c,mountOnEnter:!0,unmountOnExit:!0,timeout:d,classNames:f},l)}const g=(u,c)=>({enter:(0,n.css)({label:"enter",opacity:0}),enterActive:(0,n.css)({label:"enterActive",opacity:1,transition:`opacity ${c}ms ease-out`}),exit:(0,n.css)({label:"exit",opacity:1}),exitActive:(0,n.css)({label:"exitActive",opacity:0,transition:`opacity ${c}ms ease-out`})})},16240:(Q,A,e)=>{"use strict";e.d(A,{R:()=>o});var n=e(76932),a=e(31733),i=e(54756),r=e(76067);function o(u){const{visible:c,children:l,duration:d=250,horizontal:f,size:m}=u,v=(0,r.wW)(g,d,f?"width":"height",m);return a.createElement(i.Z,{in:c,mountOnEnter:!0,unmountOnExit:!0,timeout:d,classNames:v},l)}const g=(u,c,l,d)=>({enter:(0,n.css)({label:"enter",[`${l}`]:0,opacity:0}),enterActive:(0,n.css)({label:"enterActive",[`${l}`]:`${d}px`,opacity:1,transition:`opacity ${c}ms ease-out, ${l} ${c}ms ease-out`}),exit:(0,n.css)({label:"exit",[`${l}`]:`${d}px`,opacity:1}),exitActive:(0,n.css)({label:"exitActive",opacity:0,[`${l}`]:0,transition:`opacity ${c}ms ease-out, ${l} ${c}ms ease-out`})})},64125:(Q,A,e)=>{"use strict";e.d(A,{N:()=>u});var n=e(31733),a=e(35560),i=e(80431);function r(c,l){return l.width===c.width&&l.height===c.height}function o(c,l){return l.data===c.data}function g(c,l){return l.config===c.config}class u extends n.Component{constructor(l){super(l),this.plotContainer=(0,n.createRef)(),this.plotCanvasBBox=(0,n.createRef)(),this.state={plot:null}}reinitPlot(){let{width:l,height:d,plotRef:f}=this.props;if(this.state.plot?.destroy(),l===0&&d===0)return;this.props.config.addHook("setSize",E=>{E.over});const m={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,i.Zp)("UPlot",!1,"Reinitializing plot",m);const v=new a.Z(m,this.props.data,this.plotContainer.current);f&&f(v),this.setState({plot:v})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(l){let{plot:d}=this.state;r(l,this.props)?g(l,this.props)?o(l,this.props)||d?.setData(this.props.data):this.reinitPlot():d?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return n.createElement("div",{style:{position:"relative"}},n.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},91384:(Q,A,e)=>{"use strict";e.d(A,{l:()=>m,o:()=>f});var n=e(31733),a=e(27957),i=e(99326),r=e(66542),o=e(28073),g=e(71199),u=e(76067),c=e(66246),l=e(34588);const d=v=>v==null?"-":v.toFixed(1);function f(v,E){return v.getSeries().some(p=>{const h=p.props.dataFrameFieldIndex;if(!h)return!1;const s=E[h.frameIndex]?.fields[h.fieldIndex];return!(!s||s.config.custom?.hideFrom?.legend)})}const m=n.memo(({data:v,config:E,placement:p,calcs:h,displayMode:s,...y})=>{const D=(0,u.l4)(),C=E.getSeries().map(P=>{const b=P.props,T=b.dataFrameFieldIndex,O=E.getAxisPlacement(P.props.scaleKey);if(!T)return;const R=v[T.frameIndex]?.fields[T.fieldIndex];if(!R||R.config.custom?.hideFrom?.legend)return;const I=(0,a.CZ)(R,v[T.frameIndex],v),x=(0,i.YO)(R,D).color;return{disabled:!(b.show??!0),fieldIndex:T,color:x,label:I,yAxis:O===g.LB.Left||O===g.LB.Bottom?1:2,getDisplayValues:()=>{if(!h?.length)return[];const L=R.display??d;let S=null;const U=(0,r.Kx)({field:R,reducers:h});return h.map(N=>{const w=r.TB.get(N);let G=L;return w.id===r.gz.diffperc&&(G=(0,o.U)({field:{...R,config:{...R.config,unit:"percentunit"}},theme:D})),(w.id===r.gz.count||w.id===r.gz.changeCount||w.id===r.gz.distinctCount)&&(S||(S=(0,o.U)({field:{...R,config:{...R.config,unit:"none"}},theme:D})),G=S),{...G(U[N]),title:w.name,description:w.description}})},getItemKey:()=>`${I}-${T.frameIndex}-${T.fieldIndex}`}}).filter(P=>P!==void 0);return n.createElement(c.AY.Legend,{placement:p,...y},n.createElement(l.l,{placement:p,items:C,displayMode:s,sortBy:y.sortBy,sortDesc:y.sortDesc,isSortable:!0}))});m.displayName="PlotLegend"},31180:(Q,A,e)=>{"use strict";e.d(A,{q:()=>a});var n=e(71199);const a={drawStyle:[{label:"Lines",value:n.l8.Line},{label:"Bars",value:n.l8.Bars},{label:"Points",value:n.l8.Points}],lineInterpolation:[{description:"Linear",value:n.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:n.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:n.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:n.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:n.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:n.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:n.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:n.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:n.Jp.Always},{label:"Never",value:n.Jp.Never}],axisPlacement:[{label:"Auto",value:n.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:n.LB.Left},{label:"Right",value:n.LB.Right},{label:"Hidden",value:n.LB.Hidden}],fillGradient:[{label:"None",value:n.FI.None},{label:"Opacity",value:n.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:n.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:n.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:n.o0.None},{label:"Normal",value:n.o0.Normal},{label:"100%",value:n.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:n.i3.Off},{label:"As lines",value:n.i3.Line},{label:"As lines (dashed)",value:n.i3.Dashed},{label:"As filled regions",value:n.i3.Area},{label:"As filled regions and lines",value:n.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:n.i3.DashedAndArea}]}},29129:(Q,A,e)=>{"use strict";e.d(A,{ff:()=>f,gD:()=>l,mr:()=>v});var n=e(86850),a=e(73899),i=e(74337),r=e(40137),o=e(71199),g=e(90854),u=e(18700),c=e(1693);const l=12,d=8;class f extends u.L{merge(h){this.props.size=(0,c.V)("max",this.props.size,h.size),this.props.label||(this.props.label=h.label),this.props.placement===o.LB.Auto&&(this.props.placement=h.placement)}calculateSpace(h,s,y,D,C){const P=h.axes[s],b=h.scales[P.scale];if(P.side!==2||!b)return 30;const T=40;if(b.time){const O=C/T,R=(D-y)/O,I=v(h,[y],s,T,R);return(0,g.X1)(I[0],l).width+18}return T}calculateAxisSize(h,s,y){const D=h.axes[y];let C=D.ticks.size;if(D.side===2)C+=D.gap+l;else if(s?.length){let P=s.reduce((T,O)=>Math.max(T,(0,g.X1)(O,l).width),0);const b=Math.min(h.width*.4,P);C+=D.gap+D.labelGap+b}return Math.ceil(C)}getConfig(){let{scaleKey:h,label:s,show:y=!0,placement:D=o.LB.Auto,grid:C={show:!0},ticks:P,space:b,filter:T,gap:O=5,formatValue:R,splits:I,values:M,incrs:x,isTime:L,timeZone:S,theme:U,tickLabelRotation:N,size:w,color:G,border:_,decimals:K,distr:k=o.wf.Linear}=this.props;const z=`${l}px ${U.typography.fontFamily}`,W=U.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,n.br)(h)&&(I=[0,1]),K===0&&k===o.wf.Linear&&(T=(H,X)=>X.map(Y=>Number.isInteger(Y)?Y:null));let Z={scale:h,show:y,stroke:G??U.colors.text.primary,side:E(D),font:z,size:w??((H,X,Y)=>this.calculateAxisSize(H,X,Y)),rotate:N,gap:O,labelGap:0,grid:{show:C.show,stroke:W,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:_?.show?G??U.colors.text.primary:W,width:1/devicePixelRatio,size:4},P),splits:I,values:M,space:b??((H,X,Y,ne,se)=>this.calculateSpace(H,X,Y,ne,se)),filter:T,incrs:x};return _?.show&&(Z.border={stroke:G??U.colors.text.primary,width:1/devicePixelRatio,..._}),s!=null&&s.length>0&&(Z.label=s,Z.labelSize=l+d,Z.labelFont=z,Z.labelGap=d),M?Z.values=M:L?Z.values=v:R&&(Z.values=(H,X,Y,ne,se)=>{let re=(0,a.d)((0,a.O)(se,6));return X.map(ge=>R(ge,re>0?re:void 0))}),Z.timeZone=S,Z}}const m={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function v(p,h,s,y,D){const C=p.axes[s].timeZone,P=p.scales.x,b=(P?.max??0)-(P?.min??0),T=Math.round(m.year/m.day)*m.day,O=Math.round(D/m.day)*m.day;let R=i.U6.interval.year;return D<m.second?R=i.U6.interval.millisecond:D<=m.minute?R=i.U6.interval.second:b<=m.day?R=i.U6.interval.minute:D<=m.day?R=i.U6.interval.hour:b<m.year?R=i.U6.interval.day:O===T?R=i.U6.interval.year:D<=m.year&&(R=i.U6.interval.month),h.map(I=>I==null?"":(0,r.dq)(I,{format:R,timeZone:C}))}function E(p){switch(p){case o.LB.Top:return 0;case o.LB.Right:return 1;case o.LB.Bottom:return 2;case o.LB.Left:}return 3}},50282:(Q,A,e)=>{"use strict";e.d(A,{U:()=>C});var n=e(69781),a=e(35560),i=e(5333),r=e(10020),o=e(71199),g=e(80431),u=e(29129),c=e(1693),l=e(91507),d=e(77081),f=e(18700),m=e(56035);class v extends f.L{getConfig(){const{facets:b,drawStyle:T,pathBuilder:O,pointsBuilder:R,pointsFilter:I,lineInterpolation:M,lineWidth:x,lineStyle:L,barAlignment:S,barWidthFactor:U,barMaxWidth:N,showPoints:w,pointSize:G,scaleKey:_,pxAlign:K,spanNulls:k,show:z=!0}=this.props;let W={},Z=this.getLineColor();W.stroke=Z,W.width=x,L&&L.fill!=="solid"&&(L.fill==="dot"&&(W.cap="round"),W.dash=L.dash??[10,10]),O!=null?W.paths=O:T===o.l8.Points?W.paths=()=>null:T!=null&&(W.paths=(Y,ne,se,re)=>p(T,M,S,U,N)(Y,ne,se,re));const H=typeof Z=="string"?Z:(Y,ne)=>Y.series[ne]._stroke,X={points:{stroke:H,fill:H,size:!G||G<x?void 0:G,filter:I}};return R!=null?X.points.show=R:T===o.l8.Points?X.points.show=!0:w===o.Jp.Auto?T===o.l8.Bars&&(X.points.show=!1):w===o.Jp.Never?X.points.show=!1:w===o.Jp.Always&&(X.points.show=!0),{scale:_,facets:b,spanGaps:typeof k=="number"?!1:k,value:()=>"",pxAlign:K,show:z,fill:this.getFill(),...W,...X}}getLineColor(){const{lineColor:b,gradientMode:T,colorMode:O,thresholds:R,theme:I,hardMin:M,hardMax:x,softMin:L,softMax:S,dynamicSeriesColor:U}=this.props;return T===o.FI.None&&U?(N,w)=>U(w)??b??l.R:T===o.FI.Scheme&&O?.id!==l.S.Fixed?(0,m.P2)(1,I,O,R,M,x,L,S):b??l.R}getFill(){const{lineColor:b,fillColor:T,gradientMode:O,fillOpacity:R,colorMode:I,thresholds:M,theme:x,hardMin:L,hardMax:S,softMin:U,softMax:N,dynamicSeriesColor:w}=this.props;if(T)return T;const G=O??o.FI.None,_=(R??0)/100;if(G===o.FI.None&&w&&_>0)return(K,k)=>{let z=K.series[k]._stroke;return d.alpha(z??"",_)};switch(G){case o.FI.Opacity:return(0,m.DT)(T??b,_);case o.FI.Hue:return(0,m.oN)(T??b,_,x);case o.FI.Scheme:if(I?.id!==l.S.Fixed)return(0,m.P2)(_,x,I,M,L,S,U,N);default:if(_>0)return d.alpha(b??"",_)}}}let E;function p(P,b,T=o.pu.Center,O=.6,R=200){const I=a.Z.paths;if(E||(E={linear:I.linear(),smooth:I.spline(),stepBefore:I.stepped({align:-1}),stepAfter:I.stepped({align:1})}),P===o.l8.Bars){let M=`bars|${T}|${O}|${R}`;return E[M]||(E[M]=I.bars({size:[O,R],align:T})),E[M]}else if(P===o.l8.Line){if(b===o.KC.StepBefore)return E.stepBefore;if(b===o.KC.StepAfter)return E.stepAfter;if(b===o.KC.Smooth)return E.smooth}return E.linear}var h=e(37479),s=e(47423);function y(P){const b=P.config.mode===o.i3.Dashed||P.config.mode===o.i3.DashedAndArea?[10,10]:null;function T(w,G,_,K){let k=w.ctx,z=0;for(let W=0;W<_.length;W++)if(_[W].color==="transparent"){z=W;break}k.lineWidth=2,b&&k.setLineDash(b);for(let W=1;W<_.length;W++){const Z=_[W];let H;z>=W&&W>0?H=(0,h.Z)(K.visualization.getColorByName(_[W-1].color)):H=(0,h.Z)(K.visualization.getColorByName(Z.color)),H.getAlpha()===1&&H.setAlpha(.7);let X=Math.round(w.bbox.left),Y=Math.round(w.valToPos(Z.value,G,!0)),ne=Math.round(w.bbox.left+w.bbox.width),se=Math.round(w.valToPos(Z.value,G,!0));k.beginPath(),k.moveTo(X,Y),k.lineTo(ne,se),k.strokeStyle=H.toString(),k.stroke()}}function O(w,G,_,K){let k=w.ctx,z=(0,m.KV)(w,G,_.map(W=>{let Z=(0,h.Z)(K.visualization.getColorByName(W.color));return Z.getAlpha()===1&&Z.setAlpha(.15),[W.value,Z.toString()]}),!0);k.fillStyle=z,k.fillRect(w.bbox.left,w.bbox.top,w.bbox.width,w.bbox.height)}const{scaleKey:R,thresholds:I,theme:M,config:x,hardMin:L,hardMax:S,softMin:U,softMax:N}=P;return w=>{const G=w.ctx,{min:_,max:K}=w.scales.x,{min:k,max:z}=w.scales[R];if(_==null||K==null||k==null||z==null)return;let{steps:W,mode:Z}=I;if(Z===s.H.Percentage){let[H,X]=(0,m.A9)(w,R,L,S,U,N),Y=X-H;W=W.map(ne=>({...ne,value:H+Y*(ne.value/100)}))}switch(G.save(),x.mode){case o.i3.Line:case o.i3.Dashed:T(w,R,W,M);break;case o.i3.Area:O(w,R,W,M);break;case o.i3.LineAndArea:case o.i3.DashedAndArea:O(w,R,W,M),T(w,R,W,M)}G.restore()}}const D={drag:{setScale:!1},points:{size:(P,b)=>P.series[b].points.size*2,width:(P,b,T)=>T/4},focus:{prox:30}};class C{constructor(b=i.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=T=>{let O=new Date(T);return this.tz?a.Z.tzDate(O,this.tz):O},this.tz=(0,r.Pr)(b,Date.now())?.ianaName}addHook(b,T){(0,g.Zp)("UPlotConfigBuilder",!1,"addHook",b),this.hooks[b]||(this.hooks[b]=[]),this.hooks[b].push(T)}addThresholds(b){this.thresholds[b.scaleKey]||(this.thresholds[b.scaleKey]=b,this.addHook("drawClear",y(b)))}addAxis(b){b.placement=b.placement??o.LB.Auto,b.grid=b.grid??{};let T=b.scaleKey;if(T==="x"&&(T+=b.timeZone??""),this.axes[T]){this.axes[T].merge(b);return}b.placement===o.LB.Auto&&(b.placement=this.hasLeftAxis?o.LB.Right:o.LB.Left),b.placement===o.LB.Left&&(this.hasLeftAxis=!0),b.placement===o.LB.Hidden&&(b.grid.show=!1,b.size=0),this.axes[T]=new u.ff(b)}getAxisPlacement(b){return this.axes[b]?.props.placement??o.LB.Left}setCursor(b){this.cursor=(0,n.merge)({},this.cursor,b)}setMode(b){this.mode=b}setSelect(b){this.select=b}addSeries(b){this.series.push(new v(b))}getSeries(){return this.series}addScale(b){const T=this.scales.find(O=>O.props.scaleKey===b.scaleKey);if(T){T.merge(b);return}this.scales.push(new c.I(b))}addBand(b){this.bands.push(b)}setStackingGroups(b){this.stackingGroups=b}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(b){this.tooltipInterpolator=b}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(b){this.prepData=T=>(this.frames=T,b(T,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(b){this.padding=b}getConfig(){if(this.cachedConfig)return this.cachedConfig;const b={...g.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};b.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(O=>O.getConfig()),b.series=[...b.series,...this.series.map(O=>O.getConfig())],b.scales=this.scales.reduce((O,R)=>({...O,...R.getConfig()}),{}),b.hooks=this.hooks,b.select=this.select;const T=(O="")=>(R,I)=>{let M=R.series[I].points._stroke;if(typeof M!="string"){let x=this.frames[0].fields[I];M=x.display(x.values[R.cursor.idxs[I]]).color}return M+O};return b.cursor=(0,n.merge)({},D,{points:{stroke:T("80"),fill:T()}},this.cursor),b.tzDate=this.tzDate,Array.isArray(this.padding)&&(b.padding=this.padding),this.stackingGroups.forEach(O=>{(0,g.Kq)(O).forEach(R=>{this.addBand(R)})}),this.bands.length&&(b.bands=this.bands),this.cachedConfig=b,b}ensureNonOverlappingAxes(b){const T=b.find(I=>I.props.scaleKey==="x"),O=b.filter(I=>I.props.grid?.show===void 0),R=O.findIndex(I=>I.props.placement===o.LB.Left||I.props.placement===o.LB.Right||I.props.placement===o.LB.Bottom&&I!==T);for(let I=0;I<O.length;I++)O[I]===T||I===R?O[I].props.grid.show=!0:O[I].props.grid.show=!1;return b}}},1693:(Q,A,e)=>{"use strict";e.d(A,{I:()=>g,V:()=>u});var n=e(35560),a=e(48493),i=e(86850),r=e(71199),o=e(18700);class g extends o.L{merge(l){this.props.min=u("min",this.props.min,l.min),this.props.max=u("max",this.props.max,l.max)}getConfig(){let{isTime:l,scaleKey:d,min:f,max:m,softMin:v,softMax:E,range:p,direction:h,orientation:s,centeredZero:y,decimals:D}=this.props;const C=this.props.distribution,P=l?{}:{distr:C===r.wf.Symlog?4:C===r.wf.Log?3:C===r.wf.Ordinal?2:1,log:C===r.wf.Log||C===r.wf.Symlog?this.props.log??2:void 0,asinh:C===r.wf.Symlog?this.props.linearThreshold??1:void 0};if(C===r.wf.Log){let S=this.props.log,U=S===2?Math.log2:Math.log10;f!=null&&(f<=0?f=null:f=S**Math.floor(U(f))),m!=null&&(m<=0?m=null:m=S**Math.ceil(U(m))),v!=null&&(v<=0?v=null:v=S**Math.floor(U(v))),E!=null&&(E<=0?E=null:E=S**Math.ceil(U(E)))}let b=v==null?3:1,T=E==null?3:1;const O={min:{pad:.1,hard:f??-1/0,soft:v||0,mode:b},max:{pad:.1,hard:m??1/0,soft:E||0,mode:T}};let R=v==null&&f!=null,I=E==null&&m!=null,M=R&&I;const x=(S,U,N,w)=>{const G=S.scales[w];let _=[U,N];if(w==="x"&&!l&&C===r.wf.Linear||!M&&U==null&&N==null)return _;let K=G.log??10;if(G.distr===1||G.distr===2||G.distr===4){if(y){let k=Math.abs(U),z=Math.abs(N),W=Math.max(k,z);W===0&&(W=80),U=-W,N=W}G.distr===4?_=n.Z.rangeAsinh(U,N,K,!0):_=n.Z.rangeNum(R?f:U,I?m:N,O)}else G.distr===3&&(_=n.Z.rangeLog(f??U,m??N,K,!0));if(D===0)if(G.distr===1||G.distr===2)_[0]=(0,a.mB)(_[0],1),_[1]=(0,a.UO)(_[1],1);else if(G.distr===3){let k=G.log===2?Math.log2:Math.log10;if(_[0]<=1)_[0]=1;else{let W=Math.floor(k(_[0]));_[0]=K**W}let z=Math.ceil(k(_[1]));_[1]=K**z,_[0]===_[1]&&(_[1]*=K)}else G.distr===4&&(_[0]=(0,a.mB)(_[0],1),_[1]=(0,a.UO)(_[1],1));return(G.distr===1||G.distr===4)&&(R&&(_[0]=f),I&&(_[1]=m)),_[0]>=_[1]&&(_[0]=G.distr===3?1:0,_[1]=100),_};let L=!l&&!M;return(0,i.br)(d)&&(L=!1,p=[0,1]),{[d]:{time:l,auto:L,range:p??x,dir:h,ori:s,...P}}}}function u(c,l,d){const f=l!=null,m=d!=null;return f?m?c==="min"?l<d?l:d:l>d?l:d:l:d}},56035:(Q,A,e)=>{"use strict";e.d(A,{A9:()=>v,DT:()=>c,KV:()=>f,P2:()=>p,oN:()=>l});var n=e(37479),a=e(77081),i=e(91507),r=e(47423),o=e(71199),g=e(90854);function u(h,s,y){let D=0,C=0,P=0,b=0;return h===3?(C=s.top,b=s.top+s.height):h===2?(D=s.left+s.width,P=s.left):h===1?(C=s.top+s.height,b=s.top):h===0&&(D=s.left,P=s.left+s.width),y.createLinearGradient(D,C,P,b)}function c(h,s){return(y,D)=>{const C=(0,g.AE)(),P=u(y.scales.x.ori===o.wN.Horizontal?3:2,y.bbox,C);return P.addColorStop(0,a.alpha(h,s)),P.addColorStop(1,a.alpha(h,0)),P}}function l(h,s,y){return(D,C)=>{const P=(0,g.AE)(),b=u(D.scales.x.ori===o.wN.Horizontal?3:2,D.bbox,P),T=(0,n.Z)(h).spin(-15),O=(0,n.Z)(h).spin(15);return y.isDark?(b.addColorStop(0,O.lighten(10).setAlpha(s).toString()),b.addColorStop(1,T.darken(10).setAlpha(s).toString())):(b.addColorStop(0,O.lighten(10).setAlpha(s).toString()),b.addColorStop(1,T.setAlpha(s).toString())),b}}var d=(h=>(h[h.Right=0]="Right",h[h.Up=1]="Up",h[h.Left=2]="Left",h[h.Down=3]="Down",h))(d||{});function f(h,s,y,D=!1){let C=h.scales[s],P=null,b=null;for(let _=0;_<y.length;_++){let K=y[_][0];if((K<=C.min||P==null)&&(P=_),b=_,K>=C.max)break}if(P===b)return y[P][1];let T=y[P][0],O=y[b][0];T===-1/0&&(T=C.min),O===1/0&&(O=C.max);let R=Math.round(h.valToPos(T,s,!0)),I=Math.round(h.valToPos(O,s,!0)),M=R-I;if(M===0)return y[b][1];let x,L,S,U;h.scales.x.ori===o.wN.Horizontal?(x=S=0,L=R,U=I):(L=U=0,x=R,S=I);let w=(0,g.AE)().createLinearGradient(x,L,S,U),G;for(let _=P;_<=b;_++){let K=y[_],k=_===P?R:_===b?I:Math.round(h.valToPos(K[0],s,!0)),z=(R-k)/M;D&&_>P&&w.addColorStop(z,G),w.addColorStop(z,G=K[1])}return w}function m(h,s){let y=h.scales[s],D=1/0,C=-1/0;return h.series.forEach((P,b)=>{if(P.show&&P.scale===s)if(P.min==null){let T=h.data[b];for(let O=0;O<T.length;O++)T[O]!=null&&(D=Math.min(D,T[O]),C=Math.max(C,T[O]))}else D=Math.min(D,P.min),C=Math.max(C,P.max)}),C===D&&(D=y.min,C=y.max),[D,C]}function v(h,s,y,D,C,P){let b=y??C??null,T=D??P??null;if(b==null||T==null){let[O,R]=m(h,s);b=b??O??0,T=T??R??100}return[b,T]}function E(h){return h==="transparent"||h[0]==="#"&&h.slice(-2)==="00"}function p(h,s,y,D,C,P,b,T){if(!y)throw Error("Missing colorMode required for color scheme gradients");if(!D)throw Error("Missing thresholds required for color scheme gradients");return(O,R)=>{let I=O.series[R].scale,M="";if(y.id===i.S.Thresholds)if(D.mode===r.H.Absolute){const x=D.steps.map(L=>[L.value,E(L.color)?"#0000":a.alpha(s.visualization.getColorByName(L.color),h)]);M=f(O,I,x,!0)}else{const[x,L]=v(O,I,C,P,b,T),S=L-x,U=D.steps.map(N=>[x+S*(N.value/100),a.alpha(s.visualization.getColorByName(N.color),h)]);M=f(O,I,U,!0)}else if(y.getColors){const x=y.getColors(s),[L,S]=v(O,I,C,P,b,T),U=S-L,N=x.map((w,G)=>[L+U*(G/(x.length-1)),a.alpha(s.visualization.getColorByName(w),h)]);M=f(O,I,N,!1)}return M}}},24402:(Q,A,e)=>{"use strict";e.d(A,{T:()=>o});var n=e(31733),a=e(99640),i=e(49203),r=e(71333);function o({id:g,events:u,renderEventMarker:c,mapEventToXYCoords:l,config:d}){const f=(0,n.useRef)(),[m,v]=(0,n.useState)(0),E=(0,a.Z)();(0,n.useLayoutEffect)(()=>{d.addHook("init",h=>{f.current=h}),d.addHook("draw",()=>{E()&&v(h=>h+1)})},[d,v]);const p=(0,n.useMemo)(()=>{const h=[];if(!f.current||u.length===0)return h;for(let s=0;s<u.length;s++){const y=u[s];for(let D=0;D<y.length;D++){const C=l(y,{fieldIndex:D,frameIndex:s});C&&h.push(n.createElement(i.J,{...C,key:`${g}-marker-${s}-${D}`},c(y,{fieldIndex:D,frameIndex:s})))}}return n.createElement(n.Fragment,null,h)},[u,c,m]);return f.current?n.createElement(r.K,{left:f.current.bbox.left/window.devicePixelRatio,top:f.current.bbox.top/window.devicePixelRatio},p):null}},49203:(Q,A,e)=>{"use strict";e.d(A,{J:()=>a});var n=e(31733);const a=({x:i,y:r,children:o})=>n.createElement("div",{style:{position:"absolute",top:`${r}px`,left:`${i}px`}},o)},71333:(Q,A,e)=>{"use strict";e.d(A,{K:()=>i});var n=e(76932),a=e(31733);const i=({children:r,left:o,top:g})=>{const u=(0,a.useMemo)(()=>(0,n.css)({position:"absolute",overflow:"visible",left:`${o}px`,top:`${g}px`}),[o,g]);return a.createElement("div",{className:u},r)}},93492:(Q,A,e)=>{"use strict";e.d(A,{Jx:()=>a.J,K2:()=>i.K,TZ:()=>n.T});var n=e(24402),a=e(49203),i=e(71333)},50116:(Q,A,e)=>{"use strict";e.d(A,{z:()=>i});var n=e(71199),a=e(18700);function i(o,g){const u="na",c=`${o.min!==void 0?o.min:u}-${o.max!==void 0?o.max:u}`,l=`${o.custom?.axisSoftMin!==void 0?o.custom.axisSoftMin:u}-${o.custom?.axisSoftMax!==void 0?o.custom.axisSoftMax:u}`,d=`${o.custom?.axisPlacement!==void 0?o.custom?.axisPlacement:n.LB.Auto}`,f=o.unit??a.j,m=o.custom?.scaleDistribution?r(o.custom.scaleDistribution):n.wf.Linear,v=o.custom?.axisLabel?o.custom.axisLabel:u;return`${f}/${c}/${l}/${d}/${m}/${v}/${g}`}function r(o){return o.type===n.wf.Log?`${o.type}${o.log}`:o.type}},52078:(Q,A,e)=>{"use strict";e.d(A,{C:()=>c});var n=e(69781),a=e.n(n),i=e(31733);const r=.1,o=2,g=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),u=l=>{let d=l.root.closest("[tabindex]"),f=new Set,m=null,v=null;if(!d)return;const E=(P,b)=>{const{cursor:T}=l;if(T.left===void 0||T.top===void 0)return;const{width:O,height:R}=l.over.style,[I,M]=[Math.floor(parseFloat(O)),Math.floor(parseFloat(R))];l.setCursor({left:(0,n.clamp)(T.left+P,0,I),top:(0,n.clamp)(T.top+b,0,M)})},p=P=>{if(f.size===0||!l){v=null;return}const O=(P-(v??P))*r;let R=0,I=0;f.has("ArrowUp")&&(I-=O),f.has("ArrowDown")&&(I+=O),f.has("ArrowLeft")&&(R-=O),f.has("ArrowRight")&&(R+=O),f.has("Shift")&&(R*=o,I*=o),E(R,I);const{cursor:M}=l;if(f.has(" ")&&M){const x=Number(l.over.style.height.slice(0,-2));l.setSelect({left:M.left<m?M.left:m,top:0,width:Math.abs(M.left-(m??M.left)),height:x},!1)}v=P,window.requestAnimationFrame(p)},h=P=>{if(P.key==="Tab"){l.setCursor({left:-5,top:-5});return}if(!g.has(P.key))return;if(P.preventDefault(),P.stopPropagation(),!f.has(P.key)){const T=f.size===0;f.add(P.key),m=P.key===" "&&m===null?l.cursor.left:m,T&&window.requestAnimationFrame(p)}},s=P=>{g.has(P.key)&&(f.delete(P.key),P.key===" "&&(P.preventDefault(),P.stopPropagation(),l.setSelect(l.select),m=null))},y=()=>{if(!d?.matches(":focus-visible"))return;const P=parseFloat(l.over.style.width),b=parseFloat(l.over.style.height);l.setCursor({left:P/2,top:b/2})},D=()=>{v=null,m=null,f.clear(),l.setSelect({left:0,top:0,width:0,height:0},!1)};d.addEventListener("keydown",h),d.addEventListener("keyup",s),d.addEventListener("focus",y),d.addEventListener("blur",D);const C=()=>{d?.removeEventListener("keydown",h),d?.removeEventListener("keyup",s),d?.removeEventListener("focus",y),d?.removeEventListener("blur",D),d=null};(l.hooks.destroy??=[]).push(C)},c=({config:l})=>((0,i.useLayoutEffect)(()=>l.addHook("init",u),[l]),null)},33255:(Q,A,e)=>{"use strict";e.d(A,{_:()=>C,i:()=>y});var n=e(76932),a=e(31733),i=e(99640),r=e(42692),o=e(28073),g=e(91507),u=e(27957),c=e(86850),l=e(85666),d=e(11386),f=e(71199),m=e(76067),v=e(25108),E=e(53910),p=e(40429),h=e(80431);const s=10,y=({mode:b=f.f3.Single,sortOrder:T=f.As.None,sync:O,timeZone:R,config:I,renderTooltip:M,...x})=>{const L=(0,a.useRef)(),S=(0,m.l4)(),[U,N]=(0,a.useState)(null),[w,G]=(0,a.useState)(null),[_,K]=(0,a.useState)([]),[k,z]=(0,a.useState)(null),[W,Z]=(0,a.useState)(!1),H=(0,i.Z)();let X=null;const Y="TooltipPlugin",ne=(0,m.wW)(P);if((0,a.useEffect)(()=>{(0,h.Zp)(Y,!0,`Focused series: ${U}, focused point: ${w}`)},[w,U]),(0,a.useLayoutEffect)(()=>{let me;const oe=()=>{H()&&(Z(!0),L.current?.root.classList.add("plot-active"))},fe=()=>{H()&&(z(null),Z(!1),L.current?.root.classList.remove("plot-active"))};I.addHook("syncRect",(pe,Me)=>me=Me),I.addHook("init",pe=>{L.current=pe,pe.over.addEventListener("mouseenter",oe),pe.over.addEventListener("mouseleave",fe),X=pe.root.closest("[tabindex]"),X&&(X.addEventListener("focus",oe),X.addEventListener("blur",fe)),O&&O()===r.m.Crosshair&&pe.root.classList.add("shared-crosshair")});const ve=I.getTooltipInterpolator();return ve?I.addHook("setCursor",pe=>{ve(N,G,Me=>{if(Me){z(null);return}if(!me)return;const{x:Pe,y:Ee}=C(pe,me);Pe!==void 0&&Ee!==void 0&&z({x:Pe,y:Ee})},pe)}):(I.addHook("setLegend",pe=>{H()&&(G(pe.legend.idx),K(pe.legend.idxs.slice()))}),I.addHook("setCursor",pe=>{if(!me||!H())return;const{x:Me,y:Pe}=C(pe,me);z(Me!==void 0&&Pe!==void 0?{x:Me,y:Pe}:null)}),I.addHook("setSeries",(pe,Me)=>{H()&&N(Me)})),()=>{z(null),L.current&&(L.current.over.removeEventListener("mouseleave",fe),L.current.over.removeEventListener("mouseenter",oe),X&&(X.removeEventListener("focus",oe),X.removeEventListener("blur",fe)))}},[I,z,Z,G,K]),w===null||!W&&O&&O()===r.m.Crosshair)return null;let se=x.data.fields[0];if(!se)return null;const re=se.display||(0,o.U)({field:se,timeZone:R,theme:S});let ge=null,q=re(se.values[w]).text;if(M)ge=M(x.data,U,w);else{if(b===f.f3.Single&&U!==null){const me=x.data.fields[U];if(!me)return null;const oe=_?.[U]??w;q=re(se.values[oe]).text;const ve=(me.display||(0,o.U)({field:me,timeZone:R,theme:S}))(me.values[oe]);ge=a.createElement(E.c,{series:[{color:ve.color||g.R,label:(0,u.CZ)(me,x.data,x.frames),value:ve?(0,c.zc)(ve):null}],timestamp:q})}if(b===f.f3.Multi){let me=[];const oe=x.data,fe=oe.fields,ve=[];for(let pe=0;pe<fe.length;pe++){const Me=oe.fields[pe];if(!Me||Me===se||Me.type===l.fS.time||Me.type!==l.fS.number||Me.config.custom?.hideFrom?.tooltip||Me.config.custom?.hideFrom?.viz)continue;const Pe=x.data.fields[pe].values[_[pe]],Ee=Me.display(Pe);ve.push(Pe),me.push({color:Ee.color||g.R,label:(0,u.CZ)(Me,oe,x.frames),value:Ee?(0,c.zc)(Ee):null,isActive:U===pe})}if(T!==f.As.None){const pe=[...me],Me=d.sortValues(T);me.sort((Pe,Ee)=>{const he=pe.indexOf(Pe),Le=pe.indexOf(Ee);return Me(ve[he],ve[Le])})}ge=a.createElement(E.c,{series:me,timestamp:q})}}return a.createElement(v.h_,{className:W?ne.tooltipWrapper:void 0},ge&&k&&a.createElement(p.S,{position:{x:k.x,y:k.y},offset:{x:s,y:s}},ge))};function D({left:b,top:T},O){return b===void 0||T===void 0?!1:b<0||b>O.width||T<0||T>O.height}function C(b,T){let O,R;const I=b.cursor.left||0,M=b.cursor.top||0;if(D(b.cursor,T)){const x=b.posToIdx(I);if(M<0||M>T.height){let L=(0,h.ah)(b,x);L&&(R=T.top+L,I>=0&&I<=T.width&&(O=T.left+b.valToPos(b.data[0][b.posToIdx(I)],b.series[0].scale)))}}else O=T.left+I,R=T.top+M;return{x:O,y:R}}const P=b=>({tooltipWrapper:(0,n.css)({"z-index":b.zIndex.portal+1+" !important"})})},73763:(Q,A,e)=>{"use strict";e.d(A,{ui:()=>c,cm:()=>l,x2:()=>E});var n=e(76932),a=e(31733),i=e(45607),r=e(76067),o=e(41354);const g=({onClick:h,"aria-label":s,style:y})=>{const D=(0,r.wW)(u);return a.createElement(o.h,{"aria-label":s??"Close",className:D,name:"times",onClick:h,style:y})},u=h=>(0,n.css)({position:"absolute",margin:"0px",right:h.spacing(1),top:h.spacing(1.25)}),c=280;var l=(h=>(h[h.xOne=0]="xOne",h[h.xAll=1]="xAll",h[h.xyOne=2]="xyOne",h))(l||{});function d(h,s){return{...h,...s,style:{...h.style,...s.style}}}const f={style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}},m=5,v=h=>h!=null&&!h.ctrlKey&&!h.metaKey,E=({config:h,hoverMode:s,render:y,clientZoom:D=!1,queryZoom:C})=>{const P=(0,a.useRef)(null),[{plot:b,isHovering:T,isPinned:O,contents:R,style:I,dismiss:M},x]=(0,a.useReducer)(d,f),L=(0,a.useRef)(),S=(0,r.wW)(p),U=(0,a.useRef)(y);return U.current=y,(0,a.useLayoutEffect)(()=>{L.current={width:0,height:0,observer:new ResizeObserver(fe=>{let ve=L.current;for(const pe of fe)pe.borderBoxSize?.length>0?(ve.width=pe.borderBoxSize[0].inlineSize,ve.height=pe.borderBoxSize[0].blockSize):(ve.width=pe.contentRect.width,ve.height=pe.contentRect.height)})};let N=!1,w=!1,G=b,_=T,K=O,k=I,z=0,W=0,Z=document.documentElement,H=Z.clientWidth-16,X=Z.clientHeight-16;window.addEventListener("resize",fe=>{H=Z.clientWidth-5,X=Z.clientHeight-5});let Y=b?.cursor.idxs.slice(),ne=null,se=!1,re=!1;const ge=(fe=!1)=>{se||(_?queueMicrotask(me):setTimeout(me,100),se=!0),fe&&(re=!0)},q=fe=>{fe.target.closest(`.${S.tooltipWrapper}`)!==P.current&&oe()},me=()=>{se=!1,re&&(k={pointerEvents:K?"all":"none"},P.current?.closest(".react-grid-item")?.classList.toggle("context-menu-open",K),G.cursor._lock=K,K?(document.addEventListener("mousedown",q,!0),document.addEventListener("keydown",q,!0)):(document.removeEventListener("mousedown",q,!0),document.removeEventListener("keydown",q,!0)),re=!1);let fe={style:k,isPinned:K,isHovering:_,contents:_?U.current(G,Y,ne,K,oe):null,dismiss:oe};x(fe)},oe=()=>{K=!1,_=!1,G.setCursor({left:-10,top:-10}),ge(!0)};h.addHook("init",fe=>{x({plot:G=fe}),D&&fe.over.addEventListener("mousedown",ve=>{if(v(ve)&&ve.button===0&&ve.shiftKey){w=!0,fe.cursor.drag.x=!1,fe.cursor.drag.y=!0;let pe=Me=>{fe.cursor.drag.x=!0,fe.cursor.drag.y=!1,document.removeEventListener("mouseup",pe,!0)};document.addEventListener("mouseup",pe,!0)}},!0),fe.over.addEventListener("click",ve=>{_&&ne!=null&&!K&&ve.target===fe.over&&(K=!0,ge(!0))})}),h.addHook("setSelect",fe=>{if((D||C!=null)&&v(fe.cursor.event)){if(D&&w){if(fe.select.height>=m){for(let ve in fe.scales)if(ve!=="x"){const pe=fe.posToVal(fe.select.top,ve),Me=fe.posToVal(fe.select.top+fe.select.height,ve);fe.setScale(ve,{min:Me,max:pe})}N=!0}w=!1}else if(C!=null&&fe.select.width>=m){const ve=fe.posToVal(fe.select.left,"x"),pe=fe.posToVal(fe.select.left+fe.select.width,"x");C({from:ve,to:pe}),N=!1}}fe.setSelect({left:0,width:0,top:0,height:0},!1)}),(D||C!=null)&&h.setCursor({bind:{dblclick:fe=>()=>{if(!v(fe.cursor.event))return null;if(D&&N){for(let ve in fe.scales)ve!=="x"&&fe.setScale(ve,{min:null,max:null});N=!1}else if(C!=null){let ve=fe.scales.x;const pe=ve.min,Me=ve.max,Pe=(Me-pe)/2;C({from:pe-Pe,to:Me+Pe})}return null}}}),h.addHook("setData",fe=>{N=!1,w=!1}),h.addHook("setLegend",fe=>{Y=G?.cursor.idxs.slice();let ve=Y.findIndex((Me,Pe)=>Pe>0&&Me!=null),pe=ve!==-1;s===2&&(ne=ve),pe?_||(_=!0):_&&(_=!1),ge()}),h.addHook("setSeries",(fe,ve)=>{ne=ve,ge()}),h.addHook("setCursor",fe=>{let{left:ve=-10,top:pe=-10}=fe.cursor;if(ve>=0||pe>=0){let{width:Me,height:Pe}=L.current,Ee=fe.rect.left+ve,he=fe.rect.top+pe;W?he+Pe<X||he-Pe<0?W=0:W!==-Pe&&(W=-Pe):he+Pe>X&&he-Pe>=0&&(W=-Pe),z?Ee+Me<H||Ee-Me<0?z=0:z!==-Me&&(z=-Me):Ee+Me>H&&Ee-Me>=0&&(z=-Me);const ot=`${z!==0?"translateX(-100%)":""} translateX(${ve}px) ${W!==0?"translateY(-100%)":""} translateY(${pe}px)`;_&&(P.current!=null?P.current.style.transform=ot:(k.transform=ot,ge()))}})},[h]),(0,a.useLayoutEffect)(()=>{const N=L.current;P.current!=null&&N.observer.observe(P.current)},[P.current]),b&&T?(0,i.createPortal)(a.createElement("div",{className:S.tooltipWrapper,style:I,ref:P},O&&a.createElement(g,{onClick:M}),R),b.over):null},p=h=>({tooltipWrapper:(0,n.css)({top:0,left:0,zIndex:h.zIndex.tooltip,whiteSpace:"pre",borderRadius:h.shape.radius.default,position:"absolute",background:h.colors.background.primary,border:`1px solid ${h.colors.border.weak}`,boxShadow:`0 4px 8px ${h.colors.background.primary}`,userSelect:"text"})})},9172:(Q,A,e)=>{"use strict";e.d(A,{R:()=>r});var n=e(31733);const a=5,i=o=>o!=null&&!o.ctrlKey&&!o.metaKey,r=({onZoom:o,config:g,withZoomY:u=!1})=>((0,n.useLayoutEffect)(()=>{let c=!1,l=!1;u&&g.addHook("init",d=>{d.over.addEventListener("mousedown",f=>{if(i(f)&&f.button===0&&f.shiftKey){l=!0,d.cursor.drag.x=!1,d.cursor.drag.y=!0;let m=v=>{d.cursor.drag.x=!0,d.cursor.drag.y=!1,document.removeEventListener("mouseup",m,!0)};document.addEventListener("mouseup",m,!0)}},!0)}),g.addHook("setSelect",d=>{if(i(d.cursor.event)){if(u&&l){if(d.select.height>=a){for(let f in d.scales)if(f!=="x"){const m=d.posToVal(d.select.top,f),v=d.posToVal(d.select.top+d.select.height,f);d.setScale(f,{min:v,max:m})}c=!0}l=!1}else if(d.select.width>=a){const f=d.posToVal(d.select.left,"x"),m=d.posToVal(d.select.left+d.select.width,"x");o({from:f,to:m}),c=!1}}d.setSelect({left:0,width:0,top:0,height:0},!1)}),g.setCursor({bind:{dblclick:d=>()=>{if(!i(d.cursor.event))return null;if(u&&c){for(let f in d.scales)f!=="x"&&d.setScale(f,{min:null,max:null});c=!1}else{let f=d.scales.x;const m=f.min,v=f.max,E=(v-m)/2;o({from:m-E,to:v+E})}return null}}})},[g]),null)},60378:(Q,A,e)=>{"use strict";e.d(A,{Cm:()=>r.C,Rb:()=>n.R,ii:()=>a.i,x2:()=>i.x2});var n=e(9172),a=e(33255),i=e(73763),r=e(52078)},18700:(Q,A,e)=>{"use strict";e.d(A,{L:()=>a,j:()=>n});const n="__fixed";class a{constructor(r){this.props=r}}},80431:(Q,A,e)=>{"use strict";e.d(A,{Bj:()=>E,Kq:()=>m,Zp:()=>D,ah:()=>p,i7:()=>v,qt:()=>d});var n=e(85666),a=e(70816),i=e(71199),r=e(56586),o=e(56634),g=e(50116);const u=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function c(C){return C.replace(u,P=>`{${P}}`)}const l=(C,P,b)=>{let T=P%2?b[0]||b[2]:b[1]||b[3];return b[P]||!T?0:8},d={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[l,l,l,l],series:[],hooks:{}};var f=(C=>(C[C.Pos=1]="Pos",C[C.Neg=-1]="Neg",C))(f||{});function m(C){let P=[],{series:b,dir:T}=C,O=b.length-1,R=b.slice().reverse();return R.forEach((I,M)=>{if(M!==O){let x=R[M+1];P.push({series:[I,x],dir:-1*T})}}),P}function v(C){let P=new Map;return C.fields.forEach(({config:b,values:T,type:O},R)=>{if(R===0)return;let{custom:I}=b;if(I==null||I.hideFrom?.viz)return;let{stacking:M}=I;if(M==null)return;let{mode:x,group:L}=M;if(x===i.o0.None)return;let S=I.transform,U=h(S,T),N=I.drawStyle,w=N===i.l8.Bars?I.barAlignment:N===i.l8.Line?I.lineInterpolation:null,G=`${U}|${x}|${L}|${(0,g.z)(b,O)}|${N}|${w}`,_=P.get(G);_==null&&(_={series:[],dir:U},P.set(G,_)),_.series.push(R)}),[...P.values()]}function E(C,P,b){let T=Array(C.fields.length),O=P.length,R=C.length,I=O>0?Array(R).fill(0):[],M=O>0?Array(R).fill(!1):[],x=Array.from({length:O},()=>I.slice()),L=Array.from({length:O},()=>M.slice());if(P.forEach((S,U)=>{let N=L[U];S.series.forEach(w=>{let G=C.fields[w];if(G.config.custom?.hideFrom?.viz)return;let _=G.values;for(let K=0;K<R;K++)_[K]!=null&&(N[K]=!0)})}),C.fields.forEach((S,U)=>{let N=S.values;if(U===0){S.type===n.fS.time?T[U]=(0,a.J_)(S).values:T[U]=N;return}let{custom:w}=S.config;if(!w||w.hideFrom?.viz){T[U]=N;return}if(w.transform===i.pR.Constant){let _=N.findIndex(k=>k!=null),K=N[_];N=Array(N.length).fill(void 0),N[_]=K}else if(N=N.slice(),w.transform===i.pR.NegativeY)for(let _=0;_<N.length;_++)N[_]!=null&&(N[_]*=-1);let G=w.stacking?.mode;if(!G||G===i.o0.None)T[U]=N;else{let _=P.findIndex(W=>W.series.indexOf(U)>-1),K=x[_],k=L[_],z=T[U]=Array(R);for(let W=0;W<R;W++){let Z=N[W];Z!=null?z[W]=K[W]+=Z:z[W]=k[W]?K[W]:Z}}}),b){let S=T.map((U,N)=>{let w=P.findIndex(G=>G.series.indexOf(N)>-1);return w!==-1?x[w]:U});b({totals:S})}return C.fields.forEach((S,U)=>{if(U===0||S.config.custom?.hideFrom?.viz)return;if(S.config.custom?.stacking?.mode===i.o0.Percent){let w=P.findIndex(k=>k.series.indexOf(U)>-1),G=x[w],_=P[w],K=T[U];for(let k=0;k<R;k++){let z=K[k];z!=null&&(K[k]=G[k]===0?0:_.dir*(z/G[k]))}}}),T}function p(C,P){let b,T=1,O=1,R=C.data[1][P],I=C.data[1][P];for(let M=1;M<C.data.length;M++){const L=C.data[M][P];L!=null&&(R==null?R=L:L>R&&(R=C.data[M][P],T=M),I==null?I=L:L<I&&(I=C.data[M][P],O=M))}return I==null&&R==null?b=void 0:I!=null&&R!=null?b=(C.valToPos(I,C.series[O].scale)+C.valToPos(R,C.series[T].scale))/2:b=C.valToPos(I||R,C.series[T||O].scale),b!==void 0&&b<0&&(b=C.bbox.height/devicePixelRatio),b}function h(C,P){const b=s(P);return C===i.pR.NegativeY?b?1:-1:b?-1:1}function s(C,P=100){const b=C.length;if(b===0)return!1;let T=0,O=b-1;for(;T<=O&&C[T]==null;)T++;for(;O>=T&&C[O]==null;)O--;let R=0,I=0;if(O>=T){const M=Math.max(1,Math.floor((O-T+1)/P));for(let x=T;x<=O;x+=M){const L=C[x];L!=null&&typeof L=="number"&&(L<0||Object.is(L,-0)?R++:L>0&&I++)}if(R>I)return!0}return!1}const y=(0,o.h)("uPlot"),D=y.logger;(0,r.x)("graphng",void 0,y)},69153:(Q,A,e)=>{"use strict";e.d(A,{k:()=>h});var n=e(341),a=e.n(n),i=e(69781),r=e(31733),o=e(42684),g=e(71199),u=e(87563),c=e(6037),l=e(53910),d=e(32603);const f=({dimensions:y,activeDimensions:D,pos:C,timeZone:P})=>{let b=null;if(D.xAxis===null)return null;D.yAxis&&(b=D.yAxis[0]);const T=D.xAxis[1]?(0,o.jC)(y.xAxis,D.xAxis[0],D.xAxis[1]):C.x,O=(0,d.wu)(y.yAxis.columns,y.xAxis.columns,T,P),R=O.time,I=O.results.map((M,x)=>({color:M.color,label:M.label,value:M.value,isActive:b===x}));return r.createElement(l.c,{series:I,timestamp:R})};f.displayName="MultiModeGraphTooltip";var m=e(86850),v=e(27957);const E=({dimensions:y,activeDimensions:D,timeZone:C})=>{if(D.yAxis===null||D.yAxis[1]===void 0||D.xAxis===null||D.xAxis[1]===void 0)return null;const P=(0,o.jC)(y.xAxis,D.xAxis[0],D.xAxis[1]),b=(0,o.$q)(y.xAxis,D.xAxis[0]),T=b.display?(0,m.zc)(b.display(P)):P,O=(0,o.$q)(y.yAxis,D.yAxis[0]),R=(0,o.jC)(y.yAxis,D.yAxis[0],D.yAxis[1]),I=O.display,M=I(R);return r.createElement(l.c,{series:[{color:M.color,label:(0,v.CZ)(O),value:(0,m.zc)(M)}],timestamp:T})};E.displayName="SingleModeGraphTooltip";const p=({mode:y=g.f3.Single,dimensions:D,activeDimensions:C,pos:P,timeZone:b})=>!C||!C.xAxis?null:y==="single"?r.createElement(E,{dimensions:D,activeDimensions:C,timeZone:b}):r.createElement(f,{dimensions:D,activeDimensions:C,pos:P,timeZone:b});p.displayName="GraphTooltip";class h extends r.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(D,C)=>{const{onHorizontalRegionSelected:P}=this.props;P&&P(C.xaxis.from,C.xaxis.to)},this.onPlotHover=(D,C,P)=>{this.setState({isTooltipVisible:!0,activeItem:P,pos:C})},this.onPlotClick=(D,C,P)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:P,contextPos:C})},this.renderTooltip=()=>{const{children:D,series:C,timeZone:P}=this.props,{pos:b,activeItem:T,isTooltipVisible:O}=this.state;let R;if(!O||!b||C.length===0||(r.Children.forEach(D,G=>{if(R)return;(G&&G.type&&(G.type.displayName||G.type.name))===u.I.displayName&&(R=G)}),!R))return null;const I=R.props,M=I.mode||"single";if(!T&&M==="single")return null;const x=I.tooltipComponent||p,L=T?T.series.seriesIndex:0,S=T?T.dataIndex:void 0,U={xAxis:[L,S],yAxis:T?[T.series.seriesIndex,T.dataIndex]:null},N={dimensions:{xAxis:(0,o.q2)("xAxis",C.map(G=>G.timeField)),yAxis:(0,o.q2)("yAxis",C.map(G=>G.valueField))},activeDimensions:U,pos:b,mode:I.mode||g.f3.Single,timeZone:P},w=r.createElement(x,{...N});return r.cloneElement(R,{content:w,position:{x:b.pageX,y:b.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:D}=this.props,{contextPos:C,contextItem:P,isContextVisible:b}=this.state;if(!b||!C||!P||D.length===0)return null;const T=P?P.series.seriesIndex:0,O=P?P.dataIndex:void 0,R={xAxis:[T,O],yAxis:P?[P.series.seriesIndex,P.dataIndex]:null},I={xAxis:(0,o.q2)("xAxis",D.map(S=>S.timeField)),yAxis:(0,o.q2)("yAxis",D.map(S=>S.valueField))},M=()=>this.setState({isContextVisible:!1}),x=()=>({datapoint:P.datapoint,dataIndex:P.dataIndex,series:P.series,seriesIndex:P.series.seriesIndex,pageX:C.pageX,pageY:C.pageY}),L={x:C.pageX,y:C.pageY,onClose:M,getContextMenuSource:x,timeZone:this.props.timeZone,dimensions:I,contextDimensions:R};return r.createElement(c.w,{...L})},this.getBarWidth=()=>{const{series:D}=this.props;return Math.min(...D.map(C=>C.timeStep))}}componentDidUpdate(D,C){D!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=a()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(D){return D.length===0?[{show:!0,min:-1,max:1}]:(0,i.uniqBy)(D.map(C=>{const P=C.yAxis?C.yAxis.index:1,b=C.yAxis&&C.yAxis.min&&!isNaN(C.yAxis.min)?C.yAxis.min:null,T=C.yAxis&&C.yAxis.tickDecimals&&!isNaN(C.yAxis.tickDecimals)?C.yAxis.tickDecimals:null;return{show:!0,index:P,position:P===1?"left":"right",min:b,tickDecimals:T}}),C=>C.index)}draw(){if(this.element===null)return;const{width:D,series:C,timeRange:P,showLines:b,showBars:T,showPoints:O,isStacked:R,lineWidth:I,timeZone:M,onHorizontalRegionSelected:x}=this.props;if(!D)return;const L=D/100,S=P.from.valueOf(),U=P.to.valueOf(),N=this.getYAxes(C),w={legend:{show:!1},series:{stack:R,lines:{show:b,lineWidth:I,zero:!1},points:{show:O,fill:1,fillColor:!1,radius:2},bars:{show:T,fill:1,barWidth:T?this.getBarWidth()/1.5:1,zero:!1,lineWidth:I},shadowSize:0},xaxis:{timezone:M,show:!0,mode:"time",min:S,max:U,label:"Datetime",ticks:L,timeformat:(0,d.mc)(L,S,U),tickFormatter:d.sV},yaxes:N,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:x?"x":null,color:"#666"},crosshair:{mode:"x"}};try{a().plot(this.element,C.filter(G=>G.isVisible),w)}catch(G){throw console.error("Graph rendering error",G,w,C),new Error("Error rendering panel")}}render(){const{ariaLabel:D,height:C,width:P,series:b}=this.props,T=b.length===0,O=this.renderTooltip(),R=this.renderContextMenu();return r.createElement("div",{className:"graph-panel","aria-label":D},r.createElement("div",{className:"graph-panel__chart",ref:I=>this.element=I,style:{height:C,width:P},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),T&&r.createElement("div",{className:"datapoints-warning"},"No data"),O,R)}}h.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const s=null},6037:(Q,A,e)=>{"use strict";e.d(A,{b:()=>v,w:()=>m});var n=e(76932),a=e(31733),i=e(42684),r=e(40137),o=e(45502),g=e(60850),u=e(79106),c=e(85115),l=e(46213),d=e(97810),f=e(76067);const m=({getContextMenuSource:p,timeZone:h,itemsGroup:s,dimensions:y,contextDimensions:D,...C})=>{const P=p(),b=s?s.map(R=>({...R,items:R.items?.filter(I=>I.label)})):[],T=()=>{if(!P)return null;let R;if(y?.yAxis&&D?.yAxis?.[1]){const M=(0,i.jC)(y.yAxis,D.yAxis[0],D.yAxis[1]),x=P.series.valueField.display;R=x(M)}const I=(0,r.dq)(P.datapoint[0],{defaultWithMS:P.series.hasMsResolution,timeZone:h});return a.createElement(v,{timestamp:I,seriesColor:P.series.color,displayName:P.series.alias||P.series.label,displayValue:R})},O=()=>b?.map((R,I)=>a.createElement(c.k,{key:`${R.label}${I}`,label:R.label},(R.items||[]).map(M=>a.createElement(l.s,{key:`${M.label}`,url:M.url,label:M.label,target:M.target,icon:M.icon,active:M.active,onClick:M.onClick}))));return a.createElement(o.x,{...C,renderMenuItems:O,renderHeader:T})},v=({timestamp:p,seriesColor:h,displayName:s,displayValue:y})=>{const D=(0,f.wW)(E);return a.createElement("div",{className:D.wrapper},a.createElement("strong",null,p),a.createElement(u.Lh,null,a.createElement("div",null,a.createElement(d.F,{color:h}),a.createElement("span",{className:D.displayName},s)),y&&a.createElement(g.W,{value:y})))};function E(p){return{wrapper:(0,n.css)({padding:p.spacing(.5,1),fontSize:p.typography.size.sm,zIndex:p.zIndex.tooltip}),displayName:(0,n.css)({whiteSpace:"nowrap",paddingLeft:p.spacing(.5)})}}},63382:(Q,A,e)=>{"use strict";e.d(A,{U:()=>r});var n=e(69781),a=e.n(n),i=e(31733);class r extends i.Component{constructor(g){super(g),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:g.series}}componentDidUpdate(g){const{series:u}=this.props;(0,n.isEqual)(g.series,u)||this.setState({hiddenSeries:[],toggledSeries:u})}onSeriesToggle(g,u){const{series:c,onHiddenSeriesChanged:l}=this.props,{hiddenSeries:d}=this.state;if(u.ctrlKey||u.metaKey||u.shiftKey){const E=d.indexOf(g)>-1?d.filter(h=>h!==g):d.concat([g]),p=c.map(h=>({...h,isVisible:E.indexOf(h.label)===-1}));this.setState({hiddenSeries:E,toggledSeries:p},()=>l?l(E):void 0);return}const f=c.map(E=>E.label),m=d.length+1===f.length?[]:(0,n.difference)(f,[g]),v=c.map(E=>({...E,isVisible:m.indexOf(E.label)===-1}));this.setState({hiddenSeries:m,toggledSeries:v},()=>l?l(m):void 0)}render(){const{children:g}=this.props,{toggledSeries:u}=this.state;return g({onSeriesToggle:this.onSeriesToggle,toggledSeries:u})}}},7855:(Q,A,e)=>{"use strict";e.d(A,{U:()=>c});var n=e(76932),a=e(31733),i=e(37758),r=e(34588),o=e(76067),g=e(69153);const u=(d,f=!1,m=!1)=>{const v=d.reduce((p,h)=>p+(h[1]||0),0)===0,E=!d.reduce((p,h)=>p&&h[1]!==null,!0);return f&&E||m&&v},c=d=>{const{series:f,timeRange:m,width:v,height:E,showBars:p,showLines:h,showPoints:s,sortLegendBy:y,sortLegendDesc:D,legendDisplayMode:C,legendVisibility:P,placement:b,onSeriesToggle:T,onToggleSort:O,hideEmpty:R,hideZero:I,isStacked:M,lineWidth:x,onHorizontalRegionSelected:L,timeZone:S,children:U,ariaLabel:N}=d,{graphContainer:w,wrapper:G,legendContainer:_}=(0,o.wW)(l,d.placement),K=f.reduce((k,z)=>u(z.data,R,I)?k:k.concat([{label:z.label,color:z.color||"",disabled:!z.isVisible,yAxis:z.yAxis.index,getDisplayValues:()=>z.info||[]}]),[]);return a.createElement("div",{className:G,"aria-label":N},a.createElement("div",{className:w},a.createElement(g.k,{series:f,timeRange:m,timeZone:S,showLines:h,showPoints:s,showBars:p,width:v,height:E,isStacked:M,lineWidth:x,onHorizontalRegionSelected:L},U)),P&&a.createElement("div",{className:_},a.createElement(i.$,{hideHorizontalTrack:!0},a.createElement(r.l,{items:K,displayMode:C,placement:b,sortBy:y,sortDesc:D,onLabelClick:(k,z)=>{T&&T(k.label,z)},onToggleSort:O}))))},l=(d,f)=>({wrapper:(0,n.css)({display:"flex",flexDirection:f==="bottom"?"column":"row"}),graphContainer:(0,n.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,n.css)({padding:"10px 0",maxHeight:f==="bottom"?"35%":"none"})})},32603:(Q,A,e)=>{"use strict";e.d(A,{mc:()=>c,sV:()=>u,wu:()=>g});var n=e(86850),a=e(27957),i=e(40137),r=e(74337);const o=(l,d)=>{let f=0,m=l.values.length-1,v;for(;;){if(f>m)return Math.max(m,0);v=Math.floor((f+m)/2);const E=l.values[v];if(E===d)return v;E&&E<d?f=v+1:m=v-1}},g=(l,d,f,m)=>{let v,E,p,h,s;const y=[];let D,C;for(v=0;v<l.length;v++){E=l[v];const P=d[v];p=o(P,f),h=f-P.values[p],s=P.values[p],(D===void 0||h>=0&&(h<D||D<0)||h<0&&h>D)&&(D=h,C=P.display?(0,n.zc)(P.display(s)):s);const b=E.display(E.values[p]);y.push({value:(0,n.zc)(b),datapointIndex:p,seriesIndex:v,color:b.color,label:(0,a.CZ)(E),time:P.display?(0,n.zc)(P.display(s)):s})}return{results:y,time:C}},u=(l,d)=>(0,i.dq)(l,{format:d?.options?.timeformat,timeZone:d?.options?.timezone}),c=(l,d,f)=>{if(d&&f&&l){const m=f-d,v=m/l/1e3,E=86400010,p=31536e6;return v<=10?r.U6.interval.millisecond:v<=45?r.U6.interval.second:m<=E?r.U6.interval.minute:v<=8e4?r.U6.interval.hour:m<=p?r.U6.interval.day:v<=31536e3?r.U6.interval.month:r.U6.interval.year}return r.U6.interval.minute}},68942:(Q,A,e)=>{"use strict";e.d(A,{d:()=>p});var n=e(31733),a=e(40510),i=e(98121),r=e(85610),o=e(18198),g=e(85666),u=e(93670),c=e(56821),l=e(43348),d=e(66246),f=e(64125),m=e(80431),v=e(1500);function E(h,s,y=[]){for(const D of y)if(typeof D=="function"){if(!D(h,s))return!1}else if(s[D]!==h[D])return!1;return!0}class p extends n.Component{constructor(s){super(s),this.panelContext={},this.subscription=new a.w0,this.getTimeRange=()=>this.props.timeRange;let y=this.prepState(s);y.alignedData=y.config.prepData([y.alignedFrame]),this.state=y,this.plotInstance=n.createRef()}prepState(s,y=!0){let D=null;const{frames:C,fields:P,preparePlotFrame:b}=s,O=(b||v.Rn)(C,P||{x:r.Ls.get(o.mi.firstTimeField).get({}),y:r.Ls.get(o.mi.byTypes).get(new Set([g.fS.number,g.fS.enum]))},s.timeRange);if((0,m.Zp)("GraphNG",!1,"data aligned",O),O){let R=this.state?.config;y&&(R=s.prepConfig(O,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config prepared",R)),D={alignedFrame:O,config:R},(0,m.Zp)("GraphNG",!1,"data prepared",D.alignedData)}return D}handleCursorUpdate(s){const y=s.payload?.point?.time,D=this.plotInstance.current;if(D&&y){const C=D.valToPos(y,"x");let P;if(C&&(P=(0,m.ah)(D,D.posToIdx(C))),!P||!C)return;D.setCursor({left:C,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:s}=this.panelContext;this.subscription.add(s.getStream(u.es).pipe((0,i.p)(50)).subscribe({next:y=>{s!==y.origin&&this.handleCursorUpdate(y)}})),this.subscription.add(s.getStream(c.IA).pipe((0,i.p)(50)).subscribe({next:y=>this.handleCursorUpdate(y)})),this.subscription.add(s.getStream(u.xH).pipe((0,i.p)(50)).subscribe({next:()=>{const y=this.plotInstance?.current;y&&!y.cursor._lock&&y.setCursor({left:-10,top:-10})}}))}componentDidUpdate(s){const{frames:y,structureRev:D,timeZone:C,propsToDiff:P}=this.props,b=!E(s,this.props,P);if(y!==s.frames||b||C!==s.timeZone){let T=this.prepState(this.props,!1);T&&((this.state.config===void 0||C!==s.timeZone||D!==s.structureRev||!D||b)&&(T.config=this.props.prepConfig(T.alignedFrame,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config recreated",T.config)),T.alignedData=T.config.prepData([T.alignedFrame]),this.setState(T))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:s,height:y,children:D,renderLegend:C}=this.props,{config:P,alignedFrame:b,alignedData:T}=this.state;return P?n.createElement(d.AY,{width:s,height:y,legend:C(P)},(O,R)=>n.createElement(f.N,{config:P,data:T,width:O,height:R,plotRef:I=>this.plotInstance.current=I},D?D(P,b):null)):null}}p.contextType=l.bb},26302:(Q,A,e)=>{"use strict";e.d(A,{z:()=>i});var n=e(31733);const a=n.createContext({}),i=()=>{const{data:r,dimFields:o,mapSeriesIndexToDataFrameFieldIndex:g}=(0,n.useContext)(a),u=(0,n.useCallback)(()=>{const c=o.x;let l=null;for(let d=0;d<r.fields.length;d++)if(c(r.fields[d],r,[r])){l=r.fields[d];break}return l},[r,o]);return{dimFields:o,mapSeriesIndexToDataFrameFieldIndex:g,getXAxisField:u,alignedData:r}}},1500:(Q,A,e)=>{"use strict";e.d(A,{z1:()=>v,N$:()=>d,Rn:()=>m});var n=e(85666),a=e(96609),i=e(71199),r=e(18700);const o={threshold:(p,h,s)=>p+s,midpoint:(p,h,s)=>(p+h)/2,plusone:(p,h,s)=>p+1};function g(p){if(p.frame.length===0)return p.frame;let h=!0,{frame:s,refFieldName:y,refFieldPseudoMax:D,refFieldPseudoMin:C,insertMode:P}=p;P||(P=o.threshold);const b=d(s,y);if(b==null)return s;b.state={...b.state,nullThresholdApplied:!0};const T=s.fields.map(R=>R.config.custom?.insertNulls||b.config.interval||null),O=new Set(T);if(O.delete(null),O.size===0)return s;if(O.size===1){const R=O.values().next().value;if(R<=0)return s;const I=b.values,M=s.fields.map(L=>L.values),x=u(I,M,R,C,D,P,h);return x===M?s:{...s,length:x[0].length,fields:s.fields.map((L,S)=>({...L,values:x[S]}))}}return s}function u(p,h,s,y=null,D=null,C,P){const b=p.length,T=[];if(y!=null&&y<p[0]){let M=Math.ceil((p[0]-y)/s),x=p[0]-M*s;for(;x<p[0];)T.push(C(x-s,x,s)),x+=s}T.push(p[0]);let O=p[0];for(let M=1;M<b;M++){const x=p[M];for(;x-O>s&&(T.push(C(O,x,s)),O+=s,!!P););T.push(x),O=x}if(D!=null&&D>O)for(;O+s<D;)T.push(C(O,D,s)),O+=s;const R=T.length;if(R===b)return h;const I=[];for(let M of h){let x;if(M!==p){x=Array(R);for(let L=0,S=0;L<R;L++)x[L]=p[S]===T[L]?M[S++]:null}else x=T;I.push(x)}return I}function c(p,h,s){let y,D;for(let C=0;C<h.length;C++)if(h[C]==null)D==null&&y!=null&&(D=C);else{if(D!=null){if(p[C]-y<s)for(;D<C;)h[D++]=void 0;D=null}y=p[C]}return h}function l(p){return p.type===n.fS.number&&p.config.custom?.drawStyle===i.l8.Bars&&!p.config.custom?.hideFrom?.viz}function d(p,h){return p.fields.find(s=>h!=null?s.name===h:s.type===n.fS.time)}function f(p,h){const s=d(p,h);let y=s?.values;for(let D=0;D<p.fields.length;D++){let C=p.fields[D];if(C===s||l(C))continue;let P=C.config.custom?.spanNulls;typeof P=="number"&&P!==-1&&y&&(C.values=c(y,C.values,P))}return p}function m(p,h,s){let y;e:for(let b of p)for(let T of b.fields)if(h.x(T,b,p)){y=T;break e}p=p.map(b=>y?.state?.nullThresholdApplied?b:g({frame:b,refFieldName:y.name,refFieldPseudoMin:s?.from.valueOf(),refFieldPseudoMax:s?.to.valueOf()}));let D=0;p.forEach(b=>{b.fields.forEach(T=>{l(T)&&(T.config.custom={...T.config.custom,spanNulls:-1},D++)})});let C=1/0;D>1&&p.forEach(b=>{if(!b.fields.some(l))return;const T=y.values;for(let O=0;O<T.length;O++)O>0&&(C=Math.min(C,T[O]-T[O-1]))});let P=(0,a._9)({frames:p,joinBy:h.x,keep:h.y,keepOriginIndices:!0});return P?(P=f(P,y.name),C!==1/0&&(P.fields.forEach((b,T)=>{let O=b.values;if(T===0){let R=O[O.length-1];O.push(R+C,R+2*C)}else l(b)?O.push(null,null):O.push(void 0,void 0)}),P.length+=2),P):null}function v(p,h){const s="na",y=`${p.min!==void 0?p.min:s}-${p.max!==void 0?p.max:s}`,D=`${p.custom?.axisSoftMin!==void 0?p.custom.axisSoftMin:s}-${p.custom?.axisSoftMax!==void 0?p.custom.axisSoftMax:s}`,C=`${p.custom?.axisPlacement!==void 0?p.custom?.axisPlacement:i.LB.Auto}`,P=p.unit??r.j,b=p.custom?.scaleDistribution?E(p.custom.scaleDistribution):i.wf.Linear,T=p.custom?.axisLabel?p.custom.axisLabel:s;return`${P}/${y}/${D}/${C}/${b}/${T}/${h}`}function E(p){return p.type===i.wf.Log?`${p.type}${p.log}`:p.type}},22055:(Q,A,e)=>{"use strict";e.d(A,{p:()=>L});var n=e(31733),a=e(43348),i=e(91384),r=e(76067),o=e(68942),g=e(69781),u=e(35560),c=e(85666),l=e(86850),d=e(28073),f=e(99326),m=e(91507),v=e(27957),E=e(42692),p=e(93670),h=e(71199),s=e(50282),y=e(56035),D=e(80431),C=e(1500);const P=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),b=Array(53);for(let S=0;S<b.length;S++)b[S]=2**S;const T=(S,U=1)=>S==null?"-":S.toFixed(U),O={drawStyle:h.l8.Line,showPoints:h.Jp.Auto,axisPlacement:h.LB.Auto},R=({frame:S,theme:U,timeZones:N,getTimeRange:w,eventBus:G,sync:_,allFrames:K,renderers:k,tweakScale:z=H=>H,tweakAxis:W=H=>H,eventsScope:Z="__global_"})=>{const H=new s.U(N[0]);let X;H.setPrepData(Me=>(X=Me[0],(0,D.Bj)(Me[0],H.getStackingGroups())));const Y=S.fields[0];if(!Y)return H;const ne="x";let se="_x",re="";const ge=Y.config.custom?.axisPlacement!==h.LB.Hidden?h.LB.Bottom:h.LB.Hidden,q=Y.config.custom?.axisPlacement!==h.LB.Hidden;if(Y.type===c.fS.time){se="time",H.addScale({scaleKey:ne,orientation:h.wN.Horizontal,direction:h.bQ.Right,isTime:!0,range:()=>{const Pe=w();return[Pe.from.valueOf(),Pe.to.valueOf()]}});const Me=N.length>1?(Pe,Ee)=>Ee.map((he,Le)=>Le<2?null:he):void 0;for(let Pe=0;Pe<N.length;Pe++){const Ee=N[Pe];H.addAxis({scaleKey:ne,isTime:!0,placement:ge,show:q,label:Y.config.custom?.axisLabel,timeZone:Ee,theme:U,grid:{show:Pe===0&&Y.config.custom?.axisGridShow},filter:Me})}N.length>1&&H.addHook("drawAxes",Pe=>{Pe.ctx.save(),Pe.ctx.fillStyle=U.colors.text.primary,Pe.ctx.textAlign="left",Pe.ctx.textBaseline="bottom";let Ee=0;Pe.axes.forEach(he=>{if(he.side===2){let Le=he._pos+he._size;Pe.ctx.fillText(N[Ee],Pe.bbox.left,Le*u.Z.pxRatio),Ee++}}),Pe.ctx.restore()})}else Y.config.unit&&(se=Y.config.unit),H.addScale({scaleKey:ne,orientation:h.wN.Horizontal,direction:h.bQ.Right,range:(Me,Pe,Ee)=>[Y.config.min??Pe,Y.config.max??Ee]}),H.addAxis({scaleKey:ne,placement:ge,show:q,label:Y.config.custom?.axisLabel,theme:U,grid:{show:Y.config.custom?.axisGridShow},formatValue:(Me,Pe)=>(0,l.zc)(Y.display(Me,Pe))});let me=k?.flatMap(Me=>Object.values(Me.fieldMap).filter(Pe=>Me.indicesOnly.indexOf(Pe)===-1))??[],oe;for(let Me=1;Me<S.fields.length;Me++){const Pe=S.fields[Me],Ee={...Pe.config,custom:{...O,...Pe.config.custom}},he=Ee.custom;if(Pe===Y||Pe.type!==c.fS.number&&Pe.type!==c.fS.enum)continue;let Le=Pe.display??T;Pe.config.custom?.stacking?.mode===h.o0.Percent&&(Le=(0,d.U)({field:{...Pe,config:{...Pe.config,unit:"percentunit"}},theme:U}));const ke=(0,C.z1)(Ee,Pe.type),ot=(0,f.fD)(Pe),ce=(0,f.YO)(Pe,U).color;if(H.addScale(z({scaleKey:ke,orientation:h.wN.Vertical,direction:h.bQ.Up,distribution:he.scaleDistribution?.type,log:he.scaleDistribution?.log,linearThreshold:he.scaleDistribution?.linearThreshold,min:Pe.config.min,max:Pe.config.max,softMin:he.axisSoftMin,softMax:he.axisSoftMax,centeredZero:he.axisCenteredZero,range:he.stacking?.mode===h.o0.Percent?(Ne,je,ut)=>(je=je<0?-1:0,ut=ut>0?1:0,[je,ut]):Pe.type===c.fS.enum?(Ne,je,ut)=>[-1,Pe.config.type.enum.text.length]:void 0,decimals:Pe.config.decimals},Pe)),re||(re=ke),he.axisPlacement!==h.LB.Hidden){let Ne;he.axisColorMode===h.yK.Series&&(ot.isByValue&&Pe.config.custom?.gradientMode===h.FI.Scheme&&ot.id===m.S.Thresholds?Ne=(0,y.P2)(1,U,ot,Pe.config.thresholds):Ne=ce);const je={border:{show:he.axisBorderShow||!1,width:1/devicePixelRatio,stroke:Ne||U.colors.text.primary},ticks:{show:he.axisBorderShow||!1,stroke:Ne||U.colors.text.primary},color:Ne||U.colors.text.primary};let ut,Fe,Te;if(P.has(Ee.unit))ut=b;else if(Pe.type===c.fS.enum){let Ve=Pe.config.type.enum.text;Te=Ve.map((tt,ae)=>ae),Fe=Ve}H.addAxis(W({scaleKey:ke,label:he.axisLabel,size:he.axisWidth,placement:he.axisPlacement??h.LB.Auto,formatValue:(Ve,tt)=>(0,l.zc)(Le(Ve,tt)),theme:U,grid:{show:he.axisGridShow},decimals:Pe.config.decimals,distr:he.scaleDistribution?.type,splits:Te,values:Fe,incrs:ut,...je},Pe))}const le=he.drawStyle===h.l8.Points?h.Jp.Always:he.showPoints;let Re=()=>null;he.spanNulls!==!0&&(Re=(Ne,je,ut,Fe)=>{let Te=[],Ve=Ne.series[je];if(!ut&&Fe&&Fe.length){const[tt,ae]=Ve.idxs,J=Ne.data[0],te=Ne.data[je],de=Math.round(Ne.valToPos(J[tt],"x",!0)),be=Math.round(Ne.valToPos(J[ae],"x",!0));Fe[0][0]===de&&Te.push(tt);for(let De=0;De<Fe.length;De++){let Ue=Fe[De],We=Fe[De+1];if(We&&Ue[1]===We[0]){let et=Ne.posToIdx(Ue[1],!0);if(te[et]==null)for(let ze=1;ze<100;ze++){if(te[et+ze]!=null){et+=ze;break}if(te[et-ze]!=null){et-=ze;break}}Te.push(et)}}Fe[Fe.length-1][1]===be&&Te.push(ae)}return Te.length?Te:null});let{fillOpacity:Ae}=he,Oe=null,$e=null;if(Pe.state?.origin){oe||(oe=I(S,K));const Ne=K[Pe.state.origin.frameIndex],je=Ne?.fields[Pe.state.origin.fieldIndex],ut=(0,v.CZ)(je??Pe,Ne,K);if(me.indexOf(ut)>=0)Oe=()=>null,$e=()=>{};else if(he.transform===h.pR.Constant){const Fe=u.Z.paths.linear();Oe=(Te,Ve)=>{const tt=Te._data,ae=w();let J=[ae.from.valueOf(),ae.to.valueOf()],te=tt[Ve].find(De=>De!=null),de=[te,te],be=tt.slice();return be[0]=J,be[Ve]=de,Fe({...Te,_data:be},Ve,0,1)}}if(he.fillBelowTo){const Fe=S.fields.find(ae=>he.fillBelowTo===ae.name||he.fillBelowTo===ae.config?.displayNameFromDS||he.fillBelowTo===(0,v.CZ)(ae,S,K)),Te=Fe?(0,v.CZ)(Fe,S,K):he.fillBelowTo,Ve=oe.get(ut),tt=oe.get(Te);(0,g.isNumber)(tt)&&(0,g.isNumber)(Ve)?(H.addBand({series:[Ve,tt],fill:void 0}),Ae||(Ae=35)):Ae=0}}let Ye;ot.id===m.S.Thresholds&&(Ye=Ne=>(0,f.YO)(X.fields[Ne],U).color),H.addSeries({pathBuilder:Oe,pointsBuilder:$e,scaleKey:ke,showPoints:le,pointsFilter:Re,colorMode:ot,fillOpacity:Ae,theme:U,dynamicSeriesColor:Ye,drawStyle:he.drawStyle,lineColor:he.lineColor??ce,lineWidth:he.lineWidth,lineInterpolation:he.lineInterpolation,lineStyle:he.lineStyle,barAlignment:he.barAlignment,barWidthFactor:he.barWidthFactor,barMaxWidth:he.barMaxWidth,pointSize:he.pointSize,spanNulls:he.spanNulls||!1,show:!he.hideFrom?.viz,gradientMode:he.gradientMode,thresholds:Ee.thresholds,hardMin:Pe.config.min,hardMax:Pe.config.max,softMin:he.axisSoftMin,softMax:he.axisSoftMax,dataFrameFieldIndex:Pe.state?.origin}),he.thresholdsStyle&&Ee.thresholds&&(he.thresholdsStyle.mode??h.i3.Off)!==h.i3.Off&&H.addThresholds({config:he.thresholdsStyle,thresholds:Ee.thresholds,scaleKey:ke,theme:U,hardMin:Pe.config.min,hardMax:Pe.config.max,softMin:he.axisSoftMin,softMax:he.axisSoftMax})}let fe=(0,D.i7)(S);H.setStackingGroups(fe),k?.forEach(Me=>{oe||(oe=I(S,K));let Pe={};for(let Ee in Me.fieldMap){let he=Me.fieldMap[Ee];Pe[Ee]=oe.get(he)}Me.init(H,Pe)}),H.scaleKeys=[ne,re];const ve=15;let pe={dataIdx:(Me,Pe,Ee,he)=>{let Le=Me.data[Pe];if(Le[Ee]==null){let ke=null,ot=null,it;for(it=Ee;ke==null&&it-- >0;)Le[it]!=null&&(ke=it);for(it=Ee;ot==null&&it++<Le.length;)Le[it]!=null&&(ot=it);let ce=Me.data[0],le=Me.valToPos(he,"x"),Re=ot==null?1/0:Me.valToPos(ce[ot],"x"),Ae=ke==null?-1/0:Me.valToPos(ce[ke],"x"),Oe=le-Ae,$e=Re-le;Oe<=$e?Oe<=ve&&(Ee=ke):$e<=ve&&(Ee=ot)}return Ee}};if(_&&_()!==E.m.Off){const Me={point:{[ne]:null,[re]:null},data:S},Pe=new p.es(Me);pe.sync={key:Z,filters:{pub:(Ee,he,Le,ke,ot,it,ce)=>_&&_()===E.m.Off?!1:(Me.rowIndex=ce,Le<0&&ke<0?(Me.point[se]=null,Me.point[re]=null,G.publish(new p.xH)):(Me.point[se]=he.posToVal(Le,ne),Me.point[re]=he.posToVal(ke,re),Me.point.panelRelY=ke>0?ke/it:1,G.publish(Pe),Pe.payload.down=void 0),!0)},scales:[ne,re]}}return H.setSync(),H.setCursor(pe),H};function I(S,U){const N=new Map;return S.fields.forEach((w,G)=>{const _=w.state?.origin;if(_){const K=U[_.frameIndex]?.fields[_.fieldIndex];K&&N.set((0,v.CZ)(K,U[_.frameIndex],U),G)}}),N}const M=["legend","options","theme"];class x extends n.Component{constructor(){super(...arguments),this.prepConfig=(U,N,w)=>{const{eventBus:G,eventsScope:_,sync:K}=this.context,{theme:k,timeZone:z,renderers:W,tweakAxis:Z,tweakScale:H}=this.props;return R({frame:U,theme:k,timeZones:Array.isArray(z)?z:[z],getTimeRange:w,eventBus:G,sync:K,allFrames:N,renderers:W,tweakScale:H,tweakAxis:Z,eventsScope:_})},this.renderLegend=U=>{const{legend:N,frames:w}=this.props;return!U||N&&!N.showLegend||!(0,i.o)(U,w)?null:n.createElement(i.l,{data:w,config:U,...N})}}render(){return n.createElement(o.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:M,renderLegend:this.renderLegend})}}x.contextType=a.bb;const L=(0,r.HE)(x);L.displayName="TimeSeries"},48018:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{ALERTING_COLOR:()=>r.ns,AxisPlacement:()=>c.LB,BarAlignment:()=>c.pu,BarValueVisibility:()=>c.eU,BracesPlugin:()=>u.hP,ClearPlugin:()=>u.Gp,ClipboardPlugin:()=>u.wl,DEFAULT_ANNOTATION_COLOR:()=>r.Jx,DOMUtil:()=>r.Qi,DrawStyle:()=>c.$6,EventsWithValidation:()=>r.JU,GlobalStyles:()=>o.nz,GraphGradientMode:()=>c.FI,GraphTresholdsStyleMode:()=>c.i3,IndentationPlugin:()=>u.Rc,LegendDisplayMode:()=>c.jK,LineInterpolation:()=>c.KC,NO_DATA_COLOR:()=>r._V,NewlinePlugin:()=>u.z2,NodeGraphDataFrameFieldNames:()=>r.zG,OK_COLOR:()=>r.te,PENDING_COLOR:()=>r.f7,PointVisibility:()=>c.mv,REGION_FILL_ALPHA:()=>r.iV,ReactUtils:()=>r.Ot,RunnerPlugin:()=>u.dv,SCHEMA:()=>r.Yi,ScaleDirection:()=>c.bQ,ScaleOrientation:()=>c.wN,SearchFunctionType:()=>r.nu,SelectionShortcutsPlugin:()=>u.$L,SlatePrism:()=>u.Ze,StackingMode:()=>c.o0,SuggestionsPlugin:()=>u.bm,TableCellDisplayMode:()=>c.h2,ThemeContext:()=>o.Ni,TooltipDisplayMode:()=>c.f3,ansicolor:()=>r._J,attachDebugger:()=>r.xq,calculateFontSize:()=>r.MX,colors:()=>r.O9,commonOptionsBuilder:()=>g.q,createLogger:()=>r.hu,fuzzyMatch:()=>r.C6,getCanvasContext:()=>r.AE,getCellLinks:()=>r.iu,getScrollbarWidth:()=>r.np,getTagColor:()=>r.vm,getTagColorIndexFromName:()=>r.tu,getTagColorsFromName:()=>r.Bx,getTextColorForAlphaBackground:()=>r.bM,getTextColorForBackground:()=>r.Gc,getTheme:()=>o.gh,hasValidationEvent:()=>r.z3,isCompactUrl:()=>r.go,linkModelToContextMenuItems:()=>r.Rc,makeFragment:()=>r.xl,makeValue:()=>r.l1,measureText:()=>r.X1,mockTheme:()=>o.Zu,mockThemeContext:()=>o.sJ,regexValidation:()=>r.FE,sortedColors:()=>r.Wm,styleMixins:()=>o.GU,stylesFactory:()=>o.Bb,useForceUpdate:()=>r.NW,useStyles:()=>o.yK,useStyles2:()=>o.wW,useTheme:()=>o.Fg,useTheme2:()=>o.l4,validate:()=>r.Gu,withTheme:()=>o.Zz,withTheme2:()=>o.HE});var n=e(5279),i={};for(const l in n)l!=="default"&&(i[l]=()=>n[l]);e.d(A,i);var a=e(8526),i={};for(const l in a)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect","SecretInput","SecretTextArea","FileDropzone","FileDropzoneDefaultChildren","FileListItem","graphFieldOptions","EventsCanvas","Marker","XYCanvas","KeyboardPlugin","TooltipPlugin","TooltipPlugin2","ZoomPlugin","SeriesVisibilityChangeMode"].indexOf(l)<0&&(i[l]=()=>a[l]);e.d(A,i);var r=e(79764),o=e(24860),g=e(87331),u=e(96106),c=e(80629)},39076:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>v,r:()=>d});var n=e(31733),a=e(85666),i=e(15476),r=e(71199),o=e(85765),g=e(96856),u=e(64516),c=e(38834),l=e(31180);function d(E,p,h){const s=["Axis"];E.addRadio({path:"axisPlacement",name:"Placement",category:s,defaultValue:l.q.axisPlacement[0].value,settings:{options:l.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:s,defaultValue:"",settings:{placeholder:"Optional text",expandTemplateVars:!0},showIf:y=>y.axisPlacement!==r.LB.Hidden,shouldApply:y=>y.type!==a.fS.time&&y.type!==a.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:s,settings:{placeholder:"Auto"},showIf:y=>y.axisPlacement!==r.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:s,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]},showIf:y=>y.axisPlacement!==r.LB.Hidden}).addRadio({path:"axisColorMode",name:"Color",category:s,defaultValue:r.yK.Text,settings:{options:[{value:r.yK.Text,label:"Text"},{value:r.yK.Series,label:"Series"}]},showIf:y=>y.axisPlacement!==r.LB.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:"Show border",category:s,defaultValue:!1,showIf:y=>y.axisPlacement!==r.LB.Hidden}),E.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:s,editor:v,override:v,defaultValue:{type:r.wf.Linear},shouldApply:y=>y.type===a.fS.number,process:i.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:s,defaultValue:!1,showIf:y=>y.scaleDistribution?.type!==r.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:p.axisSoftMin,category:s,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:p.axisSoftMax,category:s,settings:{placeholder:"See: Standard options > Max"}})}const f=[{label:"Linear",value:r.wf.Linear},{label:"Logarithmic",value:r.wf.Log},{label:"Symlog",value:r.wf.Symlog}],m=[{label:"2",value:2},{label:"10",value:10}],v=({value:E,onChange:p})=>{const h=E?.type??r.wf.Linear,s=E?.log??2;return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:16}},n.createElement(g.S,{value:h,options:f,onChange:y=>{p({...E,type:y,log:y===r.wf.Linear?void 0:s})}})),(h===r.wf.Log||h===r.wf.Symlog)&&n.createElement(o.g,{label:"Log base"},n.createElement(c.Ph,{options:m,value:s,onChange:y=>{p({...E,log:y.value})}})),h===r.wf.Symlog&&n.createElement(o.g,{label:"Linear threshold"},n.createElement(u.I,{placeholder:"1",value:E?.linearThreshold,onChange:y=>{p({...E,linearThreshold:Number(y.currentTarget.value)})}})))}},93443:(Q,A,e)=>{"use strict";e.d(A,{B:()=>u});var n=e(69781),a=e.n(n),i=e(31733),r=e(65050),o=e(79106);const g=({value:c,onChange:l})=>{const d=(0,i.useCallback)(f=>{l({...c,[f]:!c[f]})},[c,l]);return i.createElement(o.Lh,{spacing:"xs"},Object.keys(c).map(f=>{const m=f;return i.createElement(r.B,{icon:c[m]?"eye-slash":"eye",onClick:()=>d(m),key:m,label:(0,n.startCase)(m),selected:c[m]})}))};function u(c){c.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:g,override:g,shouldApply:()=>!0,hideFromDefaults:!0,process:l=>l})}},52408:(Q,A,e)=>{"use strict";e.d(A,{J:()=>i});var n=e(61411),a=e(71199);function i(r,o=!0){r.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:a.jK.List,settings:{options:[{value:a.jK.List,label:"List"},{value:a.jK.Table,label:"Table"}]},showIf:g=>g.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:g=>g.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:g=>g.legend.showLegend&&g.legend.placement==="right"}),o&&r.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:n.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:g=>g.legend.showLegend!==!1})}},75353:(Q,A,e)=>{"use strict";e.d(A,{V:()=>f,n:()=>d});var n=e(31733),a=e(15476),i=e(85666),r=e(71199),o=e(96856),g=e(41354),u=e(64516),c=e(79106),l=e(31180);const d=({value:m,context:v,onChange:E,item:p})=>n.createElement(c.Lh,null,n.createElement(o.S,{value:m?.mode||r.o0.None,options:p.settings?.options??[],onChange:h=>{E({...m,mode:h})}}),v.isOverride&&m?.mode&&m?.mode!==r.o0.None&&n.createElement(u.I,{type:"text",placeholder:"Group",suffix:n.createElement(g.h,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:m?.group,onChange:h=>{E({...m,group:h.currentTarget.value.trim()})}}));function f(m,v,E=["Graph styles"]){m.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:E,defaultValue:v,editor:d,override:d,settings:{options:l.q.stacking},process:a.kG,shouldApply:p=>p.type===i.fS.number})}},68489:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>n});function n(a,i=!0){i&&a.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),a.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},34104:(Q,A,e)=>{"use strict";e.d(A,{L:()=>a});var n=e(71199);function a(i,r=!1){const o=["Tooltip"],g=r?[{value:n.f3.Single,label:"Single"},{value:n.f3.None,label:"Hidden"}]:[{value:n.f3.Single,label:"Single"},{value:n.f3.Multi,label:"All"},{value:n.f3.None,label:"Hidden"}],u=[{value:n.As.None,label:"None"},{value:n.As.Ascending,label:"Ascending"},{value:n.As.Descending,label:"Descending"}];i.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:o,defaultValue:"single",settings:{options:g}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:o,defaultValue:n.As.None,showIf:c=>c.tooltip?.mode===n.f3.Multi,settings:{options:u}})}},87331:(Q,A,e)=>{"use strict";e.d(A,{q:()=>n});var n={};e.r(n),e.d(n,{ScaleDistributionEditor:()=>a.Y,StackingEditor:()=>u.n,addAxisConfig:()=>a.r,addHideFrom:()=>i.B,addLegendOptions:()=>r.J,addStackingConfig:()=>u.V,addTextSizeOptions:()=>g.Z,addTooltipOptions:()=>o.L});var a=e(39076),i=e(93443),r=e(52408),o=e(34104),g=e(68489),u=e(75353)},80629:(Q,A,e)=>{"use strict";e.d(A,{$6:()=>n.l8,FI:()=>n.FI,KC:()=>n.KC,LB:()=>n.LB,bQ:()=>n.bQ,eU:()=>n.Jp,f3:()=>n.f3,h2:()=>n.h2,i3:()=>n.i3,jK:()=>n.jK,mv:()=>n.Jp,o0:()=>n.o0,pu:()=>n.pu,wN:()=>n.wN});var n=e(71199)},78290:(Q,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(79117);const a={"[":"]","{":"}","(":")"},i="brace_match";function r(){return{onKeyDown(o,g,u){const{value:c}=g;switch(o.key){case"(":case"{":case"[":{const{start:{offset:l,key:d},end:{offset:f,key:m},focus:{offset:v}}=c.selection,E=c.focusText.text;if(c.selection.isExpanded)return o.preventDefault(),g.insertTextByKey(d,l,o.key).insertTextByKey(m,f+1,a[o.key]).moveEndBackward(1),!0;if(v===E.length||E[v]===" "||Object.values(a).includes(E[v])){o.preventDefault();const p=a[o.key],h={key:`${i}-${(0,n.Z)()}`,type:`${i}-${p}`,anchor:{key:d,offset:l,object:"point"},focus:{key:m,offset:f+1,object:"point"},object:"annotation"};return g.insertText(o.key).insertText(p).addAnnotation(h).moveBackward(1),!0}break}case")":case"}":case"]":{const l=c.anchorText.text,d=c.selection.anchor.offset,f=l[d],m=o.key,v=`${i}-${m}`,E=c.annotations.find(p=>p?.type===v&&p.anchor.key===c.anchorText.key);if(E&&f===m&&!c.selection.isExpanded)return o.preventDefault(),g.moveFocusForward(1).removeAnnotation(E).moveAnchorForward(1),!0;break}case"Backspace":{const l=c.anchorText.text,d=c.selection.anchor.offset,f=l[d-1],m=l[d];if(a[f]&&a[f]===m)return o.preventDefault(),g.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return u()}}}},66464:(Q,A,e)=>{"use strict";e.d(A,{G:()=>n});function n(){return{onKeyDown(a,i,r){const o=i.value;if(o.selection.isExpanded)return r();if(a.key==="k"&&a.ctrlKey){a.preventDefault();const g=o.anchorText.text,u=o.selection.anchor.offset,l=g.length-u;return i.deleteForward(l),!0}return r()}}}},98703:(Q,A,e)=>{"use strict";e.d(A,{w:()=>i});const n=(r,o,g)=>{if(!r.length)return;const u=r.slice(0,-1).join("").length+r.length-1;return r.join(`
`).slice(o,u+g)},a=r=>r?.replace(/[\uFEFF]/g,"");function i(){const r={onCopy(o,g,u){o.preventDefault();const{document:c,selection:l}=g.value,{start:{offset:d},end:{offset:f}}=l,m=c.getLeafBlocksAtRange(l).toArray().map(E=>E.text),v=a(n(m,d,f));return v&&o.clipboardData&&o.clipboardData.setData("Text",v),!0},onPaste(o,g,u){if(o.preventDefault(),o.clipboardData){const l=a(o.clipboardData.getData("Text"))?.split(`
`);if(l&&l.length){g.insertText(l[0]);for(const d of l.slice(1))g.splitBlock().insertText(d)}}return!0}};return{...r,onCut(o,g,u){return r.onCopy(o,g,u),g.deleteAtRange(g.value.selection),!0}}}},97979:(Q,A,e)=>{"use strict";e.d(A,{R:()=>d});var n=e(16995),a=e(77537),i=e(76485);const r=(0,n.TB)("mod+["),o=(0,n.TB)("shift+tab"),g=(0,n.TB)("mod+]"),u="  ",c=(f,m,v)=>{const{startBlock:E,endBlock:p,selection:{start:{offset:h,key:s},end:{offset:y,key:D}}}=m.value;if(i.Z.serialize(m.value)==="")return;f.preventDefault();const C=E.getFirstText();C&&h===0&&s===C.key&&y===C.text.length&&D===C.key||!E.equals(p)?l(m,"right"):m.insertText(u)},l=(f,m)=>{const v=f.value.selection,E=f.value.document.getLeafBlocksAtRange(v).toArray();if(m==="left")for(const p of E){const h=p.text.length-p.text.trimLeft().length,s=p.getFirstText().key,y={anchor:{key:s,offset:h,path:[]},focus:{key:s,offset:h,path:[]}};f.deleteBackwardAtRange(a.e6.create(y),Math.min(u.length,h))}else{const{startText:p}=f.value,h=p.text.slice(0,v.start.offset),s=/^\s*$/.test(h);for(const y of E)f.insertTextByKey(y.getFirstText().key,0,u);s&&f.moveStartBackward(u.length)}};function d(){return{onKeyDown(f,m,v){if(r(f)||o(f))f.preventDefault(),l(m,"left");else if(g(f))f.preventDefault(),l(m,"right");else if(f.key==="Tab")c(f,m,v);else return v();return!0}}}},96106:(Q,A,e)=>{"use strict";e.d(A,{$L:()=>u.$,Gp:()=>a.G,Rc:()=>r.R,Ze:()=>c.Z,bm:()=>l.b,dv:()=>g.d,hP:()=>n.h,wl:()=>i.w,z2:()=>o.z});var n=e(78290),a=e(66464),i=e(98703),r=e(97979),o=e(38966),g=e(22993),u=e(54188),c=e(13811),l=e(52459)},38966:(Q,A,e)=>{"use strict";e.d(A,{z:()=>a});function n(i){let r=i.length-i.trimLeft().length;if(r){let o=i[0];for(;--r;)o+=i[0];return o}return""}function a(){return{onKeyDown(i,r,o){const g=r.value;if(g.selection.isExpanded)return o();if(i.key==="Enter"){i.preventDefault();const{startBlock:u}=g,c=u.text,l=n(c);return r.splitBlock().insertText(l).focus()}return o()}}}},22993:(Q,A,e)=>{"use strict";e.d(A,{d:()=>n});function n({handler:a}){return{onKeyDown(i,r,o){return a&&i.key==="Enter"&&(i.shiftKey||i.ctrlKey)?(i.preventDefault(),a(i),r):o()}}}},54188:(Q,A,e)=>{"use strict";e.d(A,{$:()=>i});var n=e(16995);const a=(0,n.TB)("mod+l");function i(){return{onKeyDown(r,o,g){if(a(r)){r.preventDefault();const{focusBlock:u,document:c}=o.value;o.moveAnchorToStartOfBlock(),c.getNextBlock(u.key)?o.moveFocusToStartOfNextBlock():o.moveFocusToEndOfText()}else return g();return!0}}}},96129:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>a});const a="prism-token"},13811:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>m,a:()=>h});var n=e(72470),a=e.n(n),i=e(77537),r=e(96129),o=e(72104),g=e(31733);function u(s){return s.object==="block"&&s.type==="code_block"}function c(s){return"javascript"}function l(s,y,D){const{decoration:C}=s;if(C.type!==r.Z)return D();const P=C.data.get("className");return g.createElement("span",{className:P},s.children)}class d extends(0,o.Record)({onlyIn:u,getSyntax:c,renderDecoration:l}){constructor(y){super(y)}}const f=d;function m(s={},y=a().languages){const D=new f(s);return{decorateNode:(C,P,b)=>{if(!D.onlyIn(C))return b();const T=i.gO.create(C),O=D.getSyntax(T),R=y[O];if(!R)return[];const M=T.getTexts().map(U=>U&&U.getText()).join(`
`),x=a().tokenize(M,R),L=h(x),S=P.value.data.set("tokens",L);return P.setData(S),v(D,x,T)},renderDecoration:(C,P,b)=>D.renderDecoration({children:C.children,decoration:C.decoration},P,b)}}function v(s,y,D){const C=D.getTexts(),P=[];let b=0,T=0;return C.forEach(O=>{T=b+O.getText().length;let R=0;function I(M,x){if(typeof M=="string"){if(x){const L=E({text:O,textStart:b,textEnd:T,start:R,end:R+M.length,className:`prism-token token ${x}`,block:D});L&&P.push(L)}R+=M.length}else if(x=`${x} ${M.type}`,M.alias&&(x+=" "+M.alias),typeof M.content=="string"){const L=E({text:O,textStart:b,textEnd:T,start:R,end:R+M.content.length,className:`prism-token token ${x}`,block:D});L&&P.push(L),R+=M.content.length}else for(let L=0;L<M.content.length;L+=1)I(M.content[L],x)}y.forEach(I),b=T+1}),P}function E({text:s,textStart:y,textEnd:D,start:C,end:P,className:b,block:T}){return C>=D||P<=y?null:(C=Math.max(C,y),P=Math.min(P,D),C-=y,P-=y,T.createDecoration({object:"decoration",anchor:{key:s.key,offset:C,object:"point"},focus:{key:s.key,offset:P,object:"point"},type:r.Z,data:{className:b}}))}function p(s){return typeof s=="string"?[{content:s,types:[],aliases:[]}]:Array.isArray(s)?s.flatMap(y=>p(y)):s instanceof a().Token?p(s.content).flatMap(y=>{let D=[];return typeof s.alias=="string"?D=[s.alias]:D=s.alias??[],{content:y.content,types:[s.type,...y.types],aliases:[...D,...y.aliases]}}):[]}function h(s){const y=p(s);if(!y.length)return[];const D=y[0];D.prev=null,D.next=y.length>=2?y[1]:null,D.offsets={start:0,end:D.content.length};for(let P=1;P<y.length-1;P++)y[P].prev=y[P-1],y[P].next=y[P+1],y[P].offsets={start:y[P-1].offsets.end,end:y[P-1].offsets.end+y[P].content.length};const C=y[y.length-1];return C.prev=y.length>=2?y[y.length-2]:null,C.next=null,C.offsets={start:y.length>=2?y[y.length-2].offsets.end:0,end:y.length>=2?y[y.length-2].offsets.end+C.content.length:C.content.length},y}},52459:(Q,A,e)=>{"use strict";e.d(A,{b:()=>U});var n=e(69781),a=e(31733),i=e(45607),r=e(61231),o=e(3854),g=e(80470),u=e(39965);const c=w=>w.reduce((G,{items:_,label:K})=>(G.push({label:K,kind:g.c.GroupTitle}),_.reduce((k,z)=>(k.push(z),k),G)),[]),l=w=>w.reduce((G,_)=>G.length<_.label.length?_.label:G,""),d=(w,G,_)=>{const K=(0,u.Z)(_,{font:w.typography.fontFamilyMonospace,fontSize:w.typography.bodySmall.fontSize,fontWeight:"normal"}),k=m(K.width,w),z=f(K.height,w),W=v(z,G);return{listWidth:k,listHeight:W,itemHeight:z}},f=(w,G)=>{const _=G.spacing.gridSize*2;return w+_},m=(w,G)=>{const _=G.spacing.gridSize*3,K=800;return Math.min(Math.max(w+_,200),K)},v=(w,G)=>{const _=Math.min(G.length,10),K=100,k=_*w;return Math.max(k,K)};var E=e(76932),p=e(51133),h=e(76067);const s=(w,G,_)=>({typeaheadItem:(0,E.css)({label:"type-ahead-item",zIndex:11,padding:w.spacing(1,1,1,2),border:w.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:w.colors.background.secondary,color:w.colors.text.secondary,boxShadow:`0 0 20px ${w.v1.colors.dropdownShadow}`,visibility:_===!0?"visible":"hidden",width:"250px",minHeight:`${G+parseInt(w.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),y=({item:w,height:G})=>{const _=w&&!!w.documentation,K=w?w.label:"",k=(0,p.a)(w?.documentation),z=(0,h.l4)(),W=s(z,G,_);return a.createElement("div",{className:(0,E.cx)([W.typeaheadItem])},a.createElement("b",null,K),a.createElement("hr",null),a.createElement("div",{dangerouslySetInnerHTML:{__html:k}}))};var D=e(82732),C=e.n(D),P=e(60089);const b=w=>({typeaheadItem:(0,E.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:w.typography.fontFamilyMonospace,padding:w.spacing(1,1,1,2),fontSize:w.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,E.css)({label:"type-ahead-item-selected",backgroundColor:w.colors.background.secondary}),typeaheadItemMatch:(0,E.css)({label:"type-ahead-item-match",color:w.v1.palette.yellow,borderBottom:`1px solid ${w.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,E.css)({label:"type-ahead-item-group-title",color:w.colors.text.secondary,fontSize:w.typography.bodySmall.fontSize,lineHeight:w.typography.body.lineHeight,padding:w.spacing(1)})}),T=w=>{const G=(0,h.wW)(b),{isSelected:_,item:K,prefix:k,style:z,onMouseEnter:W,onMouseLeave:Z,onClickItem:H}=w,X=_?(0,E.cx)([G.typeaheadItem,G.typeaheadItemSelected]):(0,E.cx)([G.typeaheadItem]),Y=(0,E.cx)([G.typeaheadItemMatch]),ne=(0,E.cx)([G.typeaheadItemGroupTitle]),se=K.label||"";return K.kind===g.c.GroupTitle?a.createElement("li",{className:ne,style:z},a.createElement("span",null,se)):a.createElement("li",{role:"none"},a.createElement("button",{role:"menuitem",className:X,style:z,onMouseDown:H,onMouseEnter:W,onMouseLeave:Z,type:"button"},K.highlightParts!==void 0?a.createElement(P.H,{text:se,highlightClassName:Y,highlightParts:K.highlightParts}):a.createElement(C(),{textToHighlight:se,searchWords:[k??""],autoEscape:!0,highlightClassName:Y})))},O=(w,G)=>w-G*Math.floor(w/G);class R extends a.PureComponent{constructor(){super(...arguments),this.listRef=(0,a.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const G=c(this.props.groupedItems),_=l(G),{listWidth:K,listHeight:k,itemHeight:z}=d(this.context,G,_);this.setState({listWidth:K,listHeight:k,itemHeight:z,allItems:G})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(G,_)=>{if(this.state.typeaheadIndex!==null&&_.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,n.isEqual)(G.groupedItems,this.props.groupedItems)===!1){const K=c(this.props.groupedItems),k=l(K),{listWidth:z,listHeight:W,itemHeight:Z}=d(this.context,K,k);this.setState({listWidth:z,listHeight:W,itemHeight:Z,allItems:K,typeaheadIndex:null})}},this.onMouseEnter=G=>{this.setState({hoveredItem:G})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=G=>{const _=this.state.allItems.length;if(_){const K=this.state.typeaheadIndex||0;let k=O(K+G,_);this.state.allItems[k].kind===g.c.GroupTitle&&(k=O(k+G,_)),this.setState({typeaheadIndex:k});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const G=window.getSelection(),_=G&&G.anchorNode;if(_&&_.parentElement){const K=_.parentElement.getBoundingClientRect(),k=window.scrollX,z=window.scrollY;return`position: absolute; display: flex; top: ${K.top+z+K.height+6}px; left: ${K.left+k-2}px`}return""}render(){const{prefix:G,isOpen:_=!1,origin:K}=this.props,{allItems:k,listWidth:z,listHeight:W,itemHeight:Z,hoveredItem:H,typeaheadIndex:X}=this.state,Y=H||X,ne=k[H||X||0];return a.createElement(I,{origin:K,isOpen:_,style:this.menuPosition},a.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},a.createElement(r.t7,{ref:this.listRef,itemCount:k.length,itemSize:Z,itemKey:se=>{const re=k&&k[se];return re?`${se}-${re.label}`:`${se}`},width:z,height:W},({index:se,style:re})=>{const ge=k&&k[se];return ge?a.createElement(T,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(ge):{},isSelected:X===null?!1:k[X]===ge,item:ge,prefix:G,style:re,onMouseEnter:()=>this.onMouseEnter(se),onMouseLeave:this.onMouseLeave}):null})),Y&&a.createElement(y,{height:W,item:ne}))}}R.contextType=o.N;class I extends a.PureComponent{constructor(G){super(G);const{index:_=0,origin:K="query",style:k}=G;this.node=document.createElement("div"),this.node.setAttribute("style",k),this.node.classList.add("slate-typeahead",`slate-typeahead-${K}-${_}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),i.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var M=e(79488),x=e(3613),L=e(96129);const S=250;function U({onTypeahead:w,cleanText:G,onWillApplySuggestion:_,portalOrigin:K}){let k,z={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const W=(0,n.debounce)(N,S),Z=H=>{z={...z,...H}};return{onBlur:(H,X,Y)=>(z={...z,groupedItems:[]},Y()),onClick:(H,X,Y)=>(z={...z,groupedItems:[]},Y()),onKeyDown:(H,X,Y)=>{const se=z.groupedItems.length;switch(H.key){case"Escape":{if(se)return H.preventDefault(),z={...z,groupedItems:[]},X.insertText("");break}case"ArrowDown":case"ArrowUp":if(se){H.preventDefault(),k.moveMenuIndex(H.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(H.shiftKey||H.ctrlKey)&&se)return H.preventDefault(),k.insertSuggestion();break}case"Tab":{if(se)return H.preventDefault(),k.insertSuggestion();break}default:{H.key.length===1&&W(X,Z,w,G);break}}return Y()},commands:{selectSuggestion:(H,X)=>{const Y=z.groupedItems;if(!Y||!Y.length)return H;const ne=H.applyTypeahead(X);return W(H,Z,w,G),ne},applyTypeahead:(H,X)=>{let Y=X.insertText||X.label;const ne=X.kind==="function",se=X.move||0,re=se>0?se:0,ge=se<0?-se:0,{typeaheadPrefix:q,typeaheadText:me,typeaheadContext:oe}=z;_&&(Y=_(Y,{groupedItems:z.groupedItems,typeaheadContext:oe,typeaheadPrefix:q,typeaheadText:me}));const fe=X.deleteBackwards||q.length,pe=(G?G(me):me).length-q.length,Me=me.indexOf(q),Ee=q&&(pe>0&&Me>-1||Y===me)&&!ne?pe+Me:0;if(Y.match(/\n/)){const he=(0,M.xl)(Y);return H.deleteBackward(fe).deleteForward(Ee).insertFragment(he).focus(),H}return z={...z,groupedItems:[]},H.snapshotSelection().deleteBackward(fe).deleteForward(Ee).insertText(Y).moveForward(re).moveBackward(ge).focus(),H}},renderEditor(H,X,Y){if(X.value.selection.isExpanded)return Y();const ne=Y();return a.createElement(a.Fragment,null,ne,a.createElement(R,{menuRef:se=>k=se,origin:K,prefix:z.typeaheadPrefix,isOpen:!!z.groupedItems.length,groupedItems:z.groupedItems,onSelectSuggestion:X.selectSuggestion}))}}}const N=async(w,G,_,K)=>{if(!_)return;const{value:k}=w,{selection:z}=k,W=k.document.getClosestBlock(k.focusBlock.key),Z=k.selection.start.offset-1,H=W&&W.getDecorations(w),X=H?H.filter(ve=>ve.start.offset<=Z&&ve.end.offset>Z&&ve.type===L.Z).toArray():[],Y=H&&H.filter(ve=>ve.end.offset<=Z&&ve.type===L.Z&&ve.data.get("className").includes("label-key")).last(),ne=Y&&k.focusText.text.slice(Y.start.offset,Y.end.offset),se=X.map(ve=>ve.data.get("className")).join(" ").split(" ").filter(ve=>ve.length);let re=k.focusText.text,ge=re.slice(0,z.focus.offset);X.length&&(re=k.focusText.text.slice(X[0].start.offset,X[0].end.offset),ge=k.focusText.text.slice(X[0].start.offset,z.focus.offset));const q=ge.match(/(?:!?=~?"?|")(.*)/);q?ge=q[1]:K&&(ge=K(ge));const{suggestions:me,context:oe}=await _({prefix:ge,text:re,value:k,wrapperClasses:se,labelKey:ne||void 0,editor:w}),fe=me.map(ve=>{if(!ve.items)return ve;const pe=ve.searchFunctionType||(ve.prefixMatch?x.Z.Prefix:x.Z.Word),Me=x.n[pe];let Pe={...ve};return ge&&(ve.skipFilter||(Pe.items=Pe.items.filter(Ee=>(Ee.filterText||Ee.label).length>=ge.length),Pe.items=Me(Pe.items,ge)),Pe.items=Pe.items.filter(Ee=>!(Ee.insertText===ge||(Ee.filterText??Ee.label)===ge))),ve.skipSort||(Pe.items=(0,n.sortBy)(Pe.items,Ee=>Ee.sortText===void 0?Ee.sortValue!==void 0?Ee.sortValue:Ee.label:Ee.sortText||Ee.label)),Pe}).filter(ve=>ve.items&&ve.items.length);G({groupedItems:fe,typeaheadPrefix:ge,typeaheadContext:oe,typeaheadText:re}),w.blur().focus()}},85530:(Q,A,e)=>{"use strict";e.d(A,{n:()=>p});var n=e(29422),a=e(31733),i=e(76067);function r(h){return(0,n.css)({".panel-options-group":{borderBottom:`1px solid ${h.colors.border.weak}`},".panel-options-group__header":{padding:h.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:h.colors.text.primary,"&:hover":{background:h.colors.emphasize(h.colors.background.primary,.03)}},".panel-options-group__icon":{color:h.colors.text.secondary,marginRight:h.spacing(1),padding:h.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:h.spacing(1,2,1,4)}})}function o(h){return(0,n.css)({".card-section":{marginBottom:h.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:h.colors.background.secondary,boxShadow:"none",padding:h.spacing(2),borderRadius:"4px","&:hover":{background:h.colors.emphasize(h.colors.background.secondary,.03)},".label-tag":{marginLeft:h.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:h.spacing(2)},".card-item-type":{color:h.colors.text.secondary,textTransform:"uppercase",fontSize:h.typography.size.sm,fontWeight:h.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:h.typography.size.sm},".card-item-name":{color:h.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:h.spacing(1)},".card-item-sub-name":{color:h.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:h.colors.text.secondary,textTransform:"uppercase",marginBottom:h.spacing(2),fontSize:h.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:h.typography.size.sm,display:"inline-block",marginLeft:h.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:h.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:h.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:h.typography.h3.fontSize},[h.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[h.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[h.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:h.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:h.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:h.typography.h4.fontSize},".card-item-sub-name":{fontSize:h.typography.size.sm},".layout-selector":{marginRight:0}}})}var g=e(83998);function u(h){return(0,n.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${h.typography.htmlFontSize}px`,fontFamily:h.typography.fontFamily,lineHeight:h.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:h.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:h.colors.text.primary,backgroundColor:h.colors.background.canvas,...c(h.typography.body)},"h1, .h1":c(h.typography.h1),"h2, .h2":c(h.typography.h2),"h3, .h3":c(h.typography.h3),"h4, .h4":c(h.typography.h4),"h5, .h5":c(h.typography.h5),"h6, .h6":c(h.typography.h6),p:{margin:h.spacing(0,0,2)},button:{letterSpacing:h.typography.body.letterSpacing,"&:focus-visible":(0,g.getFocusStyles)(h),"&:focus":{outline:"none"}},small:{fontSize:h.typography.bodySmall.fontSize},"b, strong":{fontWeight:h.typography.fontWeightMedium},em:{fontStyle:"italic",color:h.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:h.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:h.colors.text.primary},".text-warning":{color:h.colors.warning.text,"&:hover, &:focus":{color:h.colors.emphasize(h.colors.warning.text,.15)}},".text-error":{color:h.colors.error.text,"&:hover, &:focus":{color:h.colors.emphasize(h.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:h.colors.emphasize(h.colors.success.text,.15)}},a:{cursor:"pointer",color:h.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,g.getFocusStyles)(h),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:h.components.textHighlight.background,color:h.components.textHighlight.text,padding:0}})}function c(h){return{margin:0,fontSize:h.fontSize,lineHeight:h.lineHeight,fontWeight:h.fontWeight,letterSpacing:h.letterSpacing,fontFamily:h.fontFamily,marginBottom:"0.45em"}}function l(h){return(0,n.css)({"iframe.intercom-borderless-frame":{colorScheme:h.colors.mode}})}function d(h){return(0,n.css)({"input, button, select, textarea":{fontFamily:h.typography.body.fontFamily,fontSize:h.typography.body.fontSize,fontWeight:h.typography.body.fontWeight,lineHeight:h.typography.body.lineHeight},"input, select":{backgroundColor:h.components.input.background,color:h.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function f(h){return(0,n.css)({})}function m(h){const s=h.breakpoints.values.xxl+h.spacing.gridSize*2+h.components.sidemenu.width;return(0,n.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:h.spacing(2),paddingRight:h.spacing(2),[h.breakpoints.up("sm")]:{margin:h.spacing(0,1)},[h.breakpoints.up("md")]:{margin:h.spacing(0,2)},[`@media (min-width: ${s}px)`]:{maxWidth:`${h.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:h.spacing(2),paddingLeft:h.spacing(2),paddingRight:h.spacing(2)},".page-body":{padding:h.spacing(1),background:h.components.panel.background,border:`1px solid ${h.components.panel.borderColor}`,marginBottom:"32px",[h.breakpoints.up("md")]:{padding:h.spacing(2)},[h.breakpoints.up("lg")]:{padding:h.spacing(3)}},".page-heading":{fontSize:h.typography.h4.fontSize,marginTop:0,marginBottom:h.spacing(2)},".page-action-bar":{marginBottom:h.spacing(2),display:"flex",alignItems:"flex-start",gap:h.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:h.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:h.spacing(2)},".page-sub-heading-icon":{marginLeft:h.spacing(1),marginTop:h.spacing(.5)},".page-hidden":{display:"none"}})}var v=e(95885);const E=h=>(0,n.css)({".react-loading-skeleton":v.r});function p(){const h=(0,i.l4)();return a.createElement(n.Global,{styles:[u(h),l(h),d(h),m(h),o(h),r(h),f(h),E(h)]})}},76067:(Q,A,e)=>{"use strict";e.d(A,{Fg:()=>m,HE:()=>f,Zz:()=>d,l4:()=>v,sJ:()=>h,wW:()=>p,yK:()=>E});var n=e(85763),a=e.n(n),i=e(28454),r=e.n(i),o=e(31733),g=e(3854),u=e(33227);let c=null;const l=new WeakMap,d=s=>{const y=D=>{const C=c||g.N;return o.createElement(C.Consumer,null,P=>o.createElement(s,{...D,theme:P.v1}))};return y.displayName=`WithTheme(${s.displayName})`,a()(y,s),y},f=s=>{const y=D=>{const C=c||g.N;return o.createElement(C.Consumer,null,P=>o.createElement(s,{...D,theme:P}))};return y.displayName=`WithTheme(${s.displayName})`,a()(y,s),y};function m(){return(0,o.useContext)(c||g.N).v1}function v(){return(0,o.useContext)(c||g.N)}function E(s){const y=m();let D=l.get(s);return D||(D=(0,u.B)(s),l.set(s,D)),D(y)}function p(s,...y){const D=v();let C=l.get(s);return C||(C=r()(s,{maxSize:10}),l.set(s,C)),C(D,...y)}const h=s=>(c=o.createContext(s),()=>{c=null})},24860:(Q,A,e)=>{"use strict";e.d(A,{nz:()=>c.n,Ni:()=>n.N,gh:()=>o,Zu:()=>g,sJ:()=>a.sJ,GU:()=>l,Bb:()=>u.B,yK:()=>a.yK,wW:()=>a.wW,Fg:()=>a.Fg,l4:()=>a.l4,Zz:()=>a.Zz,HE:()=>a.HE});var n=e(3854),a=e(76067),i=e(58492);let r;const o=(d="dark")=>r?r(d):(0,i.j)({colors:{mode:d}}).v1,g=d=>(r=d,()=>{r=null});var u=e(33227),c=e(85530),l=e(83998)},83998:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{cardChrome:()=>a,focusCss:()=>c,getFocusStyles:()=>d,getMouseFocusStyles:()=>l,getTooltipContainerStyles:()=>f,hoverColor:()=>i,listItem:()=>r,listItemSelected:()=>o,mediaUp:()=>g});var n=e(37479);function a(m){return`
    background: ${m.colors.background.secondary};
    &:hover {
      background: ${i(m.colors.background.secondary,m)};
    }
    box-shadow: ${m.components.panel.boxShadow};
    border-radius: ${m.shape.radius.default};
`}function i(m,v){return v.isDark?(0,n.Z)(m).brighten(2).toString():(0,n.Z)(m).darken(2).toString()}function r(m){return`
  background: ${m.colors.background.secondary};
  &:hover {
    background: ${i(m.colors.background.secondary,m)};
  }
  box-shadow: ${m.components.panel.boxShadow};
  border-radius: ${m.shape.radius.default};
`}function o(m){return`
    background: ${i(m.colors.background.secondary,m)};
    color: ${m.colors.text.maxContrast};
`}function g(m){return`only screen and (min-width: ${m})`}const u=m=>m.hasOwnProperty("v1"),c=m=>{const v=u(m),E=v?m.colors.background.canvas:m.colors.bodyBg,p=v?m.colors.primary.main:m.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${E}, 0 0 0px 4px ${p};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function l(m){return{outline:"none",boxShadow:"none"}}function d(m){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${m.colors.background.canvas}, 0 0 0px 4px ${m.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const f=m=>({overflow:"hidden",background:m.colors.background.secondary,boxShadow:m.shadows.z2,maxWidth:"800px",padding:m.spacing(1),borderRadius:m.shape.radius.default,zIndex:m.zIndex.tooltip})},33227:(Q,A,e)=>{"use strict";e.d(A,{B:()=>i});var n=e(28454),a=e.n(n);function i(r){return a()(r)}},80470:(Q,A,e)=>{"use strict";e.d(A,{c:()=>n});var n=(a=>(a.GroupTitle="GroupTitle",a))(n||{})},5285:()=>{},84022:(Q,A,e)=>{"use strict";e.d(A,{BI:()=>r,D:()=>i,WZ:()=>g,e7:()=>o,iJ:()=>n.iJ});var n=e(7820),a=e(85666);const i=u=>["xs","sm","md","lg","xl","xxl","xxxl"].includes(u),r=()=>Object.keys(n._S);function o(u){return g(u?.type)}function g(u){if(u)switch(u){case a.fS.time:return"clock-nine";case a.fS.string:return"font";case a.fS.number:return"calculator-alt";case a.fS.boolean:return"toggle-on";case a.fS.trace:return"info-circle";case a.fS.enum:return"list-ol";case a.fS.geo:return"map-marker";case a.fS.other:return"brackets-curly"}return"question-circle"}},8526:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{CompletionItemKind:()=>o.c,getAvailableIcons:()=>c.BI,getFieldTypeIcon:()=>c.e7,getFieldTypeIconName:()=>c.WZ,isIconSize:()=>c.D,toIconName:()=>c.iJ});var n=e(43133),a=e.n(n),p={};for(const h in n)h!=="default"&&(p[h]=()=>n[h]);e.d(A,p);var i=e(244),r=e.n(i),p={};for(const h in i)h!=="default"&&(p[h]=()=>i[h]);e.d(A,p);var o=e(80470),g=e(5285),u=e.n(g),p={};for(const h in g)["default","CompletionItemKind"].indexOf(h)<0&&(p[h]=()=>g[h]);e.d(A,p);var c=e(84022),l=e(2223),d=e.n(l),p={};for(const h in l)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(h)<0&&(p[h]=()=>l[h]);e.d(A,p);var f=e(55858),m=e.n(f),p={};for(const h in f)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(h)<0&&(p[h]=()=>f[h]);e.d(A,p);var v=e(33499),E=e.n(v),p={};for(const h in v)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(h)<0&&(p[h]=()=>v[h]);e.d(A,p)},244:()=>{},33499:()=>{},2223:()=>{},55858:()=>{},43133:()=>{},71509:(Q,A,e)=>{"use strict";e.d(A,{i:()=>n});const n=(a,i)=>{a.key==="Tab"||a.altKey||a.ctrlKey||a.metaKey||(a.stopPropagation(),a.key==="Escape"&&i())}},63956:(Q,A,e)=>{"use strict";e.d(A,{Gc:()=>p,Jx:()=>o,O9:()=>f,Wm:()=>s,_V:()=>c,bM:()=>h,f7:()=>l,iV:()=>d,ns:()=>u,te:()=>g});var n=e(69781),a=e.n(n),i=e(37479);const r=4,o="rgba(0, 211, 255, 1)",g="rgba(11, 237, 50, 1)",u="rgba(237, 46, 24, 1)",c="rgba(150, 150, 150, 1)",l="rgba(247, 149, 32, 1)",d=.09,f=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function m(y){const D=(0,n.map)(y,v),C=(0,n.sortBy)(D,["h"]),P=(0,n.chunk)(C,r),b=(0,n.map)(P,O=>(0,n.sortBy)(O,"l")),T=(0,n.flattenDeep)((0,n.zip)(...b));return(0,n.map)(T,E)}function v(y){return(0,i.Z)(y).toHsl()}function E(y){return(0,i.Z)(y).toHexString()}function p(y){return(0,i.Z)(y).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function h(y,D){const C=(0,i.Z)(y),P=C.getBrightness();return C.getAlpha()<.3?D?"rgb(247, 248, 250)":"rgb(32, 34, 38)":P>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let s=m(f)},13386:(Q,A,e)=>{"use strict";e.d(A,{R:()=>n,g:()=>a});const n=i=>i().map(r=>({label:r.title,ariaLabel:r.title,url:r.href,target:r.target,icon:`${r.target==="_blank"?"external-link-alt":"link"}`,onClick:r.onClick})),a=i=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(i)},56586:(Q,A,e)=>{"use strict";e.d(A,{x:()=>n});function n(a,i,r){}},82171:(Q,A,e)=>{"use strict";e.d(A,{O:()=>n});function n(a){const r=a.lastIndexOf("."),o=a.substring(r),g=a.substring(0,r);return g.length<16?a:`${g.substring(0,16)}...${o}`}},49596:(Q,A,e)=>{"use strict";e.d(A,{C:()=>i});var n=e(69781),a=e.n(n);function i(r,o){let g=0,u=r.indexOf(o);o=o.replace(/\s/g,"");const c=[];if(u!==-1)return{distance:0,found:!0,ranges:[{start:u,end:u+o.length-1}]};for(const l of o){const d=r.indexOf(l,u);if(d===-1)return{distance:1/0,ranges:[],found:!1};if(u!==-1&&(g+=d-u),u=d+1,c.length===0)c.push({start:d,end:d});else{const f=(0,n.last)(c);d===f.end+1?f.end++:c.push({start:d,end:d})}}return{distance:g,ranges:c,found:!0}}},82926:(Q,A,e)=>{"use strict";e.d(A,{c:()=>g,t:()=>c});var n=e(70576),a=e(31733),i=e(39418),r=e(68011);function o(){typeof n.default.options.resources!="object"&&n.default.use(i.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const g=l=>(o(),a.createElement(r.c,{...l})),u=n.default.t,c=(l,d,f)=>(o(),u(l,d,f))},79764:(Q,A,e)=>{"use strict";e.d(A,{ns:()=>o.ns,Jx:()=>o.Jx,Qi:()=>n,JU:()=>g.JU,_V:()=>o._V,zG:()=>y,te:()=>o.te,f7:()=>o.f7,iV:()=>o.iV,Ot:()=>r,Yi:()=>u.Yi,nu:()=>E.Z,_J:()=>p._J,xq:()=>s.x,MX:()=>m.MX,O9:()=>o.O9,hu:()=>h.h,C6:()=>D.C,AE:()=>m.AE,iu:()=>f.i,np:()=>d.n,vm:()=>l.vm,tu:()=>l.tu,Bx:()=>l.Bx,bM:()=>o.bM,Gc:()=>o.Gc,z3:()=>g.z3,go:()=>c.g,Rc:()=>c.R,xl:()=>u.xl,l1:()=>u.l1,X1:()=>m.X1,FE:()=>g.FE,Wm:()=>o.Wm,NW:()=>v.N,Gu:()=>g.Gu});var n={};e.r(n),e.d(n,{getNextCharacter:()=>i,getPreviousCousin:()=>a}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(C){const P=(this.document||this.ownerDocument).querySelectorAll(C);let b=this,T;do{for(T=P.length;--T>=0&&P.item(T)!==b;);b=b.parentElement}while(T<0&&b);return b});function a(C,P){let b=C.parentElement.previousSibling,T;for(;b;){if(T=b.querySelector(P),T)return T;b=b.previousSibling}}function i(C){const P=(C||window).getSelection();if(!P||!P.anchorNode)return null;const b=P.getRangeAt(0),T=P.anchorNode.textContent,O=b.startOffset;return T.slice(O,O+1)}var r=e(67978),o=e(63956),g=e(74881),u=e(79488),c=e(13386),l=e(7225),d=e(60251),f=e(87261),m=e(90854),v=e(52386),E=e(3613),p=e(40184),h=e(56634),s=e(56586),y=(C=>(C.id="id",C.title="title",C.subTitle="subTitle",C.mainStat="mainStat",C.secondaryStat="secondaryStat",C.source="source",C.target="target",C.detail="detail__",C.arc="arc__",C.color="color",C))(y||{}),D=e(49596)},56634:(Q,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(69781),a=e.n(n);const i=(0,n.throttle)((...o)=>{console.log(...o)},500),r=o=>{let g=!1;return typeof window<"u"&&(g=window.localStorage.getItem("grafana.debug")==="true"),{logger:(u,c=!1,...l)=>{},enable:()=>g=!0,disable:()=>g=!1,isEnabled:()=>g}}},90854:(Q,A,e)=>{"use strict";e.d(A,{AE:()=>o,MX:()=>u,X1:()=>g});let n;const a=new Map,i=500;let r="";function o(){return n||(n=document.createElement("canvas").getContext("2d")),n}function g(c,l,d=400){const f=`${d} ${l}px 'Inter'`,m=c+f,v=a.get(m);if(v)return v;const E=o();r!==f&&(E.font=r=f);const p=E.measureText(c);return a.size===i&&a.clear(),a.set(m,p),p}function u(c,l,d,f,m,v){const E=g(c,14,v),p=l/(E.width+2)*14,h=d/f,s=Math.min(h,p);return Math.min(s,m??s)}},67978:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{getChildId:()=>a,renderOrCallToRender:()=>i});var n=e(31733);function a(r){let o;const g=n.Children.only(r);return"id"in g?.props?o=g.props.id:"inputId"in g.props&&(o=g?.props.inputId),typeof o=="string"?o:void 0}function i(r,o){if(n.isValidElement(r)||typeof r=="string"||typeof r=="number")return r;if(typeof r=="function"&&o)return r(o);throw new Error(`${r} is not a React element nor a function that returns React element`)}},60251:(Q,A,e)=>{"use strict";e.d(A,{n:()=>a});let n=null;function a(){if(n!==null)return n;if(typeof document<"u"){const i=document.createElement("div"),r={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(r).map(o=>{i.style[o]=r[o]}),document.body.appendChild(i),n=i.offsetWidth-i.clientWidth,document.body.removeChild(i)}else n=0;return n||0}},3613:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>a,n:()=>g});var n=e(49596),a=(u=>(u.Word="Word",u.Prefix="Prefix",u.Fuzzy="Fuzzy",u))(a||{});const g={Word:(u,c)=>u.filter(l=>(l.filterText||l.label).includes(c)),Prefix:(u,c)=>u.filter(l=>(l.filterText||l.label).startsWith(c)),Fuzzy:(u,c)=>(c=c.toLowerCase(),u.filter(l=>{const{distance:d,ranges:f,found:m}=(0,n.C)(l.label.toLowerCase(),c);return m?(l.sortValue=d,l.highlightParts=f,!0):!1}))}},95885:(Q,A,e)=>{"use strict";e.d(A,{r:()=>r,y:()=>o});var n=e(76932),a=e(31733);const r={animationName:(0,n.keyframes)({"0%":{opacity:0},"100%":{opacity:1}}),animationDelay:"100ms",animationTimingFunction:"ease-in",animationDuration:"100ms",animationFillMode:"backwards"},o=(g,u)=>Object.assign(g,{Skeleton:l=>a.createElement(u,{...l,rootProps:{style:r}})})},79488:(Q,A,e)=>{"use strict";e.d(A,{Yi:()=>a,l1:()=>r,xl:()=>i});var n=e(77537);const a={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},i=(o,g)=>{const u=o.split(`
`).map(l=>n.gO.create({type:"code_line",nodes:[n.xv.create(l)]})),c=n.gO.create({data:{syntax:g},type:"code_block",nodes:u});return n.BB.create({nodes:[c]})},r=(o,g)=>{const u=i(o,g);return n.B4.create({document:u})}},87261:(Q,A,e)=>{"use strict";e.d(A,{i:()=>n});const n=(a,i)=>{let r;if(a.getLinks&&(r=a.getLinks({valueRowIndex:i.index})),!!r){for(let o=0;o<r?.length;o++)if(r[o].onClick){const g=r[o].onClick;r[o].onClick=u=>{u.ctrlKey||u.metaKey||u.shiftKey||(u.preventDefault(),g(u,{field:a,rowIndex:i.index}))}}return r}}},7225:(Q,A,e)=>{"use strict";e.d(A,{Bx:()=>r,tu:()=>i,vm:()=>o});const n=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],a=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function i(c=""){const l=g(c.toLowerCase());return Math.abs(l%n.length)}function r(c=""){const l=i(c);return o(l)}function o(c){return{color:n[c],borderColor:a[c]}}function g(c){let l=5381;for(let d=0;d<c.length;d++)l=(l<<5)+l+c.charCodeAt(d);return l}var u={getTagColorsFromName:r}},17688:(Q,A,e)=>{"use strict";e.d(A,{k:()=>r,x:()=>i});var n=e(76932),a=e(77081);function i(o){switch(o){case"auto":return"bottom";case"auto-start":return"bottom-start";case"auto-end":return"bottom-end";default:return o??"bottom"}}function r(o,g,u,c,l){return{arrow:(0,n.css)({fill:g}),container:(0,n.css)({backgroundColor:g,borderRadius:o.shape.radius.default,border:`1px solid ${u}`,boxShadow:o.shadows.z2,color:c,fontSize:o.typography.bodySmall.fontSize,padding:o.spacing(l.topBottom,l.rightLeft),transition:"opacity 0.3s",zIndex:o.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"},code:{border:"none",display:"inline",background:a.darken(g,.1),color:c,whiteSpace:"normal"},pre:{background:a.darken(g,.1),color:c},a:{color:c,textDecoration:"underline"},"a:hover":{textDecoration:"none"}}),headerClose:(0,n.css)({color:o.colors.text.secondary,position:"absolute",right:o.spacing(1),top:o.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,n.css)({paddingTop:o.spacing(1),paddingBottom:o.spacing(2)}),body:(0,n.css)({paddingTop:o.spacing(1),paddingBottom:o.spacing(1)}),footer:(0,n.css)({paddingTop:o.spacing(2),paddingBottom:o.spacing(1)})}}},52386:(Q,A,e)=>{"use strict";e.d(A,{N:()=>a});var n=e(31733);function a(){const[i,r]=(0,n.useState)(0);return()=>r(o=>o+1)}},74881:(Q,A,e)=>{"use strict";e.d(A,{FE:()=>r,Gu:()=>a,JU:()=>n,z3:()=>i});var n=(o=>(o.onBlur="onBlur",o.onFocus="onFocus",o.onChange="onChange",o))(n||{});const a=(o,g)=>{const u=g.reduce((c,l)=>l.rule(o)?c:c.concat(l.errorMessage),[]);return u.length>0?u:null},i=(o,g)=>g&&g[o],r=(o,g)=>({rule:u=>!!u.match(o),errorMessage:g||"Value is not valid"})},71081:(Q,A,e)=>{"use strict";e.d(A,{z:()=>n});const n={RadioButton:{container:"data-testid radio-button"},Breadcrumbs:{breadcrumb:a=>`data-testid ${a} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",overlayContent:"data-testid TimePicker Overlay Content",fromField:"data-testid Time Range from field",toField:"data-testid Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"data-testid Time Range calendar",openButton:"data-testid Open time range calendar",closeButton:"data-testid Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DateTimePicker:{input:"data-testid date-time-input"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",exemplarsAddButton:"data-testid Add exemplar config button",internalLinkSwitch:"data-testid Internal link switch"},exemplarMarker:"data-testid Exemplar marker"}},Menu:{MenuComponent:a=>`${a} menu`,MenuGroup:a=>`${a} menu group`,MenuItem:a=>`${a} menu item`,SubMenu:{container:"data-testid SubMenu container",icon:"data-testid SubMenu icon"}},Panels:{Panel:{title:a=>`data-testid Panel header ${a}`,headerItems:a=>`data-testid Panel header item ${a}`,menuItems:a=>`data-testid Panel menu item ${a}`,menu:a=>`data-testid Panel menu ${a}`,containerByTitle:a=>`${a} panel`,headerCornerInfo:a=>`Panel header ${a}`,status:a=>`data-testid Panel status ${a}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:a=>`gpl alias ${a}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"data testid Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:a=>`data-testid VizLegend series ${a}`},Drawer:{General:{title:a=>`Drawer title ${a}`,expand:"Drawer expand",contract:"Drawer contract",close:"data-testid Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:a=>`${a} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:a=>`Tab ${a}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:a=>`${a}`,title:a=>`Query editor row title ${a}`,container:a=>`Query editor row ${a}`},AlertTab:{content:"data-testid Alert editor tab content"},Alert:{alert:a=>`Alert ${a}`,alertV2:a=>`data-testid Alert ${a}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:a=>`data-testid New transform ${a}`,transformationEditor:a=>`data-testid Transformation editor ${a}`,transformationEditorDebugger:a=>`data-testid Transformation editor debugger ${a}`},Transforms:{card:a=>`data-testid New transform ${a}`,Reduce:{modeLabel:"data-testid Transform mode label",calculationsLabel:"data-testid Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"data-testid search transformations",noTransformationsMessage:"data-testid no transformations message",addTransformationButton:"data-testid add transformation button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"data-testid Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{Menu:"data-testid navigation mega-menu",item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:a=>`${a}`,itemButton:a=>`data-testid ${a}`},QueryEditorToolbarItem:{button:a=>`QueryEditor toolbar item button ${a}`},BackButton:{backArrow:"data-testid Go Back"},OptionsGroup:{group:a=>a?`Options group ${a}`:"Options group",toggle:a=>a?`Options group ${a} toggle`:"Options group toggle"},PluginVisualization:{item:a=>`Plugin visualization item ${a}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"data-testid Query field"},QueryBuilder:{queryPatterns:"data-testid Query patterns",labelSelect:"data-testid Select label",valueSelect:"data-testid Select value",matchOperatorSelect:"data-testid Select match operator"},ValuePicker:{button:a=>`data-testid Value picker button ${a}`,select:a=>`data-testid Value picker select ${a}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:a=>`data-testid Collapse folder ${a}`,expandFolder:a=>`data-testid Expand folder ${a}`,dashboardItem:a=>`${n.Search.dashboardItems} ${a}`,dashboardCard:a=>`data-testid Search card ${a}`,folderHeader:a=>`data-testid Folder header ${a}`,folderContent:a=>`data-testid Folder content ${a}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:a=>`Call to action button ${a}`,buttonV2:a=>`data-testid Call to action button ${a}`},DataLinksContextMenu:{singleLink:"data-testid Data link"},CodeEditor:{container:"data-testid Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"data-testid Unified alert editor tab content"},VisualizationPreview:{card:a=>`data-testid suggestion-${a}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:a=>`data-testid dashboard-row-title-${a}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table",extensionPointTabs:"data-testid-extension-point-tabs",extensionPointTab:a=>`data-testid-extension-point-tab-${a}`},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"},Tooltip:{container:"data-testid tooltip"}}},21568:(Q,A,e)=>{"use strict";e.d(A,{wl:()=>i});var n=e(71081);const i={pages:{Login:{url:"/login",username:"data-testid Username input field",password:"data-testid Password input field",submit:"data-testid Login button",skip:"data-testid Skip change password button"},Home:{url:"/"},DataSource:{name:"data-testid Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"data-testid Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"data-testid Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:r=>`Data source list item ${r}`},EditDataSource:{url:r=>`/datasources/edit/${r}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:r=>`Data source plugin item ${r}`,dataSourcePluginsV2:r=>`Add new data source ${r}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:r=>`data-testid ${r}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:r=>`/d/${r}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:r=>`data-testid Dashboard template variables submenu Label ${r}`,submenuItemValueDropDownValueLinkTexts:r=>`data-testid Dashboard template variables Variable Value DropDown value link text ${r}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:r=>`data-testid Dashboard template variables Variable Value DropDown option text ${r}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:r=>`data-testid Dashboard annotations submenu Label ${r}`,annotationToggle:r=>`data-testid Dashboard annotations submenu Toggle ${r}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:r=>`Dashboard settings section item ${r}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:n.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:n.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:n.z.CallToActionCard.button("Add variable"),addVariableCTAV2:n.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:r=>`Variable editor Table Name field ${r}`,tableRowDefinitionFields:r=>`Variable editor Table Definition field ${r}`,tableRowArrowUpButtons:r=>`Variable editor Table ArrowUp button ${r}`,tableRowArrowDownButtons:r=>`Variable editor Table ArrowDown button ${r}`,tableRowDuplicateButtons:r=>`Variable editor Table Duplicate button ${r}`,tableRowRemoveButtons:r=>`Variable editor Table Remove button ${r}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:n.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:r=>`Dashboard search item ${r}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},PublicDashboardConfirmAccess:{submitButton:"data-testid confirm-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:r=>`/d-solo/${r}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"data-testid Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"data-testid Plugin signature info",disabledInfo:"data-testid Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:r=>`data-testid browse dashboards row ${r}`,checkbox:r=>`data-testid ${r} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",anonUserDevices:"data-testid anon-user-devices-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:r=>`data-testid dashboards-list-item-${r}`}}},ProfilePage:{url:"/profile"}},components:n.z}},71199:(Q,A,e)=>{"use strict";e.d(A,{As:()=>w,B5:()=>a,Bd:()=>se,FI:()=>s,IG:()=>L,Jp:()=>m,KC:()=>p,L3:()=>k,LB:()=>d,M8:()=>K,Q8:()=>o,QH:()=>_,Ss:()=>X,UV:()=>l,Y4:()=>ne,ap:()=>S,b8:()=>Y,bQ:()=>P,eK:()=>i,f3:()=>N,h2:()=>W,i3:()=>T,iT:()=>ge,jG:()=>U,jK:()=>O,kW:()=>u,kv:()=>c,l8:()=>v,o:()=>z,o0:()=>y,pR:()=>E,pc:()=>x,pu:()=>D,q1:()=>g,v7:()=>Z,w5:()=>n,wN:()=>C,wf:()=>h,wm:()=>I,xy:()=>r,yK:()=>f});var n=(q=>(q.AlertStates="alertStates",q.Annotations="annotations",q.Series="series",q))(n||{}),a=(q=>(q.Linear="linear",q.Quad="quad",q))(a||{}),i=(q=>(q.Clamped="clamped",q.Mod="mod",q))(i||{}),r=(q=>(q.Field="field",q.Fixed="fixed",q.Template="template",q))(r||{}),o=(q=>(q.Field="field",q.Fixed="fixed",q.Mapping="mapping",q))(o||{}),g=(q=>(q.Auto="auto",q.Coords="coords",q.Geohash="geohash",q.Lookup="lookup",q))(g||{}),u=(q=>(q.Count="count",q.Size="size",q))(u||{}),c=(q=>(q.auto="auto",q.ge="ge",q.le="le",q.unknown="unknown",q))(c||{}),l=(q=>(q.Ascending="Ascending",q.Descending="Descending",q))(l||{}),d=(q=>(q.Auto="auto",q.Bottom="bottom",q.Hidden="hidden",q.Left="left",q.Right="right",q.Top="top",q))(d||{}),f=(q=>(q.Series="series",q.Text="text",q))(f||{}),m=(q=>(q.Always="always",q.Auto="auto",q.Never="never",q))(m||{}),v=(q=>(q.Bars="bars",q.Line="line",q.Points="points",q))(v||{}),E=(q=>(q.Constant="constant",q.NegativeY="negative-Y",q))(E||{}),p=(q=>(q.Linear="linear",q.Smooth="smooth",q.StepAfter="stepAfter",q.StepBefore="stepBefore",q))(p||{}),h=(q=>(q.Linear="linear",q.Log="log",q.Ordinal="ordinal",q.Symlog="symlog",q))(h||{}),s=(q=>(q.Hue="hue",q.None="none",q.Opacity="opacity",q.Scheme="scheme",q))(s||{}),y=(q=>(q.None="none",q.Normal="normal",q.Percent="percent",q))(y||{}),D=(q=>(q[q.After=1]="After",q[q.Before=-1]="Before",q[q.Center=0]="Center",q))(D||{}),C=(q=>(q[q.Horizontal=0]="Horizontal",q[q.Vertical=1]="Vertical",q))(C||{}),P=(q=>(q[q.Down=-1]="Down",q[q.Left=-1]="Left",q[q.Right=1]="Right",q[q.Up=1]="Up",q))(P||{});const b={dash:[]};var T=(q=>(q.Area="area",q.Dashed="dashed",q.DashedAndArea="dashed+area",q.Line="line",q.LineAndArea="line+area",q.Off="off",q.Series="series",q))(T||{}),O=(q=>(q.Hidden="hidden",q.List="list",q.Table="table",q))(O||{});const R={calcs:[]};var I=(q=>(q.Auto="auto",q.Horizontal="horizontal",q.Vertical="vertical",q))(I||{});const M={timezone:[]};var x=(q=>(q.Background="background",q.BackgroundSolid="background_solid",q.None="none",q.Value="value",q))(x||{}),L=(q=>(q.Area="area",q.Line="line",q.None="none",q))(L||{}),S=(q=>(q.Auto="auto",q.Center="center",q))(S||{}),U=(q=>(q.Auto="auto",q.Name="name",q.None="none",q.Value="value",q.ValueAndName="value_and_name",q))(U||{}),N=(q=>(q.Multi="multi",q.None="none",q.Single="single",q))(N||{}),w=(q=>(q.Ascending="asc",q.Descending="desc",q.None="none",q))(w||{});const G={calcs:[]};var _=(q=>(q.Basic="basic",q.Gradient="gradient",q.Lcd="lcd",q))(_||{}),K=(q=>(q.Color="color",q.Hidden="hidden",q.Text="text",q))(K||{}),k=(q=>(q.Auto="auto",q.Left="left",q.Top="top",q))(k||{}),z=(q=>(q.Auto="auto",q.Manual="manual",q))(z||{}),W=(q=>(q.Auto="auto",q.BasicGauge="basic",q.ColorBackground="color-background",q.ColorBackgroundSolid="color-background-solid",q.ColorText="color-text",q.Custom="custom",q.Gauge="gauge",q.GradientGauge="gradient-gauge",q.Image="image",q.JSONView="json-view",q.LcdGauge="lcd-gauge",q.Sparkline="sparkline",q))(W||{}),Z=(q=>(q.Basic="basic",q.Gradient="gradient",q))(Z||{});const H={fields:[],reducer:[]};var X=(q=>(q.Lg="lg",q.Md="md",q.Sm="sm",q))(X||{}),Y=(q=>(q.CSV="csv",q.Date="date",q.Distributed="distributed",q.DoubleQuote="doublequote",q.Glob="glob",q.HTML="html",q.JSON="json",q.Lucene="lucene",q.PercentEncode="percentencode",q.Pipe="pipe",q.QueryParam="queryparam",q.Raw="raw",q.Regex="regex",q.SQLString="sqlstring",q.SingleQuote="singlequote",q.Text="text",q.UriEncode="uriencode",q))(Y||{}),ne=(q=>(q.exact="exact",q.none="none",q.numbers="numbers",q.signature="signature",q))(ne||{}),se=(q=>(q.EQ="eq",q.GT="gt",q.GTE="gte",q.LT="lt",q.LTE="lte",q.NEQ="neq",q))(se||{});const re={align:"auto",inspect:!1},ge="browser"},72249:(Q,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>i});var n=e(71199);const a="10.3.3",i={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:n.wm.Auto,showValue:n.Jp.Auto,stacking:n.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},r={fillOpacity:80,gradientMode:n.FI.None,lineWidth:1}},31634:(Q,A,e)=>{"use strict";e.d(A,{v:()=>i});var n=e(71199);const a="10.3.3",i={displayMode:n.QH.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:n.L3.Auto,showUnfilled:!0,sizing:n.o.Auto,valueMode:n.M8.Color}},84961:(Q,A,e)=>{"use strict";e.d(A,{v:()=>a});const n="10.3.3",a={selectedSeries:0}},19945:(Q,A,e)=>{"use strict";e.d(A,{v:()=>i});var n=e(71199);const a="10.3.3",i={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:n.o.Auto}},93783:(Q,A,e)=>{"use strict";e.d(A,{vC:()=>a});const n="10.3.3",a={layers:[]},i={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var r=(g=>(g.Details="details",g.None="none",g))(r||{}),o=(g=>(g.Coords="coords",g.Fit="fit",g.Zero="zero",g))(o||{})},65623:(Q,A,e)=>{"use strict";e.d(A,{vC:()=>o});var n=e(71199);const a="10.3.3";var i=(g=>(g.Opacity="opacity",g.Scheme="scheme",g))(i||{}),r=(g=>(g.Exponential="exponential",g.Linear="linear",g))(r||{});const o={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:n.Jp.Auto,tooltip:{mode:n.f3.Single,yHistogram:!1,showColorScale:!1}}},73779:(Q,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>i});var n=e(71199);const a="10.3.3",i={bucketOffset:0},r={fillOpacity:80,gradientMode:n.FI.None,lineWidth:1}},31385:(Q,A,e)=>{"use strict";e.d(A,{v:()=>a});const n="10.3.3",a={showImage:!0}},9334:(Q,A,e)=>{"use strict";e.d(A,{vC:()=>g});const n="10.3.3";var a=(u=>(u.Donut="donut",u.Pie="pie",u))(a||{}),i=(u=>(u.Name="name",u.Percent="percent",u.Value="value",u))(i||{}),r=(u=>(u.Percent="percent",u.Value="value",u))(r||{});const o={values:[]},g={displayLabels:[]}},97635:(Q,A,e)=>{"use strict";e.d(A,{v:()=>i});var n=e(71199);const a="10.3.3",i={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,showPercentChange:!1,textMode:n.jG.Auto,wideLayout:!0}},1651:(Q,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>i});var n=e(71199);const a="10.3.3",i={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:n.Jp.Auto},r={fillOpacity:70,lineWidth:0}},41242:(Q,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>i});var n=e(71199);const a="10.3.3",i={colWidth:.9,rowHeight:.9,showValue:n.Jp.Auto},r={fillOpacity:70,lineWidth:1}},3461:(Q,A,e)=>{"use strict";e.d(A,{v:()=>i});var n=e(71199);const a="10.3.3",i={cellHeight:n.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},12720:(Q,A,e)=>{"use strict";e.d(A,{vC:()=>g});const n="10.3.3";var a=(u=>(u.Code="code",u.HTML="html",u.Markdown="markdown",u))(a||{}),i=(u=>(u.Go="go",u.Html="html",u.Json="json",u.Markdown="markdown",u.Plaintext="plaintext",u.Sql="sql",u.Typescript="typescript",u.Xml="xml",u.Yaml="yaml",u))(i||{});const r="plaintext",o={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},g={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},54648:(Q,A,e)=>{"use strict";e.d(A,{vC:()=>u});var n=e(71199);const a="10.3.3";var i=(c=>(c.Auto="auto",c.Manual="manual",c))(i||{}),r=(c=>(c.Lines="lines",c.Points="points",c.PointsAndLines="points+lines",c))(r||{});const o={exclude:[]},g={label:n.Jp.Auto,show:"points"},u={series:[]}},27546:(Q,A,e)=>{"use strict";e.d(A,{$U:()=>c,AU:()=>b,Bd:()=>g,G_:()=>r,H3:()=>m,Hi:()=>E,NU:()=>D,Ql:()=>O,SJ:()=>T,Vb:()=>C,ZM:()=>P,bn:()=>i,gW:()=>o,ic:()=>h,mQ:()=>s});const n={tags:[]},a={exclude:!1,ids:[]},i={list:[]},r={builtIn:0,enable:!0,hide:!1},o={multi:!1,options:[],skipUrlSync:!1};var g=(R=>(R[R.never=0]="never",R[R.onDashboardLoad=1]="onDashboardLoad",R[R.onTimeRangeChanged=2]="onTimeRangeChanged",R))(g||{}),u=(R=>(R[R.dontHide=0]="dontHide",R[R.hideLabel=1]="hideLabel",R[R.hideVariable=2]="hideVariable",R))(u||{}),c=(R=>(R[R.alphabeticalAsc=1]="alphabeticalAsc",R[R.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",R[R.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",R[R.alphabeticalDesc=2]="alphabeticalDesc",R[R.disabled=0]="disabled",R[R.naturalAsc=7]="naturalAsc",R[R.naturalDesc=8]="naturalDesc",R[R.numericalAsc=3]="numericalAsc",R[R.numericalDesc=4]="numericalDesc",R))(c||{});const l={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var d=(R=>(R.ContinuousBlPu="continuous-BlPu",R.ContinuousBlYlRd="continuous-BlYlRd",R.ContinuousBlues="continuous-blues",R.ContinuousGrYlRd="continuous-GrYlRd",R.ContinuousGreens="continuous-greens",R.ContinuousPurples="continuous-purples",R.ContinuousRdYlGr="continuous-RdYlGr",R.ContinuousReds="continuous-reds",R.ContinuousYlBl="continuous-YlBl",R.ContinuousYlRd="continuous-YlRd",R.Fixed="fixed",R.PaletteClassic="palette-classic",R.PaletteClassicByName="palette-classic-by-name",R.Shades="shades",R.Thresholds="thresholds",R))(d||{});const f={h:9,w:12,x:0,y:0};var m=(R=>(R.Absolute="absolute",R.Percentage="percentage",R))(m||{});const v={steps:[]};var E=(R=>(R.RangeToText="range",R.RegexToText="regex",R.SpecialValue="special",R.ValueToText="value",R))(E||{}),p=(R=>(R.Empty="empty",R.False="false",R.NaN="nan",R.Null="null",R.NullAndNan="null+nan",R.True="true",R))(p||{});const h={hidden:!1,refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],time_options:["5m","15m","1h","6h","12h","24h","2d","7d","30d"]};var s=(R=>(R[R.Crosshair=1]="Crosshair",R[R.Off=0]="Off",R[R.Tooltip=2]="Tooltip",R))(s||{});const y=0,D={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},C={overrides:[]},P={id:""},b={links:[],mappings:[]},T={collapsed:!1,panels:[]},O={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,tags:[],timezone:"browser"}},44580:(Q,A,e)=>{"use strict";e.d(A,{Gu:()=>i,OA:()=>a});var n=e(71199);const a={align:"auto",inspect:!1,cellOptions:{type:n.h2.Auto}};var i=(r=>(r.NotStarted="NotStarted",r.Loading="Loading",r.Streaming="Streaming",r.Done="Done",r.Error="Error",r))(i||{})},7205:(Q,A,e)=>{"use strict";e.d(A,{Ql:()=>i,bU:()=>a,ic:()=>o});var n=e(27546),a=(v=>(v[v.dontHide=0]="dontHide",v[v.hideLabel=1]="hideLabel",v[v.hideVariable=2]="hideVariable",v))(a||{});const i=n.Ql,r={...n.gW},o=n.ic,g=n.NU,u=n.SJ,c=n.AU,l=n.Vb,d=n.ZM,f=n.G_,m=n.bn},14150:(Q,A,e)=>{"use strict";e.d(A,{M:()=>o,Z:()=>i});var n=e(69781),a=e.n(n);class i{constructor(u){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",u){if(u.columns)for(const c of u.columns)this.addColumn(c);if(u.rows)for(const c of u.rows)this.addRow(c)}}sort(u){u.col===null||u.col===void 0||this.columns.length<=u.col||(this.rows.sort((c,l)=>(c=c[u.col],l=l[u.col],+(c==null)-+(l==null)||+(c>l)||-(c<l))),u.desc&&this.rows.reverse(),this.columns[u.col].sort=!0,this.columns[u.col].desc=u.desc)}addColumn(u){this.columnMap[u.text]||(this.columns.push(u),this.columnMap[u.text]=u)}addRow(u){this.rows.push(u)}}function r(g,u,c){let l=!1;for(let d=0;d<g.length;d++)if(u[d]!==void 0&&c[d]!==void 0){if(u[d]!==c[d])return!1}else(u[d]===void 0||c[d]===void 0)&&(l=!0);return l}function o(g,...u){const c=g||new i;if(arguments.length===1)return c;if(arguments.length===2)return c.columns=u[0].hasOwnProperty("columns")?[...u[0].columns]:[],c.rows=u[0].hasOwnProperty("rows")?[...u[0].rows]:[],c;const l=u.filter(h=>!!h.columns),d={},f=l.slice().reduce((h,s)=>(s.columns.forEach(y=>{const{text:D}=y;d[D]===void 0&&(d[D]=h.length,h.push(y))}),h),[]),m=l.map(h=>h.columns.map(s=>d[s.text])),v=l.reduce((h,s,y)=>{const D=m[y];return s.rows.forEach(C=>{const P=[];D.forEach((b,T)=>{P[b]=C[T]}),h.push(P)}),h},[]),E={},p=v.reduce((h,s,y)=>{if(!E[y]){let D=y+1;for(;D<v.length;){const C=(0,n.findIndex)(v,P=>r(f,s,P),D);if(C>-1){const P=v[C];for(let b=0;b<f.length;b++)s[b]===void 0&&P[b]!==void 0&&(s[b]=P[b]);E[C]=P,D=C+1}else break}h.push(s)}return h},[]);return c.columns=f,c.rows=p,c}},92089:(Q,A,e)=>{"use strict";e.d(A,{e:()=>a});var n=e(4579);const a=(0,n.PH)("core/cleanUpState")},7939:(Q,A,e)=>{"use strict";e.d(A,{$l:()=>n.$l,H7:()=>a.H7,RL:()=>a.RL,ad:()=>n.ad});var n=e(43025),a=e(18917)},83599:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>i,h:()=>a});var n=e(83994);const a=new n.F,i=a},49465:(Q,A,e)=>{"use strict";e.d(A,{P:()=>G});var n=e(76932),a=e(69781),i=e(31733),r=e(51925),o=e(76067),g=e(51343),u=e(68833),c=e(36717),l=e(14632),d=e(53166),f=e(41327),m=e(32166),v=e(17618),E=e(37739),p=e(38834),h=e(23420),s=e(69391);class y extends i.Component{constructor(Y){super(Y),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(Y){return this.setState({isLoading:!0}),(0,a.isNil)(Y)&&(Y=""),(0,s.i)().get("/api/serviceaccounts/search").then(ne=>ne.serviceAccounts.map(se=>({id:se.id,value:se.id,label:se.login,imgUrl:se.avatarUrl,login:se.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:Y,onSelected:ne,inputId:se}=this.props,{isLoading:re}=this.state;return i.createElement("div",{className:"service-account-picker","data-testid":"serviceAccountPicker"},i.createElement(p.qb,{isClearable:!0,className:Y,inputId:se,isLoading:re,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:ne,placeholder:"Start typing to search for service accounts",noOptionsMessage:"No service accounts found","aria-label":"Service Account picker"}))}}class D extends i.Component{constructor(Y){super(Y),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}componentDidMount(){const{teamId:Y}=this.props;Y&&(0,s.i)().get(`/api/teams/${Y}`).then(ne=>{this.setState({value:{value:ne,label:ne.name,imgUrl:ne.avatarUrl}})})}search(Y){return this.setState({isLoading:!0}),(0,a.isNil)(Y)&&(Y=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${Y}`).then(ne=>{const se=ne.teams.map(re=>({value:re,label:re.name,imgUrl:re.avatarUrl}));return this.setState({isLoading:!1}),se})}render(){const{onSelected:Y,className:ne}=this.props,{isLoading:se,value:re}=this.state;return i.createElement("div",{className:"user-picker","data-testid":"teamPicker"},i.createElement(p.qb,{isLoading:se,defaultOptions:!0,loadOptions:this.debouncedSearch,value:re,onChange:Y,className:ne,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}class C extends i.Component{constructor(Y){super(Y),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(Y){return this.setState({isLoading:!0}),(0,a.isNil)(Y)&&(Y=""),(0,s.i)().get(`/api/org/users/lookup?query=${Y}&limit=100`).then(ne=>ne.map(se=>({id:se.userId,value:se.userId,label:se.login,imgUrl:se.avatarUrl,login:se.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:Y,onSelected:ne,inputId:se}=this.props,{isLoading:re}=this.state;return i.createElement("div",{className:"user-picker","data-testid":"userPicker"},i.createElement(p.qb,{isClearable:!0,className:Y,inputId:se,isLoading:re,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:ne,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}var P=e(75665),b=(X=>(X.None="None",X.Team="Team",X.User="User",X.ServiceAccount="ServiceAccount",X.BuiltInRole="builtInRole",X))(b||{});const T=({title:X=(0,d.t)("access-control.add-permission.title","Add permission for"),permissions:Y,assignments:ne,onAdd:se,onCancel:re})=>{const[ge,q]=(0,i.useState)(b.None),[me,oe]=(0,i.useState)(0),[fe,ve]=(0,i.useState)(0),[pe,Me]=(0,i.useState)(""),[Pe,Ee]=(0,i.useState)(""),he=(0,i.useMemo)(()=>{const ke=[];return ne.users&&ke.push({value:b.User,label:(0,d.t)("access-control.add-permission.user-label","User")}),ne.serviceAccounts&&ke.push({value:b.ServiceAccount,label:(0,d.t)("access-control.add-permission.serviceaccount-label","Service Account")}),ne.teams&&ke.push({value:b.Team,label:(0,d.t)("access-control.add-permission.team-label","Team")}),ne.builtInRoles&&ke.push({value:b.BuiltInRole,label:(0,d.t)("access-control.add-permission.role-label","Role")}),ke},[ne]);(0,i.useEffect)(()=>{Y.length>0&&Ee(Y[0])},[Y]);const Le=()=>ge===b.Team&&me>0||ge===b.User&&fe>0||ge===b.ServiceAccount&&fe>0||b.BuiltInRole&&P.B5.hasOwnProperty(pe);return i.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},i.createElement(h.P,{onClick:re}),i.createElement("h5",null,X),i.createElement(v.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>se({userId:fe,teamId:me,builtInRole:pe,permission:Pe,target:ge})},()=>i.createElement(E.K,{gap:1,direction:"row"},i.createElement(p.Ph,{"aria-label":"Role to add new permission to",value:ge,options:he,onChange:ke=>q(ke.value),disabled:he.length===0,width:"auto"}),ge===b.User&&i.createElement(C,{onSelected:ke=>ve(ke?.value||0)}),ge===b.ServiceAccount&&i.createElement(y,{onSelected:ke=>ve(ke?.value||0)}),ge===b.Team&&i.createElement(D,{onSelected:ke=>oe(ke.value?.id||0)}),ge===b.BuiltInRole&&i.createElement(p.Ph,{"aria-label":"Built-in role picker",options:Object.values(P.B5).filter(ke=>ke!==P.B5.None).map(ke=>({value:ke,label:ke})),onChange:ke=>Me(ke.value||""),width:"auto"}),i.createElement(p.Ph,{"aria-label":"Permission Level",width:"auto",value:Y.find(ke=>ke===Pe),options:Y.map(ke=>({label:ke,value:ke})),onChange:ke=>Ee(ke.value||"")}),i.createElement(g.zx,{type:"submit",disabled:!Le()},i.createElement(d.cC,{i18nKey:"access-control.add-permissions.save"},"Save")))))};var O=e(58037),R=e(49311);const I=({item:X,permissionLevels:Y,canSet:ne,onRemove:se,onChange:re})=>i.createElement("tr",null,i.createElement("td",null,M(X)),i.createElement("td",null,L(X)),i.createElement("td",null,X.isInherited&&i.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),i.createElement("td",null,i.createElement(p.Ph,{disabled:!ne||!X.isManaged,onChange:ge=>re(X,ge.value),value:Y.find(ge=>ge===X.permission),options:Y.map(ge=>({value:ge,label:ge}))})),i.createElement("td",null,i.createElement(O.u,{content:S(X)},i.createElement(R.J,{name:"info-circle"}))),i.createElement("td",null,X.isManaged?i.createElement(g.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!ne,onClick:()=>se(X),"aria-label":`Remove permission for ${x(X)}`}):i.createElement(O.u,{content:X.isInherited?"Inherited Permission":"Provisioned Permission"},i.createElement(g.zx,{size:"sm",icon:"lock"})))),M=X=>X.teamId?i.createElement("img",{className:"filter-table__avatar",src:X.teamAvatarUrl,alt:`Avatar for team ${X.teamId}`}):X.userId?i.createElement("img",{className:"filter-table__avatar",src:X.userAvatarUrl,alt:`Avatar for user ${X.userId}`}):i.createElement(R.J,{size:"xl",name:"shield"}),x=X=>X.userId?X.userLogin:X.teamId?X.team:X.builtInRole,L=X=>X.userId?i.createElement("span",{key:"name"},X.userLogin," "):X.teamId?i.createElement("span",{key:"name"},X.team," "):X.builtInRole?i.createElement("span",{key:"name"},X.builtInRole," "):i.createElement("span",{key:"name"}),S=X=>`Actions: ${[...new Set(X.actions)].sort().join(" ")}`,U=({title:X,items:Y,compareKey:ne,permissionLevels:se,canSet:re,onRemove:ge,onChange:q})=>{const me=(0,i.useMemo)(()=>{const oe={};for(let fe of Y){const ve=fe[ne];if(!oe[ve]){oe[ve]=fe;continue}fe.actions.length>oe[ve].actions.length&&(oe[ve]=fe)}return Object.keys(oe).map(fe=>oe[fe])},[Y,ne]);return me.length===0?null:i.createElement("div",null,i.createElement("table",{className:"filter-table gf-form-group"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{style:{width:"1%"}}),i.createElement("th",null,X),i.createElement("th",{style:{width:"1%"}}),i.createElement("th",{style:{width:"40%"}},i.createElement(d.cC,{i18nKey:"access-control.permission-list.permission"},"Permission")),i.createElement("th",{style:{width:"1%"}}),i.createElement("th",{style:{width:"1%"}}))),i.createElement("tbody",null,me.map((oe,fe)=>i.createElement(I,{item:oe,onRemove:ge,onChange:q,canSet:re,key:`${fe}-${oe.userId}`,permissionLevels:se})))))},N="",w={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},G=({title:X=(0,d.t)("access-control.permissions.title","Permissions"),buttonLabel:Y=(0,d.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:ne=(0,d.t)("access-control.permissions.no-permissions","There are no permissions"),resource:se,resourceId:re,canSetPermissions:ge,addPermissionTitle:q})=>{const me=(0,o.wW)(H),[oe,fe]=(0,i.useState)(!1),[ve,pe]=(0,i.useState)([]),[Me,Pe]=(0,i.useState)(w),Ee=(0,i.useCallback)(()=>K(se,re).then(Ye=>pe(Ye)),[se,re]);(0,i.useEffect)(()=>{_(se).then(Ye=>(Pe(Ye),Ee()))},[se,re,Ee]);const he=Ye=>{let Ne=null;Ye.target===b.User||Ye.target===b.ServiceAccount?Ne=k(se,re,Ye.userId,Ye.permission):Ye.target===b.Team?Ne=z(se,re,Ye.teamId,Ye.permission):Ye.target===b.BuiltInRole&&(Ne=W(se,re,Ye.builtInRole,Ye.permission)),Ne!==null&&Ne.then(Ee)},Le=Ye=>{let Ne=null;Ye.userId?Ne=k(se,re,Ye.userId,N):Ye.teamId?Ne=z(se,re,Ye.teamId,N):Ye.isServiceAccount&&Ye.userId?Ne=k(se,re,Ye.userId,N):Ye.builtInRole&&(Ne=W(se,re,Ye.builtInRole,N)),Ne!==null&&Ne.then(Ee)},ke=(Ye,Ne)=>{Ye.permission!==Ne&&(Ye.userId?he({permission:Ne,userId:Ye.userId,target:b.User}):Ye.isServiceAccount?he({permission:Ne,userId:Ye.userId,target:b.User}):Ye.teamId?he({permission:Ne,teamId:Ye.teamId,target:b.Team}):Ye.builtInRole&&he({permission:Ne,builtInRole:Ye.builtInRole,target:b.BuiltInRole}))},ot=(0,i.useMemo)(()=>(0,a.sortBy)(ve.filter(Ye=>Ye.teamId),["team","isManaged"]),[ve]),it=(0,i.useMemo)(()=>(0,a.sortBy)(ve.filter(Ye=>Ye.userId&&!Ye.isServiceAccount),["userLogin","isManaged"]),[ve]),ce=(0,i.useMemo)(()=>(0,a.sortBy)(ve.filter(Ye=>Ye.userId&&Ye.isServiceAccount),["userLogin","isManaged"]),[ve]),le=(0,i.useMemo)(()=>(0,a.sortBy)(ve.filter(Ye=>Ye.builtInRole),["builtInRole","isManaged"]),[ve]),Re=(0,d.t)("access-control.permissions.role","Role"),Ae=(0,d.t)("access-control.permissions.user","User"),Oe=(0,d.t)("access-control.permissions.serviceaccount","Service Account"),$e=(0,d.t)("access-control.permissions.team","Team");return i.createElement("div",null,ge&&i.createElement(i.Fragment,null,se==="folders"&&i.createElement(i.Fragment,null,i.createElement(d.cC,{i18nKey:"access-control.permissions.permissions-change-warning"},"This will change permissions for this folder and all its descendants. In total, this will affect:"),i.createElement(m.X,{selectedItems:{folder:{[re]:!0},dashboard:{},panel:{},$all:!1}}),i.createElement(r.T,{v:2})),i.createElement(g.zx,{className:me.addPermissionButton,variant:"primary",key:"add-permission",onClick:()=>fe(!0)},Y),i.createElement(l.s,{in:oe},i.createElement(T,{title:q,onAdd:he,permissions:Me.permissions,assignments:Me.assignments,onCancel:()=>fe(!1)}))),ve.length===0&&i.createElement(u.x,null,i.createElement(c.x,null,ne)),i.createElement(U,{title:Re,items:le,compareKey:"builtInRole",permissionLevels:Me.permissions,onChange:ke,onRemove:Le,canSet:ge}),i.createElement(U,{title:Ae,items:it,compareKey:"userLogin",permissionLevels:Me.permissions,onChange:ke,onRemove:Le,canSet:ge}),i.createElement(U,{title:Oe,items:ce,compareKey:"userLogin",permissionLevels:Me.permissions,onChange:ke,onRemove:Le,canSet:ge}),i.createElement(U,{title:$e,items:ot,compareKey:"team",permissionLevels:Me.permissions,onChange:ke,onRemove:Le,canSet:ge}))},_=async X=>{try{return await(0,f.i)().get(`/api/access-control/${X}/description`)}catch(Y){return console.error("failed to load resource description: ",Y),w}},K=(X,Y)=>(0,f.i)().get(`/api/access-control/${X}/${Y}`),k=(X,Y,ne,se)=>Z(X,Y,"users",ne,se),z=(X,Y,ne,se)=>Z(X,Y,"teams",ne,se),W=(X,Y,ne,se)=>Z(X,Y,"builtInRoles",ne,se),Z=(X,Y,ne,se,re)=>(0,f.i)().post(`/api/access-control/${X}/${Y}/${ne}/${se}`,{permission:re}),H=X=>({breakdown:(0,n.css)({...X.typography.bodySmall,color:X.colors.text.secondary,marginBottom:X.spacing(2)}),addPermissionButton:(0,n.css)({marginBottom:X.spacing(2)})})},14632:(Q,A,e)=>{"use strict";e.d(A,{s:()=>g});var n=e(31733),a=e(29691);const i="200px",r=200,o={transition:`max-height ${r}ms ease-in-out`,overflow:"hidden"},g=({children:u,in:c,maxHeight:l=i,style:d=o})=>{const f={exited:{maxHeight:0},entering:{maxHeight:l},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return n.createElement(a.ZP,{in:c,timeout:r},m=>n.createElement("div",{style:{...d,...f[m]}},u))}},92810:(Q,A,e)=>{"use strict";e.d(A,{A:()=>i});var n=e(31733),a=e(79999);const i=n.memo(({actions:r})=>{const{chrome:o}=(0,a.p)();return(0,n.useLayoutEffect)(()=>{o.update({actions:r})}),null});i.displayName="TopNavUpdate"},97521:(Q,A,e)=>{"use strict";e.d(A,{M:()=>r});var n=e(76932),a=e(31733),i=e(76067);function r({className:g,leftActionsSeparator:u}){const c=(0,i.wW)(o);return u?a.createElement("div",{className:(0,n.cx)(g,c.leftActionsSeparator)}):a.createElement("div",{className:(0,n.cx)(g,c.line)})}const o=g=>({leftActionsSeparator:(0,n.css)({display:"flex",flexGrow:1}),line:(0,n.css)({width:1,backgroundColor:g.colors.border.medium,height:24})})},74612:(Q,A,e)=>{"use strict";e.d(A,{$:()=>n});const n=40},40556:(Q,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(76932),a=e(31733),i=e(77081),r=e(76067);const o=({className:d,logo:f})=>a.createElement("img",{className:d,src:`${f||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),g=({className:d,children:f})=>{const m=(0,r.l4)(),v=(0,n.css)({"&:before":{content:'""',position:"fixed",left:0,right:0,bottom:0,top:0,background:`url(public/img/g8_login_${m.isDark?"dark":"light"}.svg)`,backgroundPosition:"top center",backgroundSize:"auto",backgroundRepeat:"no-repeat",opacity:0,transition:"opacity 3s ease-in-out",[m.breakpoints.up("md")]:{backgroundPosition:"center",backgroundSize:"cover"}}});return a.createElement("div",{className:(0,n.cx)(v,d)},f)},u=({className:d})=>a.createElement("img",{className:d,src:"public/img/grafana_icon.svg",alt:"Grafana"}),c=()=>{const d=(0,r.l4)();return(0,n.css)({background:i.alpha(d.colors.background.primary,.7),backgroundSize:"cover"})};class l{}l.LoginLogo=o,l.LoginBackground=g,l.MenuLogo=u,l.LoginBoxBackground=c,l.AppTitle="Grafana",l.LoginTitle="Welcome to Grafana",l.HideEdition=!1,l.GetLoginSubTitle=()=>null},92582:(Q,A,e)=>{"use strict";e.d(A,{t:()=>a});var n=e(85498);function a(i,r,o){const g=[];let u=!1,c;function l(d,f=!1){if(u)return;const m=d.url?.split("?")??["",""];let v=m[0];if(n.config.featureToggles.dockedMegaMenu){const h=new URLSearchParams(m[1]);h.has("editview")&&(v+=`?editview=${h.get("editview")}`)}if(o&&v===o.url){g.unshift({text:o.text,href:d.url??""}),u=!0;return}const E=v.length>0&&c===v;c=v,!d.hideFromBreadcrumbs&&!(f&&E)&&g.unshift({text:d.text,href:d.url??""}),d.parentItem&&l(d.parentItem)}return r&&l(r),l(i,!0),g}},42775:(Q,A,e)=>{"use strict";e.d(A,{x:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(49311);const o=a.forwardRef(({icon:u,children:c,onClick:l,...d},f)=>{const m=(0,i.wW)(g);return a.createElement("button",{...d,className:m.action,onClick:l},a.createElement(r.J,{name:u,size:"xl"}),c)});o.displayName="CardButton";const g=u=>({action:(0,n.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",cursor:"pointer",background:u.colors.background.secondary,borderRadius:u.shape.radius.default,color:u.colors.text.primary,border:"unset",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center","&:hover":{background:u.colors.emphasize(u.colors.background.secondary)}})})},23420:(Q,A,e)=>{"use strict";e.d(A,{P:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(41354);const o=({onClick:u,"aria-label":c,style:l})=>{const d=(0,i.wW)(g);return a.createElement(r.h,{"aria-label":c??"Close",className:d,name:"times",onClick:u,style:l,tooltip:"Close"})},g=u=>(0,n.css)({position:"absolute",right:u.spacing(.5),top:u.spacing(1)})},5936:(Q,A,e)=>{"use strict";e.d(A,{W:()=>r});var n=e(76932),a=e(31733),i=e(76067);function r(g){const{description:u,suffix:c,feature:l}=g,d=`Learn more about ${l}`,f=(0,i.wW)(o);return a.createElement("span",{className:f.container},u,a.createElement("a",{"aria-label":d,href:`https://grafana.com/docs/grafana/next/datasources/${c}`,rel:"noreferrer",target:"_blank"},d))}const o=g=>({container:(0,n.css)({color:g.colors.text.secondary,a:(0,n.css)({color:g.colors.text.link,textDecoration:"underline",marginLeft:"5px","&:hover":{textDecoration:"none"}})})})},42943:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>a});var n=e(31733);const a=i=>n.lazy(i)},88511:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>d});var n=e(76932),a=e(31733),i=e(21568),r=e(49311),o=e(51343),g=e(53567);const u=(0,n.css)({textAlign:"center"}),c=(0,n.css)({maxWidth:"700px",margin:"0 auto"}),d=({title:f,buttonIcon:m,buttonLink:v,buttonTitle:E,buttonDisabled:p,onClick:h,proTip:s,proTipLink:y,proTipLinkTitle:D,proTipTarget:C,infoBox:P,infoBoxTitle:b})=>{const T=()=>a.createElement(a.Fragment,null,s?a.createElement("span",{key:"proTipFooter"},a.createElement(r.J,{name:"rocket"}),a.createElement(a.Fragment,null," ProTip: ",s," "),y&&a.createElement("a",{href:y,target:C,className:"text-link"},D)):"",P?a.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${c}`},b&&a.createElement("h5",null,b),a.createElement("div",{dangerouslySetInnerHTML:P})):""),O=T()?"":(0,n.css)({marginBottom:"20px"}),R=v?o.Qj:o.zx,I=a.createElement(R,{size:"lg",onClick:h,href:v,icon:m,className:O,"data-testid":i.wl.components.CallToActionCard.buttonV2(E),disabled:p},E);return a.createElement(g._,{className:u,message:f,footer:T(),callToActionElement:I})}},81382:(Q,A,e)=>{"use strict";e.d(A,{$_:()=>l,dP:()=>o});var n=e(31733),a=e(85498),i=e(49311),r=e(53166);let o=()=>[{target:"_blank",id:"documentation",text:(0,r.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,r.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,r.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function g(f){return{hasReleaseNotes:!0,isBeta:f.includes("-beta")}}function u(f){const{buildInfo:m,licenseInfo:v}=a.config,E=[],p=v.stateInfo?` (${v.stateInfo})`:"";if(f||E.push({target:"_blank",id:"license",text:`${m.edition}${p}`,url:v.licenseUrl}),m.hideVersion)return E;const{hasReleaseNotes:h}=g(m.version);return E.push({target:"_blank",id:"version",text:`v${m.version} (${m.commit})`,url:h?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),m.hasUpdate&&E.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),E}function c(f){o=f}const l=n.memo(({customLinks:f,hideEdition:m})=>{const v=(f||o()).concat(u(m));return n.createElement("footer",{className:"footer"},n.createElement("div",{className:"text-center"},n.createElement("ul",null,v.map(E=>n.createElement("li",{key:E.text},n.createElement(d,{item:E}))))))});l.displayName="Footer";function d({item:f}){const m=f.url?n.createElement("a",{href:f.url,target:f.target,rel:"noopener noreferrer",id:f.id},f.text):f.text;return n.createElement(n.Fragment,null,f.icon&&n.createElement(i.J,{name:f.icon})," ",m)}},66073:(Q,A,e)=>{"use strict";e.d(A,{G:()=>m});var n=e(31733),a=e(21568),i=e(76067),r=e(17618),o=e(25111),g=e(85765),u=e(79106),c=e(51343),l=e(58037),d=e(55735),f=e(85668);const m=({onSubmit:v,onSkip:E,showDefaultPasswordWarning:p})=>{const h=(0,i.wW)(d.W),s=y=>{v(y.newPassword)};return n.createElement(r.l,{onSubmit:s},({errors:y,register:D,getValues:C})=>n.createElement(n.Fragment,null,p&&n.createElement(o.b,{severity:"info",title:"Continuing to use the default password exposes you to security risks."}),n.createElement(g.g,{label:"New password",invalid:!!y.newPassword,error:y?.newPassword?.message},n.createElement(f.Z,{...D("newPassword",{required:"New Password is required"}),id:"new-password",autoFocus:!0,autoComplete:"new-password"})),n.createElement(g.g,{label:"Confirm new password",invalid:!!y.confirmNew,error:y?.confirmNew?.message},n.createElement(f.Z,{...D("confirmNew",{required:"Confirmed Password is required",validate:P=>P===C().newPassword||"Passwords must match!"}),id:"confirm-new-password",autoComplete:"new-password"})),n.createElement(u.wc,null,n.createElement(c.zx,{type:"submit",className:h.submitButton},"Submit"),E&&n.createElement(l.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},n.createElement(c.zx,{fill:"text",onClick:E,type:"button","data-testid":a.wl.pages.Login.skip},"Skip")))))}},72680:(Q,A,e)=>{"use strict";e.d(A,{d:()=>p});var n=e(31733),a=e(40510),i=e(98121),r=e(85610),o=e(18198),g=e(85666),u=e(93670),c=e(56821),l=e(66246),d=e(43348),f=e(64125),m=e(80431),v=e(64885);function E(h,s,y=[]){for(const D of y)if(typeof D=="function"){if(!D(h,s))return!1}else if(s[D]!==h[D])return!1;return!0}class p extends n.Component{constructor(s){super(s),this.panelContext={},this.subscription=new a.w0,this.getTimeRange=()=>this.props.timeRange;let y=this.prepState(s);y.alignedData=y.config.prepData([y.alignedFrame]),this.state=y,this.plotInstance=n.createRef()}prepState(s,y=!0){let D=null;const{frames:C,fields:P,preparePlotFrame:b}=s,O=(b||v.R)(C,P||{x:r.Ls.get(o.mi.firstTimeField).get({}),y:r.Ls.get(o.mi.byTypes).get(new Set([g.fS.number,g.fS.enum]))},s.timeRange);if((0,m.Zp)("GraphNG",!1,"data aligned",O),O){let R=this.state?.config;y&&(R=s.prepConfig(O,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config prepared",R)),D={alignedFrame:O,config:R},(0,m.Zp)("GraphNG",!1,"data prepared",D.alignedData)}return D}handleCursorUpdate(s){const y=s.payload?.point?.time,D=this.plotInstance.current;if(D&&y){const C=D.valToPos(y,"x");let P;if(C&&(P=(0,m.ah)(D,D.posToIdx(C))),!P||!C)return;D.setCursor({left:C,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:s}=this.panelContext;this.subscription.add(s.getStream(u.es).pipe((0,i.p)(50)).subscribe({next:y=>{s!==y.origin&&this.handleCursorUpdate(y)}})),this.subscription.add(s.getStream(c.IA).pipe((0,i.p)(50)).subscribe({next:y=>this.handleCursorUpdate(y)})),this.subscription.add(s.getStream(u.xH).pipe((0,i.p)(50)).subscribe({next:()=>{const y=this.plotInstance?.current;y&&!y.cursor._lock&&y.setCursor({left:-10,top:-10})}}))}componentDidUpdate(s){const{frames:y,structureRev:D,timeZone:C,propsToDiff:P}=this.props,b=!E(s,this.props,P);if(y!==s.frames||b||C!==s.timeZone){let T=this.prepState(this.props,!1);T&&((this.state.config===void 0||C!==s.timeZone||D!==s.structureRev||!D||b)&&(T.config=this.props.prepConfig(T.alignedFrame,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config recreated",T.config)),T.alignedData=T.config.prepData([T.alignedFrame]),this.setState(T))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:s,height:y,children:D,renderLegend:C}=this.props,{config:P,alignedFrame:b,alignedData:T}=this.state;return P?n.createElement(l.AY,{width:s,height:y,legend:C(P)},(O,R)=>n.createElement(f.N,{config:P,data:T,width:O,height:R,plotRef:I=>this.plotInstance.current=I},D?D(P,b):null)):null}}p.contextType=d.bb},64885:(Q,A,e)=>{"use strict";e.d(A,{R:()=>l});var n=e(85666),a=e(96609),i=e(63621);function r(d,f,m){let v,E;for(let p=0;p<f.length;p++)if(f[p]==null)E==null&&v!=null&&(E=p);else{if(E!=null&&v!=null){if(d[p]-v<m)for(;E<p;)f[E++]=void 0;E=null}v=d[p]}return f}var o=e(71199);function g(d){return d.type===n.fS.number&&d.config.custom?.drawStyle===o.l8.Bars&&!d.config.custom?.hideFrom?.viz}function u(d,f){return d.fields.find(m=>f!=null?m.name===f:m.type===n.fS.time)}function c(d,f){const m=u(d,f);let v=m?.values;for(let E=0;E<d.fields.length;E++){let p=d.fields[E];if(p===m||g(p))continue;let h=p.config.custom?.spanNulls;typeof h=="number"&&h!==-1&&v&&(p.values=r(v,p.values,h))}return d}function l(d,f,m){let v;e:for(let s of d)for(let y of s.fields)if(f.x(y,s,d)){v=y;break e}d=d.map(s=>v?.state?.nullThresholdApplied?s:(0,i.w)({frame:s,refFieldName:v.name,refFieldPseudoMin:m?.from.valueOf(),refFieldPseudoMax:m?.to.valueOf()}));let E=0;d.forEach(s=>{s.fields.forEach(y=>{g(y)&&(y.config.custom={...y.config.custom,spanNulls:-1},E++)})});let p=1/0;E>1&&d.forEach(s=>{if(!s.fields.some(g))return;const y=v.values;for(let D=0;D<y.length;D++)D>0&&(p=Math.min(p,y[D]-y[D-1]))});let h=(0,a._9)({frames:d,joinBy:f.x,keep:f.y,keepOriginIndices:!0});return h?(h=c(h,v.name),p!==1/0&&(h.fields.forEach((s,y)=>{let D=s.values;if(y===0){let C=D[D.length-1];D.push(C+p,C+2*p)}else g(s)?D.push(null,null):D.push(void 0,void 0)}),h.length+=2),h):null}},15130:(Q,A,e)=>{"use strict";e.d(A,{A:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(46591);function o({children:u,spacing:c,level:l}){const d=(0,i.wW)(g,c,l);return a.createElement("span",{className:(0,n.css)(d.indentor)},u)}const g=(u,c,l)=>({indentor:(0,n.css)((0,r.U)(u,c,d=>({paddingLeft:u.spacing(d*l)})))})},4200:(Q,A,e)=>{"use strict";e.d(A,{w:()=>u});var n=e(31733),a=e(24789),i=e(41164),r=e(64516);const o=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,g=(c,l)=>!(c.match(l)||!c),u=c=>{const l=c.validationRegex||o,[d,f]=(0,n.useState)(()=>c.value?g(c.value,l):!1);(0,a.Z)(()=>{f(g(c.value,l))},500,[c.value]);const m={labelWidth:26,disabled:c.disabled??!1,invalid:d,error:c.isInvalidError};return c.label&&(m.label=c.label,m.tooltip=c.tooltip||""),n.createElement(i._,{...m},n.createElement(r.I,{type:"text",placeholder:c.placeholder||"0",width:c.width||40,onChange:v=>{c.onChange(v.currentTarget.value)},value:c.value,"aria-label":c.ariaLabel||"interval input"}))}},958:(Q,A,e)=>{"use strict";e.d(A,{X:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(49311),o=e(64516),g=e(65008);const u=({name:l,onChange:d,verifyLayerNameUniqueness:f,overrideStyles:m})=>{const v=(0,i.wW)(c),[E,p]=(0,a.useState)(!1),[h,s]=(0,a.useState)(null),y=O=>{p(!0)},D=O=>{if(p(!1),h){s(null);return}l!==O&&d(O)},C=O=>{const R=O.currentTarget.value.trim();if(R.length===0){s("An empty layer name is not allowed");return}if(f&&!f(R)&&R!==l){s("Layer name already exists");return}h&&s(null)},P=O=>{D(O.currentTarget.value.trim())},b=O=>{O.key==="Enter"&&D(O.currentTarget.value)},T=O=>{O.target.select()};return a.createElement(a.Fragment,null,a.createElement("div",{className:v.wrapper},!E&&a.createElement("button",{className:v.layerNameWrapper,title:"Edit layer name",onClick:y,"data-testid":"layer-name-div"},a.createElement("span",{className:m?"":v.layerName},l),a.createElement(r.J,{name:"pen",className:v.layerEditIcon,size:"sm"})),E&&a.createElement(a.Fragment,null,a.createElement(o.I,{type:"text",defaultValue:l,onBlur:P,autoFocus:!0,onKeyDown:b,onFocus:T,invalid:h!==null,onChange:C,className:v.layerNameInput,"data-testid":"layer-name-input"}),h&&a.createElement(g.S,{horizontal:!0},h))))},c=l=>({wrapper:(0,n.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:l.spacing(.5)}),layerNameWrapper:(0,n.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:l.shape.radius.default,alignItems:"center",padding:`0 0 0 ${l.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:l.colors.action.hover,border:`1px dashed ${l.colors.border.strong}`},"&:focus":{border:`2px solid ${l.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,n.css)({fontWeight:l.typography.fontWeightMedium,color:l.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:l.spacing(.5)}),layerEditIcon:(0,n.cx)((0,n.css)({marginLeft:l.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,n.css)({maxWidth:"300px",margin:"-4px 0"})})},85853:(Q,A,e)=>{"use strict";e.d(A,{G:()=>i});var n=e(31733),a=e(39357);const i=r=>{const{children:o,storageKey:g,defaultValue:u}=r,[c,l]=(0,n.useState)({value:a.Z.getObject(r.storageKey,r.defaultValue)});(0,n.useEffect)(()=>{const m=v=>{v.key===g&&l({value:a.Z.getObject(r.storageKey,r.defaultValue)})};return window.addEventListener("storage",m),()=>{window.removeEventListener("storage",m)}});const d=m=>{try{a.Z.setObject(g,m)}catch(v){console.error(v)}l({value:m})},f=()=>{try{a.Z.delete(g)}catch(m){console.log(m)}l({value:u})};return n.createElement(n.Fragment,null,o(c.value,d,f))}},4832:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>u});var n=e(31733),a=e(69391),i=e(83811),r=e(53166);const o=()=>!!i.default.oauth&&Object.keys(i.default.oauth).length>0;class g extends n.PureComponent{constructor(d){super(d),this.changePassword=f=>{const m={newPassword:f,confirmNew:f,oldPassword:"admin"};if(this.props.resetCode){const v={code:this.props.resetCode,newPassword:f,confirmPassword:f};(0,a.i)().post("/api/user/password/reset",v).then(()=>{this.toGrafana()})}else(0,a.i)().put("/api/user/password",m).then(()=>{this.toGrafana()}).catch(v=>console.error(v))},this.login=f=>{this.setState({loginErrorMessage:void 0,isLoggingIn:!0}),(0,a.i)().post("/login",f,{showErrorAlert:!1}).then(m=>{if(this.result=m,f.password!=="admin"||i.default.ldapEnabled||i.default.authProxyEnabled){this.toGrafana();return}else this.changeView(f.password==="admin")}).catch(m=>{const v=(0,a.kW)(m)?c(m):void 0;this.setState({isLoggingIn:!1,loginErrorMessage:v||(0,r.t)("login.error.unknown","Unknown error occurred")})})},this.changeView=f=>{this.setState({isChangingPassword:!0,showDefaultPasswordWarning:f})},this.toGrafana=()=>{this.result?.redirectUrl?i.default.appSubUrl!==""&&!this.result.redirectUrl.startsWith(i.default.appSubUrl)?window.location.assign(i.default.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(i.default.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1,showDefaultPasswordWarning:!1,loginErrorMessage:i.default.loginError}}render(){const{children:d}=this.props,{isLoggingIn:f,isChangingPassword:m,showDefaultPasswordWarning:v,loginErrorMessage:E}=this.state,{login:p,toGrafana:h,changePassword:s}=this,{loginHint:y,passwordHint:D,disableLoginForm:C,disableUserSignUp:P}=i.default;return n.createElement(n.Fragment,null,d({isOauthEnabled:o(),loginHint:y,passwordHint:D,disableLoginForm:C,disableUserSignUp:P,login:p,isLoggingIn:f,changePassword:s,skipPasswordChange:h,isChangingPassword:m,showDefaultPasswordWarning:v,loginErrorMessage:E}))}}const u=g;function c(l){switch(l.data?.messageId){case"password-auth.empty":case"password-auth.failed":case"password-auth.invalid":return(0,r.t)("login.error.invalid-user-or-password","Invalid username or password");case"login-attempt.blocked":return(0,r.t)("login.error.blocked","You have exceeded the number of login attempts for this user. Please try again later.");default:return l.data?.message}}},55735:(Q,A,e)=>{"use strict";e.d(A,{U:()=>d,W:()=>f});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(17618),g=e(85765),u=e(64516),c=e(51343),l=e(85668);const d=({children:m,onSubmit:v,isLoggingIn:E,passwordHint:p,loginHint:h})=>{const s=(0,r.wW)(f),y=(0,a.useId)(),D=(0,a.useId)();return a.createElement("div",{className:s.wrapper},a.createElement(o.l,{onSubmit:v,validateOn:"onChange"},({register:C,errors:P})=>a.createElement(a.Fragment,null,a.createElement(g.g,{label:"Email or username",invalid:!!P.user,error:P.user?.message},a.createElement(u.I,{...C("user",{required:"Email or username is required"}),id:y,autoFocus:!0,autoCapitalize:"none",placeholder:h,"data-testid":i.wl.pages.Login.username})),a.createElement(g.g,{label:"Password",invalid:!!P.password,error:P.password?.message},a.createElement(l.Z,{...C("password",{required:"Password is required"}),id:D,autoComplete:"current-password",placeholder:p})),a.createElement(c.zx,{type:"submit","data-testid":i.wl.pages.Login.submit,className:s.submitButton,disabled:E},E?"Logging in...":"Log in"),m)))},f=m=>({wrapper:(0,n.css)({width:"100%",paddingBottom:m.spacing(2)}),submitButton:(0,n.css)({justifyContent:"center",width:"100%"})})},70925:(Q,A,e)=>{"use strict";e.d(A,{$s:()=>g,dd:()=>u,pJ:()=>l});var n=e(76932),a=e(31733),i=e(76067),r=e(40556),o=e(81382);const g=({children:d,enterAnimation:f=!0})=>{const m=(0,i.wW)(l);return a.createElement("div",{className:(0,n.cx)(m.loginInnerBox,f&&m.enterAnimation)},d)},u=({children:d,branding:f,isChangingPassword:m})=>{const v=(0,i.wW)(l),[E,p]=(0,a.useState)(!1),h=f?.loginSubtitle??r.c.GetLoginSubTitle(),s=f?.loginTitle??r.c.LoginTitle,y=f?.loginBoxBackground||r.c.LoginBoxBackground(),D=f?.loginLogo,C=f?.hideEdition??r.c.HideEdition;return(0,a.useEffect)(()=>p(!0),[]),a.createElement(r.c.LoginBackground,{className:(0,n.cx)(v.container,E&&v.loginAnim,f?.loginBackground)},a.createElement("div",{className:v.loginMain},a.createElement("div",{className:(0,n.cx)(v.loginContent,y,"login-content-box")},a.createElement("div",{className:v.loginLogoWrapper},a.createElement(r.c.LoginLogo,{className:v.loginLogo,logo:D}),a.createElement("div",{className:v.titleWrapper},m?a.createElement("h1",{className:v.mainTitle},"Update your password"):a.createElement(a.Fragment,null,a.createElement("h1",{className:v.mainTitle},s),h&&a.createElement("h3",{className:v.subTitle},h)))),a.createElement("div",{className:v.loginOuterBox},d))),f?.hideFooter?a.createElement(a.Fragment,null):a.createElement(o.$_,{hideEdition:C,customLinks:f?.footerLinks}))},c=(0,n.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,l=d=>({loginMain:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,n.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,n.css)({["&:before"]:{opacity:1},[".login-content-box"]:{opacity:1}}),submitButton:(0,n.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,n.css)({width:"100%",maxWidth:60,marginBottom:d.spacing(2),[d.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:d.spacing(3)}),titleWrapper:(0,n.css)({textAlign:"center"}),mainTitle:(0,n.css)({fontSize:22,[d.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,n.css)({fontSize:d.typography.size.md,color:d.colors.text.secondary}),loginContent:(0,n.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:d.shape.radius.default,padding:d.spacing(2,0),opacity:0,transition:"opacity 0.5s ease-in-out",[d.breakpoints.up("sm")]:{minHeight:d.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,n.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,n.css)({padding:d.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",transition:"0.25s ease"}),enterAnimation:(0,n.css)({animation:`${c} ease-out 0.2s`})})},13742:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>g});var n=e(69781),a=e.n(n),i=e(31733),r=e(64516),o=e(85765);class g extends i.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=i.createRef(),this.updateValue=()=>{const c=this.inputRef.current?.value;let l=!1,d="";const f=this.props.min,m=this.props.max;let v=c!==""?Number(c):void 0;v&&!Number.isNaN(v)&&(f!=null&&v<f?(d=f.toString(),l=!0):m!=null&&v>m?(d=m.toString(),l=!0):d=c??"",this.setState({text:d,inputCorrected:l})),l&&this.updateValueDebounced(),!Number.isNaN(v)&&v!==this.props.value&&this.props.onChange(v)},this.updateValueDebounced=(0,n.debounce)(this.updateValue,500),this.onChange=c=>{this.setState({text:c.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=c=>{c.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(c){if(this.props.value!==c.value){const l=isNaN(this.props.value)?"":`${this.props.value}`;l!==this.state.text&&this.setState({text:l})}}renderInput(){return i.createElement(r.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:c}=this.state;if(c){let l="",{min:d,max:f}=this.props;return f==null?d!=null&&(l=`< ${d}`):d!=null?l=`${d} < > ${f}`:l=`> ${f}`,i.createElement(o.g,{invalid:c,error:`Out of range ${l}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},24397:(Q,A,e)=>{"use strict";e.d(A,{B:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(39236),o=e(41354),g=e(90065);const u=({value:l,settings:d,onChange:f,details:m})=>{const v=(0,i.l4)(),E=(0,i.wW)(c);return a.createElement(r.zH,{color:l??"",onChange:f,enableNamedColors:d?.enableNamedColors!==!1},({ref:p,showColorPicker:h,hideColorPicker:s})=>a.createElement("div",{className:E.spot},a.createElement("div",{className:E.colorPicker},a.createElement(g.b,{ref:p,onClick:h,onMouseLeave:s,color:l?v.visualization.getColorByName(l):v.components.input.borderColor})),m&&a.createElement(a.Fragment,null,l?a.createElement("span",{className:E.colorText,onClick:h},l):a.createElement("span",{className:E.placeholderText,onClick:h},d?.placeholder??"Select color"),d?.isClearable&&l&&a.createElement(o.h,{name:"times",onClick:()=>f(void 0),tooltip:"Clear settings"}))))},c=l=>({spot:(0,n.css)({cursor:"pointer",color:l.colors.text.primary,background:l.components.input.background,padding:"3px",height:l.v1.spacing.formInputHeight,border:`1px solid ${l.components.input.borderColor}`,display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end","&:hover":{border:`1px solid ${l.components.input.borderHover}`}}),colorPicker:(0,n.css)({padding:`0 ${l.spacing(1)}`}),colorText:(0,n.css)({flexGrow:2}),placeholderText:(0,n.css)({flexGrow:2,color:l.colors.text.secondary})})},8203:(Q,A,e)=>{"use strict";e.d(A,{w:()=>i});var n=e(31733),a=e(13742);const i=({value:r,onChange:o,item:g})=>{const{settings:u}=g,c=(0,n.useCallback)(l=>{o(u?.integer&&l!==void 0?Math.floor(l):l)},[o,u?.integer]);return n.createElement(a.Y,{value:r,min:u?.min,max:u?.max,step:u?.step,placeholder:u?.placeholder,onChange:c})}},12555:(Q,A,e)=>{"use strict";e.d(A,{u:()=>Ve,l:()=>tt});var n=e(31733),a=e(61411),i=e(15476),r=e(85666),o=e(47423),g=e(76772),u=e(96856),c=e(60100),l=e(94993),d=e(76932),f=e(69781),m=e(27369),v=e(3854),E=e(63956),p=e(64516),h=e(39236),s=e(41354),y=e(51343),D=e(36667),C=e(33227);const P=[{value:o.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:o.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class b extends n.PureComponent{constructor(J){super(J),this.onAddThreshold=()=>{const{steps:de}=this.state;let be=0;de.length>1&&(be=de[de.length-1].value+10);let De=E.O9.filter(et=>!de.some(ze=>ze.color===et))[1];De||(De="#CCCCCC");const Ue={value:be,color:De,key:T++},We=[...de,Ue];(0,m.bP)(We),this.setState({steps:We},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=de=>{const{steps:be}=this.state;be.length&&de.key!==be[0].key&&this.setState({steps:be.filter(De=>De.key!==de.key)},this.onChange)},this.onChangeThresholdValue=(de,be)=>{const De=de.target.value.replace(/,/g,"."),Ue=parseFloat(De),We=isNaN(Ue)?"":Ue,et=this.state.steps.map(ze=>(ze.key===be.key&&(ze={...ze,value:We}),ze));et.length&&(et[0].value=-1/0),(0,m.bP)(et),this.setState({steps:et})},this.onChangeThresholdColor=(de,be)=>{const{steps:De}=this.state,Ue=De.map(We=>(We.key===de.key&&(We={...We,color:be}),We));this.setState({steps:Ue},this.onChange)},this.onBlur=()=>{const de=[...this.state.steps];(0,m.bP)(de),this.setState({steps:de},this.onChange)},this.onChange=()=>{this.props.onChange(R(this.props.thresholds,this.state.steps))},this.onModeChanged=de=>{this.props.onChange({...this.props.thresholds,mode:de})};const te=O(J.thresholds.steps);te[0].value=-1/0,this.state={steps:te},this.latestThresholdInputRef=n.createRef()}renderInput(J,te,de){const be=this.props.thresholds.mode===o.H.Percentage,De=`Threshold ${de+1}`;return isFinite(J.value)?n.createElement(p.I,{type:"number",step:"0.0001",key:be.toString(),onChange:Ue=>this.onChangeThresholdValue(Ue,J),value:J.value,"aria-label":De,ref:de===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:n.createElement("div",{className:te.inputPrefix},n.createElement("div",{className:te.colorPicker},n.createElement(h.zH,{color:J.color,onChange:Ue=>this.onChangeThresholdColor(J,Ue),enableNamedColors:!0})),be&&n.createElement("div",{className:te.percentIcon},"%")),suffix:n.createElement(s.h,{className:te.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(J),tooltip:`Remove ${De}`})}):n.createElement(p.I,{type:"text",value:"Base","aria-label":De,disabled:!0,prefix:n.createElement("div",{className:te.colorPicker},n.createElement(h.zH,{color:J.color,onChange:Ue=>this.onChangeThresholdColor(J,Ue),enableNamedColors:!0}))})}render(){const{thresholds:J}=this.props,{steps:te}=this.state;return n.createElement(v.N.Consumer,null,de=>{const be=I(de);return n.createElement("div",{className:be.wrapper},n.createElement(y.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:be.addButton,fullWidth:!0},"Add threshold"),n.createElement("div",{className:be.thresholds},te.slice(0).reverse().map((De,Ue)=>n.createElement("div",{className:be.item,key:`${De.key}`},this.renderInput(De,be,Ue)))),n.createElement("div",null,n.createElement(D._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),n.createElement(u.S,{options:P,onChange:this.onModeChanged,value:J.mode})))})}}let T=100;function O(ae){return(!ae||ae.length===0)&&(ae=[{value:-1/0,color:"green"}]),ae.filter((J,te)=>(0,f.isNumber)(J.value)||te===0).map(J=>({color:J.color,value:J.value===null?-1/0:J.value,key:T++}))}function R(ae,J){return{mode:ae.mode??o.H.Absolute,steps:J.map(de=>{const{key:be,...De}=de;return De})}}const I=(0,C.B)(ae=>({wrapper:(0,d.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,d.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${ae.spacing(2)};
    `,item:(0,d.css)`
      margin-bottom: ${ae.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,d.css)`
      padding: 0 ${ae.spacing(1)};
    `,addButton:(0,d.css)`
      margin-bottom: ${ae.spacing(1)};
    `,percentIcon:(0,d.css)`
      font-size: ${ae.typography.bodySmall.fontSize};
      color: ${ae.colors.text.secondary};
    `,inputPrefix:(0,d.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,d.css)`
      color: ${ae.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${ae.colors.text};
      }
    `}));class M extends n.PureComponent{constructor(J){super(J)}render(){const{onChange:J}=this.props;let te=this.props.value;return te||(te={mode:o.H.Percentage,steps:[]}),n.createElement(b,{thresholds:te,onChange:J})}}var x=e(6803),L=e(76067),S=e(79106),U=e(49311),N=e(5572),w=e(85887),G=e(97704),_=e(4113),K=e(84333),k=e(38834);function z({mapping:ae,index:J,onChange:te,onRemove:de,onDuplicate:be,showIconPicker:De}){const{key:Ue,result:We,id:et}=ae,ze=(0,L.wW)(W),_e=(0,n.useRef)(null),qe=(0,n.useCallback)(nt=>{const Ct={...ae,result:{...ae.result}};nt(Ct),te(J,Ct)},[ae,J,te]);(0,n.useEffect)(()=>{_e.current&&ae.isNew&&(_e.current.focus(),qe(nt=>{nt.isNew=!1}))},[ae,_e,qe]);const at=nt=>{qe(Ct=>{Ct.result.color=nt})},lt=()=>{qe(nt=>{nt.result.color=void 0})},ft=nt=>{qe(Ct=>{Ct.result.icon=nt})},yt=()=>{qe(nt=>{nt.result.icon=void 0})},wt=nt=>{qe(Ct=>{Ct.key=nt.currentTarget.value})},zt=nt=>{qe(Ct=>{Ct.result.text=nt.currentTarget.value})},$t=nt=>{qe(Ct=>{Ct.from=parseFloat(nt.currentTarget.value)})},Ie=nt=>{qe(Ct=>{Ct.to=parseFloat(nt.currentTarget.value)})},st=nt=>{qe(Ct=>{Ct.pattern=nt.currentTarget.value})},Mt=nt=>{qe(Ct=>{Ct.specialMatch=nt.value})},ct=[{label:"Null",value:x.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:x.e.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:x.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:x.e.True,description:"Boolean true values"},{label:"False",value:x.e.False,description:"Boolean false values"},{label:"Empty",value:x.e.Empty,description:"Empty string"}];return n.createElement(_._l,{key:et,draggableId:et,index:J},nt=>n.createElement("tr",{className:ze.dragRow,ref:nt.innerRef,...nt.draggableProps},n.createElement("td",null,n.createElement("div",{className:ze.dragHandle,...nt.dragHandleProps},n.createElement(U.J,{name:"draggabledots",size:"lg"}))),n.createElement("td",{className:ze.typeColumn},ae.type),n.createElement("td",null,ae.type===x.H.ValueToText&&n.createElement(p.I,{ref:_e,type:"text",value:Ue??"",onChange:wt,placeholder:"Exact value to match"}),ae.type===x.H.RangeToText&&n.createElement("div",{className:ze.rangeInputWrapper},n.createElement(p.I,{type:"number",value:ae.from??"",placeholder:"Range start",onChange:$t,prefix:"From"}),n.createElement(p.I,{type:"number",value:ae.to??"",placeholder:"Range end",onChange:Ie,prefix:"To"})),ae.type===x.H.RegexToText&&n.createElement(p.I,{type:"text",value:ae.pattern??"",placeholder:"Regular expression",onChange:st}),ae.type===x.H.SpecialValue&&n.createElement(k.Ph,{value:ct.find(Ct=>Ct.value===ae.specialMatch),options:ct,onChange:Mt})),n.createElement("td",null,n.createElement(p.I,{type:"text",value:We.text??"",onChange:zt,placeholder:"Optional display text"})),n.createElement("td",{className:ze.textAlignCenter},We.color&&n.createElement(S.Lh,{spacing:"sm",justify:"center"},n.createElement(h.zH,{color:We.color,onChange:at,enableNamedColors:!0}),n.createElement(s.h,{name:"times",onClick:lt,tooltip:"Remove color",tooltipPlacement:"top"})),!We.color&&n.createElement(h.zH,{color:"gray",onChange:at,enableNamedColors:!0},Ct=>n.createElement(y.zx,{variant:"primary",fill:"text",onClick:Ct.showColorPicker,ref:Ct.ref,size:"sm"},"Set color"))),De&&n.createElement("td",{className:ze.textAlignCenter},n.createElement(S.Lh,{spacing:"sm",justify:"center"},n.createElement(G.E,{onChange:ft,onClear:yt,value:We.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:We.color}),We.icon&&n.createElement(s.h,{name:"times",onClick:yt,tooltip:"Remove icon",tooltipPlacement:"top"}))),n.createElement("td",{className:ze.textAlignCenter},n.createElement(S.Lh,{spacing:"sm"},n.createElement(s.h,{name:"copy",onClick:()=>be(J),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),n.createElement(s.h,{name:"trash-alt",onClick:()=>de(J),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const W=ae=>({dragRow:(0,d.css)({position:"relative"}),dragHandle:(0,d.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${ae.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,d.css)({display:"flex","> div:first-child":{marginRight:ae.spacing(2)}}),regexInputWrapper:(0,d.css)({display:"flex","> div:first-child":{marginRight:ae.spacing(2)}}),typeColumn:(0,d.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,d.css)({textAlign:"center"})});function Z({value:ae,onChange:J,onClose:te,showIconPicker:de}){const be=(0,L.wW)(H),[De,Ue]=(0,n.useState)([]);(0,n.useEffect)(()=>{Ue(re(ae))},[ae]);const We=ft=>{if(!ae||!ft.destination)return;const yt=[...De],wt=yt[ft.source.index];yt.splice(ft.source.index,1),yt.splice(ft.destination.index,0,wt),Ue(yt)},et=(ft,yt)=>{const wt=[...De];wt.splice(ft,1,yt),Ue(wt)},ze=ft=>{const yt=[...De];yt.splice(ft,1),Ue(yt)},_e=[{label:"Value",value:x.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:x.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:x.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:x.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],qe=ft=>{Ue([...De,Y({type:ft.value,result:{},isNew:!0})])},at=ft=>{const yt=ne(De[ft]),wt=[...De];wt.splice(ft,0,{...yt});for(let zt=ft;zt<De.length;zt++)wt[zt].result.index=zt;Ue(wt)},lt=()=>{J(se(De)),te()};return(0,n.useEffect)(()=>{ae?.length||qe({value:x.H.ValueToText})},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:be.tableWrap},n.createElement("table",{className:be.editTable},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),n.createElement("th",{style:{textAlign:"left"}},"Display text"),n.createElement("th",{style:{width:"10%"}},"Color"),de&&n.createElement("th",{style:{width:"10%"}},"Icon"),n.createElement("th",{style:{width:"1%"}}))),n.createElement(_.Z5,{onDragEnd:We},n.createElement(_.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},ft=>n.createElement("tbody",{ref:ft.innerRef,...ft.droppableProps},De.map((yt,wt)=>n.createElement(z,{key:yt.id,mapping:yt,index:wt,onChange:et,onRemove:ze,onDuplicate:at,showIconPicker:de})),ft.placeholder))))),n.createElement(N.u.ButtonRow,{leftItems:n.createElement(K.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:_e,onChange:qe})},n.createElement(y.zx,{variant:"secondary",fill:"outline",onClick:te},"Cancel"),n.createElement(y.zx,{variant:"primary",onClick:lt},"Update")))}const H=ae=>({tableWrap:(0,d.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,d.css)({width:"100%",marginBottom:ae.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:ae.colors.action.hover}," th, td":{padding:ae.spacing(1)}})});function X(){return(0,f.uniqueId)("mapping-")}function Y(ae){return{type:x.H.ValueToText,result:{},id:X(),...ae}}function ne(ae){return{...Y(ae),id:X()}}function se(ae){const J=[],te={type:x.H.ValueToText,options:{}};return ae.forEach((de,be)=>{const De={...de.result,index:be};switch((!De.text||De.text.trim().length===0)&&(De.text=void 0),de.type){case x.H.ValueToText:de.key!=null&&(te.options[de.key]=De);break;case x.H.RangeToText:de.from!=null&&de.to!=null&&J.push({type:de.type,options:{from:de.from,to:de.to,result:De}});break;case x.H.RegexToText:de.pattern!=null&&J.push({type:de.type,options:{pattern:de.pattern,result:De}});break;case x.H.SpecialValue:J.push({type:de.type,options:{match:de.specialMatch,result:De}})}}),Object.keys(te.options).length>0&&J.unshift(te),J}function re(ae){const J=[];if(ae)for(const te of ae)switch(te.type){case x.H.ValueToText:for(const de of Object.keys(te.options))J.push(Y({type:te.type,result:te.options[de],key:de}));break;case x.H.RangeToText:J.push(Y({type:te.type,result:te.options.result,from:te.options.from??0,to:te.options.to??0}));break;case x.H.RegexToText:J.push(Y({type:te.type,result:te.options.result,pattern:te.options.pattern}));break;case x.H.SpecialValue:J.push(Y({type:te.type,result:te.options.result,specialMatch:te.options.match??x.e.Null}))}return J.sort((te,de)=>(te.result.index??0)>(de.result.index??0)?1:-1),J}const ge=n.memo(ae=>{const{value:J,onChange:te,item:de}=ae,be=(0,L.wW)(q),De=de.settings?.icon,[Ue,We]=(0,n.useState)(!1),et=(0,n.useCallback)(()=>{We(!1)},[We]),ze=(0,n.useMemo)(()=>re(J),[J]),_e=(0,n.useCallback)((at,lt)=>{ze[lt].result.color=at,te(se(ze))},[ze,te]),qe=(0,n.useCallback)((at,lt)=>{ze[lt].result.icon=at,te(se(ze))},[ze,te]);return n.createElement(S.wc,null,n.createElement("table",{className:be.compactTable},n.createElement("tbody",null,ze.map((at,lt)=>n.createElement("tr",{key:lt.toString()},n.createElement("td",null,at.type===x.H.ValueToText&&at.key,at.type===x.H.RangeToText&&n.createElement("span",null,"[",at.from," - ",at.to,"]"),at.type===x.H.RegexToText&&at.pattern,at.type===x.H.SpecialValue&&at.specialMatch),n.createElement("td",null,n.createElement(U.J,{name:"arrow-right"})),n.createElement("td",null,at.result.text),at.result.color&&n.createElement("td",null,n.createElement(h.zH,{color:at.result.color,onChange:ft=>_e(ft,lt),enableNamedColors:!0})),De&&at.result.icon&&n.createElement("td",{"data-testid":"iconPicker"},n.createElement(G.E,{onChange:ft=>qe(ft,lt),value:at.result.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:at.result.color})))))),n.createElement(y.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>We(!0)},ze.length>0&&n.createElement("span",null,"Edit value mappings"),ze.length===0&&n.createElement("span",null,"Add value mappings")),n.createElement(N.u,{isOpen:Ue,title:"Value mappings",onDismiss:et,className:be.modal,closeOnBackdropClick:!1},n.createElement(Z,{value:J,onChange:te,onClose:et,showIconPicker:De})))});ge.displayName="ValueMappingsEditor";const q=ae=>({modal:(0,d.css)({width:"980px"}),compactTable:(0,d.css)({width:"100%","tbody td":{padding:ae.spacing(.5)}})});var me=e(66368);const oe=({value:ae,onChange:J,item:te})=>{const{placeholder:de,isClearable:be}=te?.settings??{},De=(0,n.useCallback)(Ue=>{J(Ue?.value?.uid)},[J]);return n.createElement(me.o,{isClearable:be,defaultOptions:!0,onChange:De,placeholder:de,value:ae})};var fe=e(24397),ve=e(99326),pe=e(91507),Me=e(85765);const Pe=({value:ae,onChange:J,item:te,id:de})=>{const be=(0,L.l4)(),De=(0,L.wW)(he),Ue=(0,ve.QY)(ae?.mode),et=(te.settings?.byValueSupport?ve.WO.list():ve.WO.list().filter(lt=>!lt.isByValue)).map(lt=>{let ft=lt.isByValue?" (by value)":"";return{value:lt.id,label:`${lt.name}${ft}`,description:lt.description,isContinuous:lt.isContinuous,isByValue:lt.isByValue,component(){return n.createElement(Ee,{mode:lt,theme:be})}}}),ze=lt=>{J({...ae,mode:lt.value})},_e=lt=>{J({...ae,mode:at,fixedColor:lt})},qe=lt=>{J({...ae,mode:at,seriesBy:lt})},at=ae?.mode??pe.S.Thresholds;if(at===pe.S.Fixed||at===pe.S.Shades)return n.createElement("div",{className:De.group},n.createElement(k.Ph,{minMenuHeight:200,options:et,value:at,onChange:ze,className:De.select,inputId:de}),n.createElement(fe.B,{value:ae?.fixedColor,onChange:_e}));if(te.settings?.bySeriesSupport&&Ue.isByValue){const lt=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:be.spacing(2)}},n.createElement(k.Ph,{minMenuHeight:200,options:et,value:at,onChange:ze,inputId:de})),n.createElement(Me.g,{label:"Color series by"},n.createElement(u.S,{value:ae?.seriesBy??"last",options:lt,onChange:qe})))}return n.createElement(k.Ph,{minMenuHeight:200,options:et,value:at,onChange:ze,inputId:de})},Ee=({mode:ae,theme:J})=>{if(!ae.getColors)return null;const te=ae.getColors(J).map(J.visualization.getColorByName),de={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(ae.isContinuous)de.background=`linear-gradient(90deg, ${te.join(",")})`;else{let be="",De="";for(let Ue=0;Ue<te.length;Ue++){const We=te[Ue];if(be==="")be=`linear-gradient(90deg, ${We} 0%`;else{const ze=Ue/(te.length-1)*100;be+=`, ${De} ${ze}%, ${We} ${ze}%`}De=We}de.background=be}return n.createElement("div",{style:de})},he=ae=>({group:(0,d.css)({display:"flex"}),select:(0,d.css)({marginRight:ae.spacing(1),flexGrow:1})});var Le=e(63908),ke=e(7122);const ot=({value:ae,onChange:J,context:te})=>n.createElement(ke.d,{links:ae,onChange:J,data:te.data,getSuggestions:()=>te.getSuggestions?te.getSuggestions(Le.o3.Values):[]});class it extends n.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:J}=this.props,{settings:te}=J;let de=J.settings?.options||[];te?.getOptions&&(de=await te.getOptions(this.props.context)),this.state.options!==de&&this.setState({isLoading:!1,options:de})}}componentDidMount(){this.updateOptions()}componentDidUpdate(J){const te=J.item?.settings,de=this.props.item?.settings;if(te!==de)this.updateOptions();else if(de?.getOptions){const be=J.context?.data,De=this.props.context?.data;be!==De&&this.updateOptions()}}render(){const{options:J,isLoading:te}=this.state,{value:de,onChange:be,item:De}=this.props,{settings:Ue}=De;return n.createElement(k.NU,{isLoading:te,value:de,defaultValue:de,allowCustomValue:Ue?.allowCustomValue,onChange:We=>{be(We.map(et=>et.value).flatMap(et=>et!==void 0?[et]:[]))},options:J})}}var ce=e(8203);class le extends n.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:J}=this.props,{settings:te}=J;let de=J.settings?.options||[];te?.getOptions&&(de=await te.getOptions(this.props.context)),this.state.options!==de&&this.setState({isLoading:!1,options:de})}}componentDidMount(){this.updateOptions()}componentDidUpdate(J){const te=J.item?.settings,de=this.props.item?.settings;if(te!==de)this.updateOptions();else if(de?.getOptions){const be=J.context?.data,De=this.props.context?.data;be!==De&&this.updateOptions()}}render(){const{options:J,isLoading:te}=this.state,{value:de,onChange:be,item:De}=this.props,{settings:Ue}=De;let We=J.find(et=>et.value===de);return!We&&de&&(We={label:`${de}`,value:de}),n.createElement(k.Ph,{isLoading:te,value:We,defaultValue:de,allowCustomValue:Ue?.allowCustomValue,isClearable:Ue?.isClearable,onChange:et=>be(et?.value),options:J})}}var Re=e(41694),Ae=e(79043);const Oe=({value:ae,onChange:J,item:te,id:de})=>n.createElement(Ae.m,{stats:ae,onChange:J,allowMultiple:!!te.settings?.allowMultiple,defaultStat:te.settings?.defaultStat,inputId:de});var $e=e(57272),Ye=e(85498);class Ne extends n.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=J=>{const{value:te,onChange:de}=this.props,be=[...te];be.splice(J,1),de(be)},this.onValueChange=(J,te)=>{if("key"in J&&J.key!=="Enter")return;const{value:de,onChange:be}=this.props,De=J.currentTarget.value.trim();if(te<0){De&&(J.currentTarget.value="",be([...de,De])),this.setState({showAdd:!1});return}if(!De)return this.onRemoveString(te);const Ue=[...de];Ue[te]=De,be(Ue)}}render(){const{value:J,item:te}=this.props,{showAdd:de}=this.state,be=je(Ye.config.theme2),De=te.settings?.placeholder||"Add text";return n.createElement("div",null,J.map((Ue,We)=>n.createElement(p.I,{className:be.textInput,key:`${We}/${Ue}`,defaultValue:Ue||"",onBlur:et=>this.onValueChange(et,We),onKeyDown:et=>this.onValueChange(et,We),suffix:n.createElement(U.J,{className:be.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(We)})})),de?n.createElement(p.I,{autoFocus:!0,className:be.textInput,placeholder:De,defaultValue:"",onBlur:Ue=>this.onValueChange(Ue,-1),onKeyDown:Ue=>this.onValueChange(Ue,-1),suffix:n.createElement(U.J,{name:"plus-circle"})}):n.createElement(y.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},De))}}const je=(0,C.B)(ae=>({textInput:(0,d.css)({marginBottom:"5px","&:hover":{border:`1px solid ${ae.components.input.borderHover}`}}),trashIcon:(0,d.css)({color:ae.colors.text.secondary,cursor:"pointer","&:hover":{color:ae.colors.text.primary}})}));var ut=e(40154);function Fe({value:ae,onChange:J,item:te}){const de=(0,L.wW)(Te);return te?.settings?.isClearable&&ae!=null?n.createElement("div",{className:de.wrapper},n.createElement("span",{className:de.first},n.createElement(ut.n,{value:ae,onChange:J})),n.createElement(s.h,{name:"times",onClick:()=>J(void 0),tooltip:"Clear unit selection"})):n.createElement(ut.n,{value:ae,onChange:J})}const Te=ae=>({wrapper:(0,d.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center"}),first:(0,d.css)({marginRight:ae.spacing(1),flexGrow:2})}),Ve=()=>{const ae={id:"number",name:"Number",description:"Allows numeric values input",editor:ce.w},J={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Re.p},te={id:"text",name:"Text",description:"Allows string values input",editor:$e.A},de={id:"strings",name:"String array",description:"An array of strings",editor:Ne},be={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor($t){const{id:Ie,...st}=$t;return n.createElement(g.r,{...st,onChange:Mt=>$t.onChange(Mt.currentTarget.checked)})}},De={id:"select",name:"Select",description:"Allows option selection",editor:le},Ue={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:it},We={id:"radio",name:"Radio",description:"Allows option selection",editor($t){return n.createElement(u.S,{...$t,options:$t.item.settings?.options})}},et={id:"unit",name:"Unit",description:"Allows unit input",editor:Fe},ze={id:"color",name:"Color",description:"Allows color selection",editor($t){return n.createElement(fe.B,{value:$t.value,onChange:$t.onChange,settings:$t.item.settings,details:!0})}},_e={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:Pe},qe={id:"links",name:"Links",description:"Allows defining data links",editor:ot},at={id:"stats-picker",name:"Stats Picker",editor:Oe,description:""},lt={id:"timezone",name:"Time zone",description:"Time zone selection",editor:c.O},ft={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:l.b};return[te,ae,J,be,We,De,et,qe,at,de,lt,_e,ze,Ue,ft,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:oe},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:ge},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:M}]},tt=()=>{const ae=["Standard options"],J={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:i.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:ae},te={id:"unit",path:"unit",name:"Unit",description:"",editor:a.S.get("unit").editor,override:a.S.get("unit").editor,process:i.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:ae},de={id:"unitScale",path:"unitScale",name:"Scale units",description:"Automatically scale units relative to magnitude of the value",editor:a.S.get("boolean").editor,override:a.S.get("boolean").editor,process:i.W4,defaultValue:!0,shouldApply:()=>!0,category:ae},be={id:"fieldMinMax",path:"fieldMinMax",name:"Field min/max",description:"Calculate min max per field",editor:a.S.get("boolean").editor,override:a.S.get("boolean").editor,process:i.W4,shouldApply:ft=>ft.type===r.fS.number,showIf:ft=>ft.min===void 0||ft.max===void 0,category:ae},De={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:ft=>ft.type===r.fS.number,category:ae},Ue={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:ft=>ft.type===r.fS.number,category:ae},We={id:"decimals",path:"decimals",name:"Decimals",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:ft=>ft.type===r.fS.number,category:ae},et={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:i.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:ae},ze={id:"links",path:"links",name:"Data links",editor:a.S.get("links").editor,override:a.S.get("links").editor,process:i.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:ft=>ft?ft.length:0},_e={id:"color",path:"color",name:"Color scheme",editor:a.S.get("fieldColor").editor,override:a.S.get("fieldColor").editor,process:i.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:ae},qe={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:a.S.get("mappings").editor,override:a.S.get("mappings").editor,process:i.uj,settings:{},defaultValue:[],shouldApply:ft=>ft.type!==r.fS.time,category:["Value mappings"],getItemsCount:ft=>ft?ft.length:0},at={id:"thresholds",path:"thresholds",name:"Thresholds",editor:a.S.get("thresholds").editor,override:a.S.get("thresholds").editor,process:i.ZN,settings:{},defaultValue:{mode:o.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:ft=>ft?ft.steps.length:0},lt={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:a.S.get("boolean").editor,override:a.S.get("boolean").editor,process:i.W4,shouldApply:()=>!0,settings:{},category:ae};return[te,de,De,Ue,be,We,J,_e,et,ze,qe,at,lt]}},41694:(Q,A,e)=>{"use strict";e.d(A,{p:()=>c});var n=e(76932),a=e(29422),i=e(93948),r=e(31733),o=e(76067),g=e(86840),u=e(13742);const c=({value:f,onChange:m,item:v})=>{const E=(0,r.useRef)(null),{settings:p}=v,h=p?.min||0,s=p?.max||100,y=p?.step,D=p?.marks||{[h]:h,[s]:s},C=p?.included,P=p?.ariaLabelForHandle,b=75,T=!0,O=(0,o.l4)(),[R,I]=(0,r.useState)(f??h),[M,x]=(0,r.useState)(b);(0,r.useEffect)(()=>{f!=null&&f!==R&&I(f)},[f,R]),(0,r.useEffect)(()=>{const G=getComputedStyle(E.current),_=G.getPropertyValue("font-weight")||"normal",K=G.getPropertyValue("font-size")||"16px",k=G.getPropertyValue("font-family")||"Arial",z="0",W=4,Z=8,H=Math.max((s+(y||0)).toString().length,(s-(y||0)).toString().length)+W,X=z.repeat(H),Y=l(X,`${_} ${K} ${k}`);Y&&x(Y+Z*2)},[s,y]);const L=(0,r.useCallback)(G=>{const _=typeof G=="number"?G:G[0];I(_),m&&m(_)},[I,m]),S=(0,r.useCallback)(G=>{let _=G;(Number.isNaN(_)||!_)&&(_=0),I(_),m&&m(_)},[m]),U=(0,g.W)(O,T,!!D),N=d(O,M),w=T?[]:[U.sliderInputVertical];return r.createElement("div",{className:(0,n.cx)(U.container,U.slider)},r.createElement(a.Global,{styles:U.slider}),r.createElement("label",{className:(0,n.cx)(U.sliderInput,...w)},r.createElement(i.Z,{min:h,max:s,step:y,defaultValue:f,value:R,onChange:L,vertical:!T,reverse:!1,ariaLabelForHandle:P,marks:D,included:C}),r.createElement("span",{className:N.numberInputWrapper,ref:E},r.createElement(u.Y,{value:R,onChange:S,max:s,min:h,step:y}))))};function l(f,m){const E=document.createElement("canvas").getContext("2d");return E?(E.font=m,E.measureText(f).width):null}const d=(f,m)=>({numberInputWrapper:(0,n.css)({marginLeft:f.spacing(3),maxHeight:"32px",maxWidth:m,minWidth:m,overflow:"visible",width:"100%"})})},57272:(Q,A,e)=>{"use strict";e.d(A,{A:()=>r});var n=e(31733),a=e(28718),i=e(64516);const r=({value:o,onChange:g,item:u,suffix:c})=>{const l=u.settings?.useTextarea?a.K:i.I,d=(0,n.useCallback)(f=>{let m=o??"";"key"in f?f.key==="Enter"&&!u.settings?.useTextarea&&(m=f.currentTarget.value.trim()):m=f.currentTarget.value.trim(),m!==o&&g(m===""?void 0:m)},[o,u.settings?.useTextarea,g]);return n.createElement(l,{placeholder:u.settings?.placeholder,defaultValue:o||"",rows:u.settings?.useTextarea&&u.settings.rows||5,onBlur:d,onKeyDown:d,suffix:c})}},50186:(Q,A,e)=>{"use strict";e.d(A,{T:()=>U});var n=e(76932),a=e(31733),i=e(57247),r=e(85498),o=e(76067),g=e(37758),u=e(79999),c=e(42474);const l=({isLoading:w,children:G,className:_})=>{let K=_?a.createElement("div",{className:_},G):G;return a.createElement(a.Fragment,null,w?a.createElement(c.Z,null):K)};var d=e(8466),f=e(69391),m=e(36717),v=e(41354),E=e(85765),p=e(64516);const h=({value:w,onEdit:G})=>{const _=(0,o.wW)(s),[K,k]=(0,a.useState)(w),[z,W]=(0,a.useState)(!1),[Z,H]=(0,a.useState)(!1),[X,Y]=(0,a.useState)();(0,a.useEffect)(()=>{k(w)},[w]);const ne=(0,a.useCallback)(async se=>{const re=se.currentTarget.value;if(!re)Y("Please enter a title");else if(re===w)Y(void 0),W(!1);else{H(!0);try{await G(re),Y(void 0),W(!1)}catch(ge){(0,f.kW)(ge)?Y(ge.data.message):ge instanceof Error&&Y(ge.message)}H(!1)}},[G,w]);return z?a.createElement("div",{className:_.inputContainer},a.createElement(E.g,{className:_.field,loading:Z,invalid:!!X,error:X},a.createElement(p.I,{className:_.input,defaultValue:K,onKeyDown:se=>{se.key==="Enter"&&ne(se)},autoFocus:!0,onBlur:ne,onChange:se=>k(se.currentTarget.value),onFocus:()=>W(!0)}))):a.createElement("div",{className:_.textContainer},a.createElement("div",{className:_.textWrapper},a.createElement(m.x,{element:"h1",truncate:!0},K),a.createElement(v.h,{name:"pen",size:"lg",tooltip:"Edit title",onClick:()=>W(!0)})))};h.displayName="EditableTitle";const s=w=>({textContainer:(0,n.css)({minWidth:0}),field:(0,n.css)({flex:1,left:`calc(-${w.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,n.css)({input:{...w.typography.h1}}),inputContainer:(0,n.css)({display:"flex",flex:1}),textWrapper:(0,n.css)({alignItems:"center",display:"flex",gap:w.spacing(1)})});function y({navItem:w,renderTitle:G,actions:_,info:K,subTitle:k,onEditTitle:z}){const W=(0,o.wW)(D),Z=k??w.subTitle,H=z?a.createElement(h,{value:w.text,onEdit:z}):a.createElement("div",{className:W.title},w.img&&a.createElement("img",{className:W.img,src:w.img,alt:`logo for ${w.text}`}),G?G(w.text):a.createElement("h1",null,w.text));return a.createElement("div",{className:W.pageHeader},a.createElement("div",{className:W.topRow},a.createElement("div",{className:W.titleInfoContainer},H,K&&a.createElement(d.S,{info:K})),a.createElement("div",{className:W.actions},_)),Z&&a.createElement("div",{className:W.subTitle},Z))}const D=w=>({topRow:(0,n.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:w.spacing(1,3)}),title:(0,n.css)({display:"flex",flexDirection:"row",h1:{display:"flex",marginBottom:0}}),actions:(0,n.css)({display:"flex",flexDirection:"row",gap:w.spacing(1)}),titleInfoContainer:(0,n.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:w.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,n.css)({label:"page-header",display:"flex",flexDirection:"column",gap:w.spacing(1),marginBottom:w.spacing(2)}),subTitle:(0,n.css)({position:"relative",color:w.colors.text.secondary}),img:(0,n.css)({width:"32px",height:"32px",marginRight:w.spacing(2)})});var C=e(88062),P=e(48018),b=e(4981);function T({navItem:w}){const G=(0,o.wW)(O);return a.createElement("div",{className:G.tabsWrapper},a.createElement(C.J,null,w.children.map((_,K)=>{const k=_.icon?(0,P.toIconName)(_.icon):void 0;return!_.hideFromTabs&&a.createElement(b.O,{label:_.text,active:_.active,key:`${_.url}-${K}`,icon:k,counter:_.tabCounter,href:_.url,suffix:_.tabSuffix,onChangeTab:_.onClick})})))}const O=w=>({tabsWrapper:(0,n.css)({paddingBottom:w.spacing(3)})});var R=e(61356),I=e(18917),M=e(42342),x=e(40556),L=e(92582);function S(w,G){const _=(0,M.useSelector)(K=>K.navIndex)?.[I.Qz];(0,a.useEffect)(()=>{const K=(w?.node!==w?.main?w?.node:w?.main)??{text:"Grafana"},k=(0,L.t)(K,G,_).map(z=>z.text).reverse();k[k.length-1]=x.c.AppTitle,document.title=k.join(" - ")},[_,w,G])}const U=({navId:w,navModel:G,pageNav:_,renderTitle:K,onEditTitle:k,actions:z,subTitle:W,children:Z,className:H,info:X,layout:Y=i.Q.Standard,scrollTop:ne,scrollRef:se,...re})=>{const ge=(0,o.wW)(N),q=(0,R.P)(w,G),{chrome:me}=(0,u.p)();S(q,_);const oe=_??q?.node;return(0,a.useLayoutEffect)(()=>{q&&me.update({sectionNav:q,pageNav:_,layout:Y})},[q,_,me,Y]),a.createElement("div",{className:(0,n.cx)(ge.wrapper,H),...re},Y===i.Q.Standard&&a.createElement(g.$,{autoHeightMin:"100%",scrollTop:ne,scrollRefCallback:se},a.createElement("div",{className:ge.pageInner},oe&&a.createElement(y,{actions:z,onEditTitle:k,navItem:oe,renderTitle:K,info:X,subTitle:W}),_&&_.children&&a.createElement(T,{navItem:_}),a.createElement("div",{className:ge.pageContent},Z))),Y===i.Q.Canvas&&a.createElement(g.$,{autoHeightMin:"100%",scrollTop:ne,scrollRefCallback:se},a.createElement("div",{className:ge.canvasContent},Z)),Y===i.Q.Custom&&Z)};U.Contents=l;const N=w=>({wrapper:(0,n.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,n.css)({label:"page-content",flexGrow:1}),pageInner:(0,n.css)({label:"page-inner",padding:w.spacing(2),borderBottom:"none",background:w.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:w.spacing(0,0,0,0)},r.config.featureToggles.dockedMegaMenu?{[w.breakpoints.up("md")]:{padding:w.spacing(4)}}:{borderRadius:w.shape.radius.default,border:`1px solid ${w.colors.border.weak}`,[w.breakpoints.up("md")]:{margin:w.spacing(2,2,0,1),padding:w.spacing(3)}}),canvasContent:(0,n.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:w.spacing(2),flexBasis:"100%",flexGrow:1})})},61356:(Q,A,e)=>{"use strict";e.d(A,{P:()=>o});var n=e(7261),a=e(90845),i=e(86573),r=e(42342);function o(u,c){if(c)return c;if(u&&i.h)return(0,r.useSelector)((0,n.P1)(g,l=>(0,a.ht)(l,u??"home")))}function g(u){return u.navIndex}},8466:(Q,A,e)=>{"use strict";e.d(A,{S:()=>r});var n=e(76932),a=e(31733),i=e(76067);function r({info:g}){const u=(0,i.wW)(o);return a.createElement("div",{className:u.container},g.map((c,l)=>a.createElement(a.Fragment,{key:l},a.createElement("div",{className:u.infoItem},a.createElement("div",{className:u.label},c.label),c.value),l+1<g.length&&a.createElement("div",{"data-testid":"page-info-separator",className:u.separator}))))}const o=g=>({container:(0,n.css)({display:"flex",flexDirection:"row",gap:g.spacing(1.5),overflow:"auto"}),infoItem:(0,n.css)({...g.typography.bodySmall,display:"flex",flexDirection:"column",gap:g.spacing(.5)}),label:(0,n.css)({color:g.colors.text.secondary}),separator:(0,n.css)({borderLeft:`1px solid ${g.colors.border.weak}`})})},42474:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>r});var n=e(31733),a=e(61375);const r=({pageName:o=""})=>{const g=`Loading ${o}...`;return n.createElement("div",{className:"page-loader-wrapper"},n.createElement(a.u,{text:g}))}},65923:(Q,A,e)=>{"use strict";e.d(A,{j:()=>r});var n=e(76932),a=e(31733),i=e(76067);function r({entity:g="Page"}){const u=(0,i.wW)(o),c=(0,i.l4)();return a.createElement("div",{className:u.container},a.createElement("h1",null,g," not found"),a.createElement("div",{className:u.subtitle},"We're looking but can't seem to find this ",g.toLowerCase(),". Try returning"," ",a.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",a.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),a.createElement("div",{className:u.grot},a.createElement("img",{src:`public/img/grot-404-${c.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function o(g){return{container:(0,n.css)({display:"flex",flexDirection:"column",padding:g.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,n.css)({color:g.colors.text.secondary,fontSize:g.typography.h5.fontSize,padding:g.spacing(2,0),textAlign:"center"}),grot:(0,n.css)({maxWidth:"450px",paddingTop:g.spacing(8),margin:"0 auto"})}}},85668:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>o});var n=e(31733),a=e(21568),i=e(64516),r=e(41354);const o=n.forwardRef((g,u)=>{const[c,l]=(0,n.useState)(!1);return n.createElement(i.I,{...g,type:c?"text":"password","data-testid":a.wl.pages.Login.password,ref:u,suffix:n.createElement(r.h,{name:c?"eye-slash":"eye","aria-controls":g.id,role:"switch","aria-checked":c,onClick:()=>{l(!c)},tooltip:c?"Hide password":"Show password"})})});o.displayName="PasswordField"},48529:(Q,A,e)=>{"use strict";e.d(A,{h:()=>o});var n=e(76932),a=e(31733),i=e(51133),r=e(76067);const o=a.memo(a.forwardRef(({className:c,children:l,markdown:d,styleOverrides:f,onRemove:m,...v},E)=>{const p=(0,r.wW)(h=>u(h,f?.borderTop));return a.createElement("div",{className:(0,n.cx)(p.wrapper,c),...v,ref:E},d&&g(d),l)}));function g(c){const l=(0,i.a)(c);return a.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:l}})}o.displayName="OperationRowHelp";const u=(c,l)=>{const d=c.shape.radius.default,f=c.colors.background.secondary;return{wrapper:(0,n.css)`
      padding: ${c.spacing(2)};
      border: 2px solid ${f};
      border-top: ${l?l+f:"none"};
      border-radius: 0 0 ${d} ${d};
      position: relative;
      top: -4px;
    `}}},48229:(Q,A,e)=>{"use strict";e.d(A,{V:()=>c,y:()=>u});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(41354);function g(d){const f=(0,r.wW)(l);return a.createElement("div",{className:(0,n.cx)(f.icon,"active"in d&&d.active&&f.active)},a.createElement(o.h,{name:d.icon,tooltip:d.title,className:f.icon,disabled:!!d.disabled,onClick:d.onClick,type:"button","aria-label":i.wl.components.QueryEditorRow.actionButton(d.title),..."active"in d&&{"aria-pressed":d.active}}))}function u(d){return a.createElement(g,{...d})}const c=d=>a.createElement(g,{...d}),l=d=>({icon:(0,n.css)`
      display: flex;
      position: relative;
      color: ${d.colors.text.secondary};
    `,active:(0,n.css)`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${d.shape.radius.default};
        bottom: -8px;
        background-image: ${d.colors.gradients.brandHorizontal} !important;
      }
    `})},87243:(Q,A,e)=>{"use strict";e.d(A,{t:()=>E});var n=e(76932),a=e(31733),i=e(4113),r=e(78561),o=e(64704),g=e(76067),u=e(67978),c=e(41354),l=e(37739),d=e(49311),f=e(53166);const m=({actionsElement:h,disabled:s,draggable:y,collapsable:D=!0,dragHandleProps:C,headerElement:P,isContentVisible:b,onRowToggle:T,reportDragMousePosition:O,title:R,id:I,expanderMessages:M})=>{const x=(0,g.wW)(v);let L=b?(0,f.t)("query-operation.header.collapse-row","Collapse query row"):(0,f.t)("query-operation.header.expand-row","Expand query row");M!==void 0&&b?L=M.close:M!==void 0&&(L=M?.open);const S=(0,f.t)("query-operation.header.drag-and-drop","Drag and drop to reorder");return a.createElement("div",{className:x.header},a.createElement("div",{className:x.column},D&&a.createElement(c.h,{name:b?"angle-down":"angle-right",tooltip:L,className:x.collapseIcon,onClick:T,"aria-expanded":b,"aria-controls":I}),R&&a.createElement("div",{className:x.titleWrapper,onClick:T,"aria-label":"Query operation row title"},a.createElement("div",{className:(0,n.cx)(x.title,s&&x.disabled)},R)),P),a.createElement(l.K,{gap:1,alignItems:"center"},h,y&&a.createElement("div",{onMouseMove:O,...C},a.createElement(d.J,{title:S,name:"draggabledots",size:"lg",className:x.dragIcon}))))},v=h=>({header:(0,n.css)`
    label: Header;
    padding: ${h.spacing(.5,.5)};
    border-radius: ${h.shape.radius.default};
    background: ${h.colors.background.secondary};
    min-height: ${h.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,n.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,n.css)`
    cursor: grab;
    color: ${h.colors.text.disabled};
    margin: ${h.spacing(0,.5)};
    &:hover {
      color: ${h.colors.text};
    }
  `,collapseIcon:(0,n.css)`
    margin-left: ${h.spacing(.5)};
    color: ${h.colors.text.disabled};
    }
  `,titleWrapper:(0,n.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${h.spacing(.5)};
  `,title:(0,n.css)`
    font-weight: ${h.typography.fontWeightBold};
    color: ${h.colors.text.link};
    margin-left: ${h.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,n.css)`
    color: ${h.colors.text.disabled};
  `});m.displayName="QueryOperationRowHeader";function E({children:h,actions:s,title:y,headerElement:D,onClose:C,onOpen:P,isOpen:b,disabled:T,draggable:O,collapsable:R,index:I,id:M,expanderMessages:x}){const[L,S]=(0,a.useState)(b!==void 0?b:!0),U=(0,g.wW)(p),N=(0,a.useCallback)(()=>{S(!L)},[L,S]);(0,a.useEffect)(()=>{typeof b=="boolean"&&S(b)},[b]);const w=(0,a.useCallback)(k=>{if(k.defaultPrevented){const z=k.currentTarget.getBoundingClientRect(),W=k.clientX-z.left,Z=k.clientY-z.top;(0,o.ff)("query_row_reorder_drag_position",{x:W/z.width,y:Z/z.height,width:z.width,height:z.height})}},[]);(0,r.Z)(()=>{L?P&&P():C&&C()},[L]);const G={isOpen:L,onOpen:()=>{S(!0)},onClose:()=>{S(!1)}},_=s&&u.renderOrCallToRender(s,G),K=D&&u.renderOrCallToRender(D,G);return O?a.createElement(i._l,{draggableId:M,index:I},k=>a.createElement(a.Fragment,null,a.createElement("div",{ref:k.innerRef,className:U.wrapper,...k.draggableProps},a.createElement("div",null,a.createElement(m,{id:M,actionsElement:_,disabled:T,draggable:!0,collapsable:R,dragHandleProps:k.dragHandleProps,headerElement:K,isContentVisible:L,onRowToggle:N,reportDragMousePosition:w,title:y,expanderMessages:x})),L&&a.createElement("div",{className:U.content},h)))):a.createElement("div",{className:U.wrapper},a.createElement(m,{id:M,actionsElement:_,disabled:T,draggable:!1,collapsable:R,headerElement:K,isContentVisible:L,onRowToggle:N,reportDragMousePosition:w,title:y,expanderMessages:x}),L&&a.createElement("div",{className:U.content},h))}const p=h=>({wrapper:(0,n.css)`
      margin-bottom: ${h.spacing(2)};
    `,content:(0,n.css)`
      margin-top: ${h.spacing(.5)};
      margin-left: ${h.spacing(3)};
    `});E.displayName="QueryOperationRow"},23323:(Q,A,e)=>{"use strict";e.d(A,{I:()=>Pe});var n=e(31733),a=e(76067),i=e(11550),r=e(25108),o=e(76932),g=e(89719),u=e(49311),c=e(58037),l=e(64516),d=e(90119),f=e(83998),m=e(33789);const v=(0,n.forwardRef)(({children:Ee,iconName:he},Le)=>{const ke=(0,a.wW)(E);return n.createElement("div",{className:ke.container,ref:Le},he&&n.createElement(u.J,{name:he,size:"xs"}),Ee)});v.displayName="ValueContainer";const E=Ee=>{const{prefix:he}=(0,l.H)({theme:Ee}),{multiValueContainer:Le}=(0,m.D)(Ee);return{container:(0,o.cx)(he,Le,(0,o.css)`
        position: relative;
        padding: ${Ee.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${Ee.spacing(.5)};
        }
      `)}},p=360,h=300,s=320,y=360,D=320,C=360,P=y+C,b=Ee=>Ee.stopPropagation(),T=({appliedRoles:Ee,basicRole:he,disabled:Le,isFocused:ke,query:ot,showBasicRole:it,width:ce,isLoading:le,onOpen:Re,onClose:Ae,onQueryChange:Oe,...$e})=>{const Ye=(0,a.wW)(R,!1,!!ke,!!Le,!1,ce),Ne=(0,n.useRef)(null);(0,n.useEffect)(()=>{ke&&Ne.current?.focus()});const je=Fe=>{const Te=Fe.target?.value;Oe(Te)},ut=it&&he!=="None";return ke?n.createElement("div",{className:Ye.wrapper},ut&&n.createElement(v,null,he),Ee.map(Fe=>n.createElement(v,{key:Fe.uid},Fe.displayName||Fe.name)),!Le&&n.createElement("input",{...$e,className:Ye.input,ref:Ne,onMouseDown:b,onChange:je,"data-testid":"role-picker-input",placeholder:ke?"Select role":"",value:ot}),n.createElement("div",{className:Ye.suffix},n.createElement(u.J,{name:"angle-up",className:Ye.dropdownIndicator,onMouseDown:Ae}))):n.createElement("div",{className:(0,o.cx)(Ye.wrapper,Ye.selectedRoles),onMouseDown:Re},ut&&n.createElement(v,null,he),n.createElement(O,{appliedRoles:Ee,numberOfRoles:Ee.length,showBuiltInRole:ut}),le&&n.createElement("div",{className:Ye.spinner},n.createElement(g.$,{size:16,inline:!0})))};T.displayName="RolePickerInput";const O=({showBuiltInRole:Ee,numberOfRoles:he,appliedRoles:Le})=>{const ke=(0,a.wW)(ot=>I(ot));return n.createElement(n.Fragment,null,he?n.createElement(c.u,{content:n.createElement("div",{className:ke.tooltip},Le?.map(ot=>n.createElement("p",{key:ot.uid},ot.displayName)))},n.createElement(v,null,`${Ee?"+":""}${he} role${he>1?"s":""}`)):!Ee&&n.createElement(v,null,"No roles assigned"))},R=(Ee,he,Le,ke,ot,it)=>{const ce=(0,l.H)({theme:Ee,invalid:he});return{wrapper:(0,o.cx)(ce.wrapper,(0,d.RK)(Ee,he),Le&&(0,o.css)`
          ${f.focusCss(Ee.v1)}
        `,ke&&ce.inputDisabled,(0,o.css)({minWidth:it||p+"px",width:it,minHeight:"32px",height:"auto",flexDirection:"row",paddingRight:Ee.spacing(1),maxWidth:"100%",alignItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",cursor:"default"}),ot&&(0,o.css)`
          padding-left: 0;
        `),input:(0,o.cx)((0,d.RK)(Ee,he),(0,o.css)`
        max-width: 120px;
        border: none;
        cursor: ${Le?"default":"pointer"};
      `),suffix:ce.suffix,dropdownIndicator:(0,o.css)`
      cursor: pointer;
    `,selectedRoles:(0,o.css)`
      display: flex;
      align-items: center;
      cursor: ${ke?"not-allowed":"pointer"};
    `,tooltip:(0,o.css)`
      p {
        margin-bottom: ${Ee.spacing(.5)};
      }
    `,spinner:(0,o.css)({display:"flex",flexGrow:1,justifyContent:"flex-end"})}},I=Ee=>({tooltip:(0,o.css)`
    p {
      margin-bottom: ${Ee.spacing(.5)};
    }
  `});var M=e(94746),x=e(37758),L=e(79106),S=e(51343),U=e(68432),N=e(42342);const w=Ee=>({hideScrollBar:(0,o.css)({".scrollbar-view":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}}),menuWrapper:(0,o.css)({display:"flex",maxHeight:"650px",position:"absolute",zIndex:Ee.zIndex.dropdown,overflow:"hidden",minWidth:"auto"}),menu:(0,o.css)({minWidth:`${s}px`,maxWidth:`${y}px`,"& > div":{paddingTop:Ee.spacing(1)}}),menuLeft:(0,o.css)({flexDirection:"row-reverse"}),subMenu:(0,o.css)({height:"100%",minWidth:`${D}px`,maxWidth:`${C}px`,display:"flex",flexDirection:"column",borderLeft:`1px solid ${Ee.components.input.borderColor}`,"& > div":{paddingTop:Ee.spacing(1)}}),subMenuLeft:(0,o.css)({borderRight:`1px solid ${Ee.components.input.borderColor}`,borderLeft:"unset"}),groupHeader:(0,o.css)({padding:Ee.spacing(0,4.5),display:"flex",alignItems:"center",color:Ee.colors.text.primary,fontWeight:Ee.typography.fontWeightBold}),container:(0,o.css)({padding:Ee.spacing(1),border:`1px ${Ee.colors.border.weak} solid`,borderRadius:Ee.shape.radius.default,backgroundColor:Ee.colors.background.primary,zIndex:Ee.zIndex.modal}),menuSection:(0,o.css)({marginBottom:Ee.spacing(2)}),menuOptionCheckbox:(0,o.css)({display:"flex",margin:Ee.spacing(0,1,0,.25)}),menuButtonRow:(0,o.css)({backgroundColor:Ee.colors.background.primary,padding:Ee.spacing(1)}),menuOptionBody:(0,o.css)({fontWeight:Ee.typography.fontWeightRegular,padding:Ee.spacing(0,1.5,0,0)}),menuOptionDisabled:(0,o.css)({color:Ee.colors.text.disabled,cursor:"not-allowed"}),menuOptionExpand:(0,o.css)({position:"absolute",right:Ee.spacing(1.25),color:Ee.colors.text.disabled,"&:after":{content:'">"'}}),menuOptionInfoSign:(0,o.css)({color:Ee.colors.text.disabled}),basicRoleSelector:(0,o.css)({margin:Ee.spacing(1,1.25,1,1.5)}),subMenuPortal:(0,o.css)({height:"100%","> div":{height:"100%"}}),subMenuButtonRow:(0,o.css)({backgroundColor:Ee.colors.background.primary,padding:Ee.spacing(1)}),checkboxPartiallyChecked:(0,o.css)({input:{"&:checked + span":{"&:after":{borderWidth:"0 3px 0px 0",transform:"rotate(90deg)"}}}}),loadingSpinner:(0,o.css)({marginLeft:Ee.spacing(1)})}),G=Object.values(N.OrgRole).map(Ee=>({label:Ee===N.OrgRole.None?"No basic role":Ee,value:Ee})),_=({value:Ee,onChange:he,disabled:Le,disabledMesssage:ke,tooltipMessage:ot})=>{const it=(0,a.wW)(w),ce=(0,a.l4)();return n.createElement(n.Fragment,null,n.createElement("div",{className:it.groupHeader},n.createElement("span",{style:{marginRight:ce.spacing(1)}},"Basic roles"),Le&&ke&&n.createElement(c.u,{placement:"right-end",interactive:!0,content:n.createElement("div",null,ke)},n.createElement(u.J,{name:"question-circle"})),!Le&&ot&&n.createElement(c.u,{placement:"right-end",interactive:!0,content:ot},n.createElement(u.J,{name:"info-circle",size:"xs"}))),n.createElement(U.x,{name:"Basic Role Selector",className:it.basicRoleSelector,options:G,value:Ee,onChange:he,disabled:Le}))};var K=e(36356);const k=(0,n.memo)(n.forwardRef(({name:Ee,value:he,isFocused:Le,isSelected:ke,partiallySelected:ot,disabled:it,onChange:ce,onClick:le,onOpenSubMenu:Re,onCloseSubMenu:Ae,children:Oe,root:$e},Ye)=>{const Ne=(0,a.l4)(),je=(0,m.D)(Ne),ut=(0,a.wW)(w),Fe=(0,o.cx)(je.option,Le&&je.optionFocused,it&&ut.menuOptionDisabled),Te=J=>{it||he&&ce(he)},Ve=J=>{le&&le(he)},tt=()=>{Re&&Re(he)},ae=()=>{Ae&&Ae()};return n.createElement("div",{onMouseEnter:tt,onMouseLeave:ae},n.createElement("div",{ref:Ye,className:Fe,"aria-label":"Role picker option",onClick:Ve},n.createElement(K.X,{value:ke,className:(0,o.cx)(ut.menuOptionCheckbox,{[ut.checkboxPartiallyChecked]:ot}),onChange:Te,disabled:it}),n.createElement("div",{className:(0,o.cx)(je.optionBody,ut.menuOptionBody)},n.createElement("span",null,Ee),n.createElement("span",{className:ut.menuOptionExpand})),$e&&Oe&&n.createElement(r.h_,{className:ut.subMenuPortal,root:$e},Oe)))}));k.displayName="RoleMenuGroupOption";const z=n.forwardRef(({data:Ee,isFocused:he,isSelected:Le,disabled:ke,onChange:ot,hideDescription:it},ce)=>{const le=(0,a.l4)(),Re=(0,m.D)(le),Ae=(0,a.wW)(w),Oe=(0,o.cx)(Re.option,he&&Re.optionFocused,ke&&Ae.menuOptionDisabled),$e=Ye=>{ke||(Ye.preventDefault(),Ye.stopPropagation(),ot(Ee))};return n.createElement("div",{ref:ce,className:Oe,"aria-label":"Role picker option",onClick:$e},n.createElement(K.X,{value:Le,className:Ae.menuOptionCheckbox,onChange:$e,disabled:ke}),n.createElement("div",{className:(0,o.cx)(Re.optionBody,Ae.menuOptionBody)},n.createElement("span",null,Ee.displayName||Ee.name),!it&&Ee.description&&n.createElement("div",{className:Re.optionDescription},Ee.description)),Ee.description&&n.createElement(c.u,{content:Ee.description},n.createElement(u.J,{name:"info-circle",className:Ae.menuOptionInfoSign})))});z.displayName="RoleMenuOption";var W=e(31912);const Z=({options:Ee,selectedOptions:he,disabledOptions:Le,onSelect:ke,onClear:ot,showOnLeft:it})=>{const ce=(0,a.l4)(),le=(0,m.D)(ce),Re=(0,a.wW)(w),Ae=async()=>{ot&&ot()};return n.createElement("div",{className:(0,o.cx)(Re.subMenu,{[Re.subMenuLeft]:it}),"aria-label":"Role picker submenu"},n.createElement(x.$,{autoHide:!1,autoHeightMax:`${h}px`,hideHorizontalTrack:!0},n.createElement("div",{className:le.optionBody},Ee.map((Oe,$e)=>n.createElement(z,{data:Oe,key:$e,isSelected:!!(Oe.uid&&(he.find(Ye=>Ye.uid===Oe.uid)||Le?.find(Ye=>Ye.uid===Oe.uid))),disabled:!!(Oe.uid&&Le?.find(Ye=>Ye.uid===Oe.uid))||(0,W.r)(Oe),onChange:ke,hideDescription:!0})))),n.createElement("div",{className:Re.subMenuButtonRow},n.createElement(L.Lh,{justify:"flex-end"},n.createElement(S.zx,{size:"sm",fill:"text",onClick:Ae},"Clear"))))},H=n.forwardRef(({roles:Ee,renderedName:he,showGroups:Le,optionGroups:ke,onGroupChange:ot,groupSelected:it,groupPartiallySelected:ce,subMenuNode:le,selectedOptions:Re,onRoleChange:Ae,onClearSubMenu:Oe,showOnLeftSubMenu:$e},Ye)=>{const[Ne,je]=(0,n.useState)(!1),[ut,Fe]=(0,n.useState)(""),Te=(0,a.l4)(),Ve=(0,m.D)(Te),tt=(0,a.wW)(w),ae=(0,n.useCallback)(te=>{Fe(te),je(!0)},[]),J=(0,n.useCallback)(()=>{je(!1),Fe("")},[]);return n.createElement("div",null,Ee.length>0&&n.createElement("div",{className:tt.menuSection},n.createElement("div",{className:tt.groupHeader},he),n.createElement("div",{className:Ve.optionBody}),Le&&ke?.length?ke.map(te=>n.createElement(k,{key:te.value,name:te.name,value:te.value,isSelected:it(te.value)||ce(te.value),partiallySelected:ce(te.value),disabled:te.options?.every(W.r),onChange:ot,onOpenSubMenu:ae,onCloseSubMenu:J,root:le,isFocused:Ne&&ut===te.value},Ne&&ut===te.value&&n.createElement(Z,{options:te.options,selectedOptions:Re,onSelect:Ae,onClear:()=>Oe(ut),showOnLeft:$e}))):Ee.map(te=>n.createElement(z,{data:te,key:te.uid,isSelected:!!(te.uid&&Re.find(de=>de.uid===te.uid)),disabled:(0,W.r)(te),onChange:Ae,hideDescription:!0}))))});H.displayName="RoleMenuGroupsSection";var X=(Ee=>(Ee.fixed="fixed",Ee.custom="custom",Ee.plugin="plugin",Ee))(X||{});const Y={ldap:"LDAP",current:"Current org"},ne=n.createElement(n.Fragment,null,'You can now select the "No basic role" option and add permissions to your custom needs. You can find more information in\xA0',n.createElement(M.h,{href:"https://grafana.com/docs/grafana/latest/administration/roles-and-permissions/#organization-roles",variant:"bodySmall",external:!0},"our documentation"),"."),se=({basicRole:Ee,options:he,appliedRoles:Le,showGroups:ke,basicRoleDisabled:ot,disabledMessage:it,showBasicRole:ce,onSelect:le,onBasicRoleSelect:Re,onUpdate:Ae,updateDisabled:Oe,offset:$e,menuLeft:Ye,apply:Ne})=>{const[je,ut]=(0,n.useState)(Le),[Fe,Te]=(0,n.useState)(Ee),[Ve,tt]=(0,n.useState)({}),ae=(0,n.useRef)(null),J=(0,a.l4)(),te=(0,m.D)(J),de=(0,a.wW)(w);(0,n.useEffect)(()=>{le(je)},[je,le]),(0,n.useEffect)(()=>{Re&&Fe&&Re(Fe)},[Fe,Re]),(0,n.useEffect)(()=>{const lt=he.filter(re).sort(pe),ft=he.filter(ge).sort(pe),yt=he.filter(q).sort(pe),wt={fixed:me(ft).sort((zt,$t)=>zt.name.localeCompare($t.name)),custom:me(lt).sort((zt,$t)=>zt.name.localeCompare($t.name)),plugin:me(yt).sort((zt,$t)=>zt.name.localeCompare($t.name))};tt({fixed:{groupType:"fixed",optionGroup:wt.fixed,renderedName:"Fixed roles",roles:ft},custom:{groupType:"custom",optionGroup:wt.custom,renderedName:"Custom roles",roles:lt},plugin:{groupType:"plugin",optionGroup:wt.plugin,renderedName:"Plugin roles",roles:yt}})},[he]);const be=lt=>{const ft=[];for(const yt of je)oe(yt)===lt&&ft.push(yt);return ft},De=(lt,ft)=>{const yt=be(ft),wt=Ve[lt]?.optionGroup.find(zt=>zt.value===ft);return yt.length>0&&yt.length>=wt.options.length},Ue=(lt,ft)=>{const yt=be(ft),wt=Ve[lt]?.optionGroup.find(zt=>zt.value===ft);return yt.length>0&&yt.length<wt.options.length},We=lt=>{je.find(ft=>ft.uid===lt.uid)?ut(je.filter(ft=>ft.uid!==lt.uid)):ut([...je,lt])},et=(lt,ft)=>{const yt=Ve[lt]?.optionGroup.find(wt=>wt.value===ft);if(yt)if(De(lt,ft)||Ue(lt,ft))ut(je.filter(wt=>!yt.options.find(zt=>wt.uid===zt.uid)));else{const wt=yt.options.filter($t=>$t.delegatable),zt=je.filter($t=>!yt.options.find(Ie=>$t.uid===Ie.uid));ut([...zt,...wt])}},ze=lt=>{Te(lt)},_e=async()=>{ut([])},qe=lt=>{const ft=je.filter(yt=>oe(yt)!==lt);ut(ft)},at=()=>{Ae(je,Fe)};return n.createElement("div",{className:(0,o.cx)(te.menu,de.menuWrapper,{[de.menuLeft]:Ye},(0,o.css)({top:`${$e.vertical}px`,left:Ye?"unset":`${$e.horizontal}px`,right:Ye?`${$e.horizontal}px`:"unset"}))},n.createElement("div",{className:de.menu,"aria-label":"Role picker menu"},n.createElement(x.$,{autoHide:!1,autoHeightMax:`${h}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0,className:(0,o.cx)(de.hideScrollBar)},ce&&n.createElement("div",{className:de.menuSection},n.createElement(_,{value:Fe,onChange:ze,disabled:ot,disabledMesssage:it,tooltipMessage:ne})),Object.entries(Ve).map(([lt,ft])=>n.createElement(H,{key:lt,roles:ft.roles,renderedName:ft.renderedName,showGroups:ke,optionGroups:ft.optionGroup,groupSelected:yt=>De(ft.groupType,yt),groupPartiallySelected:yt=>Ue(ft.groupType,yt),onGroupChange:yt=>et(ft.groupType,yt),subMenuNode:ae?.current,selectedOptions:je,onRoleChange:We,onClearSubMenu:qe,showOnLeftSubMenu:Ye}))),n.createElement("div",{className:de.menuButtonRow},n.createElement(L.Lh,{justify:"flex-end"},n.createElement(S.zx,{size:"sm",fill:"text",onClick:_e,disabled:Oe},"Clear all"),n.createElement(S.zx,{size:"sm",onClick:at,disabled:Oe},Ne?"Apply":"Update")))),n.createElement("div",{ref:ae}))},re=Ee=>!Ee.name?.startsWith("fixed:")&&!Ee.name.startsWith("plugins:"),ge=Ee=>Ee.name?.startsWith("fixed:"),q=Ee=>Ee.name?.startsWith("plugins:"),me=Ee=>{const he={};return Ee.forEach(ke=>{const ot=oe(ke),it=fe(ke);he[ot]||(he[ot]={name:it,roles:[]}),he[ot].roles.push(ke)}),Object.entries(he).map(([ke,ot])=>({name:Y[ke]||Me(ot.name),value:ke,options:ot.roles.sort(pe)}))},oe=Ee=>{const he=ve(Ee),Le=fe(Ee);return`${he}:${Le}`},fe=Ee=>Ee.group||"Other",ve=Ee=>{const he=Ee.name.indexOf(":");return he<0?"unknown":Ee.name.substring(0,he)},pe=(Ee,he)=>Ee.name.localeCompare(he.name),Me=Ee=>Ee.slice(0,1).toUpperCase()+Ee.slice(1),Pe=({basicRole:Ee,appliedRoles:he,roleOptions:Le,disabled:ke,isLoading:ot,basicRoleDisabled:it,basicRoleDisabledMessage:ce,showBasicRole:le,onRolesChange:Re,onBasicRoleChange:Ae,canUpdateRoles:Oe=!0,apply:$e=!1,maxWidth:Ye=p,width:Ne})=>{const[je,ut]=(0,n.useState)(!1),[Fe,Te]=(0,n.useState)(he),[Ve,tt]=(0,n.useState)(Ee),[ae,J]=(0,n.useState)(""),[te,de]=(0,n.useState)({vertical:0,horizontal:0}),[be,De]=(0,n.useState)(!1),Ue=(0,n.useRef)(null),We=(0,a.l4)(),et=typeof Ne=="number"?We.spacing(Ne):Ne;(0,n.useEffect)(()=>{tt(Ee),Te(he)},[he,Ee,Ae]);const ze=(0,n.useCallback)(()=>{const{horizontal:Ie,vertical:st,menuToLeft:Mt}=_e();Ie&&st&&(de({horizontal:Ie,vertical:st}),De(Mt))},[]);(0,n.useEffect)(()=>{je&&ze()},[je,Fe,ze]);const _e=()=>{const Ie=Ue?.current?.getBoundingClientRect();if(!Ie)return{};const{bottom:st,top:Mt,left:ct,right:nt}=Ie;let Ct=ct,kt=st+10,Jt=!1;return window.innerHeight-st<h+20&&(kt=Mt-h-50),ct+P>window.innerWidth&&(Ct=window.innerWidth-nt,Jt=!0),{horizontal:Ct,vertical:kt,menuToLeft:Jt}},qe=(0,n.useCallback)(Ie=>{ke||(Ie.preventDefault(),Ie.stopPropagation(),ze(),ut(!0))},[ke,ze]),at=(0,n.useCallback)(()=>{ut(!1),J(""),Te(he),tt(Ee)},[he,Ee]),lt=()=>je&&at(),ft=Ie=>{J(Ie||"")},yt=Ie=>{Te(Ie)},wt=Ie=>{tt(Ie)},zt=(Ie,st)=>{Ae&&st&&st!==Ee&&Ae(st),Oe&&Re(Ie),J(""),ut(!1)},$t=()=>{const Ie=Le.map(st=>({...st,delegatable:Oe&&st.delegatable}));return ae&&ae.trim()!==""?Ie.filter(st=>st.name?.toLowerCase().includes(ae.toLowerCase())):Ie};return n.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:et||Ye,width:et},ref:Ue},n.createElement(i.L,{onClick:lt,useCapture:!1},n.createElement(T,{basicRole:Ve,appliedRoles:Fe,query:ae,onQueryChange:ft,onOpen:qe,onClose:at,isFocused:je,disabled:ke,showBasicRole:le,width:et,isLoading:ot}),je&&n.createElement(r.h_,null,n.createElement("div",{onClick:Ie=>Ie.stopPropagation()},n.createElement(se,{options:$t(),basicRole:Ve,appliedRoles:he,onBasicRoleSelect:wt,onSelect:yt,onUpdate:zt,showGroups:ae.length===0||ae.trim()==="",basicRoleDisabled:it,disabledMessage:ce,showBasicRole:le,updateDisabled:it&&!Oe,apply:$e,offset:te,menuLeft:be})))))}},17806:(Q,A,e)=>{"use strict";e.d(A,{R:()=>u});var n=e(31733),a=e(41710),i=e(75923),r=e(42342),o=e(23323),g=e(59256);const u=({basicRole:c,roles:l,userId:d,orgId:f,onBasicRoleChange:m,roleOptions:v,disabled:E,basicRoleDisabled:p,basicRoleDisabledMessage:h,apply:s=!1,onApplyRoles:y,pendingRoles:D,maxWidth:C,width:P,isLoading:b})=>{const[{loading:T,value:O=l||[]},R]=(0,a.Z)(async()=>{try{if(l)return l;if(s&&D?.length)return D;if(i.Vt.hasPermission(r.AccessControlAction.ActionUserRolesList))return await(0,g.kt)(d,f)}catch{console.error("Error loading options")}return[]},[f,d,D,l]);(0,n.useEffect)(()=>{f&&R()},[R,f]);const I=async x=>{s?y&&y(x,d,f):(await(0,g.hB)(x,d,f),await R())},M=i.Vt.hasPermission(r.AccessControlAction.ActionUserRolesAdd)&&i.Vt.hasPermission(r.AccessControlAction.ActionUserRolesRemove);return n.createElement(o.I,{appliedRoles:O,basicRole:c,onRolesChange:I,onBasicRoleChange:m,roleOptions:v,isLoading:T||b,disabled:E,basicRoleDisabled:p,basicRoleDisabledMessage:h,showBasicRole:!0,apply:s,canUpdateRoles:M,maxWidth:C,width:P})}},59256:(Q,A,e)=>{"use strict";e.d(A,{_C:()=>g,hB:()=>o,kt:()=>r,u7:()=>u,ul:()=>i});var n=e(69391),a=e(31912);const i=async c=>{let l="/api/access-control/roles?delegatable=true";c&&(l+=`&targetOrgId=${c}`);const d=await(0,n.i)().get(l);return!d||!d.length?[]:d.map(a.w)},r=async(c,l)=>{let d=`/api/access-control/users/${c}/roles`;l&&(d+=`?targetOrgId=${l}`);try{const f=await(0,n.i)().get(d);return!f||!f.length?[]:f.map(a.w)}catch(f){return(0,n.kW)(f)&&(f.isHandled=!0),[]}},o=(c,l,d)=>{let f=`/api/access-control/users/${l}/roles`;d&&(f+=`?targetOrgId=${d}`);const m=c.flatMap(v=>v.uid);return(0,n.i)().put(f,{orgId:d,roleUids:m})},g=async(c,l)=>{let d=`/api/access-control/teams/${c}/roles`;l&&(d+=`?targetOrgId=${l}`);try{const f=await(0,n.i)().get(d);return!f||!f.length?[]:f.map(a.w)}catch(f){return(0,n.kW)(f)&&(f.isHandled=!0),[]}},u=(c,l,d)=>{let f=`/api/access-control/teams/${l}/roles`;d&&(f+=`?targetOrgId=${d}`);const m=c.flatMap(v=>v.uid);return(0,n.i)().put(f,{orgId:d,roleUids:m})}},31912:(Q,A,e)=>{"use strict";e.d(A,{r:()=>n,w:()=>a});const n=i=>i.delegatable!==void 0&&!i.delegatable,a=i=>{const r="fixed:";if(!i.displayName&&i.name.startsWith(r)){let o="";o=i.name.replace(r,"").replace(/:/g," "),i.displayName=o}return i}},43286:(Q,A,e)=>{"use strict";e.d(A,{V:()=>d});var n=e(31733),a=e(55793),i=e(98827),r=e(79117);const o=2,g=5,u=E=>{const p=E.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return p?p[0]:null},c=E=>E.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[o],l=E=>{let p=c(E);if(!p){p=`x${(0,r.Z)()}`;const s=E.indexOf("<svg")+g;E=E.substring(0,s)+`id="${p}" `+E.substring(s)}let h=u(E);if(h){let s=h.replace(/(#(.*?))?\./g,`#${p} .`);E=E.replace(h,s)}return E},d=E=>{const{cleanStyle:p,...h}=E;return n.createElement(a.default,{...h,cacheRequests:!0,preProcessor:p?v:m})};let f=new Map;function m(E){let p=f.get(E);return p||(p=i.QX.sanitizeSVGContent(E),f.set(E,p)),p}function v(E){let p=f.get(E);return p||(p=i.QX.sanitizeSVGContent(E),p.indexOf('<style type="text/css">')>-1&&(p=l(p)),f.set(E,p)),p}},66368:(Q,A,e)=>{"use strict";e.d(A,{o:()=>l});var n=e(8806),a=e.n(n),i=e(31733),r=e(38834),o=e(41327);const g=(d="General",f)=>`${d}/${f}`;async function u(d=""){return o.ae.search({type:"dash-db",query:d,limit:100}).then(f=>f.map(m=>({value:{uid:m.uid,title:m.title,folderTitle:m.folderTitle,folderUid:m.folderUid},label:g(m?.folderTitle,m.title)})))}const c=a()(u,250,{leading:!0}),l=({value:d,onChange:f,placeholder:m="Select dashboard",noOptionsMessage:v="No dashboards found",...E})=>{const[p,h]=(0,i.useState)();(0,i.useEffect)(()=>{!d||d===p?.value?.uid||(async()=>{const y=await o.ae.getDashboardByUid(d);y.dashboard&&h({value:{uid:y.dashboard.uid,title:y.dashboard.title,folderTitle:y.meta.folderTitle,folderUid:y.meta.folderUid},label:g(y.meta?.folderTitle,y.dashboard.title)})})()},[d]);const s=(0,i.useCallback)(y=>{h(y),f?.(y?.value)},[f,h]);return i.createElement(r.qb,{loadOptions:c,onChange:s,placeholder:m,noOptionsMessage:v,value:p,defaultOptions:!0,...E})}},26371:(Q,A,e)=>{"use strict";e.d(A,{E:()=>ne});var n=e(31733),a=e(85498),i=e(76932),r=e(67537),o=e(69710),g=e(8496),u=e(59326),c=e(76067),l=e(64516),d=e(49311),f=e(25111),m=e(13069),v=e(53166),E=e(52368),p=e(60426),h=e(86021),s=e(83058),y=e(4502),D=e(82113),C=e(54359),P=e(49876),b=e(61231),T=e(97253),O=e(41354),R=e(36717),I=e(15130),M=e(42342);const x=40,L="md",S=(re,ge)=>`${re}-${ge||"root"}`;function U({items:re,focusedItemIndex:ge,foldersAreOpenable:q,idPrefix:me,selectedFolder:oe,onFolderExpand:fe,onFolderSelect:ve,isItemLoaded:pe,requestLoadMore:Me}){const Pe=(0,n.useRef)(null),Ee=(0,c.wW)(G),he=(0,n.useMemo)(()=>({items:re,focusedItemIndex:ge,foldersAreOpenable:q,selectedFolder:oe,onFolderExpand:fe,onFolderSelect:ve,idPrefix:me}),[re,ge,q,oe,fe,ve,me]),Le=(0,n.useCallback)(ot=>pe(ot),[pe]),ke=(0,n.useCallback)((ot,it)=>{const{parentUID:ce}=re[ot];Me(ce)},[Me,re]);return n.createElement("div",{className:Ee.table,role:"tree"},re.length>0?n.createElement(T.Z,{ref:Pe,itemCount:re.length,isItemLoaded:Le,loadMoreItems:ke},({onItemsRendered:ot,ref:it})=>n.createElement(b.t7,{ref:it,height:x*Math.min(6.5,re.length),width:"100%",itemData:he,itemSize:x,itemCount:re.length,onItemsRendered:ot},w)):n.createElement("div",{className:Ee.emptyMessage},n.createElement(v.cC,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const N=[100,200,130,160,150];function w({index:re,style:ge,data:q}){const{items:me,focusedItemIndex:oe,foldersAreOpenable:fe,selectedFolder:ve,onFolderExpand:pe,onFolderSelect:Me,idPrefix:Pe}=q,{item:Ee,isOpen:he,level:Le,parentUID:ke}=me[re],ot=(0,n.useRef)(null),it=(0,n.useId)(),ce=(0,M.useSelector)(h.hO),le=(0,M.useSelector)(h.MH),Re=(Ee.uid?le[Ee.uid]:ce)?.items??[];let Ae=[];Ee.uid&&(Ae=(ke?le[ke]:ce)?.items??[]);const Oe=(0,c.wW)(G),$e=(0,n.useCallback)(Ne=>{Ne.preventDefault(),Ne.stopPropagation(),Ee.uid&&pe(Ee.uid,!he)},[Ee.uid,he,pe]),Ye=(0,n.useCallback)(()=>{Ee.kind==="folder"&&Me(Ee)},[Ee,Me]);return Ee.kind==="ui"&&Ee.uiKind==="pagination-placeholder"?n.createElement("span",{style:ge,className:Oe.row},n.createElement(I.A,{level:Le,spacing:2}),n.createElement(P.Z,{width:N[re%N.length]})):Ee.kind!=="folder"?null:n.createElement("div",{ref:ot,style:ge,className:(0,i.cx)(Oe.row,{[Oe.rowFocused]:re===oe,[Oe.rowSelected]:Ee.uid===ve}),tabIndex:-1,onClick:Ye,"aria-expanded":he,"aria-selected":Ee.uid===ve,"aria-labelledby":it,"aria-level":Le+1,role:"treeitem","aria-owns":Re.length>0?Re.map(Ne=>S(Pe,Ne.uid)).join(" "):void 0,"aria-setsize":Re.length,"aria-posinset":Ae.findIndex(Ne=>Ne.uid===Ee.uid)+1,id:S(Pe,Ee.uid)},n.createElement("div",{className:Oe.rowBody},n.createElement(I.A,{level:Le,spacing:2}),fe?n.createElement(O.h,{size:L,onMouseDown:$e,tabIndex:-1,"aria-label":he?`Collapse folder ${Ee.title}`:`Expand folder ${Ee.title}`,name:he?"angle-down":"angle-right"}):n.createElement("span",{className:Oe.folderButtonSpacer}),n.createElement("label",{className:Oe.label,id:it},n.createElement(R.x,{truncate:!0},Ee.title))))}const G=re=>{const ge=(0,i.css)({height:x,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:re.spacing(.5),overflow:"hidden",padding:re.spacing(0,1)});return{table:(0,i.css)({background:re.components.input.background}),emptyMessage:(0,i.css)({padding:re.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,i.css)({paddingLeft:re.spacing(.5)}),row:(0,i.css)({display:"flex",position:"relative",alignItems:"center",[":not(:first-child)"]:{borderTop:`solid 1px ${re.colors.border.weak}`}}),rowFocused:(0,i.css)({backgroundColor:re.colors.background.secondary}),rowSelected:(0,i.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:re.shape.radius.default,backgroundImage:re.colors.gradients.brandVertical}}),rowBody:ge,label:(0,i.css)({lineHeight:x+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var _=e(83998);function K({isLoading:re,invalid:ge,label:q,...me},oe){const fe=(0,c.l4)(),ve=z(fe,ge);return n.createElement("div",{className:ve.wrapper},n.createElement("div",{className:ve.inputWrapper},q?n.createElement("div",{className:ve.prefix},n.createElement(d.J,{name:"folder"})):void 0,n.createElement("button",{type:"button",className:(0,i.cx)(ve.fakeInput,q?ve.hasPrefix:void 0),...me,ref:oe},re?n.createElement(P.Z,{width:100}):q?n.createElement(R.x,{truncate:!0},q):n.createElement(R.x,{truncate:!0,color:"secondary"},n.createElement(v.cC,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder"))),n.createElement("div",{className:ve.suffix},n.createElement(d.J,{name:"angle-down"}))))}const k=(0,n.forwardRef)(K),z=(re,ge=!1)=>{const q=(0,l.H)({theme:re,invalid:ge});return{wrapper:q.wrapper,inputWrapper:q.inputWrapper,prefix:(0,i.css)([q.prefix,{pointerEvents:"none",color:re.colors.text.primary}]),suffix:(0,i.css)([q.suffix,{pointerEvents:"none"}]),fakeInput:(0,i.css)([q.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,i.css)`
          ${(0,_.focusCss)(re)}
        `}]),hasPrefix:(0,i.css)({paddingLeft:28})}};function W({tree:re,handleCloseOverlay:ge,handleFolderSelect:q,handleFolderExpand:me,idPrefix:oe,search:fe,visible:ve}){const[pe,Me]=(0,n.useState)(-1),Pe=!!a.config.featureToggles.nestedFolders;(0,n.useEffect)(()=>{ve&&Me(-1)},[ve]),(0,n.useEffect)(()=>{Me(0)},[fe]),(0,n.useEffect)(()=>{document.getElementById(S(oe,re[pe]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[pe,oe,re]);const Ee=(0,n.useCallback)(he=>{const Le=Pe&&!fe;switch(he.key){case"ArrowRight":case"ArrowLeft":Le&&(he.preventDefault(),me(re[pe].item.uid,he.key==="ArrowRight"));break;case"ArrowUp":pe>0&&(he.preventDefault(),Me(pe-1));break;case"ArrowDown":pe<re.length-1&&(he.preventDefault(),Me(pe+1));break;case"Enter":he.preventDefault();const ke=re[pe].item;ke.kind==="folder"&&q(ke);break;case"Tab":he.stopPropagation(),ge();break;case"Escape":he.stopPropagation(),he.preventDefault(),ge();break}},[pe,ge,me,q,Pe,fe,re]);return{focusedItemIndex:pe,handleKeyDown:Ee}}const Z=["empty-folder","dashboard"];function H({value:re,invalid:ge,showRootFolder:q=!0,excludeUIDs:me,onChange:oe}){const fe=(0,c.wW)(X),ve=(0,C.I0)(),pe=(0,E.t4)(re||E.CN),Me=(0,h.zw)(void 0),Pe=!!a.config.featureToggles.nestedFolders,[Ee,he]=(0,n.useState)(""),[Le,ke]=(0,n.useState)(!1),[ot,it]=(0,n.useState)(!1),[ce,le]=(0,n.useState)({}),Re=(0,n.useId)(),[Ae]=(0,n.useState)(void 0),Oe=(0,u.Z)(async()=>{if(!Ee)return;const ft=await(0,y.getGrafanaSearcher)().search({query:Ee,kind:["folder"],limit:100}),yt=ft.view.map(wt=>(0,D.f9)(wt,ft.view));return{...ft,items:yt}},[Ee]),$e=(0,C.v9)(h.hO),Ye=(0,C.v9)(h.MH),Ne=[(0,r.RR)({crossAxis:!1,boundary:document.body})],{context:je,refs:ut,floatingStyles:Fe,elements:Te}=(0,o.YF)({open:ot,placement:"bottom",onOpenChange:lt=>{lt&&(he(""),ke(!0)),it(lt)},middleware:Ne,whileElementsMounted:g.Me}),Ve=(0,o.eS)(je),tt=(0,o.bQ)(je),{getReferenceProps:ae,getFloatingProps:J}=(0,o.NI)([tt,Ve]),te=(0,n.useCallback)(async(lt,ft)=>{le(yt=>({...yt,[lt]:ft})),ft&&!ce[lt]&&ve((0,h.si)({parentUID:lt,pageSize:p.IV,excludeKinds:Z}))},[ve,ce]),de=(0,n.useCallback)(lt=>{oe&&oe(lt.uid,lt.title),it(!1)},[oe]),be=(0,n.useCallback)(()=>it(!1),[it]),De=(0,h.D$)(Z),Ue=(0,n.useCallback)(lt=>{Ee||De(lt)},[Ee,De]),We=(0,n.useMemo)(()=>{const lt=Ee&&Oe.value;if(lt){const yt={isFullyLoaded:!0,lastKindHasMoreItems:!1,lastFetchedKind:"folder",lastFetchedPage:1,items:lt.items??[]};return(0,h.qO)(void 0,yt,Ye,{},0,Z,me)}let ft=(0,h.qO)(void 0,$e,Ye,ce,0,Z,me);if(q){for(const yt of ft)yt.level+=1;ft.unshift({isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}})}return $e||(ft=ft.concat((0,s.k)(p.IV,void 0,0))),ft},[Ee,Oe.value,$e,Ye,ce,me,q]),et=(0,n.useCallback)(lt=>{const ft=We[lt];if(!ft)return!1;const yt=ft.item;return!(yt.kind==="ui"&&yt.uiKind==="pagination-placeholder")},[We]),ze=Me==="pending"||Oe.loading,{focusedItemIndex:_e,handleKeyDown:qe}=W({tree:We,handleCloseOverlay:be,handleFolderSelect:de,handleFolderExpand:te,idPrefix:Re,search:Ee,visible:ot});let at=pe.data?.title;return re===""&&(at="Dashboards"),ot?n.createElement(n.Fragment,null,n.createElement(l.I,{ref:ut.setReference,autoFocus:!0,prefix:at?n.createElement(d.J,{name:"folder"}):null,placeholder:at??(0,v.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:Ee,invalid:ge,className:fe.search,onChange:lt=>he(lt.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":Re,"aria-owns":Re,"aria-activedescendant":S(Re,We[_e]?.item.uid),role:"combobox",suffix:n.createElement(d.J,{name:"search"}),...ae(),onKeyDown:qe}),n.createElement("fieldset",{ref:ut.setFloating,id:Re,className:fe.tableWrapper,style:{...Fe,width:Te.domReference?.clientWidth},...J()},Ae?n.createElement(f.b,{className:fe.error,severity:"warning",title:(0,v.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},Ae.message||Ae.toString?.()||(0,v.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):n.createElement("div",null,ze&&n.createElement("div",{className:fe.loader},n.createElement(m.F,{width:600})),n.createElement(U,{items:We,selectedFolder:re,focusedItemIndex:_e,onFolderExpand:te,onFolderSelect:de,idPrefix:Re,foldersAreOpenable:Pe&&!(Ee&&Oe.value),isItemLoaded:et,requestLoadMore:Ue})))):n.createElement(k,{label:at,invalid:ge,isLoading:pe.isLoading,autoFocus:Le,ref:ut.setReference,"aria-label":at?(0,v.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:at}):void 0,...ae()})}const X=re=>({button:(0,i.css)({maxWidth:"100%"}),error:(0,i.css)({marginBottom:0}),tableWrapper:(0,i.css)({boxShadow:re.shadows.z3,position:"relative",zIndex:re.zIndex.portal}),loader:(0,i.css)({position:"absolute",top:0,left:0,right:0,zIndex:re.zIndex.portal+1,overflow:"hidden"}),search:(0,i.css)({input:{cursor:"default"}})});var Y=e(33204);function ne(re){const ge=a.config.featureToggles.newFolderPicker||a.config.featureToggles.nestedFolders&&a.config.featureToggles.nestedFolderPicker,{initialTitle:q,dashboardId:me,enableCreateNew:oe,...fe}=re;return ge?n.createElement(H,{...fe}):n.createElement(se,{...re})}function se({value:re,showRootFolder:ge,onChange:q,initialTitle:me,dashboardId:oe,enableCreateNew:fe,inputId:ve,skipInitialLoad:pe}){const Me=(0,n.useCallback)(Pe=>{q&&q(Pe.uid,Pe.title)},[q]);return n.createElement(Y.Fz,{onChange:Me,showRoot:ge,initialFolderUid:re,initialTitle:me,inputId:ve,skipInitialLoad:pe,dashboardId:oe,enableCreateNew:fe})}},33204:(Q,A,e)=>{"use strict";e.d(A,{Fz:()=>D});var n=e(76932),a=e(8806),i=e.n(a),r=e(31733),o=e(59326),g=e(56821),u=e(21568),c=e(64704),l=e(76067),d=e(64516),f=e(38834),m=e(83599),v=e(53166),E=e(56811),p=e(51450),h=e(42342);const s="+ Add new",y="-10";function D(T){const{dashboardId:O,allowEmpty:R,onChange:I,filter:M,enableCreateNew:x,inputId:L,onClear:S,enableReset:U,initialFolderUid:N,initialTitle:w="",permissionLevel:G=h.PermissionLevelString.Edit,rootName:_,showRoot:K=!0,skipInitialLoad:k,searchQueryType:z,customAdd:W,folderWarning:Z}=T,H=_??"Dashboards",[X,Y]=(0,r.useState)(null),[ne,se]=(0,r.useState)(!1),[re,ge]=(0,r.useState)(""),[q,me]=(0,r.useState)(X?.title??""),oe=(0,l.wW)(b),fe=typeof S=="function",ve=(0,r.useCallback)(async le=>{const Re=await(0,p.ZL)(le,G,z),Oe=C(Re,M);return(0,c.ff)("grafana_folder_picker_results_loaded",{results:Oe.length,searchTermLength:le.length,enableCreateNew:!!x}),(E.contextSrv.hasPermission(h.AccessControlAction.DashboardsWrite)||E.contextSrv.hasPermission(h.AccessControlAction.DashboardsCreate))&&H?.toLowerCase().startsWith(le.toLowerCase())&&K&&Oe.unshift({label:H,value:""}),U&&le===""&&w!==""&&!Oe.find(Ye=>Ye.label===w)&&Oe.unshift({label:w,value:N}),x&&W?[...Oe,{value:y,label:s,title:le}]:Oe},[U,N,w,G,H,K,z,M,x,W]),pe=(0,r.useMemo)(()=>i()(ve,300,{leading:!0}),[ve]),Me=async()=>{const le={label:w,value:void 0},Re={label:H,value:""},Ae=await ve("");let Oe=null;N!=null?Oe=Ae.find($e=>$e.value===N)||null:U&&w?Oe=le:N&&(Oe=Ae.find($e=>$e.id===N)||null),!Oe&&!R&&(E.contextSrv.isEditor?Oe=Re:!!O?Oe=le:Oe=Ae.length>0?Ae[0]:le),!ne&&Y(Oe)};(0,r.useEffect)(()=>{X&&X.value!==N&&!ne&&X.value&&X.label&&I({uid:X.value,title:X.label})},[X,N]),(0,o.Z)(async()=>{if(k){const le=await P({getFolder:p.Pb,folderUid:N,folderName:w});Y(le)}await Me()},[k,N,w]),(0,r.useEffect)(()=>{X&&X.id===y&&se(!0)},[X]);const Pe=(0,r.useCallback)((le,Re)=>{if(le?.value===y)Y({id:y,title:re}),me(re);else{if(le||(le={value:"",label:H}),Re.action==="clear"&&S){S();return}Y(le),I({uid:le.value,title:le.label})}},[I,S,H,re]),Ee=(0,r.useCallback)(async le=>{if(Z?.warningCondition(le))return(0,c.ff)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const Re=await(0,p.L6)({title:le});let Ae={value:"",label:"Not created"};return Re.uid?((0,c.ff)("grafana_folder_picker_folder_created",{status:"success"}),m.Z.emit(g.SI.alertSuccess,["Folder Created","OK"]),Ae={value:Re.uid,label:Re.title},Y(Re),Pe(Ae,{action:"create-option",option:Ae})):((0,c.ff)("grafana_folder_picker_folder_created",{status:"failed"}),m.Z.emit(g.SI.alertError,["Folder could not be created"])),Ae},[Z,Pe]),he=(0,r.useCallback)(le=>{const Re=!!W?.disallowValues;if(le.key==="Enter"&&Re&&!W?.isAllowedValue(q)){le.preventDefault();return}switch(le.key){case"Enter":{Ee(X?.title),se(!1);break}case"Escape":Y({value:"",label:H}),se(!1)}},[W?.disallowValues,W?.isAllowedValue,q,Ee,X?.title,H]),Le=le=>{const Re=le.currentTarget.value;me(Re),Y({id:void 0,title:Re})},ke=()=>{Y({value:"",label:H}),se(!1)},ot=(le,{action:Re})=>{Re==="input-change"&&ge(Ae=>le),Re==="menu-close"&&ge(Ae=>le)},it=()=>Z?.warningCondition(q)?r.createElement(Z.warningComponent,null):null,ce=()=>Z?.warningCondition(re)?r.createElement(Z.warningComponent,null):null;return ne?r.createElement(r.Fragment,null,r.createElement(it,null),r.createElement("div",{className:oe.newFolder},"Press enter to create the new folder."),r.createElement(d.I,{width:30,autoFocus:!0,value:q,onChange:Le,onKeyDown:he,placeholder:"Press enter to confirm new folder.",onBlur:ke})):r.createElement("div",{"data-testid":u.wl.components.FolderPicker.containerV2},r.createElement(ce,null),r.createElement(f.gY,{inputId:L,"aria-label":u.wl.components.FolderPicker.input,loadingMessage:(0,v.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:X,inputValue:re,onInputChange:ot,value:X,allowCustomValue:x&&!W,loadOptions:pe,onChange:Pe,onCreateOption:Ee,isClearable:fe}))}function C(T,O){return(O?O(T):T).map(I=>({label:I.title,value:I.uid}))}async function P({folderName:T,folderUid:O,getFolder:R}){if(O==null)throw new Error("folderUid is not found.");return T?{label:T,value:O}:{label:(await R(O)).title,value:O}}const b=T=>({newFolder:(0,n.css)`
    color: ${T.colors.warning.main};
    font-size: ${T.typography.bodySmall.fontSize};
    padding-bottom: ${T.spacing(1)};
  `})},61504:(Q,A,e)=>{"use strict";e.d(A,{e:()=>r});var n=e(31733),a=e(7225),i=e(49311);class r extends n.Component{constructor(g){super(g)}render(){const{label:g,removeIcon:u,count:c,onClick:l}=this.props,{color:d}=(0,a.Bx)(g),f={backgroundColor:d},m=c!==0&&n.createElement("span",{className:"tag-count-label"},`(${c})`);return n.createElement("span",{className:"label label-tag",style:f},u&&n.createElement(i.J,{onClick:l,name:"times"}),g," ",m)}}},41374:(Q,A,e)=>{"use strict";e.d(A,{D:()=>v});var n=e(76932),a=e(31733),i=e(40166),r=e(84834),o=e(76067),g=e(38834),u=e(49311),c=e(53166),l=e(61504);const d=({data:p,className:h,label:s,isFocused:y,innerProps:D})=>{const C=(0,o.wW)(f);return a.createElement("div",{className:(0,n.cx)(C.option,y&&C.optionFocused),"aria-label":"Tag option",...D},a.createElement("div",{className:`tag-filter-option ${h||""}`},typeof s=="string"?a.createElement(l.e,{label:s,removeIcon:!1,count:p.count??0}):s))},f=p=>({option:(0,n.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${p.colors.background.secondary};
      }
    `,optionFocused:(0,n.css)`
      background: ${p.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),m=(p,h)=>RegExp((0,r.GE)(h),"i").test(p.value),v=({allowCustomValue:p=!1,formatCreateLabel:h,hideValues:s,inputId:y,isClearable:D,onChange:C,placeholder:P,tagOptions:b,tags:T,width:O})=>{const R=(0,o.wW)(E),I=T.map(Z=>({value:Z,label:Z,count:0})),[M,x]=(0,a.useState)(I),[L,S]=(0,a.useState)(!1),[U,N]=(0,a.useState)(T),[w,G]=(0,a.useState)(I),_=(0,a.useMemo)(()=>T.join(),[T]),K=(0,a.useCallback)(async()=>(await b()).map(H=>T.includes(H.term)?{value:H.term,label:H.term,count:0}:{value:H.term,label:H.term,count:H.count}),[b,T]),k=(0,a.useCallback)(async()=>{S(!0);const Z=await K();p&&w.forEach(H=>Z.push(H)),x(Z),S(!1)},[p,w,K]);(0,a.useEffect)(()=>{T.length>0&&M.length===0&&k()},[k,M.length,T.length]),(0,a.useEffect)(()=>{T!==U&&(N(T),k())},[k,U,T]);const z=Z=>{Z.forEach(H=>H.count=0),C((Z||[]).map(H=>H.value)),p&&G(Z.filter(H=>!T.includes(H)))},W={key:_,onFocus:k,isLoading:L,options:M,allowCreateWhileLoading:!0,allowCustomValue:p,formatCreateLabel:h,defaultOptions:!0,filterOption:m,getOptionLabel:Z=>Z.label,getOptionValue:Z=>Z.value,inputId:y,isMulti:!0,onChange:z,loadingMessage:(0,c.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,c.t)("tag-filter.no-tags","No tags found"),placeholder:P||(0,c.t)("tag-filter.placeholder","Filter by tag"),value:I,width:O,components:{Option:d,MultiValueLabel:()=>null,MultiValueRemove(Z){const{data:H}=Z;return a.createElement(i.c.MultiValueRemove,{...Z},a.createElement(l.e,{key:H.label,label:H.label,removeIcon:!0,count:H.count}))},MultiValueContainer:s?()=>null:i.c.MultiValueContainer}};return a.createElement("div",{className:R.tagFilter},D&&T.length>0&&a.createElement("button",{className:R.clear,onClick:()=>z([])},"Clear tags"),a.createElement(g.NU,{...W,prefix:a.createElement(u.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};v.displayName="TagFilter";const E=p=>({tagFilter:(0,n.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,n.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${p.colors.text.secondary};

    &:hover {
      color: ${p.colors.text.primary};
    }
  `})},95822:(Q,A,e)=>{"use strict";e.d(A,{a:()=>l});var n=e(69781),a=e.n(n),i=e(31733),r=e(17201),o=e(74011),g=e(20848),u=e(85853);const c="grafana.dashboard.timepicker.history",l=p=>i.createElement(u.G,{storageKey:c,defaultValue:[]},(h,s)=>{const y=f(h),D=d(y);return i.createElement(g.Xc,{...p,history:D,onChange:C=>{m(C,y,s),p.onChange(C)}})});function d(p){return p.map(h=>r.convertRawToRange(h,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function f(p){return p.map(h=>{const s=typeof h.from=="string"?h.from:h.from.toISOString(),y=typeof h.to=="string"?h.to:h.to.toISOString();return{from:s,to:y}})}function m(p,h,s){if(!v(p))return;const y={from:typeof p.raw.from=="string"?p.raw.from:p.raw.from.toISOString(),to:typeof p.raw.to=="string"?p.raw.to:p.raw.to.toISOString()},D=E([y,...h]);s(D)}function v(p){return(0,o.v9)(p.raw.from)||(0,o.v9)(p.raw.to)}function E(p){return(0,n.uniqBy)(p,h=>h.from+h.to).slice(0,4)}},36395:(Q,A,e)=>{"use strict";e.d(A,{K:()=>d});var n=e(31733),a=e(91507),i=e(85666),r=e(66246),o=e(34588),g=e(43348),u=e(72680),c=e(11056);const l=["rowHeight","colWidth","showValue","mergeValues","alignValue","tooltip"];class d extends n.Component{constructor(){super(...arguments),this.getValueColor=(m,v,E)=>{const p=this.props.frames[m].fields[v];if(p.display){const h=p.display(E);if(h.color)return h.color}return a.R},this.prepConfig=(m,v,E)=>{this.panelContext=this.context;const{eventBus:p,sync:h}=this.panelContext;return(0,c.Nj)({frame:m,getTimeRange:E,eventBus:p,sync:h,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:m.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=m=>{const{legend:v,legendItems:E}=this.props;return!m||!E||!v||v.showLegend===!1?null:n.createElement(r.AY.Legend,{placement:v.placement},n.createElement(o.l,{placement:v.placement,items:E,displayMode:v.displayMode,readonly:!0}))}}render(){return n.createElement(u.d,{...this.props,fields:{x:m=>m.type===i.fS.time,y:m=>m.type===i.fS.number||m.type===i.fS.boolean||m.type===i.fS.string||m.type===i.fS.enum},prepConfig:this.prepConfig,propsToDiff:l,renderLegend:this.renderLegend})}}d.contextType=g.bb},11056:(Q,A,e)=>{"use strict";e.d(A,{KN:()=>U,iK:()=>ne,Y:()=>se,$m:()=>X,Ur:()=>Z,Nj:()=>G,AR:()=>W,SA:()=>H});var n=e(91507),a=e(27957),i=e(86850),r=e(42692),o=e(93670),g=e(85666),u=e(47423),c=e(56106),l=e(27369),d=e(96609),f=e(63621),m=e(95164),v=e(27546),E=e(71199),p=e(50282),h=e(18700),s=e(80431),y=e(35560),D=e(77081),C=e(1383),P=e(17473);const{round:b,min:T,ceil:O}=Math,R=2;let I=6;const M=C.Gj;function x(re,ge,q,me,oe){(0,C.Qm)(q,re,M,ge,(fe,ve,pe)=>{let Me=me*ve,Pe=me*pe;oe(fe,Me,Pe)})}function L(re){const{mode:ge,numSeries:q,isDiscrete:me,hasMappedNull:oe,rowHeight:fe=0,colWidth:ve=0,showValue:pe,mergeValues:Me=!1,theme:Pe,label:Ee,formatValue:he,alignValue:Le="left",getTimeRange:ke,getValueColor:ot,getFieldConfig:it,onHover:ce,onLeave:le}=re;let Re,Ae;const Oe=qe=>{Ae=Array(q).fill(null).map(at=>Array(qe).fill(null))},$e=`500 ${Math.round(12*devicePixelRatio)}px ${Pe.typography.fontFamily}`,Ye=Array(q).fill(null);let Ne=null;const je=[ve,1/0],ut=1-je[0],Fe=(je[1]??1/0)*y.Z.pxRatio,Te=new Map,Ve=new Map;function tt(qe){Te.forEach((at,lt)=>{qe.fillStyle=lt,qe.fill(at)}),Ve.forEach((at,lt)=>{qe.strokeStyle=lt,qe.stroke(at)}),Te.clear(),Ve.clear()}function ae(qe,at,lt,ft,yt,wt,zt,$t,Ie,st,Mt,ct,nt){if(zt<1)return;const Ct=ot(st+1,ct),kt=it(st),Jt=S(kt,Ct);if(Ae[st][Mt]={x:b(yt-lt),y:b(wt-ft),w:zt,h:$t,sidx:st+1,didx:Mt,fillColor:Jt},nt){let tn=Jt,Kt=Te.get(tn);if(Kt==null&&Te.set(tn,Kt=new Path2D),at(Kt,yt,wt,zt,$t),Ie){let cn=Ct,dn=Ve.get(cn);dn==null&&Ve.set(cn,dn=new Path2D),at(dn,yt+Ie/2,wt+Ie/2,zt-Ie,$t-Ie)}}else qe.beginPath(),at(qe,yt,wt,zt,$t),qe.fillStyle=Jt,qe.fill(),Ie&&(qe.beginPath(),at(qe,yt+Ie/2,wt+Ie/2,zt-Ie,$t-Ie),qe.strokeStyle=Ct,qe.lineWidth=Ie,qe.stroke())}const J=(qe,at,lt,ft)=>(y.Z.orient(qe,at,(yt,wt,zt,$t,Ie,st,Mt,ct,nt,Ct,kt,Jt,tn,Kt)=>{let cn=b((yt.width||0)*y.Z.pxRatio),dn=me(at),Sn=dn&&oe(at);qe.ctx.save(),Kt(qe.ctx,qe.bbox.left,qe.bbox.top,qe.bbox.width,qe.bbox.height),qe.ctx.clip(),x(fe,at-1,q,kt,(Zn,_n,Ut)=>{if(ge===U.Changes)for(let Xt=0;Xt<zt.length;Xt++){let en=zt[Xt];if(en!=null||Sn){let gn=Math.round(st(wt[Xt],$t,Ct,ct)),ln=Xt;for(;++ln<zt.length&&(zt[ln]===void 0||Me&&zt[ln]===en););let xn=ln===zt.length?ct+Ct+cn:Math.round(st(wt[ln],$t,Ct,ct));ae(qe.ctx,Kt,ct,nt,gn,b(nt+_n),xn-gn,b(Ut),cn,Zn,Xt,en,dn),Xt=ln-1}}else if(ge===U.Samples){let Xt=st(wt[1],$t,Ct,ct)-st(wt[0],$t,Ct,ct),en=Xt*ut,gn=b(T(Fe,Xt-en)-cn),ln=gn/2;for(let xn=lt;xn<=ft;xn++){let Dn=zt[xn];if(Dn!=null||Sn){let Ln=st(wt[xn],$t,Ct,ct);ae(qe.ctx,Kt,ct,nt,b(Ln-ln),b(nt+_n),gn,b(Ut),cn,Zn,xn,Dn,dn)}}}}),dn&&(qe.ctx.lineWidth=cn,tt(qe.ctx)),qe.ctx.restore()}),null),te=he==null||pe===E.Jp.Never?!1:(qe,at,lt,ft)=>(qe.ctx.save(),qe.ctx.rect(qe.bbox.left,qe.bbox.top,qe.bbox.width,qe.bbox.height),qe.ctx.clip(),qe.ctx.font=$e,qe.ctx.textAlign=ge===U.Changes?Le:"center",qe.ctx.textBaseline="middle",y.Z.orient(qe,at,(yt,wt,zt,$t,Ie,st,Mt,ct,nt,Ct,kt)=>{let Jt=b((yt.width||0)*y.Z.pxRatio),Kt=me(at)&&oe(at),cn=b(nt+et[at-1]);for(let dn=0;dn<zt.length;dn++)if(zt[dn]!=null||Kt){const Sn=Ae[at-1][dn];if(!Sn||Sn.x>=Ct)continue;let Zn=Math.floor(Sn?.w/I);if(pe===E.Jp.Auto&&Zn<2)continue;let _n=he(at,zt[dn]),Ut=b(Sn.x+ct+Sn.w/2);ge===U.Changes&&(Le==="left"?Ut=b(Sn.x+ct+Jt+R):Le==="right"&&(Ut=b(Sn.x+ct+Sn.w-Jt-R))),qe.ctx.fillStyle=Pe.colors.getContrastText(Sn.fillColor,3),qe.ctx.fillText(_n.slice(0,Zn),Ut,cn)}}),qe.ctx.restore(),!1),de=qe=>{let at="";for(let lt=32;lt<=126;lt++)at+=String.fromCharCode(lt);I=Math.ceil(qe.ctx.measureText(at).width/at.length*y.Z.pxRatio),I+=2.5,qe.root.querySelectorAll(".u-cursor-pt").forEach(lt=>{lt.style.borderRadius="0"})},be=qe=>{Re=Re||new P.lW(0,0,qe.bbox.width,qe.bbox.height),Re.clear(),Oe(qe.data[0].length),qe.series.forEach(at=>{at._paths=null})};function De(qe,at,lt){if(Ye.fill(null),Ne=null,!(qe<0))for(let ft=0;ft<lt.length;ft++){let yt=lt[ft];Re.get(qe,yt,1,1,wt=>{(0,P.Pn)(qe,yt,wt.x,wt.y,wt.x+wt.w,wt.y+wt.h)&&(Ye[wt.sidx]=wt,Math.abs(at-yt)<=wt.h/2&&(Ne=wt))})}}const Ue=ge===U.Changes,We={x:ge===U.Changes,y:!1,dataIdx:(qe,at)=>{if(at===1){if(Re.o.length===0&&Re.q==null)for(const wt of Ae)for(const zt of wt)zt&&Re.add(zt);let lt=qe.cursor.left*y.Z.pxRatio,ft=qe.cursor.top*y.Z.pxRatio,yt=Ne;De(lt,ft,Ue?et:[ft]),Ne!=null?Ne!==yt&&ce(Ne.sidx,Ne.didx,Ne):yt!=null&&le()}return Ye[at]?.didx},focus:{prox:1e3,dist:(qe,at)=>Ne?.sidx===at?0:1/0},points:{fill:"rgba(255,255,255,0.2)",bbox:(qe,at)=>{let lt=Ye[at],ft=lt!=null;return{left:ft?lt.x/y.Z.pxRatio:-10,top:ft?lt.y/y.Z.pxRatio:-10,width:ft?lt.w/y.Z.pxRatio:0,height:ft?lt.h/y.Z.pxRatio:0}}}},et=Array(q).fill(0),ze=Array(q).fill(0),_e=[0,1];return{cursor:We,xSplits:ge===U.Samples?(qe,at,lt,ft,yt,wt)=>{let zt=[],$t=qe.data[0][1]-qe.data[0][0],Ie=O(yt/$t);for(let st=0;st<qe.data[0].length;st+=Ie){let Mt=qe.data[0][st];Mt>=lt&&Mt<=ft&&zt.push(Mt)}return zt}:null,xRange:qe=>{const at=ke();let lt=at.from.valueOf(),ft=at.to.valueOf();if(ge===U.Samples){let zt=(qe.data[0][1]-qe.data[0][0])/2;lt<=qe.data[0][0]&&(lt=qe.data[0][0]-zt);let $t=qe.data[0].length-1;ft>=qe.data[0][$t]&&(ft=qe.data[0][$t]+zt)}return[lt,ft]},ySplits:qe=>(x(fe,null,q,qe.bbox.height,(at,lt,ft)=>{et[at]=b(lt+ft/2),ze[at]=qe.posToVal(et[at]/y.Z.pxRatio,h.j)}),ze),yValues:(qe,at)=>at.map((lt,ft)=>Ee(ft+1)),yRange:_e,drawPaths:J,drawPoints:te,init:de,drawClear:be}}function S(re,ge){if(ge[0]==="#"&&ge.length===9)return ge;const q=(re.fillOpacity??100)/100;return(0,D.alpha)(ge,q)}var U=(re=>(re.Changes="changes",re.Samples="samples",re))(U||{});const N={lineWidth:0,fillOpacity:80};function w(re){return re.ctrlKey||re.metaKey||re.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const G=({frame:re,theme:ge,timeZones:q,getTimeRange:me,mode:oe,eventBus:fe,sync:ve,rowHeight:pe,colWidth:Me,showValue:Pe,alignValue:Ee,mergeValues:he,getValueColor:Le,eventsScope:ke="__global_"})=>{const ot=new p.U(q[0]),it="time",ce="x",le=Ve=>{const tt=Ve.config?.color?.mode;return!(tt&&Ve.display&&tt.startsWith("continuous-"))},Re=Ve=>Ve.config.mappings?.some(tt=>tt.type===v.Hi.SpecialValue&&tt.options.match==="null")||!1,Ae=(Ve,tt)=>{const ae=re.fields[Ve];return ae.state?.origin?.fieldIndex!==void 0&&ae.state?.origin?.frameIndex!==void 0&&Le?Le(ae.state?.origin?.frameIndex,ae.state?.origin?.fieldIndex,tt):n.R},Oe={mode:oe,numSeries:re.fields.length-1,isDiscrete:Ve=>le(re.fields[Ve]),hasMappedNull:Ve=>Re(re.fields[Ve]),mergeValues:he,rowHeight:pe,colWidth:Me,showValue:Pe,alignValue:Ee,theme:ge,label:Ve=>(0,a.CZ)(re.fields[Ve],re),getFieldConfig:Ve=>re.fields[Ve].config.custom,getValueColor:Ae,getTimeRange:me,formatValue:(Ve,tt)=>(0,i.zc)(re.fields[Ve].display(tt)),onHover:(Ve,tt)=>{Ye=Ve,Ne=tt,$e=!0},onLeave:()=>{Ye=null,Ne=null,$e=!0}};let $e=!1,Ye=null,Ne=null;const je=L(Oe),ut={point:{[it]:null,[h.j]:null},data:re};ot.addHook("init",je.init),ot.addHook("drawClear",je.drawClear);const Fe=(Ve,tt,ae)=>{$e&&(Ye!=null&&(Ve(Ye),tt(Ne)),$e=!1),ae(Ye==null)};ot.setTooltipInterpolator(Fe),ot.setPrepData(Ve=>(0,s.Bj)(Ve[0],(0,s.i7)(Ve[0]))),ot.setCursor(je.cursor),ot.addScale({scaleKey:ce,isTime:!0,orientation:E.wN.Horizontal,direction:E.bQ.Right,range:je.xRange}),ot.addScale({scaleKey:h.j,isTime:!1,orientation:E.wN.Vertical,direction:E.bQ.Up,range:je.yRange}),ot.addAxis({scaleKey:ce,isTime:!0,splits:je.xSplits,placement:E.LB.Bottom,timeZone:q[0],theme:ge,grid:{show:!0}}),ot.addAxis({scaleKey:h.j,isTime:!1,placement:E.LB.Left,splits:je.ySplits,values:je.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:ge});let Te=0;for(let Ve=0;Ve<re.fields.length;Ve++){if(Ve===0)continue;const tt=re.fields[Ve],ae=tt.config,J={...N,...ae.custom};tt.state.seriesIndex=Te++,ot.addSeries({scaleKey:h.j,pathBuilder:je.drawPaths,pointsBuilder:je.drawPoints,lineWidth:J.lineWidth,fillOpacity:J.fillOpacity,theme:ge,show:!J.hideFrom?.viz,thresholds:ae.thresholds,dataFrameFieldIndex:tt.state?.origin})}if(ve&&ve()!==r.m.Off){let Ve={};Ve.sync={key:ke,filters:{pub:(tt,ae,J,te,de,be,De)=>ve&&ve()===r.m.Off?!1:(ut.rowIndex=De,J<0&&te<0?(ut.point[it]=null,ut.point[h.j]=null,fe.publish(new o.xH)):(ut.point[it]=ae.posToVal(J,ce),ut.point.panelRelY=te>0?te/be:1,ut.down=void 0,fe.publish(new o.es(ut))),!0)},scales:[ce,null]},ot.setSync(),ot.setCursor(Ve)}return ot};function _(re){const ge=new Map;for(let q=0;q<re.fields.length;q++)ge.set(getFieldDisplayName(re.fields[q],re),q);return ge}function K(re){let ge=re[0],q;for(let me=1;me<re.length;me++){let oe=re[me];oe===null?ge=null:oe===ge?(q||(q=[...re]),q[me]=void 0):oe!=null&&(ge=oe)}return q}function k(re){let ge=re.config.custom?.spanNulls;return ge?ge===!0?1/0:ge:-1}function z(re,ge){const q=re.config.thresholds;if(re.type!==g.fS.number||!q||!q.steps.length)return;const me=Z(re.config,ge);if(me.length!==q.steps.length)return;const oe=new Map,fe=new Map;for(let Me=0;Me<me.length;Me++)oe.set(q.steps[Me],me[Me].label),fe.set(me[Me].label,me[Me].color);let ve=re.values;const pe=new Array(re.values.length);if(q.mode===u.H.Percentage){const{min:Me,max:Pe}=(0,c.xD)(re),Ee=Pe-Me;ve=ve.map(he=>he==null?he:(he-Me)/Ee*100)}for(let Me=0;Me<pe.length;Me++){const Pe=ve[Me];Pe==null?pe[Me]=Pe:pe[Me]=oe.get((0,l.m1)(Pe,q.steps))}return{...re,config:{...re.config,custom:{...re.config.custom,spanNulls:k(re)}},type:g.fS.string,values:pe,display:Me=>({text:String(Me),color:fe.get(String(Me)),numeric:NaN})}}function W(re,ge,q,me){if(!re?.length)return{warn:"No data in response"};let oe=!1;const fe=[];for(let ve of re){let pe=!1,Me=!1,Pe=(0,d.Y3)(ve,ve.fields.findIndex(Le=>Le.type===g.fS.time)),Ee=(0,f.w)({frame:Pe,refFieldPseudoMin:q.from.valueOf(),refFieldPseudoMax:q.to.valueOf()});Ee!==ve&&(Me=!0);const he=[];for(let Le of(0,m.I)(Ee).fields)if(!Le.config.custom?.hideFrom?.viz)switch(Le.type){case g.fS.time:pe=!0,oe=!0,he.push(Le);break;case g.fS.enum:case g.fS.number:if(ge&&Le.config.color?.mode===n.S.Thresholds){const ke=z(Le,me);if(ke){he.push(ke),Me=!0;continue}}case g.fS.boolean:case g.fS.string:Le={...Le,config:{...Le.config,custom:{...Le.config.custom,spanNulls:k(Le)}}},he.push(Le);break;default:Me=!0}pe&&he.length>1&&(oe=!0,Me?fe.push({...Pe,fields:he}):fe.push(Pe))}return oe?fe.length?{frames:fe}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function Z(re,ge){const q=[],me=re.thresholds;if(!me||!me.steps.length)return q;const oe=me.steps,fe=(0,i.Cf)(me.mode===u.H.Percentage?"percent":re.unit??""),ve=pe=>(0,i.zc)(fe(pe,re.decimals??void 0));for(let pe=0;pe<oe.length;pe++){let Me=oe[pe],Pe=Me.value,Ee="",he="";Pe===-1/0&&pe<oe.length-1?(Pe=oe[pe+1].value,Ee="< "):he="+",q.push({label:`${Ee}${ve(Pe)}${he}`,color:ge.visualization.getColorByName(Me.color),yAxis:1})}return q}function H(re,ge,q){if(!(!re||ge.showLegend===!1))return X(Y(re),q)}function X(re,ge){if(!re.length)return;const q=[],me=re[0].config,oe=me.color?.mode??n.S.Fixed,fe=me.thresholds;if(oe===n.S.Thresholds&&fe?.steps&&fe.steps.length>1)return Z(me,ge);if(oe.startsWith("continuous"))return;const ve=new Map;return re.forEach(pe=>{pe.config.custom?.hideFrom?.legend||pe.values.forEach(Me=>{let Pe=pe.display(Me);Pe.color&&ve.set(Pe.text,Pe.color)})}),ve.forEach((pe,Me)=>{Me.length>0&&q.push({label:Me,color:ge.visualization.getColorByName(pe??n.R),yAxis:1})}),q}function Y(re){const ge=[];for(const q of re)for(const me of q.fields)me.type!==g.fS.time&&ge.push(me);return ge}function ne(re,ge){let q,me=ge+1;if(me>=re.values.length)return null;const oe=re.values[ge];for(;q===void 0;){if(me>=re.values.length)return null;const fe=re.values[me];fe===void 0||fe===oe?me++:q=me}return q}function se(re){if(re<0||Number.isNaN(re))return"";let ge,q,me,oe,fe,ve,pe,Me;return pe=Math.floor(re/1e3),ve=Math.floor(pe/60),pe=pe%60,fe=Math.floor(ve/60),ve=ve%60,oe=Math.floor(fe/24),fe=fe%24,ge=Math.floor(oe/365),ge>0&&(oe=oe%365),q=Math.floor(oe/30),q>0&&(oe=oe%30),me=Math.floor(oe/7),me>0&&(oe=oe%7),Me=Math.round(re%1e3*1e3)/1e3,(ge>0?ge+"y "+(q>0?q+"mo ":"")+(me>0?me+"w ":"")+(oe>0?oe+"d ":""):q>0?q+"mo "+(me>0?me+"w ":"")+(oe>0?oe+"d ":""):me>0?me+"w "+(oe>0?oe+"d ":""):oe>0?oe+"d "+(fe>0?fe+"h ":""):fe>0?fe+"h "+(ve>0?ve+"m ":""):ve>0?ve+"m "+(pe>0?pe+"s ":""):pe>0?pe+"s "+(Me>0?Me+"ms ":""):Me>0?Me+"ms ":"0").trim()}},69256:(Q,A,e)=>{"use strict";e.d(A,{a:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(70897),o=e(20888),g=e(73351);const u="none",c=({values:d,onChange:f,id:m})=>{const v=(0,i.wW)(l);return a.createElement("div",{className:v.wrapper},d.length?d.map((E,p)=>a.createElement("div",{className:v.pair,key:p},a.createElement(r.X,{id:`${m}-key-${p}`,placeholder:"Tag name",value:E.key,onChange:h=>{f(d.map((s,y)=>y===p?{...s,key:String(h)}:s))}}),a.createElement(o.W,{"aria-label":"equals",className:v.operator},"as"),a.createElement(r.X,{id:`${m}-value-${p}`,placeholder:"New name (optional)",value:E.value||"",onChange:h=>{f(d.map((s,y)=>y===p?{...s,value:String(h)}:s))}}),a.createElement(g.h,{onClick:()=>f([...d.slice(0,p),...d.slice(p+1)]),className:(0,n.cx)(v.removeTag,"query-part"),"aria-label":"Remove tag",variant:u,type:"button",icon:"times"}),p===d.length-1?a.createElement(g.h,{onClick:()=>f([...d,{key:"",value:""}]),className:"query-part","aria-label":"Add tag",type:"button",variant:u,icon:"plus"}):null)):a.createElement(g.h,{icon:"plus",onClick:()=>f([...d,{key:"",value:""}]),className:"query-part","aria-label":"Add tag",type:"button",variant:u}))},l=d=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",gap:`${d.spacing(.5)} 0`}),pair:(0,n.css)({display:"flex",justifyContent:"start",alignItems:"center"}),operator:(0,n.css)({color:d.v1.palette.orange,width:"auto"}),removeTag:(0,n.css)({marginRight:d.spacing(.5)})})},42302:(Q,A,e)=>{"use strict";e.d(A,{Ny:()=>s,dw:()=>y,mH:()=>p,p1:()=>m,rr:()=>h});var n=e(76932),a=e(31733),i=e(83717),r=e(47701),o=e(41164),g=e(76772),u=e(64516),c=e(5936),l=e(79228),d=e(4200),f=e(69256);function m(D){if(D?.tracesToLogsV2)return D.tracesToLogsV2;if(!D?.tracesToLogs)return;const C={customQuery:!1};return C.datasourceUid=D.tracesToLogs.datasourceUid,C.tags=D.tracesToLogs.mapTagNamesEnabled?D.tracesToLogs.mappedTags:D.tracesToLogs.tags?.map(P=>({key:P})),C.filterByTraceID=D.tracesToLogs.filterByTraceID,C.filterBySpanID=D.tracesToLogs.filterBySpanID,C.spanStartTimeShift=D.tracesToLogs.spanStartTimeShift,C.spanEndTimeShift=D.tracesToLogs.spanEndTimeShift,C}function v({options:D,onOptionsChange:C}){const P=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],b=(0,a.useMemo)(()=>m(D.jsonData)||{customQuery:!1},[D.jsonData]),{query:T="",tags:O,customQuery:R}=b,I=(0,a.useCallback)(M=>{C({...D,jsonData:{...D.jsonData,tracesToLogsV2:{...b,...M},tracesToLogs:void 0}})},[C,D,b]);return a.createElement("div",{className:(0,n.css)({width:"100%"})},a.createElement(r.Z,null,a.createElement(o._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},a.createElement(l.q,{inputId:"trace-to-logs-data-source-picker",filter:M=>P.includes(M.type),current:b.datasourceUid,noDefault:!0,width:40,onChange:M=>I({datasourceUid:M.uid})}))),a.createElement(r.Z,null,a.createElement(d.w,{label:p("start"),tooltip:h("start","0"),value:b.spanStartTimeShift||"",onChange:M=>{I({spanStartTimeShift:M})},isInvalidError:s})),a.createElement(r.Z,null,a.createElement(d.w,{label:p("end"),tooltip:h("end","0"),value:b.spanEndTimeShift||"",onChange:M=>{I({spanEndTimeShift:M})},isInvalidError:s})),a.createElement(r.Z,null,a.createElement(o._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod', 'service.name', 'service.namespace'",label:"Tags",labelWidth:26},a.createElement(f.a,{values:O??[],onChange:M=>I({tags:M})}))),a.createElement(E,{disabled:R,type:"trace",id:"filterByTraceID",value:!!b.filterByTraceID,onChange:M=>I({filterByTraceID:M})}),a.createElement(E,{disabled:R,type:"span",id:"filterBySpanID",value:!!b.filterBySpanID,onChange:M=>I({filterBySpanID:M})}),a.createElement(r.Z,null,a.createElement(o._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},a.createElement(g.x,{id:"customQuerySwitch",value:R,onChange:M=>I({customQuery:M.currentTarget.checked})}))),R&&a.createElement(o._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},a.createElement(u.I,{label:"Query",type:"text",allowFullScreen:!0,value:T,onChange:M=>I({query:M.currentTarget.value})})))}function E(D){return a.createElement(r.Z,null,a.createElement(o._,{disabled:D.disabled,label:`Filter by ${D.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${D.type} ID`},a.createElement(g.x,{id:D.id,value:D.value,onChange:C=>D.onChange(C.currentTarget.checked)})))}const p=D=>`Span ${D} time shift`,h=(D,C)=>`Shifts the ${D} time of the span. Default: ${C} (Time units can be used here, for example: 5s, -1m, 3h)`,s="Invalid time shift. See tooltip for examples.",y=({options:D,onOptionsChange:C})=>{let P=D.type;return P+=D.type==="tempo"?"/configure-tempo-data-source/#trace-to-logs":"/#trace-to-logs",a.createElement(i.K,{title:"Trace to logs",description:a.createElement(c.W,{description:"Navigate from a trace span to the selected data source's logs.",suffix:P,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},a.createElement(v,{options:D,onOptionsChange:C}))}},13807:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>o});var n=e(76932),a=e(31733),i=e(64704),r=e(76067);const o=({text:u="PRO",className:c,experimentId:l,eventVariant:d="",...f})=>{const m=(0,r.wW)(g);return(0,a.useEffect)(()=>{l&&(0,i.SZ)(l,"test",d)},[l,d]),a.createElement("span",{className:(0,n.cx)(m.badge,c),...f},u)},g=u=>({badge:(0,n.css)`
      margin-left: ${u.spacing(1.25)};
      border-radius: ${u.shape.borderRadius(5)};
      background-color: ${u.colors.success.main};
      padding: ${u.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${u.typography.fontWeightMedium};
      font-size: ${u.typography.pxToRem(10)};
    `})},96190:(Q,A,e)=>{"use strict";e.d(A,{B:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(5572),o=e(53166),g=e(20154);const u=d=>[{category:(0,o.t)("help-modal.shortcuts-category.global","Global"),shortcuts:[{keys:["g","h"],description:(0,o.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,o.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,o.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,o.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:[`${d} + k`],description:(0,o.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,o.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:["h"],description:(0,o.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,o.t)("help-modal.shortcuts-description.change-theme","Change theme")}]},{category:(0,o.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${d}+s`],description:(0,o.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,o.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,o.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,o.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,o.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","E"],description:(0,o.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","C"],description:(0,o.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,o.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${d} + o`],description:(0,o.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,o.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,o.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,o.t)("help-modal.shortcuts-category.focused-panel","Focused Panel"),shortcuts:[{keys:["e"],description:(0,o.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,o.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","s"],description:(0,o.t)("help-modal.shortcuts-description.open-shared-modal","Open Panel Share Modal")},{keys:["p","d"],description:(0,o.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,o.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,o.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]},{category:(0,o.t)("help-modal.shortcuts-category.time-range","Time Range"),shortcuts:[{keys:["t","z"],description:(0,o.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,o.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,o.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,o.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")}]}],c=({onDismiss:d})=>{const f=(0,i.wW)(l),m=(0,a.useMemo)(()=>(0,g.vl)(),[]),v=(0,a.useMemo)(()=>u(m),[m]);return a.createElement(r.u,{title:(0,o.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:d,onClickBackdrop:d},a.createElement("div",{className:f.categories},Object.values(v).map(({category:E,shortcuts:p},h)=>a.createElement("div",{className:f.shortcutCategory,key:h},a.createElement("table",{className:f.shortcutTable},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",{className:f.shortcutTableCategoryHeader,colSpan:2},E)),p.map((s,y)=>a.createElement("tr",{key:`${h}-${y}`},a.createElement("td",{className:f.shortcutTableKeys},s.keys.map((D,C)=>a.createElement("span",{className:f.shortcutTableKey,key:`${h}-${y}-${C}`},D))),a.createElement("td",{className:f.shortcutTableDescription},s.description)))))))))};function l(d){return{titleDescription:(0,n.css)`
      font-size: ${d.typography.bodySmall.fontSize};
      font-weight: ${d.typography.bodySmall.fontWeight};
      color: ${d.colors.text.disabled};
      padding-bottom: ${d.spacing(2)};
    `,categories:(0,n.css)`
      font-size: ${d.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:(0,n.css)`
      width: 50%;
      font-size: ${d.typography.bodySmall.fontSize};
    `,shortcutTable:(0,n.css)`
      margin-bottom: ${d.spacing(2)};
    `,shortcutTableCategoryHeader:(0,n.css)`
      font-weight: normal;
      font-size: ${d.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:(0,n.css)`
      text-align: left;
      color: ${d.colors.text.disabled};
      width: 99%;
      padding: ${d.spacing(1,2)};
    `,shortcutTableKeys:(0,n.css)`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${d.colors.text.primary};
    `,shortcutTableKey:(0,n.css)`
      display: inline-block;
      text-align: center;
      margin-right: ${d.spacing(.5)};
      padding: 3px 5px;
      font:
        11px Consolas,
        'Liberation Mono',
        Menlo,
        Courier,
        monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${d.colors.border.medium};
      border-radius: ${d.shape.borderRadius(3)};
      color: ${d.colors.text.primary};
      background-color: ${d.colors.background.secondary};
    `}}},83811:(Q,A,e)=>{"use strict";e.d(A,{Oh:()=>u,config:()=>a.config,default:()=>r,iE:()=>o});var n=e(59889),a=e(85498);let i=a.config;const r=i,o=()=>i,g=c=>{i={...i,...c}},u=a.config.panels?.debug?.state===n.BV.alpha},21279:(Q,A,e)=>{"use strict";e.d(A,{AV:()=>c,FL:()=>v,Hk:()=>E,K3:()=>n,OA:()=>r,QO:()=>d,b0:()=>u,cz:()=>i,gN:()=>m,hD:()=>a,kh:()=>g,yM:()=>o,zF:()=>l});const n=30,a=8,i=24,r="v",o="h",g=4,u=250,c=n*3,l="panel-copy",d=2,f=23763571993,m=40,v="VisualizationSelectPane.ListMode",E="WidgetSelectPane.ListMode"},79999:(Q,A,e)=>{"use strict";e.d(A,{h:()=>a,p:()=>i});var n=e(31733);const a=n.createContext(void 0);function i(){const r=(0,n.useContext)(a);if(!r)throw new Error("No GrafanaContext found");return r}},42876:(Q,A,e)=>{"use strict";e.d(A,{AT:()=>l,ZR:()=>f,iG:()=>m,t_:()=>d});var n=e(31733),a=e(79117),i=e(67253),r=e(42342),o=e(7939);const g={title:"",text:"",severity:r.AppNotificationSeverity.Success,icon:"check"},u={title:"",text:"",severity:r.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},c={title:"",text:"",severity:r.AppNotificationSeverity.Error,icon:"exclamation-triangle"},l=(v,E="",p)=>({...g,title:v,text:E,id:(0,a.Z)(),timestamp:Date.now(),showing:!0}),d=(v,E="",p,h)=>({...c,text:(0,i.i)(E),title:v,id:(0,a.Z)(),traceId:p,component:h,timestamp:Date.now(),showing:!0}),f=(v,E="",p)=>({...u,title:v,text:E,traceId:p,id:(0,a.Z)(),timestamp:Date.now(),showing:!0});function m(){const v=(0,r.useDispatch)();return(0,n.useMemo)(()=>({success:(E,p="")=>{v((0,o.$l)(l(E,p)))},warning:(E,p="",h)=>{v((0,o.$l)(f(E,p,h)))},error:(E,p="",h)=>{v((0,o.$l)(d(E,p,h)))}}),[v])}},75923:(Q,A,e)=>{"use strict";e.d(A,{Vt:()=>i.contextSrv,Wz:()=>r.W,h$:()=>n.Z,rv:()=>a.r});var n=e(83599),a=e(96787),i=e(56811),r=e(96901)},76912:(Q,A,e)=>{"use strict";e.d(A,{H6:()=>h,ZP:()=>s});var n=e(69781),a=e(39357),i=e(92283),r=e(66261);const o=I=>{const M=(0,r.F)().getInstanceSettings(I.datasourceName);return{id:I.ts.toString(),createdAt:I.ts,datasourceName:I.datasourceName,datasourceUid:M?.uid||"",starred:I.starred,comment:I.comment,queries:I.queries}},g=I=>{if(!(0,r.F)().getInstanceSettings({uid:I.datasourceUid}))throw new Error("Datasource not found.");return{ts:I.createdAt,datasourceName:I.datasourceName,starred:I.starred,comment:I.comment,queries:I.queries}};var u=e(9337);function c(I,M,x,L,S){const U=f(I,x),N=m(U,L),w=S?d(N,S):N;return v(w,M)}const l=(I,M)=>{const x=new Date,L=new Date(x.setDate(x.getDate()-I));return M?L.setHours(24,0,0,0):L.setHours(0,0,0,0)};function d(I,M){const x=l(M[0],!0),L=l(M[1],!1);return I.filter(S=>S.createdAt<x&&S.createdAt>L)}function f(I,M){return M.length>0?I.filter(x=>M.includes(x.datasourceName)):I}function m(I,M){return I.filter(x=>x.comment.includes(M)?!0:x.queries.filter(S=>Object.values((0,n.omit)(S,["datasource","key","refId","hide","queryType"])).some(U=>U?.toString().includes(M))).length>0)}const v=(I,M)=>{let x;return M===u.A.Ascending&&(x=(L,S)=>L.createdAt<S.createdAt?-1:L.createdAt>S.createdAt?1:0),M===u.A.Descending&&(x=(L,S)=>L.createdAt<S.createdAt?1:L.createdAt>S.createdAt?-1:0),M===u.A.DatasourceZA&&(x=(L,S)=>L.datasourceName<S.datasourceName?-1:L.datasourceName>S.datasourceName?1:0),M===u.A.DatasourceAZ&&(x=(L,S)=>L.datasourceName<S.datasourceName?1:L.datasourceName>S.datasourceName?-1:0),I.sort(x)},E={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},p="grafana.explore.richHistory",h=1e4;class s{async getRichHistory(M){const x=P().map(o),L=M.starred?x.filter(U=>U.starred===!0):x,S=c(L,M.sortOrder,M.datasourceFilters,M.search,[M.from,M.to]);return{richHistory:S,total:S.length}}async addToRichHistory(M){const x=Date.now(),L={id:x.toString(),createdAt:x,...M},S=g(L),U=D(P()),N=S.queries.map(k=>(0,n.omit)(k,["key","refId"])),w=U.length>0&&U[0].queries.map(k=>(0,n.omit)(k,["key","refId"]));if((0,n.isEqual)(N,w)){const k=new Error("Entry already exists");throw k.name=i.j.DuplicatedEntry,k}const{queriesToKeep:G,limitExceeded:_}=C(U),K=[S,...G];try{a.Z.setObject(p,K)}catch(k){if(k instanceof Error&&k.name==="QuotaExceededError")R(i.j.StorageFull,`Saving rich history failed: ${k.message}`);else throw k}return _?{warning:{type:i.V.LimitExceeded,message:`Query history reached the limit of ${h}. Old, not-starred items have been removed.`},richHistoryQuery:L}:{richHistoryQuery:L}}async deleteAll(){a.Z.delete(p)}async deleteRichHistory(M){const x=parseInt(M,10),S=a.Z.getObject(p,[]).filter(U=>U.ts!==x);a.Z.setObject(p,S)}async updateStarred(M,x){return y(M,L=>L.starred=x)}async updateComment(M,x){return y(M,L=>L.comment=x)}async getSettings(){return{activeDatasourceOnly:a.Z.getObject(E.activeDatasourceOnly,!1),retentionPeriod:a.Z.getObject(E.retentionPeriod,7),starredTabAsFirstTab:a.Z.getBool(E.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:a.Z.getObject(E.datasourceFilters,[]).map(M=>M.value)}}async updateSettings(M){a.Z.set(E.activeDatasourceOnly,M.activeDatasourceOnly),a.Z.set(E.retentionPeriod,M.retentionPeriod),a.Z.set(E.starredTabAsFirstTab,M.starredTabAsFirstTab),a.Z.setObject(E.datasourceFilters,(M.lastUsedDatasourceFilters||[]).map(x=>({value:x})))}}function y(I,M){const x=parseInt(I,10),L=a.Z.getObject(p,[]),S=(0,n.find)(L,{ts:x});if(!S)throw new Error("Rich history item not found.");return M(S),a.Z.setObject(p,L),o(S)}function D(I){const M=a.Z.getObject(E.retentionPeriod,7),x=l(M,!1);return I.filter(L=>L.ts>x||L.starred===!0)||[]}function C(I){let M=!1,x=I.length-1;for(;x>=0&&I.length>=h;)I[x].starred||(I.splice(x,1),M=!0),x--;return{queriesToKeep:I,limitExceeded:M}}function P(){const I=a.Z.getObject(p,[]);return b(I)}function b(I){return I.map(x=>{const L=x.queries.map((S,U)=>T(x,S,U));return{...x,queries:L}})}function T(I,M,x){const L="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof M=="object"?M:O(M)?JSON.parse(M):{expr:M,refId:L[x]}}function O(I){try{JSON.parse(I)}catch{return!1}return!0}function R(I,M){const x=new Error(M);throw x.name=I,x}},92283:(Q,A,e)=>{"use strict";e.d(A,{V:()=>a,j:()=>n});var n=(i=>(i.StorageFull="StorageFull",i.DuplicatedEntry="DuplicatedEntry",i))(n||{}),a=(i=>(i.LimitExceeded="LimitExceeded",i))(a||{})},87649:(Q,A,e)=>{"use strict";e.d(A,{b:()=>p,X:()=>h});var n=e(85498),a=e(75923),i=e(9337),r=e(76912),o=e(71892),g=e(69391),u=e(66261),c=e(29272);const l=s=>{const y=(0,u.F)().getInstanceSettings({uid:s.datasourceUid});return{id:s.uid,createdAt:s.createdAt*1e3,datasourceName:y?.name||"",datasourceUid:s.datasourceUid,starred:s.starred,comment:s.comment,queries:s.queries}},d=s=>({uid:s.id,createdAt:Math.floor(s.createdAt/1e3),datasourceUid:s.datasourceUid,starred:s.starred,comment:s.comment,queries:s.queries});class f{constructor(){this.preferenceService=new c.y("user")}async addToRichHistory(y){const{result:D}=await(0,g.i)().post("/api/query-history",{dataSourceUid:y.datasourceUid,queries:y.queries});return{richHistoryQuery:l(D)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(y){(0,g.i)().delete(`/api/query-history/${y}`)}async getRichHistory(y){const D=m(y);let C="query-history-get-all";y.starred&&(C="query-history-get-starred");const b=(await(0,o.n)((0,g.i)().fetch({method:"GET",url:`/api/query-history?${D}`,requestId:C}))).data,T=(b.result.queryHistory||[]).map(l),O=b.result.totalCount||0;return{richHistory:T,total:O}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(y,D){const C=await(0,g.i)().patch(`/api/query-history/${y}`,{comment:D});return l(C.result)}updateSettings(y){return this.preferenceService.patch({queryHistory:{homeTab:y.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(y,D){let C;return D?C=await(0,g.i)().post(`/api/query-history/star/${y}`):C=await(0,g.i)().delete(`/api/query-history/star/${y}`),l(C.result)}}function m(s){let y=`${s.datasourceFilters.map(D=>{const C=(0,u.F)().getInstanceSettings(D).uid;return`datasourceUid=${encodeURIComponent(C)}`}).join("&")}`;if(s.search&&(y=y+`&searchString=${s.search}`),s.sortOrder&&(y=y+`&sort=${s.sortOrder===i.A.Ascending?"time-asc":"time-desc"}`),!s.starred){const D=s.from===0?"now":`now-${s.from}d`,C=s.to===0?"now":`now-${s.to}d`;y=y+`&to=${D}`,y=y+`&from=${C}`}return y=y+"&limit=100",y=y+`&page=${s.page||1}`,s.starred&&(y=y+`&onlyStarred=${s.starred}`),y}const v=new r.ZP,E=new f,p=()=>n.config.queryHistoryEnabled?E:v,h=()=>n.config.queryHistoryEnabled?{availableFilters:[i.A.Descending,i.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:a.Vt.isSignedIn}:{availableFilters:[i.A.Descending,i.A.Ascending,i.A.DatasourceAZ,i.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},46211:(Q,A,e)=>{"use strict";e.d(A,{r:()=>a});var n=e(31733);function a(i,r){const[o,g]=(0,n.useState)();return(0,n.useEffect)(()=>{const u=i.subscribe(r,g);return()=>u.unsubscribe()},[i,r]),o}},63082:(Q,A,e)=>{"use strict";e.d(A,{q:()=>i});var n=e(42342),a=e(90845);const i=r=>{const o=(0,n.useSelector)(g=>g.navIndex);return(0,a.ht)(o,r)}},297:(Q,A,e)=>{"use strict";e.d(A,{K:()=>r});var n=e(31733),a=e(97890),i=e(19690);function r(){const{search:o}=(0,a.TH)(),g=(0,n.useMemo)(()=>(0,i.Ox)(o||""),[o]),u=(0,n.useCallback)((c,l)=>i.E1.partial(c,l),[]);return[g,u]}},70441:(Q,A,e)=>{"use strict";e.d(A,{D_:()=>l,a2:()=>c});const n="en-US",a="fr-FR",i="es-ES",r="de-DE",o="zh-Hans",g="pseudo-LOCALE",u=null,c=[{code:n,name:"English",loader:()=>e.e(7424).then(e.t.bind(e,67424,19))},{code:a,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,66419,19))},{code:i,name:"Espa\xF1ol",loader:()=>e.e(4253).then(e.t.bind(e,4253,19))},{code:r,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:o,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],l=c.map(d=>d.code)},53166:(Q,A,e)=>{"use strict";e.d(A,{$q:()=>E,cC:()=>f,t:()=>v,uC:()=>l});var n=e(70576),a=e(21127),i=e(31733),r=e(39418),o=e(68011),g=e(70441);const u=p=>p.split("-")[0].toLowerCase(),c={type:"backend",init(){},async read(p,h,s){let y=g.a2.find(C=>C.code===p);if(y||(y=g.a2.find(C=>u(C.code)===u(p))),!y)return s(new Error("No message loader available for "+p),null);const D=await y.loader();s(null,D)}};function l(p){const h={partialBundledLanguages:!0,resources:{},returnEmptyString:!1};let s=n.default;if(p==="detect"){s=s.use(a.Z);const y={order:["navigator"],caches:[]};h.detection=y}else h.lng=g.D_.includes(p)?p:void 0;return s.use(c).use(r.Db).init(h)}function d(p){const h=VALID_LANGUAGES.includes(p)?p:void 0;return i18n.changeLanguage(h)}const f=p=>i.createElement(o.c,{...p}),m=n.default.t,v=(p,h,s)=>m(p,h,s),E=(p,h={})=>typeof p=="string"?E(new Date(p),h):new Intl.DateTimeFormat(n.default.language,h).format(p)},96787:(Q,A,e)=>{"use strict";e.d(A,{r:()=>a});class n{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const a=new n},43025:(Q,A,e)=>{"use strict";e.d(A,{$l:()=>l,Av:()=>p,F6:()=>m,Jk:()=>v,VW:()=>E,ad:()=>d,hS:()=>f,mE:()=>y,vo:()=>D});var n=e(4579),a=e(7261),i=e(42342);const r=25,o="notifications",g=`${o}/lastRead`,u={byId:T(),lastRead:Number.parseInt(window.localStorage.getItem(g)??`${Date.now()}`,10)},c=(0,n.oM)({name:"appNotifications",initialState:u,reducers:{notifyApp:(R,{payload:I})=>{Object.values(R.byId).some(M=>C(I,M)&&M.showing)||(R.byId[I.id]=I,O(R.byId))},hideAppNotification:(R,{payload:I})=>{I in R.byId&&(R.byId[I].showing=!1,O(R.byId))},clearNotification:(R,{payload:I})=>{delete R.byId[I],O(R.byId)},clearAllNotifications:R=>{R.byId={},O(R.byId)},readAllNotifications:(R,{payload:I})=>{R.lastRead=I}}}),{notifyApp:l,hideAppNotification:d,clearNotification:f,clearAllNotifications:m,readAllNotifications:v}=c.actions,E=c.reducer,p=R=>R.lastRead,h=R=>R.byId,s=(0,a.P1)(h,R=>Object.values(R).sort((I,M)=>M.timestamp-I.timestamp)),y=(0,a.P1)(s,R=>R.filter(P)),D=(0,a.P1)(h,R=>Object.values(R).filter(I=>I.showing));function C(R,I){return R.icon===I.icon&&R.severity===I.severity&&R.text===I.text&&R.title===I.title}function P(R){return R.severity===i.AppNotificationSeverity.Warning||R.severity===i.AppNotificationSeverity.Error}function b(R){return typeof R=="object"&&R!==null&&"id"in R&&"icon"in R&&"title"in R&&"text"in R}function T(){const R=window.localStorage.getItem(o);if(!R)return{};const I=JSON.parse(R);return Object.values(I).every(M=>b(M))?I:{}}function O(R){const I=Object.values(R).filter(P).sort((M,x)=>x.timestamp-M.timestamp).slice(0,r).reduce((M,x)=>(M[x.id]={id:x.id,severity:x.severity,icon:x.icon,title:x.title,text:x.text,traceId:x.traceId,timestamp:x.timestamp,showing:!1},M),{});try{window.localStorage.setItem(o,JSON.stringify(I))}catch(M){console.error("Unable to persist notifications to local storage"),console.error(M)}}},9133:(Q,A,e)=>{"use strict";e.d(A,{Lk:()=>l,OQ:()=>c,V4:()=>f,gd:()=>d});var n=e(4579),a=e(85498),i=e(19237);const r=a.config.bootData?.navTree??[];function o(m){return m.map(v=>{const E=v.children&&o(v.children);return{...v,children:E,text:(0,i.Y)(v.id)??v.text,subTitle:(0,i.L)(v.id)??v.subTitle,emptyMessage:(0,i.Y)(v.emptyMessageId)}})}const g="starred/",u=(0,n.oM)({name:"navBarTree",initialState:()=>o(a.config.bootData?.navTree??[]),reducers:{setStarred:(m,v)=>{const E=m.find(D=>D.id==="starred"),{id:p,title:h,url:s,isStarred:y}=v.payload;if(E)if(y){E.children||(E.children=[]);const D={id:g+p,text:h,url:s};E.children.push(D),E.children.sort((C,P)=>C.text.localeCompare(P.text))}else{const D=E.children?.findIndex(C=>C.id===g+p)??-1;D>-1&&E?.children?.splice(D,1)}},updateDashboardName:(m,v)=>{const{id:E,title:p,url:h}=v.payload,s=m.find(y=>y.id==="starred");if(s){const y=s.children?.find(D=>D.id===E);y&&(y.text=p,y.url=h,s.children?.sort((D,C)=>D.text.localeCompare(C.text)))}},removePluginFromNavTree:(m,v)=>{const E="plugin-page-"+v.payload.pluginID,p=m.findIndex(h=>h.id===E);p>-1&&m.splice(p,1)}}}),{setStarred:c,removePluginFromNavTree:l,updateDashboardName:d}=u.actions,f=u.reducer},18917:(Q,A,e)=>{"use strict";e.d(A,{Cu:()=>u,G4:()=>E,H7:()=>m,Qz:()=>g,RL:()=>f});var n=e(4579),a=e(69781),i=e.n(a),r=e(83811),o=e(19237);const g="home";function u(){const p={},h=(0,a.cloneDeep)(r.default.bootData.navTree),s=h.find(D=>D.id===g),y=h.filter(D=>D.id!==g);return s&&c(p,[s]),c(p,y,p[g]),p}function c(p,h,s){const y=[];for(const D of h){const C={...D,text:(0,o.Y)(D.id)??D.text,subTitle:(0,o.L)(D.id)??D.subTitle,emptyMessage:(0,o.Y)(D.emptyMessageId),parentItem:s};C.id&&(p[C.id]=C),C.children&&c(p,C.children,C),y.push(C)}s&&(s.children=y),p["not-found"]={...l("Page not found","404 Error").node},p.error={...l("Page error","An unexpected error").node}}function l(p,h){const s={text:p,subTitle:h,icon:"exclamation-triangle"};return{node:s,main:s}}const d={},f=(0,n.PH)("navIndex/updateNavIndex"),m=(0,n.PH)("navIndex/updateConfigurationSubtitle"),v=(p,h)=>({...p,parentItem:{...p.parentItem,text:p.parentItem?.text??"",subTitle:h}}),E=(p=d,h)=>{if(f.match(h)){let y=function(P){if(P.children)for(const b of P.children)D[b.id]={...b,parentItem:P};P.parentItem&&y(P.parentItem)};var s=y;const D={},C=h.payload;return y(C),{...p,...D}}else if(m.match(h)){const y=`Organization: ${h.payload}`;return{...p,cfg:{...p.cfg,subTitle:y},datasources:v(p.datasources,y),correlations:v(p.correlations,y),users:v(p.users,y),teams:v(p.teams,y),plugins:v(p.plugins,y),"org-settings":v(p["org-settings"],y),apikeys:v(p.apikeys,y)}}return p}},90845:(Q,A,e)=>{"use strict";e.d(A,{ht:()=>o,vw:()=>g});var n=e(90093),a=e(31509),i=e(18917);const r=()=>{const l={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:l,main:l}},o=(0,n.Z)((l,d,f,m=!1)=>{if(l[d]){const v=l[d],E=m?v:g(v),p=u(E,d);return{node:v,main:p}}return f||r()});function g(l){return l.id===a.y3?l:l.parentItem&&l.parentItem.id!==i.Qz?g(l.parentItem):l}function u(l,d){return l.id===d?{...l,active:!0}:l.children&&l.children.length>0?{...l,children:l.children.map(f=>u(f,d))}:l}const c=l=>`${l.main.text}${l.node.text?": "+l.node.text:""}`},29272:(Q,A,e)=>{"use strict";e.d(A,{y:()=>a});var n=e(41327);class a{constructor(r){this.resourceUri=r}update(r){return n.ae.put(`/api/${this.resourceUri}/preferences`,r)}patch(r){return n.ae.patch(`/api/${this.resourceUri}/preferences`,r)}load(){return n.ae.get(`/api/${this.resourceUri}/preferences`)}}},66841:(Q,A,e)=>{"use strict";e.d(A,{b:()=>r});var n=e(31733),a=e(94557),i=e(52386);class r{constructor(u){this._subject=new a.x,this._state=u}useState(){return o(this)}get state(){return this._state}setState(u){this._state={...this._state,...u},this._subject.next(this._state)}subscribeToState(u){return this._subject.subscribe(u)}}function o(g){const u=(0,i.N)();return(0,n.useEffect)(()=>{const c=g.subscribeToState({next:u});return()=>c.unsubscribe()},[g,u]),g.state}},41327:(Q,A,e)=>{"use strict";e.d(A,{y$:()=>ce,ae:()=>le,i:()=>Re});var n=e(83239),a=e(94557),i=e(71892),r=e(71156),o=e(40510),g=e(27005),u=e(57298),c=e(23535),l=e(4558),d=e(89582),f=e(89852),m=e(58187),v=e(56183),E=e(50014),p=e(74534),h=e(80005),s=e(30914),y=e(57423),D=e(79117),C=e(56821),P=e(51023),b=e(85498),T=e(83599),O=e(83811),R=e(40611),I=e(75759),M=e(76932),x=e(31733),L=e(76067),S=e(25108),U=e(50140),N=e(51343),w=e(82336);const G=Ae=>{const Oe=(0,L.wW)(_),$e=(0,L.l4)(),Ye=(0,w.J)($e),Ne=!!Ae.maxConcurrentSessions,je=()=>{window.location.reload()};return x.createElement(S.h_,null,x.createElement("div",{className:Ye.modal},x.createElement(U.v,{title:"You have been automatically signed out",severity:"warning",className:Oe.infobox},x.createElement("div",{className:Oe.text},x.createElement("p",null,"Your session token was automatically revoked because you have reached",x.createElement("strong",null,` the maximum number of ${Ne?Ae.maxConcurrentSessions:""} concurrent sessions `),"for your account."),x.createElement("p",null,x.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),x.createElement(N.zx,{size:"md",variant:"primary",onClick:je},"Sign in"))),x.createElement("div",{className:(0,M.cx)(Ye.modalBackdrop,Oe.backdrop)}))},_=Ae=>({infobox:(0,M.css)`
    margin-bottom: 0;
  `,text:(0,M.css)`
    margin: ${Ae.spacing(1,0,2)};
  `,backdrop:(0,M.css)`
    background-color: ${Ae.colors.background.canvas};
    opacity: 0.8;
  `});var K=e(74642),k=e(69781),z=e(74687);const W=Ae=>{const Oe=Ae.method,$e=re(Ae),Ye=ge($e),Ne=q(Ae,Ye),je=ve(Ae);return{method:Oe,headers:$e,body:Ne,credentials:je}},Z={canParse:()=>!0,parse:Ae=>(Ae.get("accept")||Ae.set("accept","application/json, text/plain, */*"),Ae)},H=Ae=>({canParse:Oe=>(Oe?.method?Oe?.method.toLowerCase():"")===Ae,parse:Oe=>(Oe.get("content-type")||Oe.set("content-type","application/json"),Oe)}),X=H("post"),Y=H("put"),ne=H("patch"),se=[X,Y,ne,Z],re=Ae=>{const Oe=Ae?.headers?new Headers(Ae.headers):new Headers;return se.filter(Ne=>Ne.canParse(Ae)).reduce((Ne,je)=>je.parse(Ne),Oe)},ge=Ae=>{if(!Ae)return!1;const Oe=Ae.get("content-type");return!!(Oe&&Oe.toLowerCase()==="application/json")},q=(Ae,Oe)=>Ae&&(!Ae.data||typeof Ae.data=="string"||Ae.data instanceof Blob?Ae.data:Oe?JSON.stringify(Ae.data):new URLSearchParams(Ae.data));async function me(Ae,Oe){if(Oe)switch(Oe){case"arraybuffer":return Ae.arrayBuffer();case"blob":return Ae.blob();case"json":return Ae.headers.get("Content-Length")==="0"?(console.warn(`${Ae.url} returned an invalid JSON`),{}):await Ae.json();case"text":return Ae.text()}const $e=await Ae.text();try{return JSON.parse($e)}catch{}return $e}function oe(Ae){return Object.keys(Ae).map(Oe=>{const $e=Ae[Oe];return Array.isArray($e)?$e.map(Ye=>`${encodeURIComponent(Oe)}=${encodeURIComponent(Ye)}`).join("&"):`${encodeURIComponent(Oe)}=${encodeURIComponent($e)}`}).join("&")}const fe=Ae=>{const Oe=(0,k.omitBy)(Ae.params,Ye=>Ye===void 0||Ye&&Ye.length===0),$e=oe(Oe);return Ae.params&&$e.length?`${Ae.url}?${$e}`:Ae.url},ve=Ae=>Ae&&(Ae.credentials?Ae.credentials:Ae.withCredentials?((0,z.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin");var pe=e(65354),Me=(Ae=>(Ae[Ae.Pending=0]="Pending",Ae[Ae.InProgress=1]="InProgress",Ae[Ae.Done=2]="Done",Ae))(Me||{});class Pe{constructor(Oe=!1){this.state={},this.queue=new a.x,this.updates=new a.x,this.add=($e,Ye)=>this.queue.next({id:$e,options:Ye,state:0}),this.setInProgress=$e=>this.queue.next({id:$e,state:1}),this.setDone=$e=>this.queue.next({id:$e,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=$e=>{const Ye=Object.keys($e).filter(je=>$e[je].state===1).length;return{noOfPending:Object.keys($e).filter(je=>$e[je].state===0).length,noOfInProgress:Ye,state:$e}},this.publishUpdate=($e,Ye)=>{this.printState($e,Ye),this.updates.next($e)},this.printState=($e,Ye)=>{if(!Ye)return;const Ne=Object.keys($e.state).reduce((je,ut)=>{const Fe={id:ut,state:$e.state[ut].state};return je.push(Fe),je},[]);console.log("FetchQueue noOfStarted",$e.noOfInProgress),console.log("FetchQueue noOfNotStarted",$e.noOfPending),console.log("FetchQueue state",Ne)},this.queue.subscribe($e=>{const{id:Ye,state:Ne,options:je}=$e;if(this.state[Ye]||(this.state[Ye]={state:0,options:{url:""}}),Ne===2){delete this.state[Ye];const Fe=this.getUpdate(this.state);this.publishUpdate(Fe,Oe);return}this.state[Ye].state=Ne,je&&(this.state[Ye].options=je);const ut=this.getUpdate(this.state);this.publishUpdate(ut,Oe)})}}var Ee=e(76372);class he{constructor(Oe,$e,Ye){const Ne=Ye?.http2Enabled?1e3:5;Oe.getUpdates().pipe((0,p.h)(({noOfPending:je})=>je>0),(0,Ee.b)(({state:je,noOfInProgress:ut})=>{const Fe=Object.keys(je).filter(ae=>je[ae].state===Me.Pending&&!(0,pe.mu)(je[ae].options.url)).reduce((ae,J)=>{const te={id:J,options:je[J].options};return ae.push(te),ae},[]),Te=Object.keys(je).filter(ae=>je[ae].state===Me.Pending&&(0,pe.mu)(je[ae].options.url)).reduce((ae,J)=>{const te={id:J,options:je[J].options};return ae.push(te),ae},[]),Ve=Math.max(Ne-ut-Fe.length,0),tt=Te.slice(0,Ve);return Fe.concat(tt)})).subscribe(({id:je,options:ut})=>{$e.add(je,ut)})}}class Le{constructor(Oe,$e){this.queue=new a.x,this.responses=new a.x,this.add=(Ye,Ne)=>{this.queue.next({id:Ye,options:Ne})},this.getResponses=Ye=>this.responses.asObservable().pipe((0,p.h)(Ne=>Ne.id===Ye)),this.queue.subscribe(Ye=>{const{id:Ne,options:je}=Ye;Oe.setInProgress(Ne),this.responses.next({id:Ne,observable:$e(je)})})}}var ke=e(56811);const ot="cancel_all_requests_request_id",it="grafana-trace-id";class ce{constructor(Oe){this.inFlightRequests=new a.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new a.x,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:c.U,appEvents:T.Z,contextSrv:ke.contextSrv,logout:()=>{ke.contextSrv.setLoggedOut()}},Oe&&(this.dependencies={...this.dependencies,...Oe}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new Pe,this.responseQueue=new Le(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new he(this.fetchQueue,this.responseQueue,(0,O.iE)())}async initGrafanaDeviceID(){try{const $e=await(await n.ZP.load()).get();this.deviceID=$e.visitorId}catch(Oe){console.error(Oe)}}async request(Oe){return await(0,i.n)(this.fetch(Oe).pipe((0,l.U)($e=>$e.data)))}fetch(Oe){const $e=(0,D.Z)(),Ye=this.fetchQueue;return new r.y(Ne=>{const je=new o.w0;return je.add(this.responseQueue.getResponses($e).subscribe(ut=>{je.add(ut.observable.subscribe(Ne))})),this.fetchQueue.add($e,Oe),function(){Ye.setDone($e),je.unsubscribe()}})}internalFetch(Oe){Oe.requestId&&this.inFlightRequests.next(Oe.requestId),Oe=this.parseRequestOptions(Oe);const $e=(0,I.v)();return $e!==null&&$e!==""&&b.config.jwtUrlLogin&&b.config.jwtHeaderName&&(Oe.headers=Oe.headers??{},Oe.headers[b.config.jwtHeaderName]=`${$e}`),this.deviceID&&(Oe.headers=Oe.headers??{},Oe.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),this.getFromFetchStream(Oe).pipe(this.handleStreamResponse(Oe),this.handleStreamError(Oe),this.handleStreamCancellation(Oe))}resolveCancelerIfExists(Oe){this.inFlightRequests.next(Oe)}cancelAllInFlightRequests(){this.inFlightRequests.next(ot)}async datasourceRequest(Oe){return(0,i.n)(this.fetch(Oe))}parseRequestOptions(Oe){const $e=this.dependencies.contextSrv.user?.orgId;return Oe.retry=Oe.retry??0,(0,pe.R8)(Oe.url)&&($e&&(Oe.headers=Oe.headers??{},Oe.headers["X-Grafana-Org-Id"]=$e),Oe.url.startsWith("/")&&(Oe.url=Oe.url.substring(1)),Oe.headers?.Authorization&&(Oe.headers["X-DS-Authorization"]=Oe.headers.Authorization,delete Oe.headers.Authorization),this.noBackendCache&&(Oe.headers=Oe.headers??{},Oe.headers["X-Grafana-NoCache"]="true")),Oe.hideFromInspector===void 0&&(Oe.hideFromInspector=(0,pe.R8)(Oe.url)&&!(0,pe.mu)(Oe.url)),Oe}getFromFetchStream(Oe){const $e=fe(Oe),Ye=W(Oe);return this.dependencies.fromFetch($e,Ye).pipe((0,d.z)(async Ne=>{const{status:je,statusText:ut,ok:Fe,headers:Te,url:Ve,type:tt,redirected:ae}=Ne,J=Oe.responseType??(ge(Te)?"json":void 0),te=await me(Ne,J);return{status:je,statusText:ut,ok:Fe,data:te,headers:Te,url:Ve,type:tt,redirected:ae,config:Oe,traceId:Ne.headers.get(it)??void 0}}))}showApplicationErrorAlert(Oe){}showSuccessAlert(Oe){const{config:$e}=Oe;if($e.showSuccessAlert===!1||$e.showSuccessAlert===void 0&&($e.method==="GET"||(0,pe.mu)($e.url)||!(0,pe.R8)($e.url)))return;const Ye=Oe.data;Ye?.message&&this.dependencies.appEvents.emit(C.SI.alertSuccess,[Ye.message])}showErrorAlert(Oe,$e){if(Oe.showErrorAlert===!1||Oe.showErrorAlert===void 0&&((0,pe.mu)(Oe.url)||!(0,pe.R8)(Oe.url)))return;let Ye="",Ne=$e.data.message;Ne==="Unexpected error"&&$e.message&&(Ne=$e.message),Ne.length>80&&(Ye=Ne,Ne="Error"),$e.status===422&&(Ye=$e.data.message,Ne="Validation failed"),this.dependencies.appEvents.emit($e.status<500?C.SI.alertWarning:C.SI.alertError,[Ne,Ye,$e.data.traceID])}processRequestError(Oe,$e){return $e.data=$e.data??{message:"Unexpected error"},typeof $e.data=="string"&&($e.data={message:$e.data,error:$e.statusText,response:$e.data}),$e.data&&!$e.data.message&&typeof $e.data.error=="string"&&($e.data.message=$e.data.error),$e.data.message&&setTimeout(()=>{$e.isHandled||this.showErrorAlert(Oe,$e)},50),this.inspectorStream.next($e),$e}handleStreamResponse(Oe){return $e=>$e.pipe((0,l.U)(Ye=>{if(!Ye.ok){const{status:Ne,statusText:je,data:ut}=Ye;throw{status:Ne,statusText:je,data:ut,config:Oe,traceId:Ye.headers.get(it)??void 0}}return Ye}),(0,f.b)(Ye=>{this.showSuccessAlert(Ye),this.inspectorStream.next(Ye)}))}handleStreamError(Oe){const{isSignedIn:$e}=this.dependencies.contextSrv.user;return Ye=>Ye.pipe((0,m.a)(Ne=>Ne.pipe((0,d.z)((je,ut)=>{const Fe=ut===0&&Oe.retry===0;if(je.status===401&&(0,pe.R8)(Oe.url)&&Fe&&$e){if(je.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new K.Dn({component:G,props:{maxConcurrentSessions:je.data?.error?.maxConcurrentSessions}})),(0,g._)(()=>je);let Te=this.loginPing();const Ve=(0,R.D)()*1e3<Date.now();return b.config.featureToggles.clientTokenRotation&&Ve&&(Te=this.rotateToken()),(0,u.D)(Te).pipe((0,v.K)(tt=>(tt.status===401&&this.dependencies.logout(),(0,g._)(tt))))}return(0,g._)(je)}))),(0,v.K)(Ne=>(0,g._)(()=>this.processRequestError(Oe,Ne))))}handleStreamCancellation(Oe){return $e=>$e.pipe((0,E.R)(this.inFlightRequests.pipe((0,p.h)(Ye=>{let Ne=!1;return Oe&&Oe.requestId&&Oe.requestId===Ye&&(Ne=!0),Ye===ot&&(Ne=!0),Ne}))),(0,h.T)(()=>({type:P.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Oe})))}getInspectorStream(){return this.inspectorStream}async get(Oe,$e,Ye,Ne){return this.request({...Ne,method:"GET",url:Oe,params:$e,requestId:Ye})}async delete(Oe,$e,Ye){return this.request({...Ye,method:"DELETE",url:Oe,data:$e})}async post(Oe,$e,Ye){return this.request({...Ye,method:"POST",url:Oe,data:$e})}async patch(Oe,$e,Ye){return this.request({...Ye,method:"PATCH",url:Oe,data:$e})}async put(Oe,$e,Ye){return this.request({...Ye,method:"PUT",url:Oe,data:$e})}withNoBackendCache(Oe){return this.noBackendCache=!0,Oe().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,s.x)(()=>{this._tokenRotationInProgress=null}),(0,y.B)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(Oe){return this.get("/api/search",Oe)}getDashboardByUid(Oe){return this.get(`/api/dashboards/uid/${Oe}`)}validateDashboard(Oe){return Promise.resolve({isValid:!1,message:"dashboard validation is supported"})}getPublicDashboardByUid(Oe){return this.get(`/api/public/dashboards/${Oe}`)}getFolderByUid(Oe,$e={}){const Ye=new URLSearchParams;return $e.withAccessControl&&Ye.set("accesscontrol","true"),this.get(`/api/folders/${Oe}?${Ye.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const le=new ce,Re=()=>le},56811:(Q,A,e)=>{"use strict";e.d(A,{Wg:()=>l,contextSrv:()=>m});var n=e(69781),a=e.n(n),i=e(17201),r=e(69391),o=e(28298),g=e(40611),u=e(42342),c=e(83811);const l="auto";class d{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},this.authenticatedBy="",c.default.bootData.user&&(0,n.extend)(this,c.default.bootData.user)}}class f{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,c.default.bootData||(c.default.bootData={user:{},settings:{},navTree:[]}),this.user=new d,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=c.default.minRefreshInterval,this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.user.permissions=await(0,r.i)().get("/api/access-control/user/actions",{reloadcache:!0})}catch(p){console.error(p)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(p){return p==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===p}licensedAccessControlEnabled(){return(0,o.v)("accesscontrol")}hasPermissionInMetadata(p,h){return!!h.accessControl?.[p]}hasPermission(p){return!!this.user.permissions?.[p]}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(p){return!c.default.minRefreshInterval||p===l?!0:i.intervalToMs(p)>=i.intervalToMs(c.default.minRefreshInterval)}getValidInterval(p){return this.isAllowedInterval(p)?p:c.default.minRefreshInterval}getValidIntervals(p){return this.minRefreshInterval?p.filter(h=>h!=="").filter(this.isAllowedInterval):p}hasAccessToExplore(){return this.hasPermission(u.AccessControlAction.DataSourcesExplore)&&c.default.exploreEnabled}evaluatePermission(p){return p.some(h=>this.hasPermission(h))?[]:["Reject"]}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let p=(0,g.D)(),s=(p-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if((0,g.D)()>p){this.scheduleTokenRotationJob();return}this.rotateToken().then()},s)}}canScheduleRotation(){return!(!this.isSignedIn||!c.default.featureToggles.clientTokenRotation||(0,g.D)()===0)}cancelTokenRotationJob(){c.default.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(c.default.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(p=>{if(p.status===200){this.scheduleTokenRotationJob();return}if(p.status===401){this.setLoggedOut();return}}).catch(p=>{console.error(p)})}}let m=new f;const v=E=>{throw new Error("contextSrv can be only overridden in test environment")}},69514:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>c});var n=e(69781),a=e.n(n),i=e(69391),r=e(83811),o=e(39357);class g{constructor(){}addDashboardImpression(d){const f=this.impressionKey();let m=[];o.Z.exists(f)&&(m=JSON.parse(o.Z.get(f)),(0,n.isArray)(m)||(m=[])),m=m.filter(v=>d!==v),m.unshift(d),m.length>50&&m.pop(),o.Z.set(f,JSON.stringify(m))}async convertToUIDs(){let d=this.getImpressions();const f=(0,n.filter)(d,v=>(0,n.isNumber)(v));if(!f.length)return;const m=await(0,i.i)().get(`/api/dashboards/ids/${f.join(",")}`);o.Z.set(this.impressionKey(),JSON.stringify([...(0,n.filter)(d,v=>(0,n.isString)(v)),...m]))}getImpressions(){const d=o.Z.get(this.impressionKey())||"[]";return JSON.parse(d)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,n.filter)(this.getImpressions(),f=>(0,n.isString)(f))}impressionKey(){return"dashboard_impressions-"+r.default.bootData.user.orgId}}const c=new g},85649:(Q,A,e)=>{"use strict";e.d(A,{L:()=>u,X:()=>c});var n=e(26857),a=e(1727),i=e(83599),r=e(83811),o=e(75923),g=e(29272);async function u(l,d){const f=r.config.theme2,m=(0,n.j)(l);if(i.Z.publish(new a.hD(m)),f.colors.mode!==m.colors.mode){const p=document.createElement("link");p.rel="stylesheet",p.href=r.config.bootData.assets[m.colors.mode],p.onload=()=>{const h=document.getElementsByTagName("link");for(let s=0;s<h.length;s++){const y=h[s];y.href&&y.href.includes(`build/grafana.${f.colors.mode}`)&&y.remove()}},document.head.insertBefore(p,document.head.firstChild)}if(d||!o.Vt.isSignedIn)return;const v=new g.y("user"),E=await v.load();await v.update({...E,theme:m.colors.mode})}async function c(l){const d=r.config.theme2;u(d.isDark?"light":"dark",l)}},39357:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>i});class n{get(o){return window.localStorage[o]}set(o,g){window.localStorage[o]=g}getBool(o,g){return g!==void 0&&!this.exists(o)?g:window.localStorage[o]==="true"}getObject(o,g){let u=g;if(this.exists(o)){const c=window.localStorage[o];try{u=JSON.parse(c)}catch(l){console.error(`Error parsing store object: ${o}. Returning default: ${g}. [${l}]`)}}return u}setObject(o,g){let u;try{u=JSON.stringify(g)}catch(c){throw new Error(`Could not stringify object: ${o}. [${c}]`)}try{this.set(o,u)}catch(c){const l=new Error(`Could not save item in localStorage: ${o}. [${c}]`);throw c instanceof Error&&(l.name=c.name),l}return!0}exists(o){return window.localStorage[o]!==void 0}delete(o){window.localStorage.removeItem(o)}}const i=new n},96901:(Q,A,e)=>{"use strict";e.d(A,{W:()=>c,Z:()=>l});var n=e(69781),a=e.n(n),i=e(84834),r=e(86850);function o(d,f){if(!d)return!1;if(d[0]==="/"){const m=(0,i.jO)(d);return f.match(m)!=null}return d===f}function g(d){return d===0?.001:d/10}function u(d){return d?{colors:[{opacity:0},{opacity:d/10}]}:null}function c(d,f,m){for(let v=0;v<d.length;v++){const E=d[v],p=f.yaxes,h=E.yaxis||1,s=p[h-1],y=(0,r.Cf)(s.format);(0,n.isNumber)(f.decimals)?E.updateLegendValues(y,f.decimals):(0,n.isNumber)(s.decimals)?E.updateLegendValues(y,s.decimals+1):E.updateLegendValues(y,null)}}class l{constructor(f){this.datapoints=f.datapoints,this.label=f.alias,this.id=f.alias,this.alias=f.alias,this.aliasEscaped=(0,n.escape)(f.alias),this.color=f.color,this.bars={fillColor:f.color},this.valueFormater=(0,r.Cf)("none"),this.stats={},this.legend=!0,this.unit=f.unit,this.dataFrameIndex=f.dataFrameIndex,this.fieldIndex=f.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(f){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let m=0;m<f.length;m++){const v=f[m];o(v.alias,this.alias)&&(v.lines!==void 0&&(this.lines.show=v.lines),v.dashes!==void 0&&(this.dashes.show=v.dashes,this.lines.lineWidth=0),v.points!==void 0&&(this.points.show=v.points),v.bars!==void 0&&(this.bars.show=v.bars),v.fill!==void 0&&(this.lines.fill=g(v.fill)),v.fillGradient!==void 0&&(this.lines.fillColor=u(v.fillGradient)),v.stack!==void 0&&(this.stack=v.stack),v.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:v.linewidth,this.dashes.lineWidth=v.linewidth),v.dashLength!==void 0&&(this.dashes.dashLength[0]=v.dashLength),v.spaceLength!==void 0&&(this.dashes.dashLength[1]=v.spaceLength),v.nullPointMode!==void 0&&(this.nullPointMode=v.nullPointMode),v.pointradius!==void 0&&(this.points.radius=v.pointradius),v.steppedLine!==void 0&&(this.lines.steps=v.steppedLine),v.zindex!==void 0&&(this.zindex=v.zindex),v.fillBelowTo!==void 0&&(this.fillBelowTo=v.fillBelowTo),v.color!==void 0&&this.setColor(v.color),v.transform!==void 0&&(this.transform=v.transform),v.legend!==void 0&&(this.legend=v.legend),v.hideTooltip!==void 0&&(this.hideTooltip=v.hideTooltip),v.yaxis!==void 0&&(this.yaxis=v.yaxis),v.hiddenSeries!==void 0&&(this.hiddenSeries=v.hiddenSeries))}}getFlotPairs(f){const m=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const v=f==="connected",E=f==="null as zero";let p,h,s=0,y,D=0,C=!0;for(let P=0;P<this.datapoints.length;P++){if(h=this.datapoints[P][0],p=this.datapoints[P][1],y!==void 0){const b=p-y;b<this.stats.timeStep&&(this.stats.timeStep=b)}if(y=p,h===null){if(v)continue;E&&(h=0)}h!==null&&((0,n.isNumber)(h)&&(this.stats.total+=h,this.allIsNull=!1,s++),h>this.stats.max&&(this.stats.max=h),h<this.stats.min&&(this.stats.min=h),this.stats.first===null?this.stats.first=h:D>h?(C=!1,P===this.datapoints.length-1&&(this.stats.delta+=h)):(C?this.stats.delta+=h-D:this.stats.delta+=h,C=!0),D=h,h<this.stats.logmin&&h>0&&(this.stats.logmin=h),h!==0&&(this.allIsZero=!1)),m.push([p,h])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),m.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/s,this.stats.current=m[m.length-1][1],this.stats.current===null&&m.length>1&&(this.stats.current=m[m.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=m.length,m}updateLegendValues(f,m){this.valueFormater=f,this.decimals=m}formatValue(f){return(0,n.isFinite)(f)||(f=null),(0,r.zc)(this.valueFormater(f,this.decimals))}isMsResolutionNeeded(){for(let f=0;f<this.datapoints.length;f++)if(this.datapoints[f][1]!==null&&this.datapoints[f][1]!==void 0){const m=this.datapoints[f][1].toString();if(m.length===13&&m%1e3!==0)return!0}return!1}hideFromLegend(f){return!!(f.hideEmpty&&this.allIsNull||!this.legend||f.hideZero&&this.allIsZero)}setColor(f){this.color=f,this.bars.fillColor=f}}},54758:(Q,A,e)=>{"use strict";e.d(A,{k:()=>r});var n=e(98827),a=e(85498);const i=a.config.bootData.settings.cspReportOnlyEnabled,r={createHTML:(o,g,u)=>i?(console.error("[HTML not sanitized with Trusted Types]",o,g,u),o):o.replace(/<script/gi,"&lt;script"),createScript:o=>o,createScriptURL:(o,g,u)=>i?(console.error("[ScriptURL not sanitized with Trusted Types]",o,g,u),o):n.QX.sanitizeUrl(o)};a.config.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",r)},13771:(Q,A,e)=>{"use strict";e.d(A,{E:()=>l,f:()=>c});var n=e(31733),a=e(49876),i=e(3854),r=e(1727),o=e(85498),g=e(75923),u=e(13300);const c=({children:d,value:f})=>{const[m,v]=(0,n.useState)(f);return(0,n.useEffect)(()=>{const E=g.h$.subscribe(r.hD,p=>{o.config.theme2=p.payload,v(p.payload)});return()=>E.unsubscribe()},[]),n.createElement(i.N.Provider,{value:m},n.createElement(a.y,{baseColor:m.colors.emphasize(m.colors.background.secondary),highlightColor:m.colors.emphasize(m.colors.background.secondary,.1),borderRadius:m.shape.radius.default},d))},l=(d,f)=>function(v){return n.createElement(c,{value:f},n.createElement(d,{...v}))}},67034:(Q,A,e)=>{"use strict";e.d(A,{q:()=>n});class n extends window.Worker{constructor(i,r){const o=i.toString(),g=o.split("/");g.pop();const u=`${g.join("/")}/`,c=`importScripts('${o}');`,l=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${u}'; ${c}`],{type:"application/javascript"}));super(l,r),URL.revokeObjectURL(l)}}},10704:(Q,A,e)=>{"use strict";e.d(A,{y:()=>n});function n(a={}){return{...a,accesscontrol:!0}}},30866:(Q,A,e)=>{"use strict";e.d(A,{R:()=>n});const n=(a,i,r)=>(a.splice(r,0,a.splice(i,1)[0]),a)},40611:(Q,A,e)=>{"use strict";e.d(A,{D:()=>n});function n(){const a=document.cookie.split("; ").find(r=>r.startsWith("grafana_session_expiry="));if(!a)return 0;let i=a.split("=").at(1);return i?parseInt(i,10):0}},20154:(Q,A,e)=>{"use strict";e.d(A,{vl:()=>i});function n(){const r=navigator.userAgent.indexOf("MSIE")>-1,o=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),c=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return r&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||o&&(c&&parseFloat(c[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||g&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(u&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function a(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function i(){return a()?"cmd":"ctrl"}},23901:(Q,A,e)=>{"use strict";e.d(A,{kJ:()=>i});class n{_linkTo(u,c){c<=0&&u.inputEdges.push(this),c>=0&&u.outputEdges.push(this),u.edges.push(this)}link(u,c){if(!u)throw Error("inputNode is required");if(!c)throw Error("outputNode is required");return this.unlink(),this.inputNode=u,this.outputNode=c,this._linkTo(u,1),this._linkTo(c,-1),this}unlink(){let u;const c=this.inputNode,l=this.outputNode;c&&l&&(u=c.edges.indexOf(this),u>-1&&c.edges.splice(u,1),u=l.edges.indexOf(this),u>-1&&l.edges.splice(u,1),u=c.outputEdges.indexOf(this),u>-1&&c.outputEdges.splice(u,1),u=l.inputEdges.indexOf(this),u>-1&&l.inputEdges.splice(u,1))}}class a{constructor(u){this.name=u,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(u){return u?typeof u=="object"?this.inputEdges.find(c=>c.inputNode?.name===u.name):this.inputEdges.find(c=>c.inputNode?.name===u):null}getEdgeTo(u){return u?typeof u=="object"?this.outputEdges.find(c=>c.outputNode?.name===u.name):this.outputEdges.find(c=>c.outputNode?.name===u):null}getOptimizedInputEdges(){const u=[];return this.inputEdges.forEach(c=>{c.inputNode?.inputEdges.map(d=>d.inputNode)?.forEach(d=>{const f=d?.getEdgeTo(this.name);f&&u.push(f)})}),this.inputEdges.filter(c=>u.indexOf(c)===-1)}}class i{constructor(){this.nodes={}}createNode(u){const c=new a(u);return this.nodes[u]=c,c}createNodes(u){const c=[];return u.forEach(l=>{c.push(this.createNode(l))}),c}link(u,c){let l=[],d=[];const f=[],m=[];u instanceof Array?l=u:l=[u],c instanceof Array?d=c:d=[c];for(let E=0;E<l.length;E++){const p=l[E];if(typeof p=="string"){const h=this.getNode(p);if(!h)throw Error(`cannot link input node named ${p} since it doesn't exist in graph`);f.push(h)}else f.push(p)}for(let E=0;E<d.length;E++){const p=d[E];if(typeof p=="string"){const h=this.getNode(p);if(!h)throw Error(`cannot link output node named ${p} since it doesn't exist in graph`);m.push(h)}else m.push(p)}const v=[];return f.forEach(E=>{m.forEach(p=>{v.push(this.createEdge().link(E,p))})}),v}descendants(u){if(!u.length)return new Set;const c=new Set(o(u)?u.map(l=>this.nodes[l]).filter(l=>l!==void 0):u);return this.descendantsRecursive(c)}descendantsRecursive(u,c=new Set){for(const l of u){const d=new Set;for(const{inputNode:f}of l.inputEdges)f&&!c.has(f)&&(c.add(f),d.add(f));this.descendantsRecursive(d,c)}return c}createEdge(){return new n}getNode(u){return this.nodes[u]}}const r=g=>{Object.keys(g.nodes).forEach(u=>{const c=g.nodes[u];let l=c.outputEdges.map(f=>f.outputNode?.name).join(", ");l||(l="<none>");let d=c.inputEdges.map(f=>f.inputNode?.name).join(", ");d||(d="<none>"),console.log(`${c.name}:
 - links to:   ${l}
 - links from: ${d}`)})};function o(g){return g.length>0&&typeof g[0]=="string"}},67253:(Q,A,e)=>{"use strict";e.d(A,{i:()=>a});var n=e(69391);function a(i){if(typeof i=="string")return i;if(i){if(i instanceof Error)return i.message;if((0,n.kW)(i)){if(i.data&&i.data.message)return i.data.message;if(i.statusText)return i.statusText}}return JSON.stringify(i)}},82866:(Q,A,e)=>{"use strict";e.d(A,{$$:()=>U,ET:()=>y,H6:()=>C,OQ:()=>N,Oy:()=>w,RZ:()=>G,Xh:()=>T,Xk:()=>R,Z8:()=>M,Zf:()=>P,_Q:()=>S,fR:()=>I,n9:()=>K,uC:()=>b,y_:()=>s,z0:()=>D,z_:()=>L});var n=e(4579),a=e(79117),i=e(71199),r=e(91977),o=e(44343),g=e(5333),u=e(17201),c=e(66261),l=e(20685),d=e(39357),f=e(26894),m=e(65354);const v={dedupStrategy:i.Y4.none},E=100,p="grafana.explore.datasource",h=k=>`${p}.${k}`,s=k=>d.Z.getObject(h(k)),y=(k,z)=>d.Z.setObject(h(k),z);function D(){return(0,n.x0)(3)}async function C(k){const{queries:z,dsRef:W,timeRange:Z,scopedVars:H,adhocFilters:X}=k,Y=(await Promise.allSettled(z.filter(se=>se.datasource?.uid!==f.Yq).map(async se=>{const re=await(0,c.F)().get(se.datasource||W);return{...re.interpolateVariablesInQueries?.([se],H??{},X)[0]||se,...!re.meta.mixed&&{datasource:re.getRef()}}}))).filter(se=>se.status==="fulfilled").map(se=>se.value),ne=JSON.stringify({[D()]:{range:(0,r.R_)(Z.raw),queries:Y,datasource:W?.uid}});return r.Cj.renderUrl("/explore",{panes:ne,schemaVersion:1})}function P(k,z,W,Z,H,X,Y){const ne=z.reduce((me,oe)=>(me+=oe.key,me),""),{interval:se,intervalMs:re}=_(Z,W.minInterval,W.maxDataPoints),ge=`${ne}`,q={app:o.zj.Explore,timezone:X||g.Ys,startTime:Date.now(),interval:se,intervalMs:re,panelId:ge,targets:z,range:Z,requestId:"explore_"+k,rangeRaw:Z.raw,scopedVars:{__interval:{text:se,value:se},__interval_ms:{text:re,value:re},...Y},maxDataPoints:W.maxDataPoints,liveStreaming:W.liveStreaming};return{queries:z,request:q,scanning:H,id:O(),done:!1}}const b=({key:k,...z})=>z,T=(k,z)=>{if(k==null)return"";try{return JSON.stringify(k,null,z)}catch(W){console.error(W)}return""};function O(k=0){return`Q-${(0,a.Z)()}-${k}`}async function R(k,z=0,W){let Z,H,X;return W?H=W:k.length>0&&k[k.length-1].datasource?H=k[k.length-1].datasource:(Z=await(0,c.F)().get(),X=Z.getDefaultQuery?.(o.zj.Explore),H=Z.getRef()),Z||(Z=await(0,c.F)().get(H),X=Z.getDefaultQuery?.(o.zj.Explore)),{...X,refId:(0,m.Hs)(k),key:O(z),datasource:H}}const I=(k,z,W=0)=>{const Z=O(W),H=k.refId||(0,m.Hs)(z);return{...k,refId:H,key:Z}};async function M(k,z){if(k&&typeof k=="object"&&k.length>0){const W=[];for(let Z=0;Z<k.length;Z++){const H=k[Z],X=O(Z);let Y=H.refId;Y||(Y=(0,m.Hs)(W));let ne=!0;if(H.datasource)try{await(0,c.F)().get(H.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),ne=!1}ne&&W.push({...H,refId:Y,key:X})}return W}try{const W=z??(await(0,c.F)().get()).getRef();return[await R(k??[],void 0,W)]}catch{return[]}}const x=["refId","key","context","datasource"];function L(k){return k&&k.some(z=>Object.keys(z).filter(Z=>x.indexOf(Z)===-1).map(Z=>z[Z]).filter(Z=>Z).length>0)}function S(k,z,W){const Z=Date.now();let H=k;W.forEach(Y=>{H=[{query:Y,ts:Z},...H]}),H.length>E&&(H=H.slice(0,E));const X=`grafana.explore.history.${z}`;try{return d.Z.setObject(X,H),H}catch(Y){return console.error(Y),k}}const U=k=>k.reduce((W,Z,H)=>{const X=Z.datasource?.uid||Z.key;return W.concat(`${X}-${H}`)},[]),N=(k,z,W)=>u.convertRawToRange(z,k,W),w=k=>l.dP.isLive(k)?i.UV.Ascending:i.UV.Descending,G=k=>{k&&k.unsubscribe()};function _(k,z,W){return W?u.calculateInterval(k,W,z):{interval:"1s",intervalMs:1e3}}const K=k=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(k);else{const z=document.createElement("textarea");z.value=k,document.body.appendChild(z),z.select(),document.execCommand("copy"),document.body.removeChild(z)}}},60742:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{default:()=>n});function n(a,i){i=i||{};const r=i.delimiter||".";let o=i.maxDepth||3,g=1;const u={};function c(l,d){Object.keys(l).forEach(f=>{const m=l[f],v=i?.safe&&Array.isArray(m),p=Object.prototype.toString.call(m)==="[object Object]",h=d?d+r+f:f;if(i?.maxDepth||(o=g+1),!v&&p&&Object.keys(m).length&&g<o)return++g,c(m,h);u[h]=m})}return c(a,null),u}},51088:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>u});var n=e(74687),a=e(84834),i=e(17201),r=e(86850);const g={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:c=>((0,n.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,a.yI)(c)),roundInterval:c=>((0,n.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),i.roundInterval(c)),secondsToHms:c=>((0,n.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),i.secondsToHms(c)),secondsToHhmmss:c=>{const l=[],d=Math.floor(c/3600),f=Math.floor(c%3600/60),m=Math.floor(c%3600%60);return d>9?l.push(""+d):l.push("0"+d),f>9?l.push(""+f):l.push("0"+f),m>9?l.push(""+m):l.push("0"+m),l.join(":")},toPercent:(c,l)=>Math.floor(c/l*1e4)/100+"%",addSlashes:c=>c.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:c=>((0,n.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),i.describeInterval(c)),intervalToSeconds:c=>((0,n.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),i.intervalToSeconds(c)),intervalToMs:c=>((0,n.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),i.intervalToMs(c)),calculateInterval:(c,l,d)=>((0,n.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),i.calculateInterval(c,l,d)),queryColorDot:(c,l)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+c,"font-size:"+l+"px"].join(";")+'"></div>',slugifyForUrl:c=>c.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:c=>((0,n.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,a.jO)(c)),toFixed:(c,l)=>{if(c===null)return"";const d=l?Math.pow(10,Math.max(0,l)):1,f=String(Math.round(c*d)/d);if(f.indexOf("e")!==-1||c===0)return f;if(l!=null){const m=f.indexOf("."),v=m===-1?0:f.length-m-1;if(v<l)return(v?f:f+".")+String(d).slice(1,l-v+1)}return f},toFixedScaled:(c,l,d,f,m)=>d===null?g.toFixed(c,l)+m:g.toFixed(c,d+f)+m,roundValue:(c,l)=>{if(c===null)return null;const d=Math.pow(10,l),f=(d*c).toFixed(l);return Math.round(parseFloat(f))/d},getUnitFormats:r.QW};typeof Proxy<"u"?g.valueFormats=new Proxy(g.valueFormats,{get(c,l,d){if(typeof l!="string")throw{message:`Value format ${String(l)} is not a string`};const f=(0,r.Cf)(l);return f?(m,v,E,p)=>(0,r.zc)(f(m,v,E,p?"utc":"browser")):Reflect.get(c,l,d)}}):g.valueFormats=(0,r.Td)();const u=g},19237:(Q,A,e)=>{"use strict";e.d(A,{L:()=>r,Y:()=>i});var n=e(85498),a=e(53166);function i(o){switch(o){case"home":return(0,a.t)("nav.home.title","Home");case"new":return(0,a.t)("nav.new.title","New");case"create":return(0,a.t)("nav.create.title","Create");case"create-dashboard":return(0,a.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,a.t)("nav.create-folder.title","Folder");case"import":return(0,a.t)("nav.create-import.title","Import dashboard");case"alert":return(0,a.t)("nav.create-alert.title","New alert rule");case"starred":return(0,a.t)("nav.starred.title","Starred");case"starred-empty":return(0,a.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,a.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,a.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,a.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,a.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,a.t)("nav.library-panels.title","Library panels");case"reports":return(0,a.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,a.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,a.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,a.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,a.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,a.t)("nav.scenes.title","Scenes");case"explore":return(0,a.t)("nav.explore.title","Explore");case"alerting":return(0,a.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,a.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,a.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alerting-upgrade":return(0,a.t)("nav.alerting-upgrade.title","Alerting upgrade");case"alert-home":return(0,a.t)("nav.alerting-home.title","Home");case"alert-list":return(0,a.t)("nav.alerting-list.title","Alert rules");case"alert-list-legacy":return(0,a.t)("nav.alert-list-legacy.title","Alert rules");case"receivers":return(0,a.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,a.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,a.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,a.t)("nav.alerting-silences.title","Silences");case"groups":return(0,a.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,a.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,a.t)("nav.config.title","Administration");case"cfg/general":return(0,a.t)("nav.config-general.title","General");case"cfg/plugins":return(0,a.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,a.t)("nav.config-access.title","Users and access");case"datasources":return(0,a.t)("nav.datasources.title","Data sources");case"authentication":return(0,a.t)("nav.authentication.title","Authentication");case"licensing":return(0,a.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,a.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,a.t)("nav.correlations.title","Correlations");case"users":return(0,a.t)("nav.users.title","Users");case"teams":return(0,a.t)("nav.teams.title","Teams");case"plugins":return(0,a.t)("nav.plugins.title","Plugins");case"org-settings":return(0,a.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,a.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,a.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,a.t)("nav.admin.title","Server admin");case"support-bundles":return(0,a.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,a.t)("nav.global-users.title","Users");case"global-orgs":return(0,a.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,a.t)("nav.server-settings.title","Settings");case"storage":return(0,a.t)("nav.storage.title","Storage");case"upgrading":return(0,a.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,a.t)("nav.monitoring.title","Observability");case"infrastructure":return(0,a.t)("nav.infrastructure.title","Infrastructure");case"frontend":return(0,a.t)("nav.frontend.title","Frontend");case"apps":return(0,a.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,a.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"testing-and-synthetics":return(0,a.t)("nav.testing-and-synthetics.title","Testing & synthetics");case"plugin-page-grafana-incident-app":return(0,a.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,a.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,a.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return n.config.featureToggles.dockedMegaMenu?(0,a.t)("nav.k6.title","Performance"):(0,a.t)("nav.performance-testing.title","Performance testing");case"monitoring":return(0,a.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,a.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,a.t)("nav.application.title","Application");case"plugin-page-grafana-pyroscope-app":return(0,a.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,a.t)("nav.frontend-app.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,a.t)("nav.synthetics.title","Synthetics");case"help":return(0,a.t)("nav.help.title","Help");case"profile/settings":return(0,a.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,a.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,a.t)("nav.profile/password.title","Change password");case"sign-out":return(0,a.t)("nav.sign-out.title","Sign out");case"search":return(0,a.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,a.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,a.t)("nav.add-new-connections.title","Add new connection");case"connections-datasources":return(0,a.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,a.t)("nav.integrations.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,a.t)("nav.connect-data.title","Connect data");case"plugin-page-grafana-detect-app":return(0,a.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,a.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function r(o){switch(o){case"dashboards":return(0,a.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,a.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,a.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,a.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,a.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,a.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,a.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alerting-upgrade":return(0,a.t)("nav.alerting-upgrade.subtitle","Upgrade your existing legacy alerts and notification channels to the new Grafana Alerting");case"alert-list":return(0,a.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,a.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,a.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,a.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,a.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,a.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,a.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,a.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,a.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,a.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,a.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,a.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,a.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,a.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,a.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,a.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,a.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,a.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,a.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,a.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,a.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,a.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,a.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,a.t)("nav.monitoring.subtitle","Out-of-the-box observability solutions");case"infrastructure":return(0,a.t)("nav.infrastructure.subtitle","Understand your infrastructure's health");case"frontend":return(0,a.t)("nav.frontend.subtitle","Gain real user monitoring insights");case"alerts-and-incidents":return(0,a.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"testing-and-synthetics":return(0,a.t)("nav.testing-and-synthetics.subtitle","Optimize performance with k6 and Synthetic Monitoring insights");case"connections-add-new-connection":return(0,a.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,a.t)("nav.data-sources.subtitle","View and manage your connected data source connections");default:return}}},5529:(Q,A,e)=>{"use strict";e.d(A,{M:()=>i});var n=e(69781),a=e.n(n);function i(r){return(0,n.isArray)(r)?r.map(i):(0,n.isPlainObject)(r)?Object.keys(r).sort().reduce((o,g)=>{const u=r[g];return u!=null&&(o[g]=i(u)),o},{}):r}},65354:(Q,A,e)=>{"use strict";e.d(A,{DI:()=>i,Hs:()=>n,R8:()=>o,mu:()=>r,sB:()=>u,vH:()=>a});const n=c=>{for(let l=0;;l++){const d=g(l);if(!c.some(f=>f.refId===d))return d}};function a(c){const l=["refId","hide","key","queryType","datasource"];for(const d in c)if(d!=="label"&&!l.includes(d))return!1;return!0}function i(c,l,d){const f={...l,refId:n(c),hide:!1};return!f.datasource&&d&&(f.datasource=d),[...c,f]}function r(c){return c.indexOf("api/datasources/proxy")!==-1||c.indexOf("api/ds/query")!==-1}function o(c){return!c.match(/^http/)}function g(c){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return c<l.length?l[c]:g(Math.floor(c/l.length)-1)+l[c%l.length]}function u(c){return c||void 0}},86234:(Q,A,e)=>{"use strict";e.d(A,{As:()=>m.A,DR:()=>x,HK:()=>s,OH:()=>I,VI:()=>y,au:()=>v,bQ:()=>b,di:()=>h,gt:()=>D,k4:()=>M,kg:()=>p,t2:()=>P,ub:()=>E,y9:()=>C});var n=e(69781),a=e.n(n),i=e(91977),r=e(40137),o=e(66261),g=e(7939),u=e(42876),c=e(53166),l=e(86573),d=e(92283),f=e(87649),m=e(9337);async function v(S,U,N,w,G,_,K){const k=N&&N.filter(z=>L(z));if(k.length>0){let z=!1,W=!1,Z;try{Z=(await(0,f.b)().addToRichHistory({datasourceUid:S,datasourceName:U??"",queries:k,starred:w,comment:G??""})).warning}catch(H){return H instanceof Error&&(H.name===d.j.StorageFull?(z=!0,_&&(0,l.WI)((0,g.$l)((0,u.t_)(H.message)))):H.name!==d.j.DuplicatedEntry&&(0,l.WI)((0,g.$l)((0,u.t_)((0,c.t)("explore.rich-history-utils-notification.update-failed","Rich History update failed"),H.message)))),{richHistoryStorageFull:z,limitExceeded:W}}return Z&&Z.type===d.V.LimitExceeded&&(W=!0,K&&(0,l.WI)((0,g.$l)((0,u.ZR)(Z.message)))),{richHistoryStorageFull:z,limitExceeded:W}}return{}}async function E(S){return await(0,f.b)().getRichHistory(S)}async function p(S){await(0,f.b)().updateSettings(S)}async function h(){return await(0,f.b)().getSettings()}async function s(){return(0,f.b)().deleteAll()}async function y(S,U){try{return await(0,f.b)().updateStarred(S,U)}catch(N){N instanceof Error&&(0,l.WI)((0,g.$l)((0,u.t_)((0,c.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),N.message)));return}}async function D(S,U){try{return await(0,f.b)().updateComment(S,U)}catch(N){N instanceof Error&&(0,l.WI)((0,g.$l)((0,u.t_)((0,c.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),N.message)));return}}async function C(S){try{return await(0,f.b)().deleteRichHistory(S),S}catch(U){U instanceof Error&&(0,l.WI)((0,g.$l)((0,u.t_)((0,c.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),U.message)));return}}const P=S=>{const U={range:{from:(0,c.t)("explore.rich-history-utils.default-from","now-1h"),to:(0,c.t)("explore.rich-history-utils.default-to","now")},datasource:S.datasourceName,queries:S.queries},N=(0,i.S)(U),w=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return i.Cj.renderUrl(`${w}/explore`,{left:N})},b=S=>{let U;switch(S){case 0:U=(0,c.t)("explore.rich-history-utils.today","today");break;case 1:U=(0,c.t)("explore.rich-history-utils.yesterday","yesterday");break;case 7:U=(0,c.t)("explore.rich-history-utils.a-week-ago","a week ago");break;case 14:U=(0,c.t)("explore.rich-history-utils.two-weeks-ago","two weeks ago");break;default:U=(0,c.t)("explore.rich-history-utils.days-ago","{{num}} days ago",{num:`${S}`})}return U};function T(S){return(0,r.dq)(S,{format:"MMMM D"})}function O(S){const U=(0,n.omit)(S,["key","refId","datasource"]);return JSON.stringify(U)}function R(S,U){let N="";return U===m.A.DatasourceAZ||U===m.A.DatasourceZA?N=S.datasourceName:N=T(S.createdAt),N}function I(S,U){return U?.getQueryDisplayText?U.getQueryDisplayText(S):O(S)}function M(S,U){let N={};return S.forEach(w=>{let G=R(w,U);G in N?N[G]=[...N[G],w]:N[G]=[w]}),N}function x(){return(0,o.F)().getList({mixed:!0}).map(S=>({name:S.name,uid:S.uid}))}function L(S){const U=(0,n.omit)(S,["key","refId","datasource"]);return Object.keys(U).length>0}},9337:(Q,A,e)=>{"use strict";e.d(A,{A:()=>n});var n=(a=>(a.Descending="Descending",a.Ascending="Ascending",a.DatasourceAZ="Datasource A-Z",a.DatasourceZA="Datasource Z-A",a))(n||{})},42646:(Q,A,e)=>{"use strict";e.d(A,{D:()=>d,L:()=>f});var n=e(90093),a=e(85498),i=e(69391),r=e(7939),o=e(42876),g=e(86573),u=e(82866);function c(){return`${window.location.protocol}//${window.location.host}${a.config.appSubUrl}`}function l(m){let v=m.replace(c(),"");return v.startsWith("/")?v.substring(1,v.length):v}const d=(0,n.Z)(async function(m){try{return(await(0,i.i)().post("/api/short-urls",{path:l(m)})).url}catch(v){console.error("Error when creating shortened link: ",v),(0,g.WI)((0,r.$l)((0,o.t_)("Error generating shortened link")))}}),f=async m=>{const v=await d(m);v?((0,u.n9)(v),(0,g.WI)((0,r.$l)((0,o.AT)("Shortened link copied to clipboard")))):(0,g.WI)((0,r.$l)((0,o.t_)("Error generating shortened link")))}},81965:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{getFlotRange:()=>r,getFlotTickDecimals:()=>o,getFlotTickSize:()=>i,getPrecision:()=>c,getScaledDecimals:()=>a,getStringPrecision:()=>l,grafanaTimeFormat:()=>g,logp:()=>u,tickStep:()=>n});function n(d,f,m){const v=Math.sqrt(50),E=Math.sqrt(10),p=Math.sqrt(2),h=Math.abs(f-d)/Math.max(0,m);let s=Math.pow(10,Math.floor(Math.log(h)/Math.LN10));const y=h/s;return y>=v?s*=10:y>=E?s*=5:y>=p&&(s*=2),f<d?-s:s}function a(d,f){return d-Math.floor(Math.log(f)/Math.LN10)}function i(d,f,m,v){const E=(f-d)/m;let p=-Math.floor(Math.log(E)/Math.LN10);const h=v,s=Math.pow(10,-p),y=E/s;let D;return y<1.5?D=1:y<3?(D=2,y>2.25&&(h==null||p+1<=h)&&(D=2.5,++p)):y<7.5?D=5:D=10,D*=s,D}function r(d,f,m,v){let p=+(d??m),h=+(f??v);const s=h-p;if(s===0){const D=Math.abs(h===0?1:h*.25);d===null&&(p-=D),(f==null||d!=null)&&(h+=D)}else d==null&&(p-=s*.02,p<0&&m!=null&&m>=0&&(p=0)),f==null&&(h+=s*.02,h>0&&v!=null&&v<=0&&(h=0));return{min:p,max:h}}function o(d,f,m,v){const{min:E,max:p}=r(m.min,m.max,d,f),h=.3*Math.sqrt(v),s=(p-E)/h,y=-Math.floor(Math.log(s)/Math.LN10),D=Math.pow(10,-y),C=s/D;let P;C<1.5?P=1:C<3?(P=2,C>2.25&&(P=2.5)):C<7.5?P=5:P=10,P*=D;const b=Math.max(0,-Math.floor(Math.log(s)/Math.LN10)+1),T=b-Math.floor(Math.log(P)/Math.LN10);return{tickDecimals:b,scaledDecimals:T}}function g(d,f,m){if(f&&m&&d){const v=m-f,E=v/d/1e3,p=864e5,h=31536e6;return E<=45?"HH:mm:ss":E<=7200||v<=p?"HH:mm":E<=8e4?"MM/DD HH:mm":E<=2419200||v<=h?"MM/DD":"YYYY-MM"}return"HH:mm"}function u(d,f){return Math.log(d)/Math.log(f)}function c(d){const f=d.toString();return l(f)}function l(d){if(isNaN(d))return 0;const f=d.indexOf(".");return f===-1?0:d.length-f-1}},76447:(Q,A,e)=>{"use strict";e.d(A,{e:()=>a,h:()=>i});var n=e(74011);const a=(r,o)=>{const g={from:(0,n.zh)(o.from),to:(0,n.zh)(o.to)},u=(g.to.valueOf()-g.from.valueOf())/2;let c,l;return r===-1?(c=g.to.valueOf()-u,l=g.from.valueOf()-u):r===1?(c=g.to.valueOf()+u,l=g.from.valueOf()+u,c>Date.now()&&g.to.valueOf()<Date.now()&&(c=Date.now(),l=g.from.valueOf())):(c=g.to.valueOf(),l=g.from.valueOf()),{from:l,to:c}},i=(r,o)=>{const g=r.to.valueOf()-r.from.valueOf(),u=r.to.valueOf()-g/2,c=g===0?3e4:g*o,l=u+c/2;return{from:u-c/2,to:l}}},71510:(Q,A,e)=>{"use strict";e.d(A,{q7:()=>a});var n=e(74011);function a(o,g){if(!(o.fromDayOfWeek||o.from)&&!(o.toDayOfWeek||o.to))return[];const u={...o};u.from&&!u.to&&(u.to=u.from),!u.from&&u.to&&(u.from=u.to);const c={from:i(u.from),to:i(u.to)};if(!u.fromDayOfWeek&&u.toDayOfWeek&&(u.fromDayOfWeek=u.toDayOfWeek),!u.toDayOfWeek&&u.fromDayOfWeek&&(u.toDayOfWeek=u.fromDayOfWeek),u.fromDayOfWeek&&(c.from.dayOfWeek=Number(u.fromDayOfWeek)),u.toDayOfWeek&&(c.to.dayOfWeek=Number(u.toDayOfWeek)),c.from.dayOfWeek&&c.from.h==null&&c.from.m==null&&(c.from.h=0,c.from.m=0,c.from.s=0),c.to.dayOfWeek&&c.to.h==null&&c.to.m==null&&(c.to.h=23,c.to.m=59,c.to.s=59),!c.from||!c.to)return[];c.from.h==null&&(c.from.h=0),c.to.h==null&&(c.to.h=23);const l=[],d=(0,n.CQ)(g.from).utc();for(d.set("hour",0),d.set("minute",0),d.set("second",0),d.set("millisecond",0),d.add(c.from.h,"hours"),d.add(c.from.m,"minutes"),d.add(c.from.s,"seconds");d.unix()<=g.to.unix();){for(;c.from.dayOfWeek&&c.from.dayOfWeek!==d.isoWeekday();)d.add(24,"hours");if(d.unix()>g.to.unix())break;const f=(0,n.CQ)(d).utc();if(f.hour)if(c.from.h<=c.to.h)f.add(c.to.h-c.from.h,"hours");else if(c.from.h>c.to.h)for(;f.hour()!==c.to.h;)f.add(1,"hours");else for(f.add(24-c.from.h,"hours");f.hour()!==c.to.h;)f.add(1,"hours");for(f.set("minute",c.to.m??0),f.set("second",c.to.s??0);c.to.dayOfWeek&&c.to.dayOfWeek!==f.isoWeekday();)f.add(24,"hours");d.unix()<g.from.unix()&&f.unix()<g.from.unix()||d.unix()>g.to.unix()&&f.unix()>g.to.unix()||l.push({from:d.valueOf(),to:f.valueOf()}),d.add(24,"hours")}return l}function i(o){const g={};if(!o?.length)return g;const u=o.split(":");return u?.length&&(g.h=Math.min(23,Math.max(0,Number(u[0]))),u.length>1&&(g.m=Math.min(60,Math.max(0,Number(u[1]))),u.length>2&&(g.s=Math.min(60,Math.max(0,Number(u[2])))))),g}function r(o){if(!o||o.h==null&&o.m==null&&o.s==null)return"";let g=String(o.h??0).padStart(2,"0")+":"+String(o.m??0).padStart(2,"0");return o.s!=null&&(g+=String(o.s??0).padStart(2,"0")),g}},60226:(Q,A,e)=>{"use strict";e.d(A,{et:()=>r,fy:()=>g,nO:()=>o,np:()=>c});var n=e(47862),a=e(56790),i=e(85666);function r(l){return l.sort((f,m)=>f[0]-m[0]),l.reduce((f,m)=>{if(!f.length)return[m];const v=f.slice(-1)[0],[E,p]=v,[h,s]=m;return s<p?f:h>p?[...f,m]:[...f.slice(0,-1),[E,s]]},[]).reduce((f,m)=>f+(m[1]-m[0]),0)}function o(l){const d={};let f;for(let m=0;f=l(m),!!f;m++){d[f.id]?d[f.id].span=f.span:d[f.id]={span:f.span,children:[]};for(const v of f.parentIds)v&&(d[v]?d[v].children.push(f.id):d[v]={span:void 0,children:[f.id]})}return d}function g(l,d,f){return{main:`${u(l)}ms (${u(l/d*100)}%)`,secondary:`${u(f)}ms (${u(f/l*100)}%)`}}function u(l){return parseFloat(l.toFixed(2))}function c(){const l=new n.v({fields:[{name:a.z.id,type:i.fS.string},{name:a.z.title,type:i.fS.string},{name:a.z.subTitle,type:i.fS.string},{name:a.z.mainStat,type:i.fS.string,config:{displayName:"Total time (% of trace)"}},{name:a.z.secondaryStat,type:i.fS.string,config:{displayName:"Self time (% of total)"}},{name:a.z.color,type:i.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),d=new n.v({fields:[{name:a.z.id,type:i.fS.string},{name:a.z.target,type:i.fS.string},{name:a.z.source,type:i.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[l,d]}},75759:(Q,A,e)=>{"use strict";e.d(A,{v:()=>a});let n="";const a=()=>{const r=new URLSearchParams(window.location.search).get("auth_token");return r!==null&&r!==""?(n=r,r):n}},13250:(Q,A,e)=>{"use strict";e.d(A,{ep:()=>o,f$:()=>c,sF:()=>g,xW:()=>u});var n=e(61168),a=e(71892),i=e(69391);const r=({baseUrl:l})=>async({url:d,method:f="GET",body:m})=>{try{const{data:v}=await(0,a.n)((0,i.i)().fetch({url:l+d,method:f,data:m}));return{data:v}}catch(v){return{error:v}}},o=(0,n.LC)({reducerPath:"togglesApi",baseQuery:r({baseUrl:"/api"}),endpoints:l=>({getManagerState:l.query({query:()=>({url:"/featuremgmt/state"})}),getFeatureToggles:l.query({query:()=>({url:"/featuremgmt"})}),updateFeatureToggles:l.mutation({query:d=>({url:"/featuremgmt",method:"POST",body:{featureToggles:d}})})})}),{useGetManagerStateQuery:g,useGetFeatureTogglesQuery:u,useUpdateFeatureTogglesMutation:c}=o},48334:(Q,A,e)=>{"use strict";e.d(A,{A:()=>g});var n=e(31733),a=e(34824),i=e(38834);const o=Object.values(a.B).filter(u=>u!==a.B.None).map(u=>({label:u,value:u}));function g({value:u,onChange:c,"aria-label":l,inputId:d,autoFocus:f,...m}){return n.createElement(i.Ph,{inputId:d,value:u,options:o,onChange:v=>c(v.value),placeholder:"Choose role...","aria-label":l,autoFocus:f,...m})}},64175:(Q,A,e)=>{"use strict";e.d(A,{B9:()=>h,CP:()=>x,Dx:()=>s,Fm:()=>I,IS:()=>N,Jk:()=>b,M6:()=>k,Nq:()=>E,PK:()=>m,R5:()=>K,V0:()=>U,Xx:()=>D,Y3:()=>L,_1:()=>R,bN:()=>P,b_:()=>S,h8:()=>y,j4:()=>M,nt:()=>W,oO:()=>z,tQ:()=>p,uV:()=>T,uh:()=>G,xP:()=>Z});var n=e(69781),a=e.n(n),i=e(40137),r=e(28298),o=e(69391),g=e(19690),u=e(83811),c=e(75923),l=e(10704),d=e(42342),f=e(88761);function m(H){return async X=>{try{X((0,f.UA)(!1)),await X(v(H)),await X(C(H)),await X(O(H)),u.default.ldapEnabled&&(0,r.v)("ldapsync")&&await X(M()),X((0,f.UA)(!0))}catch(Y){if(console.error(Y),(0,o.kW)(Y)){const ne={title:Y.data.message,body:Y.data.error};X((0,f.sL)(ne))}}}}function v(H){return async X=>{const Y=await(0,o.i)().get(`/api/users/${H}`,(0,l.y)());X((0,f.pm)(Y))}}function E(H){return async X=>{await(0,o.i)().put(`/api/users/${H.id}`,H),X(m(H.id))}}function p(H,X){return async Y=>{const ne={password:X};await(0,o.i)().put(`/api/admin/users/${H}/password`,ne),Y(m(H))}}function h(H){return async X=>{await(0,o.i)().post(`/api/admin/users/${H}/disable`),g.E1.push("/admin/users")}}function s(H){return async X=>{await(0,o.i)().post(`/api/admin/users/${H}/enable`),X(m(H))}}function y(H){return async X=>{await(0,o.i)().delete(`/api/admin/users/${H}`),g.E1.push("/admin/users")}}function D(H,X){return async Y=>{const ne={isGrafanaAdmin:X};await(0,o.i)().put(`/api/admin/users/${H}/permissions`,ne),Y(m(H))}}function C(H){return async X=>{const Y=await(0,o.i)().get(`/api/users/${H}/orgs`);X((0,f.fm)(Y))}}function P(H,X,Y){return async ne=>{const se={loginOrEmail:H.login,role:Y};await(0,o.i)().post(`/api/orgs/${X}/users/`,se),ne(m(H.id))}}function b(H,X,Y){return async ne=>{const se={role:Y};await(0,o.i)().patch(`/api/orgs/${X}/users/${H}`,se),ne(m(H))}}function T(H,X){return async Y=>{await(0,o.i)().delete(`/api/orgs/${X}/users/${H}`),Y(m(H))}}function O(H){return async X=>{if(!c.Vt.hasPermission(d.AccessControlAction.UsersAuthTokenList))return;const Y=await(0,o.i)().get(`/api/admin/users/${H}/auth-tokens`);Y.reverse();const ne=Y.map(se=>({id:se.id,isActive:se.isActive,seenAt:(0,i.E8)(se.seenAt),createdAt:se.createdAt,clientIp:se.clientIp,browser:se.browser,browserVersion:se.browserVersion,os:se.os,osVersion:se.osVersion,device:se.device}));X((0,f.RC)(ne))}}function R(H,X){return async Y=>{const ne={authTokenId:H};await(0,o.i)().post(`/api/admin/users/${X}/revoke-auth-token`,ne),Y(O(X))}}function I(H){return async X=>{await(0,o.i)().post(`/api/admin/users/${H}/logout`),X(O(H))}}function M(){return async H=>{const X=c.Vt.hasPermission(d.AccessControlAction.LDAPStatusRead);if((0,r.v)("ldapsync")&&X){const Y=await(0,o.i)().get("/api/admin/ldap-sync-status");H((0,f.CY)(Y))}}}function x(H){return async X=>{await(0,o.i)().post(`/api/admin/ldap/sync/${H}`),X(m(H))}}function L(){return async H=>{if(c.Vt.hasPermission(d.AccessControlAction.LDAPStatusRead))try{const X=await(0,o.i)().get("/api/admin/ldap/status");H((0,f.Ls)(X))}catch(X){if((0,o.kW)(X)){X.isHandled=!0;const Y={title:X.data.message,body:X.data.error};H((0,f.y3)(Y))}}}}function S(H){return async X=>{try{const Y=await(0,o.i)().get(`/api/admin/ldap/${encodeURIComponent(H)}`),{name:ne,surname:se,email:re,login:ge,isGrafanaAdmin:q,isDisabled:me,roles:oe,teams:fe}=Y,ve={info:{name:ne,surname:se,email:re,login:ge},permissions:{isGrafanaAdmin:q,isDisabled:me},roles:oe,teams:fe};X((0,f.sJ)(ve))}catch(Y){if((0,o.kW)(Y)){Y.isHandled=!0;const ne={title:Y.data.message,body:Y.data.error};X((0,f.eq)()),X((0,f.VB)(ne))}}}}function U(){return H=>{H((0,f.WO)())}}function N(){return H=>{H((0,f.WO)()),H((0,f.eq)())}}const w=H=>H.map(X=>Array.isArray(X.value)?X.value.map(Y=>`${X.name}=${Y.value}`).join("&"):`${X.name}=${X.value}`).join("&");function G(){return async(H,X)=>{try{const{perPage:Y,page:ne,query:se,filters:re,sort:ge}=X().userListAdmin;let q=`/api/users/search?perpage=${Y}&page=${ne}&query=${se}&${w(re)}`;ge&&(q+=`&sort=${ge}`);const me=await(0,o.i)().get(q);H((0,f.xh)(me))}catch(Y){(0,f.k7)(),console.error(Y)}}}const _=(0,n.debounce)(H=>H(G()),500);function K(H){return async X=>{X((0,f.tZ)()),X((0,f.aj)(H)),_(X)}}function k(H){return async X=>{X((0,f.tZ)()),X((0,f.qz)(H)),_(X)}}function z(H){return async X=>{X((0,f.tZ)()),X((0,f.PJ)(H)),X(G())}}function W({sortBy:H}){const X=H.length?`${H[0].id}-${H[0].desc?"desc":"asc"}`:void 0;return async(Y,ne)=>{ne().userListAdmin.sort!==X&&(Y((0,f.tZ)()),Y((0,f.UL)(X)),Y(G()))}}function Z(){return async(H,X)=>{try{let Y="/api/anonymous/devices";const ne=await(0,o.i)().get(Y);H((0,f.QO)({devices:ne}))}catch(Y){(0,f.k7)(),console.error(Y)}}}},88761:(Q,A,e)=>{"use strict";e.d(A,{CY:()=>c,Ls:()=>g,PJ:()=>I,QO:()=>N,RC:()=>h,UA:()=>s,UL:()=>x,VB:()=>l,WO:()=>r,ZP:()=>G,aj:()=>R,eq:()=>o,fm:()=>p,k7:()=>O,pm:()=>E,qz:()=>M,sJ:()=>d,sL:()=>y,tZ:()=>T,xh:()=>b,y3:()=>u});var n=e(4579);const a={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},i=(0,n.oM)({name:"ldap",initialState:a,reducers:{ldapConnectionInfoLoadedAction:(_,K)=>({..._,ldapError:void 0,connectionInfo:K.payload}),ldapFailedAction:(_,K)=>({..._,ldapError:K.payload}),ldapSyncStatusLoadedAction:(_,K)=>({..._,syncInfo:K.payload}),userMappingInfoLoadedAction:(_,K)=>({..._,user:K.payload,userError:void 0}),userMappingInfoFailedAction:(_,K)=>({..._,user:void 0,userError:K.payload}),clearUserMappingInfoAction:(_,K)=>({..._,user:void 0}),clearUserErrorAction:(_,K)=>({..._,userError:void 0})}}),{clearUserErrorAction:r,clearUserMappingInfoAction:o,ldapConnectionInfoLoadedAction:g,ldapFailedAction:u,ldapSyncStatusLoadedAction:c,userMappingInfoFailedAction:l,userMappingInfoLoadedAction:d}=i.actions,f=i.reducer,m={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},v=(0,n.oM)({name:"userAdmin",initialState:m,reducers:{userProfileLoadedAction:(_,K)=>({..._,user:K.payload}),userOrgsLoadedAction:(_,K)=>({..._,orgs:K.payload}),userSessionsLoadedAction:(_,K)=>({..._,sessions:K.payload}),userAdminPageLoadedAction:(_,K)=>({..._,isLoading:!K.payload}),userAdminPageFailedAction:(_,K)=>({..._,error:K.payload,isLoading:!1})}}),{userProfileLoadedAction:E,userOrgsLoadedAction:p,userSessionsLoadedAction:h,userAdminPageLoadedAction:s,userAdminPageFailedAction:y}=v.actions,D=v.reducer,C={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},P=(0,n.oM)({name:"userListAdmin",initialState:C,reducers:{usersFetched:(_,K)=>{const{totalCount:k,perPage:z,...W}=K.payload,Z=Math.ceil(k/z);return{..._,...W,totalPages:Z,perPage:z,showPaging:Z>1,isLoading:!1}},usersFetchBegin:_=>({..._,isLoading:!0}),usersFetchEnd:_=>({..._,isLoading:!1}),queryChanged:(_,K)=>({..._,query:K.payload,page:0}),pageChanged:(_,K)=>({..._,page:K.payload}),sortChanged:(_,K)=>({..._,page:0,sort:K.payload}),filterChanged:(_,K)=>{const{name:k,value:z}=K.payload;return _.filters.some(W=>W.name===k)?{..._,page:0,filters:_.filters.map(W=>W.name===k?{...W,value:z}:W)}:{..._,page:0,filters:[..._.filters,K.payload]}}}}),{usersFetched:b,usersFetchBegin:T,usersFetchEnd:O,queryChanged:R,pageChanged:I,filterChanged:M,sortChanged:x}=P.actions,L=P.reducer,S={devices:[]},U=(0,n.oM)({name:"userListAnonymousDevices",initialState:S,reducers:{usersAnonymousDevicesFetched:(_,K)=>{const{devices:k}=K.payload;return{..._,devices:k,isLoading:!1}}}}),{usersAnonymousDevicesFetched:N}=U.actions,w=U.reducer,G={ldap:f,userAdmin:D,userListAdmin:L,userListAnonymousDevices:w}},48436:(Q,A,e)=>{"use strict";e.d(A,{Yb:()=>a,d5:()=>r});var n=e(85498);const a=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function i(){const o=n.config.licenseInfo?.trialExpiry;return!!(o&&o>0)}const r=()=>i()&&n.config.featureToggles.featureHighlights},74201:(Q,A,e)=>{"use strict";e.d(A,{$:()=>u,Z:()=>y});var n=e(69781),a=e.n(n),i=e(29313);const r=new i.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),o=[{text:"Query",value:"query"}],g={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var u=(D=>(D.IsAbove="gt",D.IsBelow="lt",D.IsOutsideRange="outside_range",D.IsWithinRange="within_range",D.HasNoValue="no_value",D))(u||{});const c=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],l=[{text:"OR",value:"or"},{text:"AND",value:"and"}],d=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],f=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],m=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function v(D){const C=new i.zU({type:D.type,defaultParams:[]});return new i.XN(D,C)}function E(D){return D.toLowerCase().replace(/_/g,"").split(" ")[0]}function p(D){switch(E(D)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function h(D,C){return(0,n.reduce)(D,(P,b)=>(b.metric!==void 0&&b.value!==void 0&&P.push(b.metric+"="+b.value),b.Metric!==void 0&&b.Value!==void 0&&P.push(b.Metric+"="+b.Value),P),[]).join(C)}function s(D){return(0,n.isArray)(D.data)?h(D.data,", "):(0,n.isArray)(D.data.evalMatches)?h(D.data.evalMatches,", "):D.data.error?"Error: "+D.data.error:""}const y={alertQueryDef:r,getStateDisplayModel:p,conditionTypes:o,evalFunctions:c,evalOperators:l,noDataModes:f,executionErrorModes:m,reducerTypes:d,createReducerPart:v,getAlertAnnotationInfo:s,alertStateSortScore:g}},29313:(Q,A,e)=>{"use strict";e.d(A,{C7:()=>g,D:()=>o,XN:()=>r,zU:()=>i});var n=e(69781),a=e.n(n);class i{constructor(d){this.type=d.type,this.params=d.params,this.defaultParams=d.defaultParams,this.renderer=d.renderer,this.category=d.category,this.addStrategy=d.addStrategy}}class r{constructor(d,f){if(this.part=d,this.def=f,!this.def)throw{message:"Could not find query part "+d.type};d.params=d.params||(0,n.clone)(this.def.defaultParams),this.params=d.params,this.text="",this.updateText()}render(d){return this.def.renderer(this,d)}hasMultipleParamsInString(d,f){return d.indexOf(",")===-1?!1:this.def.params[f+1]&&this.def.params[f+1].optional}updateParam(d,f){if(this.hasMultipleParamsInString(d,f)){(0,n.each)(d.split(","),(m,v)=>{this.updateParam(m.trim(),v)});return}d===""&&this.def.params[f].optional?this.params.splice(f,1):this.params[f]=d,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let d=this.def.type+"(";d+=this.params.join(", "),d+=")",this.text=d}}function o(l,d){const f=l.def.type+"(",m=(0,n.map)(l.params,(v,E)=>{const p=l.def.params[E];return p.type==="time"&&v==="auto"&&(v="$__interval"),p.quote==="single"?"'"+v+"'":p.quote==="double"?'"'+v+'"':v});return d&&m.unshift(d),f+m.join(", ")+")"}function g(l,d){return d+" "+l.params[0]}function u(l,d){return l.params[0]}function c(l,d){return'"'+l.params[0]+'"'}},88599:(Q,A,e)=>{"use strict";e.d(A,{ZP:()=>b,Gr:()=>d,gz:()=>E,Oc:()=>p,K:()=>y,J0:()=>D,T2:()=>s,ql:()=>h});var n=e(4579),a=e(74011),i=e(51158),r=e(39138),o=e(84415);const u=(0,i.combineReducers)({dataSources:(0,r.jK)("dataSources",o.nw,({rulesSourceName:R})=>R).reducer,promRules:(0,r.jK)("promRules",o.y6,({rulesSourceName:R})=>R).reducer,rulerRules:(0,r.jK)("rulerRules",o.UR,({rulesSourceName:R})=>R).reducer,silences:(0,r.jK)("silences",o.je,R=>R).reducer,ruleForm:(0,i.combineReducers)({saveRule:(0,r.i6)("saveRule",o.wy).reducer,existingRule:(0,r.i6)("existingRule",o.on).reducer}),grafanaNotifiers:(0,r.i6)("grafanaNotifiers",o.Vj).reducer,saveAMConfig:(0,r.i6)("saveAMConfig",o.mM).reducer,deleteAMConfig:(0,r.i6)("deleteAMConfig",o.Nc).reducer,updateSilence:(0,r.i6)("updateSilence",o.QY).reducer,amAlerts:(0,r.jK)("amAlerts",o.dB,R=>R).reducer,folders:(0,r.jK)("folders",o.vL,R=>R).reducer,amAlertGroups:(0,r.jK)("amAlertGroups",o.mS,R=>R).reducer,testReceivers:(0,r.i6)("testReceivers",o.D8).reducer,updateLotexNamespaceAndGroup:(0,r.i6)("updateLotexNamespaceAndGroup",o.hv).reducer,externalAlertmanagers:(0,i.combineReducers)({alertmanagerConfig:(0,r.i6)("alertmanagerConfig",o.wE).reducer,discoveredAlertmanagers:(0,r.i6)("discoveredAlertmanagers",o.zy).reducer}),managedAlertStateHistory:(0,r.i6)("managedAlertStateHistory",o.Ms).reducer});var c=e(74201);const l={items:[],searchQuery:"",isLoading:!1},d={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function f(R,I){const M=c.Z.getStateDisplayModel(I),x={...R,stateText:M.text,stateIcon:M.iconClass,stateClass:M.stateClass,stateAge:(0,a.CQ)(R.newStateDate).fromNow(!0)};return x.state!=="paused"&&(x.executionError&&(x.info="Execution Error: "+x.executionError),x.evalData&&x.evalData.noData&&(x.info="Query returned no data")),x}const m=(0,n.oM)({name:"alertRules",initialState:l,reducers:{loadAlertRules:R=>({...R,isLoading:!0}),loadedAlertRules:(R,I)=>{const x=I.payload.map(L=>f(L,L.state));return{...R,items:x,isLoading:!1}},setSearchQuery:(R,I)=>({...R,searchQuery:I.payload})}}),v=(0,n.oM)({name:"notificationChannel",initialState:d,reducers:{setNotificationChannels:(R,I)=>({...R,notificationChannelTypes:O(I.payload),notifiers:I.payload}),notificationChannelLoaded:(R,I)=>{const M=I.payload,L=R.notifiers.find(S=>S.type===M.type).options.filter(S=>S.secure);return L.length>0&&L.some(S=>M.settings[S.propertyName]!=="")?T(R,I.payload,L):{...R,notificationChannel:M}},resetSecureField:(R,I)=>({...R,notificationChannel:{...R.notificationChannel,secureFields:{...R.notificationChannel.secureFields,[I.payload]:!1}}})}}),{loadAlertRules:E,loadedAlertRules:p,setSearchQuery:h}=m.actions,{setNotificationChannels:s,notificationChannelLoaded:y,resetSecureField:D}=v.actions,C=m.reducer,P=v.reducer,b={alertRules:C,notificationChannel:P,unifiedAlerting:u};function T(R,I,M){const x={},L={};return M.forEach(S=>{L[S.propertyName]=I.settings[S.propertyName],x[S.propertyName]=""}),{...R,notificationChannel:{...I,settings:{...I.settings,...x},secureSettings:{...L}}}}function O(R){return R.map(I=>({value:I.type,label:I.name,...I,typeName:I.type})).sort((I,M)=>I.name>M.name?1:-1)}},80127:(Q,A,e)=>{"use strict";e.d(A,{$I:()=>D,Ej:()=>T,Io:()=>m,PN:()=>f,Z0:()=>b,bA:()=>E,pM:()=>v,yT:()=>h,z7:()=>d});var n=e(74011),a=e(47121),i=e(75699),r=e(70621),o=e(69391),g=e(85498),u=e(64704),c=e(75923);const l=7,d={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function f(O,R={}){g.config.grafanaJavascriptAgent.enabled&&a.s.api.pushLog([O],{level:i.in.INFO,context:{...R,module:"Alerting"}})}function m(O,R={}){(0,r.H)(O,{...R,module:"Alerting"})}function v(O,R,I){return async function(...M){const x=performance.now(),L=await O(...M);return f(R,{loadTimeMs:(performance.now()-x).toFixed(0),...I}),L}}function E(O,R,I){return async(...M)=>{const x=performance.now(),L=await O(...M),{namespacesCount:S,groupsCount:U,rulesCount:N}=p(L);return f(R,{loadTimeMs:(performance.now()-x).toFixed(0),namespacesCount:S,groupsCount:U,rulesCount:N,...I}),L}}function p(O){const R=O.length,I=O.flatMap(L=>L.groups).length,M=O.flatMap(L=>L.groups).flatMap(L=>L.rules).length;return{namespacesCount:R.toFixed(0),groupsCount:I.toFixed(0),rulesCount:M.toFixed(0)}}function h(O,R,I){return async(...M)=>{const x=performance.now(),L=await O(...M),{namespacesCount:S,groupsCount:U,rulesCount:N}=s(L);return f(R,{loadTimeMs:(performance.now()-x).toFixed(0),namespacesCount:S,groupsCount:U,rulesCount:N,...I}),L}}function s(O){const R=Object.keys(O).length,I=Object.values(O).flatMap(x=>x),M=I.flatMap(x=>x.rules);return{namespacesCount:R.toFixed(0),groupsCount:I.length.toFixed(0),rulesCount:M.length.toFixed(0)}}async function y(){try{const{createdAt:O}=await(0,o.i)().get("/api/user"),R=(0,n.CQ)().subtract(l,"days"),I=(0,n.CQ)(O);return R.isBefore(I)}catch{return!0}}const D=async(O={grafana_version:g.config.buildInfo.version,org_id:c.Vt.user.orgId,user_id:c.Vt.user.id})=>{await y()||(0,u.ff)("grafana_alerting_navigation",O)},C=async O=>{await y()||reportInteraction("grafana_alerting_rule_creation",O)},P=async O=>{await y()||reportInteraction("grafana_alerting_rule_aborted",O)},b=async O=>{await y()||(0,u.ff)("grafana_alerting_rule_form_error",O)},T=async O=>{const R={grafana_version:g.config.buildInfo.version,org_id:c.Vt.user.orgId,user_id:c.Vt.user.id};(0,u.ff)("grafana_alerting_insights",{...R,...O})}},15546:(Q,A,e)=>{"use strict";e.d(A,{alertRuleApi:()=>l});var n=e(67451),a=e(59462),i=e(96198),r=e(68568),o=e(35304),g=e(21352);const u="/api/v1/rule/test/grafana",c="api/prometheus/grafana/api/v1/rules",l=r.C.injectEndpoints({endpoints:d=>({preview:d.mutation({query:({alertQueries:f,condition:m,customLabels:v,folder:E,alertName:p,alertUid:h})=>({url:u,data:{rule:{grafana_alert:{data:f,condition:m,no_data_state:"Alerting",title:p,uid:h??"N/A"},for:"0s",labels:(0,a.bR)(v),annotations:{}},folderUid:E.uid,folderTitle:E.title},method:"POST"})}),prometheusRulesByNamespace:d.query({query:({limitAlerts:f,identifier:m,filter:v,state:E,matcher:p})=>{const h=new URLSearchParams;f&&h.set("limit_alerts",String(f)),m&&((0,i.qE)(m)||(0,i.E4)(m))&&(h.set("file",m.namespace),h.set("rule_group",m.groupName));const s=(0,o.hd)(h,v);return{url:c,params:(0,o.Tb)(s,E,p)}},transformResponse:f=>(0,o.lL)(f.data.groups,n.GC)}),prometheusRuleNamespaces:d.query({query:({ruleSourceName:f,namespace:m,groupName:v,ruleName:E})=>{const p={};return p.file=m,p.rule_group=v,p.rule_name=E,{url:`api/prometheus/${(0,n.gt)(f)}/api/v1/rules`,params:p}},transformResponse:(f,m,v)=>(0,o.lL)(f.data.groups,v.ruleSourceName)}),rulerRules:d.query({query:({rulerConfig:f,filter:m})=>{const{path:v,params:E}=(0,g.IN)(f).rules(m);return{url:v,params:E}}}),rulerRuleGroup:d.query({query:({rulerConfig:f,namespace:m,group:v})=>{const{path:E,params:p}=(0,g.IN)(f).namespaceGroup(m,v);return{url:E,params:p}}}),exportRules:d.query({query:({format:f,folderUid:m,group:v,ruleUid:E})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:f,folderUid:m,group:v,ruleUid:E},responseType:"text"}),keepUnusedDataFor:0}),exportReceiver:d.query({query:({receiverName:f,decrypt:m,format:v})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:v,decrypt:m,name:f},responseType:"text"}),keepUnusedDataFor:0}),exportReceivers:d.query({query:({decrypt:f,format:m})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:m,decrypt:f},responseType:"text"}),keepUnusedDataFor:0}),exportPolicies:d.query({query:({format:f})=>({url:"/api/v1/provisioning/policies/export/",params:{format:f},responseType:"text"}),keepUnusedDataFor:0}),exportModifiedRuleGroup:d.mutation({query:({payload:f,format:m,nameSpace:v})=>({url:`/api/ruler/grafana/api/v1/rules/${v}/export/`,params:{format:m},responseType:"text",data:f,method:"POST"})}),exportMuteTimings:d.query({query:({format:f})=>({url:"/api/v1/provisioning/mute-timings/export/",params:{format:f},responseType:"text"}),keepUnusedDataFor:0}),exportMuteTiming:d.query({query:({format:f,muteTiming:m})=>({url:`/api/v1/provisioning/mute-timings/${m}/export/`,params:{format:f},responseType:"text"}),keepUnusedDataFor:0})})})},68568:(Q,A,e)=>{"use strict";e.d(A,{C:()=>g});var n=e(61168),a=e(71892),i=e(69391),r=e(80127);const o=()=>async u=>{try{const c=performance.now(),{data:l,...d}=await(0,a.n)((0,i.i)().fetch(u));return(0,r.PN)("Request finished",{loadTimeMs:(performance.now()-c).toFixed(0),url:u.url,method:u.method??"",responseStatus:d.statusText}),{data:l,meta:d}}catch(c){return{error:c}}},g=(0,n.LC)({reducerPath:"alertingApi",baseQuery:o(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration","OnCallIntegrations","OrgMigrationState"],endpoints:()=>({})})},18892:(Q,A,e)=>{"use strict";e.d(A,{$l:()=>P,Bp:()=>p,CN:()=>c,Ch:()=>g,QK:()=>m,U7:()=>l,UK:()=>E,XK:()=>v,Zo:()=>b,dx:()=>d,iT:()=>f,oy:()=>u,tK:()=>C});var n=e(71892),a=e(91977),i=e(20298),r=e(69391),o=e(67451);async function g(O){try{const R=await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(O)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:R.data.template_files??{},template_file_provenances:R.data.template_file_provenances??{},alertmanager_config:R.data.alertmanager_config??{},last_applied:R.data.last_applied,id:R.data.id}}catch(R){if(O===o.GC&&(0,r.kW)(R)&&R.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw R}}async function u(O,R){await(0,n.n)((0,r.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,o.gt)(O)}/config/api/v1/alerts`,data:R,showErrorAlert:!1,showSuccessAlert:!1}))}async function c(O){await(0,n.n)((0,r.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,o.gt)(O)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function l(O){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(O)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function d(O,R){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(O)}/api/v2/silences`,data:R,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function f(O,R){await(0,r.i)().delete(`/api/alertmanager/${(0,o.gt)(O)}/api/v2/silence/${encodeURIComponent(R)}`)}async function m(O,R,I=!0,M=!0,x=!0){const L=a.Cj.toUrlParams({silenced:I,active:M,inhibited:x})+R?.map(U=>`filter=${encodeURIComponent(`${T(U.name)}=${U.isRegex?"~":""}"${T(U.value)}"`)}`).join("&")||"";return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(O)}/api/v2/alerts`+(L?"?"+L:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function v(O){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(O)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(O){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(O)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function p(O,R,I){const M={receivers:R,alert:I};try{const x=await(0,n.n)((0,r.i)().fetch({method:"POST",data:M,url:`/api/alertmanager/${(0,o.gt)(O)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(h(x.data))throw new Error(D(x.data))}catch(x){throw(0,r.kW)(x)&&s(x.data)&&h(x.data)?new Error(D(x.data)):x}}function h(O){return O.receivers.some(R=>R.grafana_managed_receiver_configs.some(I=>I.status==="failed"))}function s(O){return(0,i.Kn)(O)&&"receivers"in O&&Array.isArray(O.receivers)?O.receivers.every(y):!1}function y(O){return(0,i.Kn)(O)&&"name"in O&&typeof O.name=="string"&&"grafana_managed_receiver_configs"in O&&Array.isArray(O.grafana_managed_receiver_configs)}function D(O){return O.receivers.flatMap(R=>R.grafana_managed_receiver_configs.filter(I=>I.status==="failed").map(I=>I.error??"Unknown error.")).join("; ")}async function C(O){await(0,n.n)((0,r.i)().fetch({method:"POST",data:O,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{b()})}async function P(){return(await(0,n.n)((0,r.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function b(){return(await(0,n.n)((0,r.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function T(O){return O.replace(/"/g,'\\"')}},42460:(Q,A,e)=>{"use strict";e.d(A,{alertmanagerApi:()=>E});var n=e(69781),a=e.n(n),i=e(86573),r=e(80127),o=e(10322),g=e(67451),u=e(66172),c=e(39138),l=e(68568),d=e(18892),f=e(22500);const m=10,v=30*1e3,E=l.C.injectEndpoints({endpoints:p=>({getAlertmanagerAlerts:p.query({query:({amSourceName:h,filter:s})=>{const y=s?.matchers?.filter(R=>R.name&&R.value).map(R=>`${R.name}${(0,o.zy)(R)}${(0,u.sM)(R.value)}`),{silenced:D,inhibited:C,unprocessed:P,active:b}=s||{},T=Object.fromEntries(Object.entries({silenced:D,active:b,inhibited:C,unprocessed:P}).filter(([R,I])=>I!==void 0)),O={filter:y};return T&&Object.keys(T).forEach(R=>{O[R]=T[R]}),{url:`/api/alertmanager/${(0,g.gt)(h)}/api/v2/alerts`,params:O}}}),getAlertmanagerAlertGroups:p.query({query:({amSourceName:h})=>({url:`/api/alertmanager/${(0,g.gt)(h)}/api/v2/alerts/groups`})}),grafanaNotifiers:p.query({query:()=>({url:"/api/alert-notifiers"})}),getAlertmanagerChoiceStatus:p.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:p.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:p.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:h=>h.data}),saveExternalAlertmanagersConfig:p.mutation({query:h=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:h}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:p.query({query:()=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/history?limit=${m}`})}),resetAlertManagerConfigToOldVersion:p.mutation({query:h=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/history/${h.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:p.query({queryFn:async h=>{const s=h===g.GC;if((0,g.RY)(h))return(0,c.$b)((0,d.UK)(h).then(O=>({data:{alertmanager_config:O.config,template_files:{}}})));const{data:D}=await(0,i.WI)(f.T.endpoints.discoverAmFeatures.initiate({amSourceName:h})),C={alertmanager_config:{},template_files:{},template_file_provenances:{}},P=D?.lazyConfigInit??!1,b=(0,r.pM)(d.Ch,`[${h}] Alertmanager config loaded`,{dataSourceName:h,thunk:"unifiedalerting/fetchAmConfig"}),T=(0,u.fm)(()=>b(h),O=>!!(0,c.kk)(O)?.includes("alertmanager storage object not found")&&!P,v).then(O=>s?O:(0,n.isEmpty)(O.alertmanager_config)&&(0,n.isEmpty)(O.template_files)?(0,d.UK)(h).then(I=>({alertmanager_config:I.config,template_files:{},template_file_provenances:O.template_file_provenances,last_applied:O.last_applied,id:O.id})):O).then(O=>O??C).then(O=>({data:O})).catch(O=>{if(P&&(0,c.kk)(O)?.includes("alertmanager storage object not found"))return{data:C};throw O});return(0,c.$b)(T).catch(O=>({error:O,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:p.mutation({query:({selectedAlertmanager:h,config:s,...y})=>({url:`/api/alertmanager/${(0,g.gt)(h)}/config/api/v1/alerts`,method:"POST",data:s,...y}),invalidatesTags:["AlertmanagerConfiguration"]}),getContactPointsStatus:p.query({query:()=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/api/v1/receivers`}),transformResponse:h=>{const s=y=>y.startsWith("0001-01-01");return h.map(y=>({...y,integrations:y.integrations.map(D=>{const C=s(D.lastNotifyAttempt);return{...D,lastNotifyAttempt:C?"":D.lastNotifyAttempt,lastNotifyAttemptDuration:C?"":D.lastNotifyAttemptDuration}})}))}})})})},82160:(Q,A,e)=>{"use strict";e.d(A,{C$:()=>c,SJ:()=>f,Zy:()=>d});var n=e(71892),a=e(69391),i=e(58126),r=e(98319),o=e(67451),g=e(35304),u=e(21352);async function c(s){if(s===o.GC)return{features:{rulerApiEnabled:!0}};const y=(0,o.c$)(s);if(!y)throw new Error(`Cannot find data source configuration for ${s}`);const{url:D,name:C,type:P}=y;if(!D)throw new Error("The data source url cannot be empty.");if(P!=="prometheus"&&P!=="loki")throw new Error(`The build info request is not available for ${P}. Only 'prometheus' and 'loki' are supported`);return l({name:C,url:D,type:P})}async function l(s){const{url:y,name:D,type:C}=s,P=C==="loki"?void 0:await v(y);if(!(P!==void 0)){if(!await E(D))throw new Error(`Unable to fetch alert rules. Is the ${D} data source properly configured?`);const R=await p(D);return{application:i.T8.Cortex,features:{rulerApiEnabled:R}}}const{features:T}=P.data;return T?{application:i.T8.Mimir,features:{rulerApiEnabled:T?.ruler_config_api==="true"}}:{application:i.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function d(s){if(s===o.GC)return{lazyConfigInit:!1};const y=m(s),{url:D,type:C}=y;if(!D)throw new Error("The data source url cannot be empty.");if(C!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${C}. Only 'alertmanager' type is supported`);return await f(D)}async function f(s){try{return{lazyConfigInit:(await v(s))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function m(s){const y=(0,o.c$)(s);if(!y)throw new Error(`Cannot find data source configuration for ${s}`);return y}async function v(s){return(await(0,n.n)((0,a.i)().fetch({url:`${s}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(D=>{if(!("status"in D&&D.status===404))throw D}))?.data}async function E(s){try{return await(0,g.j)(s),!0}catch{return!1}}async function p(s){try{return await(0,u.jw)(s),!0}catch(y){if(h(y))return!1;throw y}}function h(s){return(0,a.kW)(s)?s.data.message?.includes("GetRuleGroup unsupported in rule local store")||s.data.message?.includes("page not found")||s.data.message?.includes(r.jZ):s instanceof Error&&s.message?.includes("404 from rules config endpoint")}},22500:(Q,A,e)=>{"use strict";e.d(A,{T:()=>g});var n=e(58126),a=e(80127),i=e(67451),r=e(68568),o=e(82160);const g=r.C.injectEndpoints({endpoints:u=>({discoverAmFeatures:u.query({queryFn:async({amSourceName:c})=>{try{return{data:await(0,o.Zy)(c)}}catch(l){return{error:l}}}}),discoverDsFeatures:u.query({queryFn:async({rulesSourceName:c})=>{const l=(0,i.VX)(c);if(!l)return{error:new Error(`Missing data source configuration for ${c}`)};const f=await(0,a.pM)(o.C$,`[${c}] Rules source features discovered`,{dataSourceName:c,endpoint:"unifiedalerting/featureDiscoveryApi/discoverDsFeatures"})(l.name);return{data:{rulerConfig:f.features.rulerApiEnabled?{dataSourceName:l.name,apiVersion:f.application===n.T8.Cortex?"legacy":"config"}:void 0}}}})})})},99466:(Q,A,e)=>{"use strict";e.d(A,{QE:()=>c,i9:()=>r});var n=e(71892),a=e(69391),i=e(67451);function r(){return(0,a.i)().get("/api/alert-notifiers")}const o=l=>{const d=l.match(/^(\w+)(\[\d+\])?$/);return d?{type:d[1],index:d[2]}:{type:l,index:void 0}},g=l=>{const d={receivers:{},errorCount:0};l.forEach(m=>{d.receivers[m.name]={active:m.active,notifiers:{},errorCount:0};const v=d.receivers[m.name];m.integrations.forEach(E=>{!!E?.lastNotifyAttemptError&&(v.errorCount+=1);const h=u(E.name);h&&(v.notifiers[h]||(v.notifiers[h]=[]),v.notifiers[h].push(E))})});const f=Object.values(d.receivers).reduce((m,v)=>m+v.errorCount,0);return{...d,errorCount:f}},u=l=>o(l)?.type;async function c(l){try{const d=await(0,n.n)((0,a.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(l)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return g(d.data)}catch{return g([])}}},35304:(Q,A,e)=>{"use strict";e.d(A,{Tb:()=>u,hd:()=>g,j:()=>l,lL:()=>c});var n=e(71892),a=e(69391),i=e(67451),r=e(96198);function o(d){const{dataSourceName:f,limitAlerts:m,identifier:v}=d;return{rules:(E,p,h)=>{const s=new URLSearchParams;f===i.GC&&m&&s.set("limit_alerts",String(m)),v&&((0,r.qE)(v)||(0,r.E4)(v))&&(s.set("file",v.namespace),s.set("rule_group",v.groupName));const y=g(s,E);return{url:`/api/prometheus/${(0,i.gt)(f)}/api/v1/rules`,params:u(y,p,h)}}}}function g(d,f){return f?.dashboardUID&&(d.set("dashboard_uid",f.dashboardUID),f?.panelId&&d.set("panel_id",String(f.panelId))),Object.fromEntries(d)}function u(d,f,m){let v={...d};if(f?.length&&(v={...v,state:f}),m?.length){const E=m.map(p=>JSON.stringify(p));v={...v,matcher:E}}return v}const c=(d,f)=>{const m={};return d.forEach(v=>{v.rules.forEach(E=>{E.query=E.query||""}),m[v.file]?m[v.file].groups.push(v):m[v.file]={dataSourceName:f,name:v.file,groups:[v]}}),Object.values(m)};async function l(d,f,m,v,E,p){if(f?.dashboardUID&&d!==i.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:h,params:s}=o({dataSourceName:d,limitAlerts:m,identifier:p}).rules(f,E,v),y=await(0,n.n)((0,a.i)().fetch({url:h,params:s,showErrorAlert:!1,showSuccessAlert:!1})).catch(D=>{throw"status"in D&&D.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):D});return c(y.data.data.groups,d)}},21352:(Q,A,e)=>{"use strict";e.d(A,{BC:()=>v,IN:()=>u,P4:()=>c,jJ:()=>m,jw:()=>f,m6:()=>l,sz:()=>y});var n=e(71892),a=e(20298),i=e(69391),r=e(98319),o=e(67451),g=e(35304);function u(D){const P=`${`/api/ruler/${(0,o.gt)(D.dataSourceName)}`}/api/v1/rules`,b=new URLSearchParams;return b.set("subtype",D.apiVersion==="legacy"?"cortex":"mimir"),{rules:T=>{const O=(0,g.hd)(b,T);return{path:`${P}`,params:O}},namespace:T=>({path:`${P}/${encodeURIComponent(T)}`,params:Object.fromEntries(b)}),namespaceGroup:(T,O)=>({path:`${P}/${encodeURIComponent(T)}/${encodeURIComponent(O)}`,params:Object.fromEntries(b)})}}async function c(D,C,P){const{path:b,params:T}=u(D).namespace(C);await(0,n.n)((0,i.i)().fetch({method:"POST",url:b,data:P,showErrorAlert:!1,showSuccessAlert:!1,params:T}))}async function l(D,C){if(C?.dashboardUID&&D.dataSourceName!==o.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:P,params:b}=u(D).rules(C);return E(P,{},b)}async function d(D,C){const{path:P,params:b}=u(D).namespace(C);return(await E(P,{},b))[C]||[]}async function f(D){return E(`/api/ruler/${(0,o.gt)(D)}/api/v1/rules/test/test`,null)}async function m(D,C,P){const{path:b,params:T}=u(D).namespaceGroup(C,P);return E(b,null,T)}async function v(D,C,P){const{path:b,params:T}=u(D).namespaceGroup(C,P);await(0,n.n)((0,i.i)().fetch({url:b,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:T}))}async function E(D,C,P){try{return(await(0,n.n)((0,i.i)().fetch({url:D,showErrorAlert:!1,showSuccessAlert:!1,params:P}))).data}catch(b){if(!p(b))throw b;if(s(b))return C;throw h(b)?{...b,data:{...b.data,message:r.jZ}}:b}}function p(D){if(!(0,a.Kn)(D))return!1;const C="data"in D&&D.data!==null&&D.data!==void 0;return"status"in D&&Number.isFinite(D.status)&&C}function h(D){return D.status===404||D.status===500&&D.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function s(D){return D.status===404&&(D.data.message?.includes("group does not exist")||D.data.message?.includes("no rule groups found"))}async function y(D,C){const{path:P,params:b}=u(D).namespace(C);await(0,n.n)((0,i.i)().fetch({method:"DELETE",url:P,showErrorAlert:!1,showSuccessAlert:!1,params:b}))}},12788:(Q,A,e)=>{"use strict";e.d(A,{i:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(41354);const o=({labelKey:u,value:c,operator:l="=",onRemoveLabel:d})=>{const f=(0,i.wW)(g);return a.createElement("div",{className:f.wrapper},u,l,c,!!d&&a.createElement(r.h,{name:"times",size:"xs",onClick:d,tooltip:"Remove label"}))},g=u=>({wrapper:(0,n.css)`
    padding: ${u.spacing(.5,1)};
    border-radius: ${u.shape.radius.default};
    border: solid 1px ${u.colors.border.medium};
    font-size: ${u.typography.bodySmall.fontSize};
    background-color: ${u.colors.background.secondary};
    font-weight: ${u.typography.fontWeightBold};
    color: ${u.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},71355:(Q,A,e)=>{"use strict";e.d(A,{s:()=>f});var n=e(76932),a=e(69781),i=e.n(a),r=e(86504),o=e.n(r),g=e(31733),u=e(76067),c=e(51343),l=e(7225),d=e(36179);const f=({labels:p,commonLabels:h={},size:s})=>{const y=(0,u.wW)(E,s),[D,C]=(0,g.useState)(!1),P=(0,a.chain)(p).toPairs().reject(v).reject(([O])=>D?!1:O in h).value(),b=Object.keys(h).length,T=b>0;return g.createElement("div",{className:y.wrapper,role:"list","aria-label":"Labels"},P.map(([O,R])=>g.createElement(d._,{key:O+R,size:s,label:O,value:R,color:m(O)})),!D&&T&&g.createElement(c.zx,{variant:"secondary",fill:"text",onClick:()=>C(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",b," common ",o()("label",b)),D&&T&&g.createElement(c.zx,{variant:"secondary",fill:"text",onClick:()=>C(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function m(p){return(0,l.Bx)(p).color}const v=([p,h])=>p.startsWith("__")&&p.endsWith("__"),E=(p,h)=>({wrapper:(0,n.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${h==="md"?p.spacing():p.spacing(.5)};
  `})},74273:(Q,A,e)=>{"use strict";e.d(A,{a:()=>f});var n=e(76932),a=e(31733),i=e(58037),r=e(76067),o=e(94746),g=e(98319),u=e(24507),c=e(2482),l=e(20523);const d=["message","description"],f=({annotationKey:E,value:p,valueLink:h})=>{const s=g.vY[E]?a.createElement(i.u,{content:E,placement:"top",theme:"info"},a.createElement("span",null,g.vY[E])):E;return a.createElement(u.C,{label:s,horizontal:!0},a.createElement(m,{annotationKey:E,value:p,valueLink:h}))},m=({annotationKey:E,value:p,valueLink:h})=>{const s=(0,r.wW)(v),y=d.includes(E),D=p&&p.startsWith("http"),C=a.createElement(c.Z,{input:p,delimiter:["{{","}}"]});return h?a.createElement(o.h,{href:h,external:!0},p):y?a.createElement(l.t,{className:s.well},C):D?a.createElement(o.h,{href:p,external:!0},p):a.createElement(a.Fragment,null,C)},v=E=>({well:(0,n.css)`
    word-break: break-word;
  `})},93820:(Q,A,e)=>{"use strict";e.d(A,{U:()=>i});var n=e(31733),a=e(51343);const i=({isCollapsed:r,onToggle:o,idControlled:g,className:u,text:c,size:l="xl",...d})=>n.createElement(a.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!r,"aria-controls":g,className:u,icon:r?"angle-right":"angle-down",onClick:()=>o(!r),...d},c)},24507:(Q,A,e)=>{"use strict";e.d(A,{C:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({className:g,label:u,horizontal:c,children:l,childrenWrapperClassName:d})=>{const f=(0,i.wW)(o);return a.createElement("div",{className:(0,n.cx)(f.field,c?f.fieldHorizontal:f.fieldVertical,g)},a.createElement("div",null,u),a.createElement("div",{className:d},l))},o=g=>({fieldHorizontal:(0,n.css)`
    flex-direction: row;
    ${g.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,n.css)`
    flex-direction: column;
  `,field:(0,n.css)`
    display: flex;
    margin: ${g.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${g.spacing(1)};
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${g.colors.text.secondary};
    }
  `})},25899:(Q,A,e)=>{"use strict";e.d(A,{t:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(41354),o=e(47808),g=e(67483),u=e(88875);const c=({cols:d,items:f,isExpandable:m=!1,onCollapse:v,onExpand:E,isExpanded:p,renderExpandedContent:h,testIdGenerator:s,pagination:y,paginationStyles:D,renderPrefixCell:C,renderPrefixHeader:P,footerRow:b,dataTestId:T})=>{const O=(0,i.wW)(u.Z);if((v||E||p)&&!(v&&E&&p))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((m||h)&&!(m&&h))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const R=(0,i.wW)(l(d,m,!!P)),[I,M]=(0,a.useState)([]),x=G=>{p&&v&&E?p(G)?v(G):E(G):M(I.includes(G.id)?I.filter(_=>_!==G.id):[...I,G.id])},L=y?.itemsPerPage??f.length,{page:S,numberOfPages:U,onPageChange:N,pageItems:w}=(0,g.h)(f,1,L);return a.createElement(a.Fragment,null,a.createElement("div",{className:R.container,"data-testid":T??"dynamic-table"},a.createElement("div",{className:R.row,"data-testid":"header"},P&&P(),m&&a.createElement("div",{className:R.cell}),d.map(G=>a.createElement("div",{className:R.cell,key:G.id},G.label))),w.map((G,_)=>{const K=p?p(G):I.includes(G.id);return a.createElement("div",{className:R.row,key:`${G.id}-${_}`,"data-testid":s?.(G,_)??"row"},C&&C(G,_,f),m&&a.createElement("div",{className:(0,n.cx)(R.cell,R.expandCell)},a.createElement(r.h,{tooltip:`${K?"Collapse":"Expand"} row`,"data-testid":"collapse-toggle",name:K?"angle-down":"angle-right",onClick:()=>x(G)})),d.map(k=>a.createElement("div",{className:(0,n.cx)(R.cell,R.bodyCell,k.className),"data-column":k.label,key:`${G.id}-${k.id}`},k.renderCell(G,_))),K&&h&&a.createElement("div",{className:R.expandedContentRow,"data-testid":"expanded-content"},h(G,_,f)))}),b&&a.createElement("div",{className:(0,n.cx)(R.row,R.footerRow)},b)),y&&a.createElement(o.t,{className:(0,n.cx)(O,D),currentPage:S,numberOfPages:U,onNavigate:N,hideWhenSinglePage:!0}))},l=(d,f,m)=>{const v=d.map(E=>E.size?typeof E.size=="number"?`${E.size}fr`:E.size:"auto");return f&&v.unshift("calc(1em + 16px)"),m&&v.unshift("0"),E=>({container:(0,n.css)`
      border: 1px solid ${E.colors.border.weak};
      border-radius: ${E.shape.radius.default};
      color: ${E.colors.text.secondary};
    `,row:(0,n.css)`
      display: grid;
      grid-template-columns: ${v.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${E.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${E.colors.background.primary};
      }

      ${E.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${E.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${m?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,n.css)`
      display: flex;
      padding: ${E.spacing(1)};
    `,cell:(0,n.css)`
      display: flex;
      align-items: center;
      padding: ${E.spacing(1)};

      ${E.breakpoints.down("sm")} {
        padding: ${E.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,n.css)`
      overflow: hidden;

      ${E.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${E.colors.text.primary};
        }
      }
    `,expandCell:(0,n.css)`
      justify-content: center;

      ${E.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,n.css)`
      grid-column-end: ${v.length+1};
      grid-column-start: ${m?3:2};
      grid-row: 2;
      padding: 0 ${E.spacing(3)} 0 ${E.spacing(1)};
      position: relative;

      ${E.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${E.colors.border.strong};
        grid-row: auto;
        padding: ${E.spacing(1)} 0 0 0;
      }
    `})}},96477:(Q,A,e)=>{"use strict";e.d(A,{z:()=>l});var n=e(76932),a=e(52083),i=e.n(a),r=e(31733),o=e(76067),g=e(37739),u=e(72336),c=e(20425);const l=({children:f,header:m,content:v,footer:E,arrow:p,showAfter:h=300,wrapperClassName:s,disabled:y=!1,...D})=>{const C=(0,r.useRef)(null),P=(0,o.wW)(d);if(y)return f;const b=r.createElement(g.K,{direction:"column",gap:0},m&&r.createElement("div",{className:P.card.header},m),r.createElement("div",{className:P.card.body},v),E&&r.createElement("div",{className:P.card.footer},E));return r.createElement(u.D,{content:b,hideAfter:100},(T,O,R)=>r.createElement(r.Fragment,null,C.current&&r.createElement(c.J,{...R,...D,wrapperClassName:i()(P.popover(p?1.25:0),s),onMouseLeave:O,onMouseEnter:T,onFocus:T,onBlur:O,referenceElement:C.current,renderArrow:p?({arrowProps:I,placement:M})=>r.createElement("div",{className:P.arrow(M),...I}):()=>r.createElement(r.Fragment,null)}),r.cloneElement(f,{ref:C,onMouseEnter:T,onMouseLeave:O,onFocus:T,onBlur:O})))},d=f=>({popover:m=>(0,n.css)`
    border-radius: ${f.shape.radius.default};
    box-shadow: ${f.shadows.z3};
    background: ${f.colors.background.primary};
    border: 1px solid ${f.colors.border.medium};

    margin-bottom: ${f.spacing(m)};
  `,card:{body:(0,n.css)`
      padding: ${f.spacing(1)};
    `,header:(0,n.css)`
      padding: ${f.spacing(1)};
      background: ${f.colors.background.secondary};
      border-bottom: solid 1px ${f.colors.border.medium};
    `,footer:(0,n.css)`
      padding: ${f.spacing(.5)} ${f.spacing(1)};
      background: ${f.colors.background.secondary};
      border-top: solid 1px ${f.colors.border.medium};
    `},arrow:m=>{const v="9px";return(0,n.css)`
      width: 0;
      height: 0;

      border-left: ${v} solid transparent;
      border-right: ${v} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${v} solid ${f.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${v} solid ${f.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${v};
      }
    `}})},36179:(Q,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(76932),a=e(31733),i=e(37479),r=e(76067),o=e(37739),g=e(49311);const u=({label:l,value:d,icon:f,color:m,size:v="md"})=>{const E=(0,r.wW)(c,m,v);return a.createElement("div",{className:E.wrapper,role:"listitem"},a.createElement(o.K,{direction:"row",gap:0,alignItems:"stretch"},a.createElement("div",{className:E.label},a.createElement(o.K,{direction:"row",gap:.5,alignItems:"center"},f&&a.createElement(g.J,{name:f})," ",l??"")),a.createElement("div",{className:E.value},d)))},c=(l,d,f)=>{const m=d??l.colors.secondary.main,v=l.isDark?(0,i.Z)(m).lighten(5).toString():(0,i.Z)(m).darken(5).toString(),E=l.isDark?(0,i.Z)(m).darken(5).toString():(0,i.Z)(m).lighten(5).toString(),p=d?i.Z.mostReadable(m,["#000","#fff"]).toString():l.colors.text.primary,h=f==="md"?`${l.spacing(.33)} ${l.spacing(1)}`:`${l.spacing(.2)} ${l.spacing(.6)}`;return{wrapper:(0,n.css)`
      color: ${p};
      font-size: ${l.typography.bodySmall.fontSize};

      border-radius: ${l.shape.borderRadius(2)};
    `,label:(0,n.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${h};
      background: ${m};

      border: solid 1px ${v};
      border-top-left-radius: ${l.shape.borderRadius(2)};
      border-bottom-left-radius: ${l.shape.borderRadius(2)};
    `,value:(0,n.css)`
      color: inherit;
      padding: ${h};
      background: ${E};

      border: solid 1px ${v};
      border-left: none;
      border-top-right-radius: ${l.shape.borderRadius(2)};
      border-bottom-right-radius: ${l.shape.borderRadius(2)};
    `}}},63638:(Q,A,e)=>{"use strict";e.d(A,{d:()=>r});var n=e(31733),a=e(7119);const i=({children:o,plugin:g,loadingComponent:u,notInstalledFallback:c})=>{const{loading:l,installed:d}=usePluginBridge(g);return l?u??null:d?React.createElement(React.Fragment,null,o):c??null};function r(o,g,u){const c=new URLSearchParams(u).toString();return`/a/${o}${g}`+(c?"?"+c:"")}},40040:(Q,A,e)=>{"use strict";e.d(A,{L:()=>i});var n=e(76932),a=e(31733);const i=()=>a.createElement("span",{className:(0,n.css)`
      flex: 1;
    `})},68411:(Q,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g,state:u,size:c="md",muted:l=!1})=>{const d=(0,i.wW)(o);return a.createElement("span",{className:(0,n.cx)(d.common,d[u],d[c],{[d.muted]:l})},g||u)},o=g=>({common:(0,n.css)`
    display: inline-block;
    color: white;
    border-radius: ${g.shape.radius.default};
    font-size: ${g.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${g.typography.fontWeightBold};
  `,good:(0,n.css)`
    background-color: ${g.colors.success.main};
    border: solid 1px ${g.colors.success.main};
    color: ${g.colors.success.contrastText};
  `,warning:(0,n.css)`
    background-color: ${g.colors.warning.main};
    border: solid 1px ${g.colors.warning.main};
    color: ${g.colors.warning.contrastText};
  `,bad:(0,n.css)`
    background-color: ${g.colors.error.main};
    border: solid 1px ${g.colors.error.main};
    color: ${g.colors.error.contrastText};
  `,neutral:(0,n.css)`
    background-color: ${g.colors.secondary.main};
    border: solid 1px ${g.colors.secondary.main};
    color: ${g.colors.secondary.contrastText};
  `,info:(0,n.css)`
    background-color: ${g.colors.primary.main};
    border: solid 1px ${g.colors.primary.main};
    color: ${g.colors.primary.contrastText};
  `,md:(0,n.css)`
    padding: ${g.spacing(.5,1)};
    min-width: ${g.spacing(8)};
  `,sm:(0,n.css)`
    padding: ${g.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,n.css)`
    opacity: 0.5;
  `})},2482:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(50248),o=e(96477),g=e(75720);const u=["$",".",'"'];function c({input:h,delimiter:s=["{{","}}"]}){const y=(0,i.wW)(p),[D,C]=s,P=new RegExp(`(?<before>.*?)(${D}(?<token>.*?)${C}|$)`,"gm"),b=h.split(`
`),T=[];return b.forEach((O,R)=>{Array.from(O.matchAll(P)).forEach((M,x)=>{const L=M.groups?.before,S=M.groups?.token?.trim();if(L&&T.push(a.createElement("span",{key:`${R}-${x}-before`},L)),S){const U=E(S),N=U==="variable"?S:"",w=`${D} ${S} ${C}`;T.push(a.createElement(d,{key:`${R}-${x}-token`,content:w,type:U,description:N}))}}),T.push(a.createElement("br",{key:`${R}-newline`}))}),a.createElement("span",{className:y.wrapper},T)}var l=(h=>(h.Variable="variable",h.Function="function",h.Keyword="keyword",h.Unknown="unknown",h))(l||{});function d({content:h,description:s,type:y}){const D=(0,i.wW)(p),C=!y;return a.createElement(o.z,{placement:"top-start",disabled:C,content:a.createElement("div",{className:D.hoverTokenItem},a.createElement(r.C,{tabIndex:0,text:a.createElement(a.Fragment,null,y),color:"blue"})," ",s&&a.createElement("code",null,s))},a.createElement("span",null,a.createElement(r.C,{tabIndex:0,className:D.token,text:h,color:"blue"})))}function f(h){return u.some(s=>h.startsWith(s))}function m(h){return g.keywords.some(s=>h.startsWith(s))}function v(h){return g.builtinFunctions.some(s=>h.startsWith(s))}function E(h){let s;return f(h)?s="variable":m(h)?s="keyword":v(h)?s="function":s="unknown",s}const p=h=>({wrapper:(0,n.css)`
    white-space: pre-wrap;
  `,token:(0,n.css)`
    cursor: default;
    font-family: ${h.typography.fontFamilyMonospace};
  `,popover:(0,n.css)`
    border-radius: ${h.shape.radius.default};
    box-shadow: ${h.shadows.z3};
    background: ${h.colors.background.primary};
    border: 1px solid ${h.colors.border.medium};

    padding: ${h.spacing(1)};
  `,hoverTokenItem:(0,n.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${h.spacing(1)};
  `})},20523:(Q,A,e)=>{"use strict";e.d(A,{t:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g,className:u})=>{const c=(0,i.wW)(o);return a.createElement("div",{className:(0,n.cx)(c.wrapper,u)},g)},o=g=>({wrapper:(0,n.css)`
    background-color: ${g.components.panel.background};
    border: solid 1px ${g.components.input.borderColor};
    border-radius: ${g.shape.radius.default};
    padding: ${g.spacing(.5,1)};
    font-family: ${g.typography.fontFamilyMonospace};
  `})},19463:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>g});var n=e(86504),a=e.n(n),i=e(31733),r=e(76067),o=e(1024);const g=({group:u})=>{const c=(0,r.wW)(o.r),l=u.alerts.length,d=u.alerts.reduce((f,m)=>(f[m.status.state]?f[m.status.state]+=1:f[m.status.state]=1,f),{});return i.createElement("div",null,`${l} ${a()("alert",l)}: `,Object.entries(d).map(([f,m],v)=>i.createElement("span",{key:`${JSON.stringify(u.labels)}-notifications-${v}`,className:c[f]},v>0&&", ",`${m} ${f}`)))}},38170:(Q,A,e)=>{"use strict";e.d(A,{F:()=>m});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(76067),g=e(49311),u=e(36667),c=e(37739),l=e(58037),d=e(64516),f=e(80127);const m=({className:E,onFilterChange:p,defaultQueryString:h})=>{const s=(0,o.wW)(v),y=(0,r.useMemo)(()=>(0,a.debounce)(C=>{(0,f.PN)(f.z7.filterByLabel);const P=C.currentTarget;p(P.value)},600),[p]);(0,r.useEffect)(()=>y.cancel(),[y]);const D=r.createElement(g.J,{name:"search"});return r.createElement("div",{className:E},r.createElement(u._,null,r.createElement(c.K,{gap:.5},r.createElement("span",null,"Search by label"),r.createElement(l.u,{content:r.createElement("div",null,"Filter alerts using label querying, ex:",r.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},r.createElement(g.J,{className:s.icon,name:"info-circle",size:"sm"})))),r.createElement(d.I,{placeholder:"Search",defaultValue:h,onChange:y,"data-testid":"search-query-input",prefix:D,className:s.inputWidth}))},v=E=>({icon:(0,n.css)`
    margin-right: ${E.spacing(.5)};
  `,inputWidth:(0,n.css)`
    width: 340px;
    flex-grow: 0;
  `})},49466:(Q,A,e)=>{"use strict";e.d(A,{N:()=>l,o:()=>c});var n=e(31733),a=e(51343),i=e(58037),r=e(63424),o=e(7119),g=e(38251),u=e(63638);const c=({title:d="",severity:f="",url:m=""})=>{const v=(0,u.d)(g.W.Incident,"/incidents/declare",{title:d,severity:f,url:m}),{loading:E,installed:p,settings:h}=(0,o.n)(g.W.Incident);return n.createElement(n.Fragment,null,E===!0&&n.createElement(a.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),p===!1&&n.createElement(i.u,{content:"Grafana Incident is not installed or is not configured correctly"},n.createElement(a.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),h&&n.createElement(a.Qj,{icon:"fire",size:"sm",type:"button",href:v},"Declare Incident"))},l=({title:d="",severity:f="",url:m=""})=>{const v=(0,u.d)(g.W.Incident,"/incidents/declare",{title:d,severity:f,url:m}),{loading:E,installed:p,settings:h}=(0,o.n)(g.W.Incident);return n.createElement(n.Fragment,null,E===!0&&n.createElement(r.v.Item,{label:"Declare incident",icon:"fire",disabled:!0}),p===!1&&n.createElement(i.u,{content:"Grafana Incident is not installed or is not configured correctly"},n.createElement(r.v.Item,{label:"Declare incident",icon:"fire",disabled:!0})),h&&n.createElement(r.v.Item,{label:"Declare incident",url:v,icon:"fire"}))}},75720:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{AlertmanagerTemplateFunction:()=>a,availableAlertManagerFunctions:()=>i,builtinFunctions:()=>o,conf:()=>c,keywords:()=>g,language:()=>u});var n=(l=>(l.Delimiter="delimiter",l.Keyword="keyword",l.Function="type.identifier",l.String="string",l.Variable="variable.name",l.Number="number",l.Comment="comment",l.Operator="operator",l.Identifier="idenfifier",l))(n||{}),a=(l=>(l.toUpper="toUpper",l.toLower="toLower",l.title="title",l.join="join",l.match="match",l.safeHtml="safeHtml",l.reReplaceAll="reReplaceAll",l.stringSlice="stringSlice",l))(a||{});const i=Object.values(a),o=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],g=["define","if","else","end","range","break","continue","template","block","with"],u={defaultToken:"",keywords:g,functions:[...o,...i],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},c={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},99698:(Q,A,e)=>{"use strict";e.d(A,{o:()=>C});var n=e(31733),a=e(84479),i=e(74011),r=e(90384),o=e(96198),g=e(71355),u=e(25899),c=e(33500),l=e(67669),d=e(41354),f=e(75184),m=e(99025);const v=({rule:b,instance:T,extensionPointId:O})=>{const[R,I]=(0,n.useState)(),x=E({instance:T,rule:b},O);if(x.length===0)return null;const L=n.createElement(m.G,{extensions:x,onSelect:I});return n.createElement(n.Fragment,null,n.createElement(l.L,{placement:"bottom-start",overlay:L},n.createElement(d.h,{name:"ellipsis-v","aria-label":"Actions",variant:"secondary"})),!!R&&!!R.path&&n.createElement(f.F,{path:R.path,title:R.title,onDismiss:()=>I(void 0)}))};function E(b,T){return(0,n.useMemo)(()=>{const{extensions:O}=(0,c.dj)({extensionPointId:T,context:b,limitPerPlugin:3});return O},[b,T])}var p=e(26073),h=e(74273),s=e(24507);const y=({instance:b})=>{const T=(0,p.$9)(b.annotations),O=(0,p.XW)(T);return n.createElement("div",null,b.value&&n.createElement(s.C,{label:"Value",horizontal:!0},b.value),T.map(([R,I])=>n.createElement(h.a,{key:R,annotationKey:R,value:I,valueLink:O.get(R)})))};var D=e(48859);const C=({rule:b,instances:T,pagination:O,footerRow:R})=>{const I=(0,n.useMemo)(()=>T.length>1?(0,a.FT)(T.map(x=>x.labels)):{},[T]),M=(0,n.useMemo)(()=>T.map(x=>({data:{rule:b,alert:{...x,commonLabels:I}},id:(0,o.pB)(x)})),[I,T,b]);return n.createElement(u.t,{cols:P,isExpandable:!0,items:M,renderExpandedContent:({data:x})=>n.createElement(y,{instance:x.alert}),pagination:O,footerRow:R})},P=[{id:"state",label:"State",renderCell:({data:{alert:{state:b}}})=>n.createElement(D.l,{state:b}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{alert:{labels:b,commonLabels:T}}})=>n.createElement(g.s,{labels:b,commonLabels:T,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{alert:{activeAt:b}}})=>n.createElement(n.Fragment,null,b.startsWith("0001")?"-":(0,i.CQ)(b).format("YYYY-MM-DD HH:mm:ss")),size:"150px"},{id:"actions",label:"",renderCell:({data:{alert:b,rule:T}})=>n.createElement(v,{rule:T,instance:b,extensionPointId:r.y.AlertInstanceAction,key:"alert-instance-extension-point"}),size:"40px"}]},48859:(Q,A,e)=>{"use strict";e.d(A,{l:()=>r});var n=e(31733),a=e(96198),i=e(68411);const r=n.memo(({state:o,isPaused:g=!1,size:u="md",muted:c=!1})=>n.createElement(i.i,{state:(0,a.Aq)(o),size:u,muted:c},(0,a.SS)(o)," ",g?" (Paused)":""));r.displayName="AlertStateTag"},82854:(Q,A,e)=>{"use strict";e.d(A,{_:()=>c});var n=e(76932),a=e(31733),i=e(97890),r=e(76067),o=e(90069),g=e(51343),u=e(97503);function c({identifier:f,isProvisioned:m,onDismiss:v}){const E=(0,r.wW)(d),[p,h]=(0,a.useState)(m?"confirm":"redirect");if(p==="redirect"){const s=`/alerting/new?copyFrom=${encodeURIComponent(u.$V(f))}`;return a.createElement(i.l_,{to:s,push:!0})}return a.createElement(o.s,{isOpen:p==="confirm",title:"Copy provisioned alert rule",body:a.createElement("div",null,a.createElement("p",null,"The new rule will ",a.createElement("span",{className:E.bold},"NOT")," be marked as a provisioned rule."),a.createElement("p",null,"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>h("redirect"),onDismiss:v})}const l=a.forwardRef(({text:f,ruleIdentifier:m,isProvisioned:v,className:E},p)=>{const[h,s]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(g.zx,{title:"Copy",className:E,size:"sm",key:"clone",variant:"secondary",icon:"copy",onClick:()=>s(!0),ref:p},f),h&&a.createElement(c,{identifier:m,isProvisioned:v,onDismiss:()=>s(!1)}))});l.displayName="CloneRuleButton";const d=f=>({bold:(0,n.css)`
    font-weight: ${f.typography.fontWeightBold};
  `})},425:(Q,A,e)=>{"use strict";e.d(A,{Ii:()=>D,gr:()=>y});var n=e(76932),a=e(31733),i=e(40137),r=e(74011),o=e(76067),g=e(58037),u=e(16835),c=e(26073),l=e(96198),d=e(90233),f=e(71355),m=e(24507),v=e(51320),E=e(23113),p=e(55993),h=e(18940),s=e(85816);const y=15,D=({rule:b})=>{const T=(0,o.wW)(P),{namespace:{rulesSource:O}}=b,R=(0,c.$9)(b.annotations);return a.createElement("div",null,a.createElement(v.f,{rule:b,rulesSource:O,isViewMode:!1}),a.createElement("div",{className:T.wrapper},a.createElement("div",{className:T.leftSide},a.createElement(C,{rule:b}),!!b.labels&&!!Object.keys(b.labels).length&&a.createElement(m.C,{label:"Labels",horizontal:!0},a.createElement(f.s,{labels:b.labels})),a.createElement(h.C,{rulesSource:O,rule:b,annotations:R}),a.createElement(E.J,{annotations:R})),a.createElement("div",{className:T.rightSide},a.createElement(p.C,{rulesSource:O,rule:b}))),a.createElement(m.C,{label:"Matching instances",horizontal:!0},a.createElement(s.M,{rule:b,itemsDisplayLimit:y})))},C=({rule:b})=>{let T,O=b.group.interval,R=b.promRule?.lastEvaluation,I=b.promRule?.evaluationTime;return(0,l.yF)(b.rulerRule)||(T=b.rulerRule?.for),a.createElement(a.Fragment,null,O&&a.createElement(m.C,{label:"Evaluate",horizontal:!0},"Every ",O),T&&a.createElement(m.C,{label:"For",horizontal:!0},T),R&&!(0,d.gV)(R)&&a.createElement(m.C,{label:"Last evaluation",horizontal:!0},a.createElement(g.u,{placement:"top",content:`${(0,i.dq)(R,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},a.createElement("span",null,`${(0,r.CQ)(R).locale("en").fromNow(!0)} ago`))),R&&!(0,d.gV)(R)&&I!==void 0&&a.createElement(m.C,{label:"Evaluation time",horizontal:!0},a.createElement(g.u,{placement:"top",content:`${I}s`,theme:"info"},a.createElement("span",null,(0,u.q)({timeInMs:I*1e3,humanize:!0})))))},P=b=>({wrapper:(0,n.css)`
    display: flex;
    flex-direction: row;

    ${b.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:(0,n.css)`
    flex: 1;
  `,rightSide:(0,n.css)`
    ${b.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},51320:(Q,A,e)=>{"use strict";e.d(A,{f:()=>N});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(97890),g=e(98827),u=e(91977),c=e(85498),l=e(76067),d=e(51343),f=e(5334),m=e(63424),v=e(79106),E=e(67669),p=e(49311),h=e(90069),s=e(42876),y=e(42342),D=e(58126),C=e(77398),P=e(23708),b=e(84415),T=e(10322),O=e(98319),R=e(67451),I=e(66172),M=e(97503),x=e(96198),L=e(99825),S=e(49466),U=e(82854);const N=({rule:_,rulesSource:K,isViewMode:k})=>{const z=(0,l.wW)(G),{namespace:W,group:Z,rulerRule:H}=_,{StateHistoryModal:X,showStateHistoryModal:Y}=(0,P.u)(),ne=(0,y.useDispatch)(),se=(0,o.TH)(),re=(0,s.iG)(),[ge,q]=(0,r.useState)(),[me,oe]=(0,r.useState)(void 0),fe=(0,R.HY)(K)?K:(0,T.Xy)(K.jsonData.alertmanagerUid)?.name,[ve,pe]=(0,C.wp)(_,C.iY.Duplicate),[Me,Pe]=(0,C.wp)(_,C.iY.Silence),[Ee,he]=(0,C.wp)(_,C.iY.Explore),[Le,ke]=(0,C.wp)(_,C.iY.Delete),[ot,it]=(0,C.wp)(_,C.iY.Update),ce=[],le=[],Re=[],Ae=()=>{if(ge&&ge.rulerRule){const tt=M.Zk((0,R.EG)(ge.namespace.rulesSource),ge.namespace.name,ge.group.name,ge.rulerRule);ne((0,b.hS)(tt,{navigateTo:k?"/alerting/list":void 0})),q(void 0)}},Oe=(0,x.Jq)(Z),$e=(0,x.Pc)(_.rulerRule)&&!!_.rulerRule.grafana_alert.provenance,Ye=(0,x.x_)(_.promRule)&&_.promRule.state===D.x_.Firing,Ne=Le&&ke,je=ot&&it,ut=Me&&Pe&&fe,Fe=ve&&pe&&!Oe,Te=()=>(0,I.t6)(K,_),Ve=se.pathname+se.search;if((0,R.jq)(K)&&Ee&&he&&!Oe&&ce.push(r.createElement(d.Qj,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"_blank",href:(0,I.mH)(K,_.query)},"See graph")),_.annotations[O.q6.runbookURL]&&ce.push(r.createElement(d.Qj,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"_blank",href:g.QX.sanitizeUrl(_.annotations[O.q6.runbookURL])},"View runbook")),_.annotations[O.q6.dashboardUID]){const tt=_.annotations[O.q6.dashboardUID];if(tt){ce.push(r.createElement(d.Qj,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"_blank",href:`d/${encodeURIComponent(tt)}`},"Go to dashboard"));const ae=_.annotations[O.q6.panelID];ae&&ce.push(r.createElement(d.Qj,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"_blank",href:`d/${encodeURIComponent(tt)}?viewPanel=${encodeURIComponent(ae)}`},"Go to panel"))}}if(ut&&ce.push(r.createElement(d.Qj,{size:"sm",key:"silence",icon:"bell-slash",target:"_blank",href:(0,I.Vv)(fe,_)},"Silence")),(0,x.Pc)(_.rulerRule)&&ce.push(r.createElement(r.Fragment,{key:"history"},r.createElement(d.zx,{size:"sm",icon:"history",onClick:()=>(0,x.Pc)(_.rulerRule)&&Y(_.rulerRule)},"Show state history"),X)),Ye&&w()&&ce.push(r.createElement(r.Fragment,{key:"declare-incident"},r.createElement(S.o,{title:_.name,url:Te()}))),k&&H){const tt=(0,R.EG)(K),ae=M.Zk(tt,W.name,Z.name,H);if(je&&(le.push(r.createElement(f.m,{key:"copy",icon:"copy",onClipboardError:J=>{re.error("Error while copying URL",J)},size:"sm",getText:Te},"Copy link to rule")),!$e)){const J=u.Cj.renderUrl(`${c.config.appSubUrl}/alerting/${encodeURIComponent(M.$V(ae))}/edit`,{returnTo:Ve});le.push(r.createElement(d.Qj,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:J},"Edit"))}if((0,x.Pc)(H)){const J=(0,L.u)(`/alerting/${encodeURIComponent(M.$V(ae))}/modify-export`);Re.push(r.createElement(m.v.Item,{label:"Modify export",icon:"edit",url:J}))}Fe&&Re.push(r.createElement(m.v.Item,{label:"Duplicate",icon:"copy",onClick:()=>oe({identifier:ae,isProvisioned:$e})})),Ne&&(Re.push(r.createElement(m.v.Divider,null)),Re.push(r.createElement(m.v.Item,{key:"delete",label:"Delete",icon:"trash-alt",onClick:()=>q(_)})))}return ce.length||le.length||Re.length?r.createElement(r.Fragment,null,r.createElement("div",{className:z.wrapper},r.createElement(v.Lh,{width:"auto"},ce.length?ce:r.createElement("div",null)),r.createElement(v.Lh,{width:"auto"},le.length&&le,Re.length&&r.createElement(E.L,{overlay:r.createElement(m.v,null,Re.map(tt=>r.createElement(r.Fragment,{key:(0,a.uniqueId)("action_")},tt)))},r.createElement(d.zx,{variant:"secondary",size:"sm"},"More",r.createElement(p.J,{name:"angle-down"}))))),!!ge&&r.createElement(h.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Ae,onDismiss:()=>q(void 0)}),me&&r.createElement(U._,{identifier:me.identifier,isProvisioned:me.isProvisioned,onDismiss:()=>oe(void 0)})):null};function w(){return!(0,I.Vj)()||(0,I.mt)()}const G=_=>({wrapper:(0,n.css)`
    padding: 0 0 ${_.spacing(2)} 0;
    gap: ${_.spacing(1)};
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${_.colors.border.medium};
  `})},23113:(Q,A,e)=>{"use strict";e.d(A,{J:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(26073),o=e(74273);function g(c){const l=(0,i.wW)(u),{annotations:d}=c,f=(0,r.XW)(d);return d.length===0?null:a.createElement("div",{className:l.annotations},d.map(([m,v])=>a.createElement(o.a,{key:m,annotationKey:m,value:v,valueLink:f.get(m)})))}const u=()=>({annotations:(0,n.css)`
    margin-top: 46px;
  `})},55993:(Q,A,e)=>{"use strict";e.d(A,{C:()=>l});var n=e(76932),a=e(31733),i=e(66261),r=e(76067),o=e(26894),g=e(67451),u=e(96198),c=e(24507);function l(f){const{rulesSource:m,rule:v}=f,E=(0,r.wW)(d),p=(0,a.useMemo)(()=>{if((0,g.jq)(m))return[{name:m.name,icon:m.meta.info.logos.small}];if((0,u.Pc)(v.rulerRule)){const{data:h}=v.rulerRule.grafana_alert,s=h.reduce((y,D)=>{const C=(0,i.F)().getInstanceSettings(D.datasourceUid);return!C||C.uid===o.Yq||(y[C.name]={name:C.name,icon:C.meta.info.logos.small}),y},{});return Object.values(s)}return[]},[v,m]);return p.length===0?null:a.createElement(c.C,{label:"Data source"},p.map(({name:h,icon:s},y)=>a.createElement("div",{key:h},s&&a.createElement(a.Fragment,null,a.createElement("img",{alt:`${h} datasource logo`,className:E.dataSourceIcon,src:s})," "),h)))}function d(f){const m=f.spacing(2);return{dataSourceIcon:(0,n.css)`
      width: ${m};
      height: ${m};
    `}}},18940:(Q,A,e)=>{"use strict";e.d(A,{C:()=>h});var n=e(76932),a=e(31733),i=e(67451),r=e(24507),o=e(72470),g=e(38177),u=e(13811),c=e(79488),l=e(76067),d=e(74823),f=e(58465),m=e(20523);const v=({language:y,expr:D})=>{const C=(0,a.useMemo)(()=>[(0,u.Z)({onlyIn:b=>"type"in b&&b.type==="code_block",getSyntax:()=>y},{...o.languages,[y]:y==="logql"?d.ZP:f.ZP})],[y]),P=(0,a.useMemo)(()=>(0,c.l1)(D),[D]);return a.createElement(g.ML,{"data-testid":"expression-editor",plugins:C,value:P})},E=({expression:y,rulesSource:D})=>{const C=(0,l.wW)(p);return a.createElement(m.t,{className:(0,n.cx)(C.well,"slate-query-field")},(0,i.jq)(D)?a.createElement(v,{expr:y,language:D.type===i.ye.Loki?"logql":"promql"}):y)},p=y=>({well:(0,n.css)`
    font-family: ${y.typography.fontFamilyMonospace};
  `});function h(y){const{annotations:D,rulesSource:C,rule:P}=y,b=s();return(0,i.jq)(C)?a.createElement(r.C,{label:"Expression",horizontal:!0,className:(0,n.cx)({[b.exprRow]:!!D.length})},a.createElement(E,{expression:P.query,rulesSource:C})):null}const s=()=>({exprRow:(0,n.css)`
    margin-bottom: 46px;
  `})},85816:(Q,A,e)=>{"use strict";e.d(A,{M:()=>b});var n=e(76932),a=e(69781),i=e(31733),r=e(97890),o=e(76067),g=e(51343),u=e(38170),c=e(14496),l=e(36667),d=e(96856),f=e(58126);const m=({className:R,onStateFilterChange:I,stateFilter:M,filterType:x,itemPerStateStats:L})=>{const S=(0,o.wW)(v),U=K=>function(){return L&&L[K]?i.createElement(c.V,{name:L[K].toFixed(0),colorIndex:9,className:S.tag}):null},N=Object.values(f.bj).map(K=>({label:K,value:K,component:U(K)})),G=[f.x_.Firing,f.x_.Pending].map(K=>({label:(0,a.capitalize)(K),value:K,component:U(K)})),_=x==="grafana"?N:G;return i.createElement("div",{className:R,"data-testid":"alert-instance-state-filter"},i.createElement(l._,null,"State"),i.createElement(d.S,{options:_,value:M,onChange:I,onClick:K=>{K===M&&I(void 0)}}))};function v(R){return{tag:(0,n.css)`
      font-size: 11px;
      font-weight: normal;
      padding: ${R.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${R.spacing(.5)};
    `}}var E=e(10322),p=e(66172),h=e(2754),s=e(67451),y=e(96198),D=e(99698),C=e(74361);function P(R){const I=(0,o.wW)(O),{onClick:M,stats:x}=R;return i.createElement("div",{className:I.footerRow},i.createElement("div",null,"Showing ",x.visibleItemsCount," out of ",x.totalItemsCount," instances"),i.createElement(g.zx,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:M},"Show all ",x.totalItemsCount," alert instances"))}function b(R){const I=(0,r.k6)(),{rule:M,itemsDisplayLimit:x=Number.POSITIVE_INFINITY,pagination:L,enableFiltering:S=!1}=R,{promRule:U,namespace:N,instanceTotals:w}=M,[G,_]=(0,i.useState)(),[K,k]=(0,i.useState)(),[z]=(0,i.useState)(Math.floor(Math.random()*100)),W=`queryString-${z}`,Z=(0,o.wW)(O),H=(0,s.HY)(N.rulesSource)?s.GC:"prometheus",X=(0,i.useMemo)(()=>(0,y.x_)(U)&&U.alerts?.length?T(G,K,(0,p.Zl)(h.As.Importance,U.alerts)):[],[U,K,G]);if(!(0,y.x_)(U))return null;const Y=X.slice(0,x),ne=(0,a.countBy)(U.alerts,Me=>(0,f.ED)(Me.state)),se=(0,a.sum)([w.alerting,w.inactive,w.pending,w.nodata]),re=se-Y.length,ge={totalItemsCount:se,visibleItemsCount:Y.length},q=(0,p.V2)(N.rulesSource,R.rule,location.pathname+location.search),me=(0,C.r0)(w),ve=S?()=>k(void 0):()=>I.push(q),pe=re?i.createElement(P,{stats:ge,onClick:ve}):void 0;return i.createElement(i.Fragment,null,S&&i.createElement("div",{className:(0,n.cx)(Z.flexRow,Z.spaceBetween)},i.createElement("div",{className:Z.flexRow},i.createElement(u.F,{className:Z.rowChild,key:W,defaultQueryString:G,onFilterChange:Me=>_(Me)}),i.createElement(m,{className:Z.rowChild,filterType:H,stateFilter:K,onStateFilterChange:k,itemPerStateStats:ne}))),!S&&i.createElement("div",{className:Z.stats},me),i.createElement(D.o,{rule:M,instances:Y,pagination:L,footerRow:pe}))}function T(R,I,M){let x=[...M];if(R){const L=(0,E.Zh)(R||"");x=x.filter(({labels:S})=>(0,E.eD)(S,L))}return I&&(x=x.filter(L=>(0,f.ED)(L.state)===I)),x}const O=R=>({flexRow:(0,n.css)`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${R.spacing(1)};
    `,spaceBetween:(0,n.css)`
      justify-content: space-between;
    `,rowChild:(0,n.css)`
      margin-right: ${R.spacing(1)};
    `,footerRow:(0,n.css)`
      display: flex;
      flex-direction: column;
      gap: ${R.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:(0,n.css)`
      margin-bottom: ${R.spacing(2)};
    `,stats:(0,n.css)`
      display: flex;
      gap: ${R.spacing(1)};
      padding: ${R.spacing(1,0)};
    `})},74361:(Q,A,e)=>{"use strict";e.d(A,{Pb:()=>m,WN:()=>f,r0:()=>v});var n=e(69781),a=e.n(n),i=e(86504),r=e.n(i),o=e(31733),g=e(37739),u=e(50248),c=e(50266),l=e(58126);const d={recording:0,alerting:0,[l.x_.Pending]:0,[l.x_.Inactive]:0,paused:0,error:0,nodata:0},f=({namespaces:E})=>{const p={...d};E.forEach(({groups:D})=>{D.forEach(C=>{const P=(0,n.omitBy)(C.totals,n.isUndefined);for(let b in P)p[b]+=P[b]})});const h=v(p),s=!!h.length,y=(0,n.sum)(Object.values(p));return h.unshift(o.createElement(o.Fragment,{key:"total"},y," ",r()("rule",y))),o.createElement(g.K,{direction:"row"},s&&o.createElement("div",null,o.createElement(g.K,{gap:.5},h)))},m=({group:E})=>{const p=E.totals,h=E?.interval,s=v(p),y=!!s.length;return o.createElement(g.K,{direction:"row"},y&&o.createElement("div",null,o.createElement(g.K,{gap:.5},s)),h&&o.createElement(o.Fragment,null,o.createElement("div",null,"|"),o.createElement(u.C,{text:h,icon:"clock-nine",color:"blue"})))};function v(E){const p=[];return E[c.P.Alerting]&&p.push(o.createElement(u.C,{color:"red",key:"firing",text:`${E[c.P.Alerting]} firing`})),E.error&&p.push(o.createElement(u.C,{color:"red",key:"errors",text:`${E.error} errors`})),E.nodata&&p.push(o.createElement(u.C,{color:"blue",key:"nodata",text:`${E.nodata} no data`})),E[c.P.Pending]&&p.push(o.createElement(u.C,{color:"orange",key:"pending",text:`${E[c.P.Pending]} pending`})),E[c.P.Normal]&&E.paused&&p.push(o.createElement(u.C,{color:"green",key:"paused",text:`${E[c.P.Normal]} normal (${E.paused} paused)`})),E[c.P.Normal]&&!E.paused&&p.push(o.createElement(u.C,{color:"green",key:"inactive",text:`${E[c.P.Normal]} normal`})),E.recording&&p.push(o.createElement(u.C,{color:"purple",key:"recording",text:`${E.recording} recording`})),p}},77398:(Q,A,e)=>{"use strict";e.d(A,{E$:()=>s,K_:()=>h,Mz:()=>P,RA:()=>b,iY:()=>m,jU:()=>v,o2:()=>T,oI:()=>f,wp:()=>y});var n=e(31733),a=e(56811),i=e(43764),r=e(42342),o=e(42460),g=e(1203),u=e(81347),c=e(67451),l=e(96198),d=e(37100),f=(I=>(I.ViewExternalConfiguration="view-external-configuration",I.UpdateExternalConfiguration="update-external-configuration",I.CreateContactPoint="create-contact-point",I.ViewContactPoint="view-contact-point",I.UpdateContactPoint="edit-contact-points",I.DeleteContactPoint="delete-contact-point",I.ExportContactPoint="export-contact-point",I.CreateNotificationTemplate="create-notification-template",I.ViewNotificationTemplate="view-notification-template",I.UpdateNotificationTemplate="edit-notification-template",I.DeleteNotificationTemplate="delete-notification-template",I.DecryptSecrets="decrypt-secrets",I.CreateNotificationPolicy="create-notification-policy",I.ViewNotificationPolicyTree="view-notification-policy-tree",I.UpdateNotificationPolicyTree="update-notification-policy-tree",I.DeleteNotificationPolicy="delete-notification-policy",I.ExportNotificationPolicies="export-notification-policies",I.CreateSilence="create-silence",I.ViewSilence="view-silence",I.UpdateSilence="update-silence",I.ViewMuteTiming="view-mute-timing",I.CreateMuteTiming="create-mute-timing",I.UpdateMuteTiming="update-mute-timing",I.DeleteMuteTiming="delete-mute-timing",I.ExportMuteTimings="export-mute-timings",I))(f||{}),m=(I=>(I.Duplicate="duplicate-alert-rule",I.View="view-alert-rule",I.Update="update-alert-rule",I.Delete="delete-alert-rule",I.Explore="explore-alert-rule",I.Silence="silence-alert-rule",I.ModifyExport="modify-export-rule",I))(m||{}),v=(I=>(I.CreateAlertRule="create-alert-rule",I.ViewAlertRule="view-alert-rule",I.UpdateAlertRule="update-alert-rule",I.DeleteAlertRule="delete-alert-rule",I.ExportGrafanaManagedRules="export-grafana-managed-rules",I.CreateExternalAlertRule="create-external-alert-rule",I.ViewExternalAlertRule="view-external-alert-rule",I.UpdateExternalAlertRule="update-external-alert-rule",I.DeleteExternalAlertRule="delete-external-alert-rule",I))(v||{});const E=!0,p=!1,h=()=>({["create-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleCreate),["view-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleRead),["update-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleUpdate),["delete-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleDelete),["export-grafana-managed-rules"]:R(E,r.AccessControlAction.AlertingRuleRead),["create-external-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleExternalWrite),["view-external-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleExternalRead),["update-external-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleExternalWrite),["delete-external-alert-rule"]:R(E,r.AccessControlAction.AlertingRuleExternalWrite)}),s=I=>h()[I];function y(I,M){const x=C(I);return(0,n.useMemo)(()=>x[M],[x,M])}function D(I,M){const x=C(I);return useMemo(()=>M.map(L=>x[L]),[x,M])}function C(I){const M=I.namespace.rulesSource,x=typeof M=="string"?M:M.name,L=(0,l.Pc)(I.rulerRule)&&!!I.rulerRule.grafana_alert.provenance,S=(0,l.Jq)(I.group),U=L||S,{isEditable:N,isRemovable:w,isRulerAvailable:G=!1,loading:_}=(0,d.M)(x,I.rulerRule),[K,k]=s("export-grafana-managed-rules"),z=_?p:G,W=U?p:z,Z=(0,u.Bz)(x),H=O(M);return{["duplicate-alert-rule"]:R(z,Z.create),["view-alert-rule"]:R(E,Z.read),["update-alert-rule"]:[W,N??!1],["delete-alert-rule"]:[W,w??!1],["explore-alert-rule"]:R(E,r.AccessControlAction.DataSourcesExplore),["silence-alert-rule"]:H,["modify-export-rule"]:[z,k]}}function P(){const{selectedAlertmanager:I,hasConfigurationAPI:M,isGrafanaAlertmanager:x}=(0,g.ZA)(),L=(0,u.Ko)(I),S=(0,u.QX)(I);return{["view-external-configuration"]:R(E,r.AccessControlAction.AlertingNotificationsExternalRead),["update-external-configuration"]:R(M,r.AccessControlAction.AlertingNotificationsExternalWrite),["create-contact-point"]:R(M,L.create),["view-contact-point"]:R(E,L.read),["edit-contact-points"]:R(M,L.update),["delete-contact-point"]:R(M,L.delete),["export-contact-point"]:R(x,L.read),["create-notification-template"]:R(M,L.create),["view-notification-template"]:R(E,L.read),["edit-notification-template"]:R(M,L.update),["delete-notification-template"]:R(M,L.delete),["create-notification-policy"]:R(M,L.create),["view-notification-policy-tree"]:R(E,L.read),["update-notification-policy-tree"]:R(M,L.update),["delete-notification-policy"]:R(M,L.delete),["export-notification-policies"]:R(x,L.read),["decrypt-secrets"]:R(x,L.provisioning.readSecrets),["create-silence"]:R(E,S.create),["view-silence"]:R(E,S.read),["update-silence"]:R(E,S.update),["create-mute-timing"]:R(M,L.create),["view-mute-timing"]:R(E,L.read),["update-mute-timing"]:R(M,L.update),["delete-mute-timing"]:R(M,L.delete),["export-mute-timings"]:R(x,L.read)}}function b(I){const M=P();return(0,n.useMemo)(()=>M[I],[M,I])}function T(I){const M=P();return(0,n.useMemo)(()=>I.map(x=>M[x]),[M,I])}function O(I){const M=I===c.GC,{useGetAlertmanagerChoiceStatusQuery:x}=o.alertmanagerApi,{currentData:L,isLoading:S}=x(void 0,{skip:!M});if(!M||S)return[!1,!1];const U=L?.alertmanagersChoice===i.TE.External,N=L?.alertmanagersChoice===i.TE.All;return R(!U||N,r.AccessControlAction.AlertingInstanceCreate)}const R=(I,M)=>[I,a.contextSrv.hasPermission(M)]},17705:(Q,A,e)=>{"use strict";e.d(A,{k:()=>i});var n=e(31733),a=e(67451);function i(r){return(0,n.useMemo)(()=>(0,a.LE)(r),[r])}},41216:(Q,A,e)=>{"use strict";e.d(A,{DD:()=>D,Fm:()=>s,K$:()=>f,Kd:()=>v,ZP:()=>y,Zo:()=>l,bU:()=>d});var n=e(69781),a=e.n(n),i=e(31733),r=e(50266),o=e(58126),g=e(67451),u=e(96198),c=e(68144);function l(I,M){const x=(0,c._)(N=>N.promRules),L=(0,c._)(N=>N.rulerRules),S=(0,i.useRef)({}),U=(0,i.useMemo)(()=>{if(I){const N=(0,g.o_)(I);if(!N)throw new Error(`Unknown rules source: ${I}`);return[N]}return(0,g.h_)()},[I]);return(0,i.useMemo)(()=>U.map(N=>{const w=(0,g.jq)(N)?N.name:N,G=L[w]?.result;let _=x[w]?.result;w===g.GC&&M&&(_=M);const K=S.current[w];if(K&&K.promRules===_&&K.rulerRules===G)return K.result;const k={};Object.entries(G||{}).forEach(([W,Z])=>{const H={rulesSource:N,name:W,groups:[]};k[W]=H,p(H,Z)}),_?.forEach(({name:W,groups:Z})=>{const H=k[W]=k[W]||{rulesSource:N,name:W,groups:[]};h(H,Z)});const z=Object.values(k);return S.current[w]={promRules:_,rulerRules:G,result:z},z}).flat(),[x,L,U,M])}function d(I,M,x){const L={};return Object.entries(x||{}).forEach(([S,U])=>{const N={rulesSource:I,name:S,groups:[]};L[S]=N,p(N,U)}),M?.forEach(({name:S,groups:U})=>{const N=L[S]=L[S]||{rulesSource:I,name:S,groups:[]};h(N,U)}),Object.values(L)}function f(I,M,x){const L={rulesSource:I,name:M.name,groups:[]};return p(L,x),h(L,M.groups),L.groups.forEach(S=>{S.rules=S.rules.filter(U=>U.promRule)}),L}function m(I,M,x){return p(I,x),h(I,M),I}function v(I){return I.map(M=>{const x={...M,groups:[]};return x.groups.push({name:"default",rules:E(M.groups.flatMap(L=>L.rules)),totals:C(M.groups)}),x})}function E(I){return I.sort((M,x)=>M.name.localeCompare(x.name))}function p(I,M=[]){I.groups=M.map(x=>{const L=x.rules.filter(N=>(0,u.yF)(N)).length,S=x.rules.filter(N=>(0,u.Pc)(N)&&N.grafana_alert.is_paused).length,U={name:x.name,interval:x.interval,source_tenants:x.source_tenants,rules:[],totals:{paused:S,recording:L}};return U.rules=x.rules.map(N=>b(N,I,U)),U})}function h(I,M){const x=new Map;I.groups.forEach(L=>x.set(L.name,L)),M.forEach(L=>{let S=x.get(L.name);S||(S={name:L.name,rules:[],totals:D(L)},I.groups.push(S),x.set(L.name,S)),S.totals={...S.totals,...D(L)};const U=new Map;S.rules.forEach(N=>{const w=U.get(N.name);w?w.push(N):U.set(N.name,[N])}),(L.rules??[]).forEach(N=>{const w=T(N,U,I.rulesSource);w?(w.promRule=N,w.instanceTotals=(0,u.x_)(N)?s(N):{},w.filteredInstanceTotals=(0,u.x_)(N)?y(N):{}):S.rules.push(P(N,I,S))})})}function s(I){const M=(0,n.countBy)(I.alerts,"state");if(I.totals){const{normal:x,...L}=I.totals;return{...L,inactive:x}}return{alerting:M[r.P.Alerting]||M.firing,pending:M[r.P.Pending],inactive:M[r.P.Normal],nodata:M[r.P.NoData],error:M[r.P.Error]||M.err||void 0}}function y(I){if(I.totalsFiltered){const{normal:M,...x}=I.totalsFiltered;return{...x,inactive:M}}return{}}function D(I){if(I.totals){const{firing:S,...U}=I.totals;return{...U,alerting:S}}const M=(0,n.countBy)(I.rules,S=>(0,u.x_)(S)&&S.state),x=(0,n.countBy)(I.rules,S=>S.health),L=I.rules.filter(S=>(0,u.OP)(S)).length;return{alerting:M[o.x_.Firing],error:x.error,nodata:x.nodata,inactive:M[o.x_.Inactive],pending:M[o.x_.Pending],recording:L}}function C(I){const M={};return I.forEach(x=>{const L=x.totals;Object.entries(L).forEach(([S,U])=>{M[S]||(M[S]=0),M[S]+=U})}),M}function P(I,M,x){return{name:I.name,query:I.query,labels:I.labels||{},annotations:(0,u.x_)(I)?I.annotations||{}:{},promRule:I,namespace:M,group:x,instanceTotals:(0,u.x_)(I)?s(I):{},filteredInstanceTotals:(0,u.x_)(I)?y(I):{}}}function b(I,M,x){return(0,u.cG)(I)?{name:I.alert,query:I.expr,labels:I.labels||{},annotations:I.annotations||{},rulerRule:I,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}:(0,u.yF)(I)?{name:I.record,query:I.expr,labels:I.labels||{},annotations:{},rulerRule:I,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}:{name:I.grafana_alert.title,query:"",labels:I.labels||{},annotations:I.annotations||{},rulerRule:I,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}}function T(I,M,x){const L=M.get(I.name);if(!L)return;if((0,g.HY)(x))return L[0];const S=L.find(N=>!N.promRule&&O(N,I,!0));if(S)return S;const U=L.find(N=>!N.promRule&&O(N,I,!1));if(U)return U}function O(I,M,x=!0){return I.name===M.name?(0,n.isEqual)([x?R(I.query):"",I.labels,I.annotations],[x?R(M.query):"",M.labels||{},(0,u.x_)(M)?M.annotations||{}:{}]):!1}function R(I){return I.length>1&&I[0]==="("&&I[I.length-1]===")"&&(I=I.slice(1,-1)),I=I.replace(/\s|\n/g,""),I.split("").sort().join("")}},41027:(Q,A,e)=>{"use strict";e.d(A,{W:()=>g});var n=e(31733),a=e(42342),i=e(84415),r=e(39138),o=e(68144);function g(u){const c=(0,a.useDispatch)(),l=(0,o._)(d=>d.folders);if((0,n.useEffect)(()=>{u&&c((0,i.sw)(u))},[c,u]),u){const d=l[u]||r.oq;return{folder:d.result,loading:d.loading}}return{loading:!1}}},37100:(Q,A,e)=>{"use strict";e.d(A,{M:()=>u});var n=e(56811),a=e(22500),i=e(81347),r=e(96198),o=e(41027),g=e(68144);function u(c,l){const d=(0,g._)(C=>C.dataSources),{currentData:f,isLoading:m}=a.T.endpoints.discoverDsFeatures.useQuery({rulesSourceName:c}),v=l&&(0,r.Pc)(l)?l.grafana_alert.namespace_uid:void 0,E=(0,i.Bz)(c),{folder:p,loading:h}=(0,o.W)(v);if(!l)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,r.Pc)(l)){if(!v)throw new Error(`Rule ${l.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!p)return{isRulerAvailable:!0,isEditable:!1,isRemovable:!1,loading:h};const C=n.contextSrv.hasPermissionInMetadata(E.update,p),P=n.contextSrv.hasPermissionInMetadata(E.delete,p);return{isRulerAvailable:!0,isEditable:C,isRemovable:P,loading:h||m}}const s=!!d[c]?.result?.rulerConfig||!!f?.rulerConfig,y=n.contextSrv.hasPermission(E.update),D=n.contextSrv.hasPermission(E.delete);return{isRulerAvailable:s,isEditable:y&&s,isRemovable:D&&s,loading:m||d[c]?.loading}}},67483:(Q,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(69781),a=e.n(n),i=e(31733);function r(o,g=1,u){const[c,l]=(0,i.useState)(g),d=(0,i.useMemo)(()=>(0,n.chunk)(o,u),[o,u]),f=d.length,m=d[c-1]??[],v=(c-1)*u+1,E=(0,n.clamp)(c*u,o.length),p=(0,i.useCallback)(y=>{l((0,n.clamp)(y,1,d.length))},[l,d]),h=(0,i.useCallback)(()=>p(c+1),[c,p]),s=(0,i.useCallback)(()=>p(c-1),[c,p]);return(0,i.useEffect)(()=>l(1),[f]),{page:c,onPageChange:p,numberOfPages:f,pageItems:m,pageStart:v,pageEnd:E,nextPage:h,previousPage:s}}},7119:(Q,A,e)=>{"use strict";e.d(A,{n:()=>i});var n=e(59326),a=e(97068);function i(r){const{loading:o,error:g,value:u}=(0,n.Z)(()=>(0,a.a)(r,{showErrorAlert:!1})),c=u&&!g&&!o,l=u?.enabled;return o&&!u?{loading:!0}:!c||!l?{loading:!1,installed:!1}:{loading:o,installed:!0,settings:u}}},23708:(Q,A,e)=>{"use strict";e.d(A,{N:()=>c,u:()=>l});var n=e(76932),a=e(31733),i=e(85498),r=e(76067),o=e(5572);const g=(0,a.lazy)(()=>e.e(3413).then(e.bind(e,33413))),u=(0,a.lazy)(()=>e.e(4345).then(e.bind(e,64345)));var c=(f=>(f.Loki="loki",f.Annotations="annotations",f))(c||{});function l(){const[f,m]=(0,a.useState)(!1),[v,E]=(0,a.useState)(),p=(0,r.wW)(d),h=i.config.unifiedAlerting.alertStateHistoryBackend,s=i.config.unifiedAlerting.alertStateHistoryPrimary,D=[h,s].some(T=>T==="loki")?"loki":"annotations",C=(0,a.useCallback)(()=>{E(void 0),m(!1)},[]),P=(0,a.useCallback)(T=>{E(T),m(!0)},[]);return{StateHistoryModal:(0,a.useMemo)(()=>v?a.createElement(o.u,{isOpen:f,onDismiss:C,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:p.modal,contentClassName:p.modalContent},a.createElement(a.Suspense,{fallback:"Loading..."},D==="loki"&&a.createElement(u,{ruleUID:v.grafana_alert.uid}),D==="annotations"&&a.createElement(g,{alertId:v.grafana_alert.id??""}))):null,[v,f,C,D,p]),showStateHistoryModal:P,hideStateHistoryModal:C}}const d=f=>({modal:(0,n.css)`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:(0,n.css)`
    height: 100%;
    width: 100%;
    padding: ${f.spacing(2)};
  `})},68144:(Q,A,e)=>{"use strict";e.d(A,{_:()=>i});var n=e(7261),a=e(42342);function i(r,o){return(0,a.useSelector)((0,n.P1)(g=>g.unifiedAlerting,g=>r(g)),o)}},22381:(Q,A,e)=>{"use strict";e.d(A,{VG:()=>_,HY:()=>k,ug:()=>K});var n=e(58126),a=e(96198);const i=1,r=2,o=3,g=4,u=5,c=6,l=7,d=8,f=9,m=10,v=11,E=12,p=0,h=1,s=2,y=3,D=4,C=5,P=6,b=7;var T=e(69781),O=e(25761);const R=O.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),I={[o]:"datasource",[u]:"namespace",[c]:"label",[d]:"rule",[l]:"group",[f]:"state",[m]:"type",[v]:"health"};var M=(W=>(W.dataSource="dataSourceFilter",W.nameSpace="nameSpaceFilter",W.label="labelFilter",W.group="groupFilter",W.rule="ruleFilter",W.state="stateFilter",W.type="typeFilter",W.health="healthFilter",W))(M||{});function x(W,Z,H){N(W,Z,X=>{if(X.type.id===r){const Y=L(W,X);if(Y.type&&Y.value){const ne=H[Y.type];ne&&ne(Y.value)}}else if(X.type.id===E){const Y=H[E];Y&&Y(S(W,X))}})}function L(W,Z){if(Z.type.id!==r)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const H=Z.firstChild;if(!H)return{type:void 0,value:void 0};const X=Z.getChild(g),Y=X?(0,T.trim)(S(W,X),'"'):void 0;return{type:H.type.id,value:Y}}function S(W,Z){return W.slice(Z.from,Z.to).trim().replace(/\"/g,"")}function U(W,Z,H){const X=[];N(W,Z,ne=>{ne.type.id===r&&ne.firstChild&&X.push(ne.firstChild),ne.type.id===E&&X.push(ne)});let Y=[];return X.forEach(ne=>{const se=H.findIndex(re=>re.type===ne.type.id);if(se!==-1){if(ne.parent?.type.is(r)){const re=I[ne.type.id],ge=H.splice(se,1)[0];Y.push(`${re}:${w(ge.value)}`)}if(ne.type.is(E)){const re=H.splice(se,1)[0];Y.push(re.value)}}}),H.forEach(ne=>{ne.type===E?Y.push(ne.value):Y.push(`${I[ne.type]}:${w(ne.value)}`)}),Y.join(" ")}function N(W,Z,H){const X=Z.join(" ");let ne=R.configure({dialect:X}).parse(W).cursor();do H(ne.node);while(ne.next())}function w(W){return/\s/.test(W)?`"${W}"`:W}const G=[M.dataSource,M.nameSpace,M.label,M.group,M.rule,M.state,M.type,M.health];var _=(W=>(W.Ok="ok",W.Error="error",W.NoData="nodata",W.Unknown="unknown",W))(_||{});function K(W){const Z={labels:[],freeFormWords:[],dataSourceNames:[]},H={[o]:X=>Z.dataSourceNames.push(X),[u]:X=>Z.namespace=X,[l]:X=>Z.groupName=X,[d]:X=>Z.ruleName=X,[c]:X=>Z.labels.push(X),[f]:X=>Z.ruleState=z(X),[m]:X=>(0,a.Wd)(X)?Z.ruleType=X:void 0,[v]:X=>Z.ruleHealth=(0,a.vU)(X),[E]:X=>Z.freeFormWords.push(X)};return x(W,G,H),Z}function k(W,Z){const H=[];return Z.dataSourceNames&&H.push(...Z.dataSourceNames.map(X=>({type:o,value:X}))),Z.namespace&&H.push({type:u,value:Z.namespace}),Z.groupName&&H.push({type:l,value:Z.groupName}),Z.ruleName&&H.push({type:d,value:Z.ruleName}),Z.ruleState&&H.push({type:f,value:Z.ruleState}),Z.ruleType&&H.push({type:m,value:Z.ruleType}),Z.ruleHealth&&H.push({type:v,value:Z.ruleHealth}),Z.labels&&H.push(...Z.labels.map(X=>({type:c,value:X}))),Z.freeFormWords&&H.push(...Z.freeFormWords.map(X=>({type:E,value:X}))),U(W,G,H)}function z(W){if(W==="normal")return n.x_.Inactive;if((0,n.I9)(W))return W}},1203:(Q,A,e)=>{"use strict";e.d(A,{ZA:()=>d,h5:()=>l,k0:()=>v});var n=e(31733),a=e(297),i=e(39357),r=e(43764),o=e(17705),g=e(98319),u=e(67451);const c=n.createContext(void 0),l=({children:E,accessType:p,alertmanagerSourceName:h})=>{const[s,y]=(0,a.K)(),D=(0,o.k)(p),C=D.availableInternalDataSources.concat(D.availableExternalDataSources),P=n.useCallback(N=>{f(C,N)&&(N===u.GC?(i.Z.delete(g.de),y({[g.c4]:null})):(i.Z.set(g.de,N),y({[g.c4]:N})))},[C,y]),b=s[g.c4],T=i.Z.get(g.de),O=u.GC,R=h??b??T??O,I=f(C,R)?R:void 0,M=(0,u.EQ)(I)?.jsonData,x=I===u.GC,L=M?v(M):!1,U={selectedAlertmanager:I,hasConfigurationAPI:x||L,isGrafanaAlertmanager:x,selectedAlertmanagerConfig:M,availableAlertManagers:C,setSelectedAlertmanager:P};return n.createElement(c.Provider,{value:U},E)};function d(){const E=n.useContext(c);if(E===void 0)throw new Error("useAlertmanager must be used within a AlertmanagerContext");return E}function f(E,p){return E.map(s=>s.name).includes(p)}const m=[r.sK.mimir,r.sK.cortex,void 0];function v(E){return m.includes(E.implementation)}},84415:(Q,A,e)=>{"use strict";e.d(A,{QY:()=>me,Nc:()=>Pe,r0:()=>Ee,hS:()=>X,oE:()=>H,S6:()=>fe,yO:()=>q,mS:()=>Me,ei:()=>z,dV:()=>K,lB:()=>W,dB:()=>ge,on:()=>Z,zy:()=>S,wE:()=>U,vL:()=>ve,sw:()=>pe,Ms:()=>se,Vj:()=>ne,dn:()=>w,y6:()=>L,UR:()=>N,IA:()=>_,nw:()=>k,je:()=>G,iH:()=>Le,wy:()=>Y,D8:()=>he,mM:()=>re,hv:()=>ke,tg:()=>ot});var n=e(4579),a=e(69781),i=e(19690),r=e(58126),o=e(41327),g=e(80127),u=e(18892),c=e(42460),l=e(69391);function d(ce){return(0,l.i)().get("/api/annotations",{alertId:ce}).then(le=>le?.sort(f))}function f(ce,le){const Re=($e,Ye)=>$e>Ye?-1:Ye>$e?1:0,Ae=Re(ce.timeEnd,le.timeEnd);if(Ae)return Ae;const Oe=Re(ce.time,le.time);return Oe||Re(ce.id,le.id)}var m=e(82160),v=e(99466),E=e(35304),p=e(21352),h=e(93797),s=e(10322),y=e(67451),D=e(66172),C=e(39138),P=e(97503),b=e(1636),T=e(96198);function O(ce){const le=async je=>{if((0,T.Kl)(je)){const ut=await(0,p.m6)(ce);for(const[Fe,Te]of Object.entries(ut))for(const Ve of Te){const tt=Ve.rules.find(ae=>(0,T.Pc)(ae)&&ae.grafana_alert?.uid===je.uid);if(tt)return{group:Ve,ruleSourceName:y.GC,namespace:Fe,rule:tt}}}if((0,T.E4)(je)){const{ruleSourceName:ut,namespace:Fe,groupName:Te}=je,Ve=await(0,p.jJ)(ce,Fe,Te);if(!Ve)return null;const tt=Ve.rules.find(ae=>{const J=P.Zk(ut,Fe,Ve.name,ae);return P.Dg(J,je)});return tt?{group:Ve,ruleSourceName:ut,namespace:Fe,rule:tt}:null}if((0,T.qE)(je))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Re=async je=>{const{namespace:ut,group:Fe,rule:Te}=je;if(Fe.rules.length===1){await(0,p.BC)(ce,ut,Fe.name);return}await(0,p.P4)(ce,ut,{...Fe,rules:Fe.rules.filter(Ve=>Ve!==Te)})},Ae=async(je,ut,Fe)=>{const{dataSourceName:Te,group:Ve,namespace:tt}=je,ae=(0,b.yh)(je);if(Te&&Ve&&tt){if(Fe){const de=await le(P.CK(Fe));if(!de)throw new Error("Rule not found.");if(de.namespace!==tt||de.group.name!==Ve)await Re(de);else{const be={...de.group,rules:de.group.rules.map(De=>De===de.rule?ae:De),evaluateEvery:ut};return await(0,p.P4)(ce,tt,be),P.Zk(Te,tt,Ve,ae)}}const J=await(0,p.jJ)(ce,tt,Ve),te=J?{...J,rules:[...J.rules,ae]}:{name:Ve,rules:[ae]};return await(0,p.P4)(ce,tt,te),P.Zk(Te,tt,Ve,ae)}else throw new Error("Data source and location must be specified")},Oe=async(je,ut,Fe)=>{const{folder:Te,group:Ve}=je;if(!Te)throw new Error("Folder must be specified");const tt=(0,b.mI)(je),ae=Te.title,J={name:Ve,interval:ut};if(!Fe)return $e(ae,J,tt);const te=await le(P.CK(Fe));if(!te)throw new Error("Rule not found.");const de=te.namespace===ae,be=te.group.name===je.group;return de&&be?Ne(te,tt,ut):Ye(ae,J,te,tt)},$e=async(je,ut,Fe)=>{const Te=await(0,p.jJ)(ce,je,ut.name);if(!Te)throw new Error(`No group found with name "${ut.name}"`);const Ve={name:ut.name,interval:ut.interval,rules:(Te.rules??[]).concat(Fe)};return await(0,p.P4)(ce,je,Ve),{uid:Fe.grafana_alert.uid??"",ruleSourceName:y.GC}},Ye=async(je,ut,Fe,Te)=>(R(Fe,Te),await $e(je,ut,Te)),Ne=async(je,ut,Fe)=>{R(je,ut);const Te=je.group.rules.map(Ve=>(0,T.Pc)(Ve)&&Ve.grafana_alert.uid===je.rule.grafana_alert.uid?ut:Ve);return await(0,p.P4)(ce,je.namespace,{name:je.group.name,interval:Fe,rules:Te}),{uid:je.rule.grafana_alert.uid,ruleSourceName:y.GC}};return{findEditableRule:le,deleteRule:Re,saveLotexRule:Ae,saveGrafanaRule:Oe}}function R(ce,le){if(!(0,T.Pc)(ce.rule))throw new Error("The rule is not a Grafana managed rule");const Re=ce.rule.grafana_alert.uid;le.grafana_alert.uid=Re}var I=e(90233);function M(ce,le){const Ae=ce().unifiedAlerting.dataSources[le]?.result;if(!Ae)throw new Error(`Data source configuration is not available for "${le}" data source`);return Ae}function x(ce,le){const Re=M(ce,le);if(!Re.rulerConfig)throw new Error(`Ruler API is not available for ${le}`);return Re.rulerConfig}const L=(0,n.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:ce,filter:le,limitAlerts:Re,matcher:Ae,state:Oe,identifier:$e},Ye)=>{await Ye.dispatch(k({rulesSourceName:ce}));const Ne=(0,g.bA)(E.j,`[${ce}] Prometheus rules loaded`,{dataSourceName:ce,thunk:"unifiedalerting/fetchPromRules"});return await(0,C.$b)(Ne(ce,le,Re,Ae,Oe,$e))}),S=(0,n.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,C.$b)((0,u.$l)())),U=(0,n.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,C.$b)((0,u.Zo)())),N=(0,n.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:ce,filter:le},{dispatch:Re,getState:Ae})=>{await Re(k({rulesSourceName:ce}));const Oe=x(Ae,ce),$e=(0,g.yT)(p.m6,`[${ce}] Ruler rules loaded`,{dataSourceName:ce,thunk:"unifiedalerting/fetchRulerRules"});return await(0,C.$b)($e(Oe,le))});function w({rulesSourceName:ce,identifier:le,filter:Re,limitAlerts:Ae,matcher:Oe,state:$e}){return async(Ye,Ne)=>{await Ye(k({rulesSourceName:ce}));const je=M(Ne,ce);await Ye(L({rulesSourceName:ce,identifier:le,filter:Re,limitAlerts:Ae,matcher:Oe,state:$e})),je.rulerConfig&&await Ye(N({rulesSourceName:ce}))}}const G=(0,n.hg)("unifiedalerting/fetchSilences",ce=>{const le=(0,g.pM)(u.U7,`[${ce}] Silences loaded`,{dataSourceName:ce,thunk:"unifiedalerting/fetchSilences"});return(0,C.$b)(le(ce))});function _(ce){return(le,Re)=>{const{rulerRules:Ae}=Re().unifiedAlerting,Oe=Ae[ce];(0,a.isEmpty)(Oe?.result)&&!(Oe&&(0,T.m$)(Oe))&&!Oe?.loading&&le(N({rulesSourceName:ce}))}}function K(){return async ce=>{const le=(0,y.mA)().map(Re=>ce(k({rulesSourceName:Re})));await Promise.allSettled(le)}}const k=(0,n.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:ce})=>(0,C.$b)((async()=>{if(ce===y.GC)return{name:y.GC,id:y.GC,rulerConfig:{dataSourceName:y.GC,apiVersion:"legacy"}};const le=(0,y.VX)(ce);if(!le)throw new Error(`Missing data source configuration for ${ce}`);const{id:Re,name:Ae}=le,$e=await(0,g.pM)(m.C$,`[${ce}] Rules source features discovered`,{dataSourceName:ce,thunk:"unifiedalerting/fetchPromBuildinfo"})(Ae),Ye=$e.features.rulerApiEnabled?{dataSourceName:Ae,apiVersion:$e.application===r.T8.Cortex?"legacy":"config"}:void 0;return{name:Ae,id:Re,rulerConfig:Ye}})()),{condition:({rulesSourceName:ce},{getState:le})=>{const Re=le().unifiedAlerting.dataSources,Ae=!!Re[ce]?.result,Oe=!!Re[ce]?.error;return!(Ae||Oe)}});function z(ce=!1,le={}){return async(Re,Ae)=>{const Oe=performance.now();await Promise.allSettled((0,y.mA)().map(async $e=>{await Re(k({rulesSourceName:$e}));const{promRules:Ye,rulerRules:Ne,dataSources:je}=Ae().unifiedAlerting,ut=je[$e].result;if(!ut)return;const Fe=ce||!Ye[$e]?.loading,Te=(ce||!Ne[$e]?.loading)&&!!ut.rulerConfig;await Promise.allSettled([Fe&&Re(L({rulesSourceName:$e,...le})),Te&&Re(N({rulesSourceName:$e}))])})),(0,g.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Oe).toFixed(0)})}}function W(ce=!1){return async(le,Re)=>{const{promRules:Ae}=Re().unifiedAlerting;(0,y.mA)().map(Oe=>{(ce||!Ae[Oe]?.loading)&&le(L({rulesSourceName:Oe}))})}}const Z=(0,n.hg)("unifiedalerting/fetchEditableRule",(ce,le)=>{const Re=x(le.getState,ce.ruleSourceName);return(0,C.$b)(O(Re).findEditableRule(ce))});function H(ce,le){return async(Re,Ae)=>{(0,C.Ez)((async()=>{const Oe=(0,y.EG)(ce.rulesSource),$e=x(Ae,Oe);await(0,p.BC)($e,ce.name,le.name),await Re(w({rulesSourceName:Oe}))})(),{successMessage:"Group deleted"})}}function X(ce,le={}){return async(Re,Ae)=>{await Re(k({rulesSourceName:ce.ruleSourceName})),(0,C.Ez)((async()=>{const Oe=x(Ae,ce.ruleSourceName),$e=O(Oe),Ye=await $e.findEditableRule(ce);if(!Ye)throw new Error("Rule not found.");await $e.deleteRule(Ye),await Re(w({rulesSourceName:Ye.ruleSourceName})),le.navigateTo&&i.E1.replace(le.navigateTo)})(),{successMessage:"Rule deleted."})}}const Y=(0,n.hg)("unifiedalerting/saveRuleForm",({values:ce,existing:le,redirectOnSave:Re,evaluateEvery:Ae},Oe)=>(0,C.Ez)((0,C.$b)((async()=>{const{type:$e}=ce;let Ye;if($e===h.$.cloudAlerting||$e===h.$.cloudRecording){if(!ce.dataSourceName)throw new Error("The Data source has not been defined.");const Ne=x(Oe.getState,ce.dataSourceName);Ye=await O(Ne).saveLotexRule(ce,Ae,le),await Oe.dispatch(N({rulesSourceName:ce.dataSourceName}))}else if($e===h.$.grafana){const Ne=x(Oe.getState,y.GC);Ye=await O(Ne).saveGrafanaRule(ce,Ae,le),await Oe.dispatch(N({rulesSourceName:y.GC}))}else throw new Error("Unexpected rule form type");if((0,g.PN)(g.z7.successSavingAlertRule,{type:$e,isNew:(!le).toString()}),Re)i.E1.push(Re);else{const Ne=P.$V(Ye);if(!Ne){i.E1.push("/alerting/list");return}const je=`/alerting/${encodeURIComponent(Ne)}/edit`;i.E1.getLocation().pathname!==je?i.E1.replace(je):Oe.dispatch(Z(Ye))}})()),{successMessage:le?`Rule "${ce.name}" updated.`:`Rule "${ce.name}" saved.`,errorMessage:"Failed to save rule"})),ne=(0,n.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,C.$b)((0,v.i9)())),se=(0,n.hg)("unifiedalerting/fetchGrafanaAnnotations",ce=>(0,C.$b)(d(ce))),re=(0,n.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:ce,oldConfig:le,newConfig:Re,successMessage:Ae,redirectPath:Oe,redirectSearch:$e},Ye)=>(0,C.Ez)((0,C.$b)((async()=>{const Ne=await Ye.dispatch(c.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(ce)).unwrap(),je=(0,a.isEmpty)(Ne.alertmanager_config)&&(0,a.isEmpty)(Ne.template_files),ut=JSON.stringify(Ne)!==JSON.stringify(le);if(!je&&ut)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,u.oy)(ce,(0,s.X4)(Re)),Ye.dispatch(c.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"])),Oe){const Fe=new URLSearchParams($e??"");i.E1.push((0,D.eQ)(Oe,ce,Fe))}})()),{successMessage:Ae})),ge=(0,n.hg)("unifiedalerting/fetchAmAlerts",ce=>(0,C.$b)((0,u.QK)(ce,[],!0,!0,!0))),q=(ce,le)=>async Re=>{await(0,C.Ez)((0,u.iT)(ce,le),{successMessage:"Silence expired."}),Re(G(ce)),Re(ge(ce))},me=(0,n.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:ce,payload:le,exitOnSave:Re,successMessage:Ae})=>(0,C.Ez)((0,C.$b)((async()=>{await(0,u.dx)(ce,le),Re&&i.E1.push("/alerting/silences")})()),{successMessage:Ae})),oe=(ce,le)=>async Re=>{const Ae=await Re(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(le)).unwrap();if(!Ae)throw new Error(`Config for ${le} not found`);if(!Ae.alertmanager_config.receivers?.find($e=>$e.name===ce))throw new Error(`Cannot delete receiver ${ce}: not found in config.`);const Oe={...Ae,alertmanager_config:{...Ae.alertmanager_config,receivers:Ae.alertmanager_config.receivers.filter($e=>$e.name!==ce)}};return Re(re({newConfig:Oe,oldConfig:Ae,alertManagerSourceName:le,successMessage:"Contact point deleted."}))},fe=(ce,le)=>async Re=>{const Ae=await Re(c.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(le)).unwrap();if(!Ae)throw new Error(`Config for ${le} not found`);if(typeof Ae.template_files?.[ce]!="string")throw new Error(`Cannot delete template ${ce}: not found in config.`);const Oe={...Ae.template_files};delete Oe[ce];const $e={...Ae,alertmanager_config:{...Ae.alertmanager_config,templates:Ae.alertmanager_config.templates?.filter(Ye=>Ye!==ce)},template_files:Oe};return Re(re({newConfig:$e,oldConfig:Ae,alertManagerSourceName:le,successMessage:"Template deleted."}))},ve=(0,n.hg)("unifiedalerting/fetchFolder",ce=>(0,C.$b)(o.ae.getFolderByUid(ce,{withAccessControl:!0}))),pe=ce=>(le,Re)=>{Re().unifiedAlerting.folders[ce]?.dispatched||le(ve(ce))},Me=(0,n.hg)("unifiedalerting/fetchAlertGroups",ce=>(0,C.$b)((0,u.XK)(ce))),Pe=(0,n.hg)("unifiedalerting/deleteAlertManagerConfig",async(ce,le)=>(0,C.Ez)((0,C.$b)((async()=>{await(0,u.CN)(ce),await le.dispatch(c.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),Ee=(ce,le)=>async Re=>{const Ae=await Re(c.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(ce)).unwrap(),Oe=Ae?.alertmanager_config?.mute_time_intervals?.filter(({name:$e})=>$e!==le)??[];Ae&&(0,C.Ez)(Re(re({alertManagerSourceName:ce,oldConfig:Ae,newConfig:{...Ae,alertmanager_config:{...Ae.alertmanager_config,route:Ae.alertmanager_config.route?(0,s.rU)(le,Ae.alertmanager_config?.route):void 0,mute_time_intervals:Oe}}})),{successMessage:`Deleted "${le}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},he=(0,n.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:ce,receivers:le,alert:Re})=>(0,C.Ez)((0,C.$b)((0,u.Bp)(ce,le,Re)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Le=(ce,le)=>ce.filter(Re=>{const{forDuration:Ae}=(0,T.qd)(Re,le),Oe=(0,I.Bg)(Ae),$e=(0,I.Bg)(le);return Oe!==0&&Oe<$e}),ke=(0,n.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(ce,le)=>(0,C.Ez)((0,C.$b)((async()=>{const{rulesSourceName:Re,namespaceName:Ae,groupName:Oe,newNamespaceName:$e,newGroupName:Ye,groupInterval:Ne}=ce,je=x(le.getState,Re),ut=await(0,p.m6)(je);if(!!!ut[Ae])throw new Error(`Namespace "${Ae}" not found.`);const Te=ut[Ae].find(ae=>ae.name===Oe);if(!Te)throw new Error(`Group "${Oe}" not found.`);const Ve=!!ut[Ae].find(ae=>ae.name===Ye);if(Ye!==Oe&&Ve)throw new Error(`Group "${Ye}" already exists in namespace "${Ae}".`);const tt=!!ut[$e];if($e!==Ae&&tt)throw new Error(`Namespace "${$e}" already exists.`);if($e===Ae&&Oe===Ye&&Ne===Te.interval)throw new Error("Nothing changed.");if(Ne!==Te.interval){const ae=Le(Te.rules,Ne??"1m");if(ae.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${ae.map(J=>{const{alertName:te}=(0,T.qd)(J,Ne??"");return te}).join(",")}`)}if($e!==Ae){for(const ae of ut[Ae])await(0,p.P4)(je,$e,ae.name===Oe?{...ae,name:Ye,interval:Ne}:ae);await(0,p.sz)(je,Ae)}else await(0,p.P4)(je,Ae,{...Te,name:Ye,interval:Ne}),Ye!==Oe&&await(0,p.BC)(je,Ae,Oe);await le.dispatch(N({rulesSourceName:Re}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),ot=(0,n.hg)("unifiedalerting/updateRulesOrderForGroup",async(ce,le)=>(0,C.Ez)((0,C.$b)((async()=>{const{rulesSourceName:Re,namespaceName:Ae,groupName:Oe,newRules:$e}=ce,Ye=x(le.getState,Re),je=(await(0,p.m6)(Ye))[Ae].find(Fe=>Fe.name===Oe);if(!je)throw new Error(`Group "${Oe}" not found.`);const ut={name:je.name,interval:je.interval,rules:$e};await(0,p.P4)(Ye,Ae,ut),await le.dispatch(N({rulesSourceName:Re}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),it=(0,n.hg)("unifiedAlerting/addExternalAlertmanagers",async(ce,le)=>(0,C.Ez)((0,C.$b)((async()=>{await(0,u.tK)(ce),le.dispatch(U())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},1024:(Q,A,e)=>{"use strict";e.d(A,{r:()=>i});var n=e(76932),a=e(43764);const i=r=>({[a.Z9.Active]:(0,n.css)`
    color: ${r.colors.error.text};
  `,[a.Z9.Suppressed]:(0,n.css)`
    color: ${r.colors.primary.text};
  `,[a.Z9.Unprocessed]:(0,n.css)`
    color: ${r.colors.secondary.text};
  `})},88875:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>a});var n=e(76932);const a=i=>(0,n.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${i.spacing(2,0)};
  `},38251:(Q,A,e)=>{"use strict";e.d(A,{W:()=>n});var n=(a=>(a.Incident="grafana-incident-app",a.OnCall="grafana-oncall-app",a.MachineLearning="grafana-ml-app",a))(n||{})},93797:(Q,A,e)=>{"use strict";e.d(A,{$:()=>n});var n=(a=>(a.grafana="grafana",a.cloudAlerting="cloud-alerting",a.cloudRecording="cloud-recording",a))(n||{})},44983:(Q,A,e)=>{"use strict";e.d(A,{t:()=>n});var n=(a=>(a.seconds="s",a.minutes="m",a.hours="h",a.days="d",a.weeks="w",a))(n||{})},81347:(Q,A,e)=>{"use strict";e.d(A,{Bz:()=>m,Fo:()=>u,Ko:()=>f,Ob:()=>g,QX:()=>d,Rv:()=>E,iE:()=>p,ql:()=>v});var n=e(83811),a=e(56811),i=e(42342),r=e(67451);function o(h){return(0,r.HY)(h)?"grafana":"external"}const g={read:{grafana:i.AccessControlAction.AlertingInstanceRead,external:i.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:i.AccessControlAction.AlertingInstanceCreate,external:i.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:i.AccessControlAction.AlertingInstanceUpdate,external:i.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:i.AccessControlAction.AlertingInstanceUpdate,external:i.AccessControlAction.AlertingInstancesExternalWrite}},u={read:{grafana:i.AccessControlAction.AlertingNotificationsRead,external:i.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite}},c={read:i.AccessControlAction.AlertingProvisioningRead,readSecrets:i.AccessControlAction.AlertingProvisioningReadSecrets,write:i.AccessControlAction.AlertingProvisioningWrite},l={read:{grafana:i.AccessControlAction.AlertingRuleRead,external:i.AccessControlAction.AlertingRuleExternalRead},create:{grafana:i.AccessControlAction.AlertingRuleCreate,external:i.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:i.AccessControlAction.AlertingRuleUpdate,external:i.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:i.AccessControlAction.AlertingRuleDelete,external:i.AccessControlAction.AlertingRuleExternalWrite}};function d(h){const s=o(h);return{read:g.read[s],create:g.create[s],update:g.update[s],delete:g.delete[s]}}function f(h){const s=o(h);return{read:u.read[s],create:u.create[s],update:u.update[s],delete:u.delete[s],provisioning:c}}function m(h){const s=o(h);return{read:l.read[s],create:l.create[s],update:l.update[s],delete:l.delete[s]}}function v(h){return()=>a.contextSrv.evaluatePermission(h)}function E(){return{canCreateGrafanaRules:a.contextSrv.hasPermission(i.AccessControlAction.FoldersRead)&&a.contextSrv.hasPermission(l.create.grafana),canCreateCloudRules:a.contextSrv.hasPermission(i.AccessControlAction.DataSourcesRead)&&a.contextSrv.hasPermission(l.create.external),canEditRules:h=>a.contextSrv.hasPermission(m(h).update)}}function p(){const{unifiedAlertingEnabled:h}=(0,n.iE)(),s=a.contextSrv.hasPermission(m(r.GC).read),y=a.contextSrv.hasPermission(m(r.GC).update);return h&&s&&y}},10322:(Q,A,e)=>{"use strict";e.d(A,{FM:()=>c,J8:()=>R,X4:()=>g,Xy:()=>P,Zh:()=>h,_J:()=>m,cm:()=>f,eD:()=>y,m8:()=>I,qw:()=>M,rU:()=>u,tA:()=>E,u6:()=>T,uK:()=>b,v7:()=>O,vB:()=>D,xz:()=>p,zy:()=>l});var n=e(69781),a=e.n(n),i=e(43764),r=e(79788),o=e(67451);function g(x){return x.alertmanager_config.receivers||(x.alertmanager_config.receivers=[{name:"default "}]),x.alertmanager_config.route||(x.alertmanager_config.route={receiver:x.alertmanager_config.receivers[0].name}),x.template_files||(x.template_files={}),x}function u(x,L){return{...L,mute_time_intervals:L.mute_time_intervals?.filter(U=>U!==x)??[],routes:L.routes?.map(U=>u(x,U))}}function c(x,L,S){return{...S,mute_time_intervals:S.mute_time_intervals?.map(U=>U===L?x:U),routes:S.routes?.map(U=>c(x,L,U))}}function l(x){return x.isEqual?x.isRegex?i._M.regex:i._M.equal:x.isRegex?i._M.notRegex:i._M.notEqual}function d(x){switch(x){case i._M.equal:return{isEqual:!0,isRegex:!1};case i._M.notEqual:return{isEqual:!1,isRegex:!1};case i._M.regex:return{isEqual:!0,isRegex:!0};case i._M.notRegex:return{isEqual:!1,isRegex:!0}}}function f(x){return{name:x.name,value:x.value,operator:l(x)}}function m(x){return{name:x.name,value:x.value,...d(x.operator)}}function v(x){return`{${x.map(f).reduce((U,N)=>{const w=`${N.name}${N.operator}"${N.value}"`;return U?`${U},${w}`:w},"")}}`}const E=[{label:i._M.equal,description:"Equals",value:i._M.equal},{label:i._M.notEqual,description:"Does not equal",value:i._M.notEqual},{label:i._M.regex,description:"Matches regex",value:i._M.regex},{label:i._M.notRegex,description:"Does not match regex",value:i._M.notRegex}];function p(x){const L=l(x);return[x.name,L,x.value]}function h(x){const L=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,S=[];return x.replace(L,(U,N,w,G)=>{const _=w===i._M.equal||w===i._M.regex,K=w===i._M.regex||w===i._M.notRegex;return S.push({name:N,value:K?s(G.trim()):G.trim(),isEqual:_,isRegex:K}),""}),S}function s(x){try{return new RegExp(x),x}catch{return""}}function y(x,L){return L.every(({name:S,value:U,isRegex:N,isEqual:w})=>Object.entries(x).some(([G,_])=>{const K=S===G;let k;return w&&!N&&(k=U===_),!w&&!N&&(k=U!==_),w&&N&&(k=new RegExp(U).test(_)),!w&&N&&(k=!new RegExp(U).test(_)),K&&k}))}function D(...x){const L=x.map(h).flat(),S=(0,n.uniqWith)(L,n.isEqual);return v(S)}function C(){return(0,r.x)().filter(x=>x.type===o.ye.Alertmanager)}function P(x){return C().find(L=>x===L.uid)}function b(x){const{times:L,weekdays:S,days_of_month:U,months:N,years:w,location:G}=x,_=T(L,G),K=O(S),k=R(U),z=I(N),W=M(w);return[_,K,k,z,W].join(", ")}function T(x,L){return"Times: "+(x?x?.map(({start_time:S,end_time:U})=>`${S} - ${U} [${L??"UTC"}]`).join(" and "):"All")}function O(x){return"Weekdays: "+(x?.map(L=>{if(L.includes(":"))return L.split(":").map(S=>{const U=S.slice(0,3);return U[0].toLocaleUpperCase()+U.slice(1)}).join("-");{const S=L.slice(0,3);return S[0].toLocaleUpperCase()+S.slice(1)}}).join(", ")??"All")}function R(x){return"Days of the month: "+(x?.join(", ")??"All")}function I(x){return"Months: "+(x?.join(", ")??"All")}function M(x){return"Years: "+(x?.join(", ")??"All")}},26073:(Q,A,e)=>{"use strict";e.d(A,{$9:()=>o,XW:()=>g});var n=e(31733),a=e(98319),i=e(66172);function r(u){return{dashboardUID:u.find(([c])=>c===a.q6.dashboardUID)?.[1],panelId:u.find(([c])=>c===a.q6.panelID)?.[1]}}function o(u){return(0,n.useMemo)(()=>Object.entries(u||{}).filter(([c,l])=>!!l.trim()),[u])}function g(u){const c=new Map,{panelId:l,dashboardUID:d}=r(u);return d&&c.set(a.q6.dashboardUID,(0,i.RQ)(d)),d&&l&&c.set(a.q6.panelID,(0,i.yM)(d,l)),c}},79788:(Q,A,e)=>{"use strict";e.d(A,{f:()=>r,x:()=>i});var n=e(85498),a=e(90233);function i(){return Object.values(n.config.datasources)}function r(o){if(!(0,a.wd)(n.config.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const g=(0,a.nd)(n.config.unifiedAlerting.minInterval);if(!o||!(0,a.wd)(o))return{globalLimit:g,exceedsLimit:!1};const u=(0,a.nd)(o),c=g>u&&u>0;return{globalLimit:g,exceedsLimit:c}}},98319:(Q,A,e)=>{"use strict";e.d(A,{_y:()=>v,c4:()=>i,cm:()=>o,de:()=>r,eY:()=>E,iF:()=>g,jZ:()=>n,m4:()=>u,p4:()=>a,q6:()=>f,vY:()=>m});const n="ruler not supported",a=2e4,i="alertmanager",r="alerting-alertmanager",o=2e4,g=2e4,u=2e4,c="timeseries",l="table",d="stat";var f=(p=>(p.description="description",p.summary="summary",p.runbookURL="runbook_url",p.alertId="__alertId__",p.dashboardUID="__dashboardUid__",p.panelID="__panelId__",p))(f||{});const m={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},v={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},E=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},67451:(Q,A,e)=>{"use strict";e.d(A,{$$:()=>C,EG:()=>R,EQ:()=>U,Eu:()=>E,GC:()=>d,G_:()=>k,HY:()=>L,JY:()=>f,LE:()=>P,P:()=>K,RY:()=>x,VX:()=>p,aM:()=>h,c$:()=>S,gt:()=>G,h_:()=>O,jq:()=>M,mA:()=>T,o_:()=>N,v_:()=>I,ye:()=>m,z3:()=>D});var n=e(66261),a=e(56811),i=e(43764),r=e(42342),o=e(42460),g=e(17705),u=e(1203),c=e(81347),l=e(79788);const d="grafana",f="-- Grafana --";var m=(z=>(z.Alertmanager="alertmanager",z.Loki="loki",z.Prometheus="prometheus",z))(m||{});const v=["loki","prometheus"];function E(){return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleExternalRead)?(0,l.x)().filter(z=>v.includes(z.type)&&z.jsonData.manageAlerts!==!1).sort((z,W)=>z.name.localeCompare(W.name)):[]}function p(z){return E().find(W=>W.name===z)}function h(){return(0,l.x)().filter(z=>z.type==="alertmanager").sort((z,W)=>z.name.localeCompare(W.name))}function s(){return h().filter(z=>z.jsonData.handleGrafanaManagedAlerts)}const y={name:d,imgUrl:"public/img/grafana_icon.svg",hasConfigurationAPI:!0};function D(){return[y,...h().map(z=>({name:z.name,displayName:z.name,imgUrl:z.meta.info.logos.small,meta:z.meta}))]}function C(z){const W=(0,g.k)(z),Z=W.availableExternalDataSources.filter(ne=>ne.handleGrafanaManagedAlerts),H=W.availableInternalDataSources,{currentData:X}=o.alertmanagerApi.useGetAlertmanagerChoiceStatusQuery(void 0);switch(X?.alertmanagersChoice){case i.TE.Internal:return H;case i.TE.External:return Z;default:return[...H,...Z]}}function P(z){const W=[],Z=[],H={instance:c.Ob.read,notification:c.Fo.read};if(a.contextSrv.hasPermission(H[z].grafana)&&W.push(y),a.contextSrv.hasPermission(H[z].external)){const X=h().map(Y=>({name:Y.name,displayName:Y.name,imgUrl:Y.meta.info.logos.small,meta:Y.meta,hasConfigurationAPI:(0,u.k0)(Y.jsonData),handleGrafanaManagedAlerts:Y.jsonData.handleGrafanaManagedAlerts}));Z.push(...X)}return{availableInternalDataSources:W,availableExternalDataSources:Z}}function b(z){const W=S(z);if(!W)throw new Error(`Data source ${z} not found`);if(W.type!=="loki"&&W.type!=="prometheus")throw new Error(`Unexpected data source type ${W.type}`);return W}function T(){const z=E().map(W=>W.name);return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleRead)&&z.push(d),z}function O(){const z=E();return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleRead)&&z.push(d),z}function R(z){return M(z)?z.name:z}function I(z){return M(z)?z.uid:d}function M(z){return z!==d}function x(z){return z!==d&&U(z)?.jsonData?.implementation===i.sK.prometheus}function L(z){return z===d}function S(z){return(0,l.x)().find(W=>W.name===z)}function U(z){return(0,l.x)().find(W=>W.name===z&&W.type==="alertmanager")}function N(z){return z===d?d:S(z)}function w(z){if(z===d)return d;const W=S(z);if(!W)throw new Error(`Datasource "${z}" not found`);return String(W.id)}function G(z){if(z===d)return d;const W=S(z);if(!W)throw new Error(`Datasource "${z}" not found`);return W.uid}function _(){return(0,n.F)().getList({alerting:!0})[0]}function K(){const z=(0,n.F)().getInstanceSettings("default");return z?.meta.alerting??!1?z:_()}function k(z){return z.jsonData.manageAlerts!==!1}},59462:(Q,A,e)=>{"use strict";e.d(A,{P3:()=>n,bR:()=>r,cH:()=>a,nW:()=>i});function n(o){return Object.entries(o).map(([g,u])=>`${g}=${u}`).sort()}function a(o){return Object.entries(o).map(([g,u])=>[g,u])}function i(o){const g={};return o.forEach(u=>{g[u[0]]=u[1]}),g}function r(o){const g={};return o.forEach(u=>{u.key&&(g[u.key]=u.value)}),g}},2691:(Q,A,e)=>{"use strict";e.d(A,{QO:()=>c,RT:()=>g,rz:()=>u,tC:()=>o});var n=e(69781),a=e.n(n),i=e(43764);const r=[i._M.regex,i._M.notRegex,i._M.notEqual,i._M.equal];function o(l){if(l.startsWith("{")&&l.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${l}`);const d=r.map(p=>[p,l.indexOf(p)]).filter(([p,h])=>h>-1).sort((p,h)=>p[1]-h[1]);if(!d.length)throw new Error(`Invalid matcher: ${l}`);const[f,m]=d[0],v=l.slice(0,m).trim(),E=l.slice(m+f.length);if(!v)throw new Error(`Invalid matcher: ${l}`);return{name:v,value:E,isRegex:f===i._M.regex||f===i._M.notRegex,isEqual:f===i._M.equal||f===i._M.regex}}function g(l){const d=l.filter(f=>!!f.trim()).map(f=>o(f));return(0,n.uniqBy)(d,f=>f.name)}const u=l=>{const d=Object.entries(l).filter(([m])=>!(m.startsWith("__")&&m.endsWith("__"))),f=new URLSearchParams;return d.forEach(([m,v])=>f.append("matcher",`${m}=${v}`)),f},c=l=>{const d=[];return l.matchers&&l.matchers.forEach(f=>{const{name:m,value:v,isEqual:E,isRegex:p}=o(f);let h=i._M.equal;E&&p&&(h=i._M.regex),!E&&p&&(h=i._M.notRegex),E&&!p&&(h=i._M.equal),!E&&!p&&(h=i._M.notEqual),d.push([m,h,v])}),l.object_matchers&&d.push(...l.object_matchers),l.match_re&&Object.entries(l.match_re).forEach(([f,m])=>{d.push([f,i._M.regex,m])}),l.match&&Object.entries(l.match).forEach(([f,m])=>{d.push([f,i._M.equal,m])}),d}},66172:(Q,A,e)=>{"use strict";e.d(A,{ET:()=>h,GV:()=>p,HV:()=>L,J8:()=>b,RQ:()=>U,S0:()=>y,V2:()=>v,VN:()=>M,Vj:()=>K,Vv:()=>I,Zl:()=>_,__:()=>x,aH:()=>S,eQ:()=>T,fm:()=>w,lC:()=>D,mH:()=>E,mt:()=>k,pF:()=>P,sM:()=>R,t6:()=>s,yM:()=>N});var n=e(69781),a=e.n(n),i=e(82689),r=e(85498),o=e(97503),g=e(96198),u=e(2754),c=e(58126),l=e(98319),d=e(67451),f=e(2691),m=e(99825);function v(z,W,Z){const H=(0,d.EG)(z),X=o.Yd(H,W),Y=encodeURIComponent(o.$V(X)),ne=encodeURIComponent(H);return(0,m.u)(`/alerting/${ne}/${Y}/view`,{returnTo:Z})}function E(z,W){const{uid:Z,type:H}=z;return(0,m.u)("/explore",{left:JSON.stringify({datasource:z.uid,queries:[{refId:"A",datasource:{uid:Z,type:H},expr:W}],range:{from:"now-1h",to:"now"}})})}function p(z,W=""){return(0,m.u)(`/alerting/notifications/receivers/${encodeURIComponent(z)}/edit`,{alertmanager:W})}function h(z,W=""){return(0,m.u)("/alerting/routes/mute-timing/edit",{muteName:z,alertmanager:W})}function s(z,W){return(0,d.jq)(z)?(0,m._)(`/alerting/${encodeURIComponent(z.name)}/${encodeURIComponent((0,o.GV)(W.name))}/find`):window.location.href.split("?")[0]}function y(z){return z.reduce((W,{key:Z,value:H})=>(W[Z]=H,W),{})}const D=z=>{const W=z.queryString===void 0?void 0:String(z.queryString),Z=z.alertState===void 0?void 0:String(z.alertState),H=z.dataSource===void 0?void 0:String(z.dataSource),X=z.ruleType===void 0?void 0:String(z.ruleType),Y=z.groupBy===void 0?void 0:String(z.groupBy).split(",");return{queryString:W,alertState:Z,dataSource:H,groupBy:Y,ruleType:X}},C=z=>({queryString:z.get("queryString")??void 0,contactPoint:z.get("contactPoint")??void 0}),P=z=>{const W=z.queryString===void 0?void 0:String(z.queryString),Z=z.silenceState===void 0?void 0:String(z.silenceState);return{queryString:W,silenceState:Z}};function b(z){return Object.entries(z).map(([W,Z])=>({key:W,value:Z}))}function T(z,W,Z){const H=new URLSearchParams(Z);return W&&H.append(l.c4,W),`${z}?${H.toString()}`}const O=z=>z.replace(/\"/g,'\\"');function R(z){return z.startsWith('"')&&z.endsWith('"')?O(z):`"${O(z)}"`}function I(z,W){const Z={alertname:W.name,...W.labels};return M(z,Z)}function M(z,W){const Z=new URLSearchParams;return Z.append("alertmanager",z),(0,f.rz)(W).forEach((X,Y)=>Z.append(Y,X)),(0,m.u)("/alerting/silence/new",Z)}function x(z){return(0,m.u)(`/datasources/edit/${z.uid}`)}function L(z){return(0,m.u)(`/dashboards/f/${z}`)}function S(z){return(0,m.u)(`/dashboards/f/${z.uid}/${z.title}/settings`)}function U(z){return(0,m.u)(`/d/${encodeURIComponent(z)}`)}function N(z,W){return(0,m.u)(`/d/${encodeURIComponent(z)}`,{viewPanel:W})}function w(z,W,Z,H=1e3){const X=new Date().getTime(),Y=()=>z().catch(ne=>{if(W(ne)&&new Date().getTime()-X<Z)return new Promise(se=>setTimeout(se,H)).then(Y);throw ne});return Y()}const G={[c.bj.Alerting]:1,[c.x_.Firing]:1,[c.bj.Error]:1,[c.bj.Pending]:2,[c.x_.Pending]:2,[c.x_.Inactive]:2,[c.bj.NoData]:3,[c.bj.Normal]:4};function _(z,W){if(z===u.As.Importance)return(0,n.sortBy)(W,H=>[G[(0,c.ED)(H.state)],(0,g.pB)(H).toLocaleLowerCase()]);if(z===u.As.TimeAsc)return(0,n.sortBy)(W,H=>[new Date(H.activeAt)||new Date,(0,g.pB)(H).toLocaleLowerCase()]);if(z===u.As.TimeDesc)return(0,n.sortBy)(W,H=>[new Date(H.activeAt)||new Date,(0,g.pB)(H).toLocaleLowerCase()]).reverse();const Z=(0,n.sortBy)(W,H=>(0,g.pB)(H).toLocaleLowerCase());return z===u.As.AlphaDesc&&Z.reverse(),Z}function K(){return r.config.buildInfo.edition===i.e.OpenSource}function k(){return r.config.buildInfo.env==="development"}},39138:(Q,A,e)=>{"use strict";e.d(A,{$b:()=>d,Ez:()=>f,I7:()=>C,PE:()=>E,i6:()=>c,jK:()=>l,kk:()=>v,op:()=>P,oq:()=>g,wt:()=>D,yR:()=>y});var n=e(4579),a=e(56821),i=e(69391),r=e(75923),o=e(80127);const g=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function u(b,T=g,O){if(b.pending.match(O))return{result:T.result,loading:!0,error:T.error,dispatched:!0,requestId:O.meta.requestId};if(b.fulfilled.match(O)){if(T.requestId===void 0||T.requestId===O.meta.requestId)return{...T,result:O.payload,loading:!1,error:void 0}}else if(b.rejected.match(O)&&T.requestId===O.meta.requestId)return{...T,loading:!1,error:O.error};return T}function c(b,T){return(0,n.oM)({name:b,initialState:g,reducers:{},extraReducers:O=>O.addDefaultCase((R,I)=>u(T,R,I))})}function l(b,T,O){return(0,n.oM)({name:b,initialState:{},reducers:{},extraReducers:R=>R.addDefaultCase((I,M)=>{if((0,n.Gx)(T)(M)){const x=M,L=O(x.meta.arg);return{...I,[L]:u(T,I[L],x)}}return I})})}function d(b){return b.catch(T=>{throw{message:v(T),code:T.statusCode}})}function f(b,T){return b.then(O=>(T.successMessage&&r.h$.emit(a.SI.alertSuccess,[T.successMessage]),O)).catch(O=>{const R=v(O);throw r.h$.emit(a.SI.alertError,[`${T.errorMessage??"Error"}: ${R}`]),O})}const m="Unknown Error";function v(b){if((0,i.kW)(b))if(b.data?.message){let O=b.data?.message;return typeof b.data?.error=="string"&&(O+=`; ${b.data.error}`),O}else{if(Array.isArray(b.data)&&b.data.length&&b.data[0]?.message)return b.data.map(O=>O?.message).filter(O=>!!O).join(" ");if(b.statusText)return b.statusText}const T=b?.message;return T||((0,o.PN)(o.z7.unknownMessageFromError,{error:JSON.stringify(b)}),m)}function E(b){return Object.values(b).every(p)}function p(b){return b.dispatched&&!b.loading}function h(b){return Object.values(b).every(s)}function s(b){return b.dispatched&&!b.loading&&!b.error}function y(b){return Object.values(b).some(P)}function D(b){return Object.values(b).some(T=>T.dispatched)}function C(b){return Object.values(b).some(s)}function P(b){return b?b.dispatched&&b.loading:!1}},1636:(Q,A,e)=>{"use strict";e.d(A,{DQ:()=>O,EB:()=>y,QN:()=>K,TN:()=>b,WL:()=>R,aR:()=>U,eZ:()=>k,lN:()=>I,mI:()=>T,s0:()=>M,tO:()=>_,uZ:()=>D,yh:()=>C});var n=e(69781),a=e.n(n),i=e(5333),r=e(17201),o=e(66261),g=e(65821),u=e(65354),c=e(26894),l=e(58126),d=e(74201),f=e(93797),m=e(81347),v=e(98319),E=e(67451),p=e(66172),h=e(96198),s=e(90233);const y="1m",D=()=>{const{canCreateGrafanaRules:z,canCreateCloudRules:W}=(0,m.Rv)();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:v.eY,dataSourceName:null,type:z?f.$.grafana:W?f.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:l.g0.NoData,execErrState:l.g0.Error,evaluateFor:"5m",evaluateEvery:y,manualRouting:!1,contactPoints:{},overrideGrouping:!1,overrideTimings:!1,muteTimeIntervals:[],namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function C(z){const{name:W,expression:Z,forTime:H,forTimeUnit:X,keepFiringForTime:Y,keepFiringForTimeUnit:ne,type:se}=z;if(se===f.$.cloudAlerting){let re;return Y&&ne&&(re=`${Y}${ne}`),{alert:W,for:`${H}${X}`,keep_firing_for:re,annotations:(0,p.S0)(z.annotations||[]),labels:(0,p.S0)(z.labels||[]),expr:Z}}else if(se===f.$.cloudRecording)return{record:W,labels:(0,p.S0)(z.labels||[]),expr:Z};throw new Error(`unexpected rule type: ${se}`)}function P(z,W){const Z=[...(0,p.J8)(z||{})];return W&&Z.push({key:"",value:""}),Z}function b(z){const W=[...z];return v.eY.map(H=>H.key).forEach((H,X)=>{const Y=W.findIndex(ne=>ne.key===H);if(Y===-1){const ne={key:H,value:""};W.splice(X,0,ne)}else Y!==X&&W.splice(X,0,W.splice(Y,1)[0])}),W}function T(z){const{name:W,condition:Z,noDataState:H,execErrState:X,evaluateFor:Y,queries:ne,isPaused:se,contactPoints:re,manualRouting:ge}=z;if(Z)return{grafana_alert:{title:W,condition:Z,no_data_state:H,exec_err_state:X,data:ne.map(w),is_paused:!!se,contactPoints:ge?re:void 0},for:Y,annotations:(0,p.S0)(z.annotations||[]),labels:(0,p.S0)(z.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function O(z){const{ruleSourceName:W,namespace:Z,group:H,rule:X}=z,Y=D();if((0,E.HY)(W))if((0,h.Pc)(X)){const ne=X.grafana_alert;return{...Y,name:ne.title,type:f.$.grafana,group:H.name,evaluateEvery:H.interval||Y.evaluateEvery,evaluateFor:X.for||"0",noDataState:ne.no_data_state,execErrState:ne.exec_err_state,queries:ne.data,condition:ne.condition,annotations:b(P(X.annotations,!1)),labels:P(X.labels,!0),folder:{title:Z,uid:ne.namespace_uid},isPaused:ne.is_paused,contactPoints:ne.contactPoints,manualRouting:!!ne.contactPoints}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,h.cG)(X)){const se={refId:"A",datasourceUid:(0,o.F)().getInstanceSettings(W)?.uid??"",queryType:"",relativeTimeRange:(0,i.Rr)(),expr:X.expr,model:{refId:"A",hide:!1,expr:X.expr}},re=R(X);return{...Y,...re,queries:[se],annotations:b(P(X.annotations,!1)),type:f.$.cloudAlerting,dataSourceName:W,namespace:Z,group:H.name}}else if((0,h.yF)(X)){const ne=I(X);return{...Y,...ne,type:f.$.cloudRecording,dataSourceName:W,namespace:Z,group:H.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function R(z){const W=D(),[Z,H]=z.for?(0,s.bG)(z.for):[W.forTime,W.forTimeUnit],[X,Y]=z.keep_firing_for?(0,s.bG)(z.keep_firing_for):[W.keepFiringForTime,W.keepFiringForTimeUnit];return{name:z.alert,expression:z.expr,forTime:Z,forTimeUnit:H,keepFiringForTime:X,keepFiringForTimeUnit:Y,annotations:P(z.annotations,!1),labels:P(z.labels,!0)}}function I(z){return{name:z.record,expression:z.expr,labels:P(z.labels,!0)}}const M=()=>{const z=(0,E.P)();if(!z)return[...L("A","B")];const W=(0,i.Rr)();return[{refId:"A",datasourceUid:z.uid,queryType:"",relativeTimeRange:W,model:{refId:"A"}},...L("B","C")]},x=z=>{const W=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:z[0]?.uid||"",queryType:"",relativeTimeRange:W,model:{refId:"A"}}]},L=(...z)=>{const W=z[0],Z=z[1],H={refId:z[0],type:c.Us.reduce,datasource:{uid:c.Yq,type:g.hr.type},conditions:[{type:"query",evaluator:{params:[],type:d.$.IsAbove},operator:{type:"and"},query:{params:[W]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},X={refId:Z,type:c.Us.threshold,datasource:{uid:c.Yq,type:g.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:d.$.IsAbove},operator:{type:"and"},query:{params:[Z]},reducer:{params:[],type:"last"}}],expression:W};return[{refId:W,datasourceUid:c.Yq,queryType:"",model:H},{refId:Z,datasourceUid:c.Yq,queryType:"",model:X}]},S=async(z,W,Z,H,X,Y)=>{const ne=[];for(const se of z){const re=await(0,o.F)().get(se.datasource?.uid?se.datasource:H),ge={uid:re.uid,type:re.type},q=r.relativeToTimeRange(W),{interval:me,intervalMs:oe}=N(q,Y??re.interval,X),fe={__interval:{text:me,value:me},__interval_ms:{text:oe,value:oe},...Z},ve=re.interpolateVariablesInQueries?await re.interpolateVariablesInQueries([se],fe)[0]:se;if(ge.uid===c.Yq){const pe={refId:ve.refId,queryType:"",relativeTimeRange:W,datasourceUid:c.Yq,model:ve};ne.push(pe)}else{const pe=(0,o.F)().getInstanceSettings(ge);if(pe&&pe.meta.alerting){const Me={refId:ve.refId,queryType:ve.queryType??"",relativeTimeRange:W,datasourceUid:pe.uid,model:{...ve,maxDataPoints:X,intervalMs:oe}};ne.push(Me)}}}return ne},U=async(z,W)=>{const{targets:Z}=z;if(!z.id||!W.uid)return;const H=r.timeRangeToRelative(r.convertRawToRange(W.time)),X=await S(Z,H,z.scopedVars||{},z.datasource??void 0,z.maxDataPoints??void 0,z.interval??void 0);if(!X.length||!X.find(re=>re.datasourceUid!==c.Yq))return;if(!X.find(re=>re.datasourceUid===c.Yq)){const[re,ge]=L((0,u.Hs)(X),"-");X.push(re);const[q,me]=L(re.refId,(0,u.Hs)(X));X.push(me)}const{folderTitle:Y,folderUid:ne}=W.meta;return{type:f.$.grafana,folder:ne&&Y?{uid:ne,title:Y}:void 0,queries:X,name:z.title,condition:X[X.length-1].refId,annotations:[{key:v.q6.dashboardUID,value:W.uid},{key:v.q6.panelID,value:String(z.id)}]}};function N(z,W,Z){return Z?r.calculateInterval(z,Z,W):W&&r.intervalToMs(W)>1e3?{interval:W,intervalMs:r.intervalToMs(W)}:{interval:"1s",intervalMs:1e3}}function w(z){const W=z.model;return G(W)&&W.instant&&W.range?{...z,model:{...W,range:!0,instant:!1}}:z}function G(z){return"expr"in z&&"instant"in z&&"range"in z}function _(z){return"expr"in z}const K=z=>({...z,queries:z.queries?.map(W=>(0,n.omit)(W,"model.hide"))});function k(z){return K(O(z))}},97503:(Q,A,e)=>{"use strict";e.d(A,{$V:()=>D,CK:()=>l,Dg:()=>d,GV:()=>p,OA:()=>y,Om:()=>P,Qc:()=>s,Yd:()=>c,Zk:()=>g,d3:()=>h,s0:()=>O,s4:()=>R});var n=e(69781),a=e.n(n),i=e(19690),r=e(67451),o=e(96198);function g(I,M,x,L){return(0,o.Pc)(L)?{uid:L.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:I,namespace:M,groupName:x,ruleName:(0,o.cG)(L)?L.alert:L.record,rulerRuleHash:P(L)}}function u(I,M,x,L){return{ruleSourceName:I,namespace:M,groupName:x,ruleName:L.name,ruleHash:b(L)}}function c(I,M){const x=M.namespace.name,L=M.group.name;if(M.rulerRule)return g(I,x,L,M.rulerRule);if(M.promRule)return u(I,x,L,M.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function l(I){return g(I.ruleSourceName,I.namespace,I.group.name,I.rule)}function d(I,M){return(0,o.Kl)(I)&&(0,o.Kl)(M)?I.uid===M.uid:(0,o.E4)(I)&&(0,o.E4)(M)?I.groupName===M.groupName&&I.namespace===M.namespace&&I.ruleName===M.ruleName&&I.rulerRuleHash===M.rulerRuleHash&&I.ruleSourceName===M.ruleSourceName:(0,o.qE)(I)&&(0,o.qE)(M)?I.groupName===M.groupName&&I.namespace===M.namespace&&I.ruleName===M.ruleName&&I.ruleHash===M.ruleHash&&I.ruleSourceName===M.ruleSourceName:!1}const f="cri",m="pri";function v(I){return I.replace(/\$/g,"_DOLLAR_")}function E(I){return I.replace(/\_DOLLAR\_/g,"$")}function p(I){return I.replace(/\//g,"").replace(/\\/g,"")}function h(I){return I.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function s(I,M=!1){const L=(M?decodeURIComponent(I):I).split("$");if(L.length===1)return{uid:I,ruleSourceName:"grafana"};if(L.length===6){const[S,U,N,w,G,_]=L.map(E).map(h);if(S===f)return{ruleSourceName:U,namespace:N,groupName:w,ruleName:G,rulerRuleHash:_};if(S===m)return{ruleSourceName:U,namespace:N,groupName:w,ruleName:G,ruleHash:_}}throw new Error(`Failed to parse rule location: ${I}`)}function y(I,M=!1){if(I)try{return s(I,M)}catch{return}}function D(I){return(0,o.Kl)(I)?I.uid:(0,o.E4)(I)?[f,I.ruleSourceName,I.namespace,I.groupName,I.ruleName,I.rulerRuleHash].map(String).map(v).map(p).join("$"):[m,I.ruleSourceName,I.namespace,I.groupName,I.ruleName,I.ruleHash].map(String).map(v).map(p).join("$")}function C(I){let M=0;if(I.length===0)return M;for(let x=0;x<I.length;x++){const L=I.charCodeAt(x);M=(M<<5)-M+L,M=M&M}return M}function P(I){if((0,o.yF)(I))return C(JSON.stringify([I.record,I.expr,T(I.labels)])).toString();if((0,o.cG)(I))return C(JSON.stringify([I.alert,I.expr,T(I.annotations),T(I.labels)])).toString();if((0,o.Pc)(I))return I.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function b(I){if((0,o.OP)(I))return C(JSON.stringify([I.type,I.query,T(I.labels)])).toString();if((0,o.x_)(I))return C(JSON.stringify([I.type,I.query,T(I.annotations),T(I.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function T(I){return JSON.stringify(Object.entries(I||{}).sort((M,x)=>M[0].localeCompare(x[0])))}function O(I){return(0,o.Kl)(I)?r.GC:I.ruleSourceName}function R(I){const{pathname:M=""}=i.E1.getLocation(),{id:x}=I;return x?(0,n.nth)(M.split("/"),-2):void 0}},96198:(Q,A,e)=>{"use strict";e.d(A,{Aq:()=>I,C7:()=>R,E:()=>E,E4:()=>y,Jq:()=>L,Kl:()=>s,OP:()=>d,PW:()=>S,Pc:()=>v,Re:()=>O,SS:()=>b,Wd:()=>D,cG:()=>f,m$:()=>h,pB:()=>p,qE:()=>C,qd:()=>U,ub:()=>x,vU:()=>P,x_:()=>l,yF:()=>m});var n=e(69781),a=e.n(n),i=e(63949),r=e(58126),o=e(22381),g=e(98319),u=e(67451),c=e(90233);function l(w){return typeof w=="object"&&w.type===r.pz.Alerting}function d(w){return typeof w=="object"&&w.type===r.pz.Recording}function f(w){return typeof w=="object"&&"alert"in w}function m(w){return typeof w=="object"&&"record"in w}function v(w){return typeof w=="object"&&"grafana_alert"in w}function E(w){return w.rulerRule&&v(w.rulerRule)&&!!w.rulerRule.grafana_alert.is_paused}function p(w){return JSON.stringify(w.labels)}function h(w){return w.error&&w.error?.message?.includes(g.jZ)}function s(w){return"uid"in w}function y(w){return"rulerRuleHash"in w}function D(w){return Object.values(r.pz).includes(w)}function C(w){return"ruleHash"in w}function P(w){switch(w){case"ok":return o.VG.Ok;case"nodata":return o.VG.NoData;case"error":case"err":return o.VG.Error;case"unknown":return o.VG.Unknown;default:return}}function b(w){return w===r.x_.Inactive?"Normal":(0,n.capitalize)(w)}const T=w=>w.reduce((G,{dataSourceName:_,name:K,groups:k})=>(k.forEach(({name:z,rules:W})=>{W.forEach(Z=>{l(Z)&&G.push({dataSourceName:_,namespaceName:K,groupName:z,rule:Z})})}),G),[]),O=w=>l(w.promRule)?w.promRule:null,R=w=>w.reduce((G,{rulesSource:_,name:K,groups:k})=>(k.forEach(({name:z,rules:W})=>{W.forEach(Z=>{Z.promRule&&l(Z.promRule)&&G.push({dataSourceName:(0,u.EG)(_),namespaceName:K,groupName:z,...Z})})}),G),[]);function I(w){let G;return Object.values(i.Z).includes(w)?G=w:G=(0,r.ED)(w),M[G]}const M={[r.x_.Inactive]:"good",[r.x_.Firing]:"bad",[r.x_.Pending]:"warning",[r.bj.Alerting]:"bad",[r.bj.Error]:"bad",[r.bj.NoData]:"info",[r.bj.Normal]:"good",[r.bj.Pending]:"warning",[i.Z.NoData]:"info",[i.Z.Paused]:"warning",[i.Z.Alerting]:"bad",[i.Z.OK]:"good",[i.Z.Unknown]:"info"};function x(w){return w?.alerts?w.alerts.reduce((G,_)=>{const K=(0,r.ED)(_.state)!==r.bj.Normal;if(_.activeAt&&K){const k=new Date(_.activeAt);if(G===null||G.getTime()>k.getTime())return k}return G},null):null}function L(w){return Array.isArray(w.source_tenants)}function S(w){return v(w)?w.grafana_alert.title:f(w)?w.alert:m(w)?w.record:""}const U=(w,G)=>{const _={alertName:"",forDuration:"0s",evaluationsToFire:0};return v(w)?{alertName:w.grafana_alert.title,forDuration:w.for,evaluationsToFire:N(w.for,G)}:f(w)?{alertName:w.alert,forDuration:w.for??"1m",evaluationsToFire:N(w.for??"1m",G)}:_},N=(w,G)=>{const _=(0,c.Bg)(G),K=(0,c.Bg)(w);return K===0&&_!==0?1:_===0||K/_<1?0:Math.ceil(K/_)+1}},90233:(Q,A,e)=>{"use strict";e.d(A,{Bg:()=>d,bG:()=>a,gS:()=>m,gV:()=>f,nd:()=>l,qr:()=>r,wd:()=>o});var n=e(44983);function a(v){const E=v.match(/(\d+)(\w+)/);if(E)return[Number(E[1]),E[2]];throw new Error(`Invalid interval description: ${v}`)}function i(v){const{sec:E,count:p}=describeInterval(v);return E*p}const r=Object.entries(n.t).map(([v,E])=>({label:v[0].toUpperCase()+v.slice(1),value:E}));function o(v){try{return l(v),!0}catch{return!1}}const g={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},u=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),c=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(n.t).join(", ")}`);function l(v){let E=v,p=[];function h(y){const D=u.exec(y),C=D?.groups?.value&&D?.groups?.type;if(!D||!C)throw c;D&&D.groups?.value&&D.groups?.type&&(E=E.replace(D[0],""),p.push([Number(D.groups.value),D.groups.type])),E&&h(E)}if(h(v),!p.length)throw c;return p.reduce((y,[D,C])=>{const P=D*g[C];return y+P},0)}const d=v=>{try{return l(v)}catch{return 0}},f=v=>v.includes("0001-01-01T00");function m(v){return v%(1e3*60*60)===0?v/(1e3*60*60)+"h":v%(1e3*60)===0?v/(1e3*60)+"m":v%1e3===0?v/1e3+"s":v.toFixed()+"ms"}},99825:(Q,A,e)=>{"use strict";e.d(A,{_:()=>i,u:()=>a});var n=e(85498);function a(r,o){const u=new URLSearchParams(o).toString();return`${n.config.appSubUrl}${r}${u?`?${u}`:""}`}function i(r,o){const u=new URLSearchParams(o).toString();try{const c=new URL(n.config.appSubUrl,n.config.appUrl);return c.pathname=r,`${c.href}${u?`?${u}`:""}`}catch{return a(r,o)}}},90642:(Q,A,e)=>{"use strict";e.d(A,{Dl:()=>r,_E:()=>i,lK:()=>o,xD:()=>a});var n=e(69391);function a(g){return(0,n.i)().post("/api/annotations",g)}function i(g){return(0,n.i)().put(`/api/annotations/${g.id}`,g)}function r(g){return(0,n.i)().delete(`/api/annotations/${g.id}`)}async function o(){return(await(0,n.i)().get("/api/annotations/tags")).result.tags.map(({tag:u,count:c})=>({term:u,count:c}))}},69434:(Q,A,e)=>{"use strict";e.d(A,{r:()=>d});var n=e(86457),a=e(89582),i=e(4558),r=e(17201),o=e(44343),g=e(60630),u=e(14354);let c=100;function l(){return"AQ"+c++}function d(f,m,v){const E={...u.yA,...m.annotations},p={...E.getDefaultQuery?.(),...v},h=E.prepareAnnotation(p);if(!h)return(0,n.of)({});const s=E.prepareQuery(h);if(!s)return(0,n.of)({});const y=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,D=r.calculateInterval(f.range,y,m.interval),C={__interval:{text:D.interval,value:D.interval},__interval_ms:{text:D.intervalMs.toString(),value:D.intervalMs},__annotation:{text:h.name,value:h}},P={startTime:Date.now(),requestId:l(),range:f.range,maxDataPoints:y,scopedVars:C,...D,app:o.zj.Dashboard,timezone:f.dashboard.timezone,targets:[{...s,refId:"Anno"}]};return(0,g.v7)(m,P).pipe((0,a.z)(b=>{const T=b?.series.length?b.series:b.annotations;return T?.length?E.processEvents(h,T).pipe((0,i.U)(O=>({panelData:b,events:O}))):(0,n.of)({panelData:b,events:[]})}))}},14354:(Q,A,e)=>{"use strict";e.d(A,{$w:()=>y,r0:()=>v,yA:()=>f,yr:()=>D});var n=e(69781),a=e.n(n),i=e(86457),r=e(89582),o=e(4558),g=e(68911),u=e(85666),c=e(27957),l=e(7274),d=e(83811);const f={prepareAnnotation:C=>{if((0,n.isString)(C?.query)){const{query:P,...b}=C;return{...b,target:{refId:"annotation_query",query:P},mappings:{}}}return C},prepareQuery:C=>C.target,processEvents:(C,P)=>h(P,C.mappings)};function m(){return C=>C.pipe((0,r.z)(P=>{if(!P?.length)return(0,i.of)(void 0);if(P.length===1)return(0,i.of)(P[0]);const b={interpolate:T=>T};return(0,i.of)(P).pipe(g.Y.mergeTransformer.operator({},b),(0,o.U)(T=>T[0]))}))}const v=[{key:"time",field:C=>C.fields.find(P=>P.type===u.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",label:"end time",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:C=>C.fields.find(P=>P.type===u.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],E=[{key:"color"},{key:"isRegion"},{key:"source"}],p=[...d.config.publicDashboardAccessToken?E:[],...v,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function h(C,P){return(0,i.of)(C).pipe(m(),(0,o.U)(b=>{if(!b?.length)return[];let T=!1,O=!1;const R={};for(const x of b.fields){const L=(0,c.CZ)(x,b);R[L.toLowerCase()]=x}P||(P={});const I=[];for(const x of p){const L=P[x.key]||{};if(L.source===l.L.Skip)continue;const S={key:x.key,split:x.split};if(L.source===l.L.Text)S.text=L.value;else{const U=(L.value||x.key).toLowerCase();S.field=R[U],!S.field&&x.field&&(S.field=x.field(b))}(S.field||S.text)&&(I.push(S),S.key==="time"?T=!0:S.key==="text"&&(O=!0))}if(!T||!O)return console.error("Cannot process annotation fields. No time or text present."),[];const M=[];for(let x=0;x<b.length;x++){const L={type:"default",color:"red"};for(const S of I){let U;if(S.text)U=S.text;else if(S.field&&(U=S.field.values[x],U!==void 0&&S.regex)){const N=S.regex.exec(U);N&&(U=N[1]?N[1]:N[0])}U!=null&&(S.split&&typeof U=="string"&&(U=U.split(",")),L[S.key]=U)}M.push(L)}return M}))}const s=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function y(C){const{type:P}=C;return!(P==="datasource"||s.includes(P))}function D(C){const{type:P}=C;return s.includes(P)}},14479:(Q,A,e)=>{"use strict";e.d(A,{ZP:()=>d,dF:()=>g,iK:()=>r,j4:()=>o,nQ:()=>c,ql:()=>u});var n=e(4579);const a={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},i=(0,n.oM)({name:"apiKeys",initialState:a,reducers:{apiKeysLoaded:(f,m)=>{const{keys:v,keysIncludingExpired:E}=m.payload,p=m.payload.keys.length===0&&m.payload.keysIncludingExpired.length>0?!0:f.includeExpired;return{...f,hasFetched:!0,keys:v,keysIncludingExpired:E,includeExpired:p}},setSearchQuery:(f,m)=>({...f,searchQuery:m.payload}),includeExpiredToggled:f=>({...f,includeExpired:!f.includeExpired}),isFetching:f=>({...f,hasFetched:!1}),setMigrationResult:(f,m)=>({...f,migrationResult:m.payload})}}),{apiKeysLoaded:r,includeExpiredToggled:o,isFetching:g,setSearchQuery:u,setMigrationResult:c}=i.actions,d={apiKeys:i.reducer}},65824:(Q,A,e)=>{"use strict";e.d(A,{getAuthProviderStatus:()=>d,getRegisteredAuthProviders:()=>u,initAuthConfig:()=>f});var n=e(75923),a=e(41327),i=e(42342);const r=[],o={};function g(v,E){r.find(p=>p.id===v.id)||(r.push(v),E&&(o[v.id]=E))}function u(){return r}function c(v){return r.find(E=>E.id===v)}function l(v){const E=[];for(const[p,h]of Object.entries(v)){const s=r.find(y=>`auth.${y.id}`===p);if(s){const y={...h,providerId:s.id,displayName:h.name||s.displayName};E.push(y)}}return E}async function d(v){if(o[v]){const E=o[v];return E()}return{configured:!1,enabled:!1}}function f(){g({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},m)}async function m(){if(n.Vt.hasPermission(i.AccessControlAction.SettingsRead)){const E=(await(0,a.i)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:E.enabled==="true",enabled:E.enabled==="true",hide:E.enabled!=="true"}}return{configured:!1,enabled:!1}}},82412:(Q,A,e)=>{"use strict";e.d(A,{AB:()=>o,AW:()=>r,ZP:()=>E,_E:()=>u,sg:()=>m,uX:()=>g});var n=e(4579);const a={settings:{},providerStatuses:{},isLoading:!1,providers:[]},i=(0,n.oM)({name:"authConfig",initialState:a,reducers:{settingsUpdated:(p,h)=>({...p,settings:h.payload}),providerStatusesLoaded:(p,h)=>({...p,providerStatuses:h.payload}),loadingBegin:p=>({...p,isLoading:!0}),loadingEnd:p=>({...p,isLoading:!1}),setError:(p,h)=>({...p,updateError:h.payload}),resetError:p=>({...p,updateError:void 0}),setWarning:(p,h)=>({...p,warning:h.payload}),resetWarning:p=>({...p,warning:void 0}),providersLoaded:(p,h)=>({...p,providers:h.payload})}}),{settingsUpdated:r,providerStatusesLoaded:o,loadingBegin:g,loadingEnd:u,setError:c,resetError:l,setWarning:d,resetWarning:f,providersLoaded:m}=i.actions,E={authConfig:i.reducer}},52368:(Q,A,e)=>{"use strict";e.d(A,{CN:()=>v.CN,Hv:()=>h,OH:()=>P,Zi:()=>p,jL:()=>b,t4:()=>C,vN:()=>R,wo:()=>T,yC:()=>s,yF:()=>O,zs:()=>D,zu:()=>y});var n=e(61168),a=e(71892),i=e(84912),r=e(20298),o=e(69391),g=e(19690),u=e(7939),c=e(42876),l=e(75923),d=e(48510),f=e(86021),m=e(60426),v=e(62442);function E({baseURL:I}){async function M(x){try{const{data:L,...S}=await(0,a.n)((0,o.i)().fetch({...x,url:I+x.url,showErrorAlert:x.showErrorAlert}));return{data:L,meta:S}}catch(L){return x.manageError?x.manageError(L):{error:L}}}return M}const p=(0,n.LC)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:E({baseURL:"/api"}),endpoints:I=>({getFolder:I.query({providesTags:(M,x,L)=>[{type:"getFolder",id:L}],query:M=>({url:`/folders/${M}`,params:{accesscontrol:!0}})}),newFolder:I.mutation({query:({title:M,parentUid:x})=>({method:"POST",url:"/folders",data:{title:M,parentUid:x}}),onQueryStarted:({parentUid:M},{queryFulfilled:x,dispatch:L})=>{x.then(async({data:S})=>{await l.Vt.fetchUserPermissions(),L((0,u.$l)((0,c.AT)("Folder created"))),L((0,f.it)({parentUID:M,pageSize:m.IV})),g.E1.push(i.u.stripBaseFromUrl(S.url))})}}),saveFolder:I.mutation({invalidatesTags:["getFolder"],query:({uid:M,title:x,version:L})=>({method:"PUT",url:`/folders/${M}`,data:{title:x,version:L}}),onQueryStarted:({parentUid:M},{queryFulfilled:x,dispatch:L})=>{x.then(()=>{L((0,f.it)({parentUID:M,pageSize:m.IV}))})}}),moveFolder:I.mutation({invalidatesTags:["getFolder"],query:({folder:M,destinationUID:x})=>({url:`/folders/${M.uid}/move`,method:"POST",data:{parentUID:x}}),onQueryStarted:({folder:M,destinationUID:x},{queryFulfilled:L,dispatch:S})=>{const{parentUid:U}=M;L.then(()=>{S((0,f.it)({parentUID:U,pageSize:m.IV})),S((0,f.it)({parentUID:x,pageSize:m.IV}))})}}),deleteFolder:I.mutation({query:({uid:M})=>({url:`/folders/${M}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:M},{queryFulfilled:x,dispatch:L})=>{x.then(()=>{L((0,f.it)({parentUID:M,pageSize:m.IV}))})}}),getAffectedItems:I.query({queryFn:async M=>{const L=Object.keys(M.folder).filter(N=>M.folder[N]).map(N=>(0,o.i)().get(`/api/folders/${N}/counts`)),S=await Promise.all(L),U={folder:Object.values(M.folder).filter(r.fQ).length,dashboard:Object.values(M.dashboard).filter(r.fQ).length,libraryPanel:0,alertRule:0};for(const N of S)U.folder+=N.folder??0,U.dashboard+=N.dashboard,U.alertRule+=N.alertrule,U.libraryPanel+=N.librarypanel;return{data:U}}}),moveItems:I.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:M,destinationUID:x},L,S,U)=>{const N=Object.keys(M.dashboard).filter(G=>M.dashboard[G]),w=Object.keys(M.folder).filter(G=>M.folder[G]);for(const G of w)await U({url:`/folders/${G}/move`,method:"POST",data:{parentUID:x}});for(const G of N){const K={dashboard:(await(0,o.i)().get(`/api/dashboards/uid/${G}`)).dashboard,folderUid:x,overwrite:!1,message:""};await U({url:"/dashboards/db",method:"POST",data:K})}return{data:void 0}},onQueryStarted:({destinationUID:M,selectedItems:x},{queryFulfilled:L,dispatch:S})=>{const U=Object.keys(x.dashboard).filter(w=>x.dashboard[w]),N=Object.keys(x.folder).filter(w=>x.folder[w]);L.then(()=>{S((0,f.it)({parentUID:M,pageSize:m.IV})),S((0,f.Nc)([...N,...U]))})}}),deleteItems:I.mutation({queryFn:async({selectedItems:M},x,L,S)=>{const U=Object.keys(M.dashboard).filter(w=>M.dashboard[w]),N=Object.keys(M.folder).filter(w=>M.folder[w]);for(const w of N)await S({url:`/folders/${w}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const w of U)await S({url:`/dashboards/uid/${w}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:M},{queryFulfilled:x,dispatch:L})=>{const S=Object.keys(M.dashboard).filter(N=>M.dashboard[N]),U=Object.keys(M.folder).filter(N=>M.folder[N]);x.then(()=>{L((0,f.Nc)([...U,...S]))})}}),saveDashboard:I.mutation({query:({dashboard:M,folderUid:x,message:L,overwrite:S})=>({url:"/dashboards/db",method:"POST",data:{dashboard:M,folderUid:x,message:L??"",overwrite:!!S}}),onQueryStarted:({folderUid:M},{queryFulfilled:x,dispatch:L})=>{d.H.ignoreNextSave(),x.then(async()=>{await l.Vt.fetchUserPermissions(),L((0,f.it)({parentUID:M,pageSize:m.IV}))})}})})}),{endpoints:h,useDeleteFolderMutation:s,useDeleteItemsMutation:y,useGetAffectedItemsQuery:D,useGetFolderQuery:C,useMoveFolderMutation:P,useMoveItemsMutation:b,useNewFolderMutation:T,useSaveDashboardMutation:O,useSaveFolderMutation:R}=p},60426:(Q,A,e)=>{"use strict";e.d(A,{IV:()=>c,ry:()=>l,xH:()=>d});var n=e(85498),a=e(69391),i=e(86434),r=e(4502),o=e(82113),g=e(75923),u=e(42342);const c=50;async function l(f,m,v=1,E=c){if(f&&!n.config.featureToggles.nestedFolders)return[];const p=(0,a.i)();let h=[];return g.Vt.hasPermission(u.AccessControlAction.FoldersRead)&&(h=await p.get("/api/folders",{parentUid:f,page:v,limit:E})),h.map(s=>({kind:"folder",uid:s.uid,title:s.title,parentTitle:m,parentUID:f,url:`/dashboards/f/${s.uid}/`}))}async function d(f,m=1,v=c){const p=await(0,r.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:f||"general",from:(m-1)*v,limit:v});return p.view.map(h=>{const s=(0,o.f9)(h,p.view);return s.parentUID===i.YQ&&(s.parentUID=void 0),s})}},32166:(Q,A,e)=>{"use strict";e.d(A,{X:()=>c});var n=e(31733),a=e(49876),i=e(36717),r=e(25111),o=e(52368),g=e(53166);function u(l,d,f,m){const v=l+d+f+m,E=[];l&&E.push((0,g.t)("browse-dashboards.counts.folder","{{count}} folder",{count:l})),d&&E.push((0,g.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:d})),f&&E.push((0,g.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:f})),m&&E.push((0,g.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:m}));let p=(0,g.t)("browse-dashboards.counts.total","{{count}} item",{count:v});return E.length>0&&(p+=`: ${E.join(", ")}`),p}const c=({selectedItems:l})=>{const{data:d,isFetching:f,isLoading:m,error:v}=(0,o.zs)(l);return n.createElement(n.Fragment,null,n.createElement(i.x,{element:"p",color:"secondary"},d&&u(d.folder,d.dashboard,d.libraryPanel,d.alertRule),(f||m)&&n.createElement(a.Z,{width:200})),v&&n.createElement(r.b,{severity:"error",title:"Unable to retrieve descendant information"}))}},32779:(Q,A,e)=>{"use strict";e.d(A,{Nc:()=>o,it:()=>g,si:()=>u});var n=e(86434),a=e(42342),i=e(60426),r=e(83058);const o=(0,a.createAsyncThunk)("browseDashboards/refreshParents",async(c,{getState:l,dispatch:d})=>{const{browseDashboards:f}=l(),{rootItems:m,childrenByParentUID:v}=f,E=new Set;for(const p of c){const h=(0,r.i)(m?.items??[],v,p);E.add(h?.parentUID)}for(const p of E)d(g({parentUID:p,pageSize:i.IV}))}),g=(0,a.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:c,pageSize:l})=>{const d=c===n.YQ?void 0:c;let f=1,m="folder",v=await(0,i.ry)(d,void 0,f,l),E=v.length<l;if(m==="folder"&&E){m="dashboard",f=1;const p=await(0,i.xH)(d,f,l);E=p.length<l,v=v.concat(p)}return{children:v,lastPageOfKind:E,page:f,kind:m}}),u=(0,a.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:c,excludeKinds:l=[],pageSize:d},f)=>{const m=!l.includes("dashboard"),v=c===n.YQ?void 0:c,E=f.getState().browseDashboards,p=v?E.childrenByParentUID[v]:E.rootItems;let h=1,s;if(p?p.lastFetchedKind==="dashboard"&&!p.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${v} but that collection is fully loaded`):p.lastFetchedKind==="folder"&&p.lastKindHasMoreItems?(h=p.lastFetchedPage+1,s="folder"):m&&(h=p.lastFetchedKind==="folder"?1:p.lastFetchedPage+1,s="dashboard"):(h=1,s="folder"),!s)return;let y=s==="folder"?await(0,i.ry)(v,void 0,h,d):await(0,i.xH)(v,h,d),D=y.length<d;if(s==="folder"&&D&&m){s="dashboard",h=1;const C=await(0,i.xH)(v,h,d);D=C.length<d,y=y.concat(C)}return{children:y,lastPageOfKind:D,page:h,kind:s}})},86021:(Q,A,e)=>{"use strict";e.d(A,{MH:()=>l,qO:()=>b,si:()=>a.si,it:()=>a.it,Nc:()=>a.Nc,hO:()=>c,u6:()=>n.u6,xm:()=>n.xm,wk:()=>n.wk,m2:()=>C,zw:()=>p,aw:()=>y,$H:()=>D,Sk:()=>h,QD:()=>s,D$:()=>P});var n=e(59143),a=e(32779),i=e(31733),r=e(7261),o=e(42342),g=e(60426),u=e(83058);const c=T=>T.browseDashboards.rootItems,l=T=>T.browseDashboards.childrenByParentUID,d=T=>T.browseDashboards.openFolders,f=T=>T.browseDashboards.selectedItems,m=(0,r.P1)(c,l,d,(T,O)=>O,(T,O,R,I)=>b(I,T,O,R)),v=(0,r.P1)(f,T=>Object.values(T).some(O=>Object.values(O).some(R=>R))),E=(0,r.P1)(f,l,(T,O)=>{const R={dashboard:{...T.dashboard},folder:{...T.folder}};for(const I of Object.keys(T.folder))if(T.folder[I]){const x=O[I];if(x)for(const L of x.items)L.kind==="dashboard"&&(R.dashboard[L.uid]=!1),L.kind==="folder"&&(R.folder[L.uid]=!1)}return R});function p(T){return(0,o.useSelector)(O=>(T?O.browseDashboards.childrenByParentUID[T]:O.browseDashboards.rootItems)?"fulfilled":"pending")}function h(T){return(0,o.useSelector)(O=>m(O,T))}function s(){return(0,o.useSelector)(T=>v(T))}function y(){return(0,o.useSelector)(f)}function D(){return(0,o.useSelector)(T=>T.browseDashboards.childrenByParentUID)}function C(){return(0,o.useSelector)(T=>E(T))}function P(T=[]){const O=(0,o.useDispatch)(),R=(0,i.useRef)(!1);return(0,i.useCallback)(M=>{if(R.current)return Promise.resolve();R.current=!0;const x=O((0,a.si)({parentUID:M,excludeKinds:T,pageSize:g.IV}));return x.finally(()=>R.current=!1),x},[O,T])}function b(T,O,R,I,M=0,x=[],L=[]){function S(k,z,W){if(x.includes(k.kind)||L.includes(k.uid))return[];const Z=b(k.uid,O,R,I,W+1,x,L),H=!!I[k.uid],X=R[k.uid]?.items.length===0;return H&&X&&!x.includes("empty-folder")&&Z.push({isOpen:!1,level:W+1,item:{kind:"ui",uiKind:"empty-folder",uid:k.uid+"empty-folder"},parentUID:z}),[{item:k,parentUID:z,level:W,isOpen:H},...Z]}const U=T&&I[T]||M===0,N=T?R[T]:O;let G=((T?U&&N?.items:N?.items)||[]).flatMap(k=>S(k,T,M));const _=x.includes("dashboard")&&N?.lastFetchedKind==="dashboard";return(M===0&&!N||U&&N&&!(N.isFullyLoaded||_))&&(G=G.concat((0,u.k)(g.IV,T,M))),G}},59143:(Q,A,e)=>{"use strict";e.d(A,{ZP:()=>D,u6:()=>y,xm:()=>h,wk:()=>s});var n={};e.r(n),e.d(n,{fetchNextChildrenPageFulfilled:()=>g,refetchChildrenFulfilled:()=>o,setAllSelection:()=>l,setFolderOpenState:()=>u,setItemSelectionState:()=>c});var a=e(4579),i=e(32779),r=e(83058);function o(C,P){const{children:b,page:T,kind:O,lastPageOfKind:R}=P.payload,{parentUID:I}=P.meta.arg,M={items:b,lastFetchedKind:O,lastFetchedPage:T,lastKindHasMoreItems:!R,isFullyLoaded:O==="dashboard"&&R};I?C.childrenByParentUID[I]=M:C.rootItems=M}function g(C,P){const b=P.payload;if(!b)return;const{children:T,page:O,kind:R,lastPageOfKind:I}=b,{parentUID:M,excludeKinds:x=[]}=P.meta.arg,U={items:((M?C.childrenByParentUID[M]:C.rootItems)?.items??[]).concat(T),lastFetchedKind:R,lastFetchedPage:O,lastKindHasMoreItems:!I,isFullyLoaded:(x.includes("dashboard")||R==="dashboard")&&I};if(!M){C.rootItems=U;return}if(C.childrenByParentUID[M]=U,C.selectedItems.folder[M])for(const w of T)C.selectedItems[w.kind][w.uid]=!0}function u(C,P){const{folderUID:b,isOpen:T}=P.payload;C.openFolders[b]=T}function c(C,P){const{item:b,isSelected:T}=P.payload;function O(I,M){if(C.selectedItems[I][M]=T,I!=="folder")return;let x=C.childrenByParentUID[M];for(const L of x?.items??[])O(L.kind,L.uid)}O(b.kind,b.uid);let R=b.parentUID;for(;R;){const I=(0,r.i)(C.rootItems?.items??[],C.childrenByParentUID,R);if(!I)break;T||(C.selectedItems[I.kind][I.uid]=!1),R=I.parentUID}C.selectedItems.$all=C.rootItems?.items?.every(I=>C.selectedItems[I.kind][I.uid])??!1}function l(C,P){const{isSelected:b,folderUID:T}=P.payload;if(C.selectedItems.$all=b,b){let R=function(I){const M=I?C.childrenByParentUID[I]:C.rootItems;if(M)for(const x of M.items)C.selectedItems[x.kind][x.uid]=b,x.kind==="folder"&&R(x.uid)};var O=R;R(T)}else for(const R in C.selectedItems){if(!(R==="dashboard"||R==="panel"||R==="folder"))continue;const I=C.selectedItems[R];for(const M in I)I[M]=b}}const{fetchNextChildrenPageFulfilled:d,refetchChildrenFulfilled:f,...m}=n,v={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},E=(0,a.oM)({name:"browseDashboards",initialState:v,reducers:m,extraReducers:C=>{C.addCase(i.si.fulfilled,d),C.addCase(i.it.fulfilled,f)}}),p=E.reducer,{setFolderOpenState:h,setItemSelectionState:s,setAllSelection:y}=E.actions,D={browseDashboards:p}},83058:(Q,A,e)=>{"use strict";e.d(A,{i:()=>n,k:()=>a});function n(i,r,o){for(const g of i)if(g.uid===o)return g;for(const g in r){const u=r[g];if(u){for(const c of u.items)if(c.uid===o)return c}}}function a(i,r,o){return new Array(i).fill(null).map((g,u)=>({parentUID:r,level:o,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${r}-pagination-${u}`}}))}},24477:(Q,A,e)=>{"use strict";e.d(A,{D:()=>n,Z:()=>a});const n="connections",a={Base:`/${n}`,DataSources:`/${n}/datasources`,DataSourcesNew:`/${n}/datasources/new`,DataSourcesEdit:`/${n}/datasources/edit/:uid`,DataSourcesDashboards:`/${n}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${n}/add-new-connection`,DataSourcesDetails:`/${n}/datasources/:id`,ConnectDataOutdated:`/${n}/connect-data`,YourConnectionsOutdated:`/${n}/your-connections`}},38159:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>o});var n=e(63315),a=e.n(n),i=e(63908),r=e(82866);const o=(g,u,c)=>{let l={},d={};if(g.type===i.sN.Regex&&g.expression){const f=new RegExp(g.expression,"gi"),v=(typeof u=="string"?u:(0,r.Xh)(u)).matchAll(f);for(const E of v)E.groups?d=E.groups:d[g.mapValue||c]=E[1]||E[0]}else g.type===i.sN.Logfmt&&(d=a().parse(u));return Object.keys(d).forEach(f=>{const m=typeof d[f]=="string"?d[f]:(0,r.Xh)(d[f]);l[f]={value:m}}),l}},55668:(Q,A,e)=>{"use strict";e.d(A,{I0:()=>c,K:()=>d,Yu:()=>l});var n=e(41710),a=e(71892),i=e(66261),r=e(70621),o=e(79999);const g=({sourceUID:f,targetUID:m,...v})=>{const E=(0,i.F)().getInstanceSettings(f),p=(0,i.F)().getInstanceSettings(m);if((v?.orgId===void 0||v?.orgId===null||v?.orgId===0)&&(0,r.KE)("Invalid correlation config: Missing org id.",{module:"Explore"}),E&&E?.uid!==void 0&&p&&p.uid!==void 0)return{...v,source:E,target:p};(0,r.KE)("Invalid correlation config: Missing source or target.",{module:"Explore",source:JSON.stringify(E),target:JSON.stringify(p)})},u=f=>!!f,c=f=>({...f,correlations:f.correlations.map(g).filter(u)});function l(f){return f.data}const d=()=>{const{backend:f}=(0,o.p)(),[m,v]=(0,n.Z)(C=>(0,a.n)(f.fetch({url:"/api/datasources/correlations",params:{page:C.page},method:"GET",showErrorAlert:!1})).then(l).then(c),[f]),[E,p]=(0,n.Z)(({sourceUID:C,...P})=>f.post(`/api/datasources/uid/${C}/correlations`,P).then(b=>{const T=g(b.result);if(T!==void 0)return T;throw new Error("invalid sourceUID")}),[f]),[h,s]=(0,n.Z)(({sourceUID:C,uid:P})=>f.delete(`/api/datasources/uid/${C}/correlations/${P}`),[f]),[y,D]=(0,n.Z)(({sourceUID:C,uid:P,...b})=>f.patch(`/api/datasources/uid/${C}/correlations/${P}`,b).then(T=>{const O=g(T.result);if(O!==void 0)return O;throw new Error("invalid sourceUID")}),[f]);return{create:{execute:p,...E},update:{execute:D,...y},get:{execute:v,...m},remove:{execute:s,...h}}}},33242:(Q,A,e)=>{"use strict";e.d(A,{NO:()=>d,eo:()=>m,nh:()=>u,r_:()=>l});var n=e(71892),a=e(63908),i=e(69391),r=e(66261),o=e(65162),g=e(55668);const u=(v,E,p)=>(v.forEach(h=>{const s=h.refId;if(!s)return;let y=p[s];if(y===void 0&&h.meta?.preferredVisualisationType==="rawPrometheus"){const C=(0,o.a)(s);y=p[C]}const D=E.filter(C=>C.source.uid===y);c(h,D)}),v),c=(v,E)=>{v.fields.forEach(p=>{p.config.links=p.config.links?.filter(h=>h.origin!==a.n1.Correlations)||[],E.map(h=>{if(h.config?.field===p.name){const s=h.config?.target||{};p.config.links.push({internal:{query:{...s,datasource:{uid:h.target.uid}},datasourceUid:h.target.uid,datasourceName:h.target.name,transformations:h.config?.transformations},url:"",title:h.label||h.target.name,origin:a.n1.Correlations})}})})},l=async v=>(0,n.n)((0,i.i)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:v}})).then(g.Yu).then(g.I0),d=async(v,E)=>(0,i.i)().post(`/api/datasources/uid/${v}/correlations`,E),f=async v=>v.datasourceInstance?.meta.mixed?await(0,r.F)().get(v.queries[0].datasource):v.datasourceInstance,m=async(v,E)=>Promise.all([f(v),f(E)]).then(p=>p[0]?.name!==void 0&&p[1]?.name!==void 0?`${p[0]?.name} to ${p[1]?.name}`:"")},70053:(Q,A,e)=>{"use strict";e.d(A,{L:()=>se});var n=e(31733),a=e(97890),i=e(84912),r=e(19690),o=e(77121),g=e(59899),u=e(88062),c=e(4981),l=e(25111),d=e(87047),f=e(60971),m=e(20298),v=e(53166),E=e(31285),p=e(28945);class h extends o.wx{constructor(q){super({...q,options:{withTransforms:!0,withFieldConfig:!0}}),this.onOptionsChange=me=>{this.setState({options:me})}}getTabLabel(){return(0,v.t)("dashboard.inspect.data-tab","Data")}getTabValue(){return E.q.Data}}h.Component=({model:ge})=>{const{options:q}=ge.useState(),me=ge.state.panelRef.resolve(),oe=o.ep.getData(me),{data:fe}=y(oe,q.withTransforms).useState(),ve=o.ep.getTimeRange(me);return n.createElement(p.E,{isLoading:fe?.state===m.Gu.Loading,data:fe?.series,options:q,hasTransformations:s(oe),timeZone:ve.getTimeZone(),panelPluginId:me.state.pluginId,dataName:me.state.title,fieldConfig:me.state.fieldConfig,onOptionsChange:ge.onOptionsChange})};function s(ge){return ge instanceof o.bM?ge.state.transformations.length>0:!1}function y(ge,q){return q&&ge instanceof o.bM?ge.state.$data:ge}var D=e(69781),C=e(43741),P=e(21568),b=e(76067),T=e(85765),O=e(38834),R=e(51343),I=e(73642),M=e(97522),x=e(25353),L=e(32950),S=e(59777),U=e(24017),N=e(67245),w=e(12458),G=e(44560),_=e(44653);class K extends o.wx{constructor(q){super({...q,source:"panel-json",jsonText:k("panel-json",q.panelRef.resolve())}),this.onChangeSource=me=>{this.setState({source:me.value,jsonText:k(me.value,this.state.panelRef.resolve())})},this.onApplyChange=()=>{const me=this.state.panelRef.resolve(),oe=(0,_.Pm)(me),fe=JSON.parse(this.state.jsonText),ve=new x.r(fe),pe=(0,w.Ee)(ve),Me=o.vp.cloneSceneObjectState(pe.state);if(!(me.parent instanceof o.bO)||!(pe instanceof o.bO)){console.error("Cannot update state of panel",me,pe);return}this.state.onClose(),oe.state.isEditing||oe.onEnterEditMode(),me.parent.setState(Me),(0,U.Nw)(E.q.JSON,"apply",{panel_type_changed:me.state.pluginId!==ve.type,panel_id_changed:(0,_.Jb)(me)!==ve.id,panel_grid_pos_changed:z(me.parent.state,Me),panel_targets_changed:W((0,_.R)(me),(0,_.R)(Me.$data))})},this.onCodeEditorBlur=me=>{this.setState({jsonText:me})}}getTabLabel(){return(0,v.t)("dashboard.inspect.json-tab","JSON")}getTabValue(){return E.q.JSON}getOptions(){const me=this.state.panelRef.resolve().state.$data,oe=[{label:(0,v.t)("dashboard.inspect-json.panel-json-label","Panel JSON"),description:(0,v.t)("dashboard.inspect-json.panel-json-description","The model saved in the dashboard JSON that configures how everything works."),value:"panel-json"}];return me&&(oe.push({label:(0,v.t)("dashboard.inspect-json.panel-data-label","Panel data"),description:(0,v.t)("dashboard.inspect-json.panel-data-description","The raw model passed to the panel visualization"),value:"panel-data"}),oe.push({label:(0,v.t)("dashboard.inspect-json.dataframe-label","DataFrame JSON (from Query)"),description:(0,v.t)("dashboard.inspect-json.dataframe-description","Raw data without transformations and field config applied. "),value:"data-frames"})),oe}isEditable(){if(this.state.source!=="panel-json")return!1;const q=this.state.panelRef.resolve();return q.parent instanceof o.bO?(0,_.Pm)(q).state.meta.canEdit:!1}}K.Component=({model:ge})=>{const{source:q,jsonText:me}=ge.useState(),oe=(0,b.wW)(L.i),fe=ge.getOptions();return n.createElement("div",{className:oe.wrap},n.createElement("div",{className:oe.toolbar,"aria-label":P.wl.components.PanelInspector.Json.content},n.createElement(T.g,{label:(0,v.t)("dashboard.inspect-json.select-source","Select source"),className:"flex-grow-1"},n.createElement(O.Ph,{inputId:"select-source-dropdown",options:fe,value:fe.find(ve=>ve.value===q)??fe[0].value,onChange:ge.onChangeSource})),ge.isEditable()&&n.createElement(R.zx,{className:oe.toolbarItem,onClick:ge.onApplyChange},"Apply")),n.createElement("div",{className:oe.content},n.createElement(C.Z,{disableWidth:!0},({height:ve})=>n.createElement(I.p,{width:"100%",height:ve,language:"json",showLineNumbers:!0,showMiniMap:me.length>100,value:me,readOnly:!ge.isEditable(),onBlur:ge.onCodeEditorBlur}))))};function k(ge,q){let me={};switch(ge){case"panel-json":{(0,U.Nw)(E.q.JSON,"panelData"),(q.parent instanceof o.bO||q.parent instanceof N.o)&&(me=(0,G.vi)(q.parent));break}case"panel-data":{(0,U.Nw)(E.q.JSON,"panelJSON");const oe=o.ep.getData(q);oe.state.data&&(me=q.applyFieldConfig(oe.state.data));break}case"data-frames":{(0,U.Nw)(E.q.JSON,"dataFrame");const oe=o.ep.getData(q);oe.state.data&&(oe instanceof o.bM&&oe.state.$data?.state.data?me=(0,M.XJ)(oe.state.$data.state.data):me=(0,M.XJ)(oe.state.data))}}return(0,S.w)(me)}function z(ge,q){return ge.x!==q.x||ge.y!==q.y||ge.width!==q.width||ge.height!==q.height}function W(ge,q){return ge===void 0||q===void 0?!1:!(0,D.isEqual)(ge.state.queries,q.state.queries)}class Z extends o.wx{getTabLabel(){return(0,v.t)("dashboard.inspect.meta-tab","Meta data")}getTabValue(){return E.q.Meta}}Z.Component=({model:ge})=>{const{panelRef:q,dataSource:me}=ge.state,oe=o.ep.getData(q.resolve()),fe=me.components?.MetadataInspector;return!oe.state.data||!fe?null:n.createElement(fe,{datasource:me,data:oe.state.data.series})};var H=e(8889);class X extends o.wx{constructor(){super(...arguments),this.onRefreshQuery=()=>{const q=(0,_.R)(this.state.panelRef.resolve());q&&q.runQueries()}}getTabLabel(){return(0,v.t)("dashboard.inspect.query-tab","Query")}getTabValue(){return E.q.Query}}X.Component=({model:ge})=>{const q=o.ep.getData(ge.state.panelRef.resolve()).useState();return q.data?n.createElement(H.D,{data:q.data,onRefreshQuery:ge.onRefreshQuery}):null};var Y=e(58837);class ne extends o.wx{getTabLabel(){return(0,v.t)("dashboard.inspect.stats-tab","Stats")}getTabValue(){return E.q.Stats}}ne.Component=({model:ge})=>{const q=o.ep.getData(ge.state.panelRef.resolve()).useState(),me=o.ep.getTimeRange(ge.state.panelRef.resolve());return q.data?n.createElement(Y.f,{data:q.data,timeZone:me.getTimeZone()}):null};class se extends o.wx{constructor(q){super(q),this.onClose=()=>{r.E1.partial({inspect:null,inspectTab:null})},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.buildTabs(0)}async buildTabs(q){const me=this.state.panelRef,oe=me.resolve(),fe=oe.getPlugin(),ve=[];if(fe||(q<2e3?setTimeout(()=>this.buildTabs(q+100),100):this.setState({pluginNotLoaded:!0})),(0,f.sY)(fe)){const pe=o.ep.getData(oe);ve.push(new h({panelRef:me})),ve.push(new ne({panelRef:me})),ve.push(new X({panelRef:me}));const Me=await(0,d.L1)(pe.state.data);Me&&ve.push(new Z({panelRef:me,dataSource:Me}))}ve.push(new K({panelRef:me,onClose:this.onClose})),this.setState({tabs:ve})}getDrawerTitle(){const q=this.state.panelRef.resolve();return o.ep.interpolate(q,`Inspect: ${q.state.title}`)}}se.Component=re;function re({model:ge}){const{tabs:q,pluginNotLoaded:me}=ge.useState(),oe=(0,a.TH)(),fe=new URLSearchParams(oe.search);if(!q)return null;const ve=fe.get("inspectTab"),pe=q.find(Me=>Me.getTabValue()===ve)??q[0];return n.createElement(g.d,{title:ge.getDrawerTitle(),onClose:ge.onClose,size:"md",tabs:n.createElement(u.J,null,q.map(Me=>n.createElement(c.O,{key:Me.state.key,label:Me.getTabLabel(),active:Me===pe,href:i.u.getUrlForPartial(oe,{inspectTab:Me.getTabValue()})})))},me&&n.createElement(l.b,{title:"Panel plugin not loaded"},"Make sure the panel you want to inspect is visible and has been displayed before opening inspect."),pe&&pe.Component&&n.createElement(pe.Component,{model:pe}))}},18128:(Q,A,e)=>{"use strict";e.d(A,{wc:()=>y});var n=e(84912),a=e(69391),i=e(19690),r=e(7939),o=e(66841),g=e(41327),u=e(34750),c=e(60490),l=e(31509),d=e(86573),f=e(42342),m=e(64552),v=e(12458),E=e(44653);const p=2e3;class h extends o.b{constructor(){super(...arguments),this.cache={},this.dashboardCache=new Map}async fetchDashboard(P){const b=this.getFromCache(P);if(b)return b;let T;try{if(P===f.DashboardRoutes.Home){if(T=await(0,a.i)().get("/api/dashboards/home"),T?.redirectUri){const O=n.u.stripBaseFromUrl(T.redirectUri);return i.E1.replace(O),null}T?.meta&&(T.meta.canSave=!1,T.meta.canShare=!1,T.meta.canStar=!1)}else T=await u.pD.loadDashboard("db","",P);if(T){const O=this.initDashboardMeta(T);await this.initNavModel(O),this.dashboardCache.set(P,{dashboard:O,ts:Date.now()})}}catch(O){if((0,a.kW)(O)&&O.cancelled)return null;throw console.error(O),O}return T}async loadDashboard(P){try{const b=await this.loadScene(P);b.startUrlSync(),this.setState({dashboard:b,isLoading:!1})}catch(b){this.setState({isLoading:!1,loadError:String(b)})}}async loadPanelEdit(P,b){try{const T=await this.loadScene(P),O=(0,E.ds)(T,(0,E.Rv)(parseInt(b,10)));if(!O){this.setState({isLoading:!1,loadError:"Panel not found"});return}const R=(0,m.I)(T,O);R.startUrlSync(),this.setState({isLoading:!1,panelEditor:R})}catch(T){this.setState({isLoading:!1,loadError:String(T)})}}async loadScene(P){const b=this.cache[P];if(b)return b;this.setState({isLoading:!0});const T=await this.fetchDashboard(P);if(T?.dashboard){const O=(0,v.Td)(T);return this.cache[P]=O,O}throw new Error("Dashboard not found")}getFromCache(P){const b=this.dashboardCache.get(P);return b&&!this.hasExpired(b)?b.dashboard:null}hasExpired(P){return Date.now()-P.ts>p}initDashboardMeta(P){return{...P,meta:D(P.meta,!!P.dashboard?.editable)}}async initNavModel(P){if(P.meta.folderUid)try{const b=await g.ae.getFolderByUid(P.meta.folderUid);d.h.dispatch((0,r.RL)((0,l.B1)(b)))}catch(b){console.warn("Error fetching parent folder",P.meta.folderUid,"for dashboard",b)}}clearState(){(0,c.h4)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}setDashboardCache(P,b){this.dashboardCache.set(P,{dashboard:b,ts:Date.now()})}}let s=null;function y(){return s||(s=new h({})),s}function D(C,P){const b=C?{...C}:{};return b.canShare=C.canShare!==!1,b.canSave=C.canSave!==!1,b.canStar=C.canStar!==!1,b.canEdit=C.canEdit!==!1,b.canDelete=C.canDelete!==!1,b.showSettings=C.canEdit,b.canMakeEditable=C.canSave&&!P,b.hasUnsavedFolderChange=!1,P||(b.canEdit=!1,b.canDelete=!1,b.canSave=!1),b}},64552:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>ke,I:()=>ot});var n=e(19690),a=e(77121),i=e(60490),r=e(63204),o=e(17188),g=e(31733),u=e(88062),c=e(4981),l=e(31805),d=e(22813),f=e(15265);class m extends a.wx{constructor(ce){super({}),this.tabId="alert",this.icon="bell",this._panelManager=ce}getTabLabel(){return"Alert"}getItemsCount(){return 0}get panelManager(){return this._panelManager}}m.Component=v;function v(it){return g.createElement("div",null,"TODO Alerting")}var E=e(89636),p=e(64571),h=e(12676);class s extends a.wx{constructor(ce){super({}),this.tabId="queries",this.icon="database",this.onOpenInspector=()=>{this._panelManager.inspectPanel()},this.onChangeDataSource=async(le,Re)=>{this._panelManager.changePanelDataSource(le,Re)},this.onQueryOptionsChange=le=>{this._panelManager.changeQueryOptions(le)},this.onQueriesChange=le=>{this._panelManager.changeQueries(le)},this._panelManager=ce}getTabLabel(){return"Queries"}getItemsCount(){const ce=this._panelManager.state.panel.state.$data;return ce instanceof f.K?1:ce instanceof a.uq?ce.state.queries.length:null}buildQueryOptions(){const ce=this._panelManager,le=this._panelManager.state.panel,Re=le.state.$data,Ae=this._panelManager.queryRunner,Oe=a.ep.getTimeRange(le);let $e={from:void 0,shift:void 0,hide:void 0};Oe instanceof h.r&&($e={from:Oe.state.timeFrom,shift:Oe.state.timeShift,hide:Oe.state.hideTimeOverride});let Ye=[];return Re instanceof f.K&&(Ye=[Re.state.query]),Re instanceof a.uq&&(Ye=Re.state.queries),{dataSource:{default:ce.state.dsSettings?.isDefault,type:ce.state.dsSettings?.type,uid:ce.state.dsSettings?.uid},queries:Ye,maxDataPoints:Ae.state.maxDataPoints,minInterval:Ae.state.minInterval,timeRange:$e}}getQueries(){const ce=this._panelManager.state.panel.state.$data;return ce instanceof f.K?[ce.state.query]:this._panelManager.queryRunner.state.queries}get panelManager(){return this._panelManager}}s.Component=y;function y({model:it}){const{panel:ce,datasource:le,dsSettings:Re}=it.panelManager.useState(),{$data:Ae}=ce.useState();if(!Ae)return;const{data:Oe}=Ae.useState();return!le||!Re||!Oe?null:g.createElement(g.Fragment,null,g.createElement(p.Y,{data:Oe,dsSettings:Re,dataSource:le,options:it.buildQueryOptions(),onDataSourceChange:it.onChangeDataSource,onOptionsChange:it.onQueryOptionsChange,onOpenQueryInspector:it.onOpenInspector}),Ae instanceof f.K?g.createElement("h1",null,"TODO: DashboardQueryEditor"):g.createElement(E.l,{data:Oe,queries:it.getQueries(),dsSettings:Re,onAddQuery:()=>{},onQueriesChange:it.onQueriesChange,onRunQueries:()=>{}}))}class D extends a.wx{constructor(ce){super({}),this.tabId="transformations",this.icon="process",this._panelManager=ce}getTabLabel(){return"Transformations"}getItemsCount(){return 0}get panelManager(){return this._panelManager}}D.Component=C;function C({model:it}){return g.createElement("div",null,"TODO Transformations")}class P extends a.wx{constructor(ce){super({tab:"queries"}),this._urlSync=new a.oU(this,{keys:["tab"]}),this._initialTabsBuilt=!1,this.onChangeTab=le=>{this.setState({tab:le.tabId})},this.panelManager=ce,this.addActivationHandler(()=>this.onActivate())}getUrlState(){return{tab:this.state.tab}}updateFromUrl(ce){ce.tab&&typeof ce.tab=="string"&&this.setState({tab:ce.tab})}onActivate(){const ce=this.panelManager.state.panel;return this.setupPanelSubscription(ce),this.buildTabs(),this._subs.add(this.panelManager.subscribeToState((le,Re)=>{le.panel!==Re.panel&&(this.buildTabs(),this.setupPanelSubscription(le.panel))})),()=>{this.panelSubscription&&(this.panelSubscription.unsubscribe(),this.panelSubscription=void 0)}}setupPanelSubscription(ce){this.panelSubscription&&(this._initialTabsBuilt=!1,this.panelSubscription.unsubscribe()),this.panelSubscription=ce.subscribeToState(()=>{ce.getPlugin()&&!this._initialTabsBuilt&&(this.buildTabs(),this._initialTabsBuilt=!0)})}getDataObjects(){const ce=a.ep.getData(this.panelManager.state.panel);let le,Re;return(ce instanceof a.uq||ce instanceof f.K)&&(le=ce),ce instanceof a.bM&&(Re=ce,Re.state.$data instanceof a.uq&&(le=Re.state.$data)),[le,Re]}buildTabs(){const le=this.panelManager.state.panel,[Re]=this.getDataObjects(),Ae=[];if(le){const Oe=le.getPlugin();if(!Oe){this.setState({tabs:Ae});return}if(Oe.meta.skipDataQuery){this.setState({tabs:Ae});return}else Re&&Ae.push(new s(this.panelManager)),Ae.push(new D(this.panelManager)),(0,d.X)(Oe)&&Ae.push(new m(this.panelManager))}this.setState({tabs:Ae})}}P.Component=b;function b({model:it}){const{tab:ce,tabs:le}=it.useState();if(!le)return;const Re=le.find(Ae=>Ae.tabId===ce);return g.createElement("div",null,g.createElement(u.J,{hideBorder:!0},le.map((Ae,Oe)=>g.createElement(c.O,{key:`${Ae.getTabLabel()}-${Oe}`,label:Ae.getTabLabel(),icon:Ae.icon,counter:Ae.getItemsCount?.(),active:Ae.tabId===ce,onChangeTab:()=>it.onChangeTab(Ae)}))),g.createElement(l.I,null,Re&&g.createElement(Re.Component,{model:Re})))}var T=e(76932),O=e(97890),R=e(57247),I=e(76067),M=e(51343),x=e(92810),L=e(97521),S=e(50186),U=e(54359);function N({model:it}){const{body:ce,controls:le,overlay:Re}=it.useState(),Ae=(0,I.wW)(G),Oe=(0,O.TH)(),$e=(0,U.v9)(Ne=>Ne.navIndex),Ye=it.getPageNav(Oe,$e);return g.createElement(S.T,{navId:"scenes",pageNav:Ye,layout:R.Q.Custom},g.createElement(x.A,{actions:w(it)}),g.createElement("div",{className:Ae.canvasContent},le&&g.createElement("div",{className:Ae.controls},le.map(Ne=>g.createElement(Ne.Component,{key:Ne.state.key,model:Ne}))),g.createElement("div",{className:Ae.body},g.createElement(ce.Component,{model:ce}))),Re&&g.createElement(Re.Component,{model:Re}))}function w(it){return g.createElement(g.Fragment,null,g.createElement(L.M,{leftActionsSeparator:!0,key:"separator"}),g.createElement(M.zx,{onClick:it.onDiscard,tooltip:"",key:"panel-edit-discard",variant:"destructive",fill:"outline",size:"sm"},"Discard"),g.createElement(M.zx,{onClick:it.onApply,tooltip:"",key:"panel-edit-apply",variant:"primary",size:"sm"},"Apply"))}function G(it){return{canvasContent:(0,T.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:it.spacing(0,2),flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),body:(0,T.css)({label:"body",flexGrow:1,display:"flex",position:"relative",minHeight:0,gap:"8px",marginBottom:it.spacing(2)}),controls:(0,T.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:it.spacing(1),padding:it.spacing(2,0)})}}var _=e(56821),K=e(83599),k=e(70053),z=e(44653);class W{constructor(ce){this._scene=ce}getKeys(){return["inspect"]}getUrlState(){return{inspect:this._scene.state.inspectPanelKey}}updateFromUrl(ce){const{inspectPanelKey:le}=this._scene.state,Re={};if(typeof ce.inspect=="string"){const Ae=(0,z.ds)(this._scene,ce.inspect);if(!Ae){K.Z.emit(_.SI.alertError,["Panel not found"]),n.E1.partial({inspect:null});return}Re.inspectPanelKey=ce.inspect,Re.overlay=new k.L({panelRef:Ae.getRef()})}else le&&(Re.inspectPanelKey=void 0,Re.overlay=void 0);Object.keys(Re).length>0&&this._scene.setState(Re)}}var Z=e(85765),H=e(64516);class X extends a.wx{constructor(ce){super({}),this.panelManager=ce}}X.Component=({model:it})=>{const{panelManager:ce}=it,{panel:le}=ce.state,{title:Re}=le.useState(),Ae=(0,I.wW)(Y);return g.createElement("div",{className:Ae.box},g.createElement(Z.g,{label:"Title"},g.createElement(H.I,{value:Re,onChange:Oe=>le.setState({title:Oe.currentTarget.value})})))};function Y(it){return{box:(0,T.css)({display:"flex",flexDirection:"column",padding:it.spacing(2)})}}var ne=e(37758),se=e(76804),re=e(36965);class ge extends a.wx{constructor(ce){super({}),this.panelManager=ce}}ge.Component=({model:it})=>{const{panelManager:ce}=it,{panel:le}=ce.useState(),Re=(0,I.wW)(q),[Ae,Oe]=(0,g.useState)("");return g.createElement(ne.$,{autoHeightMin:"100%"},g.createElement("div",{className:Re.wrapper},g.createElement(se.H,{value:Ae,onChange:Oe,autoFocus:!0,placeholder:"Search for..."}),g.createElement(re.G,{pluginId:le.state.pluginId,searchQuery:Ae,onChange:$e=>{ce.changePluginType($e.pluginId)}})))};const q=it=>({wrapper:(0,T.css)({display:"flex",flexDirection:"column",gap:it.spacing(1)})});var me=e(87877),oe=e(20298),fe=e(5333),ve=e(66261),pe=e(30937),Me=e(66051),Pe=e(92624),Ee=e(7307),he=e(64287);class Le extends a.wx{constructor(ce,le){if(super({panel:ce}),this._cachedPluginOptions={},ce.state.$data instanceof f.K){const Re=ce.state.$data;if(Re.state.query.panelId){const Ae=(0,z.Rv)(Re.state.query.panelId),Oe=(0,f.T)(le.resolve(),$e=>$e.state.key===Ae);Oe&&Re.setState({$data:Oe.state.$data.clone()})}}this.addActivationHandler(()=>this._onActivate())}_onActivate(){return this.setupDataObjectSubscription(),this.loadDataSource(),()=>{this._dataObjectSubscription?.unsubscribe()}}setupDataObjectSubscription(){const ce=this.queryRunner;this._dataObjectSubscription&&this._dataObjectSubscription.unsubscribe(),this._dataObjectSubscription=ce.subscribeToState((le,Re)=>{le.datasource!==Re.datasource&&this.loadDataSource()})}async loadDataSource(){const ce=this.state.panel.state.$data;if(!ce)return;let le;if(ce instanceof f.K?le={uid:Ee.oe,type:he.W}:le=this.queryRunner.state.datasource,!!le)try{const Re=await(0,ve.F)().get(le),Ae=(0,ve.F)().getInstanceSettings(le);Re&&Ae&&(this.setState({datasource:Re,dsSettings:Ae}),(0,Me.rJ)({type:Ae.type,uid:Ae.uid}))}catch(Re){console.error(Re)}}changePluginType(ce){const{options:le,fieldConfig:Re,pluginId:Ae,...Oe}=a.vp.cloneSceneObjectState(this.state.panel.state);let $e={...Re};$e.defaults={...$e.defaults,custom:{}},$e.overrides=(0,me.aS)($e.overrides,me._k),this._cachedPluginOptions[Ae]={options:le,fieldConfig:Re};const Ye=this._cachedPluginOptions[ce]?.options,Ne=this._cachedPluginOptions[ce]?.fieldConfig;Ne&&($e=(0,me.__)($e,Ne));const je=new a.Z({options:Ye??{},fieldConfig:$e,pluginId:ce,...Oe}),ut=je.getPlugin(),Fe={title:je.state.title,options:je.state.options,fieldConfig:je.state.fieldConfig,id:1,type:ce},Te=ut?.onPanelTypeChanged?.(Fe,Ae,le,Re);Te&&je.onOptionsChange(Te,!0),ut?.onPanelMigration&&je.setState({pluginVersion:(0,pe.hb)(ut)}),this.setState({panel:je}),this.setupDataObjectSubscription()}async changePanelDataSource(ce,le){const{panel:Re,dsSettings:Ae}=this.state,Oe=Re.state.$data;if(!Oe)return;const $e=Ae?await(0,ve.F)().get({uid:Ae.uid}):void 0,Ye=await(0,ve.F)().get({uid:ce.uid}),Ne=[];Oe instanceof a.uq?Ne.push(...Oe.state.queries):Oe instanceof f.K&&Ne.push(Oe.state.query);const je=le||await(0,Pe.I)(Ye,ce.uid,Ne,$e);if(Oe instanceof a.uq)if(ce.uid===Ee.oe){const ut=new f.K({query:je[0],$data:new a.uq({queries:[]}),data:{series:[],state:oe.Gu.NotStarted,timeRange:(0,fe.JK)()}});Re.setState({$data:ut}),this.setupDataObjectSubscription(),this.loadDataSource()}else Oe.setState({datasource:{type:ce.type,uid:ce.uid},queries:je}),le&&Oe.runQueries();else if(Oe instanceof f.K&&ce.uid!==Ee.oe){const ut=new a.uq({datasource:{type:ce.type,uid:ce.uid},queries:je});Re.setState({$data:ut}),this.setupDataObjectSubscription(),this.loadDataSource()}else if(Oe instanceof a.bM){const ut=Oe.clone();let Fe=new a.uq({datasource:{type:ce.type,uid:ce.uid},queries:je});ce.uid===Ee.oe&&(Fe=new f.K({query:je[0],$data:new a.uq({queries:[]}),data:{series:[],state:oe.Gu.NotStarted,timeRange:(0,fe.JK)()}})),ut.setState({$data:Fe}),Re.setState({$data:ut}),this.setupDataObjectSubscription(),this.loadDataSource()}}changeQueryOptions(ce){const le=this.state.panel,Re=this.queryRunner;let Ae=a.ep.getTimeRange(le);const Oe={},$e={};ce.maxDataPoints!==Re.state.maxDataPoints&&(Oe.maxDataPoints=ce.maxDataPoints??void 0),ce.minInterval!==Re.state.minInterval&&ce.minInterval!==null&&(Oe.minInterval=ce.minInterval),ce.timeRange&&($e.timeFrom=ce.timeRange.from??void 0,$e.timeShift=ce.timeRange.shift??void 0,$e.hideTimeOverride=ce.timeRange.hide),Ae instanceof h.r?$e.timeFrom!==void 0||$e.timeShift!==void 0?Ae.setState($e):le.setState({$timeRange:void 0}):le.setState({$timeRange:new h.r($e)}),Re.setState(Oe),Re.runQueries()}changeQueries(ce){this.queryRunner.setState({queries:ce})}inspectPanel(){const ce=this.state.panel,le=(0,z.Jb)(ce);n.E1.partial({inspect:le,inspectTab:"query"})}get queryRunner(){const ce=this.state.panel.state.$data;return ce instanceof f.K||ce instanceof a.bM?ce.state.$data:ce}}Le.Component=({model:it})=>{const{panel:ce}=it.useState();return g.createElement(ce.Component,{model:ce})};class ke extends a.wx{constructor(ce){super(ce),this._urlSync=new W(this),this.onDiscard=()=>{this._navigateBackToDashboard()},this.onApply=()=>{this._commitChanges(),this._navigateBackToDashboard()},this.onSave=()=>{this._commitChanges()},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){const ce=new r.f(this.state.dashboardRef.resolve());return(0,i.h4)().setCurrent(ce),()=>{(0,a.oo)().cleanUp(this)}}startUrlSync(){(0,a.oo)().initSync(this)}getPageNav(ce,le){return{text:"Edit panel",parentItem:this.state.dashboardRef.resolve().getPageNav(ce,le)}}_commitChanges(){const ce=this.state.dashboardRef.resolve(),le=this.state.sourcePanelRef.resolve(),Re=this.state.panelRef.resolve();ce.state.isEditing||ce.onEnterEditMode();const Ae=a.vp.cloneSceneObjectState(Re.state.panel.state);le.setState(Ae),ce.setState({$timeRange:this.state.$timeRange?.clone(),$variables:this.state.$variables?.clone(),isDirty:!0})}_navigateBackToDashboard(){n.E1.push((0,o.$9)({uid:this.state.dashboardRef.resolve().state.uid,currentQueryParams:n.E1.getLocation().search}))}}ke.Component=N;function ot(it,ce){const le=ce.clone(),Re=new Le(le,it.getRef()),Ae=a.vp.cloneSceneObjectState(it.state);return new ke({dashboardRef:it.getRef(),sourcePanelRef:ce.getRef(),panelRef:Re.getRef(),controls:Ae.controls,$variables:Ae.$variables,$timeRange:Ae.$timeRange,body:new a.KH({direction:"row",primary:new a.KH({direction:"column",primary:new a.QY({direction:"column",children:[Re]}),secondary:new a.fy({body:new P(Re)})}),secondary:new a.QY({direction:"column",children:[new X(Re),new ge(Re)]})})})}},1797:(Q,A,e)=>{"use strict";e.d(A,{n:()=>P,u:()=>C});var n=e(57298),a=e(4558),i=e(71199),r=e(63949),o=e(20298),g=e(98147),u=e(69391),c=e(85498),l=e(77121),d=e(7939),f=e(42876),m=e(75923),v=e(67253),E=e(98319),p=e(96198),h=e(86573),s=e(42342),y=e(58126),D=e(44653);class C extends l.Ix{constructor(T){super({isEnabled:!0,...T,isHidden:!0}),this.hasAlertRules=!0,this.topic=i.w5.AlertStates,this.handleError=O=>{const R=(0,f.t_)("AlertStatesDataLayer",(0,v.i)(O));(0,h.WI)((0,d.$l)(R))}}onEnable(){const T=l.ep.getTimeRange(this);this._timeRangeSub=T.subscribeToState(()=>{this.runWithTimeRange(T)})}onDisable(){this._timeRangeSub?.unsubscribe()}runLayer(){const T=l.ep.getTimeRange(this);this.runWithTimeRange(T)}async runWithTimeRange(T){const O=(0,D.Pm)(this),{uid:R,id:I}=O.state;if(this.querySub&&this.querySub.unsubscribe(),!this.canWork(T))return;let M;this.isUsingLegacyAlerting()?M=(0,n.D)((0,u.i)().get("/api/alerts/states-for-dashboard",{dashboardId:I},`dashboard-query-runner-alert-states-${I}`)).pipe((0,a.U)(x=>x)):M=(0,n.D)((0,u.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:R},`dashboard-query-runner-unified-alert-states-${I}`)).pipe((0,a.U)(x=>{if(x.status==="success"){this.hasAlertRules=!1;const L={};return x.data.groups.forEach(S=>S.rules.forEach(U=>{if((0,p.x_)(U)&&U.annotations&&U.annotations[E.q6.panelID]){this.hasAlertRules=!0;const N=Number(U.annotations[E.q6.panelID]),w=P(U.state);L[N]?w===r.Z.Alerting&&L[N].state!==r.Z.Alerting?L[N].state=r.Z.Alerting:w===r.Z.Pending&&L[N].state!==r.Z.Alerting&&L[N].state!==r.Z.Pending&&(L[N].state=r.Z.Pending):L[N]={state:w,id:Object.keys(L).length,panelId:N,dashboardId:I}}})),Object.values(L)}throw new Error("Unexpected alert rules response.")})),this.querySub=M.subscribe({next:x=>{this.publishResults({state:o.Gu.Done,series:[(0,g.g0)(x)],timeRange:T.state.value},i.w5.AlertStates)},error:x=>{this.handleError(x),this.publishResults({state:o.Gu.Error,series:[],errors:[{message:(0,v.i)(x)}],timeRange:T.state.value},i.w5.AlertStates)}})}canWork(T){const O=(0,D.Pm)(this),{uid:R,id:I}=O.state;return this.isUsingLegacyAlerting()?!(!I||T.state.value.raw.to!=="now"):!(!R||c.config.publicDashboardAccessToken||T.state.value.raw.to!=="now"||this.hasAlertRules===!1||!(m.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&m.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)))}isUsingLegacyAlerting(){return!c.config.unifiedAlertingEnabled}}function P(b){return b===y.x_.Firing?r.Z.Alerting:b===y.x_.Pending?r.Z.Pending:r.Z.OK}},34134:(Q,A,e)=>{"use strict";e.d(A,{n:()=>u});var n=e(31733),a=e(77121),i=e(37739),r=e(68833),o=e(73351),g=e(44653);class u extends a.wx{}u.Component=c;function c({model:l}){const d=(0,g.Pm)(l),{variableControls:f,linkControls:m,timeControls:v,hideTimeControls:E}=l.useState(),{isEditing:p}=d.useState();return n.createElement(i.K,{grow:1,direction:{md:"row",xs:"column"}},n.createElement(i.K,{grow:1,wrap:"wrap"},f.map(h=>n.createElement(h.Component,{model:h,key:h.state.key})),n.createElement(r.x,{grow:1}),n.createElement(m.Component,{model:m})),n.createElement(i.K,{justifyContent:"flex-end"},p&&n.createElement(o.h,{variant:"canvas",icon:"cog",tooltip:"Dashboard settings",onClick:d.onOpenSettings}),!E&&v.map(h=>n.createElement(h.Component,{model:h,key:h.state.key}))))}},23709:(Q,A,e)=>{"use strict";e.d(A,{WI:()=>st});var n=e(44343),a=e(19690),i=e(77121),r=e(83599),o=e(90845),g=e(60490),u=e(7257),c=e(76932),l=e(31733),d=e(97890),f=e(57247),m=e(76067),v=e(37758),E=e(50186),p=e(42342),h=e(51343),s=e(92810),y=e(97521),D=e(53166),C=e(69026),P=e(67894),b=e(92762),T=e(19179);const O=l.memo(({dashboard:ct})=>{const{actions:nt=[],isEditing:Ct,viewPanelScene:kt,isDirty:Jt,uid:tn,meta:Kt,editview:cn}=ct.useState(),dn=(nt??[]).map(_n=>l.createElement(_n.Component,{key:_n.state.key,model:_n})),Sn=[],Zn=(0,g.h4)().getCurrent();if(tn&&!cn){if(Kt.canStar){let _n=Kt.isStarred?(0,D.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,D.t)("dashboard.toolbar.mark-favorite","Mark as favorite");dn.push(l.createElement(C.u,{key:"star-dashboard-button",tooltip:_n,icon:Kt.isStarred?"favorite":"star",iconType:Kt.isStarred?"mono":"default",iconSize:"lg",onClick:()=>{b.a.toolbarFavoritesClick(),ct.onStarDashboard()}}))}dn.push(l.createElement(C.u,{key:"share-dashboard-button",tooltip:(0,D.t)("dashboard.toolbar.share","Share dashboard"),icon:"share-alt",iconSize:"lg",onClick:()=>{b.a.toolbarShareClick(),ct.showModal(new P.V({dashboardRef:ct.getRef()}))}})),dn.push(l.createElement(C.u,{key:"view-in-old-dashboard-button",tooltip:"View as dashboard",icon:"apps",onClick:()=>a.E1.push(`/d/${tn}`)})),T.j.left.length>0&&T.j.left.map((_n,Ut)=>{const Xt=_n.component,en=l.createElement(Xt,{dashboard:Zn});typeof _n.index=="number"?dn.splice(_n.index,0,en):dn.push(en)})}return dn.push(l.createElement(y.M,{leftActionsSeparator:!0,key:"separator"})),T.j.right.length>0&&(T.j.right.map((_n,Ut)=>{const Xt=_n.component,en=l.createElement(Xt,{dashboard:Zn,key:`button-custom-${Ut}`});typeof _n.index=="number"?Sn.splice(_n.index,0,en):Sn.push(en)}),dn.push(...Sn)),kt?(dn.push(l.createElement(h.zx,{onClick:()=>{a.E1.partial({viewPanel:null})},tooltip:"",key:"back",variant:"primary",fill:"text"},"Back to dashboard")),l.createElement(s.A,{actions:dn})):(Ct?ct.canEditDashboard()&&(dn.push(l.createElement(h.zx,{onClick:()=>{ct.onSave()},tooltip:"Save as copy",fill:"text",key:"save-as"},"Save as")),dn.push(l.createElement(h.zx,{onClick:()=>{ct.onDiscard()},tooltip:"Discard changes",fill:"text",key:"discard",variant:"destructive"},"Discard")),dn.push(l.createElement(h.zx,{onClick:()=>{b.a.toolbarSaveClick(),ct.onSave()},tooltip:"Save changes",key:"save",disabled:!Jt},"Save"))):ct.canEditDashboard()&&dn.push(l.createElement(h.zx,{onClick:()=>{ct.onEnterEditMode()},tooltip:"Enter edit mode",key:"edit",variant:"primary",icon:"pen",fill:"text"},"Edit")),l.createElement(s.A,{actions:dn}))});O.displayName="NavToolbarActions";function R({model:ct}){const{controls:nt,overlay:Ct,editview:kt}=ct.useState(),Jt=(0,m.wW)(I),tn=(0,d.TH)(),Kt=(0,p.useSelector)(Zn=>Zn.navIndex),cn=ct.getPageNav(tn,Kt),dn=ct.getBodyToRender(),Sn=(0,o.ht)(Kt,"dashboards/browse");return kt?l.createElement(kt.Component,{model:kt}):l.createElement(E.T,{navModel:Sn,pageNav:cn,layout:f.Q.Custom},l.createElement(v.$,{autoHeightMin:"100%"},l.createElement("div",{className:Jt.canvasContent},l.createElement(O,{dashboard:ct}),nt&&l.createElement("div",{className:Jt.controls},nt.map(Zn=>l.createElement(Zn.Component,{key:Zn.state.key,model:Zn})),l.createElement(i.iu,{scene:ct,key:"scene-debugger"})),l.createElement("div",{className:(0,c.cx)(Jt.body)},l.createElement(dn.Component,{model:dn})))),Ct&&l.createElement(Ct.Component,{model:Ct}))}function I(ct){return{canvasContent:(0,c.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:ct.spacing(0,2),flexBasis:"100%",flexGrow:1}),body:(0,c.css)({label:"body",flexGrow:1,display:"flex",gap:"8px",marginBottom:ct.spacing(2)}),controls:(0,c.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:ct.spacing(1),position:"sticky",top:0,background:ct.colors.background.canvas,zIndex:ct.zIndex.navbarFixed,padding:ct.spacing(2,0)})}}var M=e(59899),x=e(64754),L=e(45654),S=e(44560);class U extends i.wx{constructor(){super(...arguments),this.onClose=()=>{this.state.dashboardRef.resolve().setState({overlay:void 0})}}}U.Component=({model:ct})=>{const nt=ct.state.dashboardRef.resolve(),Ct=nt.getInitialState(),kt=new st(Ct),Jt=(0,S.EU)(kt),tn=(0,S.EU)(nt),Kt=(0,L.Q$)(Jt,tn);return l.createElement(M.d,{title:"Save dashboard",subtitle:nt.state.title,onClose:ct.onClose},l.createElement(x._,{diff:Kt,oldValue:Jt,newValue:tn}))};var N=e(63204);function w(ct){let nt=5381;for(let Ct=0;Ct<ct.length;Ct++)nt=nt*33^ct.charCodeAt(Ct);return nt>>>0}var G=e(17188),_=e(44653),K=e(34134),k=e(56821),z=e(70053),W=e(84912);class Z extends i.wx{getUrlKey(){return"annotations"}}Z.Component=({model:ct})=>{const nt=(0,_.Pm)(ct),{navModel:Ct,pageNav:kt}=de(nt,ct.getUrlKey());return l.createElement(E.T,{navModel:Ct,pageNav:kt,layout:f.Q.Standard},l.createElement(O,{dashboard:nt}),l.createElement("div",null,"Annotations todo"))};var H=e(34037);class X{constructor(nt){this._scene=nt}getKeys(){return["editIndex"]}getUrlState(){const nt=this._scene.state;return{editIndex:nt.editIndex!==void 0?String(nt.editIndex):void 0}}updateFromUrl(nt){let Ct={};typeof nt.editIndex=="string"?Ct={editIndex:Number(nt.editIndex)}:Ct={editIndex:void 0},Object.keys(Ct).length>0&&this._scene.setState(Ct)}}class Y extends i.wx{constructor(){super(...arguments),this._urlSync=new X(this)}getUrlKey(){return"links"}}Y.Component=ne;function ne({model:ct}){const{editIndex:nt}=ct.useState(),Ct=(0,_.Pm)(ct),kt=Ct.state.links||[],{navModel:Jt,pageNav:tn}=de(Ct,ct.getUrlKey());if(nt!==void 0){const Kt=kt[nt];if(Kt)return l.createElement(se,{pageNav:tn,navModel:Jt,link:Kt,dashboard:Ct})}return l.createElement(E.T,{navModel:Jt,pageNav:tn,layout:f.Q.Standard},l.createElement(O,{dashboard:Ct}),kt.map((Kt,cn)=>l.createElement(H.r,{key:`${Kt.title}-${cn}`,onClick:dn=>{dn.preventDefault(),a.E1.partial({editIndex:cn})}},Kt.title)))}function se({pageNav:ct,link:nt,navModel:Ct,dashboard:kt}){const Jt=ct.children.find(Kt=>Kt.active);Jt.parentItem=ct;const tn={text:"Edit link",parentItem:Jt};return l.createElement(E.T,{navModel:Ct,pageNav:tn,layout:f.Q.Standard},l.createElement(O,{dashboard:kt}),JSON.stringify(nt))}var re=e(68833),ge=e(85765),q=e(79106),me=e(36667),oe=e(64516),fe=e(28718),ve=e(98572),pe=e(96856),Me=e(5284),Pe=e(26371),Ee=e(27774),he=e(53365),Le=e(75778);const ke=[{label:"Editable",value:!0},{label:"Read-only",value:!1}],ot=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];class it extends i.wx{constructor(){super(...arguments),this.onTitleChange=nt=>{this._dashboard.setState({title:nt})},this.onDescriptionChange=nt=>{this._dashboard.setState({description:nt})},this.onTagsChange=nt=>{this._dashboard.setState({tags:nt})},this.onFolderChange=(nt,Ct)=>{const kt={...this._dashboard.state.meta,folderUid:nt||this._dashboard.state.meta.folderUid,folderTitle:Ct||this._dashboard.state.meta.folderTitle,hasUnsavedFolderChange:!0};this._dashboard.setState({meta:kt})},this.onEditableChange=nt=>{this._dashboard.setState({editable:nt})},this.onTimeZoneChange=nt=>{this.getTimeRange().setState({timeZone:nt})},this.onWeekStartChange=nt=>{this.getTimeRange().setState({weekStart:nt})},this.onRefreshIntervalChange=nt=>{this.getRefreshPicker()?.setState({intervals:nt})},this.onNowDelayChange=nt=>{},this.onHideTimePickerChange=nt=>{this.getDashboardControls()?.setState({hideTimeControls:nt})},this.onLiveNowChange=nt=>{},this.onTooltipChange=nt=>{this.getCursorSync()?.setState({sync:nt})}}get _dashboard(){return(0,_.Pm)(this)}getUrlKey(){return"settings"}getDashboard(){return this._dashboard}getTimeRange(){return i.ep.getTimeRange(this._dashboard)}getRefreshPicker(){return Le.Y.getRefreshPicker(this._dashboard)}getCursorSync(){const nt=this._dashboard.state.$behaviors?.find(Ct=>Ct instanceof i.U1.Y);if(nt instanceof i.U1.Y)return nt}getDashboardControls(){return Le.Y.getDashboardControls(this._dashboard)}}it.Component=({model:ct})=>{const{navModel:nt,pageNav:Ct}=de(ct.getDashboard(),ct.getUrlKey()),{title:kt,description:Jt,tags:tn,meta:Kt,editable:cn,overlay:dn}=ct.getDashboard().useState(),{sync:Sn}=ct.getCursorSync()?.useState()||{},{timeZone:Zn,weekStart:_n}=ct.getTimeRange().useState(),{intervals:Ut}=ct.getRefreshPicker()?.useState()||{},{hideTimeControls:Xt}=ct.getDashboardControls()?.useState()||{};return l.createElement(E.T,{navModel:nt,pageNav:Ct,layout:f.Q.Standard},l.createElement(O,{dashboard:ct.getDashboard()}),l.createElement("div",{style:{maxWidth:"600px"}},l.createElement(re.x,{marginBottom:5},l.createElement(ge.g,{label:l.createElement(q.Lh,{justify:"space-between"},l.createElement(me._,{htmlFor:"title-input"},l.createElement(D.cC,{i18nKey:"dashboard-settings.general.title-label"},"Title")))},l.createElement(oe.I,{id:"title-input",name:"title",defaultValue:kt,onBlur:en=>ct.onTitleChange(en.target.value)})),l.createElement(ge.g,{label:l.createElement(q.Lh,{justify:"space-between"},l.createElement(me._,{htmlFor:"description-input"},(0,D.t)("dashboard-settings.general.description-label","Description")))},l.createElement(fe.K,{id:"description-input",name:"description",defaultValue:Jt,onBlur:en=>ct.onDescriptionChange(en.target.value)})),l.createElement(ge.g,{label:(0,D.t)("dashboard-settings.general.tags-label","Tags")},l.createElement(ve.B,{id:"tags-input",tags:tn,onChange:ct.onTagsChange,width:40})),l.createElement(ge.g,{label:(0,D.t)("dashboard-settings.general.folder-label","Folder")},l.createElement(Pe.E,{value:Kt.folderUid,onChange:ct.onFolderChange,initialTitle:Kt.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,skipInitialLoad:!0})),l.createElement(ge.g,{label:(0,D.t)("dashboard-settings.general.editable-label","Editable"),description:(0,D.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},l.createElement(pe.S,{value:cn,options:ke,onChange:ct.onEditableChange}))),l.createElement(Ee.P,{onTimeZoneChange:ct.onTimeZoneChange,onWeekStartChange:ct.onWeekStartChange,onRefreshIntervalChange:ct.onRefreshIntervalChange,onNowDelayChange:ct.onNowDelayChange,onHideTimePickerChange:ct.onHideTimePickerChange,onLiveNowChange:ct.onLiveNowChange,refreshIntervals:Ut,timePickerHidden:Xt,liveNow:!1,timezone:Zn||"",weekStart:_n||""}),l.createElement(Me.s,{label:(0,D.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},l.createElement(ge.g,{label:(0,D.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,D.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},l.createElement(pe.S,{onChange:ct.onTooltipChange,options:ot,value:Sn}))),l.createElement(re.x,{marginTop:3},Kt.canDelete&&l.createElement(he.b,null))),dn&&l.createElement(dn.Component,{model:dn}))};var ce=e(4113),le=e(21568),Re=e(64704),Ae=e(37739),Oe=e(88511),$e=e(41354),Ye=e(90069),Ne=e(49311),je=e(36138);function ut({index:ct,variable:nt,onEdit:Ct,onDuplicate:kt,onDelete:Jt}){const tn=(0,m.l4)(),Kt=(0,m.wW)(Te),cn=Fe(nt),dn=nt.state,Sn=dn.name,[Zn,_n]=(0,l.useState)(!1),Ut=en=>()=>{_n(en)},Xt=()=>{(0,Re.ff)("Delete variable"),Jt(Sn)};return l.createElement(ce._l,{draggableId:JSON.stringify(Sn),index:ct},(en,gn)=>l.createElement("tr",{ref:en.innerRef,...en.draggableProps,style:{userSelect:gn.isDragging?"none":"auto",background:gn.isDragging?tn.colors.background.secondary:void 0,...en.draggableProps.style}},l.createElement("td",{role:"gridcell",className:Kt.column},l.createElement(h.zx,{size:"xs",fill:"text",onClick:ln=>{ln.preventDefault(),Ct(Sn)},className:Kt.nameLink,"data-testid":le.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(dn.name)},dn.name)),l.createElement("td",{role:"gridcell",className:Kt.definitionColumn,onClick:ln=>{ln.preventDefault(),Ct(Sn)},"data-testid":le.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(dn.name)},cn),l.createElement("td",{role:"gridcell",className:Kt.column},l.createElement("div",{className:Kt.icons},l.createElement($e.h,{onClick:ln=>{ln.preventDefault(),(0,Re.ff)("Duplicate variable"),kt(Sn)},name:"copy",tooltip:"Duplicate variable","data-testid":le.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(dn.name)}),l.createElement($e.h,{onClick:ln=>{ln.preventDefault(),_n(!0)},name:"trash-alt",tooltip:"Remove variable","data-testid":le.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(dn.name)}),l.createElement(Ye.s,{isOpen:Zn,title:"Delete variable",body:`Are you sure you want to delete: ${dn.name}?`,confirmText:"Delete variable",onConfirm:Xt,onDismiss:Ut(!1)}),l.createElement("div",{...en.dragHandleProps,className:Kt.dragHandle},l.createElement(Ne.J,{name:"draggabledots",size:"lg"}))))))}function Fe(ct){let nt="";return ct instanceof i.$1?ct.state.definition?nt=ct.state.definition:typeof ct.state.query=="string"&&(nt=ct.state.query):(0,je.eL)(ct.state)&&(nt=ct.state.query),nt}function Te(ct){return{dragHandle:(0,c.css)({cursor:"grab",marginLeft:ct.spacing(1)}),column:(0,c.css)({width:"1%"}),nameLink:(0,c.css)({cursor:"pointer",color:ct.colors.primary.text}),definitionColumn:(0,c.css)({width:"100%",maxWidth:"200px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconPassed:(0,c.css)({color:ct.v1.palette.greenBase,marginRight:ct.spacing(2)}),iconFailed:(0,c.css)({color:ct.v1.palette.orange,marginRight:ct.spacing(2)}),icons:(0,c.css)({display:"flex",gap:ct.spacing(2),alignItems:"center"})}}function Ve({variables:ct,onChangeOrder:nt,onDelete:Ct,onDuplicate:kt,onAdd:Jt,onEdit:tn}){const Kt=(0,m.wW)(ae),cn=dn=>{!dn.destination||!dn.source||((0,Re.ff)("Variable drag and drop"),nt(dn.source.index,dn.destination.index))};return l.createElement("div",null,l.createElement("div",null,ct.length===0&&l.createElement(tt,{onAdd:Jt}),ct.length>0&&l.createElement(Ae.K,{direction:"column",gap:4},l.createElement("div",{className:Kt.tableContainer},l.createElement("table",{className:"filter-table filter-table--hover","data-testid":le.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"Variable"),l.createElement("th",null,"Definition"),l.createElement("th",{colSpan:5}))),l.createElement(ce.Z5,{onDragEnd:cn},l.createElement(ce.bK,{droppableId:"variables-list",direction:"vertical"},dn=>l.createElement("tbody",{ref:dn.innerRef,...dn.droppableProps},ct.map((Sn,Zn)=>{const _n=Sn.state;return l.createElement(ut,{index:Zn,key:`${_n.name}-${Zn}`,variable:Sn,onDelete:Ct,onDuplicate:kt,onEdit:tn})}),dn.placeholder))))))))}function tt({onAdd:ct}){return l.createElement("div",null,l.createElement(Oe.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",buttonDisabled:!0,infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:nt=>{nt.preventDefault(),ct()}}))}const ae=()=>({tableContainer:(0,c.css)({overflow:"scroll",width:"100%"})});class J extends i.wx{constructor(){super(...arguments),this.getVariableIndex=nt=>this.getVariables().findIndex(kt=>kt.state.name===nt),this.onDelete=nt=>{const Ct=this.getVariableIndex(nt),{variables:kt}=this.getVariableSet().state;if(Ct===-1){console.error("Variable not found");return}const Jt=[...kt.slice(0,Ct),...kt.slice(Ct+1)];this.getVariableSet().setState({variables:Jt})},this.onDuplicated=nt=>{const Ct=this.getVariableIndex(nt),kt=this.getVariableSet().state.variables;if(Ct===-1){console.error("Variable not found");return}const Jt=kt[Ct];let tn=0,Kt=`copy_of_${Jt.state.name}`;for(;kt.some(Sn=>Sn.state.name===Kt);)tn++,Kt=`copy_of_${Jt.state.name}_${tn}`;const cn=Jt.clone(Jt.state);cn.setState({name:Kt});const dn=[...kt.slice(0,Ct+1),cn,...kt.slice(Ct+1)];this.getVariableSet().setState({variables:dn})},this.onOrderChanged=(nt,Ct)=>{const kt=this.getVariableSet().state.variables;if(!this.getVariableSet())return;if(nt<0||nt>=kt.length||Ct<0||Ct>=kt.length){console.error("Invalid index");return}const Jt=[...kt],tn=Jt.splice(nt,1);Jt.splice(Ct,0,tn[0]),this.getVariableSet().setState({variables:Jt})},this.onEdit=nt=>"not implemented"}getUrlKey(){return"variables"}getDashboard(){return(0,_.Pm)(this)}getVariableSet(){return i.ep.getVariables(this.getDashboard())}getVariables(){return this.getVariableSet().state.variables}}J.Component=te;function te({model:ct}){const nt=ct.getDashboard(),{navModel:Ct,pageNav:kt}=de(nt,ct.getUrlKey()),{onDelete:Jt,onDuplicated:tn,onOrderChanged:Kt,onEdit:cn}=ct,{variables:dn}=ct.getVariableSet().useState();return l.createElement(E.T,{navModel:Ct,pageNav:kt,layout:f.Q.Standard},l.createElement(O,{dashboard:nt}),l.createElement(Ve,{variables:dn,onDelete:Jt,onDuplicate:tn,onChangeOrder:Kt,onAdd:()=>{},onEdit:cn}))}function de(ct,nt){const Ct=(0,d.TH)(),kt=(0,p.useSelector)(cn=>cn.navIndex),Jt=(0,o.ht)(kt,"dashboards/browse"),tn=ct.getPageNav(Ct,kt),Kt={text:"Settings",url:W.u.getUrlForPartial(Ct,{editview:"settings",editIndex:null}),children:[{text:(0,D.t)("dashboard-settings.general.title","General"),url:W.u.getUrlForPartial(Ct,{editview:"settings",editIndex:null}),active:nt==="settings"},{text:(0,D.t)("dashboard-settings.annotations.title","Annotations"),url:W.u.getUrlForPartial(Ct,{editview:"annotations",editIndex:null}),active:nt==="annotations"},{text:(0,D.t)("dashboard-settings.variables.title","Variables"),url:W.u.getUrlForPartial(Ct,{editview:"variables",editIndex:null}),active:nt==="variables"},{text:(0,D.t)("dashboard-settings.links.title","Links"),url:W.u.getUrlForPartial(Ct,{editview:"links",editIndex:null}),active:nt==="links"}],parentItem:tn};return{navModel:Jt,pageNav:Kt}}function be(ct){switch(ct){case"annotations":return new Z({});case"variables":return new J({});case"links":return new Y({});case"settings":default:return new it({})}}class De extends i.wx{constructor(nt){super(nt),this.addActivationHandler(this._activationHandler.bind(this))}_activationHandler(){const nt=this.state.panelRef.resolve(),Ct=i.vp.cloneSceneObjectState(nt.state,{key:nt.state.key+"-view",$variables:this.getScopedVariables(nt)}),kt=new i.Z(Ct);return this.setState({body:kt}),()=>{kt.state.$data&&nt.setState({$data:kt.state.$data.clone()})}}getScopedVariables(nt){const Ct=Ue(nt),kt=[];if(Ct&&Ct.state.$variables)for(const Jt of Ct.state.$variables.state.variables)kt.push(Jt.clone());if(nt.state.$variables)for(const Jt of nt.state.$variables.state.variables)kt.push(Jt.clone());if(kt.length>0)return new i.hT({variables:kt})}getUrlKey(){return this.state.panelRef.resolve().state.key}}De.Component=({model:ct})=>{const{body:nt}=ct.useState();return nt?l.createElement(nt.Component,{model:nt}):null};function Ue(ct){try{return i.ep.getAncestor(ct,i.I_)}catch{return}}var We=e(58646);class et{constructor(nt){this._scene=nt}getKeys(){return["inspect","viewPanel","editview"]}getUrlState(){const nt=this._scene.state;return{inspect:nt.inspectPanelKey,viewPanel:nt.viewPanelScene?.getUrlKey(),editview:nt.editview?.getUrlKey()}}updateFromUrl(nt){const{inspectPanelKey:Ct,viewPanelScene:kt,meta:Jt,isEditing:tn}=this._scene.state,Kt={};if(typeof nt.editview=="string"&&Jt.canEdit?(Kt.editview=be(nt.editview),tn||setTimeout(()=>this._scene.onEnterEditMode())):nt.hasOwnProperty("editview")&&(Kt.editview=void 0),typeof nt.inspect=="string"){const cn=(0,_.ds)(this._scene,nt.inspect);if(!cn){r.Z.emit(k.SI.alertError,["Panel not found"]),a.E1.partial({inspect:null});return}Kt.inspectPanelKey=nt.inspect,Kt.overlay=new z.L({panelRef:cn.getRef()})}else Ct&&(Kt.inspectPanelKey=void 0,Kt.overlay=void 0);if(typeof nt.viewPanel=="string"){const cn=(0,_.ds)(this._scene,nt.viewPanel);if(!cn){if((0,_.RB)(nt.viewPanel)){this._handleViewRepeatClone(nt.viewPanel);return}r.Z.emit(k.SI.alertError,["Panel not found"]),a.E1.partial({viewPanel:null});return}Kt.viewPanelScene=new De({panelRef:cn.getRef()})}else kt&&(Kt.viewPanelScene=void 0);Object.keys(Kt).length>0&&this._scene.setState(Kt)}_handleViewRepeatClone(nt){this._eventSub||(this._eventSub=this._scene.subscribeToEvent(We.P,()=>{const Ct=(0,_.ds)(this._scene,nt);Ct&&(this._eventSub?.unsubscribe(),this._scene.setState({viewPanelScene:new De({panelRef:Ct.getRef()})}))}))}}var ze=e(48542),_e=e.n(ze);class qe{constructor(){this._binds=[]}addBinding(nt){_e().bind(nt.key,Ct=>{Ct.preventDefault(),Ct.stopPropagation(),Ct.returnValue=!1,nt.onTrigger()},"keydown"),this._binds.push(nt)}removeAll(){this._binds.forEach(nt=>{_e().unbind(nt.key,nt.type)}),this._binds=[]}}function at(ct){const nt=new qe;return nt.addBinding({key:"v",onTrigger:lt(ct,Ct=>{ct.state.viewPanelScene||a.E1.push((0,G.uO)(Ct))})}),nt.addBinding({key:"e",onTrigger:lt(ct,async Ct=>{const kt=Ct.getRoot();if(kt instanceof st){const Jt=(0,_.Jb)(Ct);a.E1.push((0,G.$9)({uid:kt.state.uid,subPath:`/panel-edit/${Jt}`,currentQueryParams:location.search}))}})}),nt.addBinding({key:"p s",onTrigger:lt(ct,async Ct=>{ct.showModal(new P.V({panelRef:Ct.getRef(),dashboardRef:ct.getRef()}))})}),nt.addBinding({key:"i",onTrigger:lt(ct,async Ct=>{a.E1.push((0,G.qx)(Ct))})}),nt.addBinding({key:"p x",onTrigger:lt(ct,async Ct=>{const kt=await(0,G.el)(Ct);kt&&a.E1.push(kt)})}),nt.addBinding({key:"p l",onTrigger:lt(ct,ft)}),nt.addBinding({key:"d r",onTrigger:()=>i.ep.getTimeRange(ct).onRefresh()}),nt.addBinding({key:"t z",onTrigger:()=>{wt(ct)}}),nt.addBinding({key:"ctrl+z",onTrigger:()=>{wt(ct)}}),nt.addBinding({key:"t left",onTrigger:()=>{zt(ct,"left")}}),nt.addBinding({key:"t right",onTrigger:()=>{zt(ct,"right")}}),nt.addBinding({key:"d s",onTrigger:ct.onOpenSettings}),()=>nt.removeAll}function lt(ct,nt){return()=>{const Ct=document.querySelectorAll(":hover");for(let kt=Ct.length-1;kt>0;kt--){const Jt=Ct[kt];if(Jt instanceof HTMLElement&&Jt.dataset?.vizPanelKey){const tn=Jt.dataset?.vizPanelKey,Kt=i.ep.findObject(ct,cn=>cn.state.key===tn);if(Kt&&Kt instanceof i.Z){nt(Kt);return}}}}}function ft(ct){const nt=ct.state.options;yt(nt)&&typeof nt.legend.showLegend=="boolean"&&ct.onOptionsChange({legend:{showLegend:!nt.legend.showLegend}})}function yt(ct){return ct!=null&&typeof ct=="object"&&"legend"in ct}function wt(ct){Le.Y.getTimePicker(ct)?.onZoom()}function zt(ct,nt){const Ct=Le.Y.getTimePicker(ct);Ct&&(nt==="left"&&Ct.onMoveBackward(),nt==="right"&&Ct.onMoveForward())}const $t=["title","description","tags","editable","graphTooltip"],Ie=class extends i.wx{constructor(ct){super({title:"Dashboard",meta:{},editable:!0,body:ct.body??new i.QY({children:[]}),...ct}),this._urlSync=new et(this),this._variableDependency=new Mt,this.onEnterEditMode=()=>{this._initialState=i.vp.cloneSceneObjectState(this.state),this._initialUrlState=a.E1.getLocation(),this.setState({isEditing:!0}),this.state.body instanceof i.Qh&&(this.state.body.setState({isDraggable:!0,isResizable:!0}),(0,_.pi)(this.state.body,!0)),this.startTrackingChanges()},this.onDiscard=()=>{this.stopTrackingChanges(),this.stopUrlSync(),a.E1.replace({pathname:this._initialUrlState?.pathname,search:this._initialUrlState?.search}),this.setState({...this._initialState,isEditing:!1}),this.startUrlSync(),this.state.body instanceof i.Qh&&(this.state.body.setState({isDraggable:!1,isResizable:!1}),(0,_.pi)(this.state.body,!0))},this.onSave=()=>{this.setState({overlay:new U({dashboardRef:this.getRef()})})},this.onOpenSettings=()=>{a.E1.partial({editview:"settings"})},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){window.__grafanaSceneContext=this,this.state.isEditing&&this.startTrackingChanges();const ct=at(this),nt=new N.f(this);return(0,g.h4)().setCurrent(nt),()=>{window.__grafanaSceneContext=void 0,ct(),this.stopTrackingChanges(),this.stopUrlSync(),nt.destroy()}}startUrlSync(){(0,i.oo)().initSync(this)}stopUrlSync(){(0,i.oo)().cleanUp(this)}getPageNav(ct,nt){const{meta:Ct,viewPanelScene:kt}=this.state;let Jt={text:this.state.title,url:(0,G.$9)({uid:this.state.uid,currentQueryParams:ct.search,updateQuery:{viewPanel:null,inspect:null,editview:null}})};const{folderUid:tn}=Ct;if(tn){const Kt=(0,o.ht)(nt,`folder-dashboards-${tn}`).main;Kt.id!=="not-found"&&(Jt={...Jt,parentItem:Kt})}return kt&&(Jt={text:"View panel",parentItem:Jt}),Jt}getBodyToRender(){return this.state.viewPanelScene??this.state.body}startTrackingChanges(){this._changeTrackerSub=this.subscribeToEvent(i.QI,ct=>{ct.payload.changedObject instanceof i.vf&&Object.prototype.hasOwnProperty.call(ct.payload.partialUpdate,"intervals")&&this.setIsDirty(),ct.payload.changedObject instanceof i.bO&&this.setIsDirty(),ct.payload.changedObject instanceof Ie&&Object.keys(ct.payload.partialUpdate).some(nt=>$t.includes(nt))&&this.setIsDirty(),ct.payload.changedObject instanceof i.gg&&this.setIsDirty(),ct.payload.changedObject instanceof K.n&&Object.prototype.hasOwnProperty.call(ct.payload.partialUpdate,"hideTimeControls")&&this.setIsDirty()})}setIsDirty(){this.state.isDirty||this.setState({isDirty:!0})}stopTrackingChanges(){this._changeTrackerSub?.unsubscribe()}getInitialState(){return this._initialState}showModal(ct){this.setState({overlay:ct})}closeModal(){this.setState({overlay:void 0})}async onStarDashboard(){const{meta:ct,uid:nt}=this.state;if(nt)try{const Ct=await(0,g.h4)().starDashboard(nt,!!ct.isStarred);this.setState({meta:{...ct,isStarred:Ct}})}catch(Ct){console.error("Failed to star dashboard",Ct)}}enrichDataRequest(ct){const nt=(0,_.Qx)(ct);let Ct=0;return nt&&nt.state.key&&((0,_.RB)(nt.state.key)?Ct=w(nt?.state.key):Ct=(0,_.Jb)(nt)),{app:n.zj.Dashboard,dashboardUID:this.state.uid,panelId:Ct}}canEditDashboard(){const{meta:ct}=this.state;return!!(ct.canEdit||ct.canMakeEditable)}};let st=Ie;st.listenToChangesInProps=$t,st.Component=R;class Mt{constructor(){this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(){return!1}variableUpdatesCompleted(nt){nt.size>0&&r.Z.publish(new u.x9({refreshAll:!0,panelIds:[]}))}}},79004:(Q,A,e)=>{"use strict";e.d(A,{X:()=>u});var n=e(31733),a=e(77121),i=e(25353),r=e(39501),o=e(19527),g=e(18663);class u extends a.wx{constructor({uid:d,title:f,key:m,name:v}){super({uid:d,title:f,key:m,name:v,panel:new a.Z({title:f,menu:new a.e0({$behaviors:[g.F]})})}),this._onActivate=()=>{this.loadLibraryPanelFromPanelModel()},this.addActivationHandler(this._onActivate)}async loadLibraryPanelFromPanelModel(){const d=this.state.panel;try{const f=await(0,r.Mh)(this.state.uid,!0),m=new i.r(f.model);d.setState({options:m.options??{},fieldConfig:m.fieldConfig,pluginVersion:m.pluginVersion,displayMode:m.transparent?"transparent":void 0,description:m.description,$data:(0,o.R)(m)})}catch{d.setState({_pluginLoadError:"Unable to load library panel: "+this.state.uid})}this.setState({panel:d})}}u.Component=c;function c({model:l}){const{panel:d}=l.useState();return d?n.createElement(d.Component,{model:d}):null}},18663:(Q,A,e)=>{"use strict";e.d(A,{S:()=>S,F:()=>L});var n=e(90384),a=e(88822),i=e(19690),r=e(85498),o=e(33500),g=e(77121),u=e(53166),c=e(31285),l=e(71623),d=e(89154),f=e(66261),m=e(11137),v=e(44653),E=e(31733),p=e(59899),h=e(98355),s=e(99214),y=e(54431);class D extends g.wx{constructor(w){super(w),this.onOpenTrail=()=>{(0,s.n)().goToUrlForTrail(this.trail.clone({embedded:!1}))},this.onClose=()=>{(0,v.Pm)(this).closeModal()},this.trail=P(w),this.trail.addActivationHandler(()=>{this.trail.subscribeToEvent(y.od,this.onOpenTrail)})}}D.Component=C;function C({model:N}){return E.createElement(p.d,{title:"Data trail",onClose:N.onClose,size:"lg"},E.createElement("div",{style:{display:"flex",height:"100%"}},E.createElement(N.trail.Component,{model:N.trail})))}function P({query:N,dsRef:w,timeRange:G}){const _=N.labels.map(k=>({key:k.label,value:k.value,operator:k.op})),K=(0,f.F)().getInstanceSettings(w);return new h.j({$timeRange:G,metric:N.metric,initialDS:K?.name,initialFilters:_,embedded:!0})}function b(N,w,G){const _=(0,v.R)(w);if(!_)return;const K=(0,f.F)().getInstanceSettings(_.state.datasource);if(!K||K.meta.id!=="prometheus"||_.state.queries.length>1)return;const k=_.state.queries[0],z=(0,m._)(k.expr);z.errors.length>0||G.push({text:"Data trail",iconClassName:"code-branch",onClick:()=>{N.showModal(new D({query:z.query,dsRef:K,timeRange:N.state.$timeRange.clone()}))},shortcut:"p s"})}var T=e(67894),O=e(92762),R=e(17188),I=e(23709),M=e(79004),x=e(15265);function L(N){(async()=>{const G=N.parent,_=G.getPlugin(),K=i.E1.getLocation(),k=[],z=[],W=[],Z=(0,v.Jb)(G),H=G.getRoot();H instanceof I.WI&&(k.push({text:(0,u.t)("panel.header-menu.view","View"),iconClassName:"eye",shortcut:"v",onClick:()=>O.a.panelMenuItemClicked("view"),href:(0,R.uO)(G)}),H.canEditDashboard()&&k.push({text:(0,u.t)("panel.header-menu.edit","Edit"),iconClassName:"eye",shortcut:"e",onClick:()=>()=>O.a.panelMenuItemClicked("edit"),href:(0,R.$9)({uid:H.state.uid,subPath:`/panel-edit/${Z}`,currentQueryParams:K.search})}),k.push({text:(0,u.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:()=>{O.a.panelMenuItemClicked("share"),H.showModal(new T.V({panelRef:G.getRef(),dashboardRef:H.getRef()}))},shortcut:"p s"}),G.parent instanceof M.X||z.push({text:(0,u.t)("panel.header-menu.create-library-panel","Create library panel"),iconClassName:"share-alt",onClick:()=>{O.a.panelMenuItemClicked("createLibraryPanel"),H.showModal(new T.V({panelRef:G.getRef(),dashboardRef:H.getRef(),activeTab:"Library panel"}))}}),r.config.featureToggles.datatrails&&b(H,G,k));const X=await(0,R.el)(G);if(X&&k.push({text:(0,u.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",shortcut:"p x",onClick:()=>O.a.panelMenuItemClicked("explore"),href:X}),_&&!_.meta.skipDataQuery&&(W.push({text:(0,u.t)("panel.header-menu.inspect-data","Data"),href:(0,R.qx)(G,c.q.Data),onClick:Y=>{Y.preventDefault(),i.E1.partial({inspect:G.state.key,inspectTab:c.q.Data}),O.a.panelMenuInspectClicked(c.q.Data)}}),H instanceof I.WI&&H.state.meta.canEdit&&W.push({text:(0,u.t)("panel.header-menu.query","Query"),href:(0,R.qx)(G,c.q.Query),onClick:Y=>{Y.preventDefault(),i.E1.partial({inspect:G.state.key,inspectTab:c.q.Query}),O.a.panelMenuInspectClicked(c.q.Query)}})),W.push({text:(0,u.t)("panel.header-menu.inspect-json","Panel JSON"),href:(0,R.qx)(G,c.q.JSON),onClick:Y=>{Y.preventDefault(),i.E1.partial({inspect:G.state.key,inspectTab:c.q.JSON}),O.a.panelMenuInspectClicked(c.q.JSON)}}),k.push({text:(0,u.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",shortcut:"i",href:(0,R.qx)(G),onClick:Y=>{Y.isDefaultPrevented()||(i.E1.partial({inspect:G.state.key,inspectTab:c.q.Data}),O.a.panelMenuInspectClicked(c.q.Data))},subMenu:W.length>0?W:void 0}),H instanceof I.WI){const{extensions:Y}=(0,o.dj)({extensionPointId:n.y.DashboardPanelMenu,context:U(G,H),limitPerPlugin:3});Y.length>0&&!H.state.isEditing&&k.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:(0,d.cS)(Y)})}z.length&&k.push({type:"submenu",text:(0,u.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:z,onClick:Y=>{Y.preventDefault()}}),N.setState({items:k})})()}function S(N){return w=>{const G=(z,W)=>g.ep.interpolate(w,z,W),_=(0,l.H)(N,G);if(!_)return;const K=_&&_.getLinks(G),k=K.map(z=>({...z,onClick:(W,Z)=>{O.a.panelLinkClicked({has_multiple_links:K.length>1}),z.onClick?.(W,Z)}}));w.setState({links:k})}}function U(N,w){const G=g.ep.getTimeRange(N);let _=N.state.$data,K=[];const k=(0,v.Jb)(N);_ instanceof g.bM&&(_=_.state.$data),_ instanceof g.uq&&(K=_.state.queries),_ instanceof x.K&&(K=[_.state.query]);let z={};if(N.state.$variables&&N.state.$variables.state.variables.forEach(W=>{W instanceof g.I2&&(z={...z,[W.state.name]:{value:W.getValue(),text:W.getValueText()}})}),N.parent?.parent instanceof g.I_){const W=N.parent.parent;W.state.$variables&&W.state.$variables.state.variables.forEach(Z=>{Z instanceof g.I2&&(z={...z,[Z.state.name]:{value:Z.getValue(),text:Z.getValueText()}})})}return{id:k,pluginId:N.state.pluginId,title:N.state.title,timeRange:G.state.value.raw,timeZone:(0,a.Z)({timeZone:G.getTimeZone()}),dashboard:{uid:w.state.uid,title:w.state.title,tags:w.state.tags||[]},targets:K,scopedVars:z,data:_?.state.data}}},67245:(Q,A,e)=>{"use strict";e.d(A,{o:()=>c});var n=e(76932),a=e(31733),i=e(85498),r=e(77121),o=e(21279),g=e(44653),u=e(58646);class c extends r.wx{constructor(m){super(m),this._variableDependency=new r.JY(this,{variableNames:[this.state.variableName],onVariableUpdatesCompleted:this._onVariableChanged.bind(this)}),this._isWaitingForVariables=!1,this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this._subs.add(this.subscribeToState((m,v)=>this._handleGridResize(m,v))),r.ep.hasVariableDependencyInLoadingState(this)?this._isWaitingForVariables=!0:this._performRepeat()}_onVariableChanged(m,v){if(v){this._performRepeat();return}this._isWaitingForVariables&&!r.ep.hasVariableDependencyInLoadingState(this)&&(this._isWaitingForVariables=!1,this._performRepeat())}_handleGridResize(m,v){const E=this.state.repeatedPanels?.length??1,p={};if(m.height!==v.height){if(this.getRepeatDirection()==="v"){const h=Math.ceil(m.height/E);p.itemHeight=h}else{const h=Math.ceil(E/this.getMaxPerRow());p.itemHeight=Math.ceil(m.height/h)}p.itemHeight!==this.state.itemHeight&&this.setState(p)}}_performRepeat(){const m=r.ep.lookupVariable(this.state.variableName,this);if(!m){console.error("SceneGridItemRepeater: Variable not found");return}if(!(m instanceof r.mW)){console.error("PanelRepeaterGridItem: Variable is not a MultiValueVariable");return}const v=this.state.source,{values:E,texts:p}=(0,g.CR)(m),h=[];for(let b=0;b<E.length;b++){const T=v.clone({$variables:new r.hT({variables:[new r.I2({name:m.state.name,value:E[b],text:String(p[b])})]}),key:`${v.state.key}-clone-${b}`});h.push(T)}const s=this.getRepeatDirection(),y={repeatedPanels:h},D=this.state.itemHeight??10,C=this.state.height,P=this.getMaxPerRow();if(s==="h"){const b=Math.ceil(h.length/P);y.height=b*D}else y.height=h.length*D;if(this.setState(y),C!==this.state.height){const b=r.ep.getLayout(this);b instanceof r.Qh&&b.forceRender()}this.publishEvent(new u.P({source:this}),!0)}getMaxPerRow(){return this.state.maxPerRow??4}getRepeatDirection(){return this.state.repeatDirection==="v"?"v":"h"}getClassName(){return"panel-repeater-grid-item"}}c.Component=({model:f})=>{const{repeatedPanels:m,itemHeight:v}=f.useState(),E=m?.length??0,p=l(f.getRepeatDirection(),E,f.getMaxPerRow(),v??10);return m?a.createElement("div",{className:p},m.map(h=>a.createElement("div",{className:d,key:h.state.key},a.createElement(h.Component,{model:h,key:h.state.key})))):null};function l(f,m,v,E){return(0,a.useMemo)(()=>{const p=i.config.theme2,h=E*o.K3*m+(m-1)*o.hD;if(f==="h"){const s=Math.ceil(m/v),y=Math.ceil(m/s);return(0,n.css)({display:"grid",height:"100%",width:"100%",gridTemplateColumns:`repeat(${y}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`,gridColumnGap:p.spacing(1),gridRowGap:p.spacing(1),[p.breakpoints.down("md")]:{display:"flex",flexDirection:"column",height:h}})}return(0,n.css)({display:"flex",height:"100%",width:"100%",flexDirection:"column",gap:p.spacing(1),[p.breakpoints.down("md")]:{height:h}})},[f,m,v,E])}const d=(0,n.css)({display:"flex",flexGrow:1,position:"relative"})},12676:(Q,A,e)=>{"use strict";e.d(A,{r:()=>m});var n=e(76932),a=e(31733),i=e(5333),r=e(17201),o=e(89026),g=e(77121),u=e(76067),c=e(58037),l=e(20848),d=e(48011),f=e(49311);class m extends g.qC{constructor(h={}){super({...h,from:"now-6h",to:"now",value:(0,i.JK)()}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){this._subs.add(this.subscribeToState((h,s)=>{if(h.timeFrom!==s.timeFrom||h.timeShift!==s.timeShift){const{timeInfo:y}=this.getTimeOverride(this.getAncestorTimeRange().state.value);this.setState({timeInfo:y})}}))}ancestorTimeRangeChanged(h){const s=this.getTimeOverride(h.value);this.setState({value:s.timeRange,timeInfo:s.timeInfo})}getTimeOverride(h){const{timeFrom:s,timeShift:y}=this.state,D={timeInfo:"",timeRange:h};if(s){const C=g.ep.interpolate(this,this.state.timeFrom),P=r.describeTextRange(C);if(P.invalid)return D.timeInfo="invalid time override",D;r.isRelativeTimeRange(h.raw)&&(D.timeInfo=P.display,D.timeRange={from:o.parse(P.from),to:o.parse(P.to),raw:{from:P.from,to:P.to}})}if(y){const C=g.ep.interpolate(this,this.state.timeShift);if(r.describeTextRange(C).invalid)return D.timeInfo="invalid timeshift",D;const b="-"+C;D.timeInfo+=" timeshift "+b;const T=o.parseDateMath(b,D.timeRange.from,!1),O=o.parseDateMath(b,D.timeRange.to,!0);D.timeRange={from:T,to:O,raw:{from:T,to:O}}}return D}}m.Component=v;function v({model:p}){const{timeInfo:h,hideTimeOverride:s}=p.useState(),y=(0,u.wW)(E);return!h||s?null:a.createElement(c.u,{content:a.createElement(l.IF,{timeRange:p.state.value,timeZone:p.getTimeZone()})},a.createElement(d.fm.TitleItem,{className:y.timeshift},a.createElement(f.J,{name:"clock-nine",size:"sm"})," ",h))}const E=p=>({timeshift:(0,n.css)({color:p.colors.text.link,gap:p.spacing(.5),whiteSpace:"nowrap"})})},37261:(Q,A,e)=>{"use strict";e.d(A,{a:()=>r});var n=e(77121),a=e(44653),i=e(58646);class r extends n.wx{constructor(d){super(d),this._variableDependency=new n.JY(this,{variableNames:[this.state.variableName],onVariableUpdatesCompleted:this._onVariableChanged.bind(this)}),this._isWaitingForVariables=!1,this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){n.ep.hasVariableDependencyInLoadingState(this)?this._isWaitingForVariables=!0:this._performRepeat()}_onVariableChanged(d,f){if(f){this._performRepeat();return}this._isWaitingForVariables&&!n.ep.hasVariableDependencyInLoadingState(this)&&(this._isWaitingForVariables=!1,this._performRepeat())}_performRepeat(){const d=n.ep.lookupVariable(this.state.variableName,this.parent?.parent);if(!d){console.error("RepeatedRowBehavior: Variable not found");return}if(!(d instanceof n.mW)){console.error("RepeatedRowBehavior: Variable is not a MultiValueVariable");return}if(!(this.parent instanceof n.I_)){console.error("RepeatedRowBehavior: Parent is not a SceneGridRow");return}const f=n.ep.getLayout(this);if(!(f instanceof n.Qh)){console.error("RepeatedRowBehavior: Layout is not a SceneGridLayout");return}const m=this.parent,{values:v,texts:E}=(0,a.CR)(d),p=[],h=o(this.state.sources);let s=0;for(let y=0;y<v.length;y++){const D=[];for(const P of this.state.sources){const T=(P.state.y??0)+(h+1)*y,O=P.clone({key:`${P.state.key}-clone-${y}`,y:T});c(O,y),D.push(O),s<T+O.state.height&&(s=T+O.state.height)}const C=this.getRowClone(m,y,v[y],E[y],h,D);p.push(C)}g(f,p,s,m),this.publishEvent(new i.P({source:this}),!0)}getRowClone(d,f,m,v,E,p){if(f===0)return d.setState({$variables:new n.hT({variables:[new n.I2({name:this.state.variableName,value:m,text:String(v)})]}),children:p}),d;const h=d.state.y??0;return d.clone({key:`${d.state.key}-clone-${f}`,$variables:new n.hT({variables:[new n.I2({name:this.state.variableName,value:m,text:String(v)})]}),$behaviors:[],children:p,y:h+E*f+f})}}function o(l){let d=0,f=Number.MAX_VALUE;for(const m of l)m.state.y+m.state.height>d&&(d=m.state.y+m.state.height),m.state.y<f&&(f=m.state.y);return d-f}function g(l,d,f,m){const v=u(l,m),E=v.indexOf(m);if(E===-1)throw new Error("RowRepeaterBehavior: Parent row not found in layout children");const p=[...v.slice(0,E),...d,...v.slice(E+1)];if(v.length>E+1){const h=v.slice(E+1),s=h[0].state.y,y=f-s;for(const D of h)D.state.y<f&&D.setState({y:D.state.y+y})}l.setState({children:p})}function u(l,d){return l.state.children.filter(f=>!f.state.key?.startsWith(`${d.state.key}-clone-`))}function c(l,d){l.forEachChild(f=>{f.setState({key:`${f.state.key}-row-${d}`}),c(f,d)})}},15265:(Q,A,e)=>{"use strict";e.d(A,{K:()=>g,T:()=>u});var n=e(37153),a=e(20298),i=e(5333),r=e(77121),o=e(44653);class g extends r.wx{constructor(l){super(l),this._results=new n.t,this._passContainerWidth=!1,this.addActivationHandler(()=>(this._subscribeToSource(),()=>{this._querySub&&this._querySub.unsubscribe(),this._sourceDataDeactivationHandler&&this._sourceDataDeactivationHandler()}))}getResultsStream(){return this._results}_subscribeToSource(){const{query:l}=this.state;if(this._querySub&&this._querySub.unsubscribe(),this.state.$data)this._sourceProvider=this.state.$data,this._passContainerWidth=!0;else{if(!l.panelId)return;const d=(0,o.Rv)(l.panelId),f=u(this.getRoot(),m=>m.state.key===d);if(!f){console.log("Shared dashboard query refers to a panel that does not exist in the scene");return}if(this._sourceProvider=f.state.$data,!this._sourceProvider){console.log("No source data found for shared dashboard query");return}}if(this._sourceProvider.isActive||(this._passContainerWidth=!0),this._sourceDataDeactivationHandler=this._sourceProvider.activate(),this._sourceProvider instanceof r.bM&&!l.withTransforms){if(!this._sourceProvider.state.$data)throw new Error("No source inner query runner found in data transformer");this._sourceProvider=this._sourceProvider.state.$data}this._querySub=this._sourceProvider.subscribeToState(d=>{this._results.next({origin:this,data:d.data||{state:a.Gu.Done,series:[],timeRange:(0,i.JK)()}}),this.setState({data:d.data})}),this.setState({data:this._sourceProvider.state.data})}setContainerWidth(l){this._passContainerWidth&&this._sourceProvider&&this._sourceProvider.setContainerWidth?.(l)}isDataReadyToDisplay(){return this._sourceProvider&&this._sourceProvider.isDataReadyToDisplay?this._sourceProvider.isDataReadyToDisplay():!1}}function u(c,l){if(l(c))return c;let d=null;return c.forEachChild(f=>{let m=u(f,l);m&&(d=m)}),d}},58646:(Q,A,e)=>{"use strict";e.d(A,{P:()=>a});var n=e(63121);class a extends n.R{}a.type="dashboard-repeats-processed"},58440:(Q,A,e)=>{"use strict";e.d(A,{q:()=>o});var n=e(77121),a=e(7205),i=e(27546),r=e(44653);function o(g){const u=[];for(const c of g.state.variables){const l={name:c.state.name,label:c.state.label,description:c.state.description??void 0,skipUrlSync:!!c.state.skipUrlSync,hide:c.state.hide||a.bU.dontHide,type:c.state.type};if(n.vp.isQueryVariable(c))u.push({...l,current:{value:c.state.value,text:c.state.text},options:[],query:c.state.query,definition:c.state.definition,datasource:c.state.datasource,sort:c.state.sort,refresh:c.state.refresh,regex:c.state.regex,allValue:c.state.allValue,includeAll:c.state.includeAll,multi:c.state.isMulti,skipUrlSync:c.state.skipUrlSync,hide:c.state.hide||a.bU.dontHide});else if(n.vp.isCustomVariable(c))u.push({...l,current:{text:c.state.value,value:c.state.value},options:[],query:c.state.query,multi:c.state.isMulti,allValue:c.state.allValue,includeAll:c.state.includeAll});else if(n.vp.isDataSourceVariable(c))u.push({...l,current:{value:c.state.value,text:c.state.text},options:[],regex:c.state.regex,refresh:i.Bd.onDashboardLoad,query:c.state.pluginId,multi:c.state.isMulti,allValue:c.state.allValue,includeAll:c.state.includeAll});else if(n.vp.isConstantVariable(c))u.push({...l,current:{value:c.state.value,text:c.state.value},query:c.state.value,hide:a.bU.hideVariable});else if(n.vp.isIntervalVariable(c)){const d=(0,r.U)(c.state.intervals);u.push({...l,current:{text:c.state.value,value:c.state.value},query:d,hide:a.bU.hideVariable,refresh:c.state.refresh,auto:c.state.autoEnabled,auto_min:c.state.autoMinInterval,auto_count:c.state.autoStepCount})}else if(n.vp.isTextBoxVariable(c))u.push({...l,current:{text:c.state.value,value:c.state.value},query:c.state.value,hide:a.bU.hideVariable});else throw new Error("Unsupported variable type")}for(const c of u)c.hide===a.bU.dontHide&&delete c.hide,c.skipUrlSync||delete c.skipUrlSync,c.label===""&&delete c.label,c.multi||delete c.multi,c.sort===i.$U.disabled&&delete c.sort;return u}},12458:(Q,A,e)=>{"use strict";e.d(A,{Ee:()=>Le,Yz:()=>Pe,Td:()=>ve});var n=e(85498),a=e(77121),i=e(25353),r=e(50609),o=e(1797),g=e(5333),u=e(47206),c=e(71199),l=e(76875);class d extends a.o6.y{async resolveDataSource(Re){return n.config.publicDashboardAccessToken?new l.k:super.resolveDataSource(Re)}processEvents(Re,Ae){if(n.config.publicDashboardAccessToken){const Oe={series:[],timeRange:(0,g.JK)(),state:Ae.state},$e=(0,u.P)(Ae.events);return $e.meta={...$e.meta,dataTopic:c.w5.Annotations},Oe.annotations=[$e],Oe}else return super.processEvents(Re,Ae)}}var f=e(34134),m=e(31733),v=e(77901),E=e(21568),p=e(58037),h=e(93466),s=e(97919),y=e(95639),D=e(44653);class C extends a.wx{}C.Component=P;function P({model:le}){const{links:Re,uid:Ae}=(0,D.Pm)(le).useState();return!Re||!Ae?null:m.createElement(m.Fragment,null,Re.map((Oe,$e)=>{const Ye=(0,y.Bq)().getAnchorInfo(Oe),Ne=`${Oe.title}-$${$e}`;if(Oe.type==="dashboards")return m.createElement(s.Ul,{key:Ne,link:Oe,linkInfo:Ye,dashboardUID:Ae});const je=h.xy[Oe.icon],ut=m.createElement(s.MM,{icon:je,href:(0,v.Nm)(Ye.href),target:Oe.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":E.wl.components.DashboardLinks.link},Ye.title);return m.createElement("div",{key:Ne,"data-testid":E.wl.components.DashboardLinks.container},Oe.tooltip?m.createElement(p.u,{content:Ye.tooltip},ut):ut)}))}class b{constructor(Re,Ae){this._sceneObject=Ae,this.state={name:Re,type:"dashboard_macro"}}getValue(Re){const Ae=(0,D.Pm)(this._sceneObject);switch(Re){case"uid":return Ae.state.uid||"";case"title":case"name":case"id":default:return Ae.state.title}}getValueText(){return""}}function T(){const le=a.vp.registerVariableMacro("__dashboard",b);return()=>le()}var O=e(23709),R=e(79004),I=e(67669),M=e(73351),x=e(63424);class L extends a.wx{}L.Component=S;function S({model:le}){const{menu:Re}=le.useState();return m.createElement(I.L,{overlay:()=>m.createElement(Re.Component,{model:Re,key:Re.state.key})},m.createElement(M.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links"}))}class U extends a.wx{}U.Component=N;function N({model:le}){const{links:Re}=le.useState();return Re?m.createElement(x.v,null,Re?.map((Ae,Oe)=>m.createElement(x.v.Item,{key:Oe,label:Ae.title,url:Ae.href,target:Ae.target,onClick:Ae.onClick}))):null}var w=e(18663),G=e(31365);class _ extends a.wx{constructor(){super({}),this.onActivate=()=>{const Re=this.parent;if(!Re||!(Re instanceof a.Z))throw new Error("PanelNotices can be used only as title items for VizPanel")},this.addActivationHandler(this.onActivate)}getPanel(){const Re=this.parent;return Re&&Re instanceof a.Z?Re:null}}_.Component=K;function K({model:le}){const Re=le.getPanel(),Oe=a.ep.getData(le).useState();if(!Re)return null;const $e=(0,D.Jb)(Re);return Oe.data?.series?m.createElement(G.f,{frames:Oe.data?.series,panelId:$e}):null}var k=e(67245),z=e(12676),W=e(37261),Z=e(44343),H=e(93670),X=e(90642);function Y(le,Re){Re.app=Z.zj.Dashboard,Re.canAddAnnotations=()=>{const Ae=(0,D.Pm)(le);return!ne(Ae)||!Ae.canEditDashboard()?!1:!!Ae.state.meta.annotationsPermissions?.dashboard.canAdd},Re.canEditAnnotations=Ae=>{const Oe=(0,D.Pm)(le);return Oe.canEditDashboard()?Ae?!!Oe.state.meta.annotationsPermissions?.dashboard.canEdit:!!Oe.state.meta.annotationsPermissions?.organization.canEdit:!1},Re.canDeleteAnnotations=Ae=>{const Oe=(0,D.Pm)(le);return Oe.canEditDashboard()?Ae?!!Oe.state.meta.annotationsPermissions?.dashboard.canDelete:!!Oe.state.meta.annotationsPermissions?.organization.canDelete:!1},Re.onAnnotationCreate=async Ae=>{const Oe=(0,D.Pm)(le),$e=Ae.from!==Ae.to,Ye={dashboardUID:Oe.state.uid,panelId:(0,D.Jb)(le),isRegion:$e,time:Ae.from,timeEnd:$e?Ae.to:0,tags:Ae.tags,text:Ae.description};await(0,X.xD)(Ye),se(Oe),Re.eventBus.publish(new H.n1(Ye))},Re.onAnnotationUpdate=async Ae=>{const Oe=(0,D.Pm)(le),$e=Ae.from!==Ae.to,Ye={id:Ae.id,dashboardUID:Oe.state.uid,panelId:(0,D.Jb)(le),isRegion:$e,time:Ae.from,timeEnd:$e?Ae.to:0,tags:Ae.tags,text:Ae.description};await(0,X._E)(Ye),se(Oe),Re.eventBus.publish(new H.n1(Ye))},Re.onAnnotationDelete=async Ae=>{await(0,X.Dl)({id:Ae}),se((0,D.Pm)(le)),Re.eventBus.publish(new H.n1({id:Ae}))},Re.onAddAdHocFilter=Ae=>{const Oe=(0,D.Pm)(le),$e=(0,D.R)(le);if(!$e)return;const Ye=re(Oe,$e.state.datasource);ge(Ye,Ae)},Re.onUpdateData=Ae=>Promise.resolve(!0),Re.instanceState={legacyPanelId:(0,D.Jb)(le)}}function ne(le){if(le.state.$data instanceof a.mv){for(const Re of le.state.$data.state.layers)if(Re instanceof a.o6.y&&Re.state.isEnabled&&Re.state.query.builtIn)return Re}}function se(le){const Re=ne(le);Re&&Re.runLayer()}function re(le,Re){const Ae=le.state.controls??[];for(const $e of Ae)if($e instanceof a.zo&&($e.state.datasource===Re||$e.state.datasource?.uid===Re?.uid))return $e;const Oe=new a.zo({datasource:Re});return le.setState({controls:[Ae[0],Oe,...Ae.slice(1)]}),Oe}function ge(le,Re){for(const Ae of le.state.filters)if(Ae.key===Re.key){le.setState({filters:le.state.filters.map(Oe=>Oe.key===Re.key?Re:Oe)});return}le.setState({filters:[...le.state.filters,Re]})}var q=e(19527),me=e(92762),oe=e(30937);function fe(le){return function(Ae,Oe){if(Oe.angularPanelCtrl){Ae.options={angularOptions:le.getOptionsToRemember()};return}if(le.autoMigrateFrom){const $e=oe.G7[le.autoMigrateFrom]!=null,Ye=le.getOptionsToRemember(),Ne=le.autoMigrateFrom;if(Oe.onPanelTypeChanged){const je=$e?{angular:Ye}:Ye.options;Object.assign(Ae.options,Oe.onPanelTypeChanged(Ae,Ne,je,Ae.fieldConfig))}}}}function ve(le){const Re=new i.f(le.dashboard,le.meta,{autoMigrateOldPanels:!1});return Pe(Re)}function pe(le){const Re=[];let Ae=null,Oe=[];for(const $e of le)if($e.type==="row")Ae?Ae.id!==$e.id&&(Re.push(Me(Ae,Oe)),Ae=$e,Oe=[]):$e.collapsed?Re.push(Me($e,[])):Ae=$e;else if($e.libraryPanel?.uid&&!("model"in $e.libraryPanel)){const Ye=he($e);Ye&&Re.push(Ye)}else{const Ye=Le($e);Ae?Oe.push(Ye):Re.push(Ye)}return Ae&&Re.push(Me(Ae,Oe)),Re}function Me(le,Re){le.collapsed&&le.panels&&(Re=le.panels.map($e=>($e instanceof i.r||($e=new i.r($e)),Le($e))));let Ae,Oe=Re;return le.repeat&&(Oe=[],Ae=[new W.a({variableName:le.repeat,sources:Re})]),new a.I_({key:(0,D.Rv)(le.id),title:le.title,y:le.gridPos.y,isCollapsed:le.collapsed,children:Oe,$behaviors:Ae})}function Pe(le){let Re,Ae=[],Oe=[];if(le.templating?.list?.length){const Ne=le.templating.list.map(je=>{try{return ke(je)?(Oe.push(new a.zo({name:je.name,datasource:je.datasource,filters:je.filters??[],baseFilters:je.baseFilters??[]})),null):Ee(je)}catch(ut){return console.error(ut),null}}).filter(je=>!!je);Re=new a.hT({variables:Ne})}else Re=new a.hT({variables:[]});le.annotations?.list?.length&&(Ae=le.annotations?.list.map(Ne=>new d({key:`annnotations-${Ne.name}`,query:Ne,name:Ne.name,isEnabled:!!Ne.enable,isHidden:!!Ne.hide})));let $e=n.config.unifiedAlertingEnabled;return $e||le.panels.find(Ne=>!!Ne.alert)&&($e=!0),$e&&Ae.push(new o.u({key:"alert-states",name:"Alert States"})),new O.WI({title:le.title,tags:le.tags||[],links:le.links||[],uid:le.uid,id:le.id,description:le.description,editable:le.editable,meta:le.meta,body:new a.Qh({isLazy:!0,children:pe(le.panels)}),$timeRange:new a.gg({from:le.time.from,to:le.time.to,fiscalYearStartMonth:le.fiscalYearStartMonth,timeZone:le.timezone,weekStart:le.weekStart}),$variables:Re,$behaviors:[T,new a.U1.Y({sync:le.graphTooltip}),it(le),ce],$data:Ae.length>0?new a.mv({layers:Ae}):void 0,controls:[new f.n({variableControls:[new a.dn({}),...Oe,new a.wJ],timeControls:[new a.n7({}),new a.vf({refresh:le.refresh,intervals:le.timepicker.refresh_intervals})],linkControls:new C({}),hideTimeControls:le.timepicker.hidden})]})}function Ee(le){const Re={name:le.name,label:le.label};if(le.type==="custom")return new a.eO({...Re,value:le.current?.value??"",text:le.current?.text??"",description:le.description,query:le.query,isMulti:le.multi,allValue:le.allValue||void 0,includeAll:le.includeAll,defaultToAll:!!le.includeAll,skipUrlSync:le.skipUrlSync,hide:le.hide});if(le.type==="query")return new a.$1({...Re,value:le.current?.value??"",text:le.current?.text??"",description:le.description,query:le.query,datasource:le.datasource,sort:le.sort,refresh:le.refresh,regex:le.regex,allValue:le.allValue||void 0,includeAll:le.includeAll,defaultToAll:!!le.includeAll,isMulti:le.multi,skipUrlSync:le.skipUrlSync,hide:le.hide,definition:le.definition});if(le.type==="datasource")return new a.l3({...Re,value:le.current?.value??"",text:le.current?.text??"",description:le.description,regex:le.regex,pluginId:le.query,allValue:le.allValue||void 0,includeAll:le.includeAll,defaultToAll:!!le.includeAll,skipUrlSync:le.skipUrlSync,isMulti:le.multi,hide:le.hide});if(le.type==="interval"){const Ae=(0,D._B)(le),Oe=(0,D._n)(le,Ae);return new a.TC({...Re,value:Oe,description:le.description,intervals:Ae,autoEnabled:le.auto,autoStepCount:le.auto_count,autoMinInterval:le.auto_min,refresh:le.refresh,skipUrlSync:le.skipUrlSync,hide:le.hide})}else{if(le.type==="constant")return new a.M6({...Re,description:le.description,value:le.query,skipUrlSync:le.skipUrlSync,hide:le.hide});if(le.type==="textbox")return new a.Dm({...Re,description:le.description,value:le.query,skipUrlSync:le.skipUrlSync,hide:le.hide});throw new Error(`Scenes: Unsupported variable type ${le.type}`)}}function he(le){if(!le.libraryPanel)return null;const Re=new R.X({title:le.title,uid:le.libraryPanel.uid,name:le.libraryPanel.name,key:(0,D.Rv)(le.id)});return new a.bO({body:Re,y:le.gridPos.y,x:le.gridPos.x,width:le.gridPos.w,height:le.gridPos.h})}function Le(le){const Re=le.links&&le.links.length>0,Ae=[];let Oe;Re&&(Oe=new L({menu:new U({$behaviors:[(0,w.S)(le)]})}),Ae.push(Oe)),Ae.push(new _);const $e={key:(0,D.Rv)(le.id),title:le.title,description:le.description,pluginId:le.type,options:le.options??{},fieldConfig:le.fieldConfig,pluginVersion:le.pluginVersion,displayMode:le.transparent?"transparent":void 0,hoverHeader:!le.title&&!le.timeFrom&&!le.timeShift,$data:(0,q.R)(le),menu:new a.e0({$behaviors:[w.F]}),titleItems:Ae,extendPanelContext:Y,_UNSAFE_customMigrationHandler:fe(le)};if((le.timeFrom||le.timeShift)&&($e.$timeRange=new z.r({timeFrom:le.timeFrom,timeShift:le.timeShift,hideTimeOverride:le.hideTimeOverride})),le.repeat){const Ne=le.repeatDirection??"h";return new k.o({key:`grid-item-${le.id}`,x:le.gridPos.x,y:le.gridPos.y,width:Ne==="h"?24:le.gridPos.w,height:le.gridPos.h,itemHeight:le.gridPos.h,source:new a.Z($e),variableName:le.repeat,repeatedPanels:[],repeatDirection:le.repeatDirection,maxPerRow:le.maxPerRow})}const Ye=new a.Z($e);return new a.bO({key:`grid-item-${le.id}`,x:le.gridPos.x,y:le.gridPos.y,width:le.gridPos.w,height:le.gridPos.h,body:Ye})}const ke=le=>le.type==="adhoc",ot=()=>{const le=[];return Re=>{le.includes(Re)||(le.push(Re),me.a.panelDescriptionShown())}};function it(le){return()=>{const Re=me.a.setScenesContext();return(0,r.H)(le,le.version),()=>{Re()}}}function ce(le){const Re=ot();le.subscribeToEvent(a.f_,Ae=>{const{interaction:Oe}=Ae.payload;switch(Oe){case"panel-description-shown":Re(Ae.payload.origin.state.key||"");break;case"panel-status-message-clicked":me.a.panelStatusMessageClicked();break;case"panel-cancel-query-clicked":me.a.panelCancelQueryClicked();break;case"panel-menu-shown":me.a.panelMenuShown();break}})}},44560:(Q,A,e)=>{"use strict";e.d(A,{vi:()=>C,EU:()=>D,h2:()=>O});var n=e(32147),a=e(77121),i=e(7205),r=e(27546),o=e(5529),g=e(97522),u=e(7307),c=e(71667),l=e(34134),d=e(79004),f=e(67245),m=e(12676),v=e(37261),E=e(15265),p=e(44653);const h={name:"grafana",uid:"grafana"};function s(R){const I=[];for(const M of R){if(!(M instanceof a.o6.y))continue;const x={...M.state.query,enable:!!M.state.isEnabled,hide:!!M.state.isHidden};I.push(x)}return I}var y=e(58440);function D(R,I=!1){const M=R.state,x=M.$timeRange.state,L=M.$data,S=M.$variables,U=M.body;let N=i.ic.refresh_intervals,w=i.ic.hidden,G=[],_=i.Ql.graphTooltip,K=[];if(U instanceof a.Qh){for(const W of U.state.children)if(W instanceof a.bO&&G.push(C(W,I)),W instanceof f.o&&(G=G.concat(b(W,I))),W instanceof a.I_){if(W.state.key.indexOf("-clone-")>0&&!I)continue;T(W,G,I)}}let k=[];if(L instanceof a.mv){const W=L.state.layers;k=s(W)}if(S instanceof a.hT&&(K=(0,y.q)(S)),M.controls&&M.controls[0]instanceof l.n){w=M.controls[0].state.hideTimeControls??w;const W=M.controls[0].state.timeControls;for(const H of W)H instanceof a.vf&&H.state.intervals&&(N=H.state.intervals);const Z=M.controls[0].state.variableControls;for(const H of Z)H instanceof a.zo&&K.push({name:H.state.name,type:"adhoc",datasource:H.state.datasource})}M.$behaviors&&M.$behaviors[0]instanceof a.U1.Y&&(_=M.$behaviors[0].state.sync);const z={...i.Ql,title:M.title,description:M.description||void 0,uid:M.uid,id:M.id,editable:M.editable,time:{from:x.from,to:x.to},timepicker:{...i.ic,refresh_intervals:N,hidden:w},panels:G,annotations:{list:k},templating:{list:K},timezone:x.timeZone,fiscalYearStartMonth:x.fiscalYearStartMonth,weekStart:x.weekStart,tags:M.tags,graphTooltip:_};return(0,o.M)(z)}function C(R,I=!1){let M,x=0,L=0,S=0,U=0;if(R instanceof a.bO){if(R.state.body instanceof d.X)return x=R.state.x??0,L=R.state.y??0,S=R.state.width??0,U=R.state.height??0,{id:(0,p.Jb)(R.state.body),title:R.state.body.state.title,gridPos:{x,y:L,w:S,h:U},libraryPanel:{name:R.state.body.state.name,uid:R.state.body.state.uid}};if(!(R.state.body instanceof a.Z))throw new Error("SceneGridItem body expected to be VizPanel");M=R.state.body,x=R.state.x??0,L=R.state.y??0,S=R.state.width??0,U=R.state.height??0}if(R instanceof f.o&&(M=R.state.source,x=R.state.x??0,L=R.state.y??0,S=R.state.width??0,U=R.state.height??0),!M)throw new Error("Unsupported grid item type");const N={id:(0,p.Jb)(M),type:M.state.pluginId,title:M.state.title,gridPos:{x,y:L,w:S,h:U},options:M.state.options,fieldConfig:M.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:M.state.displayMode==="transparent",...P(M,I)},w=M.state.$timeRange;return w instanceof m.r&&(N.timeFrom=w.state.timeFrom,N.timeShift=w.state.timeShift,N.hideTimeOverride=w.state.hideTimeOverride),R instanceof f.o&&(N.repeat=R.state.variableName,N.maxPerRow=R.state.maxPerRow,N.repeatDirection=R.getRepeatDirection()),N}function P(R,I=!1){const M=R.state.$data,x={};if(M instanceof E.K&&(x.datasource={type:"datasource",uid:u.oe},x.targets=[{datasource:{...x.datasource},refId:"A",panelId:M.state.query.panelId,topic:M.state.query.topic}]),M instanceof a.uq&&(x.targets=M.state.queries,x.maxDataPoints=M.state.maxDataPoints,x.datasource=M.state.datasource),M instanceof a.bM){const L=M.state.$data;L instanceof E.K&&(x.datasource={type:"datasource",uid:u.oe},x.targets=[{datasource:{...x.datasource},refId:"A",panelId:L.state.query.panelId,topic:L.state.query.topic}]),L instanceof a.uq&&(x.targets=L.state.queries,x.maxDataPoints=L.state.maxDataPoints,x.datasource=L.state.datasource),x.transformations=M.state.transformations}if(M&&I){x.datasource=h;let L=(0,g.XJ)(M.state.data);M instanceof a.bM&&(L=(0,g.XJ)(M.state.$data.state.data)),x.targets=[{refId:"A",datasource:x.datasource,queryType:c.hR.Snapshot,snapshot:L}]}return x}function b(R,I=!1){if(I){if(R.state.repeatedPanels){const M=R.state.itemHeight??10,x=Math.ceil(R.state.repeatedPanels.length/R.getMaxPerRow()),L=Math.ceil(R.state.repeatedPanels.length/x),S=24/L,U=M;return R.state.repeatedPanels.map((w,G)=>{let _=0,K=0;R.state.repeatDirection==="v"?(_=R.state.x,K=G*U):(_=G%L*S,K=R.state.y+Math.floor(G/L)*U);const k={x:_,y:K,w:S,h:U},z=w.state.$variables.getByName(R.state.variableName);return{id:(0,p.Jb)(w),type:w.state.pluginId,title:w.state.title,gridPos:k,options:w.state.options,fieldConfig:w.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:w.state.displayMode==="transparent",scopedVars:{[R.state.variableName]:{text:z?.state.text,value:z?.state.value}},...P(w,I)}})}return[]}else return[C(R)]}function T(R,I,M=!1){const x=!!R.state.isCollapsed,L={type:"row",id:(0,p.Jb)(R),title:R.state.title,gridPos:{x:R.state.x??0,y:R.state.y??0,w:R.state.width??24,h:R.state.height??1},collapsed:x,panels:[]};if(R.state.$behaviors?.length){const U=R.state.$behaviors[0];U instanceof v.a&&(L.repeat=U.state.variableName)}if(M&&R.state.$variables){const N=R.state.$variables.state.variables.reduce((w,G)=>({...w,[G.state.name]:{text:G.state.text,value:G.state.value}}),{});L.scopedVars=N}I.push(L);let S=[];M?R.state.children.forEach(U=>{U instanceof f.o?S=S.concat(b(U,!x)):S.push(C(U,!x))}):S=R.state.children.map(U=>C(U)),R.state.isCollapsed?L.panels=S:I.push(...S)}function O(R,I,M,x){let L={...M,title:R,time:{from:I.from.toISOString(),to:I.to.toISOString()},links:[]};if(x){const S=M.panels?.find(U=>U.id===(0,p.Jb)(x));S&&(S.gridPos={w:24,x:0,y:0,h:20},L={...L,panels:[S]})}if(L.panels?.forEach(S=>{"links"in S&&(S.links=[])}),L.annotations){const U=(L.annotations.list?.filter(N=>N.enable)||[]).map(N=>({name:N.name,enable:N.enable,iconColor:N.iconColor,type:N.type,builtIn:N.builtIn,hide:N.hide,snapshotData:[]}));L.annotations.list=U}return L.templating&&L.templating.list?.forEach(S=>{"query"in S&&(S.query=""),"options"in S&&(S.options=S.current&&!(0,n.Q)(S.current)?[S.current]:[]),"refresh"in S&&(S.refresh=r.Bd.never)}),L}},67894:(Q,A,e)=>{"use strict";e.d(A,{V:()=>We});var n=e(31733),a=e(85498),i=e(77121),r=e(13883),o=e(5572),g=e(31805),u=e(75923),c=e(53166),l=e(35344),d=e(92762),f=e(44653),m=e(73386),v=e.n(m),E=e(59326),p=e(43741),h=e(79106),s=e(85765),y=e(76772),D=e(51343),C=e(73642),P=e(5334),b=e(91085),T=e(66699),O=e(25353),R=e(44560);const I=(0,c.t)("share-modal.export.share-externally-label","Export for sharing externally");class M extends i.wx{constructor(_e){super({isSharingExternally:!1,isViewingJSON:!1,..._e}),this.tabId=T.Ax.export,this._exporter=new b.E,this.onShareExternallyChange=()=>{this.setState({isSharingExternally:!this.state.isSharingExternally})},this.onViewJSON=()=>{this.setState({isViewingJSON:!this.state.isViewingJSON})}}getTabLabel(){return(0,c.t)("share-modal.tab-title.export","Export")}getClipboardText(){}async getExportableDashboardJson(){const{dashboardRef:_e,isSharingExternally:qe}=this.state,at=(0,R.EU)(_e.resolve());return qe?await this._exporter.makeExportable(new O.f(at)):at}async onSaveAsFile(){const _e=await this.getExportableDashboardJson(),qe=JSON.stringify(_e,null,2),{isSharingExternally:at}=this.state,lt=new Blob([qe],{type:"application/json;charset=utf-8"}),ft=new Date().getTime();let yt="dashboard";"title"in _e&&_e.title&&(yt=_e.title),v()(lt,`${yt}-${ft}.json`),d.a.exportDownloadJsonClicked({externally:at})}}M.Component=x;function x({model:ze}){const{isSharingExternally:_e,isViewingJSON:qe,modalRef:at}=ze.useState(),lt=(0,E.Z)(async()=>{if(qe){const ft=await ze.getExportableDashboardJson();return JSON.stringify(ft,null,2)}return""},[qe]);return n.createElement(n.Fragment,null,!qe&&n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),n.createElement(h.wc,{spacing:"md"},n.createElement(s.g,{label:I},n.createElement(y.r,{id:"share-externally-toggle",value:_e,onChange:ze.onShareExternallyChange}))),n.createElement(o.u.ButtonRow,null,n.createElement(D.zx,{variant:"secondary",onClick:()=>{at?.resolve().onDismiss()},fill:"outline"},n.createElement(c.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),n.createElement(D.zx,{variant:"secondary",icon:"brackets-curly",onClick:ze.onViewJSON},n.createElement(c.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),n.createElement(D.zx,{variant:"primary",icon:"save",onClick:()=>ze.onSaveAsFile()},n.createElement(c.cC,{i18nKey:"share-modal.export.save-button"},"Save to file")))),qe&&n.createElement(n.Fragment,null,n.createElement(p.Z,{disableHeight:!0},({width:ft})=>lt.value?n.createElement(C.p,{value:lt.value??"",language:"json",showMiniMap:!1,height:"500px",width:ft}):lt.loading?n.createElement("div",null,"Loading..."):null),n.createElement(o.u.ButtonRow,null,n.createElement(D.zx,{variant:"secondary",fill:"outline",onClick:ze.onViewJSON,icon:"arrow-left"},n.createElement(c.cC,{i18nKey:"share-modal.export.back-button"},"Back to export config")),n.createElement(P.m,{variant:"secondary",icon:"copy",disabled:lt.loading,getText:()=>lt.value??""},n.createElement(c.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard")),n.createElement(D.zx,{variant:"primary",icon:"save",disabled:lt.loading,onClick:()=>ze.onSaveAsFile()},n.createElement(c.cC,{i18nKey:"share-modal.export.save-button"},"Save to file")))))}var L=e(96838),S=e(67245);class U extends i.wx{constructor(){super(...arguments),this.tabId=T.Ax.libraryPanel}getTabLabel(){return(0,c.t)("share-modal.tab-title.library-panel","Library panel")}}U.Component=N;function N({model:ze}){const{panelRef:_e,dashboardRef:qe,modalRef:at}=ze.useState();if(!_e)return null;const lt=_e.resolve();if(lt.parent instanceof i.bO||lt.parent instanceof S.o){const ft=qe.resolve(),yt=(0,R.vi)(lt.parent),wt=new O.r(yt),zt=(0,R.EU)(ft),$t=new O.f(zt);return n.createElement(L.e,{initialFolderUid:ft.state.meta.folderUid,dashboard:$t,panel:wt,onDismiss:()=>{at?.resolve().onDismiss()}})}return null}var w=e(74011),G=e(21568),_=e(19690),K=e(97216),k=e(64516),z=e(49311),W=e(25111),Z=e(42646),H=e(42637),X=e(17188);class Y extends i.wx{constructor(_e){super({..._e,useLockedTime:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}),this.tabId=T.Ax.link,this.onToggleLockedTime=()=>{this.setState({useLockedTime:!this.state.useLockedTime}),this.buildUrl()},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl}),this.buildUrl()},this.onThemeChange=qe=>{this.setState({selectedTheme:qe}),this.buildUrl()},this.getShareUrl=()=>this.state.shareUrl,this.addActivationHandler(()=>{this.buildUrl()})}async buildUrl(){const{panelRef:_e,dashboardRef:qe,useLockedTime:at,useShortUrl:lt,selectedTheme:ft}=this.state,yt=qe.resolve(),wt=_e?.resolve(),zt=_.E1.getLocation(),$t=i.ep.getTimeRange(wt??yt),Ie={};wt&&(Ie.viewPanel=wt.state.key),at&&(Ie.from=$t.state.value.from.toISOString(),Ie.to=$t.state.value.to.toISOString()),ft!=="current"&&(Ie.theme=ft);let st=(0,X.$9)({uid:yt.state.uid,currentQueryParams:zt.search,updateQuery:Ie,absolute:!0});lt&&(st=await(0,Z.D)(st));const Mt=(0,X.$9)({uid:yt.state.uid,currentQueryParams:zt.search,updateQuery:Ie,absolute:!0,soloRoute:!0,render:!0,timeZone:se($t.getTimeZone())});this.setState({shareUrl:st,imageUrl:Mt})}getTabLabel(){return(0,c.t)("share-modal.tab-title.link","Link")}onCopy(){d.a.shareLinkCopied({currentTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}}Y.Component=ne;function ne({model:ze}){const _e=ze.useState(),{panelRef:qe,dashboardRef:at}=_e,lt=at.resolve(),ft=qe?.resolve(),wt=i.ep.getTimeRange(ft??lt).state.to==="now",{useLockedTime:zt,useShortUrl:$t,selectedTheme:Ie,shareUrl:st,imageUrl:Mt}=_e,ct=G.wl.pages.SharePanelModal,nt=!!lt.state.uid,Ct=(0,c.t)("share-modal.link.time-range-label","Lock time range"),kt=(0,c.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Jt=(0,c.t)("share-modal.link.shorten-url","Shorten URL"),tn=(0,c.t)("share-modal.link.link-url","Link URL");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),n.createElement(K.C,null,n.createElement(s.g,{label:Ct,description:wt?kt:""},n.createElement(y.r,{id:"share-current-time-range",value:zt,onChange:ze.onToggleLockedTime})),n.createElement(H.J,{selectedTheme:Ie,onChange:ze.onThemeChange}),n.createElement(s.g,{label:Jt},n.createElement(y.r,{id:"share-shorten-url",value:$t,onChange:ze.onUrlShorten})),n.createElement(s.g,{label:tn},n.createElement(k.I,{id:"link-url-input",value:st,readOnly:!0,addonAfter:n.createElement(P.m,{icon:"copy",variant:"primary",getText:ze.getShareUrl,onClipboardCopy:ze.onCopy},n.createElement(c.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),ft&&a.config.rendererAvailable&&n.createElement(n.Fragment,null,nt&&n.createElement("div",{className:"gf-form"},n.createElement("a",{href:Mt,target:"_blank",rel:"noreferrer","aria-label":ct.linkToRenderedImage},n.createElement(z.J,{name:"camera"}),"\xA0",n.createElement(c.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!nt&&n.createElement(W.b,{severity:"info",title:(0,c.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},n.createElement(c.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),ft&&!a.config.rendererAvailable&&n.createElement(W.b,{severity:"info",title:(0,c.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},n.createElement(c.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}function se(ze){const _e="UTC"+encodeURIComponent((0,w.CQ)().format("Z"));if(ze==="utc")return"UTC";if(ze==="browser"){if(!window.Intl)return _e;const at=window.Intl.DateTimeFormat().resolvedOptions();return at.timeZone?at.timeZone:_e}return ze}var re=e(76504),ge=e(12676);class q extends i.wx{constructor(_e){super(_e),this.tabId=T.Ax.embed}getTabLabel(){return(0,c.t)("share-modal.tab-title.panel-embed","Embed")}}q.Component=me;function me({model:ze}){const{panelRef:_e,dashboardRef:qe}=ze.useState(),at=_e.resolve(),lt=qe.resolve(),{uid:ft}=lt.useState(),yt=(0,f.Jb)(at),wt=i.ep.getTimeRange(at),zt=wt instanceof ge.r?wt.state.timeFrom:void 0;return n.createElement(re.q,{panel:{id:yt,timeFrom:zt},range:wt.state.value,dashboard:{uid:ft??"",time:wt.state.value},buildIframe:oe})}function oe(ze,_e,qe,at,lt){const ft=(0,T.U8)({useCurrentTimeRange:ze,selectedTheme:qe,panel:at,range:lt}),yt=ft.get("editPanel")??ft.get("viewPanel")??"";return ft.set("panelId",yt),ft.delete("editPanel"),ft.delete("viewPanel"),`<iframe src="${(0,X.$9)({absolute:!0,soloRoute:!0,uid:_e,currentQueryParams:ft.toString()})}" width="450" height="200" frameborder="0"></iframe>`}var fe=e(74282),ve=e(69391),pe=e(96856),Me=e(38457);const Pe="/api/snapshots",Ee=()=>[{label:(0,c.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,c.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,c.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,c.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}];class he extends i.wx{constructor(_e){super({..._e,snapshotName:_e.dashboardRef.resolve().state.title,selectedExpireOption:Ee()[0]}),this.tabId=T.Ax.snapshot,this.onSnasphotNameChange=qe=>{this.setState({snapshotName:qe.trim()})},this.onExpireChange=qe=>{this.setState({selectedExpireOption:Ee().find(at=>at.value===qe)})},this.onSnapshotCreate=async(qe=!1)=>{const{selectedExpireOption:at}=this.state,lt=this.prepareSnapshot(),ft={dashboard:lt,name:lt.title,expires:at?.value,external:qe};try{return await(0,ve.i)().post(Pe,ft)}finally{qe?d.a.publishSnapshotClicked({expires:ft.expires}):d.a.publishSnapshotLocalClicked({expires:ft.expires})}},this.addActivationHandler(()=>{this._onActivate()})}_onActivate(){(0,Me.G)().getSharingOptions().then(_e=>{this.isActive&&this.setState({snapshotSharingOptions:_e})})}getTabLabel(){return(0,c.t)("share-modal.tab-title.snapshot","Snapshot")}prepareSnapshot(){const _e=i.ep.getTimeRange(this),{dashboardRef:qe,panelRef:at}=this.state,lt=(0,R.EU)(qe.resolve(),!0);return(0,R.h2)(this.state.snapshotName||"",_e.state.value,lt,at?.resolve())}}he.Component=Le;function Le({model:ze}){const{snapshotName:_e,selectedExpireOption:qe,modalRef:at,snapshotSharingOptions:lt}=ze.useState(),[ft,yt]=(0,fe.default)(async($t=!1)=>ze.onSnapshotCreate($t)),[wt,zt]=(0,fe.default)(async $t=>await(0,ve.i)().get($t));return wt.value?n.createElement(c.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."):n.createElement(n.Fragment,null,!ft.value&&n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",n.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),n.createElement(s.g,{label:(0,c.t)("share-modal.snapshot.name","Snapshot name")},n.createElement(k.I,{id:"snapshot-name-input",width:30,defaultValue:_e,onBlur:$t=>ze.onSnasphotNameChange($t.target.value)})),n.createElement(s.g,{label:(0,c.t)("share-modal.snapshot.expire","Expire")},n.createElement(pe.S,{id:"expire-select-input",options:Ee(),value:qe?.value,onChange:ze.onExpireChange})),n.createElement(o.u.ButtonRow,null,n.createElement(D.zx,{variant:"secondary",onClick:()=>{at?.resolve().onDismiss()},fill:"outline"},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),lt?.externalEnabled&&n.createElement(D.zx,{variant:"secondary",disabled:ft.loading,onClick:()=>yt(!0)},lt?.externalSnapshotName),n.createElement(D.zx,{variant:"primary",disabled:ft.loading,onClick:()=>yt()},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot")))),ft.value&&n.createElement(n.Fragment,null,n.createElement(s.g,{label:(0,c.t)("share-modal.snapshot.url-label","Snapshot URL")},n.createElement(k.I,{id:"snapshot-url-input",value:ft.value.url,readOnly:!0,addonAfter:n.createElement(P.m,{icon:"copy",variant:"primary",getText:()=>ft.value.url},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),n.createElement("div",{className:"pull-right",style:{padding:"5px"}},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",n.createElement(D.zx,{fill:"outline",size:"md",variant:"destructive",onClick:()=>{zt(ft.value.deleteUrl)}},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot.")))))}var ke=e(86561),ot=e(80918),it=e(76932),ce=e(76067),le=e(23973),Re=e(42342),Ae=e(90069);class Oe extends i.wx{constructor(_e){super({confirmVariant:"destructive",dismissText:"Cancel",dismissVariant:"secondary",icon:"exclamation-triangle",confirmButtonVariant:"destructive",..._e})}onDismiss(){}}Oe.Component=$e;function $e({model:ze}){const _e=ze.useState();return n.createElement(Ae.s,{..._e})}var Ye=e(65821),Ne=e(12169),je=e(97001),ut=e(79004);const Fe=async ze=>{let _e=new Set;for(const qe of ze)Ne.W.has(qe)&&await(0,je.ak)().get(qe)instanceof Ye.CK||_e.add(qe);return Array.from(_e)};function Te(ze){const _e=new Set,qe=ze.state.body;if(!(qe instanceof i.Qh))return[];for(const at of qe.state.children){if(at instanceof i.bO){const lt=tt(at);for(const ft of lt)_e.add(ft)}if(at instanceof i.I_){const lt=Ve(at);for(const ft of lt)_e.add(ft)}}return Array.from(_e).sort()}function Ve(ze){return new Set(ze.state.children.map(qe=>tt(qe)).flat())}function tt(ze){let _e;if(ze instanceof i.bO)if(ze.state.body instanceof ut.X)_e=ze.state.body.state.panel;else if(ze.state.body instanceof i.Z)_e=ze.state.body;else throw new Error("SceneGridItem body expected to be VizPanel");else ze instanceof S.o&&(_e=ze.state.source);if(!_e)throw new Error("Unsupported grid item type");const qe=_e.state.$data,at=new Set;if(qe instanceof i.uq)for(const lt of qe.state.queries)at.add(lt.datasource?.type??"");if(qe instanceof i.bM){const lt=qe.state.$data;if(lt instanceof i.uq)for(const ft of lt.state.queries)at.add(ft.datasource?.type??"")}return Array.from(at)}function ae(ze){const{value:_e}=(0,E.Z)(async()=>{const qe=Te(ze);return Fe(qe)},[]);return _e}function J({model:ze,publicDashboard:_e,isGetLoading:qe}){const at=(0,ce.wW)(te),lt=u.Vt.hasPermission(Re.AccessControlAction.DashboardsPublicWrite),{dashboardRef:ft}=ze.useState(),yt=ft.resolve(),{isDirty:wt}=yt.useState(),[zt]=(0,ke.bS)(),$t=(yt.state.$variables?.state.variables.length??0)>0,Ie=ae(yt),Mt=i.ep.getTimeRange(ze).useState();return n.createElement(le.r,{dashboard:yt,publicDashboard:_e,unsupportedDatasources:Ie,onRevoke:()=>{yt.showModal(new Oe({isOpen:!0,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL",body:n.createElement("p",{className:at.description},"Are you sure you want to revoke this URL? The dashboard will no longer be public."),onDismiss:()=>{yt.showModal(new We({dashboardRef:ft,activeTab:"Public Dashboard"}))},onConfirm:()=>{zt({dashboard:yt,dashboardUid:yt.state.uid,uid:_e.uid}),yt.closeModal()}}))},timeRange:Mt.value,showSaveChangesAlert:lt&&wt,hasTemplateVariables:$t})}const te=ze=>({description:(0,it.css)({fontSize:ze.typography.body.fontSize})});var de=e(25680);function be({model:ze}){const{dashboardRef:_e}=ze.useState(),qe=_e.resolve(),at=ae(qe),lt=(qe.state.$variables?.state.variables.length??0)>0;return n.createElement(de.R,{dashboard:qe,unsupportedDatasources:at,unsupportedTemplateVariables:lt})}class De extends i.wx{constructor(){super(...arguments),this.tabId=T.Ax.publicDashboard}getTabLabel(){return(0,c.t)("share-modal.tab-title.public-dashboard","Public Dashboard")}}De.Component=Ue;function Ue({model:ze}){const{data:_e,isLoading:qe}=(0,ke.Ym)(ze.state.dashboardRef.resolve().state.uid);return n.createElement(n.Fragment,null,qe?n.createElement(ot.a,null):(0,l.Gt)(_e)?n.createElement(J,{model:ze,publicDashboard:_e,isGetLoading:qe}):n.createElement(be,{model:ze}))}class We extends i.wx{constructor(_e){super({activeTab:"link",..._e}),this.onDismiss=()=>{(0,f.Pm)(this).closeModal()},this.onChangeTab=qe=>{d.a.sharingTabChanged({item:qe.value}),this.setState({activeTab:qe.value})},this.addActivationHandler(()=>this.buildTabs())}buildTabs(){const{dashboardRef:_e,panelRef:qe}=this.state,at=[new Y({dashboardRef:_e,panelRef:qe,modalRef:this.getRef()})];qe||at.push(new M({dashboardRef:_e,modalRef:this.getRef()})),u.Vt.isSignedIn&&a.config.snapshotEnabled&&at.push(new he({panelRef:qe,dashboardRef:_e,modalRef:this.getRef()})),qe&&(at.push(new q({panelRef:qe,dashboardRef:_e})),qe.resolve()instanceof i.Z&&at.push(new U({panelRef:qe,dashboardRef:_e,modalRef:this.getRef()}))),(0,l.k3)()&&at.push(new De({dashboardRef:_e,modalRef:this.getRef()})),this.setState({tabs:at})}}We.Component=et;function et({model:ze}){const{panelRef:_e,tabs:qe,activeTab:at}=ze.useState(),lt=_e?(0,c.t)("share-modal.panel.title","Share Panel"):(0,c.t)("share-modal.dashboard.title","Share");if(!qe)return;const ft=qe?.map(zt=>({label:zt.getTabLabel(),value:zt.tabId})),yt=n.createElement(r.H,{title:lt,icon:"share-alt",tabs:ft,activeTab:at,onChangeTab:ze.onChangeTab}),wt=qe.find(zt=>zt.tabId===at);return n.createElement(o.u,{isOpen:!0,title:yt,onDismiss:ze.onDismiss},n.createElement(g.I,null,wt&&n.createElement(wt.Component,{model:wt})))}},63204:(Q,A,e)=>{"use strict";e.d(A,{f:()=>l});var n=e(40510),a=e(83994),i=e(42692),r=e(40137),o=e(1727),g=e(77121),u=e(75778),c=e(44653);class l{constructor(m){this._scene=m,this.events=new a.F,this._subs=new n.w0;const v=g.ep.getTimeRange(m);this._subs.add(v.subscribeToState((E,p)=>{E.value!==p.value&&this.events.publish(new o.md(E.value))}))}get id(){return this._scene.state.id??null}get uid(){return this._scene.state.uid??null}get title(){return this._scene.state.title}get description(){return this._scene.state.description}get editable(){return this._scene.state.editable}get graphTooltip(){return this._getSyncMode()}get timepicker(){return{refresh_intervals:u.Y.getRefreshPicker(this._scene)?.state.intervals,hidden:u.Y.getDashboardControls(this._scene)?.state.hideTimeControls??!1}}get timezone(){return this.getTimezone()}get weekStart(){return g.ep.getTimeRange(this._scene).state.weekStart}get tags(){return this._scene.state.tags}get meta(){return this._scene.state.meta}get time(){const m=g.ep.getTimeRange(this._scene);return{from:m.state.from,to:m.state.to}}get annotations(){return console.error("Scenes DashboardModelCompatibilityWrapper.annotations not implemented (yet)"),{list:[]}}getTimezone(){return g.ep.getTimeRange(this._scene).getTimeZone()}sharedTooltipModeEnabled(){return this._getSyncMode()>0}sharedCrosshairModeOnly(){return this._getSyncMode()===1}_getSyncMode(){if(this._scene.state.$behaviors){for(const m of this._scene.state.$behaviors)if(m instanceof g.U1.Y)return m.state.sync}return i.m.Off}otherPanelInFullscreen(m){return!1}formatDate(m,v){return(0,r.dq)(m,{format:v,timeZone:this.getTimezone()})}getPanelById(m){const v=(0,c.ds)(this._scene,(0,c.Rv)(m));return v?new d(v):null}removePanel(m){const v=(0,c.ds)(this._scene,(0,c.Rv)(m.id));if(!v){console.error("Trying to remove a panel that was not found in scene",m);return}const E=v.parent;if(!(E instanceof g.bO)){console.error("Trying to remove a panel that is not wrapped in SceneGridItem");return}const p=g.ep.getLayout(v);if(!(p instanceof g.Qh)){console.error("Trying to remove a panel in a layout that is not SceneGridLayout ");return}if(p===E.parent&&p.setState({children:p.state.children.filter(h=>h!==E)}),E.parent instanceof g.I_){const h=p.clone({children:p.state.children.filter(s=>s!==E)});p.parent instanceof g.Qh&&p.parent.setState({children:p.parent.state.children.map(s=>s===p?h:s)})}}canEditAnnotations(m){return!1}panelInitialized(){}destroy(){this.events.removeAllListeners(),this._subs.unsubscribe()}}class d{constructor(m){this._vizPanel=m}get id(){const m=(0,c.Jb)(this._vizPanel);return isNaN(m)?(console.error("VizPanel key could not be translated to a legacy numeric panel id",this._vizPanel),0):m}get type(){return this._vizPanel.state.pluginId}get title(){return this._vizPanel.state.title}get transformations(){return this._vizPanel.state.$data instanceof g.bM?this._vizPanel.state.$data.state.transformations:[]}refresh(){console.error("Scenes PanelCompatibilityWrapper.refresh no implemented (yet)")}render(){console.error("Scenes PanelCompatibilityWrapper.render no implemented (yet)")}getQueryRunner(){console.error("Scenes PanelCompatibilityWrapper.getQueryRunner no implemented (yet)")}}},19527:(Q,A,e)=>{"use strict";e.d(A,{R:()=>o});var n=e(85498),a=e(77121),i=e(7307),r=e(15265);function o(g){if(!g.targets?.length||n.config.panels[g.type]?.skipDataQuery)return;let u;return g.datasource?.uid===i.oe?u=new r.K({query:g.targets[0]}):u=new a.uq({datasource:g.datasource??void 0,queries:g.targets,maxDataPoints:g.maxDataPoints??void 0,maxDataPointsFromWidth:!0,dataLayerFilter:{panelId:g.id}}),g.transformations?.length&&(u=new a.bM({$data:u,transformations:g.transformations})),u}},75778:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>g});var n=e(77121),a=e(34134);function i(u){const c=o(u);if(c){const l=c.state.timeControls.find(d=>d instanceof n.n7);if(l&&l instanceof n.n7)return l}return null}function r(u){const c=o(u);if(c){for(const l of c.state.timeControls)if(l instanceof n.vf)return l}return null}function o(u){return u.state.controls?.[0]instanceof a.n?u.state.controls[0]:null}const g={getTimePicker:i,getRefreshPicker:r,getDashboardControls:o}},92762:(Q,A,e)=>{"use strict";e.d(A,{a:()=>i});var n=e(64704);let a=!1;const i={dashboardInitialized:o=>{r("init_dashboard_completed",{...o})},panelMenuShown:o=>{r("panelheader_menu",{...o,item:"menu"})},panelMenuItemClicked:o=>{r("panelheader_menu",{item:o})},panelMenuInspectClicked(o){r("panelheader_menu",{item:"inspect",tab:o})},panelLinkClicked:o=>{r("panelheader_datalink_clicked",o)},panelStatusMessageClicked:o=>{r("panelheader_statusmessage_clicked",o)},panelCancelQueryClicked:o=>{r("panelheader_cancelquery_clicked",o)},panelDescriptionShown:o=>{r("panelheader_description_displayed",o)},sharingTabChanged:o=>{r("sharing_category_clicked",o)},shareLinkCopied:o=>{r("sharing_link_copy_clicked",o)},embedSnippetCopy:o=>{r("sharing_embed_copy_clicked",o)},publishSnapshotClicked:o=>{r("sharing_snapshot_publish_clicked",o)},publishSnapshotLocalClicked:o=>{r("sharing_snapshot_local_clicked",o)},exportDownloadJsonClicked:o=>{r("sharing_export_download_json_clicked",o)},exportCopyJsonClicked:o=>{r("sharing_export_copy_json_clicked",o)},exportSaveJsonClicked:o=>{r("sharing_export_save_json_clicked",o)},exportViewJsonClicked:o=>{r("sharing_export_view_json_clicked",o)},generatePublicDashboardUrlClicked:o=>{r("sharing_public_generate_url_clicked",o)},revokePublicDashboardEmailClicked:o=>{r("sharing_public_email_revoke_clicked",o)},resendPublicDashboardEmailClicked:o=>{r("sharing_public_email_resend_clicked",o)},publicDashboardEmailInviteClicked:o=>{r("sharing_public_email_invite_clicked",o)},publicDashboardShareTypeChange:o=>{r("sharing_public_can_view_clicked",o)},publicDashboardTimeSelectionChanged:o=>{r("sharing_public_time_picker_clicked",o)},publicDashboardAnnotationsSelectionChanged:o=>{r("sharing_public_annotations_clicked",o)},publicDashboardUrlCopied:o=>{r("sharing_public_copy_url_clicked",o)},publicDashboardPauseSharingClicked:o=>{r("sharing_public_pause_clicked",o)},revokePublicDashboardClicked:o=>{r("sharing_public_revoke_clicked",o)},emptyDashboardButtonClicked:o=>{r("emptydashboard_clicked",o)},toolbarAddButtonClicked:o=>{r("toolbar_add_clicked",o)},toolbarFavoritesClick:()=>{r("toolbar_actions_clicked",{item:"favorites"})},toolbarSettingsClick:()=>{r("toolbar_actions_clicked",{item:"settings"})},toolbarRefreshClick:()=>{r("toolbar_actions_clicked",{item:"refresh"})},toolbarTimePickerClick:()=>{r("toolbar_actions_clicked",{item:"time_picker"})},toolbarZoomClick:()=>{r("toolbar_actions_clicked",{item:"zoom_out_time_range"})},toolbarShareClick:()=>{r("toolbar_actions_clicked",{item:"share"})},toolbarSaveClick:()=>{r("toolbar_actions_clicked",{item:"save"})},toolbarAddClick:()=>{r("toolbar_actions_clicked",{item:"add"})},setScenesContext:()=>(a=!0,()=>{a=!1})},r=(o,g)=>{const u=a?{scenesView:!0}:{};g?(0,n.ff)(`dashboards_${o}`,{...g,...u}):(0,n.ff)(`dashboards_${o}`)}},19179:(Q,A,e)=>{"use strict";e.d(A,{j:()=>n});const n={left:[],right:[]};function a(i,r){n[i].push(r)}},17188:(Q,A,e)=>{"use strict";e.d(A,{$9:()=>l,el:()=>m,qx:()=>f,uO:()=>d});var n=e(91977),a=e(84912),i=e(19690),r=e(85498),o=e(77121),g=e(75923),u=e(82866),c=e(44653);function l(v){let E=`/d/${v.uid}${v.subPath??""}`;v.soloRoute&&(E=`/d-solo/${v.uid}${v.subPath??""}`),v.render&&(E="/render"+E,v.updateQuery={...v.updateQuery,width:1e3,height:500,tz:v.timeZone});const p=v.currentQueryParams?(0,i.Ox)(v.currentQueryParams):{};if(v.updateQuery)for(const s of Object.keys(v.updateQuery))v.updateQuery[s]===null||v.updateQuery[s]===void 0?delete p[s]:p[s]=v.updateQuery[s];const h=n.Cj.renderUrl(E,p);return v.absolute?r.config.appUrl+h.slice(1):h}function d(v){return a.u.getUrlForPartial(i.E1.getLocation(),{viewPanel:v.state.key})}function f(v,E){return a.u.getUrlForPartial(i.E1.getLocation(),{inspect:v.state.key,inspectTab:E})}function m(v){const E=v.getPlugin(),p=(0,c.R)(v);if(!g.Vt.hasAccessToExplore()||E?.meta.skipDataQuery||!p)return Promise.resolve(void 0);const h=o.ep.getTimeRange(v);return(0,u.H6)({queries:p.state.queries,dsRef:p.state.datasource,timeRange:h.state.value,scopedVars:{__sceneObject:{value:v}},adhocFilters:p.state.data?.request?.filters})}},44653:(Q,A,e)=>{"use strict";e.d(A,{CR:()=>d,Jb:()=>g,Pm:()=>p,Qx:()=>h,R:()=>E,RB:()=>s,Rv:()=>o,U:()=>m,_B:()=>f,_n:()=>v,ds:()=>u,pi:()=>l});var n=e(77121),a=e(7652),i=e(64552),r=e(23709);function o(y){return`panel-${y}`}function g(y){return parseInt(y.state.key.replace("panel-",""),10)}function u(y,D){if(!D)return null;const C=c(y,D);if(C)return C;const P=parseInt(D,10);return isNaN(P)?null:c(y,o(P))}function c(y,D){if(!D)return null;const C=n.ep.findObject(y,P=>P.state.key===D);if(C){if(C instanceof n.Z)return C;throw new Error(`Found panel with key ${D} but it was not a VizPanel`)}return null}function l(y,D){y.forEachChild(C=>{C.isActive&&(C.forceRender(),l(C,D))})}function d(y){const{value:D,text:C,options:P}=y.state;return y.hasAllValue()?{values:P.map(b=>b.value),texts:P.map(b=>b.label)}:{values:Array.isArray(D)?D:[D],texts:Array.isArray(C)?C:[C]}}function f(y){const D=y.query.match(/(["'])(.*?)\1|\w+/g);if(!D)return a.T6.query?.split(",")??[];const C=new Set,P=D.reduce((b,T)=>{const O=T.replace(/["']+/g,"");return O.startsWith("$__auto_interval_")||b.add(O),b},C);return Array.from(P)}function m(y){return Array.isArray(y)?y.join(","):""}function v(y,D){const C=Array.isArray(y.current.value)?y.current.value[0]:y.current.value;return C.startsWith("$__auto_interval_")?"$__auto":D.includes(C)?C:D[0]}function E(y){if(y){if(y.state.$data instanceof n.uq)return y.state.$data;if(y.state.$data instanceof n.bM)return E(y.state.$data)}}function p(y){const D=y.getRoot();if(D instanceof i.Y)return D.state.dashboardRef.resolve();if(D instanceof r.WI)return D;throw new Error("SceneObject root is not a DashboardScene")}function h(y){return y instanceof n.Z?y:y.parent?h(y.parent):null}function s(y){return y.includes("clone")}},86561:(Q,A,e)=>{"use strict";e.d(A,{Bl:()=>C,FJ:()=>h,Mi:()=>v,NN:()=>P,RS:()=>y,Rh:()=>d,WJ:()=>p,Ym:()=>f,bS:()=>E,jI:()=>D,r5:()=>s,zZ:()=>m});var n=e(61168),a=e(71892),i=e(69391),r=e(7939),o=e(42876),g=e(23709);function u(b){return typeof b=="object"&&b!=null&&"error"in b}const c=({baseUrl:b})=>async T=>{try{const{data:O,...R}=await(0,a.n)((0,i.i)().fetch({...T,url:b+T.url,showErrorAlert:T.showErrorAlert}));return{data:O,meta:R}}catch(O){return T.manageError?T.manageError(O):{error:O}}},l=b=>({error:(0,i.kW)(b)&&b.status!==404?b:null}),d=(0,n.LC)({reducerPath:"publicDashboardApi",baseQuery:c({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:b=>({getPublicDashboard:b.query({query:T=>({url:`/dashboards/uid/${T}/public-dashboards`,manageError:l,showErrorAlert:!1}),async onQueryStarted(T,{dispatch:O,queryFulfilled:R}){try{await R}catch(I){u(I)&&(0,i.kW)(I.error)&&O((0,r.$l)((0,o.t_)(I.error.data.message)))}},providesTags:(T,O,R)=>[{type:"PublicDashboard",id:R}]}),createPublicDashboard:b.mutation({query:T=>({url:`/dashboards/uid/${T.dashboard instanceof g.WI?T.dashboard.state.uid:T.dashboard.uid}/public-dashboards`,method:"POST",data:T.payload}),async onQueryStarted({dashboard:T,payload:O},{dispatch:R,queryFulfilled:I}){const{data:M}=await I;R((0,r.$l)((0,o.AT)("Dashboard is public!"))),T instanceof g.WI?T.setState({meta:{...T.state.meta,publicDashboardEnabled:M.isEnabled,publicDashboardUid:M.uid}}):T.updateMeta({publicDashboardUid:M.uid,publicDashboardEnabled:M.isEnabled})},invalidatesTags:(T,O,{dashboard:R})=>[{type:"PublicDashboard",id:R instanceof g.WI?R.state.uid:R.uid}]}),updatePublicDashboard:b.mutation({query:({payload:T,dashboard:O})=>({url:`/dashboards/uid/${O instanceof g.WI?O.state.uid:O.uid}/public-dashboards/${T.uid}`,method:"PATCH",data:T}),async onQueryStarted({dashboard:T},{dispatch:O,queryFulfilled:R}){const{data:I}=await R;O((0,r.$l)((0,o.AT)("Public dashboard updated!"))),T instanceof g.WI?T.setState({meta:{...T.state.meta,publicDashboardEnabled:I.isEnabled,publicDashboardUid:I.uid}}):T.updateMeta?.({publicDashboardUid:I.uid,publicDashboardEnabled:I.isEnabled})},invalidatesTags:(T,O,{payload:R})=>[{type:"PublicDashboard",id:R.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:b.mutation({query:()=>({url:""})}),deleteRecipient:b.mutation({query:()=>({url:""})}),reshareAccessToRecipient:b.mutation({query:()=>({url:""})}),getActiveUsers:b.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:b.query({query:()=>({url:""}),providesTags:(T,O,R)=>[{type:"ActiveUserDashboards",id:R}]}),listPublicDashboards:b.query({query:(T=1)=>({url:`/dashboards/public-dashboards?page=${T}&perpage=8`}),transformResponse:T=>({...T,totalPages:Math.ceil(T.totalCount/T.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:b.mutation({query:T=>({url:`/dashboards/uid/${T.dashboardUid}/public-dashboards/${T.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:T,uid:O},{dispatch:R,queryFulfilled:I}){await I,R((0,r.$l)((0,o.AT)("Public dashboard deleted!"))),T instanceof g.WI?T.setState({meta:{...T.state.meta,publicDashboardUid:O,publicDashboardEnabled:!1}}):T?.updateMeta({publicDashboardUid:O,publicDashboardEnabled:!1})},invalidatesTags:(T,O,{dashboardUid:R})=>[{type:"PublicDashboard",id:R},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]}),revokeAllAccess:b.mutation({query:()=>({url:""})})})}),{useGetPublicDashboardQuery:f,useCreatePublicDashboardMutation:m,useUpdatePublicDashboardMutation:v,useDeletePublicDashboardMutation:E,useListPublicDashboardsQuery:p,useAddRecipientMutation:h,useDeleteRecipientMutation:s,useReshareAccessToRecipientMutation:y,useGetActiveUsersQuery:D,useGetActiveUserDashboardsQuery:C,useRevokeAllAccessMutation:P}=d},91085:(Q,A,e)=>{"use strict";e.d(A,{E:()=>d});var n=e(69781),a=e(66261),i=e(83811),r=e(39501),o=e(3002),g=e(3876),u=e(36138),c=e(7257);function l(f){return!!(f.libraryPanel?.name&&f.libraryPanel?.uid)}class d{async makeExportable(m){m.cleanUpRepeats();const v=m.getSaveModelCloneOld();v.id=null,m.processRepeats();const E=[],p={},h={},s={},y=new Map;for(const b of v.getVariables())s[b.name]=b;const D=(b,T)=>{if(b.datasource===void 0){b.datasource=T;return}let O=b.datasource,R=null;const I=O?.uid;return I&&I.indexOf("$")===0&&(R=s[I.substring(1)],R&&R.current&&(O=R.current.value)),(0,a.F)().get(O).then(M=>{if(M.meta?.builtIn||(p["datasource"+M.meta?.id]={type:"datasource",id:M.meta.id,name:M.meta.name,version:M.meta.info.version||"1.0.0"},R))return;const x=b.libraryPanel,L=x?"-for-library-panel":"";let S="DS_"+M.name.replace(" ","_").toUpperCase()+L.toUpperCase();if(h[S]={name:S,label:M.name,description:"",type:"datasource",pluginId:M.meta?.id,pluginName:M.meta?.name,usage:h[S]?.usage},x){const U=h[S]?.usage?.libraryPanels||[];U.push({name:x.name,uid:x.uid}),h[S].usage={libraryPanels:U}}b.datasource={type:M.meta.id,uid:"${"+S+"}"}})},C=async b=>{if(b.type!=="row"){if(await D(b),b.targets)for(const O of b.targets)await D(O,b.datasource);const T=i.default.panels[b.type];T&&(p["panel"+T.id]={type:"panel",id:T.id,name:T.name,version:T.info.version})}},P=async b=>{if((0,o.V)(b)){const{name:T,uid:O}=b.libraryPanel;let R=b.libraryPanel.model;R||(R=(await(0,r.Mh)(O,!0)).model),await D(R);const{gridPos:I,id:M,...x}=R;y.has(O)||y.set(O,{name:T,uid:O,kind:g.V.Panel,model:x})}};try{for(const O of v.panels)if(await C(O),O.collapsed!==void 0&&O.collapsed===!0&&O.panels)for(const R of O.panels)await C(R);for(const O of v.getVariables())(0,u.Xh)(O)&&(await D(O),O.options=[],O.current={},O.refresh=O.refresh!==c.Bd.never?O.refresh:c.Bd.onDashboardLoad);for(const O of v.annotations.list)await D(O);p.grafana={type:"grafana",id:"grafana",name:"Grafana",version:i.default.buildInfo.version};for(const O of v.panels)if(await P(O),O.collapsed!==void 0&&O.collapsed===!0&&O.panels)for(const R of O.panels)await P(R);(0,n.each)(h,O=>{E.push(O)});for(const O of v.getVariables())if((0,u.VC)(O)){const R="VAR_"+O.name.replace(" ","_").toUpperCase();E.push({name:R,type:"constant",label:O.label||O.name,value:O.query,description:""}),O.query="${"+R+"}",O.current={value:O.query,text:O.query,selected:!1},O.options=[O.current]}const b=[...y.entries()].reduce((O,[R,I])=>(O[R]=I,O),{}),T=(0,n.defaults)({__inputs:E,__elements:b,__requires:(0,n.sortBy)(p,["id"])},v);for(let O=0;O<T.panels.length;O++){const R=T.panels[O];l(R)&&(T.panels[O]={gridPos:R.gridPos,id:R.id,libraryPanel:{uid:R.libraryPanel.uid,name:R.libraryPanel.name}})}return T}catch(b){return console.error("Export failed:",b),{error:b}}}}},69026:(Q,A,e)=>{"use strict";e.d(A,{u:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(41354);const o=({icon:u,iconType:c,iconSize:l,tooltip:d,onClick:f,children:m})=>{const v=(0,i.wW)(g);return a.createElement("div",{className:v.noBorderContainer},u&&a.createElement(r.h,{name:u,size:l,iconType:c,tooltip:d,tooltipPlacement:"bottom",onClick:f}),m)},g=u=>({noBorderContainer:(0,n.css)`
    padding: 0 ${u.spacing(.5)};
    display: flex;
  `})},50798:(Q,A,e)=>{"use strict";e.d(A,{C:()=>f});var n=e(31733),a=e(89026),i=e(1727),r=e(20685),o=e(95822),g=e(75923),u=e(53166),c=e(56811),l=e(89660),d=e(74642);class f extends n.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=v=>{(0,l.$t)().setAutoRefresh(v),this.forceUpdate()},this.onRefresh=()=>((0,l.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{g.h$.publish(new d.Qt({direction:d.Im.Left}))},this.onMoveForward=()=>{g.h$.publish(new d.Qt({direction:d.Im.Right}))},this.onChangeTimePicker=v=>{const{dashboard:E}=this.props,p=E.timepicker,h=p.nowDelay&&v.raw.to==="now",s=a.isMathString(v.raw.from)?v.raw.from:v.from,y=a.isMathString(v.raw.to)?v.raw.to:v.to,D={from:s,to:h?"now-"+p.nowDelay:y};(0,l.$t)().setTime(D)},this.onChangeTimeZone=v=>{this.props.dashboard.timezone=v,this.props.onChangeTimeZone(v),this.onRefresh()},this.onChangeFiscalYearStartMonth=v=>{this.props.dashboard.fiscalYearStartMonth=v,this.onRefresh()},this.onZoom=()=>{this.props.onToolbarZoomClick&&this.props.onToolbarZoomClick(),g.h$.publish(new d.p8({scale:2}))},this.onRefreshClick=()=>{this.props.onToolbarRefreshClick&&this.props.onToolbarRefreshClick(),this.onRefresh()}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(i.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:v,isOnCanvas:E}=this.props,{refresh_intervals:p}=v.timepicker,h=(0,l.$t)().getValidIntervals(p||r.o5),s=(0,l.$t)().timeRange(),y=v.getTimezone(),D=v.fiscalYearStartMonth,C=v.panelInEdit?.isEditing;let P;return v.refresh===c.Wg&&(P=(0,l.$t)().getAutoRefreshInteval().interval),n.createElement(n.Fragment,null,n.createElement(o.a,{value:s,onChange:this.onChangeTimePicker,timeZone:y,fiscalYearStartMonth:D,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:E,onToolbarTimePickerClick:this.props.onToolbarTimePickerClick}),n.createElement(r.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefreshClick,value:v.refresh,intervals:h,isOnCanvas:E,tooltip:(0,u.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:C,showAutoInterval:!0,text:P}))}}},93258:(Q,A,e)=>{"use strict";e.d(A,{t:()=>pe});var n=e(76932),a=e(31733),i=e(55024),r=e(97890),o=e(98827),g=e(21568),u=e(19690),c=e(52386),l=e(90069),d=e(14496),f=e(5460),m=e(73351),v=e(58947),E=e(71460),p=e(92810),h=e(97521),s=e(83811),y=e(42876),D=e(75923),C=e(46211),P=e(53166),b=e(9133),T=e(76067),O=e(67669),R=e(51343),I=e(49311),M=e(85498),x=e(63424),L=e(63711),S=e(92762),U=e(42342),N=e(50051);const G=({dashboard:Pe})=>{const Ee=(0,a.useMemo)(()=>(0,L.uZ)(),[]),he=(0,U.useDispatch)(),Le=(0,U.useSelector)(ke=>ke.dashboard.initialDatasource);return a.createElement(x.v,null,a.createElement(x.v.Item,{key:"add-visualisation",testId:g.wl.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,P.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const ke=(0,L.LU)(Pe,Le);S.a.toolbarAddButtonClicked({item:"add_visualization"}),u.E1.partial({editPanel:ke}),he((0,N.Rd)(void 0))}}),M.config.featureToggles.vizAndWidgetSplit&&a.createElement(x.v.Item,{key:"add-widget",testId:g.wl.pages.AddDashboard.itemButton("Add new widget menu item"),label:(0,P.t)("dashboard.add-menu.widget","Widget"),onClick:()=>{S.a.toolbarAddButtonClicked({item:"add_widget"}),u.E1.partial({addWidget:!0})}}),a.createElement(x.v.Item,{key:"add-row",testId:g.wl.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,P.t)("dashboard.add-menu.row","Row"),onClick:()=>{S.a.toolbarAddButtonClicked({item:"add_row"}),(0,L.L_)(Pe)}}),a.createElement(x.v.Item,{key:"add-panel-lib",testId:g.wl.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,P.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{S.a.toolbarAddButtonClicked({item:"import_from_library"}),(0,L.RB)(Pe)}}),a.createElement(x.v.Item,{key:"add-panel-clipboard",testId:g.wl.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,P.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{S.a.toolbarAddButtonClicked({item:"paste_panel"}),(0,L.Dh)(Pe,Ee)},disabled:!Ee}))},K=({dashboard:Pe,onToolbarAddMenuOpen:Ee})=>{const he=k((0,T.l4)()),[Le,ke]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{Le&&Ee&&Ee()},[Le,Ee]),a.createElement(O.L,{overlay:()=>a.createElement(G,{dashboard:Pe}),placement:"bottom",offset:[0,6],onVisibleChange:ke},a.createElement(R.zx,{icon:"panel-add",size:"lg",fill:"text",className:(0,n.cx)(he.button,he.buttonIcon,he.buttonText),"data-testid":g.wl.components.PageToolbar.itemButton("Add button")},a.createElement(P.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),a.createElement(I.J,{name:Le?"angle-up":"angle-down",size:"lg"})))};function k(Pe){return{button:(0,n.css)({label:"add-panel-button",padding:Pe.spacing(.5,.5,.5,.75),height:Pe.spacing((Pe.components.height.sm+Pe.components.height.md)/2),borderRadius:Pe.shape.radius.default}),buttonIcon:(0,n.css)({svg:{margin:0}}),buttonText:(0,n.css)({label:"add-panel-button-text",fontSize:Pe.typography.body.fontSize,span:{marginLeft:Pe.spacing(.67)}})}}var z=e(69760),W=e(60490),Z=e(7918),H=e(58838),X=e(74642),Y=e(19179),ne=e(69026),se=e(50798);const re=({dashboard:Pe})=>a.createElement(ne.u,{tooltip:(0,P.t)("dashboard.toolbar.share","Share dashboard"),icon:"share-alt",iconSize:"lg",onClick:()=>{S.a.toolbarShareClick(),u.E1.partial({shareView:"link"})}}),ge={setStarred:b.OQ,updateTimeZoneForSession:H.YT},q=(0,i.connect)(null,ge),me=g.wl.pages.Dashboard.DashNav;function oe(Pe){registerDynamicDashNavAction("left",Pe)}function fe(Pe){registerDynamicDashNavAction("right",Pe)}const ve=a.memo(Pe=>{(0,r.TH)();const Ee=(0,c.N)();(0,C.r)(Pe.dashboard.events,X.hS);const he=Pe.dashboard.snapshot?.originalUrl??"",Le=()=>{window.location.href=o.QX.sanitizeUrl(Pe.dashboard.snapshot.originalUrl)},ke=(0,y.iG)(),ot=()=>{try{const Fe=new URL(o.QX.sanitizeUrl(he),s.default.appUrl),Te=new URL(s.default.appUrl);Fe.host!==Te.host?D.h$.publish(new X.Dn({component:l.s,props:{title:"Proceed to external site?",modalClass:Me,body:a.createElement(a.Fragment,null,a.createElement("p",null,"This link connects to an external website at"," ",a.createElement("code",null,he)),a.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:Le}})):Le()}catch(Fe){ke.error("Invalid URL",Fe instanceof Error?Fe.message:void 0)}},it=()=>{S.a.toolbarFavoritesClick();const Fe=(0,W.h4)(),{dashboard:Te,setStarred:Ve}=Pe;Fe.starDashboard(Te.uid,!!Te.meta.isStarred).then(tt=>{Ve({id:Te.uid,title:Te.title,url:Te.meta.url??"",isStarred:tt}),Te.meta.isStarred=tt,Ee()})},ce=()=>{S.a.toolbarSettingsClick(),u.E1.partial({editview:"settings"})},le=()=>{Z.r0.prev()},Re=()=>{Z.r0.next()},Ae=()=>{Z.r0.stop(),Ee()},Oe=(Fe,Te)=>{Fe.map((Ve,tt)=>{const ae=Ve.component,J=a.createElement(ae,{...Pe,key:`button-custom-${tt}`});typeof Ve.index=="number"?Te.splice(Ve.index,0,J):Te.push(J)})},$e=()=>Z.r0.isPlaying,Ye=()=>{const{dashboard:Fe,kioskMode:Te}=Pe,{canStar:Ve,canShare:tt,isStarred:ae}=Fe.meta,J=[];if(Te||$e())return[];if(Ve){let te=ae?(0,P.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,P.t)("dashboard.toolbar.mark-favorite","Mark as favorite");J.push(a.createElement(ne.u,{tooltip:te,icon:ae?"favorite":"star",iconType:ae?"mono":"default",iconSize:"lg",onClick:it,key:"button-star"}))}return tt&&J.push(a.createElement(re,{key:"button-share",dashboard:Fe})),Fe.meta.publicDashboardEnabled&&J.push(a.createElement(d.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":me.publicDashboardTag})),s.default.featureToggles.scenes&&!Fe.isSnapshot()&&J.push(a.createElement(ne.u,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>{u.E1.partial({scenes:!0})}})),Oe(Y.j.left,J),J},Ne=()=>a.createElement(f.h,{key:"playlist-buttons"},a.createElement(m.h,{tooltip:(0,P.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:le,narrow:!0}),a.createElement(m.h,{onClick:Ae},a.createElement(P.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),a.createElement(m.h,{tooltip:(0,P.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:Re,narrow:!0})),je=()=>{const{dashboard:Fe,updateTimeZoneForSession:Te,hideTimePicker:Ve}=Pe;return Ve?null:a.createElement(se.C,{dashboard:Fe,onChangeTimeZone:Te,onToolbarRefreshClick:S.a.toolbarRefreshClick,onToolbarZoomClick:S.a.toolbarZoomClick,onToolbarTimePickerClick:S.a.toolbarTimePickerClick,key:"time-controls"})},ut=()=>{const{dashboard:Fe,onAddPanel:Te,isFullscreen:Ve,kioskMode:tt}=Pe,{canSave:ae,canEdit:J,showSettings:te}=Fe.meta,{snapshot:de}=Fe,be=de&&de.originalUrl,De=[];return $e()?[Ne(),je()]:tt===U.KioskMode.TV?[je()]:(J&&!Ve&&(s.default.featureToggles.emptyDashboardPage?De.push(a.createElement(K,{dashboard:Fe,onToolbarAddMenuOpen:S.a.toolbarAddClick,key:"panel-add-dropdown"})):De.push(a.createElement(m.h,{tooltip:(0,P.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:Te,key:"button-panel-add"}))),ae&&!Ve&&De.push(a.createElement(v.JY,{key:"button-save"},({showModal:Ue,hideModal:We})=>a.createElement(m.h,{tooltip:(0,P.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{S.a.toolbarSaveClick(),Ue(z.d,{dashboard:Fe,onDismiss:We})}}))),be&&De.push(a.createElement(m.h,{tooltip:(0,P.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:ot,icon:"link",key:"button-snapshot"})),te&&De.push(a.createElement(m.h,{tooltip:(0,P.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:ce,key:"button-settings"})),Oe(Y.j.right,De),De.push(je()),De)};return a.createElement(p.A,{actions:a.createElement(a.Fragment,null,Ye(),a.createElement(h.M,{leftActionsSeparator:!0}),a.createElement(E.R,{alignment:"right"},ut()))})});ve.displayName="DashNav";const pe=q(ve),Me=(0,n.css)({width:"max-content",maxWidth:"80vw"})},27774:(Q,A,e)=>{"use strict";e.d(A,{P:()=>s});var n=e(69781),a=e(31733),i=e(17201),r=e(21568),o=e(5284),g=e(85765),u=e(60100),c=e(55048),l=e(64516),d=e(76772),f=e(53166),m=e(20685),v=e(89660);const E=({refreshIntervals:y,onRefreshIntervalChange:D,getIntervalsFunc:C=h,validateIntervalsFunc:P=p})=>{const[b,T]=(0,a.useState)(C(y??m.o5)),[O,R]=(0,a.useState)(null);(0,a.useEffect)(()=>{const L=C(y??m.o5);T(L)},[C,y]);const I=(0,a.useMemo)(()=>Array.isArray(b)?b.join(","):"",[b]),M=(0,a.useCallback)(L=>{const S=L.currentTarget.value?L.currentTarget.value.split(","):[];T(S)},[T]),x=(0,a.useCallback)(L=>{const S=P(b);S===null&&D(C(b)),R(S)},[C,b,D,P]);return a.createElement(g.g,{label:(0,f.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,f.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list."),error:O,invalid:!!O},a.createElement(l.I,{id:"auto-refresh-input",invalid:!!O,value:I,onChange:M,onBlur:x}))},p=(y,D={getTimeSrv:v.$t})=>{try{return h(y,D),null}catch(C){return C instanceof Error?C.message:"Invalid intervals"}},h=(y,D={getTimeSrv:v.$t})=>{const C=y.filter(P=>P.trim()!=="").map(P=>P.replace(/\s+/g,""));return[...new Set(D.getTimeSrv().getValidIntervals(C))]};class s extends a.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=D=>{const C=D.currentTarget.value;if((0,n.isEmpty)(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);if(i.isValidTimeSpan(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=D=>{typeof D=="string"&&this.props.onTimeZoneChange(D)},this.onWeekStartChange=D=>{this.props.onWeekStartChange(D)}}render(){return a.createElement(o.s,{label:(0,f.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0},a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":r.wl.components.TimeZonePicker.containerV2},a.createElement(u.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":r.wl.components.WeekStartPicker.containerV2},a.createElement(c.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),a.createElement(E,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,f.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete.")},a.createElement(l.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker")},a.createElement(d.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously re-draw panels where the time range references 'now'")},a.createElement(d.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},84326:(Q,A,e)=>{"use strict";e.d(A,{D:()=>ur});var n=e(31733),a=e(97890),i=e(84912),r=e(21568),o=e(19690),g=e(51343),u=e(71460),c=e(92810),l=e(50186),d=e(83811),f=e(53166),m=e(56811),v=e(42342),E=e(74642),p=e(55024),h=e(51158),s=e(85498),y=e(76932),D=e(59326),C=e(64704),P=e(76067),b=e(5284),T=e(79106),O=e(89719),R=e(58037),I=e(49311),M=e(41354),x=e(5572);const L=({nodes:Tt,edges:Pt,direction:qt,width:jt,height:on,onDoubleClick:En})=>{const Tn=(0,n.useRef)(null),Nn=(0,n.useRef)(null),kn=(0,n.useCallback)(Ea=>{En&&En(Ea.nodes[0])},[En]);return(0,n.useEffect)(()=>((async()=>{const ta=await e.e(8271).then(e.t.bind(e,22892,23)),ia={nodes:S(ta,Tt),edges:U(ta,Pt)},Aa={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:qt??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Tn.current=new ta.Network(Nn.current,ia,Aa),Tn.current?.on("doubleClick",kn)})(),()=>{Tn.current&&Tn.current.off("doubleClick")}),[qt,Pt,Tt,kn]),n.createElement("div",null,n.createElement("div",{ref:Nn,style:{width:jt??"100%",height:on??"60vh"}}))};function S(Tt,Pt){const qt=Pt.map(jt=>({...jt,shape:"box"}));return new Tt.DataSet(qt)}function U(Tt,Pt){const qt=Pt.map(jt=>({...jt,arrows:"to",dashes:!0}));return new Tt.DataSet(qt)}function N({edges:Tt,nodes:Pt,show:qt,title:jt,children:on}){const[En,Tn]=(0,n.useState)(qt),Nn=(0,n.useCallback)(()=>Tn(!0),[Tn]),kn=(0,n.useCallback)(()=>Tn(!1),[Tn]);return n.createElement(n.Fragment,null,n.createElement(x.u,{isOpen:En,title:jt,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:kn,onDismiss:kn},n.createElement(L,{nodes:Pt,edges:Tt})),on({showModal:Nn}))}const w=({id:Tt,usages:Pt})=>{const qt=(0,n.useMemo)(()=>Pt.find(on=>on.variable.id===Tt),[Tt,Pt]);if(!qt)return null;const jt=qt.nodes.map(on=>on.label.includes(`$${Tt}`)?{...on,color:"#FB7E81"}:on);return n.createElement(N,{show:!1,title:`Showing usages for: $${Tt}`,nodes:jt,edges:qt.edges},({showModal:on})=>n.createElement(M.h,{onClick:()=>on(),name:"code-branch",tooltip:"Show usages","data-testid":"VariablesUnknownButton"}))};var G=e(63694);const _=1e3;function K({variables:Tt,dashboard:Pt}){const[qt,jt]=(0,n.useState)(!1),[on,En]=(0,n.useState)(0),[Tn,Nn]=(0,n.useState)([]),kn=(0,P.wW)(Z);(0,n.useEffect)(()=>En(ia=>ia+1),[Tt,Pt]);const{loading:Ea}=(0,D.Z)(async()=>{if(qt&&on>0){const ia=Date.now(),Aa=await(0,G.Yg)(Tt,Pt),Ga=Date.now()-ia;return Ga>=_&&(0,C.ff)("Slow unknown variables expansion",{elapsed:Ga}),En(0),Nn(Aa),Aa}return[]},[Tt,Pt,qt,on]),ta=ia=>{ia&&(0,C.ff)("Unknown variables section expanded"),jt(ia)};return n.createElement("div",{className:kn.container},n.createElement(b.s,{label:n.createElement(k,null),isOpen:qt,onToggle:ta},Ea&&n.createElement(T.wc,{justify:"center"},n.createElement(T.Lh,{justify:"center"},n.createElement("span",null,"Loading..."),n.createElement(O.$,null))),!Ea&&Tn&&n.createElement(n.Fragment,null,Tn.length===0&&n.createElement(z,null),Tn.length>0&&n.createElement(W,{usages:Tn}))))}function k(){const Tt=(0,P.wW)(Z);return n.createElement("h5",null,"Renamed or missing variables",n.createElement(R.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},n.createElement(I.J,{name:"info-circle",className:Tt.infoIcon})))}function z(){return n.createElement("span",null,"No renamed or missing variables found.")}function W({usages:Tt}){const Pt=(0,P.wW)(Z);return n.createElement("table",{className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Variable"),n.createElement("th",{colSpan:5}))),n.createElement("tbody",null,Tt.map(qt=>{const{variable:jt}=qt,{id:on,name:En}=jt;return n.createElement("tr",{key:on},n.createElement("td",{className:Pt.firstColumn},n.createElement("span",null,En)),n.createElement("td",{className:Pt.defaultColumn}),n.createElement("td",{className:Pt.defaultColumn}),n.createElement("td",{className:Pt.defaultColumn}),n.createElement("td",{className:Pt.lastColumn},n.createElement(w,{id:jt.id,usages:Tt})))})))}const Z=Tt=>({container:(0,y.css)`
    margin-top: ${Tt.spacing(4)};
    padding-top: ${Tt.spacing(4)};
  `,infoIcon:(0,y.css)`
    margin-left: ${Tt.spacing(1)};
  `,defaultColumn:(0,y.css)`
    width: 1%;
  `,firstColumn:(0,y.css)`
    width: 1%;
    vertical-align: top;
    color: ${Tt.colors.text.maxContrast};
  `,lastColumn:(0,y.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var H=e(51099),X=e(99282),Y=e(63033),ne=e(77378),se=e(90069);function re({varName:Tt,isOpen:Pt=!1,onConfirm:qt,onDismiss:jt}){return n.createElement(se.s,{title:"Delete variable",isOpen:Pt,onConfirm:qt,onDismiss:jt,body:`
      Are you sure you want to delete variable "${Tt}"?
    `,modalClass:ge.modal,confirmText:"Delete"})}const ge={modal:(0,y.css)({width:"max-content",maxWidth:"80vw"})};var q=e(20298),me=e(73731),oe=e(36138),fe=e(43773),ve=e(59970),pe=e(85765),Me=e(96856);const Pe=[{label:"Label and value",value:ve.bU.dontHide},{label:"Value",value:ve.bU.hideLabel},{label:"Nothing",value:ve.bU.hideVariable}];function Ee({onChange:Tt,hide:Pt,type:qt}){const jt=(0,n.useMemo)(()=>Pe.find(on=>on.value===Pt)?.value??Pe[0].value,[Pt]);return qt==="constant"?null:n.createElement(pe.g,{label:"Show on dashboard"},n.createElement(Me.S,{options:Pe,onChange:Tt,value:jt}))}var he=e(66426),Le=e(58387),ke=e(6998),ot=e(13413);function it({onChange:Tt,type:Pt}){const qt=(0,n.useMemo)(()=>(0,ne.bi)(),[]),jt=(0,n.useMemo)(()=>qt.find(on=>on.value===Pt)??qt[0],[qt,Pt]);return n.createElement(ot.u,{name:"Select variable type",value:jt,options:qt,onChange:Tt,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var ce=e(47701),le=e(20888);const Re=({variable:{options:Tt}})=>{const[Pt,qt]=(0,n.useState)(20),[jt,on]=(0,n.useState)([]),En=(0,n.useCallback)(Nn=>{Nn.preventDefault(),qt(Pt+20)},[Pt,qt]),Tn=(0,P.wW)(Ae);return(0,n.useEffect)(()=>on(Tt.slice(0,Pt)),[Pt,Tt]),jt.length?n.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},n.createElement("h5",null,"Preview of values"),n.createElement(ce.Z,null,jt.map((Nn,kn)=>n.createElement(ce.Z,{key:`${Nn.value}-${kn}`,className:Tn.optionContainer},n.createElement(le.W,{"aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},n.createElement("div",{className:Tn.label},Nn.text))))),Tt.length>Pt&&n.createElement(ce.Z,{className:Tn.optionContainer},n.createElement(g.zx,{onClick:En,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Re.displayName="VariableValuesPreview";function Ae(Tt){return{wrapper:(0,y.css)({display:"flex",flexDirection:"column",marginTop:Tt.spacing(2)}),optionContainer:(0,y.css)({marginLeft:Tt.spacing(.5),marginBottom:Tt.spacing(.5)}),label:(0,y.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var Oe=e(69781),$e=e(79454),Ye=e(6832);const Ne=Tt=>async Pt=>{const{rootStateKey:qt}=Tt;Pt((0,H.mb)(qt,(0,Ye.wJ)({name:(0,X.E0)(Tt).name,id:Tt.id})))},je=Tt=>async(Pt,qt)=>{const{rootStateKey:jt}=Tt;Pt((0,H.mb)(jt,(0,Ye.qe)((0,ne.Y6)(Tt))))},ut=(Tt,Pt)=>(qt,jt)=>{const{id:on,rootStateKey:En}=Tt;let Tn=null;if(Pt.match(/^(?!__).*$/)||(Tn="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Pt.match(/^\w+$/)||(Tn="Only word characters are allowed in variable names"),(0,X.gt)(En,jt()).filter(Ea=>Ea.name===Pt&&Ea.id!==on).length&&(Tn="Variable with the same name already exists"),Tn){qt((0,H.mb)(En,(0,Ye.y8)({newName:Pt,errorText:Tn})));return}qt(Fe(Tt,Pt))},Fe=(Tt,Pt)=>(qt,jt)=>{const{rootStateKey:on}=Tt,En=(0,X.E0)(Tt,jt());if(En.name===Pt){qt((0,H.mb)(on,(0,Ye.Yo)((0,ne.Y6)(Tt,{newName:Pt}))));return}const Tn={...(0,Oe.cloneDeep)(En),name:Pt,id:Pt},Nn=En.global,kn=En.index,Ea=(0,ne.yQ)(Tn);qt((0,H.mb)(on,(0,Y.VN)((0,ne.Y6)(Ea,{global:Nn,index:kn,model:Tn})))),qt((0,H.mb)(on,(0,Ye.Yo)((0,ne.Y6)(Ea,{newName:Pt})))),qt((0,H.mb)(on,(0,Y.mZ)((0,ne.Y6)(Tt,{reIndex:!1}))))},Te=(Tt,Pt="query")=>(qt,jt)=>{const on=(0,ne.mn)(Tt),En=(0,X.gt)(on,jt()),Tn=tt(Pt,En),Nn={type:Pt,id:Tn},kn=!1,Ea=(0,X.Eo)(on,jt()),ta=(0,Oe.cloneDeep)(me.z.get(Pt).initialState);ta.id=Tn,ta.name=Tn,ta.rootStateKey=on,qt((0,H.mb)(on,(0,Y.VN)((0,ne.Y6)(Nn,{global:kn,model:ta,index:Ea})))),o.E1.partial({editIndex:En.length})},Ve=Tt=>(Pt,qt)=>{const jt=(0,ne.mn)(Tt),on=qt(),En=(0,X.xD)(jt,on),Tn=on.dashboard.getModel(),{usages:Nn}=(0,G.V)(En,Tn),kn=(0,G.vI)(Nn);Pt((0,H.mb)(jt,(0,$e.j4)({usages:Nn,usagesNetwork:kn})))};function tt(Tt,Pt){let qt=0,jt=`${Tt}${qt}`;for(;Pt.find(on=>on.id===jt);)jt=`${Tt}${++qt}`;return jt}var ae=(Tt=>(Tt[Tt.MaxSize=50]="MaxSize",Tt))(ae||{});const J=(Tt,Pt)=>({editor:(0,X.AE)(Pt.identifier.rootStateKey,Tt).editor,variable:(0,X.E0)(Pt.identifier,Tt)}),te=Tt=>({...(0,h.bindActionCreators)({variableEditorMount:Ne,variableEditorUnMount:je,changeVariableName:ut,updateOptions:fe.Rk},Tt),changeVariableProp:(Pt,qt,jt)=>Tt((0,H.mb)(Pt.rootStateKey,(0,Y.Pl)((0,ne.Y6)(Pt,{propName:qt,propValue:jt})))),changeVariableType:(Pt,qt)=>Tt((0,H.mb)(Pt.rootStateKey,(0,Y.Be)((0,ne.Y6)(Pt,{newType:qt})))),removeVariable:Pt=>{Tt((0,H.mb)(Pt.rootStateKey,(0,Y.mZ)((0,ne.Y6)(Pt,{reIndex:!0}))))}}),de=(0,p.connect)(J,te);class be extends n.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Pt=>{Pt.preventDefault(),this.props.changeVariableName(this.props.identifier,Pt.currentTarget.value)},this.onTypeChange=Pt=>{Pt.value&&this.props.changeVariableType(this.props.identifier,Pt.value)},this.onLabelChange=Pt=>{Pt.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Pt.currentTarget.value)},this.onDescriptionChange=Pt=>{this.props.changeVariableProp(this.props.identifier,"description",Pt.currentTarget.value)},this.onHideChange=Pt=>{this.props.changeVariableProp(this.props.identifier,"hide",Pt)},this.onPropChanged=({propName:Pt,propValue:qt,updateOptions:jt=!1})=>{this.props.changeVariableProp(this.props.identifier,Pt,qt),jt&&this.props.updateOptions((0,ne.yQ)(this.props.variable))},this.onHandleSubmit=async Pt=>{Pt.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,ne.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),o.E1.partial({editIndex:null})},this.onApply=()=>{o.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Pt}=this.props,qt=me.z.get(this.props.variable.type).editor;if(!qt)return null;const jt=Pt.state===q.Gu.Loading;return n.createElement(n.Fragment,null,n.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},n.createElement(it,{onChange:this.onTypeChange,type:this.props.variable.type}),n.createElement(he.e,null,"General"),n.createElement(ke.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:ae.MaxSize,required:!0}),n.createElement(ke.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),n.createElement(Le.W,{name:"Description",value:Pt.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),n.createElement(Ee,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),qt&&n.createElement(qt,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,oe.eL)(this.props.variable)?n.createElement(Re,{variable:this.props.variable}):null,n.createElement("div",{style:{marginTop:"16px"}},n.createElement(T.Lh,{spacing:"md",height:"inherit"},n.createElement(g.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),n.createElement(g.zx,{type:"submit","aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:jt,variant:"secondary"},"Run query",jt&&n.createElement(I.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),n.createElement(g.zx,{variant:"primary",onClick:this.onApply,"data-testid":r.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),n.createElement(re,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const De=de(be);var Ue=e(4113),We=e(37739),et=e(88511),ze=e(86573);const _e=({variables:Tt})=>{const Pt=(0,n.useMemo)(()=>(0,G.GQ)(Tt),[Tt]),qt=(0,n.useMemo)(()=>(0,G.MJ)(Tt),[Tt]);return qt.length?n.createElement(N,{show:!1,title:"Dependencies",nodes:(0,G.Of)(Pt,qt),edges:qt},({showModal:jt})=>n.createElement(g.zx,{onClick:()=>{(0,C.ff)("Show variable dependencies"),jt()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},qe=Tt=>n.createElement(p.Provider,{store:ze.h},n.createElement(_e,{...Tt})),at=({id:Tt,usages:Pt,isAdhoc:qt})=>{const jt=(0,n.useMemo)(()=>Pt.find(En=>En.variable.id===Tt),[Pt,Tt]);if(Pt.length===0||qt||!jt)return null;const on=jt.nodes.map(En=>En.label.includes(`$${Tt}`)?{...En,color:"#FB7E81"}:En);return n.createElement(N,{show:!1,title:`Showing usages for: $${Tt}`,nodes:on,edges:jt.edges},({showModal:En})=>n.createElement(M.h,{onClick:()=>{(0,C.ff)("Show variable usages"),En()},name:"code-branch",tooltip:"Show usages"}))};function lt({index:Tt,variable:Pt,usageTree:qt,usagesNetwork:jt,onEdit:on,onDuplicate:En,onDelete:Tn}){const Nn=(0,P.l4)(),kn=(0,P.wW)(wt),Ea=ft(Pt),ia=(0,G.Rv)(Pt.id,qt)>0||Pt.type==="adhoc",Aa=(0,ne.yQ)(Pt);return n.createElement(Ue._l,{draggableId:JSON.stringify(Aa),index:Tt},(Ms,Ga)=>n.createElement("tr",{ref:Ms.innerRef,...Ms.draggableProps,style:{userSelect:Ga.isDragging?"none":"auto",background:Ga.isDragging?Nn.colors.background.secondary:void 0,...Ms.draggableProps.style}},n.createElement("td",{role:"gridcell",className:kn.column},n.createElement(g.zx,{size:"xs",fill:"text",onClick:_s=>{_s.preventDefault(),on(Aa)},className:kn.nameLink,"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Pt.name)},Pt.name)),n.createElement("td",{role:"gridcell",className:kn.definitionColumn,onClick:_s=>{_s.preventDefault(),on(Aa)},"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Pt.name)},Ea),n.createElement("td",{role:"gridcell",className:kn.column},n.createElement("div",{className:kn.icons},n.createElement(yt,{passed:ia}),n.createElement(at,{id:Pt.id,isAdhoc:Pt.type==="adhoc",usages:jt}),n.createElement(M.h,{onClick:_s=>{_s.preventDefault(),(0,C.ff)("Duplicate variable"),En(Aa)},name:"copy",tooltip:"Duplicate variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Pt.name)}),n.createElement(M.h,{onClick:_s=>{_s.preventDefault(),(0,C.ff)("Delete variable"),Tn(Aa)},name:"trash-alt",tooltip:"Remove variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Pt.name)}),n.createElement("div",{...Ms.dragHandleProps,className:kn.dragHandle},n.createElement(I.J,{name:"draggabledots",size:"lg"}))))))}function ft(Tt){let Pt="";return Tt.type==="query"?Tt.definition?Pt=Tt.definition:typeof Tt.query=="string"&&(Pt=Tt.query):(0,oe.eL)(Tt)&&(Pt=Tt.query),Pt}function yt({passed:Tt}){const Pt=(0,P.wW)(wt);return Tt?n.createElement(I.J,{name:"check",className:Pt.iconPassed,title:"This variable is referenced by other variables or dashboard."}):n.createElement(I.J,{name:"exclamation-triangle",className:Pt.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function wt(Tt){return{dragHandle:(0,y.css)`
      cursor: grab;
      margin-left: ${Tt.spacing(1)};
    `,column:(0,y.css)`
      width: 1%;
    `,nameLink:(0,y.css)`
      cursor: pointer;
      color: ${Tt.colors.primary.text};
    `,definitionColumn:(0,y.css)`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:(0,y.css)`
      color: ${Tt.v1.palette.greenBase};
      margin-right: ${Tt.spacing(2)};
    `,iconFailed:(0,y.css)`
      color: ${Tt.v1.palette.orange};
      margin-right: ${Tt.spacing(2)};
    `,icons:(0,y.css)`
      display: flex;
      gap: ${Tt.spacing(2)};
      align-items: center;
    `}}function zt({variables:Tt,usages:Pt,usagesNetwork:qt,onChangeOrder:jt,onAdd:on,onEdit:En,onDelete:Tn,onDuplicate:Nn}){const kn=(0,P.wW)(Ie),Ea=ta=>{if(!ta.destination||!ta.source)return;(0,C.ff)("Variable drag and drop");const ia=JSON.parse(ta.draggableId);jt(ia,Tt[ta.source.index].index,Tt[ta.destination.index].index)};return n.createElement("div",null,n.createElement("div",null,Tt.length===0&&n.createElement($t,{onAdd:on}),Tt.length>0&&n.createElement(We.K,{direction:"column",gap:4},n.createElement("div",{className:kn.tableContainer},n.createElement("table",{className:"filter-table filter-table--hover","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Variable"),n.createElement("th",null,"Definition"),n.createElement("th",{colSpan:5}))),n.createElement(Ue.Z5,{onDragEnd:Ea},n.createElement(Ue.bK,{droppableId:"variables-list",direction:"vertical"},ta=>n.createElement("tbody",{ref:ta.innerRef,...ta.droppableProps},Tt.map((ia,Aa)=>n.createElement(lt,{index:Aa,key:`${ia.name}-${Aa}`,variable:ia,usageTree:Pt,usagesNetwork:qt,onDelete:Tn,onDuplicate:Nn,onEdit:En})),ta.placeholder))))),n.createElement(We.K,null,n.createElement(qe,{variables:Tt}),n.createElement(g.zx,{"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:on,icon:"plus"},"New variable")))))}function $t({onAdd:Tt}){return n.createElement("div",null,n.createElement(et.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Pt=>{Pt.preventDefault(),Tt()}}))}const Ie=()=>({tableContainer:(0,y.css)`
    overflow: scroll;
    width: 100%;
  `}),st=(Tt,Pt)=>{const{uid:qt}=Pt.dashboard,jt=(0,X.AE)(qt,Tt);return{variables:(0,X.xD)(qt,Tt),idInEditor:jt.editor.id,usagesNetwork:jt.inspect.usagesNetwork,usages:jt.inspect.usages}},Mt=Tt=>({...(0,h.bindActionCreators)({createNewVariable:Te,initListMode:Ve},Tt),changeVariableOrder:(Pt,qt,jt)=>Tt((0,H.mb)(Pt.rootStateKey,(0,Y.gE)((0,ne.Y6)(Pt,{fromIndex:qt,toIndex:jt})))),duplicateVariable:Pt=>Tt((0,H.mb)(Pt.rootStateKey,(0,Y.Y9)((0,ne.Y6)(Pt,{newId:void 0})))),removeVariable:Pt=>{Tt((0,H.mb)(Pt.rootStateKey,(0,Y.mZ)((0,ne.Y6)(Pt,{reIndex:!0}))))}}),ct=(0,p.connect)(st,Mt);class nt extends n.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Pt=>{const qt=this.props.variables.findIndex(jt=>jt.id===Pt.id);o.E1.partial({editIndex:qt})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Pt,qt,jt)=>{this.props.changeVariableOrder(Pt,qt,jt)},this.onDuplicateVariable=Pt=>{this.props.duplicateVariable(Pt)},this.onModalOpen=Pt=>{this.setState({variableId:Pt})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Pt,variables:qt,sectionNav:jt}=this.props,on=Pt!=null?qt[Pt]:void 0,En=jt.node,Tn=s.config.featureToggles.dockedMegaMenu&&En.parentItem?{...En.parentItem,url:En.url}:void 0,Nn=on?{text:on.name,parentItem:Tn}:Tn;return n.createElement(l.T,{navModel:this.props.sectionNav,pageNav:Nn},!on&&n.createElement(zt,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!on&&this.props.variables.length>0&&n.createElement(K,{variables:this.props.variables,dashboard:this.props.dashboard}),on&&n.createElement(De,{identifier:(0,ne.yQ)(on)}),n.createElement(re,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Ct=ct(nt);var kt=e(49465),Jt=e(75923);const tn=({dashboard:Tt,sectionNav:Pt})=>{const qt=Jt.Vt.hasPermission(v.AccessControlAction.DashboardsPermissionsWrite),jt=s.config.featureToggles.dockedMegaMenu?Pt.node.parentItem:void 0;return n.createElement(l.T,{navModel:Pt,pageNav:jt},n.createElement(kt.P,{resource:"dashboards",resourceId:Tt.uid,canSetPermissions:qt}))};var Kt=e(9526),cn=e(44992),dn=e(66261),Sn=e(97216),Zn=e(64516),_n=e(36356),Ut=e(38834),Xt=e(24397),en=e(71892),gn=e(56315),ln=e(60490),xn=e(89660),Dn=e(25353),Ln=e(69434),hn=e(14354),Gn=e(27957),Vn=e(7274),$n=e(86850);class Wn extends n.PureComponent{constructor(Pt){super(Pt),this.updateFields=()=>{const qt=this.props.response?.panelData,jt=qt?.series?.[0]??qt?.annotations?.[0];if(jt&&jt.fields){const on=jt.fields.map(En=>{const Tn=(0,Gn.CZ)(En,jt);let Nn="";for(let kn=0;kn<jt.length;kn++){if(kn>0&&(Nn+=", "),kn>2){Nn+="...";break}Nn+=En.values[kn]}return Nn.length>50&&(Nn=Nn.substring(0,50)+"..."),{label:`${Tn} (${En.type})`,value:Tn,description:Nn}});this.setState({fieldNames:on})}},this.onFieldSourceChange=(qt,jt)=>{const on=this.props.mappings||{},En=on[qt]||{};this.props.change({...on,[qt]:{...En,source:jt.value||Vn.L.Field}})},this.onFieldNameChange=(qt,jt)=>{const on=this.props.mappings||{};if(!jt){const Tn={...this.props.mappings};delete Tn[qt],this.props.change(Tn);return}const En=on[qt]||{};this.props.change({...on,[qt]:{...En,value:jt.value,source:Vn.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(Pt){Pt.response!==this.props.response&&this.updateFields()}renderRow(Pt,qt,jt){const{fieldNames:on}=this.state;let En=[...on];const Tn=qt.value;let Nn=on.find(Ea=>Tn===Ea.value);Tn&&!Nn&&En.push({label:Tn,value:Tn});let kn=jt?jt[Pt.key]:"";if(kn&&Pt.key.startsWith("time")){const Ea=(0,$n.Cf)("dateTimeAsIso");kn=(0,$n.zc)(Ea(kn))}return kn==null&&(kn=""),n.createElement("tr",{key:Pt.key},n.createElement("td",null,Pt.label||Pt.key," ",Pt.help&&n.createElement(R.u,{content:Pt.help},n.createElement(I.J,{name:"info-circle"}))),n.createElement("td",null,n.createElement(Ut.Ph,{value:Nn,options:En,placeholder:Pt.placeholder||Pt.key,onChange:Ea=>{this.onFieldNameChange(Pt.key,Ea)},noOptionsMessage:"Unknown field names",allowCustomValue:!0,isClearable:!0})),n.createElement("td",null,`${kn}`))}render(){const Pt=this.props.response?.events?.[0],qt=this.props.mappings||{};return n.createElement("table",{className:"filter-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Annotation"),n.createElement("th",null,"From"),n.createElement("th",null,"First Value"))),n.createElement("tbody",null,hn.r0.map(jt=>this.renderRow(jt,qt[jt.key]||{},Pt))))}}class Pn extends n.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:Pt,annotation:qt}=this.props;if((0,hn.yr)(Pt))return;const jt=(0,ln.h4)().getCurrent();if(!jt)return;this.setState({running:!0});const on=await(0,en.n)((0,Ln.r)({range:(0,xn.$t)().timeRange(),panel:new Dn.r({}),dashboard:jt},Pt,qt));this.setState({running:!1,response:on})},this.onQueryChange=Pt=>{this.props.onChange({...this.props.annotation,target:Pt})},this.onMappingChange=Pt=>{this.props.onChange({...this.props.annotation,mappings:Pt})},this.onAnnotationChange=Pt=>{this.props.onChange(Pt)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(Pt){this.props.annotation!==Pt.annotation&&!(0,hn.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:Pt,annotation:qt}=this.props,on={...hn.yA,...Pt.annotations}.prepareAnnotation(qt);on!==qt?this.props.onChange(on):this.onRunQuery()}renderStatus(){const{response:Pt,running:qt}=this.state;let jt="alert-info",on="...",En;if(qt||Pt?.panelData?.state===q.Gu.Loading||!Pt)on="loading...";else{const{events:Tn,panelData:Nn}=Pt;if(Nn?.error)jt="alert-error",En="exclamation-triangle",on=Nn.error.message??"error";else if(!Tn?.length)jt="alert-warning",En="exclamation-triangle",on="No events found";else{const kn=Nn?.series?.[0]??Nn?.annotations?.[0];on=`${Tn.length} events (from ${kn?.fields.length} fields)`}}return n.createElement("div",{className:(0,y.cx)(jt,(0,y.css)`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},n.createElement("div",null,En&&n.createElement(n.Fragment,null,n.createElement(I.J,{name:En}),"\xA0"),on),n.createElement("div",null,qt?n.createElement(O.$,null):n.createElement(g.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:Pt,annotation:qt,datasourceInstanceSettings:jt}=this.props,{response:on}=this.state;let En=Pt.annotations?.QueryEditor||Pt.components?.QueryEditor;if(!En)return n.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Tn={...Pt.annotations?.getDefaultQuery?.(),...qt.target??{refId:"Anno"}};return n.createElement(n.Fragment,null,n.createElement(gn.n,{instanceSettings:jt},n.createElement(En,{key:Pt?.name,query:Tn,datasource:Pt,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:on?.panelData,range:(0,xn.$t)().timeRange(),annotation:qt,onAnnotationChange:this.onAnnotationChange})),(0,hn.$w)(Pt)&&n.createElement(n.Fragment,null,this.renderStatus(),n.createElement(Wn,{response:on,mappings:qt.mappings,change:this.onMappingChange})))}}var sa=e(79228),va=e(80091);class An extends n.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(Pt){Pt.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const Pt=(0,va.w)(),qt='<plugin-component type="annotations-query-ctrl"> </plugin-component>',jt={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=Pt.load(this.ref,jt,qt),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(jt.ctrl.ignoreNextWatcherFiring){jt.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(jt.ctrl.currentAnnotation)}),this.scopeProps=jt}render(){return n.createElement("div",{ref:Pt=>this.ref=Pt})}}const Xn="New annotation",ra=({editIdx:Tt,dashboard:Pt})=>{const qt=(0,P.wW)(ga),[jt,on]=(0,n.useState)(Pt.annotations.list[Tt]),En=(0,n.useMemo)(()=>jt.filter?jt.filter.exclude?2:1:0,[jt.filter]),{value:Tn}=(0,D.Z)(()=>(0,dn.F)().get(jt.datasource),[jt.datasource]),Nn=(0,dn.F)().getInstanceSettings(jt.datasource),kn=La=>{const ms=[...Pt.annotations.list];ms.splice(Tt,1,La),on(La),Pt.annotations.list=ms},Ea=La=>{kn({...jt,name:La.currentTarget.value})},ta=La=>{const ms=(0,cn.iU)(La);jt.datasource?.type!==ms.type?kn({datasource:ms,builtIn:jt.builtIn,enable:jt.enable,iconColor:jt.iconColor,name:jt.name,hide:jt.hide,filter:jt.filter,mappings:jt.mappings,type:jt.type}):kn({...jt,datasource:ms})},ia=La=>{const ms=La.currentTarget;kn({...jt,[ms.name]:ms.type==="checkbox"?ms.checked:ms.value})},Aa=La=>{kn({...jt,iconColor:La})},Ms=La=>{let ms=La.value===0?void 0:{exclude:La.value===2,ids:jt.filter?.ids??[]};kn({...jt,filter:ms})},Ga=La=>{if(!Array.isArray(La))return;const ms={exclude:En===2,ids:[]};La.forEach(fr=>fr.value&&ms.ids.push(fr.value)),kn({...jt,filter:ms})},_s=ys,us=()=>{o.E1.partial({editview:null,editIndex:null})},ns=()=>{const La=Pt.annotations.list;Pt.annotations.list=[...La.slice(0,Tt),...La.slice(Tt+1)],ys()},Rs=jt.name===Xn,Vr=(La,ms)=>La.label&&ms.label?La.label.toLowerCase().localeCompare(ms.label.toLowerCase()):-1,os=(0,n.useMemo)(()=>Pt?.panels.filter(La=>d.default.panels[La.type]).map(La=>({value:La.id,label:La.title??`Panel ${La.id}`,description:La.description,imgUrl:d.default.panels[La.type].info.logos.small})).sort(Vr)??[],[Pt]);return n.createElement("div",null,n.createElement(Sn.C,{className:qt.settingsForm},n.createElement(pe.g,{label:"Name"},n.createElement(Zn.I,{"aria-label":r.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Rs,value:jt.name,onChange:Ea})),n.createElement(pe.g,{label:"Data source",htmlFor:"data-source-picker"},n.createElement(sa.q,{annotations:!0,variables:!0,current:jt.datasource,onChange:ta})),n.createElement(pe.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},n.createElement(_n.X,{name:"enable",id:"enable",value:jt.enable,onChange:ia})),n.createElement(pe.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},n.createElement(_n.X,{name:"hide",id:"hide",value:jt.hide,onChange:ia})),n.createElement(pe.g,{label:"Color",description:"Color to use for the annotation event markers"},n.createElement(T.Lh,null,n.createElement(Xt.B,{value:jt?.iconColor,onChange:Aa}))),n.createElement(pe.g,{label:"Show in","aria-label":r.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},n.createElement(n.Fragment,null,n.createElement(Ut.Ph,{options:Ja,value:En,onChange:Ms,"aria-label":r.wl.components.Annotations.annotationsTypeInput}),En!==0&&n.createElement(Ut.NU,{options:os,value:os.filter(La=>jt.filter?.ids.includes(La.value)),onChange:Ga,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:qt.select,"aria-label":r.wl.components.Annotations.annotationsChoosePanelInput})))),n.createElement(Sn.C,null,n.createElement("h3",{className:"page-heading"},"Query"),Tn?.annotations&&Nn&&n.createElement(Pn,{datasource:Tn,datasourceInstanceSettings:Nn,annotation:jt,onChange:kn}),Tn&&!Tn.annotations&&n.createElement(An,{datasource:Tn,annotation:jt,onChange:kn})),n.createElement(We.K,null,!jt.builtIn&&n.createElement(g.zx,{variant:"destructive",onClick:ns},"Delete"),n.createElement(g.zx,{variant:"secondary",onClick:us,"data-testid":r.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),n.createElement(g.zx,{variant:"primary",onClick:_s},"Apply")))},ga=Tt=>({settingsForm:(0,y.css)({maxWidth:Tt.spacing(60),marginBottom:Tt.spacing(2)}),select:(0,y.css)`
      margin-top: 8px;
    `});function ys(){o.E1.partial({editIndex:null})}var ds=(Tt=>(Tt[Tt.AllPanels=0]="AllPanels",Tt[Tt.IncludePanels=1]="IncludePanels",Tt[Tt.ExcludePanels=2]="ExcludePanels",Tt))(ds||{});const Ja=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var _a=e(11386),ls=e(94719);const Es=({children:Tt,...Pt})=>{const qt=(0,P.wW)(Os);return n.createElement("div",{className:qt.buttonWrapper},n.createElement(g.zx,{icon:"plus",variant:"secondary",...Pt},Tt))},Os=Tt=>({buttonWrapper:(0,y.css)`
    padding: ${Tt.spacing(3)} 0;
  `}),ts=({dashboard:Tt,onNew:Pt,onEdit:qt})=>{const jt=(0,P.wW)(Xa),[on,En]=(0,n.useState)(Tt.annotations.list),Tn=(ia,Aa)=>{Tt.annotations.list=_a.moveItemImmutably(on,ia,ia+Aa),En(Tt.annotations.list)},Nn=ia=>{Tt.annotations.list=[...on.slice(0,ia),...on.slice(ia+1)],En(Tt.annotations.list)},kn=on.length===0||on.length===1&&on[0].builtIn,Ea=ia=>ia.enable===!1?n.createElement(n.Fragment,null,n.createElement("em",{className:"muted"},"(Disabled) \xA0 ",ia.name)):ia.builtIn?n.createElement(n.Fragment,null,n.createElement("em",{className:"muted"},ia.name," \xA0 (Built-in)")):n.createElement(n.Fragment,null,ia.name),ta=(0,dn.F)();return n.createElement(T.wc,null,on.length>0&&n.createElement("div",{className:jt.table},n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Query name"),n.createElement("th",null,"Data source"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,Tt.annotations.list.map((ia,Aa)=>n.createElement("tr",{key:`${ia.name}-${Aa}`},ia.builtIn?n.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>qt(Aa)},n.createElement(g.zx,{size:"sm",fill:"text",variant:"secondary"},Ea(ia))):n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>qt(Aa)},n.createElement(g.zx,{size:"sm",fill:"text",variant:"secondary"},Ea(ia))),n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>qt(Aa)},ta.getInstanceSettings(ia.datasource)?.name||ia.datasource?.uid),n.createElement("td",{role:"gridcell",style:{width:"1%"}},Aa!==0&&n.createElement(M.h,{name:"arrow-up",onClick:()=>Tn(Aa,-1),tooltip:"Move up"})),n.createElement("td",{role:"gridcell",style:{width:"1%"}},Tt.annotations.list.length>1&&Aa!==Tt.annotations.list.length-1?n.createElement(M.h,{name:"arrow-down",onClick:()=>Tn(Aa,1),tooltip:"Move down"}):null),n.createElement("td",{role:"gridcell",style:{width:"1%"}},!ia.builtIn&&n.createElement(ls.m,{size:"sm",onConfirm:()=>Nn(Aa),"aria-label":`Delete query with title "${ia.name}"`}))))))),kn&&n.createElement(et.Z,{onClick:Pt,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!kn&&n.createElement(Es,{onClick:Pt},"New query"))},Xa=()=>({table:(0,y.css)`
    width: 100%;
    overflow-x: scroll;
  `});function bs({dashboard:Tt,editIndex:Pt,sectionNav:qt}){const jt=()=>{const Tn={name:Xn,enable:!0,datasource:(0,cn.iU)((0,dn.F)().getInstanceSettings(null)),iconColor:"red"};Tt.annotations.list=[...Tt.annotations.list,{...Tn}],o.E1.partial({editIndex:Tt.annotations.list.length-1})},on=Tn=>{o.E1.partial({editIndex:Tn})},En=Pt!=null&&Pt<Tt.annotations.list.length;return n.createElement(l.T,{navModel:qt,pageNav:Nr(Tt,Pt,qt.node)},!En&&n.createElement(ts,{dashboard:Tt,onNew:jt,onEdit:on}),En&&n.createElement(ra,{dashboard:Tt,editIdx:Pt}))}function Nr(Tt,Pt,qt){const jt=s.config.featureToggles.dockedMegaMenu?qt.parentItem:void 0;if(Pt==null)return jt;const on=Tt.annotations.list[Pt];if(on)return{text:on.name,parentItem:jt&&{...jt,url:qt.url}}}var cs=e(68833),ks=e(36667),Hs=e(28718),qa=e(98572),za=e(26371),Is=e(93793),vr=e(53365),dr=e(34676),Ns=e(3386),Wr=e(27774);const $o=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function sr({dashboard:Tt,updateTimeZone:Pt,updateWeekStart:qt,sectionNav:jt}){const[on,En]=(0,n.useState)(0),[Tn,Nn]=(0,n.useState)(Tt.title),[kn,Ea]=(0,n.useState)(Tt.description),ta=s.config.featureToggles.dockedMegaMenu?jt.node.parentItem:void 0,ia=(Ta,rr)=>{Tt.meta.folderUid=Ta,Tt.meta.folderTitle=rr,Tt.meta.hasUnsavedFolderChange=!0,En(on+1)},Aa=n.useCallback(Ta=>{Tt.title=Ta,Nn(Ta)},[Nn,Tt]),Ms=n.useCallback(Ta=>{Tt.description=Ta,Ea(Ta)},[Ea,Tt]),Ga=Ta=>{Tt.graphTooltip=Ta,En(on+1)},_s=Ta=>{Tt.timepicker.refresh_intervals=Ta.filter(rr=>rr.trim()!=="")},us=Ta=>{Tt.timepicker.nowDelay=Ta},ns=Ta=>{Tt.timepicker.hidden=Ta,En(on+1)},Rs=Ta=>{Tt.liveNow=Ta,En(on+1)},Vr=Ta=>{Tt.timezone=Ta,En(on+1),Pt(Ta)},os=Ta=>{Tt.weekStart=Ta,En(on+1),qt(Ta)},La=Ta=>{Tt.tags=Ta,En(on+1)},ms=Ta=>{Tt.editable=Ta,En(on+1)},fr=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return n.createElement(l.T,{navModel:jt,pageNav:ta},n.createElement("div",{style:{maxWidth:"600px"}},n.createElement(cs.x,{marginBottom:5},n.createElement(pe.g,{label:n.createElement(T.Lh,{justify:"space-between"},n.createElement(ks._,{htmlFor:"title-input"},n.createElement(f.cC,{i18nKey:"dashboard-settings.general.title-label"},"Title")),s.config.featureToggles.dashgpt&&n.createElement(Ns.n,{onGenerate:Aa,dashboard:Tt}))},n.createElement(Zn.I,{id:"title-input",name:"title",value:Tn,onChange:Ta=>Aa(Ta.target.value)})),n.createElement(pe.g,{label:n.createElement(T.Lh,{justify:"space-between"},n.createElement(ks._,{htmlFor:"description-input"},(0,f.t)("dashboard-settings.general.description-label","Description")),s.config.featureToggles.dashgpt&&n.createElement(dr._,{onGenerate:Ms,dashboard:Tt}))},n.createElement(Hs.K,{id:"description-input",name:"description",value:kn,onChange:Ta=>Ms(Ta.target.value)})),n.createElement(pe.g,{label:(0,f.t)("dashboard-settings.general.tags-label","Tags")},n.createElement(qa.B,{id:"tags-input",tags:Tt.tags,onChange:La,width:40})),n.createElement(pe.g,{label:(0,f.t)("dashboard-settings.general.folder-label","Folder")},n.createElement(za.E,{value:Tt.meta.folderUid,onChange:ia,initialTitle:Tt.meta.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,dashboardId:Tt.id,skipInitialLoad:!0})),n.createElement(pe.g,{label:(0,f.t)("dashboard-settings.general.editable-label","Editable"),description:(0,f.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},n.createElement(Me.S,{value:Tt.editable,options:fr,onChange:ms}))),n.createElement(Wr.P,{onTimeZoneChange:Vr,onWeekStartChange:os,onRefreshIntervalChange:_s,onNowDelayChange:us,onHideTimePickerChange:ns,onLiveNowChange:Rs,refreshIntervals:Tt.timepicker.refresh_intervals,timePickerHidden:Tt.timepicker.hidden,nowDelay:Tt.timepicker.nowDelay,timezone:Tt.timezone,weekStart:Tt.weekStart,liveNow:Tt.liveNow}),n.createElement(b.s,{label:(0,f.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},n.createElement(pe.g,{label:(0,f.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,f.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},n.createElement(Me.S,{onChange:Ga,options:$o,value:Tt.graphTooltip}))),n.createElement(cs.x,{marginTop:3},Tt.meta.canDelete&&n.createElement(vr.b,null))))}const Gr={updateTimeZone:Is.tM,updateWeekStart:Is.f4},Fr=(0,p.connect)(null,Gr)(sr);var Vs=e(73642),Eo=e(48510);function io({dashboard:Tt,sectionNav:Pt}){const[qt,jt]=(0,n.useState)(JSON.stringify(Tt.getSaveModelClone(),null,2)),on=s.config.featureToggles.dockedMegaMenu?Pt.node.parentItem:void 0,En=async()=>{await(0,ln.h4)().saveJSONDashboard(qt),Eo.H.reloadPage()},Tn=(0,P.wW)(Er);return n.createElement(l.T,{navModel:Pt,pageNav:on},n.createElement("div",{className:Tn.wrapper},n.createElement(f.cC,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),n.createElement(Vs.p,{value:qt,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:jt,containerStyles:Tn.codeEditor}),Tt.meta.canSave&&n.createElement("div",null,n.createElement(g.zx,{type:"submit",onClick:En},n.createElement(f.cC,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")))))}const Er=Tt=>({wrapper:(0,y.css)({display:"flex",height:"100%",flexDirection:"column",gap:Tt.spacing(2)}),codeEditor:(0,y.css)({flexGrow:1})});var Ro=e(93466),Ss=e(60196);const rs=({dashboard:Tt,onNew:Pt,onEdit:qt})=>{const jt=(0,P.wW)(jr),[on,En]=(0,n.useState)(Tt.links),Tn=(ta,ia)=>{Tt.links=_a.moveItemImmutably(on,ta,ta+ia),En(Tt.links)},Nn=(ta,ia)=>{Tt.links=[...on,{...ta}],En(Tt.links)},kn=ta=>{Tt.links=[...on.slice(0,ta),...on.slice(ta+1)],En(Tt.links)};return Tt.links.length===0?n.createElement("div",null,n.createElement(et.Z,{onClick:Pt,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):n.createElement(n.Fragment,null,n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Info"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,on.map((ta,ia)=>n.createElement("tr",{key:`${ta.title}-${ia}`},n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>qt(ia)},n.createElement(I.J,{name:"external-link-alt"})," \xA0 ",ta.type),n.createElement("td",{role:"gridcell"},n.createElement(T.Lh,null,ta.title&&n.createElement("span",{className:jt.titleWrapper},ta.title),ta.type==="link"&&n.createElement("span",{className:jt.urlWrapper},ta.url),ta.type==="dashboards"&&n.createElement(Ss.P,{tags:ta.tags??[]}))),n.createElement("td",{style:{width:"1%"},role:"gridcell"},ia!==0&&n.createElement(M.h,{name:"arrow-up",onClick:()=>Tn(ia,-1),tooltip:"Move link up"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},on.length>1&&ia!==on.length-1?n.createElement(M.h,{name:"arrow-down",onClick:()=>Tn(ia,1),tooltip:"Move link down"}):null),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(M.h,{name:"copy",onClick:()=>Nn(ta,ia),tooltip:"Copy link"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(ls.m,{"aria-label":`Delete link with title "${ta.title}"`,size:"sm",onConfirm:()=>kn(ia)})))))),n.createElement(Es,{onClick:Pt},"New link"))},jr=()=>({titleWrapper:(0,y.css)`
    width: 20vw;
    text-overflow: ellipsis;
    overflow: hidden;
  `,urlWrapper:(0,y.css)`
    width: 40vw;
    text-overflow: ellipsis;
    overflow: hidden;
  `});function Oa({dashboard:Tt,sectionNav:Pt,editIndex:qt}){const[jt,on]=(0,n.useState)(!1),En=()=>{on(!1),o.E1.partial({editIndex:void 0})},Tn=()=>{Tt.links=[...Tt.links,{...Ro.zA}],on(!0),o.E1.partial({editIndex:Tt.links.length-1})},Nn=ta=>{on(!1),o.E1.partial({editIndex:ta})},kn=qt!==void 0;let Ea;if(s.config.featureToggles.dockedMegaMenu&&(Ea=Pt.node.parentItem),kn&&(Ea={text:jt?"New link":"Edit link",subTitle:jt?"Create a new link on your dashboard":"Edit a specific link of your dashboard"},s.config.featureToggles.dockedMegaMenu)){const Aa=Pt.node.url;Ea.parentItem=Pt.node.parentItem&&{...Pt.node.parentItem,url:Aa}}return n.createElement(l.T,{navModel:Pt,pageNav:Ea},!kn&&n.createElement(rs,{dashboard:Tt,onNew:Tn,onEdit:Nn}),kn&&n.createElement(Ro.fD,{dashboard:Tt,editLinkIdx:qt,onGoBack:En}))}var Ka=e(59444);const Un=10;class xt extends n.PureComponent{constructor(Pt){super(Pt),this.getVersions=(qt=!1)=>{this.setState({isAppending:qt}),Ka.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(jt=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(jt)]}),this.start+=this.limit}).catch(jt=>console.log(jt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const qt=this.state.versions.filter(kn=>kn.checked),[jt,on]=qt,En=jt.version===this.props.dashboard.version;this.setState({isLoading:!0});const Tn=await Ka.K8.getDashboardVersion(this.props.dashboard.uid,on.version),Nn=await Ka.K8.getDashboardVersion(this.props.dashboard.uid,jt.version);this.setState({baseInfo:on,isLoading:!1,isNewLatest:En,newInfo:jt,viewMode:"compare",diffData:{lhs:Tn.data,rhs:Nn.data}})},this.decorateVersions=qt=>qt.map(jt=>({...jt,createdDateString:this.props.dashboard.formatDate(jt.created),ageString:this.props.dashboard.getRelativeTime(jt.created),checked:!1})),this.onCheck=(qt,jt)=>{this.setState({versions:this.state.versions.map(on=>on.id===jt?{...on,checked:qt.currentTarget.checked}:on)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(qt=>({...qt,checked:!1})),viewMode:"list"})},this.limit=Un,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Pt=>Pt.version===1)}render(){const{versions:Pt,viewMode:qt,baseInfo:jt,newInfo:on,isNewLatest:En,isLoading:Tn,diffData:Nn}=this.state,kn=Pt.filter(Aa=>Aa.checked).length===2,Ea=Pt.length>1,ta=Pt.length>=this.limit,ia=s.config.featureToggles.dockedMegaMenu?this.props.sectionNav.node.parentItem:void 0;return qt==="compare"?n.createElement(l.T,{navModel:this.props.sectionNav,pageNav:ia},n.createElement(Ka.Cs,{onClick:this.reset,baseVersion:jt?.version,newVersion:on?.version,isNewLatest:En}),Tn?n.createElement(Tr,{msg:"Fetching changes\u2026"}):n.createElement(Ka.U$,{newInfo:on,baseInfo:jt,isNewLatest:En,diffData:Nn})):n.createElement(l.T,{navModel:this.props.sectionNav,pageNav:ia},Tn?n.createElement(Tr,{msg:"Fetching history list\u2026"}):n.createElement(Ka.Sd,{versions:Pt,onCheck:this.onCheck,canCompare:kn}),this.state.isAppending&&n.createElement(Tr,{msg:"Fetching more entries\u2026"}),Ea&&n.createElement(Ka.R1,{hasMore:ta,canCompare:kn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Tr=({msg:Tt})=>n.createElement(T.Lh,null,n.createElement(O.$,null),n.createElement("em",null,Tt)),Ao=()=>o.E1.partial({editview:null,editIndex:null});function ur({dashboard:Tt,editview:Pt,pageNav:qt,sectionNav:jt}){const[on,En]=(0,n.useState)(0);(0,n.useEffect)(()=>{Tt.events.subscribe(E.hS,()=>En(us=>us+1))},[Tt]);const Tn=(0,n.useMemo)(()=>Kr(Tt),[Tt,on]),Nn=()=>{Tt.meta.hasUnsavedFolderChange=!1},kn=Tn.find(us=>us.id===Pt)??Tn[0],Ea=m.contextSrv.hasEditPermissionInFolders,ta=Tt.meta.canSave,ia=(0,a.TH)(),Aa=co(ia),Ms=lo(qt,jt,Tn,kn,ia),Ga="sm",_s=[n.createElement(g.zx,{"data-testid":r.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:Ga,onClick:Ao},"Close"),Ea&&n.createElement(Kt.t,{dashboard:Tt,onSaveSuccess:Nn,variant:"secondary",key:"save as",size:Ga}),ta&&n.createElement(Kt.i,{dashboard:Tt,onSaveSuccess:Nn,key:"Save",size:Ga})];return n.createElement(n.Fragment,null,n.createElement(c.A,{actions:n.createElement(u.R,{alignment:"right"},_s)}),n.createElement(kn.component,{sectionNav:Ms,dashboard:Tt,editIndex:Aa}))}function Kr(Tt){const Pt=[],qt=(0,f.t)("dashboard-settings.general.title","General");Tt.meta.canEdit&&(Pt.push({title:qt,id:"settings",icon:"sliders-v-alt",component:Fr}),Pt.push({title:(0,f.t)("dashboard-settings.annotations.title","Annotations"),id:"annotations",icon:"comment-alt",component:bs,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Pt.push({title:(0,f.t)("dashboard-settings.variables.title","Variables"),id:"templating",icon:"calculator-alt",component:Ct,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Pt.push({title:(0,f.t)("dashboard-settings.links.title","Links"),id:"links",icon:"link",component:Oa})),Tt.meta.canMakeEditable&&Pt.push({title:qt,icon:"sliders-v-alt",id:"settings",component:Lo}),Tt.id&&Tt.meta.canSave&&Pt.push({title:(0,f.t)("dashboard-settings.versions.title","Versions"),id:"versions",icon:"history",component:xt});const jt=(0,f.t)("dashboard-settings.permissions.title","Permissions");return Tt.id&&Tt.meta.canAdmin&&m.contextSrv.hasPermission(v.AccessControlAction.DashboardsPermissionsRead)&&Pt.push({title:jt,id:"permissions",icon:"lock",component:tn}),Pt.push({title:(0,f.t)("dashboard-settings.json-editor.title","JSON Model"),id:"dashboard_json",icon:"arrow",component:io}),Pt}function mr(Tt,Pt){return{...Tt,parentItem:Tt.parentItem?mr(Tt.parentItem,Pt):Pt}}function lo(Tt,Pt,qt,jt,on){const En={text:(0,f.t)("dashboard-settings.settings.title","Settings"),children:[],icon:"apps",hideFromBreadcrumbs:!0};d.default.featureToggles.dockedMegaMenu&&(En.hideFromBreadcrumbs=!1,En.url=i.u.getUrlForPartial(on,{editview:"settings",editIndex:null})),En.children=qt.map(Nn=>({text:Nn.title,icon:Nn.icon,id:Nn.id,url:i.u.getUrlForPartial(on,{editview:Nn.id,editIndex:null}),active:Nn===jt,parentItem:En,subTitle:Nn.subTitle}));const Tn=mr(Tt,Pt.node);return En.parentItem=Tn,{main:En,node:En.children.find(Nn=>Nn.active)}}function Lo({dashboard:Tt,sectionNav:Pt}){return n.createElement(l.T,{navModel:Pt},n.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),n.createElement(g.zx,{type:"submit",onClick:()=>Tt.makeEditable()},"Make editable"))}function co(Tt){const Pt=new URLSearchParams(Tt.search).get("editIndex");if(Pt!=null)return parseInt(Pt,10)}},53365:(Q,A,e)=>{"use strict";e.d(A,{b:()=>b});var n=e(31733),a=e(58947),i=e(51343),r=e(53166),o=e(60490),g=e(76932),u=e(69781),c=e(55024),l=e(74282),d=e(19690),f=e(90069),m=e(5572),v=e(83811),E=e(93793),p=e(51450);const h={cleanUpDashboardAndVariables:E.lw},s=(0,c.connect)(null,h),y=({hideModal:T,cleanUpDashboardAndVariables:O,dashboard:R})=>{const I=R.meta.provisioned,[,M]=(0,l.default)(async()=>{await(0,p.iM)(R.uid,!0),O(),T(),d.E1.replace("/")},[T]),x=D(R.panels,R.title);return I?n.createElement(C,{hideModal:T,provisionedId:R.meta.provisionedExternalId}):n.createElement(f.s,{isOpen:!0,body:x,onConfirm:M,onDismiss:T,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},D=(T,O)=>{const R=(0,u.sumBy)(T,I=>I.alert?1:0);return R>0&&!v.config.unifiedAlertingEnabled?n.createElement(n.Fragment,null,n.createElement("p",null,"Do you want to delete this dashboard?"),n.createElement("p",null,"This dashboard contains ",R," alert",R>1?"s":"",". Deleting this dashboard also deletes those alerts.")):n.createElement(n.Fragment,null,n.createElement("p",null,"Do you want to delete this dashboard?"),n.createElement("p",null,O))},C=({hideModal:T,provisionedId:O})=>n.createElement(m.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:T,className:(0,g.css)`
      width: 500px;
    `},n.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),n.createElement("p",null,n.createElement("i",null,"See"," ",n.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),n.createElement("br",null),"File path: ",O),n.createElement(m.u.ButtonRow,null,n.createElement(i.zx,{variant:"primary",onClick:T},"OK"))),P=s(y),b=()=>{const T=(0,o.h4)().getCurrent();return n.createElement(a.JY,null,({showModal:O,hideModal:R})=>n.createElement(i.zx,{variant:"destructive",onClick:()=>{O(P,{dashboard:T,hideModal:R})},"aria-label":"Dashboard settings page delete dashboard button"},n.createElement(r.cC,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete Dashboard")))}},31386:(Q,A,e)=>{"use strict";e.d(A,{v:()=>G,Z:()=>w});var n=e(76932),a=e(31733),i=e(76067),r=e(51343),o=e(36717),g=e(65930),u=e(89719),c=e(58037),l=e(25111),d=e(79106),f=e(64516),m=e(41354),v=e(49311),E=e(94746);const p=({currentPage:K,numberOfPages:k,onNavigate:z,hideWhenSinglePage:W,className:Z})=>{const H=(0,i.wW)(h);return W&&k<=1?null:a.createElement("div",{className:(0,n.cx)(H.wrapper,Z)},a.createElement(m.h,{name:"angle-left",size:"md",tooltip:"Previous",onClick:()=>z(K-1),disabled:K===1}),K," of ",k,a.createElement(m.h,{name:"angle-right",size:"md",tooltip:"Next",onClick:()=>z(K+1),disabled:K===k}))},h=K=>({wrapper:(0,n.css)({display:"flex",flexDirection:"row",gap:16,userSelect:"none"})});var s=e(59326),y=e(97971),D=e(70621),C=e(42876),P=e(16005),b=(K=>(K.IDLE="idle",K.GENERATING="generating",K.COMPLETED="completed",K))(b||{});const T=1e4;function O(K=P.YB,k=1){const[z,W]=(0,a.useState)([]),[Z,H]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(""),[ne,se]=(0,a.useState)("idle"),[re,ge]=(0,a.useState)(),{error:q}=(0,C.iG)(),me=(0,a.useCallback)(Me=>{se("idle"),W([]),H(!1),ge(Me),q("Failed to generate content using OpenAI","Please try again or if the problem persists, contact your organization admin."),console.error(Me),(0,D.H)(Me,{messages:JSON.stringify(z),model:K,temperature:String(k)})},[z,K,k,q]),{error:oe,value:fe}=(0,s.Z)(async()=>await(0,P.K_)(),[P.K_]),{error:ve,value:pe}=(0,s.Z)(async()=>{if(!fe||!z.length)return{enabled:fe};se("generating"),ge(void 0);const Me=y.lA({model:K,temperature:k,messages:z}).pipe(y.XE());return{enabled:fe,stream:Me.subscribe({next:Y,error:me,complete:()=>{se("completed"),setTimeout(()=>{se("idle")}),W([]),H(!1),ge(void 0)}})}},[z,fe]);return(0,a.useEffect)(()=>()=>{pe?.stream&&pe.stream.unsubscribe()},[pe]),(0,a.useEffect)(()=>{Z&&(pe?.stream?.unsubscribe(),se("idle"),H(!1),ge(void 0),W([]))},[Z,pe?.stream]),(0,a.useEffect)(()=>{let Me;return ne==="generating"&&X===""&&(Me=setTimeout(()=>{me(new Error(`OpenAI stream timed out after ${T}ms`))},T)),()=>{Me&&clearTimeout(Me)}},[ne,X,me]),(ve||oe)&&ge(ve||oe),{setMessages:W,setStopGeneration:H,messages:z,reply:X,streamStatus:ne,error:re,value:pe}}const R=({history:K,index:k,reply:z,streamStatus:W,onNavigate:Z})=>{const H=(0,i.wW)(I),X=K.length,Y=()=>z&&W!==b.IDLE?z:K[k-1];return a.createElement(a.Fragment,null,a.createElement(p,{currentPage:k,numberOfPages:X,onNavigate:Z,hideWhenSinglePage:!0,className:H.paginationWrapper}),a.createElement("div",{className:H.contentWrapper},a.createElement(o.x,{element:"p",color:"secondary"},Y())))},I=K=>({paginationWrapper:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,n.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",marginTop:20,height:110,overflowY:"scroll"})}),M=({onSuggestionClick:K,isGenerating:k})=>{const z=(0,i.wW)(x);return a.createElement("div",{className:z.quickSuggestionsWrapper},a.createElement(r.zx,{onClick:()=>K(P.VN.Shorter),size:"sm",variant:"secondary",disabled:k},P.VN.Shorter),a.createElement(r.zx,{onClick:()=>K(P.VN.MoreDescriptive),size:"sm",variant:"secondary",disabled:k},P.VN.MoreDescriptive),a.createElement(r.zx,{onClick:()=>K(P.VN.Regenerate),size:"sm",variant:"secondary",disabled:k},P.VN.Regenerate))},x=K=>({quickSuggestionsWrapper:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",flexGrow:1,gap:8,paddingTop:10})});var L=e(74071);const S=.5,U=({eventTrackingSrc:K,history:k,messages:z,onApplySuggestion:W,updateHistory:Z})=>{const H=(0,i.wW)(N),[X,Y]=(0,a.useState)(1),[ne,se]=(0,a.useState)(!1),[re,ge]=(0,a.useState)(""),{setMessages:q,setStopGeneration:me,reply:oe,streamStatus:fe,error:ve}=O(P.YB,S),pe=fe===b.GENERATING,Me=(le,Re)=>(0,L.TU)(K,le,Re);(0,a.useEffect)(()=>{!pe&&oe!==""&&Y(1)},[pe,oe]),(0,a.useEffect)(()=>{fe===b.COMPLETED&&Z((0,P.Is)(oe))},[fe,oe,Z]),(0,a.useEffect)(()=>{ve&&se(!0),fe===b.GENERATING&&se(!1)},[ve,fe]);const Pe=le=>{Le(le),Me(L.k_.customFeedback,{customFeedback:le})},Ee=()=>{pe?(me(!0),oe!==""&&Z((0,P.Is)(oe))):W(k[X-1])},he=le=>{Y(le),Me(le>X?L.k_.backHistoryItem:L.k_.forwardHistoryItem)},Le=le=>{le!==P.VN.Regenerate&&(z=[...z,...(0,P.KS)(k[X],le)]),q(z),le in P.VN&&Me(L.k_.quickFeedback,{quickFeedbackItem:le})},ke=le=>le.key==="Enter"&&Pe(re),ot=le=>ge(le.currentTarget.value),it=()=>Pe(re),ce=()=>Me(L.k_.linkToDocs);return a.createElement("div",{className:H.container},ne&&a.createElement("div",null,a.createElement(l.b,{title:""},a.createElement(d.wc,null,a.createElement("div",null,"Sorry, I was unable to complete your request. Please try again.")))),a.createElement(f.I,{placeholder:"Tell AI what to do next...",suffix:a.createElement(m.h,{name:"corner-down-right-alt",variant:"secondary","aria-label":"Send custom feedback",onClick:it,disabled:re===""}),value:re,onChange:ot,onKeyDown:ke}),a.createElement("div",{className:H.actions},a.createElement(M,{onSuggestionClick:Le,isGenerating:pe}),a.createElement(R,{history:k,index:X,onNavigate:he,reply:(0,P.Is)(oe),streamStatus:fe})),a.createElement("div",{className:H.applySuggestion},a.createElement(d.Lh,{justify:"flex-end"},a.createElement(r.zx,{icon:pe?"fa fa-spinner":"check",onClick:Ee},pe?w:"Apply"))),a.createElement("div",{className:H.footer},a.createElement(v.J,{name:"exclamation-circle","aria-label":"exclamation-circle",className:H.infoColor}),a.createElement(o.x,{variant:"bodySmall",color:"secondary"},"This content is AI-generated using the"," ",a.createElement(E.h,{variant:"bodySmall",href:"https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/",external:!0,onClick:ce},"Grafana LLM plugin"))))},N=K=>({container:(0,n.css)({display:"flex",flexDirection:"column",width:520,height:250,paddingBottom:35}),applySuggestion:(0,n.css)({marginTop:K.spacing(1)}),actions:(0,n.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,n.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:K.spacing(1),paddingLeft:K.spacing(2),alignItems:"center",gap:K.spacing(1),borderTop:`1px solid ${K.colors.border.weak}`,marginTop:K.spacing(2)}),infoColor:(0,n.css)({color:K.colors.info.main})}),w="Stop generating",G=({text:K="Auto-generate",toggleTipTitle:k="",onClick:z,model:W=P.YB,messages:Z,onGenerate:H,temperature:X=1,eventTrackingSrc:Y,disabled:ne})=>{const se=(0,i.wW)(_),{messages:re,setMessages:ge,setStopGeneration:q,reply:me,value:oe,error:fe,streamStatus:ve}=O(W,X),[pe,Me]=(0,a.useState)([]),[Pe,Ee]=(0,a.useState)(!0),he=pe.length>0,Le=ve===b.GENERATING&&!he,ke=ne||oe&&!oe.enabled&&!fe,ot=Ye=>(0,L.TU)(Y,Ye),it=Ye=>{ve===b.GENERATING?q(!0):he?Ee&&Ee(!0):(z?.(Ye),ge(typeof Z=="function"?Z():Z));const Ne=fe?L.k_.erroredRetryButton:Le?L.k_.stopGenerationButton:he?L.k_.improveButton:L.k_.autoGenerateButton;ot(Ne)},ce=(0,a.useCallback)(Ye=>{pe.indexOf(Ye)===-1&&Me([Ye,...pe])},[pe]);if((0,a.useEffect)(()=>{Le&&me&&H((0,P.Is)(me))},[ve,me,H,Le]),(0,a.useEffect)(()=>{ve===b.COMPLETED&&ce((0,P.Is)(me))},[pe,ve,me,ce]),!oe?.enabled)return null;const le=Ye=>{ot(L.k_.applySuggestion),H(Ye),Ee(!1)},Re=()=>{if(!Le)return fe||oe&&!oe?.enabled?"exclamation-circle":"ai"},Ae=()=>{let Ye=K;return fe&&(Ye="Retry"),Le&&(Ye=w),he&&(Ye="Improve"),Ye},Oe=a.createElement(r.zx,{icon:Re(),onClick:it,fill:"text",size:"sm",disabled:ke,variant:fe?"destructive":"primary"},Ae()),$e=()=>{if(he){const Ye=a.createElement(o.x,{element:"p"},k);return a.createElement(g.P,{title:Ye,content:a.createElement(U,{history:pe,messages:re,onApplySuggestion:le,updateHistory:ce,eventTrackingSrc:Y}),placement:"bottom-start",fitContent:!0,show:Pe?void 0:!1},Oe)}return Oe};return a.createElement("div",{className:se.wrapper},Le&&a.createElement(u.$,{size:"sm",className:se.spinner}),!he&&a.createElement(c.u,{show:fe?void 0:!1,interactive:!0,content:"Failed to generate content using OpenAI. Please try again or if the problem persist, contact your organization admin."},Oe),he&&$e())},_=K=>({wrapper:(0,n.css)({display:"flex"}),spinner:(0,n.css)({color:K.colors.text.link})})},34676:(Q,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(31733),a=e(31386),i=e(74071),r=e(16005);const g=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 300 characters.
Respond with only the description of the dashboard.`,u=({onGenerate:l,dashboard:d})=>{const f=n.useMemo(()=>c(d),[d]);return n.createElement(a.v,{messages:f,onGenerate:l,eventTrackingSrc:i.dG.dashboardDescription,toggleTipTitle:"Improve your dashboard description"})};function c(l){const d=(0,r._v)(l);return[{content:g,role:r.uU.system},{content:`The title of the dashboard is "${l.title}"
${d}`,role:r.uU.system}]}},3386:(Q,A,e)=>{"use strict";e.d(A,{n:()=>u});var n=e(31733),a=e(31386),i=e(74071),r=e(16005);const g=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,u=({onGenerate:l,dashboard:d})=>{const f=n.useMemo(()=>c(d),[d]);return n.createElement(a.v,{messages:f,onGenerate:l,eventTrackingSrc:i.dG.dashboardTitle,toggleTipTitle:"Improve your dashboard title"})};function c(l){return[{content:g,role:r.uU.system},{content:`The panels in the dashboard are: ${(0,r._v)(l)}`,role:r.uU.system}]}},74071:(Q,A,e)=>{"use strict";e.d(A,{TU:()=>o,dG:()=>i,k_:()=>r});var n=e(64704);const a="dashboards_autogenerate_clicked";var i=(g=>(g.panelDescription="panel-description",g.panelTitle="panel-title",g.dashboardChanges="dashboard-changes",g.dashboardTitle="dashboard-title",g.dashboardDescription="dashboard-description",g.unknown="unknown",g))(i||{}),r=(g=>(g.autoGenerateButton="auto-generate-button",g.erroredRetryButton="errored-retry-button",g.stopGenerationButton="stop-generating-button",g.improveButton="improve-button",g.backHistoryItem="back-history-item",g.forwardHistoryItem="forward-history-item",g.quickFeedback="quick-feedback",g.linkToDocs="link-to-docs",g.customFeedback="custom-feedback",g.applySuggestion="apply-suggestion",g))(r||{});function o(g,u,c){(0,n.ff)(a,{src:g,item:u,...c})}},16005:(Q,A,e)=>{"use strict";e.d(A,{YB:()=>p,VN:()=>E,uU:()=>v,xm:()=>s,_v:()=>C,KS:()=>D,wH:()=>P,K_:()=>y,Is:()=>h});var n=e(97971),a=e(4811),i=e(25353);function r(b,T){return b===T?T:Array.isArray(b)&&Array.isArray(T)?u(b,T):o(b)&&o(T)?g(b,T):T}function o(b){return typeof b=="object"&&!Array.isArray(b)&&b!==null}function g(b,T){const O=Object.keys(b),R={};for(const I of O)T.hasOwnProperty(I)&&(Array.isArray(b[I])&&Array.isArray(T[I])||typeof b[I]=="object"&&typeof T[I]=="object"?R[I]=r(b[I],T[I]):R[I]=T[I]);return R}function u(b,T){const O=new Array(b.length).fill(void 0),R=new Set([...Array(b.length).keys()]),I=new Set([...Array(T.length).keys()]);for(let M=0;M<b.length&&I.size!==0;M++){let x=b[M];for(let L=0;L<T.length;L++){if(!I.has(L))continue;let S=T[L];S=r(x,S),JSON.stringify(x)===JSON.stringify(S)&&(R.delete(M),I.delete(L),O[M]=S)}}return c(b,T,O,R,I),O.filter(M=>M!==void 0)}function c(b,T,O,R,I){let M={};I.forEach(L=>{let S=T[L];if(typeof S!="object"||Array.isArray(S)){O.push(S),I.delete(L);return}R.forEach(U=>{let N=b[U];if(typeof N!="object"||Array.isArray(N)){R.delete(U);return}let w=0;for(const G in N){let _=N[G];if(!S.hasOwnProperty(G))continue;let K=S[G];typeof _!="string"&&typeof _!="number"||typeof _!=typeof K||_===K&&(G==="id"&&(w+=1e3),w++)}w!==0&&(M[w]===void 0&&(M[w]=[]),M[w].push([U,L]))})});const x=Object.keys(M).map(Number);x.sort((L,S)=>S-L);for(const L of x){let S=M[L];for(const U of S){const[N,w]=U;R.has(N)&&I.has(w)&&(O[N]=T[w],R.delete(N),I.delete(w))}}for(const L of I)O.push(T[L])}function l(b){const T=b.split(`
`);let O=b[0].startsWith("Index")?4:3,R=T.slice(0,O);const I=/("title"|Title|\{|\}|\[|\])/i;for(let M=O;M<T.length;M++){let x=T[M];(I.test(x)||x.startsWith("+")||x.startsWith("-"))&&R.push(x)}return R.join(`
`)+`
`}function d(b){if(b===null||b==="")return null;if(Array.isArray(b)){const O=b.map(R=>d(R)).filter(R=>R!==null);return O.length>0?O:null}if(typeof b!="object")return b;const T={};for(const O in b){const R=d(b[O]);if(R!==null){if(Array.isArray(R)&&R.length===0||typeof R=="object"&&Object.keys(R).length===0)continue;T[O]=R}}return Object.keys(T).length>0?T:null}function f(b){return JSON.parse(JSON.stringify(b,null,2))}function m(b){let T=f(b.getOriginalDashboard()),O=f(new i.f(T).getSaveModelClone()),R=f(b.getSaveModelClone());O=d(r(T,O)),R=d(r(O,R)),T=d(T);let I=(0,a.ym)("Before migration changes","After migration changes",JSON.stringify(T,null,2),JSON.stringify(O,null,2),"","",{context:20}),M=(0,a.ym)("Before user changes","After user changes",JSON.stringify(O,null,2),JSON.stringify(R,null,2),"","",{context:20});return I=l(I),M=l(M),{migrationDiff:I,userDiff:M}}var v=(b=>(b.system="system",b.user="user",b))(v||{}),E=(b=>(b.Shorter="Even shorter",b.MoreDescriptive="More descriptive",b.Regenerate="Regenerate",b))(E||{});const p="gpt-4",h=b=>b.replace(/^"|"$/g,"");function s(b){const{migrationDiff:T,userDiff:O}=m(b);return{userChanges:O,migrationChanges:T}}async function y(){return n.am().then(b=>b.ok)}const D=(b,T)=>[{role:"system",content:`Your previous response was: ${b}. The user has provided the following feedback: ${T}. Re-generate your response according to the provided feedback.`}];function C(b){const T=(I,M)=>`- Panel ${M}
- Title: ${I.title}${I.description?`
- Description: ${I.description}`:""}`,O=b.panels.map(T);let R;if(O.length<=10)R=`The panels in the dashboard are:
${O.join(`
`)}`;else{const I=b.panels.filter(L=>L.description),M=b.panels.filter(L=>!L.description);let x;I.length>=10?x=I.slice(10).map(T).join(`
`):(x=I.map(T).join(`
`),x+=`
`,x+=M.slice(10-I.length).map(T).join("n")),R=`There are ${O.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${x}`}return R}function P(b){const T=b.getSaveModel(),O=new Set(["id","datasource","title","description","targets","thresholds","type","xaxis","yaxes"]),R=Object.keys(T).reduce((I,M)=>(O.has(M)&&(I[M]=T[M]),I),{});return JSON.stringify(R,null,2)}},97522:(Q,A,e)=>{"use strict";e.d(A,{$R:()=>E,S$:()=>v,XJ:()=>m});var n=e(69781),a=e(434),i=e(20498),r=e(71199),o=e(40137),g=e(20298),u=e(85498),c=e(71667),l=e(85666);function d(){const D="ABCDEFGHIJKLMNOPQRSTUVWXYZ",C="abcdefghijklmnopqrstuvwxyz",P=D.length,b=new Map;return T=>{const O=b.get(T);if(O!=null)return O;const R=[...T].map(I=>I.toLowerCase()&&I!==I.toUpperCase()?C.charAt(Math.floor(Math.random()*P)):I.toUpperCase()&&I!==I.toUpperCase()?D.charAt(Math.floor(Math.random()*P)):I).join("");return b.set(T,R),R}}function f(D,C){if(!(C.labels||C.names||C.values))return D;const P=new Set(["time","value","exemplar","traceid","id","uid","uuid","__name__","le","name"]),b=d();return D.map(T=>{let{schema:O,data:R}=T;if(O&&R){if(C.labels){for(const I of O.fields)if(I.labels){const M={};for(const[x,L]of Object.entries(I.labels))M[x]=b(L);I.labels=M}}if(C.names)for(const I of O.fields)I.name?.length&&!P.has(I.name.toLowerCase())&&(I.name=b(I.name));C.values&&O.fields.forEach((I,M)=>{if(I.type===l.fS.string&&R){const x=R.values[M].map(L=>b(String(L)));R.values[M]=x}})}return{schema:O,data:R}})}function m(D){const C=[];if(D?.series)for(const P of D.series)C.push((0,i.Y)(P));if(D?.annotations)for(const P of D.annotations){const b=(0,i.Y)(P);b.schema?.meta||(b.schema.meta={}),b.schema.meta.dataTopic=r.w5.Annotations,C.push(b)}return C}function v(D,C){const P=D.getSaveModel(),b={panelType:P.type,datasource:"??"},T=`${u.config.buildInfo.version} (${u.config.buildInfo.commit})`;let O=`| Key | Value |
|--|--|
| Panel | ${b.panelType} @ ${P.pluginVersion??T} |
| Grafana | ${T} // ${u.config.buildInfo.edition} |
`;return C&&(O+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+C+"\n```\n</details>"),O}async function E(D,C,P){const b=D.getSaveModel(),T=(0,n.cloneDeep)(y),O={panelType:b.type,datasource:"??"},R=await(0,a.z)(D.getQueryRunner().getData({withFieldConfig:!1,withTransforms:!1})),I=D.datasource,M=f(m(R),C),x=`${u.config.buildInfo.version} (${u.config.buildInfo.commit})`,L=b?.targets??[],S=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${O.panelType} @ ${b.pluginVersion??x}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${L.map(U=>{const N=U.datasource??I;return`${U.refId}[${N?.type}]`}).join(", ")}</td>
    </tr>
    ${p(b)}
    ${h(R,M)}
    ${s(R)}
    <tr>
      <th>Grafana</th>
      <td>${x} // ${u.config.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(T.panels[0]={...b,...T.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:c.hR.Snapshot,snapshot:M}]},b.transformations?.length){const U=T.panels[T.panels.length-1];U.title=U.title+" (after transformations)";const N=(0,n.cloneDeep)(U);N.id=100,N.title="Data (before transformations)",N.gridPos.w=24,N.targets[0].withTransforms=!1,T.panels.push(N)}return R.annotations?.length&&T.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:r.w5.Annotations,refId:"A"}]}),T.panels[1].options.content=S,T.panels[2].options.content=JSON.stringify(b,null,2),T.title=`Debug: ${b.title} // ${(0,o.dq)(new Date)}`,T.tags=["debug",`debug-${O.panelType}`],T.time={from:P.from.toISOString(),to:P.to.toISOString()},T}function p(D){return D.transformations?`<tr>
      <th>Transform</th>
      <td>${D.transformations.map(C=>C.id).join(", ")}</td>
  </tr>`:""}function h(D,C){let P=D.series.length??0,b=0,T=0;for(const O of D.series)b+=O.fields.length,T+=O.length;return`<tr><th>Data</th><td>${D.state!==g.Gu.Done?D.state:""} ${P} frames, ${b} fields, ${T} rows </td></tr>`}function s(D){return D.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${D.annotations.map((C,P)=>`<span>${C.length}</span>`)}</td>
</tr>`:""}const y={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37}},87047:(Q,A,e)=>{"use strict";e.d(A,{L1:()=>c,WM:()=>l,pV:()=>u});var n=e(31733),a=e(2722),i=e(66261),r=e(53166),o=e(31285),g=e(60971);const u=d=>(0,a.Z)(async()=>c(d),[d]).value;async function c(d){const f=d?.request?.targets||[];if(d&&d.series&&f.length){for(const m of d.series)if(m.meta&&m.meta.custom){const v=await(0,i.F)().get(f[0].datasource);if(v&&v.components?.MetadataInspector)return v}}}const l=(d,f,m,v,E)=>(0,n.useMemo)(()=>{const p=[];return(0,g.sY)(m)&&(p.push({label:(0,r.t)("dashboard.inspect.data-tab","Data"),value:o.q.Data}),p.push({label:(0,r.t)("dashboard.inspect.stats-tab","Stats"),value:o.q.Stats})),E&&p.push({label:(0,r.t)("dashboard.inspect.meta-tab","Meta data"),value:o.q.Meta}),p.push({label:(0,r.t)("dashboard.inspect.json-tab","JSON"),value:o.q.JSON}),v&&p.push({label:(0,r.t)("dashboard.inspect.error-tab","Error"),value:o.q.Error}),f.meta.canEdit&&(0,g.sY)(m)&&p.push({label:(0,r.t)("dashboard.inspect.query-tab","Query"),value:o.q.Query}),p},[m,E,f,v])},93466:(Q,A,e)=>{"use strict";e.d(A,{fD:()=>v,xy:()=>f,zA:()=>l});var n=e(31733),a=e(85765),i=e(64516),r=e(38834),o=e(98572),g=e(5284),u=e(36356),c=e(51343);const l={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},d=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],f={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},m=Object.keys(f).map(E=>({label:E,value:E})),v=({editLinkIdx:E,dashboard:p,onGoBack:h})=>{const[s,y]=(0,n.useState)(E!==null?p.links[E]:l),D=R=>{const I=[...p.links];I.splice(E,1,R),p.links=I,y(R)},C=R=>{D({...s,tags:R})},P=R=>{const I={...s,type:R.value};I.type==="dashboards"?(I.url="",I.tooltip=""):I.tags=[],D(I)},b=R=>{D({...s,icon:R.value})},T=R=>{const I=R.currentTarget;D({...s,[I.name]:I.type==="checkbox"?I.checked:I.value})},O=s.title===l.title;return n.createElement("div",{style:{maxWidth:"600px"}},n.createElement(a.g,{label:"Title"},n.createElement(i.I,{name:"title",id:"title",value:s.title,onChange:T,autoFocus:O})),n.createElement(a.g,{label:"Type"},n.createElement(r.Ph,{inputId:"link-type-input",value:s.type,options:d,onChange:P})),s.type==="dashboards"&&n.createElement(n.Fragment,null,n.createElement(a.g,{label:"With tags"},n.createElement(o.B,{tags:s.tags,onChange:C}))),s.type==="link"&&n.createElement(n.Fragment,null,n.createElement(a.g,{label:"URL"},n.createElement(i.I,{name:"url",value:s.url,onChange:T})),n.createElement(a.g,{label:"Tooltip"},n.createElement(i.I,{name:"tooltip",value:s.tooltip,onChange:T,placeholder:"Open dashboard"})),n.createElement(a.g,{label:"Icon"},n.createElement(r.Ph,{value:s.icon,options:m,onChange:b}))),n.createElement(g.s,{label:"Options",isOpen:!0},s.type==="dashboards"&&n.createElement(a.g,null,n.createElement(u.X,{label:"Show as dropdown",name:"asDropdown",value:s.asDropdown,onChange:T})),n.createElement(a.g,null,n.createElement(u.X,{label:"Include current time range",name:"keepTime",value:s.keepTime,onChange:T})),n.createElement(a.g,null,n.createElement(u.X,{label:"Include current template variable values",name:"includeVars",value:s.includeVars,onChange:T})),n.createElement(a.g,null,n.createElement(u.X,{label:"Open link in new tab",name:"targetBlank",value:s.targetBlank,onChange:T}))),n.createElement(c.zx,{onClick:h},"Apply"))}},18072:(Q,A,e)=>{"use strict";e.d(A,{u:()=>f});var n=e(76932),a=e(31733),i=e(50370),r=e(21568),o=e(76067),g=e(2431),u=e(51343),c=e(297),l=e(90300);const d="showCategory",f=a.memo(({id:E,title:p,children:h,forceOpen:s,isOpenDefault:y,renderTitle:D,className:C,itemsCount:P,isNested:b=!1,sandboxId:T})=>{const O=y!==!1,[R,I]=(0,i.Z)(v(E),{isExpanded:O}),M=(0,o.wW)(m),[x,L]=(0,c.K)(),[S,U]=(0,a.useState)(R?.isExpanded??O),N=(0,a.useRef)(0),w=(0,a.useRef)(null),G=x[d]===E;(0,a.useEffect)(()=>{N.current&&Date.now()-N.current<200||(G||s)&&(S||U(!0),G&&w.current?.scrollIntoView())},[s,S,G]);const _=(0,a.useCallback)(()=>{N.current=Date.now(),L({[d]:S?void 0:E},!0),I({isExpanded:!S}),U(!S)},[I,U,L,S,E]);D||(D=function(Z){return Z||P===void 0||P===0?p:a.createElement("span",null,p," ",a.createElement(g.A,{value:P}))});const K=(0,n.cx)({[M.box]:!0,[M.boxNestedExpanded]:b&&S},C,"options-group"),k=(0,n.cx)(M.header,{[M.headerExpanded]:S,[M.headerNested]:b}),z=(0,n.cx)(M.body,{[M.bodyNested]:b});return a.createElement("div",{className:K,"data-testid":"options-category","data-plugin-sandbox":T,"aria-label":r.wl.components.OptionsGroup.group(E),ref:w},a.createElement("div",{className:k,onClick:_},a.createElement(u.zx,{"aria-label":r.wl.components.OptionsGroup.toggle(E),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":S,className:M.toggleButton,icon:S?"angle-down":"angle-right",onClick:_}),a.createElement("h6",{id:`button-${E}`,className:M.title},D(S))),S&&a.createElement("div",{className:z,id:E,"aria-labelledby":`button-${E}`},h))});f.displayName="OptionsPaneCategory";const m=E=>({box:(0,n.css)`
      border-top: 1px solid ${E.colors.border.weak};
    `,boxNestedExpanded:(0,n.css)`
      margin-bottom: ${E.spacing(2)};
    `,title:(0,n.css)`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${E.typography.fontWeightMedium};
      margin: 0;
    `,header:(0,n.css)`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${E.spacing(.5)};
      color: ${E.colors.text.primary};
      font-weight: ${E.typography.fontWeightMedium};

      &:hover {
        background: ${E.colors.emphasize(E.colors.background.primary,.03)};
      }
    `,toggleButton:(0,n.css)`
      align-self: baseline;
    `,headerExpanded:(0,n.css)`
      color: ${E.colors.text.primary};
    `,headerNested:(0,n.css)`
      padding: ${E.spacing(.5,0,.5,0)};
    `,body:(0,n.css)`
      padding: ${E.spacing(1,2,1,4)};
    `,bodyNested:(0,n.css)`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${E.colors.border.weak};
      }
    `}),v=E=>`${l.jy}.optionGroup[${E}]`},99940:(Q,A,e)=>{"use strict";e.d(A,{j:()=>i});var n=e(31733),a=e(18072);class i{constructor(o){this.props=o,this.items=[],this.categories=[]}addItem(o){return o.parent=this,this.items.push(o),this}addCategory(o){return o.props.isNested=!0,o.parent=this,this.categories.push(o),this}getCategory(o){let g=this.categories.find(u=>u.props.id===o);return g||(g=new i({title:o,id:o}),this.addCategory(g),g)}render(o){return this.props.customRender?this.props.customRender():n.createElement(a.u,{key:this.props.title,...this.props},this.items.map(g=>g.render(o)),this.categories.map(g=>g.render(o)))}}},68469:(Q,A,e)=>{"use strict";e.d(A,{a:()=>m});var n=e(76932),a=e(31733),i=e(82732),r=e.n(i),o=e(21568),g=e(36667),u=e(85765),c=e(76067),l=e(58037);function d({overrides:p}){const h=(0,c.wW)(f);return a.createElement("div",{className:h.wrapper},p.map((s,y)=>a.createElement(l.u,{content:s.tooltip,key:y.toString(),placement:"top"},a.createElement("div",{"aria-label":s.description,className:h[s.type]}))))}const f=p=>{const h={width:8,height:8,borderRadius:p.shape.radius.circle,marginLeft:p.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,n.css)({display:"flex"}),rule:(0,n.css)({...h,backgroundColor:p.colors.primary.main}),data:(0,n.css)({...h,backgroundColor:p.colors.warning.main})}};class m{constructor(h){this.props=h}getLabel(h){const{title:s,description:y,overrides:D,addon:C}=this.props;if(!h)return this.parent.props.title===s&&!D?.length?null:a.createElement(v,{title:s,description:y,overrides:D,addon:C});const P=[];return this.parent.parent&&P.push(this.highlightWord(this.parent.parent.props.title,h)),this.parent.props.title!==s&&P.push(this.highlightWord(this.parent.props.title,h)),a.createElement(g._,{description:y&&this.highlightWord(y,h),category:P},this.highlightWord(s,h),D&&D.length>0&&a.createElement(d,{overrides:D}))}highlightWord(h,s){return a.createElement(r(),{textToHighlight:h,searchWords:[s],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:h}=this.props;!h||h.length}render(h){const{title:s,description:y,render:D,showIf:C,skipField:P}=this.props,b=`${this.parent.props.id} ${s}`;return C&&!C()?null:P?D():a.createElement(u.g,{label:this.getLabel(h),description:y,key:b,"aria-label":o.wl.components.PanelEditor.OptionsPane.fieldLabel(b)},D())}}function v({title:p,description:h,overrides:s,addon:y}){const D=(0,c.wW)(E);return a.createElement("div",{className:D.container},a.createElement(g._,{description:h},p,s&&s.length>0&&a.createElement(d,{overrides:s})),y)}function E(p){return{container:(0,n.css)`
      display: flex;
      justify-content: space-between;
    `}}},63801:(Q,A,e)=>{"use strict";e.d(A,{HZ:()=>v,AL:()=>m});var n=e(69781),a=e(31733),i=e(41540),r=e(95639),o=e(99940),g=e(68469);const u="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",c="An override rule exists for this property";function l(E,p,h){const s=[];if(h){for(const D of h)for(const C of D.fields)if((0,n.get)(C.config,E.path)!=null){s.push({type:"data",description:u,tooltip:u});break}}return p.overrides.some(D=>D.properties.some(C=>C.id===E.id))&&s.push({type:"rule",description:c,tooltip:c}),s}var d=e(60971);function f({data:E,replaceVariables:p,options:h,eventBus:s,instanceState:y}){const D=E?.series??[];return{data:D,replaceVariables:p,options:h,eventBus:s,getSuggestions:P=>(0,r.PW)(D,P),instanceState:y}}function m(E){const{plugin:p,panel:h,onPanelOptionsChanged:s,onFieldConfigsChange:y,data:D,dashboard:C,instanceState:P}=E,b=h.getOptions(),T=h.fieldConfig,O={},R=f({data:D,replaceVariables:h.replaceVariables,options:b,eventBus:C.events,instanceState:P}),I=x=>{const L=(x&&x[0])??`${p.meta.name}`,S=O[L];return S||(O[L]=new o.j({title:L,id:L,sandboxId:p.meta.id}))},M={getValue:x=>(0,n.get)(b,x),onChange:(x,L)=>{const S=(0,d.hs)(b,x,L);s(S)}};v(p.getPanelOptionsSupplier(),M,I,R);for(const x of p.fieldConfigRegistry.list()){if(x.isCustom){if(x.showIf&&!x.showIf(T.defaults.custom,D?.series))continue}else if(x.showIf&&!x.showIf(T.defaults,D?.series))continue;if(x.hideFromDefaults)continue;const L=I(x.category),S=x.editor,U=T.defaults,N=x.isCustom?U.custom?(0,n.get)(U.custom,x.path):void 0:(0,n.get)(U,x.path);x.getItemsCount&&(L.props.itemsCount=x.getItemsCount(N)),L.addItem(new g.a({title:x.name,description:x.description,overrides:l(x,T,D?.series),render:function(){const G=_=>{y((0,d.uJ)(T,x.path,_,x.isCustom))};return a.createElement(S,{value:N,onChange:G,item:x,context:R,id:x.id})}}))}return Object.values(O)}function v(E,p,h,s,y){const D=new i.rt;E(D,s);for(const C of D.getItems()){if(C.showIf&&!C.showIf(s.options,s.data))continue;let P=y;if(P?C.category?.[0]?.length&&(P=P.getCategory(C.category[0])):P=h(C.category),(0,i.j)(C)){const T=C.getNestedValueAccess(p),O=T.getContext?T.getContext(s):{...s,options:p.getValue(C.path)};v(C.getBuilder(),T,h,O,P);continue}const b=C.editor;P.addItem(new g.a({title:C.name,description:C.description,render:function(){return a.createElement(b,{value:p.getValue(C.path),onChange:O=>{p.onChange(C.path,O)},item:C,context:s,id:C.id})}}))}}},90300:(Q,A,e)=>{"use strict";e.d(A,{Hl:()=>f,K9:()=>p,OT:()=>s,ZP:()=>D,g_:()=>h,jy:()=>u,my:()=>E,yi:()=>v});var n=e(4579),a=e(20298),i=e(5333),r=e(39357),o=e(30937),g=e(46536);const u="grafana.dashboard.editor.ui",c={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:g.d1.Fill},l=()=>{const C=r.Z.getObject(u,c);let P={...C};return typeof C.topPaneSize=="string"&&(P={...C,topPaneSize:parseFloat(C.topPaneSize)/100}),{getPanel:()=>new o.rY({}),getSourcePanel:()=>new o.rY({}),getData:()=>({state:a.Gu.NotStarted,series:[],timeRange:(0,i.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...c,...P}}},d=(0,n.oM)({name:"panelEditor",initialState:l(),reducers:{updateEditorInitState:(C,P)=>{C.getPanel=()=>P.payload.panel,C.getSourcePanel=()=>P.payload.sourcePanel,C.initDone=!0,C.isOpen=!0,C.shouldDiscardChanges=!1},setEditorPanelData:(C,P)=>{C.getData=()=>P.payload},setDiscardChanges:(C,P)=>{C.shouldDiscardChanges=P.payload},setPanelEditorUIState:(C,P)=>{C.ui={...C.ui,...P.payload},!C.ui.isPanelOptionsVisible&&C.isVizPickerOpen&&(C.isVizPickerOpen=!1)},toggleVizPicker:(C,P)=>{C.isVizPickerOpen=P.payload,C.isVizPickerOpen&&(C.ui.isPanelOptionsVisible=!0)},toggleTableView(C){C.tableViewEnabled=!C.tableViewEnabled},closeEditor:C=>{C.getPanel=()=>new o.rY({}),C.getSourcePanel=()=>new o.rY({}),C.isOpen=!1,C.initDone=!1,C.isVizPickerOpen=!1,C.tableViewEnabled=!1}}}),{updateEditorInitState:f,setEditorPanelData:m,setDiscardChanges:v,closeEditor:E,setPanelEditorUIState:p,toggleVizPicker:h,toggleTableView:s}=d.actions,D={panelEditor:d.reducer}},22813:(Q,A,e)=>{"use strict";e.d(A,{X:()=>c,b:()=>u});var n=e(90093),a=e(83811),i=e(56811),r=e(81347),o=e(67451),g=e(46536);const u=(0,n.Z)((l,d)=>{const f=[];if(!d)return f;let m=g.Ip.Visualize;if(d.meta.skipDataQuery)return[];d.meta.skipDataQuery||(m=g.Ip.Query,f.push({id:g.Ip.Query,text:"Query",icon:"database",active:!1}),f.push({id:g.Ip.Transform,text:"Transform data",icon:"process",active:!1})),c(d)&&f.push({id:g.Ip.Alert,text:"Alert",icon:"bell",active:!1});const v=f.find(E=>E.id===(l||m))??f[0];return v.active=!0,f});function c(l){const{alertingEnabled:d,unifiedAlertingEnabled:f}=(0,a.iE)(),m=i.contextSrv.hasPermission((0,r.Bz)(o.GC).read),v=d||f&&m,E=l.meta.id==="graph",p=l.meta.id==="timeseries";return v&&E||p}},46536:(Q,A,e)=>{"use strict";e.d(A,{Ip:()=>n,Ok:()=>g,d1:()=>a,d7:()=>r});var n=(u=>(u.Query="query",u.Transform="transform",u.Visualize="visualize",u.Alert="alert",u))(n||{}),a=(u=>(u[u.Fill=0]="Fill",u[u.Fit=1]="Fit",u[u.Exact=2]="Exact",u))(a||{}),i=(u=>(u[u.Off=0]="Off",u[u.Table=1]="Table",u))(i||{});const r=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],o=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var g=(u=>(u[u.Visualizations=0]="Visualizations",u[u.LibraryPanels=1]="LibraryPanels",u[u.Suggestions=2]="Suggestions",u[u.Widgets=3]="Widgets",u))(g||{})},60971:(Q,A,e)=>{"use strict";e.d(A,{hs:()=>c,jF:()=>o,sY:()=>g,uJ:()=>u});var n=e(69781),a=e.n(n),i=e(21279),r=e(46536);function o(l,d,f,m){if(l===r.d1.Fill)return{width:d,height:f};const v=8*6,E=60,h=(window.innerWidth-E-i.hD*4)/i.cz*m.gridPos.w,s=i.K3*m.gridPos.h+v,y=Math.min(d/h,f/s);return h<=d&&s<=f?{width:h,height:s}:{width:h*y,height:s*y}}function g(l){return l?.meta.skipDataQuery===!1}const u=(l,d,f,m)=>{let v={...l.defaults};const E=f==null||f==="";return m?v.custom?E?v.custom=(0,n.omit)(v.custom,d):v.custom=c(v.custom,d,f):E||(v.custom=c(v.custom,d,f)):E?v=(0,n.omit)(v,d):v=c(v,d,f),{...l,defaults:v}};function c(l,d,f){const m=Array.isArray(d)?d:d.split("."),v=m.shift();if(v.endsWith("]")){const p=v.lastIndexOf("["),h=+v.substring(p+1,v.length-1),s=v.substring(0,p);let y=l[s];const D=Array.isArray(y)?[...y]:[];return m.length&&(y=D[h],(y==null||typeof y!="object")&&(y={}),f=c(y,m,f)),D[h]=f,{...l,[s]:D}}if(!m.length)return{...l,[v]:f};let E=l[v];return(E==null||typeof E!="object")&&(E={}),{...l,[v]:c(E,m,f)}}},9526:(Q,A,e)=>{"use strict";e.d(A,{i:()=>u,t:()=>c});var n=e(31733),a=e(21568),i=e(64704),r=e(58947),o=e(51343),g=e(69760);const u=({dashboard:l,onSaveSuccess:d,size:f})=>n.createElement(r.JY,null,({showModal:m,hideModal:v})=>n.createElement(o.zx,{size:f,onClick:()=>{m(g.d,{dashboard:l,onSaveSuccess:d,onDismiss:v})},"aria-label":a.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),c=({dashboard:l,onClick:d,onSaveSuccess:f,variant:m,size:v})=>n.createElement(r.JY,null,({showModal:E,hideModal:p})=>n.createElement(o.zx,{size:v,onClick:()=>{(0,i.ff)("grafana_dashboard_save_as_clicked"),d?.(),E(g.d,{dashboard:l,onSaveSuccess:f,onDismiss:p,isCopy:!0})},variant:m,"aria-label":a.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},64754:(Q,A,e)=>{"use strict";e.d(A,{_:()=>c});var n=e(76932),a=e(31733),i=e(59326),r=e(76067),o=e(89719),g=e(68506),u=e(4002);const c=({diff:d,oldValue:f,newValue:m})=>{const v=(0,r.wW)(l),E=(0,i.Z)(async()=>{const h=JSON.stringify(f??{},null,2),s=JSON.stringify(m??{},null,2);let y;const D=[];let C=0;if(d)for(const[P,b]of Object.entries(d)){const T=a.createElement(g.B,{diffs:b,key:P,title:P});P==="schemaVersion"?y=T:D.push(T),C+=b.length}return{schemaChange:y,diffs:D,count:C,showDiffs:C<15,jsonView:a.createElement(u.Z,{oldValue:h,newValue:s})}},[d,f,m]),{value:p}=E;return!p||!f?a.createElement(o.$,null):p.count<1?a.createElement("div",null,"No changes in this dashboard"):a.createElement("div",null,p.schemaChange&&a.createElement("div",{className:v.spacer},p.schemaChange),p.showDiffs&&a.createElement("div",{className:v.spacer},p.diffs),a.createElement("h4",null,"JSON Model"),p.jsonView)},l=d=>({spacer:(0,n.css)`
    margin-bottom: ${d.v1.spacing.xl};
  `})},69760:(Q,A,e)=>{"use strict";e.d(A,{d:()=>Ye});var n=e(31733),a=e(69391),i=e(85498),r=e(59899),o=e(88062),g=e(4981),u=e(45654),c=e(76932),l=e(59326),d=e(76067),f=e(25111),m=e(41327);function v({dashboard:Ne}){const je=(0,d.wW)(E),{loading:ut,value:Fe,error:Te}=(0,l.Z)(async()=>{const tt=Ne.getSaveModelCloneOld();return m.ae.validateDashboard(tt).catch(J=>{if(J.status>=500)throw J;return J.data})},[Ne]);let Ve;if(ut)Ve=n.createElement(f.b,{severity:"info",title:"Checking dashboard validity"});else if(Fe)Fe.isValid||(Ve=n.createElement(f.b,{severity:"warning",title:"Dashboard failed schema validation"},n.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),n.createElement("div",{className:je.error},Fe.message)));else{const tt=Te?.message??"Unknown error";Ve=n.createElement(f.b,{severity:"info",title:"Error checking dashboard validity"},n.createElement("p",{className:je.error},tt))}return Ve?n.createElement("div",{className:je.root},Ve):null}const E=Ne=>({root:(0,c.css)({marginTop:Ne.spacing(1)}),error:(0,c.css)({fontFamily:Ne.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),p=v;var h=e(64754),s=e(90069),y=e(5572),D=e(51343),C=e(9526),P=e(41710),b=e(84912),T=e(64704),O=e(19690),R=e(83599),I=e(42876),M=e(9133),x=e(52368),L=e(42342),S=e(74642),U=e(63711);const N=async(Ne,je,ut,Fe)=>{const Te=await Fe({dashboard:Ne,folderUid:je.folderUid??ut.meta.folderUid??Ne.meta?.folderUid,message:je.message,overwrite:je.overwrite});if("error"in Te)throw Te.error;return Te.data},w=(Ne=!1)=>{const je=(0,L.useDispatch)(),ut=(0,I.iG)(),[Fe]=(0,x.yF)(),[Te,Ve]=(0,P.Z)(async(tt,ae,J)=>{try{const te=await N(tt,ae,J,Fe);J.version=te.version,tt.version=te.version,J.clearUnsavedChanges(tt,ae),R.Z.publish(new S.Jd),ut.success("Dashboard saved"),(0,U.AX)(te.uid),Ne?(0,T.ff)("grafana_dashboard_copied",{name:J.title,url:te.url}):(0,T.ff)(`grafana_dashboard_${J.id?"saved":"created"}`,{name:J.title,url:te.url});const de=O.E1.getLocation().pathname,be=b.u.stripBaseFromUrl(te.url);return be!==de&&setTimeout(()=>O.E1.replace(be)),J.meta.isStarred&&je((0,M.gd)({id:J.uid,title:J.title,url:be})),te}catch(te){throw te instanceof Error&&ut.error(te.message??"Error saving dashboard"),te}},[je,ut]);return{state:Te,onDashboardSave:Ve}},G=({dashboard:Ne,dashboardSaveModel:je,error:ut,onDismiss:Fe,setErrorIsHandled:Te})=>{const{onDashboardSave:Ve}=w();return n.createElement(n.Fragment,null,ut.data&&ut.data.status==="version-mismatch"&&n.createElement(s.s,{isOpen:!0,title:"Conflict",body:n.createElement("div",null,"Someone else has updated this dashboard ",n.createElement("br",null)," ",n.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Ve(je,{overwrite:!0},Ne),Fe()},onDismiss:Fe}),ut.data&&ut.data.status==="name-exists"&&n.createElement(s.s,{isOpen:!0,title:"Conflict",body:n.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",n.createElement("br",null),n.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Ve(je,{overwrite:!0},Ne),Fe()},onDismiss:Fe}),ut.data&&ut.data.status==="plugin-dashboard"&&n.createElement(_,{dashboard:Ne,onDismiss:()=>{Te(!0),Fe()}}))},_=({onDismiss:Ne,dashboard:je})=>{const{onDashboardSave:ut}=w(),Fe=(0,d.wW)(k);return n.createElement(y.u,{className:Fe.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:Ne},n.createElement("div",{className:Fe.modalText},"Your changes will be lost when you update the plugin.",n.createElement("br",null),n.createElement("small",null,"Use ",n.createElement("strong",null,"Save As")," to create custom version.")),n.createElement(y.u.ButtonRow,null,n.createElement(D.zx,{variant:"secondary",onClick:Ne,fill:"outline"},"Cancel"),n.createElement(C.t,{onClick:Ne,dashboard:je,onSaveSuccess:Ne}),n.createElement(D.zx,{variant:"destructive",onClick:async()=>{await ut(je.getSaveModelClone(),{overwrite:!0},je),Ne()}},"Overwrite")))},K=Ne=>{switch(Ne){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},k=Ne=>({modal:(0,c.css)`
    width: 500px;
  `,modalText:(0,c.css)`
    font-size: ${Ne.typography.h4.fontSize};
    color: ${Ne.colors.text.primary};
    margin-bottom: ${Ne.spacing(4)}
    padding-top: ${Ne.spacing(2)};
  `,modalButtonRow:(0,c.css)`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${Ne.spacing(2)};
    }
  `});var z=e(17618),W=e(32901),Z=e(85765),H=e(79106),X=e(36667),Y=e(64516),ne=e(28718),se=e(76772),re=e(26371),ge=e(8239),q=e(34676),me=e(3386);const oe=Ne=>{const je=Ne.getSaveModelClone();return je.id=null,je.uid="",je.title+=" Copy",je.editable=!0,Ne.id>0&&je.panels&&je.panels.forEach(ut=>{ut.type==="graph"&&ut.alert&&delete ut.thresholds,delete ut.alert}),je},fe=({dashboard:Ne,isLoading:je,isNew:ut,onSubmit:Fe,onCancel:Te,onSuccess:Ve})=>{const tt={title:ut?Ne.title:`${Ne.title} Copy`,description:Ne.description,$folder:{uid:Ne.meta.folderUid,title:Ne.meta.folderTitle},copyTags:!1},ae=J=>async te=>{if(te&&te===J().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ge.t.validateNewDashboardName(J().$folder.uid??"general",te),!0}catch(de){return de instanceof Error?de.message:"Dashboard name is invalid"}};return n.createElement(z.l,{defaultValues:tt,onSubmit:async J=>{if(!Fe)return;const te=oe(Ne);te.title=J.title,te.description=J.description,!ut&&!J.copyTags&&(te.tags=[]),(await Fe(te,{folderUid:J.$folder.uid},Ne)).status==="success"&&Ve()}},({register:J,control:te,errors:de,getValues:be})=>n.createElement(n.Fragment,null,n.createElement(W.g,{render:({field:{ref:De,...Ue}})=>n.createElement(Z.g,{label:n.createElement(H.Lh,{justify:"space-between"},n.createElement(X._,{htmlFor:"title"},"Title"),i.config.featureToggles.dashgpt&&ut&&n.createElement(me.n,{onGenerate:We=>Ue.onChange(We),dashboard:Ne})),invalid:!!de.title,error:de.title?.message},n.createElement(Y.I,{...Ue,onChange:We=>Ue.onChange(We.target.value),"aria-label":"Save dashboard title field",autoFocus:!0})),control:te,name:"title",rules:{validate:ae(be)}}),n.createElement(W.g,{render:({field:{ref:De,...Ue}})=>n.createElement(Z.g,{label:n.createElement(H.Lh,{justify:"space-between"},n.createElement(X._,{htmlFor:"description"},"Description"),i.config.featureToggles.dashgpt&&ut&&n.createElement(q._,{onGenerate:We=>Ue.onChange(We),dashboard:Ne})),invalid:!!de.description,error:de.description?.message},n.createElement(ne.K,{...Ue,onChange:We=>Ue.onChange(We.target.value),"aria-label":"Save dashboard description field",autoFocus:!0})),control:te,name:"description"}),n.createElement(Z.g,{label:"Folder"},n.createElement(W.g,{render:({field:{ref:De,...Ue}})=>n.createElement(re.E,{...Ue,onChange:(We,et)=>Ue.onChange({uid:We,title:et}),value:Ue.value?.uid,initialTitle:Ne.meta.folderTitle,dashboardId:Ne.id,enableCreateNew:!0}),control:te,name:"$folder"})),!ut&&n.createElement(Z.g,{label:"Copy tags"},n.createElement(se.r,{...J("copyTags")})),n.createElement(H.Lh,null,n.createElement(D.zx,{type:"button",variant:"secondary",onClick:Te,fill:"outline"},"Cancel"),n.createElement(D.zx,{disabled:je,type:"submit","aria-label":"Save dashboard button"},je?"Saving...":"Save"))))};var ve=e(21568),pe=e(37739),Me=e(36356),Pe=e(31386),Ee=e(74071),he=e(16005);const Le=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard to display to the user","You will be given human-readable diffs with most irrelevant lines filtered out"].join(`.
`),ke=["Respond only with the diff description, which is meant to be loaded directly into the application for the user.",'If there are no substantial user or migration changes, the correct description is "Minor changes only"',`If there are too many changes of either kind, and those changes have a message saying 'too long', the correct response for that section is "Too many changes to auto-summarize"`,"In a diff, lines beginning with - are removed, and lines beginning with + are added.","Lines with neither + nor - are included for context. Be careful not to mark them as added or removed if they do not start with + or -.","If a line is changed, it will show a previous version removed and a new version added","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes position, just mention that the panel has changed position","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group together similar changes into one line when multiple panels are affected","Refer to templating elements as variables","Try to make the response as short as possible"].join(`.
`),ot=({dashboard:Ne,onGenerate:je,disabled:ut})=>{const Fe=(0,n.useCallback)(()=>it(Ne),[Ne]);return n.createElement(Pe.v,{messages:Fe,onGenerate:je,temperature:0,model:"gpt-3.5-turbo-16k",eventTrackingSrc:Ee.dG.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:ut})};function it(Ne){let{userChanges:je,migrationChanges:ut}=(0,he.xm)(Ne);return je.length>8e3&&(je="User changes were too long, fill in the user changes section with 'User changes too long to auto-summarize'"),ut.split(`
`).length<10?ut="No significant migration changes":ut.length>8e3&&(ut="Migration changes were too long, fill in the migration changes section with 'Migration changes too long to auto-summarize'"),[{content:Le,role:he.uU.system},{content:`Summarize the following user changes diff under "User changes":
${je}`,role:he.uU.system},{content:`Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Do not include "User Changes" section if there are no substantial user changes to report.`,role:he.uU.system},{content:`Summarize the following migration changes diff under "Migration changes":
${ut}`,role:he.uU.system},{content:`Be sure to only include substantial migration changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Ignore any threshold step changes or templating list changes.
Ignore other changes and do not include them in the summary. Do not include "Migration Changes" section if there are no substantial migration changes to report.
If there are substantial migration changes, add "Some autogenerated changes are included to update the dashboard to the latest valid schema version" at the end.`,role:he.uU.system},{content:ke,role:he.uU.system}]}const ce=({dashboard:Ne,isLoading:je,saveModel:ut,options:Fe,onSubmit:Te,onCancel:Ve,onSuccess:tt,onOptionsChange:ae})=>{const J=(0,n.useMemo)(()=>Ne.hasTimeChanged(),[Ne]),te=(0,n.useMemo)(()=>Ne.hasVariablesChanged(),[Ne]),[de,be]=(0,n.useState)(!1),[De,Ue]=(0,n.useState)(Fe.message),We=(0,d.wW)(le);return n.createElement(z.l,{onSubmit:async et=>{if(!Te)return;be(!0),Fe={...Fe,message:De},(await Te(ut.clone,Fe,Ne)).status==="success"?tt():be(!1)}},({register:et,errors:ze})=>n.createElement(pe.K,{gap:2,direction:"column",alignItems:"flex-start"},J&&n.createElement(Me.X,{checked:!!Fe.saveTimerange,onChange:()=>ae({...Fe,saveTimerange:!Fe.saveTimerange}),label:"Save current time range as dashboard default","aria-label":ve.wl.pages.SaveDashboardModal.saveTimerange}),te&&n.createElement(Me.X,{checked:!!Fe.saveVariables,onChange:()=>ae({...Fe,saveVariables:!Fe.saveVariables}),label:"Save current variable values as dashboard default","aria-label":ve.wl.pages.SaveDashboardModal.saveVariables}),n.createElement("div",{className:We.message},i.config.featureToggles.dashgpt&&n.createElement(ot,{dashboard:Ne,onGenerate:_e=>{ae({...Fe,message:_e}),Ue(_e)},disabled:!ut.hasChanges}),n.createElement(ne.K,{"aria-label":"message",value:De,onChange:_e=>{ae({...Fe,message:_e.currentTarget.value}),Ue(_e.currentTarget.value)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),n.createElement(pe.K,{alignItems:"center"},n.createElement(D.zx,{variant:"secondary",onClick:Ve,fill:"outline"},"Cancel"),n.createElement(D.zx,{type:"submit",disabled:!ut.hasChanges||je,icon:de?"spinner":void 0,"aria-label":ve.wl.pages.SaveDashboardModal.save},je?"Saving...":"Save"),!ut.hasChanges&&n.createElement("div",null,"No changes to save"))))};function le(Ne){return{message:(0,c.css)`
      display: flex;
      align-items: end;
      flex-direction: column;
      width: 100%;
    `}}var Re=e(73386),Ae=e(5334);const Oe=({dashboard:Ne,onCancel:je})=>{const[ut,Fe]=(0,n.useState)(()=>{const Ve=Ne.getSaveModelClone();return delete Ve.id,JSON.stringify(Ve,null,2)}),Te=(0,n.useCallback)(()=>{const Ve=new Blob([ut],{type:"application/json;charset=utf-8"});(0,Re.saveAs)(Ve,Ne.title+"-"+new Date().getTime()+".json")},[Ne.title,ut]);return n.createElement(n.Fragment,null,n.createElement(pe.K,{direction:"column",gap:2},n.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",n.createElement("br",null),n.createElement("i",null,"See"," ",n.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),n.createElement("br",null)," ",n.createElement("br",null),n.createElement("strong",null,"File path: ")," ",Ne.meta.provisionedExternalId),n.createElement(ne.K,{spellCheck:!1,value:ut,onChange:Ve=>{Fe(Ve.currentTarget.value)},className:$e.json}),n.createElement(H.Lh,null,n.createElement(D.zx,{variant:"secondary",onClick:je,fill:"outline"},"Cancel"),n.createElement(Ae.m,{icon:"copy",getText:()=>ut},"Copy JSON to clipboard"),n.createElement(D.zx,{type:"submit",onClick:Te},"Save JSON to file"))))},$e={json:(0,c.css)`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},Ye=({dashboard:Ne,onDismiss:je,onSaveSuccess:ut,isCopy:Fe})=>{const[Te,Ve]=(0,n.useState)({}),tt=Ne.getOriginalDashboard(),ae=Ne.meta.provisioned,J=Ne.version===0,[te,de]=(0,n.useState)(!1),be=(0,n.useMemo)(()=>{const at=Ne.getSaveModelClone({saveTimerange:!!Te.saveTimerange,saveVariables:!!Te.saveVariables});if(!tt)return{clone:at,diff:{},diffCount:0,hasChanges:!1};const lt=(0,u.Q$)(tt,at);let ft=0;for(const yt of Object.values(lt))ft+=yt.length;return{clone:at,diff:lt,diffCount:ft,hasChanges:ft>0&&!J}},[Ne,tt,Te,J]),[De,Ue]=(0,n.useState)(!1),{state:We,onDashboardSave:et}=w(Fe),ze=ut?()=>{je(),ut()}:je,_e=()=>De?n.createElement(h._,{diff:be.diff,oldValue:tt,newValue:be.clone}):J||Fe?n.createElement(fe,{dashboard:Ne,isLoading:We.loading,onCancel:je,onSuccess:ze,onSubmit:et,isNew:J}):ae?n.createElement(Oe,{dashboard:Ne,onCancel:je,onSuccess:ze}):n.createElement(ce,{dashboard:Ne,isLoading:We.loading,saveModel:be,onCancel:je,onSuccess:ze,onSubmit:et,options:Te,onOptionsChange:Ve});if(We.error&&!te&&(0,a.kW)(We.error)&&K(We.error.data.status))return n.createElement(G,{error:We.error,dashboard:Ne,dashboardSaveModel:be.clone,onDismiss:je,setErrorIsHandled:de});let qe="Save dashboard";return Fe?qe="Save dashboard copy":ae&&(qe="Provisioned dashboard"),n.createElement(r.d,{title:qe,onClose:je,subtitle:Ne.title,tabs:n.createElement(o.J,null,n.createElement(g.O,{label:"Details",active:!De,onChangeTab:()=>Ue(!1)}),be.hasChanges&&n.createElement(g.O,{label:"Changes",active:De,onChangeTab:()=>Ue(!0),counter:be.diffCount}))},_e(),i.config.featureToggles.showDashboardValidationWarnings&&n.createElement(p,{dashboard:Ne}))}},76504:(Q,A,e)=>{"use strict";e.d(A,{q:()=>v});var n=e(31733),a=e(26124),i=e(64704),r=e(85765),o=e(76772),g=e(28718),u=e(5572),c=e(5334),l=e(53166),d=e(92762),f=e(42637),m=e(66699);function v({panel:E,dashboard:p,range:h,buildIframe:s=m.S_}){const[y,D]=(0,n.useState)(!0),[C,P]=(0,n.useState)("current"),[b,T]=(0,n.useState)("");(0,a.Z)(()=>{(0,i.ff)("grafana_dashboards_embed_share_viewed")}),(0,n.useEffect)(()=>{const L=s(y,p.uid,C,E,h);T(L)},[C,y,p,E,h,s]);const O=L=>{T(L.currentTarget.value)},R=()=>{D(L=>!L)},I=L=>{P(L)},x=p.time.to==="now"?(0,l.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),n.createElement(r.g,{label:(0,l.t)("share-modal.embed.time-range","Current time range"),description:x},n.createElement(o.r,{id:"share-current-time-range",value:y,onChange:R})),n.createElement(f.J,{selectedTheme:C,onChange:I}),n.createElement(r.g,{label:(0,l.t)("share-modal.embed.html","Embed HTML"),description:(0,l.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},n.createElement(g.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:b,onChange:O})),n.createElement(u.u.ButtonRow,null,n.createElement(c.m,{icon:"copy",variant:"primary",getText:()=>b,onClipboardCopy:()=>{d.a.embedSnippetCopy({currentTimeRange:y,theme:C})}},n.createElement(l.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}},96838:(Q,A,e)=>{"use strict";e.d(A,{e:()=>o});var n=e(31733),a=e(64704),i=e(53166),r=e(96870);const o=({panel:g,initialFolderUid:u,onDismiss:c})=>((0,n.useEffect)(()=>{(0,a.ff)("grafana_dashboards_library_panel_share_viewed")},[]),g?n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(i.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),n.createElement(r.T,{panel:g,initialFolderUid:u,onDismiss:c})):null)},97619:(Q,A,e)=>{"use strict";e.d(A,{V8:()=>oe});var n=e(31733),a=e(13883),i=e(5572),r=e(31805),o=e(76067),g=e(83811),u=e(75923),c=e(53166),l=e(80918),d=e(35344),f=e(92762),m=e(3002),v=e(76504),E=e(73386),p=e(85765),h=e(76772),s=e(51343),y=e(91085),D=e(74642),C=e(43741),P=e(73642),b=e(5334);function T({json:fe,onDismiss:ve}){const pe=(0,n.useCallback)(()=>fe,[fe]);return n.createElement(i.u,{title:"JSON",onDismiss:ve,onClickBackdrop:ve,isOpen:!0},n.createElement(C.Z,{disableHeight:!0},({width:Me})=>n.createElement(P.p,{value:fe,language:"json",showMiniMap:!1,height:"500px",width:Me})),n.createElement(i.u.ButtonRow,null,n.createElement(b.m,{icon:"copy",getText:pe,onClipboardCopy:()=>{f.a.exportCopyJsonClicked()}},n.createElement(c.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class O extends n.PureComponent{constructor(ve){super(ve),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onSaveAsFile=()=>{const{dashboard:pe}=this.props,{shareExternally:Me}=this.state;f.a.exportSaveJsonClicked(),Me?this.exporter.makeExportable(pe).then(Pe=>{this.openSaveAsDialog(Pe)}):this.openSaveAsDialog(pe.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:pe}=this.props,{shareExternally:Me}=this.state;f.a.exportViewJsonClicked(),Me?this.exporter.makeExportable(pe).then(Pe=>{this.openJsonModal(Pe)}):this.openJsonModal(pe.getSaveModelClone())},this.openSaveAsDialog=pe=>{const Me=JSON.stringify(pe,null,2),Pe=new Blob([Me],{type:"application/json;charset=utf-8"}),Ee=new Date().getTime();(0,E.saveAs)(Pe,`${pe.title}-${Ee}.json`)},this.openJsonModal=pe=>{u.h$.publish(new D.Dn({props:{json:JSON.stringify(pe,null,2)},component:T})),this.props.onDismiss?.()},this.state={shareExternally:!1},this.exporter=new y.E}render(){const{onDismiss:ve}=this.props,{shareExternally:pe}=this.state,Me=(0,c.t)("share-modal.export.share-externally-label","Export for sharing externally");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),n.createElement(p.g,{label:Me},n.createElement(h.r,{id:"share-externally-toggle",value:pe,onChange:this.onShareExternallyChange})),n.createElement(i.u.ButtonRow,null,n.createElement(s.zx,{variant:"secondary",onClick:ve,fill:"outline"},n.createElement(c.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),n.createElement(s.zx,{variant:"secondary",onClick:this.onViewJson},n.createElement(c.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),n.createElement(s.zx,{variant:"primary",onClick:this.onSaveAsFile},n.createElement(c.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var R=e(96838),I=e(21568),M=e(97216),x=e(64516),L=e(94746),S=e(25111),U=e(42637),N=e(66699);class w extends n.PureComponent{constructor(ve){super(ve),this.buildUrl=async()=>{const{panel:pe,dashboard:Me}=this.props,{useCurrentTimeRange:Pe,useShortUrl:Ee,selectedTheme:he}=this.state,Le=await(0,N.bl)(Pe,he,pe,Ee),ke=(0,N.Sc)(Pe,Me.uid,he,pe);this.setState({shareUrl:Le,imageUrl:ke})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=pe=>{this.setState({selectedTheme:pe})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""},this.onCopy=this.onCopy.bind(this)}componentDidMount(){this.buildUrl()}componentDidUpdate(ve,pe){const{useCurrentTimeRange:Me,useShortUrl:Pe,selectedTheme:Ee}=this.state;(pe.useCurrentTimeRange!==Me||pe.selectedTheme!==Ee||pe.useShortUrl!==Pe)&&this.buildUrl()}onCopy(){f.a.shareLinkCopied({currentTimeRange:this.state.useCurrentTimeRange,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}render(){const{panel:ve,dashboard:pe}=this.props,Me=pe?pe.time.to==="now":!1,{useCurrentTimeRange:Pe,useShortUrl:Ee,selectedTheme:he,shareUrl:Le,imageUrl:ke}=this.state,ot=I.wl.pages.SharePanelModal,it=!!pe.id,ce=(0,c.t)("share-modal.link.time-range-label","Lock time range"),le=(0,c.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Re=(0,c.t)("share-modal.link.shorten-url","Shorten URL"),Ae=(0,c.t)("share-modal.link.link-url","Link URL");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),n.createElement(M.C,null,n.createElement(p.g,{label:ce,description:Me?le:""},n.createElement(h.r,{id:"share-current-time-range",value:Pe,onChange:this.onUseCurrentTimeRangeChange})),n.createElement(U.J,{selectedTheme:he,onChange:this.onThemeChange}),n.createElement(p.g,{label:Re},n.createElement(h.r,{id:"share-shorten-url",value:Ee,onChange:this.onUrlShorten})),n.createElement(p.g,{label:Ae},n.createElement(x.I,{id:"link-url-input",value:Le,readOnly:!0,addonAfter:n.createElement(b.m,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy},n.createElement(c.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),ve&&g.default.rendererAvailable&&n.createElement(n.Fragment,null,it&&n.createElement(L.h,{href:ke,external:!0,icon:"camera","aria-label":ot.linkToRenderedImage},(0,c.t)("share-modal.link.rendered-image","Direct link rendered image")),!it&&n.createElement(S.b,{severity:"info",title:(0,c.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},n.createElement(c.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),ve&&!g.default.rendererAvailable&&n.createElement(S.b,{severity:"info",title:(0,c.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},n.createElement(c.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",n.createElement(L.h,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var G=e(32147),_=e(69391),K=e(38834),k=e(89719),z=e(89660),W=e(7257),Z=e(38457);const H="/api/snapshots";class X extends n.PureComponent{constructor(ve){super(ve),this.createSnapshot=pe=>()=>{const{timeoutSeconds:Me}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,pe)},Me*1e3)},this.saveSnapshot=async(pe,Me)=>{const{snapshotExpires:Pe,timeoutSeconds:Ee}=this.state,he=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(he);const Le={dashboard:he,name:he.title,expires:Pe,external:Me};try{const ke=await(0,_.i)().post(H,Le);this.setState({deleteUrl:ke.deleteUrl,snapshotUrl:ke.url,step:2})}finally{Me?f.a.publishSnapshotClicked({expires:Pe,timeout:Ee}):f.a.publishSnapshotLocalClicked({expires:Pe,timeout:Ee}),this.setState({isLoading:!1})}},this.scrubDashboard=pe=>{const{panel:Me}=this.props,{snapshotName:Pe}=this.state;pe.title=Pe,pe.time=(0,z.$t)().timeRange(),pe.links=[],pe.panels.forEach(he=>{he.targets=[],he.links=[],he.datasource=null});const Ee=pe.annotations.list.filter(he=>he.enable);if(pe.annotations.list=Ee.map(he=>({name:he.name,enable:he.enable,iconColor:he.iconColor,snapshotData:he.snapshotData,type:he.type,builtIn:he.builtIn,hide:he.hide})),pe.getVariables().forEach(he=>{"query"in he&&(he.query=""),"options"in he&&(he.options=he.current&&!(0,G.Q)(he.current)?[he.current]:[]),"refresh"in he&&(he.refresh=W.Bd.never)}),Me){const he=Me.getSaveModel();he.gridPos.w=24,he.gridPos.x=0,he.gridPos.y=0,he.gridPos.h=20,pe.panels=[he]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(he=>{delete he.snapshotData}),this.dashboard.annotations.list.forEach(he=>{delete he.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:pe}=this.state;await(0,_.i)().get(pe),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=pe=>{this.setState({snapshotName:pe.target.value})},this.onTimeoutChange=pe=>{this.setState({timeoutSeconds:Number(pe.target.value)})},this.onExpireChange=pe=>{this.setState({selectedExpireOption:pe,snapshotExpires:pe.value})},this.dashboard=ve.dashboard,this.expireOptions=[{label:(0,c.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,c.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,c.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,c.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:ve.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const ve=await(0,Z.G)().getSharingOptions();this.setState({sharingButtonText:ve.externalSnapshotName,externalEnabled:ve.externalEnabled})}renderStep1(){const{onDismiss:ve}=this.props,{snapshotName:pe,selectedExpireOption:Me,timeoutSeconds:Pe,isLoading:Ee,sharingButtonText:he,externalEnabled:Le}=this.state,ke=(0,c.t)("share-modal.snapshot.name","Snapshot name"),ot=(0,c.t)("share-modal.snapshot.expire","Expire"),it=(0,c.t)("share-modal.snapshot.timeout","Timeout (seconds)"),ce=(0,c.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",n.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),n.createElement(p.g,{label:ke},n.createElement(x.I,{id:"snapshot-name-input",width:30,value:pe,onChange:this.onSnapshotNameChange})),n.createElement(p.g,{label:ot},n.createElement(K.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:Me,onChange:this.onExpireChange})),n.createElement(p.g,{label:it,description:ce},n.createElement(x.I,{id:"timeout-input",type:"number",width:21,value:Pe,onChange:this.onTimeoutChange})),n.createElement(i.u.ButtonRow,null,n.createElement(s.zx,{variant:"secondary",onClick:ve,fill:"outline"},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Le&&n.createElement(s.zx,{variant:"secondary",disabled:Ee,onClick:this.createSnapshot(!0)},he),n.createElement(s.zx,{variant:"primary",disabled:Ee,onClick:this.createSnapshot()},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:ve}=this.state;return n.createElement(n.Fragment,null,n.createElement(p.g,{label:(0,c.t)("share-modal.snapshot.url-label","Snapshot URL")},n.createElement(x.I,{id:"snapshot-url-input",value:ve,readOnly:!0,addonAfter:n.createElement(b.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),n.createElement("div",{className:"pull-right",style:{padding:"5px"}},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",n.createElement(s.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return n.createElement("div",{className:"share-modal-header"},n.createElement("p",{className:"share-modal-info-text"},n.createElement(c.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:ve,step:pe}=this.state;return n.createElement(n.Fragment,null,pe===1&&this.renderStep1(),pe===2&&this.renderStep2(),pe===3&&this.renderStep3(),ve&&n.createElement(k.$,{inline:!0}))}}const Y=[],ne=[];function se(fe){Y.push(fe)}function re(fe){ne.push(fe)}function ge(fe,ve){const Me=[{label:(0,c.t)("share-modal.tab-title.link","Link"),value:N.Ax.link,component:w}];if(u.Vt.isSignedIn&&g.config.snapshotEnabled){const Ee=(0,c.t)("share-modal.tab-title.snapshot","Snapshot");Me.push({label:Ee,value:N.Ax.snapshot,component:X})}if(fe){const Ee=(0,c.t)("share-modal.tab-title.embed","Embed");if(Me.push({label:Ee,value:N.Ax.embed,component:v.q}),!(0,m.V)(fe)){const he=(0,c.t)("share-modal.tab-title.library-panel","Library panel");Me.push({label:he,value:N.Ax.libraryPanel,component:R.e})}Me.push(...ne)}else{const Ee=(0,c.t)("share-modal.tab-title.export","Export");Me.push({label:Ee,value:N.Ax.export,component:O}),Me.push(...Y)}(0,d.k3)()&&Me.push({label:"Public dashboard",value:N.Ax.publicDashboard,component:l.E});const Pe=Me.find(Ee=>Ee.value===ve);return{tabs:Me,activeTab:Pe?.value??Me[0].value}}function q(fe){const{tabs:ve,activeTab:pe}=ge(fe.panel,fe.activeTab);return{tabs:ve,activeTab:pe}}class me extends n.Component{constructor(ve){super(ve),this.onSelectTab=pe=>{this.setState(Me=>({...Me,activeTab:pe.value})),f.a.sharingTabChanged({item:pe.value})},this.state=q(ve)}getActiveTab(){const{tabs:ve,activeTab:pe}=this.state;return ve.find(Me=>Me.value===pe)}renderTitle(){const{panel:ve}=this.props,{activeTab:pe}=this.state,Me=ve?(0,c.t)("share-modal.panel.title","Share Panel"):(0,c.t)("share-modal.dashboard.title","Share"),Pe=ge(this.props.panel,this.state.activeTab).tabs;return n.createElement(a.H,{title:Me,icon:"share-alt",tabs:Pe,activeTab:pe,onChangeTab:this.onSelectTab})}render(){const{dashboard:ve,panel:pe}=this.props,Pe=this.getActiveTab().component;return n.createElement(i.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},n.createElement(r.I,null,n.createElement(Pe,{dashboard:ve,panel:pe,onDismiss:this.props.onDismiss})))}}const oe=(0,o.HE)(me)},23973:(Q,A,e)=>{"use strict";e.d(A,{w:()=>Ee,r:()=>Pe});var n=e(76932),a=e(31733),i=e(54126),r=e(21568),o=e(85498),g=e(28298),u=e(76067),c=e(85765),l=e(64516),d=e(5334),f=e(76772),m=e(36667),v=e(79106),E=e(51343),p=e(58947),h=e(86561),s=e(79832),y=e(92762),D=e(29852),C=e(56811),P=e(42342),b=e(99841);const T=()=>{const{width:Le}=(0,b.Z)();return Le>1024};var O=e(97619),R=e(66699),I=e(74381),M=e(25111);const x=()=>a.createElement(M.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning",bottomSpacing:0});var L=e(86242),S=e(29880),U=e(35344),N=e(97216),w=e(30791);const G=r.wl.pages.ShareDashboardModal.PublicDashboard,_=({disabled:Le,onChange:ke,register:ot,timeRange:it})=>a.createElement(a.Fragment,null,a.createElement(N.C,{disabled:Le},a.createElement(v.wc,{spacing:"md"},a.createElement(v.Ar,{orientation:1,spacing:"xs",justify:"space-between"},a.createElement(m._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),a.createElement(w.K,{value:it,disabled:!0,onChange:()=>{}})),a.createElement(v.Ar,{orientation:0,spacing:"sm"},a.createElement(f.r,{...ot("isTimeSelectionEnabled"),"data-testid":G.EnableTimeRangeSwitch,onChange:ce=>{ke("isTimeSelectionEnabled",ce.currentTarget.checked),y.a.publicDashboardTimeSelectionChanged({enabled:ce.currentTarget.checked})}}),a.createElement(m._,{description:"Allow viewers to change time range"},"Time range picker enabled")),a.createElement(v.Ar,{orientation:0,spacing:"sm"},a.createElement(f.r,{...ot("isAnnotationsEnabled"),onChange:ce=>{ke("isAnnotationsEnabled",ce.currentTarget.checked),y.a.publicDashboardAnnotationsSelectionChanged({enabled:ce.currentTarget.checked})},"data-testid":G.EnableAnnotationsSwitch}),a.createElement(m._,{description:"Show annotations on public dashboard"},"Show annotations")))));var K=e(5460),k=e(32901),z=e(96856),W=e(89719);const Z=[{label:"Anyone with a link",value:U.Jd.PUBLIC},{label:"Only specified people",value:U.Jd.EMAIL}],H=r.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,X=({recipients:Le,dashboardUid:ke,publicDashboardUid:ot})=>{const it=(0,u.wW)(ne),[ce,{isLoading:le}]=(0,h.r5)(),[Re,{isLoading:Ae}]=(0,h.RS)(),Oe=le||Ae,$e=(Ne,je)=>{y.a.revokePublicDashboardEmailClicked(),ce({recipientUid:Ne,recipientEmail:je,dashboardUid:ke,uid:ot})},Ye=Ne=>{y.a.resendPublicDashboardEmailClicked(),Re({recipientUid:Ne,uid:ot})};return a.createElement("table",{className:it.table,"data-testid":H.EmailSharingList},a.createElement("tbody",null,Le.map((Ne,je)=>a.createElement("tr",{key:Ne.uid},a.createElement("td",null,Ne.recipient),a.createElement("td",null,a.createElement(K.h,{className:it.tableButtonsContainer},a.createElement(E.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:Oe,onClick:()=>$e(Ne.uid,Ne.recipient),"data-testid":`${H.DeleteEmail}-${je}`},"Revoke"),a.createElement(E.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:Oe,onClick:()=>Ye(Ne.uid),"data-testid":`${H.ReshareLink}-${je}`},"Resend")))))))},Y=()=>{const{width:Le}=(0,b.Z)(),ke=(0,u.wW)(ne),it=(0,P.useSelector)(ae=>ae.dashboard).getModel(),{data:ce}=(0,h.Ym)(it.uid),[le]=(0,h.Mi)(),[Re,{isLoading:Ae}]=(0,h.FJ)(),Oe=C.contextSrv.hasPermission(P.AccessControlAction.DashboardsPublicWrite),{register:$e,setValue:Ye,control:Ne,watch:je,handleSubmit:ut,formState:{errors:Fe},reset:Te}=(0,i.cI)({defaultValues:{shareType:ce?.share||U.Jd.PUBLIC,email:""},mode:"onSubmit"}),Ve=ae=>{const J={dashboard:it,payload:{...ce,share:ae}};le(J)},tt=async ae=>{y.a.publicDashboardEmailInviteClicked(),await Re({recipient:ae.email,uid:ce.uid,dashboardUid:it.uid}).unwrap(),Te({email:"",shareType:U.Jd.EMAIL})};return a.createElement("form",{onSubmit:ut(tt)},a.createElement(N.C,{disabled:!Oe,"data-testid":H.Container,className:ke.container},a.createElement(c.g,{label:"Can view dashboard",className:ke.field},a.createElement(k.g,{name:"shareType",control:Ne,render:({field:ae})=>{const{ref:J,...te}=ae;return a.createElement(z.S,{...te,size:Le<480?"sm":"md",options:Z,onChange:de=>{y.a.publicDashboardShareTypeChange({shareType:de===U.Jd.EMAIL?"email":"public"}),Ye("shareType",de),Ve(de)}})}})),je("shareType")===U.Jd.EMAIL&&a.createElement(a.Fragment,null,a.createElement(c.g,{label:"Invite",description:"Invite people by email",error:Fe.email?.message,invalid:!!Fe.email?.message||void 0,className:ke.field},a.createElement("div",{className:ke.emailContainer},a.createElement(l.I,{className:ke.emailInput,placeholder:"email",autoCapitalize:"none",...$e("email",{required:"Email is required",pattern:{value:U.C2,message:"Invalid email"}}),"data-testid":H.EmailSharingInput}),a.createElement(E.zx,{type:"submit",variant:"primary",disabled:Ae,"data-testid":H.EmailSharingInviteButton},"Invite ",Ae&&a.createElement(W.$,null)))),!!ce?.recipients?.length&&a.createElement(X,{recipients:ce.recipients,dashboardUid:it.uid,publicDashboardUid:ce.uid}))))},ne=Le=>({container:(0,n.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Le.spacing(3)};
  `,field:(0,n.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,n.css)`
    label: emailContainer;
    display: flex;
    gap: ${Le.spacing(1)};
  `,emailInput:(0,n.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,n.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${Le.spacing(.5,1)};

      :nth-child(odd) {
        background: ${Le.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,n.css)`
    display: flex;
    justify-content: end;
  `});var se=e(67978),re=e(41354);function ge({headerElement:Le,isContentVisible:ke=!1,onRowToggle:ot,title:it,...ce}){const le=(0,u.wW)(q),Re=Le&&se.renderOrCallToRender(Le,{className:le.summaryWrapper});return a.createElement("div",{className:le.wrapper},a.createElement("div",{className:le.header},a.createElement(re.h,{name:ke?"angle-down":"angle-right",tooltip:ke?"Collapse settings":"Expand settings",className:le.collapseIcon,onClick:ot,"aria-expanded":ke,...ce}),it&&a.createElement("div",{className:le.titleWrapper,onClick:ot},a.createElement("span",{className:le.title},it)),Re))}ge.displayName="SettingsBarHeader";function q(Le){return{wrapper:(0,n.css)({label:"header",padding:Le.spacing(.5,.5),borderRadius:Le.shape.radius.default,background:Le.colors.background.secondary,minHeight:Le.spacing(4),"&:focus":{outline:"none"}}),header:(0,n.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,n.css)({marginLeft:Le.spacing(.5),color:Le.colors.text.disabled}),titleWrapper:(0,n.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${Le.spacing(.5)}`,[Le.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,n.css)({fontWeight:Le.typography.fontWeightBold,marginLeft:Le.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,n.css)({display:"flex",flexWrap:"wrap",[Le.breakpoints.down("sm")]:{flex:"2 2"}})}}function me({children:Le,title:ke,headerElement:ot,...it}){const ce=(0,u.wW)(oe),[le,Re]=(0,a.useState)(!1);function Ae(){Re(Oe=>!Oe)}return a.createElement(a.Fragment,null,a.createElement(ge,{onRowToggle:Ae,isContentVisible:le,title:ke,headerElement:ot,...it}),le&&a.createElement("div",{className:ce.content},Le))}me.displayName="SettingsBar";const oe=Le=>({content:(0,n.css)({marginTop:Le.spacing(1),marginLeft:Le.spacing(4)})});var fe=e(12881);function ve({className:Le,isDataLoading:ke=!1,timeRange:ot,timeSelectionEnabled:it,annotationsEnabled:ce}){const le=(0,u.wW)(pe);return ke?a.createElement("div",{className:(0,n.cx)(le.summaryWrapper,Le)},a.createElement(W.$,{className:le.summary,inline:!0,size:"sm"})):a.createElement("div",{className:(0,n.cx)(le.summaryWrapper,Le)},a.createElement("span",{className:le.summary},"Time range = ",a.createElement(fe.q,{className:le.timeRange,value:ot})),a.createElement("span",{className:le.summary},`Time range picker = ${it?"enabled":"disabled"}`),a.createElement("span",{className:le.summary},`Annotations = ${ce?"show":"hide"}`))}ve.displayName="SettingsSummary";const pe=Le=>({summaryWrapper:(0,n.css)({display:"flex"}),summary:(0,n.css)`
      label: collapsedText;
      margin-left: ${Le.spacing.gridSize*2}px;
      font-size: ${Le.typography.bodySmall.fontSize};
      color: ${Le.colors.text.secondary};
    `,timeRange:(0,n.css)({display:"inline-block"})}),Me=r.wl.pages.ShareDashboardModal.PublicDashboard;function Pe({onRevoke:Le,timeRange:ke,hasTemplateVariables:ot=!1,showSaveChangesAlert:it=!1,unsupportedDatasources:ce=[],publicDashboard:le,dashboard:Re}){const Ae=(0,u.wW)(he),Oe=T(),[$e,{isLoading:Ye}]=(0,h.Mi)(),Ne=C.contextSrv.hasPermission(P.AccessControlAction.DashboardsPublicWrite),je=!Ne||Ye,ut=!!o.config.featureToggles.publicDashboardsEmailSharing&&(0,g.v)("publicDashboardsEmailSharing"),{handleSubmit:Fe,setValue:Te,register:Ve}=(0,i.cI)({defaultValues:{isAnnotationsEnabled:le?.annotationsEnabled,isTimeSelectionEnabled:le?.timeSelectionEnabled,isPaused:!le?.isEnabled}}),tt=async te=>{const{isAnnotationsEnabled:de,isTimeSelectionEnabled:be,isPaused:De}=te;$e({dashboard:Re,payload:{...le,annotationsEnabled:de,timeSelectionEnabled:be,isEnabled:!De}})},ae=async(te,de)=>{Te(te,de),await Fe(be=>tt(be))()};function J(){y.a.publicDashboardUrlCopied()}return a.createElement("div",{className:Ae.configContainer},it&&a.createElement(x,null),!Ne&&a.createElement(I.D,{mode:"edit"}),ot&&a.createElement(S.V,null),ce.length>0&&a.createElement(L.f,{unsupportedDataSources:ce.join(", ")}),ut&&a.createElement(Y,null),a.createElement(c.g,{label:"Dashboard URL",className:Ae.fieldSpace},a.createElement(l.I,{value:(0,U._M)(le.accessToken),readOnly:!0,disabled:!le?.isEnabled,"data-testid":Me.CopyUrlInput,addonAfter:a.createElement(d.m,{"data-testid":Me.CopyUrlButton,variant:"primary",disabled:!le?.isEnabled,getText:()=>(0,U._M)(le.accessToken),onClipboardCopy:J},"Copy")})),a.createElement(c.g,{className:Ae.fieldSpace},a.createElement(v.Ar,null,a.createElement(f.r,{...Ve("isPaused"),disabled:je,onChange:te=>{y.a.publicDashboardPauseSharingClicked({paused:te.currentTarget.checked}),ae("isPaused",te.currentTarget.checked)},"data-testid":Me.PauseSwitch}),a.createElement(m._,{className:(0,n.css)`
              margin-bottom: 0;
            `},"Pause sharing dashboard"))),a.createElement(c.g,{className:Ae.fieldSpace},a.createElement(me,{title:"Settings",headerElement:({className:te})=>a.createElement(ve,{className:te,isDataLoading:Ye,timeRange:ke,timeSelectionEnabled:le?.timeSelectionEnabled,annotationsEnabled:le?.annotationsEnabled}),"data-testid":Me.SettingsDropdown},a.createElement(_,{disabled:je,onChange:ae,register:Ve,timeRange:ke}))),a.createElement(v.Ar,{orientation:Oe?0:1,justify:Oe?"flex-end":"flex-start",align:Oe?"center":"normal"},a.createElement(v.Lh,{justify:"flex-end"},a.createElement(E.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:Le,type:"button",disabled:je,"data-testid":Me.DeleteButton,variant:"destructive",fill:"outline"},"Revoke public URL"))))}function Ee({publicDashboard:Le,unsupportedDatasources:ke}){const it=(0,P.useSelector)($e=>$e.dashboard).getModel(),ce=(0,s.O)(it.getDefaultTime(),it),le=C.contextSrv.hasPermission(P.AccessControlAction.DashboardsPublicWrite),Re=(0,U._H)(it.getVariables()),[Ae]=(0,h.bS)(),Oe=$e=>{Ae({dashboard:it,uid:Le.uid,dashboardUid:it.uid}),$e()};return a.createElement(p.JY,null,({showModal:$e,hideModal:Ye})=>a.createElement(Pe,{publicDashboard:Le,dashboard:it,unsupportedDatasources:ke,timeRange:ce,showSaveChangesAlert:le&&it.hasUnsavedChanges(),hasTemplateVariables:Re,onRevoke:()=>{y.a.revokePublicDashboardClicked(),$e(D.N,{dashboardTitle:it.title,onConfirm:()=>Oe(Ye),onDismiss:()=>{$e(O.V8,{dashboard:it,onDismiss:Ye,activeTab:R.Ax.publicDashboard})}})}}))}const he=Le=>({configContainer:(0,n.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Le.spacing(3)};
  `,fieldSpace:(0,n.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,n.css)({display:"inline-block"})})},25680:(Q,A,e)=>{"use strict";e.d(A,{D:()=>I,R:()=>R});var n=e(76932),a=e(31733),i=e(21568),r=e(76067),o=e(17618),g=e(51343),u=e(89719),c=e(86561),l=e(92762),d=e(56811),f=e(42342),m=e(74381),v=e(86242),E=e(29880),p=e(35344),h=e(8641),s=e(97216),y=e(79106),D=e(36356);const C=i.wl.pages.ShareDashboardModal.PublicDashboard,P=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:C.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:C.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time it is viewed, which may increase costs*",testId:C.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],b=({disabled:x,register:L})=>{const S=(0,r.wW)(T);return a.createElement(a.Fragment,null,a.createElement("p",{className:S.title},"Before you make the dashboard public, acknowledge the following:"),a.createElement(s.C,{disabled:x},a.createElement(y.wc,{spacing:"md"},P.map(U=>a.createElement(y.Lh,{key:U.type,spacing:"none",align:"center"},a.createElement(D.X,{...L(U.type,{required:!0}),label:U.description,"data-testid":U.testId}),a.createElement(g.Qj,{variant:"primary",href:U.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:U.info.tooltip}))))))},T=x=>({title:(0,n.css)`
    font-weight: ${x.typography.fontWeightBold};
  `}),O=i.wl.pages.ShareDashboardModal.PublicDashboard,R=({unsupportedDatasources:x=[],unsupportedTemplateVariables:L=!1,dashboard:S,hasError:U=!1})=>{const N=(0,r.wW)(M),w=d.contextSrv.hasPermission(f.AccessControlAction.DashboardsPublicWrite),[G,{isLoading:_,isError:K}]=(0,c.zZ)(),k=()=>{G({dashboard:S,payload:{isEnabled:!0}}),l.a.generatePublicDashboardUrlClicked({})},z=!w||_||K||U;return a.createElement("div",{className:N.container},a.createElement("div",null,a.createElement("p",{className:N.title},"Welcome to public dashboards!"),a.createElement("p",{className:N.description},"Currently, we don\u2019t support template variables or frontend data sources")),!w&&a.createElement(m.D,{mode:"create"}),L&&a.createElement(E.V,null),x.length>0&&a.createElement(v.f,{unsupportedDataSources:x.join(", ")}),a.createElement(o.l,{onSubmit:k,validateOn:"onChange",maxWidth:"none"},({register:W,formState:{isValid:Z}})=>a.createElement(a.Fragment,null,a.createElement("div",{className:N.checkboxes},a.createElement(b,{disabled:z,register:W})),a.createElement("div",{className:N.buttonContainer},a.createElement(g.zx,{type:"submit",disabled:z||!Z,"data-testid":O.CreateButton},"Generate public URL ",_&&a.createElement(u.$,{className:N.loadingSpinner}))))))};function I({hasError:x}){const S=(0,f.useSelector)(w=>w.dashboard).getModel(),{unsupportedDataSources:U}=(0,h.g)(S),N=(0,p._H)(S.getVariables());return a.createElement(R,{dashboard:S,unsupportedDatasources:U,unsupportedTemplateVariables:N,hasError:x})}const M=x=>({container:(0,n.css)`
    display: flex;
    flex-direction: column;
    gap: ${x.spacing(4)};
  `,title:(0,n.css)`
    font-size: ${x.typography.h4.fontSize};
    margin: ${x.spacing(0,0,2)};
  `,description:(0,n.css)`
    color: ${x.colors.text.secondary};
    margin-bottom: ${x.spacing(0)};
  `,checkboxes:(0,n.css)`
    margin: ${x.spacing(0,0,4)};
  `,buttonContainer:(0,n.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,n.css)`
    margin-left: ${x.spacing(1)};
  `})},74381:(Q,A,e)=>{"use strict";e.d(A,{D:()=>o});var n=e(31733),a=e(21568),i=e(25111);const r=a.wl.pages.ShareDashboardModal.PublicDashboard,o=({mode:g})=>n.createElement(i.b,{severity:"info",title:`You don\u2019t have permission to ${g} a public dashboard`,"data-testid":r.NoUpsertPermissionsWarningAlert,bottomSpacing:0},"Contact your admin to get permission to ",g," public dashboards")},86242:(Q,A,e)=>{"use strict";e.d(A,{f:()=>l});var n=e(76932),a=e(52083),i=e.n(a),r=e(31733),o=e(21568),g=e(76067),u=e(25111);const c=o.wl.pages.ShareDashboardModal.PublicDashboard,l=({unsupportedDataSources:f})=>{const m=(0,g.wW)(d);return r.createElement(u.b,{severity:"warning",title:"Unsupported data sources","data-testid":c.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},r.createElement("p",{className:m.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",f,"."),r.createElement("a",{href:"https://grafana.com/docs/grafana/next/dashboards/dashboard-public/",className:i()("text-link",m.unsupportedDataSourceDescription)},"Read more about supported data sources"))},d=f=>({unsupportedDataSourceDescription:(0,n.css)`
    color: ${f.colors.text.secondary};
    margin-bottom: ${f.spacing(1)};
  `})},29880:(Q,A,e)=>{"use strict";e.d(A,{V:()=>o});var n=e(31733),a=e(21568),i=e(25111);const r=a.wl.pages.ShareDashboardModal.PublicDashboard,o=()=>n.createElement(i.b,{severity:"warning",title:"Template variables are not supported","data-testid":r.TemplateVariablesWarningAlert,bottomSpacing:0},"This public dashboard may not work since it uses template variables")},80918:(Q,A,e)=>{"use strict";e.d(A,{E:()=>v,a:()=>m});var n=e(76932),a=e(31733),i=e(76067),r=e(89719),o=e(86561),g=e(35344),u=e(42342),c=e(81797),l=e(23973),d=e(25680),f=e(8641);const m=()=>{const p=(0,i.wW)(E);return a.createElement(c.L,{className:p.loadingContainer},a.createElement(a.Fragment,null,"Loading configuration",a.createElement(r.$,{size:"lg",className:p.spinner})))},v=p=>{const{data:h,isLoading:s,isError:y}=(0,o.Ym)(p.dashboard.uid),C=(0,u.useSelector)(b=>b.dashboard).getModel(),{unsupportedDataSources:P}=(0,f.g)(C);return a.createElement(a.Fragment,null,s?a.createElement(m,null):(0,g.Gt)(h)?a.createElement(l.w,{publicDashboard:h,unsupportedDatasources:P}):a.createElement(d.D,{hasError:y}))},E=p=>({loadingContainer:(0,n.css)({height:"280px",alignItems:"center",justifyContent:"center",gap:p.spacing(1)}),spinner:(0,n.css)({marginBottom:p.spacing(0)})})},35344:(Q,A,e)=>{"use strict";e.d(A,{C2:()=>v,Ez:()=>m,Gt:()=>l,Jd:()=>u,_H:()=>c,_M:()=>f,ek:()=>d,k3:()=>E});var n=e(65821),a=e(85498),i=e(83811),r=e(97001),o=e(66699),g=e(12169),u=(p=>(p.PUBLIC="public",p.EMAIL="email",p))(u||{});const c=p=>p.length>0,l=p=>p?.uid!==""&&p?.uid!==void 0,d=async p=>{let h=new Set;for(const s of p)for(const y of s.targets){const D=y?.datasource?.type;D&&(g.W.has(D)&&await(0,r.ak)().get(y.datasource)instanceof n.CK||h.add(D))}return Array.from(h).sort()},f=p=>`${(0,i.iE)().appUrl}public-dashboards/${p}`,m=(p,h)=>`/d/${p}/${h}?shareView=${o.Ax.publicDashboard}`,v=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,E=()=>!!a.config.featureToggles.publicDashboards&&a.config.publicDashboardsEnabled},12169:(Q,A,e)=>{"use strict";e.d(A,{W:()=>n});const n=new Set(["__expr__","aggregations-io-datasource","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","axiomhq-axiom-datasource","cloudwatch","cnos-cnosdb-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-sumologic-datasource","grafana-testdata-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdata-flightsql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","manassehzhou-maxcompute-datasource","marcusolsson-csv-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","opentsdb","postgres","prometheus","quickwit-quickwit-datasource","redis-datasource","sentinelone-dataset-datasource","sneller-sneller-datasource","spiceai-spicexyz-datasource","stackdriver","tdengine-datasource","trino-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"])},8641:(Q,A,e)=>{"use strict";e.d(A,{g:()=>i});var n=e(31733),a=e(35344);const i=r=>{const[o,g]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>await(0,a.ek)(r.panels))().then(c=>{g(c)})},[r.panels]),{unsupportedDataSources:o}}},42637:(Q,A,e)=>{"use strict";e.d(A,{J:()=>o});var n=e(31733),a=e(85765),i=e(96856),r=e(53166);const o=({selectedTheme:g="current",onChange:u})=>{const c=[{label:(0,r.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,r.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,r.t)("share-modal.theme-picker.light","Light"),value:"light"}];return n.createElement(a.g,{label:(0,r.t)("share-modal.theme-picker.field-name","Theme")},n.createElement(i.S,{options:c,value:g,onChange:u}))}},64878:(Q,A,e)=>{"use strict";e.d(A,{ShareModal:()=>n.V8});var n=e(97619)},66699:(Q,A,e)=>{"use strict";e.d(A,{Ax:()=>p,OS:()=>l,S_:()=>v,Sc:()=>m,U8:()=>c,bl:()=>d});var n=e(17201),a=e(91977),i=e(84912),r=e(74011),o=e(85498),g=e(42646),u=e(89660);function c({useCurrentTimeRange:h,selectedTheme:s,panel:y,search:D=window.location.search,range:C=(0,u.$t)().timeRange(),orgId:P=o.config.bootData.user.orgId}){const b=new URLSearchParams(D),T=y?.timeFrom;if(T){const{from:O,to:R}=n.describeTextRange(T);b.set("from",O),b.set("to",R)}else b.set("from",String(C.from.valueOf())),b.set("to",String(C.to.valueOf()));return b.set("orgId",String(P)),h||(b.delete("from"),b.delete("to")),s!=="current"&&b.set("theme",s),y&&!b.has("editPanel")&&b.set("viewPanel",String(y.id)),b.delete("auth_token"),b}function l(){let h=window.location.href;const s=h.indexOf("?");return s!==-1&&(h=h.substring(0,s)),h}async function d(h,s,y,D){const C=l(),P=c({useCurrentTimeRange:h,selectedTheme:s,panel:y}),b=a.Cj.appendQueryToUrl(C,P.toString());return D?await(0,g.D)(b):b}function f(h,s,y,D,C){const P=l(),b=c({useCurrentTimeRange:h,selectedTheme:y,panel:D,range:C});let T=P.replace(o.config.appSubUrl+"/dashboard/",o.config.appSubUrl+"/dashboard-solo/");T=T.replace(o.config.appSubUrl+"/d/",o.config.appSubUrl+"/d-solo/"),i.u.stripBaseFromUrl(P)==="/"&&(T=`${o.config.appUrl}d-solo/${s}`);const R=b.get("editPanel")??b.get("viewPanel")??"";return b.set("panelId",R),b.delete("editPanel"),b.delete("viewPanel"),a.Cj.appendQueryToUrl(T,b.toString())}function m(h,s,y,D){let P=f(h,s,y,D).replace(o.config.appSubUrl+"/dashboard-solo/",o.config.appSubUrl+"/render/dashboard-solo/");return P=P.replace(o.config.appSubUrl+"/d-solo/",o.config.appSubUrl+"/render/d-solo/"),P+="&width=1000&height=500"+E(),P}function v(h,s,y,D,C){return`<iframe src="${f(h,s,y,D,C)}" width="450" height="200" frameborder="0"></iframe>`}function E(){const h="&tz=UTC"+encodeURIComponent((0,r.CQ)().format("Z"));if(!window.Intl)return h;const s=window.Intl.DateTimeFormat();if(!s.resolvedOptions)return h;const y=s.resolvedOptions();return y.timeZone?"&tz="+encodeURIComponent(y.timeZone):h}const p={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard"}},97919:(Q,A,e)=>{"use strict";e.d(A,{MM:()=>C,Ul:()=>p});var n=e(76932),a=e(31733),i=e(59326),r=e(77901),o=e(21568),g=e(76067),u=e(63424),c=e(37758),l=e(67669),d=e(49311),f=e(51343),m=e(41327),v=e(95639);function E({dashboardUID:P,link:b}){const T=(0,g.wW)(D),O=h({dashboardUID:P,link:b});return!O||y.length===0?null:a.createElement(u.v,null,a.createElement("div",{className:T.dropdown},a.createElement(c.$,null,O.map((R,I)=>a.createElement(u.v.Item,{url:R.url,target:b.targetBlank?"_blank":void 0,key:`dashlinks-dropdown-item-${R.uid}-${I}`,label:R.title,testId:o.wl.components.DashboardLinks.link,"aria-label":`${R.title} dashboard`})))))}const p=P=>{const{link:b,linkInfo:T,dashboardUID:O}=P,R=h(P),I=(0,g.wW)(D);return b.asDropdown?a.createElement(l.L,{overlay:a.createElement(E,{link:b,dashboardUID:O})},a.createElement(C,{"data-placement":"bottom","data-toggle":"dropdown","aria-controls":"dropdown-list","aria-haspopup":"menu",fill:"outline",variant:"secondary","data-testid":o.wl.components.DashboardLinks.dropDown},a.createElement(d.J,{"aria-hidden":!0,name:"bars",className:I.iconMargin}),a.createElement("span",null,T.title))):a.createElement(a.Fragment,null,R.length>0&&R.map((M,x)=>a.createElement(C,{key:`dashlinks-list-item-${M.uid}-${x}`,icon:"apps",variant:"secondary",fill:"outline",href:M.url,target:b.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":o.wl.components.DashboardLinks.link},M.title)))},h=({link:P,dashboardUID:b})=>{const{tags:T}=P,O=(0,i.Z)(()=>s(T),[T]);return O.value?y(b,P,O.value):[]};async function s(P,b={getBackendSrv:m.i}){return await b.getBackendSrv().search({tag:P,limit:100})}function y(P,b,T,O={getLinkSrv:v.Bq,sanitize:r.Nw,sanitizeUrl:r.Nm}){return T.filter(R=>R.uid!==P).map(R=>{const I=R.uid,M=O.sanitize(R.title),x=O.getLinkSrv().getLinkUrl({...b,url:R.url}),L=O.sanitizeUrl(x);return{uid:I,title:M,url:L}})}function D(P){return{iconMargin:(0,n.css)({marginRight:P.spacing(.5)}),dropdown:(0,n.css)({maxWidth:"max(30vw, 300px)",maxHeight:"70vh",overflowY:"auto"}),button:(0,n.css)({color:P.colors.text.primary}),dashButton:(0,n.css)({fontSize:P.typography.bodySmall.fontSize,paddingLeft:P.spacing(1),paddingRight:P.spacing(1)})}}const C=a.forwardRef(({className:P,...b},T)=>{const O=(0,g.wW)(D),R=b.href?f.Qj:f.zx;return a.createElement(R,{...b,variant:"secondary",fill:"outline",className:(0,n.cx)(P,O.dashButton),ref:T})});C.displayName="DashboardLinkButton"},68506:(Q,A,e)=>{"use strict";e.d(A,{B:()=>m});var n=e(76932),a=e(69781),i=e(31733),r=e(76067),o=e(49311);const g=({diff:E})=>{const p=(0,r.wW)(u),h=!(0,a.isUndefined)(E.originalValue)&&!(0,a.isArray)(E.originalValue)&&!(0,a.isObject)(E.originalValue),s=!(0,a.isUndefined)(E.value)&&!(0,a.isArray)(E.value)&&!(0,a.isObject)(E.value);return i.createElement(i.Fragment,null,h&&i.createElement("span",{className:p},String(E.originalValue)),h&&s?i.createElement(o.J,{name:"arrow-right"}):null,s&&i.createElement("span",{className:p},String(E.value)))},u=E=>(0,n.css)`
  background-color: ${E.colors.action.hover};
  border-radius: ${E.shape.radius.default};
  color: ${E.colors.text.primary};
  font-size: ${E.typography.body.fontSize};
  margin: 0 ${E.spacing(.5)};
  padding: ${E.spacing(.5,1)};
`;var c=e(45654);const l={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},d=({diff:E,title:p})=>{const h=(0,r.wW)(f);return E?i.createElement(i.Fragment,null,i.createElement(o.J,{type:"mono",name:"circle",className:h[E.op]})," ",i.createElement("span",{className:h.embolden},p)," ",i.createElement("span",null,(0,c.dW)(E,E.path.length>1))," ",i.createElement(g,{diff:E})):i.createElement("div",{className:h.withoutDiff},i.createElement(o.J,{type:"mono",name:"circle",className:h.replace})," ",i.createElement("span",{className:h.embolden},p)," ",i.createElement("span",null,(0,c.dW)(l,!1)))},f=E=>({embolden:(0,n.css)`
    font-weight: ${E.typography.fontWeightBold};
  `,add:(0,n.css)`
    color: ${E.colors.success.main};
  `,replace:(0,n.css)`
    color: ${E.colors.success.main};
  `,move:(0,n.css)`
    color: ${E.colors.success.main};
  `,copy:(0,n.css)`
    color: ${E.colors.success.main};
  `,_get:(0,n.css)`
    color: ${E.colors.success.main};
  `,test:(0,n.css)`
    color: ${E.colors.success.main};
  `,remove:(0,n.css)`
    color: ${E.colors.success.main};
  `,withoutDiff:(0,n.css)`
    margin-bottom: ${E.spacing(2)};
  `}),m=({diffs:E,title:p})=>{const h=(0,r.wW)(v);return E.length===1?i.createElement("div",{className:h.container,"data-testid":"diffGroup"},i.createElement(d,{title:p,diff:E[0]})):i.createElement("div",{className:h.container,"data-testid":"diffGroup"},i.createElement(d,{title:p}),i.createElement("ul",{className:h.list},E.map((s,y)=>i.createElement("li",{className:h.listItem,key:`${(0,a.last)(s.path)}__${y}`},i.createElement("span",null,(0,c.dW)(s))," ",i.createElement(g,{diff:s})))))},v=E=>({container:(0,n.css)`
    background-color: ${E.colors.background.secondary};
    font-size: ${E.typography.h6.fontSize};
    margin-bottom: ${E.spacing(2)};
    padding: ${E.spacing(2)};
  `,list:(0,n.css)`
    margin-left: ${E.spacing(4)};
  `,listItem:(0,n.css)`
    margin-bottom: ${E.spacing(1)};
  `})},4002:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>u});var n=e(76932),a=e(31733),i=e(45627),r=e.n(i),o=e(37479),g=e(76067);const u=({oldValue:c,newValue:l})=>{const d=(0,g.l4)(),f={variables:{dark:{diffViewerBackground:d.colors.background.canvas,diffViewerColor:d.colors.text.primary,addedBackground:(0,o.Z)(d.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,o.Z)(d.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,o.Z)(d.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,o.Z)(d.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,o.Z)(d.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,o.Z)(d.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:d.colors.background.primary,gutterBackgroundDark:d.colors.background.primary,highlightBackground:(0,o.Z)(d.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,o.Z)(d.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:d.colors.background.secondary,codeFoldBackground:d.colors.background.secondary,emptyLineBackground:d.colors.background.secondary,gutterColor:d.colors.text.disabled,addedGutterColor:d.colors.text.primary,removedGutterColor:d.colors.text.primary,codeFoldContentColor:d.colors.text.disabled,diffViewerTitleBackground:d.colors.background.secondary,diffViewerTitleColor:d.colors.text.disabled,diffViewerTitleBorderColor:d.colors.border.strong}},codeFold:{fontSize:d.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,o.Z)(d.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return a.createElement("div",{className:(0,n.css)`
        font-size: ${d.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},a.createElement(r(),{styles:f,oldValue:c,newValue:l,splitView:!1,compareMethod:i.DiffMethod.CSS,useDarkTheme:d.isDark}))}},59444:(Q,A,e)=>{"use strict";e.d(A,{U$:()=>_,Cs:()=>R,Sd:()=>P,R1:()=>L,K8:()=>r});var n=e(69781),a=e(69391);class i{getHistoryList(z,W){const Z=z&&z.uid?z.uid:void 0;return Z?(0,a.i)().get(`api/dashboards/uid/${Z}/versions`,W):Promise.resolve([])}getDashboardVersion(z,W){return(0,a.i)().get(`api/dashboards/uid/${z}/versions/${W}`)}restoreDashboard(z,W){const Z=z&&z.uid?z.uid:void 0,H=`api/dashboards/uid/${Z}/restore`;return Z&&(0,n.isNumber)(W)?(0,a.i)().post(H,{version:W}):Promise.resolve({})}}const r=new i;var o=e(76932),g=e(31733),u=e(36356),c=e(14496),l=e(58947),d=e(51343),f=e(90069),m=e(41710),v=e(84912),E=e(19690),p=e(42876),h=e(42342),s=e(48510);const y=async(k,z)=>(s.H.ignoreNextSave(),await r.restoreDashboard(z,k)),D=k=>{const z=(0,h.useSelector)(X=>X.dashboard.getModel()),[W,Z]=(0,m.Z)(async()=>await y(k,z),[]),H=(0,p.iG)();return(0,g.useEffect)(()=>{if(W.value){const X=E.E1.getLocation(),Y=v.u.stripBaseFromUrl(W.value.url),ne=X.state?.routeReloadCounter;E.E1.replace({...X,pathname:Y,state:{routeReloadCounter:ne?ne+1:1}}),H.success("Dashboard restored",`Restored from version ${k}`)}},[W,k,H]),{state:W,onRestoreDashboard:Z}},C=({hideModal:k,version:z})=>{const{state:W,onRestoreDashboard:Z}=D(z);return(0,g.useEffect)(()=>{!W.loading&&W.value&&k()},[W,k]),g.createElement(f.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:k,onConfirm:Z,body:g.createElement("p",null,"Are you sure you want to restore the dashboard to version ",z,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${z}`})},P=({versions:k,canCompare:z,onCheck:W})=>g.createElement("table",{className:"filter-table gf-form-group"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",{className:"width-4"}),g.createElement("th",{className:"width-4"},"Version"),g.createElement("th",{className:"width-14"},"Date"),g.createElement("th",{className:"width-10"},"Updated by"),g.createElement("th",null,"Notes"),g.createElement("th",null))),g.createElement("tbody",null,k.map((Z,H)=>g.createElement("tr",{key:Z.id},g.createElement("td",null,g.createElement(u.X,{"aria-label":`Toggle selection of version ${Z.version}`,className:(0,o.css)`
                display: inline;
              `,checked:Z.checked,onChange:X=>W(X,Z.id),disabled:!Z.checked&&z})),g.createElement("td",null,Z.version),g.createElement("td",null,Z.createdDateString),g.createElement("td",null,Z.createdBy),g.createElement("td",null,Z.message),g.createElement("td",{className:"text-right"},H===0?g.createElement(c.V,{name:"Latest",colorIndex:17}):g.createElement(l.JY,null,({showModal:X,hideModal:Y})=>g.createElement(d.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{X(C,{version:Z.version,hideModal:Y})}},"Restore")))))));var b=e(76067),T=e(41354),O=e(49311);const R=({onClick:k=n.noop,baseVersion:z=0,newVersion:W=0,isNewLatest:Z=!1})=>{const H=(0,b.wW)(I);return g.createElement("h3",{className:H.header},g.createElement(T.h,{name:"arrow-left",size:"xl",onClick:k,tooltip:"Reset version"}),g.createElement("span",null,"Comparing ",z," ",g.createElement(O.J,{name:"arrows-h"})," ",W," ",Z&&g.createElement("cite",{className:"muted"},"(Latest)")))},I=k=>({header:(0,o.css)`
    font-size: ${k.typography.h3.fontSize};
    display: flex;
    gap: ${k.spacing(2)};
    margin-bottom: ${k.spacing(3)};
  `});var M=e(37739),x=e(58037);const L=({hasMore:k,canCompare:z,getVersions:W,getDiff:Z,isLastPage:H})=>g.createElement(M.K,null,k&&g.createElement(d.zx,{type:"button",onClick:()=>W(!0),variant:"secondary",disabled:H},"Show more versions"),g.createElement(x.u,{content:"Select two versions to start comparing",placement:"bottom"},g.createElement(d.zx,{type:"button",disabled:!z,onClick:Z,icon:"code-branch"},"Compare versions")));var S=e(79106),U=e(5284),N=e(68506),w=e(4002),G=e(45654);const _=({baseInfo:k,newInfo:z,diffData:W,isNewLatest:Z})=>{const H=(0,G.Q$)(W.lhs,W.rhs),X=(0,b.wW)(K);return g.createElement("div",null,g.createElement("div",{className:X.spacer},g.createElement(S.Lh,{justify:"space-between",align:"center"},g.createElement("div",null,g.createElement("p",{className:X.versionInfo},g.createElement("strong",null,"Version ",z.version)," updated by ",z.createdBy," ",z.ageString," -"," ",z.message),g.createElement("p",{className:(0,o.cx)(X.versionInfo,X.noMarginBottom)},g.createElement("strong",null,"Version ",k.version)," updated by ",k.createdBy," ",k.ageString," -"," ",k.message)),Z&&g.createElement(l.JY,null,({showModal:Y,hideModal:ne})=>g.createElement(d.zx,{variant:"destructive",icon:"history",onClick:()=>{Y(C,{version:k.version,hideModal:ne})}},"Restore to version ",k.version)))),g.createElement("div",{className:X.spacer},Object.entries(H).map(([Y,ne])=>g.createElement(N.B,{diffs:ne,key:Y,title:Y}))),g.createElement(U.s,{isOpen:!1,label:"View JSON Diff"},g.createElement(w.Z,{oldValue:JSON.stringify(W.lhs,null,2),newValue:JSON.stringify(W.rhs,null,2)})))},K=k=>({spacer:(0,o.css)`
    margin-bottom: ${k.spacing(4)};
  `,versionInfo:(0,o.css)`
    color: ${k.colors.text.secondary};
    font-size: ${k.typography.bodySmall.fontSize};
  `,noMarginBottom:(0,o.css)`
    margin-bottom: 0;
  `})},45654:(Q,A,e)=>{"use strict";e.d(A,{Q$:()=>o,dW:()=>g});var n=e(98457),a=e(9635),i=e(69781),r=e.n(i);const o=(l,d)=>{const f=(0,n.qu)(l,d),m=a.stringify(l,null,2),v=a.stringify(d,null,2),E=s=>s.map(y=>{let D,C,P=0;const b=(0,i.tail)(y.path.split("/"));return y.op==="replace"&&v.pointers[y.path]&&(D=(0,i.get)(l,b),C=y.value,P=v.pointers[y.path].value.line),y.op==="add"&&v.pointers[y.path]&&(C=y.value,P=v.pointers[y.path].value.line),y.op==="remove"&&m.pointers[y.path]&&(D=(0,i.get)(l,b),P=m.pointers[y.path].value.line),{op:y.op,value:C,path:b,originalValue:D,startLineNumber:P}}),p=s=>(0,i.sortBy)(s,"startLineNumber"),h=s=>s.reduce((y,D)=>{const C=D.path[0];return y[C]||(y[C]=[]),y[C].push(D),y},{});return(0,i.flow)([E,p,h])(f)},g=(l,d=!0)=>{const f=(0,i.last)(l.path),m=u(f),v=l.op==="remove"?l.originalValue:l.value;let E=c(l.op);return d&&(m?E+=` item ${f}`:(0,i.isArray)(v)&&!(0,i.isEmpty)(v)?E+=` ${v.length} ${f}`:E+=` ${f}`),E},u=l=>!(0,i.isNaN)((0,i.toNumber)(l)),c=l=>l==="add"?"added":l==="remove"?"deleted":"changed"},31365:(Q,A,e)=>{"use strict";e.d(A,{f:()=>f});var n=e(31733),a=e(19690),i=e(76932),r=e(76067),o=e(73351),g=e(49311),u=e(58037),c=e(83998);const l=({notice:m,onClick:v})=>{const E=(0,r.wW)(d),p=m.severity==="error"||m.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return m.inspect&&v?n.createElement(o.h,{className:E.notice,icon:p,iconSize:"md",key:m.severity,tooltip:m.text,onClick:h=>v(h,m.inspect)}):m.link?n.createElement("a",{className:E.notice,"aria-label":m.text,href:m.link,target:"_blank",rel:"noreferrer"},n.createElement(g.J,{name:p,style:{marginRight:"8px"},size:"md"})):n.createElement(u.u,{key:m.severity,content:m.text},n.createElement("span",{className:E.iconTooltip},n.createElement(g.J,{name:p,size:"md"})))},d=m=>({notice:(0,i.css)({background:"inherit",border:"none",borderRadius:m.shape.radius.default}),iconTooltip:(0,i.css)({color:`${m.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${m.shape.radius.default}`,padding:`${m.spacing(0,1)}`,height:` ${m.spacing(m.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,c.getFocusStyles)(m),zIndex:1},"&: focus:not(:focus-visible)":(0,c.getMouseFocusStyles)(m),"&:hover ":{boxShadow:`${m.shadows.z1}`,color:`${m.colors.text.primary}`,background:`${m.colors.background.secondary}`}})}),f=({frames:m,panelId:v})=>{const E=(0,n.useCallback)((h,s)=>{h.stopPropagation(),a.E1.partial({inspect:v,inspectTab:s})},[v]),p={};for(const h of m)if(!(!h.meta||!h.meta.notices))for(const s of h.meta.notices)p[s.severity]=s;return n.createElement(n.Fragment,null,Object.values(p).map(h=>n.createElement(l,{notice:h,onClick:E,key:h.severity})))}},73293:(Q,A,e)=>{"use strict";e.d(A,{A:()=>c});var n=e(11356),a=e(74011),i=e(89026);const r=100;class o{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new n.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const d=Date.now();this.budget=(d-this.lastUpdate)/r;const f=this.ok.getValue(),m=this.budget<=this.threshold;if(f!==m&&this.ok.next(m),this.lastUpdate=d,this.isLive&&this.ok.getValue()&&this.timeRange){let v;for(const E of this.listeners){if(!E.panel.props.isInView)continue;if(d-E.last>=E.intervalMs){if(!v){const{raw:h}=this.timeRange;v={raw:h,from:(0,a.CQ)(d-this.liveTimeOffset),to:(0,a.CQ)(d)}}E.panel.liveTimeChanged(v),E.last=d}}}}}setLiveTimeRange(d){if(this.timeRange=d,this.isLive=d?.raw?.to==="now",this.isLive){const f=i.parse(d.raw.from,!1)?.valueOf(),m=i.parse(d.raw.to,!0)?.valueOf();this.liveTimeOffset=m-f;for(const v of this.listeners)v.intervalMs=u(this.liveTimeOffset,v.panel.props.width)}}listen(d){this.listeners.push({last:this.lastUpdate,panel:d,intervalMs:u(6e4,d.props.width)})}remove(d){this.listeners=this.listeners.filter(f=>f.panel!==d)}updateInterval(d){if(!(!this.timeRange||!this.isLive)){for(const f of this.listeners)if(f.panel===d){f.intervalMs=u(this.liveTimeOffset,f.panel.props.width);return}}}}const g=5*60*1e3;function u(l,d){const f=Math.ceil(l/d/100)*100;return f>g?g:f}const c=new o;setInterval(c.measure,r)},34750:(Q,A,e)=>{"use strict";e.d(A,{Bg:()=>D,pD:()=>C});var n=e(341),a=e.n(n),i=e(69781),r=e.n(i),o=e(25086),g=e.n(o),u=e(56821),c=e(89026),l=e(69391),d=e(19690),f=e(41327),m=e(69514),v=e(51088),E=e(18128),p=e(97001),h=e(75923),s=e(60490),y=e(38457);class D{constructor(){}_dashboardLoadFailed(T,O){return O=O||!1,{meta:{canStar:!1,isSnapshot:O,canDelete:!1,canSave:!1,canEdit:!1,canShare:!1,dashboardNotFound:!0},dashboard:{title:T,uid:T,schemaVersion:0}}}loadDashboard(T,O,R){const I=(0,E.wc)();let M;if(T==="script"&&O)M=this._loadScriptedDashboard(O);else if(T==="snapshot"&&O)M=(0,y.G)().getSnapshot(O).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0));else if(T==="ds"&&O)M=this._loadFromDatasource(O);else if(T==="public"&&R)M=f.ae.getPublicDashboardByUid(R).then(x=>x).catch(x=>{const L=x.data.statusCode===403&&x.data.messageId==="publicdashboards.notEnabled",S=x.data.statusCode===404&&x.data.messageId==="publicdashboards.notFound",U=x.data.statusCode===404&&x.data.messageId==="publicdashboards.dashboardNotFound",N=this._dashboardLoadFailed(L?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...N,meta:{...N.meta,publicDashboardEnabled:S?void 0:!L,dashboardNotFound:S||U}}});else if(R){const x=I.getFromCache(R);if(x)return Promise.resolve(x);M=f.ae.getDashboardByUid(R).then(L=>{if(L.meta.isFolder)throw h.h$.emit(u.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return L}).catch(()=>this._dashboardLoadFailed("Not found",!0))}else throw new Error("Dashboard uid or slug required");return M.then(x=>(x.meta.dashboardNotFound!==!0&&m.Z.addDashboardImpression(x.dashboard.uid),x)),M}_loadScriptedDashboard(T){const O="public/dashboards/"+T.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,l.i)().get(O).then(this._executeScript.bind(this)).then(R=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:R.data}),R=>(console.error("Script dashboard error "+R),h.h$.emit(u.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(T){const O=await(0,p.ak)().get(T);if(!O)return Promise.reject("can not find datasource: "+T);const R=new URLSearchParams(window.location.search),I=R.get("path");if(!I)return Promise.reject("expecting path parameter");const M={};return R.forEach((x,L)=>{M[L]=x}),(0,l.i)().get(`/api/datasources/uid/${O.uid}/resources/${I}`,M).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x}))}_executeScript(T){const O={dashboardSrv:(0,s.h4)(),datasourceSrv:(0,p.ak)()},I=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",T)(d.E1.getSearchObject(),v.Z,c,r(),g(),window,document,a(),a(),O);return(0,i.isFunction)(I)?new Promise(M=>{I(x=>{M({data:x})})}):{data:I}}}let C=new D;const P=b=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},60490:(Q,A,e)=>{"use strict";e.d(A,{h4:()=>v});var n=e(71892),a=e(56821),i=e(83599),r=e(53166),o=e(41327),g=e(51450),u=e(74642),c=e(40931),l=e(90172);class d{constructor(){this.onRemovePanel=p=>{const h=this.getCurrent();h&&(0,l.WJ)(h,h.getPanelById(p),!0)},i.h.subscribe(u.Eb,p=>this.onRemovePanel(p.payload))}create(p,h){return new c.f(p,h)}setCurrent(p){this.dashboard=p}getCurrent(){return this.dashboard}saveJSONDashboard(p){const h=JSON.parse(p);return(0,g.uC)({dashboard:h,folderUid:this.dashboard?.meta.folderUid||h.folderUid})}saveDashboard(p,h){return(0,n.n)((0,o.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...p,dashboard:p.dashboard.getSaveModelClone()},...h}))}starDashboard(p,h){const s=(0,o.i)(),y={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+p,method:h?"DELETE":"POST"};return s.request(y).then(()=>{const D=!h;this.dashboard?.uid===p&&(this.dashboard.meta.isStarred=D);const C=D?(0,r.t)("notifications.starred-dashboard","Dashboard starred"):(0,r.t)("notifications.unstarred-dashboard","Dashboard unstarred");return i.h.emit(a.SI.alertSuccess,[C]),D})}}let f;function m(E){f=E}function v(){return f||(f=new d),f}},38457:(Q,A,e)=>{"use strict";e.d(A,{G:()=>i});var n=e(69391);const a={getSnapshots:()=>(0,n.i)().get("/api/dashboard/snapshots"),getSharingOptions:()=>(0,n.i)().get("/api/snapshot/shared-options"),deleteSnapshot:r=>(0,n.i)().delete("/api/snapshots/"+r),getSnapshot:async r=>{const o=await(0,n.i)().get("/api/snapshots/"+r);return o.meta.canShare=!1,o}};function i(){return a}},89660:(Q,A,e)=>{"use strict";e.d(A,{$t:()=>D});var n=e(69781),a=e(74011),i=e(5333),r=e(17201),o=e(89026),g=e(19690),u=e(77121),c=e(83599),l=e(83811),d=e(56811),f=e(76447),m=e(79832),v=e(74642),E=e(20685);function p({urlRefresh:C,currentRefresh:P,isAllowedIntervalFn:b,minRefreshInterval:T,refreshIntervals:O=E.o5}){if(!C)return P;const R=b(C),I=O.find(M=>M===C);if(!R||!I){const M=T?O.find(L=>L===T):void 0,x=O?.length?O[0]:void 0;return M??x??P}return C||P}class h{constructor(P){this.contextSrv=P,this.timeRangeForUrl=()=>{const b=this.timeRange().raw;return(0,a.v9)(b.from)&&(b.from=b.from.valueOf().toString()),(0,a.v9)(b.to)&&(b.to=b.to.valueOf().toString()),b},this.time=(0,i.JK)().raw,this.timeAtLoad=(0,i.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),c.Z.subscribe(v.p8,b=>{this.zoomOut(b.payload.scale,b.payload.updateUrl)}),c.Z.subscribe(v.Qt,b=>{this.shiftTime(b.payload.direction,b.payload.updateUrl)}),c.Z.subscribe(v.QI,b=>{this.makeAbsoluteTime(b.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(P){this.timeModel=P,this.time=P.time,this.refresh=P.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,n.cloneDeep)(this.time),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(P){return this.contextSrv.getValidIntervals(P)}parseTime(){(0,n.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,a.CQ)(this.time.from).utc()),(0,n.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,a.CQ)(this.time.to).utc())}parseUrlParam(P){if(P.indexOf("now")!==-1)return P;if(P.length===8){const b=(0,a.zh)(P,"YYYYMMDD");if(b.isValid())return b}else if(P.length===15){const b=(0,a.zh)(P,"YYYYMMDDTHHmmss");if(b.isValid())return b}if(!isNaN(Number(P))){const b=parseInt(P,10);return(0,a.zh)(b)}return null}getTimeWindow(P,b){const T=parseInt(P,10);let O;return b.match(/^\d+$/)&&parseInt(b,10)?O=parseInt(b,10):O=r.intervalToMs(b),{from:(0,a.zh)(T-O/2),to:(0,a.zh)(T+O/2)}}initTimeFromUrl(){if(l.config.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const P=g.E1.getSearch();P.get("time")&&P.get("time.window")&&(this.time=this.getTimeWindow(P.get("time"),P.get("time.window"))),P.get("from")&&(this.time.from=this.parseUrlParam(P.get("from"))||this.time.from),P.get("to")&&(this.time.to=this.parseUrlParam(P.get("to"))||this.time.to),P.get("to")&&P.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=p({urlRefresh:P.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:l.config.minRefreshInterval})}updateTimeRangeFromUrl(){const P=g.E1.getSearch();if(P.get("left"))return;const b=this.timeRangeForUrl(),T=P.get("from"),O=P.get("to");T&&O?(T!==b.from||O!==b.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(P){this.timeModel&&(this.timeModel.refresh=P),this.stopAutoRefresh();const b=g.E1.getSearchObject();if(!P){b.refresh&&g.E1.partial({refresh:null},!0);return}let T=P,O=60*1e3;P===d.Wg?O=this.getAutoRefreshInteval().intervalMs:(T=this.contextSrv.getValidInterval(P),O=r.intervalToMs(T)),this.refreshMS=O,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(O),this.refreshTimeModel()},O),b.refresh!==T&&g.E1.partial({refresh:T},!0)}getAutoRefreshInteval(){const P=window?.innerWidth??2e3;return r.calculateInterval(this.timeRange(),P,l.config.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(P){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(P),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},P)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(P,b=!0){if((0,n.extend)(this.time,P),(0,a.v9)(P.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),b===!0){const T=this.timeRangeForUrl(),O=g.E1.getSearchObject();if(O.from===T.from.toString()&&O.to===T.to.toString())return;O.from=T.from.toString(),O.to=T.to.toString(),g.E1.partial(O)}this.timeModel?.refresh===d.Wg&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(d.Wg),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?u.ep.getTimeRange(window.__grafanaSceneContext).state.value:(0,m.O)(this.time,this.timeModel)}zoomOut(P,b=!0){const T=this.timeRange(),{from:O,to:R}=(0,f.h)(T,P);this.setTime({from:(0,a.zh)(O),to:(0,a.zh)(R)},b)}shiftTime(P,b=!0){const T=this.timeRange(),{from:O,to:R}=(0,f.e)(P,T);this.setTime({from:(0,a.zh)(O),to:(0,a.zh)(R)},b)}makeAbsoluteTime(P){const{from:b,to:T}=this.timeRange();this.setTime({from:b,to:T},P)}isRefreshOutsideThreshold(P,b=.05){const T=this.timeRange();if(o.isMathString(T.raw.from)){const O=T.to.diff(T.from),R=Date.now()-P,I=O*b;return R>=I}return!1}}let s;function y(C){s=C}function D(){return s||(s=new h(d.contextSrv)),s}},29630:(Q,A,e)=>{"use strict";e.d(A,{o3:()=>_,pR:()=>H});var n=e(69781),a=e(61411),i=e(32147),r=e(44992),o=e(91977),g=e(81548),u=e(6803),c=e(27369),l=e(18198),d=e(85666),f=e(69452),m=e(7994),v=e(66261),E=e(71199),p=e(9596),h=e(12555),s=e(83811),y=e(21279);function D(me){return Array.from(new Array(me+1),(oe,fe)=>fe).filter(oe=>me%oe===0)}var C=e(51088),P=e(97001),b=e(36138),T=e(46497),O=e(24608),R=e(21628),I=e(87990),M=e(65354),x=e(2602);function L(me,oe){const fe=[];if(me?.statistics&&me?.statistics.length){me.statistic=me.statistics[0];for(const ve of me.statistics.splice(1))fe.push({...me,statistic:ve})}for(const ve of fe)ve.refId=(0,M.Hs)(oe),delete ve.statistics,oe.push(ve);return delete me.statistics,fe}function S(me){const oe=[];if(me&&"statistics"in me&&me?.statistics?.length){for(const fe of me.statistics.splice(1)){const{statistics:ve,name:pe,...Me}=me;oe.push({...Me,statistic:fe,name:`${pe} - ${fe}`})}me.statistic=me.statistics[0],oe.length!==0&&(me.name=`${me.name} - ${me.statistic}`),delete me.statistics}return oe}function U(me){me.hasOwnProperty("metricQueryType")||(me.metricQueryType=x.$5.Search),me.hasOwnProperty("metricEditorMode")||(me.metricQueryType===x.$5.Query?me.metricEditorMode=x.MQ.Code:me.metricEditorMode=me.expression?x.MQ.Code:x.MQ.Builder)}var N=e(7257),w=e(30937);a.S.setInit(h.u),a.N.setInit(h.l);const G=39;class _{constructor(oe){this.dashboard=oe,(0,v.F)()||(0,v.w)(new P.ND)}updateSchema(oe){let fe,ve,pe,Me;const Pe=this.dashboard.schemaVersion,Ee=[];if(this.dashboard.schemaVersion=G,Pe!==this.dashboard.schemaVersion){if(Pe<2&&(oe.services&&oe.services.filter&&(this.dashboard.time=oe.services.filter.time,this.dashboard.templating.list=oe.services.filter.list||[]),Ee.push(he=>(he.type==="graphite"&&(he.type="graph"),he.type!=="graph"||((0,n.isBoolean)(he.legend)&&(he.legend={show:he.legend}),he.grid&&(he.grid.min&&(he.grid.leftMin=he.grid.min,delete he.grid.min),he.grid.max&&(he.grid.leftMax=he.grid.max,delete he.grid.max)),he.y_format&&(he.y_formats||(he.y_formats=[]),he.y_formats[0]=he.y_format,delete he.y_format),he.y2_format&&(he.y_formats||(he.y_formats=[]),he.y_formats[1]=he.y2_format,delete he.y2_format)),he))),Pe<3){let he=this.dashboard.getNextPanelId();Ee.push(Le=>(Le.id||(Le.id=he,he+=1),Le))}if(Pe<4&&Ee.push(he=>(he.type!=="graph"||((0,n.each)(he.aliasYAxis,(Le,ke)=>{he.seriesOverrides=[{alias:ke,yaxis:Le}]}),delete he.aliasYAxis),he)),Pe<6){const he=(0,n.find)(oe.pulldowns,{type:"annotations"});for(he&&(this.dashboard.annotations={list:he.annotations||[]}),fe=0;fe<this.dashboard.templating.list.length;fe++){const Le=this.dashboard.templating.list[fe];Le.datasource===void 0&&(Le.datasource=null),Le.type==="filter"&&(Le.type="query"),Le.type===void 0&&(Le.type="query"),Le.allFormat===void 0&&delete Le.allFormat}}if(Pe<7&&(oe.nav&&oe.nav.length&&(this.dashboard.timepicker=oe.nav[0]),Ee.push(he=>((0,n.each)(he.targets,Le=>{Le.refId||(Le.refId=he.getNextQueryLetter&&he.getNextQueryLetter())}),he))),Pe<8&&Ee.push(he=>((0,n.each)(he.targets,Le=>{Le.fields&&Le.tags&&Le.groupBy&&(Le.rawQuery?(delete Le.fields,delete Le.fill):(Le.select=(0,n.map)(Le.fields,ke=>{const ot=[];return ot.push({type:"field",params:[ke.name]}),ot.push({type:ke.func,params:[]}),ke.mathExpr&&ot.push({type:"math",params:[ke.mathExpr]}),ke.asExpr&&ot.push({type:"alias",params:[ke.asExpr]}),ot}),delete Le.fields,(0,n.each)(Le.groupBy,ke=>{ke.type==="time"&&ke.interval&&(ke.params=[ke.interval],delete ke.interval),ke.type==="tag"&&ke.key&&(ke.params=[ke.key],delete ke.key)}),Le.fill&&(Le.groupBy.push({type:"fill",params:[Le.fill]}),delete Le.fill)))}),he)),Pe<9&&Ee.push(he=>{if(he.type!=="singlestat"&&he.thresholds!=="")return he;if(he.thresholds){const Le=he.thresholds.split(",");Le.length>=3&&(Le.shift(),he.thresholds=Le.join(","))}return he}),Pe<10&&Ee.push(he=>(he.type!=="table"||(0,n.each)(he.styles,Le=>{if(Le.thresholds&&Le.thresholds.length>=3){const ke=Le.thresholds;ke.shift(),Le.thresholds=ke}}),he)),Pe<12&&(0,n.each)(this.dashboard.getVariables(),he=>{"refresh"in he&&(he.refresh&&(he.refresh=1),he.refresh||(he.refresh=0)),"hideVariable"in he&&he.hideVariable?he.hide=2:"hideLabel"in he&&he.hideLabel&&(he.hide=1)}),Pe<12&&Ee.push(he=>(he.type!=="graph"||!he.grid||he.yaxes||(he.yaxes=[{show:he["y-axis"],min:he.grid.leftMin,max:he.grid.leftMax,logBase:he.grid.leftLogBase,format:he.y_formats[0],label:he.leftYAxisLabel},{show:he["y-axis"],min:he.grid.rightMin,max:he.grid.rightMax,logBase:he.grid.rightLogBase,format:he.y_formats[1],label:he.rightYAxisLabel}],he.xaxis={show:he["x-axis"]},delete he.grid.leftMin,delete he.grid.leftMax,delete he.grid.leftLogBase,delete he.grid.rightMin,delete he.grid.rightMax,delete he.grid.rightLogBase,delete he.y_formats,delete he.leftYAxisLabel,delete he.rightYAxisLabel,delete he["y-axis"],delete he["x-axis"]),he)),Pe<13&&Ee.push(he=>{if(he.type!=="graph"||!he.grid)return he;he.thresholds||(he.thresholds=[]);const Le={},ke={};return he.grid.threshold1!==null&&(Le.value=he.grid.threshold1,he.grid.thresholdLine?(Le.line=!0,Le.lineColor=he.grid.threshold1Color,Le.colorMode="custom"):(Le.fill=!0,Le.fillColor=he.grid.threshold1Color,Le.colorMode="custom")),he.grid.threshold2!==null&&(ke.value=he.grid.threshold2,he.grid.thresholdLine?(ke.line=!0,ke.lineColor=he.grid.threshold2Color,ke.colorMode="custom"):(ke.fill=!0,ke.fillColor=he.grid.threshold2Color,ke.colorMode="custom")),(0,n.isNumber)(Le.value)&&((0,n.isNumber)(ke.value)?Le.value>ke.value?(Le.op=ke.op="lt",he.thresholds.push(Le),he.thresholds.push(ke)):(Le.op=ke.op="gt",he.thresholds.push(Le),he.thresholds.push(ke)):(Le.op="gt",he.thresholds.push(Le))),delete he.grid.threshold1,delete he.grid.threshold1Color,delete he.grid.threshold2,delete he.grid.threshold2Color,delete he.grid.thresholdLine,he}),Pe<14&&(this.dashboard.graphTooltip=oe.sharedCrosshair?1:0),Pe<16&&this.upgradeToGridLayout(oe),Pe<17&&Ee.push(he=>{if(he.minSpan){const Le=y.cz/he.minSpan,ke=D(y.cz);he.maxPerRow=ke[(0,n.findIndex)(ke,ot=>ot>Le)-1]}return delete he.minSpan,he}),Pe<18&&Ee.push(he=>(he["options-gauge"]&&(he.options=he["options-gauge"],he.options.valueOptions={unit:he.options.unit,stat:he.options.stat,decimals:he.options.decimals,prefix:he.options.prefix,suffix:he.options.suffix},he.options.thresholds&&he.options.thresholds.reverse(),delete he.options.options,delete he.options.unit,delete he.options.stat,delete he.options.decimals,delete he.options.prefix,delete he.options.suffix,delete he["options-gauge"]),he)),Pe<19&&Ee.push(he=>(he.links&&(0,n.isArray)(he.links)&&(he.links=he.links.map(z)),he)),Pe<20){const he=Le=>({...Le,url:W(Le.url)});Ee.push(Le=>(Le.options&&Le.options.dataLinks&&(0,n.isArray)(Le.options.dataLinks)&&(Le.options.dataLinks=Le.options.dataLinks.map(he)),Le.options&&Le.options.fieldOptions&&Le.options.fieldOptions.defaults&&(Le.options.fieldOptions.defaults.links&&(0,n.isArray)(Le.options.fieldOptions.defaults.links)&&(Le.options.fieldOptions.defaults.links=Le.options.fieldOptions.defaults.links.map(he)),Le.options.fieldOptions.defaults.title&&(Le.options.fieldOptions.defaults.title=W(Le.options.fieldOptions.defaults.title))),Le))}if(Pe<21){const he=Le=>({...Le,url:Le.url.replace(/__series.labels/g,"__field.labels")});Ee.push(Le=>(Le.options&&Le.options.dataLinks&&(0,n.isArray)(Le.options.dataLinks)&&(Le.options.dataLinks=Le.options.dataLinks.map(he)),Le.options&&Le.options.fieldOptions&&Le.options.fieldOptions.defaults&&Le.options.fieldOptions.defaults.links&&(0,n.isArray)(Le.options.fieldOptions.defaults.links)&&(Le.options.fieldOptions.defaults.links=Le.options.fieldOptions.defaults.links.map(he)),Le))}if(Pe<22&&Ee.push(he=>(he.type!=="table"||(0,n.each)(he.styles,Le=>{Le.align="auto"}),he)),Pe<23)for(const he of this.dashboard.templating.list){if(!(0,b.U4)(he))continue;const{multi:Le,current:ke}=he;(0,i.Q)(ke)||(he.current=(0,T.x)(ke,Le))}if(Pe<24&&Ee.push(he=>{const Le=he.type==="table";if(Le&&!he.styles)return he;const ke=he.table==="table2";return!Le||ke||(he.type=Le?"table-old":"table"),he}),Pe<25,Pe<26&&Ee.push(he=>(he.type==="text2"&&(he.type="text",delete he.options.angular),he)),Pe<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(he=>{if(!(0,b.VC)(he))return he;const Le={...he};return Le.current={selected:!0,text:Le.query??"",value:Le.query??""},Le.options=[Le.current],Le.hide===N.bU.dontHide||Le.hide===N.bU.hideLabel?{...Le,type:"textbox"}:Le})),Pe<28){Ee.push(he=>he.type==="singlestat"?Z(he):he);for(const he of this.dashboard.templating.list)he.tags&&delete he.tags,he.tagsQuery&&delete he.tagsQuery,he.tagValuesQuery&&delete he.tagValuesQuery,he.useTags&&delete he.useTags}if(Pe<29)for(const he of this.dashboard.templating.list)he.type==="query"&&(he.refresh!==1&&he.refresh!==2&&(he.refresh=1),he.options?.length&&(he.options=[]));if(Pe<30&&(Ee.push(Y),Ee.push(ge)),Pe<31&&Ee.push(he=>{if(he.transformations){for(const Le of he.transformations)if(Le.id===f.r.id)return X(he,f.r.id,{id:m.R.id,options:{}})}return he}),Pe<32,Pe<33&&Ee.push(he=>{if(he.datasource=H(he.datasource,{returnDefaultAsNull:!0}),!he.targets)return he;for(const Le of he.targets){const ke=H(Le.datasource,{returnDefaultAsNull:!0});ke!=null&&(Le.datasource=ke)}return he}),Pe<34&&(Ee.push(he=>(this.migrateCloudWatchQueries(he),he)),this.migrateCloudWatchAnnotationQuery()),Pe<35&&Ee.push(q),Pe<36){for(const Le of this.dashboard.annotations.list)Le.datasource=H(Le.datasource,{returnDefaultAsNull:!1});const he=(0,v.F)().getInstanceSettings(null);if(he){for(const Le of this.dashboard.templating.list)Le.type==="query"&&Le.datasource===null&&(Le.datasource=(0,r.iU)(he));Ee.push(Le=>{if(Le.targets){let ke=!1;Le.datasource==null&&Le.targets.length>0&&(Le.datasource=(0,r.iU)(he),ke=!0);for(const ot of Le.targets)(ot.datasource==null||ot.datasource.uid==null)&&(Le.datasource?.uid!==O.D?ot.datasource={...Le.datasource}:ot.datasource=H(ot.datasource,{returnDefaultAsNull:!1})),ke&&ot.datasource?.uid!=="__expr__"&&(Le.datasource=ot.datasource)}return Le})}}if(Pe<37&&Ee.push(he=>(he.options?.legend&&(he.options.legend.displayMode==="hidden"||he.options.legend.showLegend===!1)?(he.options.legend.displayMode="list",he.options.legend.showLegend=!1):he.options?.legend&&(he.options.legend={...he.options?.legend,showLegend:!0}),he)),Pe<38&&Ee.push(he=>{if(he.type==="table"&&he.fieldConfig!==void 0){const Le=he.fieldConfig.defaults?.custom?.displayMode;if(Le!==void 0&&(he.fieldConfig.defaults.custom.cellOptions=(0,p.q7)(Le),delete he.fieldConfig.defaults.custom.displayMode),he.fieldConfig?.overrides)for(const ke of he.fieldConfig.overrides)for(let ot=0;ot<ke.properties?.length;ot++){let it=ke.properties[ot].value;ke.properties[ot].id==="custom.displayMode"&&(ke.properties[ot].id="custom.cellOptions",ke.properties[ot].value=(0,p.q7)(it))}}return he}),Pe<39&&Ee.push(he=>(he.transformations?.forEach(Le=>{if(Le.id==="timeSeriesTable"&&Le.options!==void 0&&Le.options.refIdToStat!==void 0){let ke={};for(const[ot,it]of Object.entries(Le.options.refIdToStat)){let ce={};ce.stat=it,ke[ot]=ce}Le.options=ke}}),he)),Ee.length!==0)for(ve=0;ve<this.dashboard.panels.length;ve++)for(pe=0;pe<Ee.length;pe++){this.dashboard.panels[ve]=Ee[pe].call(this,this.dashboard.panels[ve]);const he=this.dashboard.panels[ve].panels;if(he)for(Me=0;Me<he.length;Me++)he[Me]=Ee[pe].call(this,he[Me])}}}removeRepeatedPanels(){const oe=[];for(const fe of this.dashboard.panels)fe.repeatPanelId||fe.repeatByRow||(fe.type==="row"&&Array.isArray(fe.panels)&&(fe.panels=fe.panels.filter(ve=>!ve.repeatPanelId)),oe.push(fe));this.dashboard.panels=oe}migrateCloudWatchQueries(oe){for(const fe of oe.targets||[])if(ne(fe)&&(U(fe),fe.hasOwnProperty("statistics"))){const ve=L(fe,[...oe.targets]);for(const pe of ve)oe.targets.push(pe)}}migrateCloudWatchAnnotationQuery(){for(const oe of this.dashboard.annotations.list)if(se(oe)){const fe=S(oe);for(const ve of fe)this.dashboard.annotations.list.push(ve)}}upgradeToGridLayout(oe){let fe=0;const ve=y.cz/12;let Me=(0,n.max)((0,n.flattenDeep)((0,n.map)(oe.rows,Ee=>(0,n.map)(Ee.panels,"id"))))+1;if(!oe.rows)return;const Pe=(0,n.some)(oe.rows,Ee=>Ee.collapse||Ee.showTitle||Ee.repeat);for(const Ee of oe.rows){if(Ee.repeatIteration)continue;const he=Ee.height||y.b0,Le=K(he),ke={};let ot;Pe&&(ke.id=Me,ke.type="row",ke.title=Ee.title,ke.collapsed=Ee.collapse,ke.repeat=Ee.repeat,ke.panels=[],ke.gridPos={x:0,y:fe,w:y.cz,h:Le},ot=new w.rY(ke),Me++,fe++);const it=new k(Le,y.cz,fe);for(const ce of Ee.panels){ce.span=ce.span||y.kh,ce.minSpan&&(ce.minSpan=Math.min(y.cz,y.cz/12*ce.minSpan));const le=Math.floor(ce.span)*ve,Re=ce.height?K(ce.height):Le,Ae=it.getPanelPosition(Re,le);fe=it.yPos,ce.gridPos={x:Ae.x,y:fe+Ae.y,w:le,h:Re},it.addPanel(ce.gridPos),delete ce.span,ot&&ke.collapsed?ot.panels?.push(ce):this.dashboard.panels.push(new w.rY(ce))}ot&&this.dashboard.panels.push(ot),ot&&ke.collapsed||(fe+=Le)}}}function K(me){return(0,n.isString)(me)&&(me=parseInt(me.replace("px",""),10)),me<y.AV&&(me=y.AV),Math.ceil(me/(y.K3+y.hD))}class k{constructor(oe,fe=y.cz,ve=0){this.area=new Array(fe).fill(0),this.yPos=ve,this.height=oe}reset(){this.area.fill(0)}addPanel(oe){for(let fe=oe.x;fe<oe.x+oe.w;fe++)(!this.area[fe]||oe.y+oe.h-this.yPos>this.area[fe])&&(this.area[fe]=oe.y+oe.h-this.yPos);return this.area}getPanelPosition(oe,fe,ve=!1){let pe,Me,Pe;for(let Ee=this.area.length-1;Ee>=0&&this.height-this.area[Ee]>0;Ee--)if(Me===void 0)Me=Ee;else if(Ee<this.area.length-1&&this.area[Ee]<=this.area[Ee+1])pe=Ee;else break;if(pe!==void 0&&Me!==void 0&&Me-pe>=fe-1){const Ee=(0,n.max)(this.area.slice(pe));Pe={x:pe,y:Ee}}else return ve?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(oe,fe,!0));return Pe}}function z(me){let oe=me.url;return!oe&&me.dashboard&&(oe=`dashboard/db/${C.Z.slugifyForUrl(me.dashboard)}`),!oe&&me.dashUri&&(oe=`dashboard/${me.dashUri}`),oe||(oe="/"),me.keepTime&&(oe=o.Cj.appendQueryToUrl(oe,`$${g.W.keepTime}`)),me.includeVars&&(oe=o.Cj.appendQueryToUrl(oe,`$${g.W.includeVars}`)),me.params&&(oe=o.Cj.appendQueryToUrl(oe,me.params)),{url:oe,title:me.title,targetBlank:me.targetBlank}}function W(me){const oe=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return me.replace(oe,(fe,ve,pe,Me,Pe,Ee)=>ve?"__series.name":pe?"${__series.name}":Me?"__value.time":Pe?"__field.name":Ee?"${__field.name}":fe)}function Z(me){if(s.config.panels["grafana-singlestat-panel"])return me.type="grafana-singlestat-panel",me;let oe=!1;return me.changePlugin||(oe=!0,me=new w.rY(me)),me.plugin={angularPanelCtrl:{}},me.gauge?.show?(R.plugin.meta=s.config.panels.gauge,me.changePlugin(R.plugin)):(I.plugin.meta=s.config.panels.stat,me.changePlugin(I.plugin)),oe?me.getSaveModel():me}function H(me,oe){if(oe.returnDefaultAsNull&&(me==null||me==="default"))return null;if((0,r.cv)(me))return me;const fe=(0,v.F)().getInstanceSettings(me);return fe?(0,r.iU)(fe):{uid:me||void 0}}function X(me,oe,fe){if(me.transformations){const ve=[];for(const pe of me.transformations)ve.push(pe),pe.id===oe&&ve.push({...fe});me.transformations=ve}return me}function Y(me){const oe=me.fieldConfig;if(!oe)return me;if(oe.defaults&&oe.defaults.mappings&&(oe.defaults.mappings=re(oe.defaults.mappings,oe.defaults.thresholds)),Array.isArray(oe.overrides))for(const fe of oe.overrides)for(const ve of fe.properties)ve.id==="mappings"&&(ve.value=re(ve.value));return me}function ne(me){return me.hasOwnProperty("dimensions")&&me.hasOwnProperty("namespace")&&me.hasOwnProperty("region")&&me.hasOwnProperty("metricName")}function se(me){return me.hasOwnProperty("dimensions")&&me.hasOwnProperty("namespace")&&me.hasOwnProperty("region")&&me.hasOwnProperty("prefixMatching")&&me.hasOwnProperty("statistics")}function re(me,oe){if(!me)return;const fe={type:u.H.ValueToText,options:{}},ve=[];for(const pe of me){if(pe.type&&pe.options){pe.type===u.H.ValueToText?fe.options={...fe.options,...pe.options}:ve.push(pe);continue}let Me;const Pe=parseFloat(pe.text);if(oe&&!isNaN(Pe)){const Ee=(0,c.m1)(Pe,oe.steps);Ee&&Ee.color&&(Me=Ee.color)}switch(pe.type){case 1:pe.value!=null&&(pe.value==="null"?ve.push({type:u.H.SpecialValue,options:{match:u.e.Null,result:{text:pe.text,color:Me}}}):fe.options[String(pe.value)]={text:pe.text,color:Me});break;case 2:ve.push({type:u.H.RangeToText,options:{from:+pe.from,to:+pe.to,result:{text:pe.text,color:Me}}});break}}return Object.keys(fe.options).length>0&&ve.unshift(fe),ve}function ge(me){return(me.type==="timeseries"||me.type==="xychart")&&me.options.tooltipOptions&&(me.options={...me.options,tooltip:me.options.tooltipOptions},delete me.options.tooltipOptions),me}function q(me){return me.type==="timeseries"&&me.fieldConfig?.defaults.custom?.axisPlacement===E.LB.Hidden&&(me.fieldConfig={...me.fieldConfig,overrides:[...me.fieldConfig.overrides,{matcher:{id:l.mi.byType,options:d.fS.time},properties:[{id:"custom.axisPlacement",value:E.LB.Auto}]}]}),me}},40931:(Q,A,e)=>{"use strict";e.d(A,{f:()=>w});var n=e(69781),a=e(40510),i=e(83994),r=e(40137),o=e(74011),g=e(85498),u=e(1727),c=e(63956),l=e(21279),d=e(56811),f=e(5529),m=e(61260),v=e(73731),E=e(43773),p=e(99282),h=e(42342),s=e(74642),y=e(75923),D=e(86573),C=e(7257),P=e(77378),b=e(89660),T=e(25353);const O=new Set(["gridPos","title","description","transparent"]);function R(K,k){const z=[],W={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:z};let Z=0;const H=new Map;for(let X of k){let{id:Y}=X;Y||(Z||(Z=M([K,k])),Y=Z++,X={...X,id:Y}),H.set(Y,X)}for(const X of K){const Y=H.get(X.id);if(!Y){W.changed=!0,W.actions.remove.push(X.id),X.destroy();continue}if(H.delete(X.id),Y===X){z.push(X),W.actions.noop.push(X.id);continue}if(X.type===Y.type){const se=X.getSaveModel();let re=!0,ge=!1;for(const[q,me]of Object.entries(Y))if(!(0,n.isEqualWith)(me,se[q],I))if(W.changed=!0,re=!1,O.has(q))X[q]=me,ge=!0;else{ge=!1;break}if(re){z.push(X),W.actions.noop.push(X.id);continue}if(ge){z.push(X),W.actions.update.push(X.id);continue}}X.destroy();const ne=new T.r(Y);ne.key=`${ne.id}-update-${Date.now()}`,z.push(ne),W.changed=!0,W.actions.replace.push(X.id)}for(const X of H.values())z.push(new T.r(X)),W.changed=!0,W.actions.add.push(X.id);return W}function I(K,k){if(K==null&&(k===1/0||k===-1/0||k==null)||k==null&&(K===1/0||K===-1/0||K==null))return!0}function M(K){let k=0;for(const z of K)for(const W of z)W.id>k&&(k=W.id);return k+1}var x=e(29630),L=e(30937);function S(K,k){return K.repeatDirection===l.yM?!1:k.gridPos.x>=K.gridPos.x+K.gridPos.w&&k.gridPos.y===K.gridPos.y}function U(K){for(const k of K)if(delete k.scopedVars,k.panels?.length)for(const z of k.panels)delete z.scopedVars}const N=class{constructor(K,k,z){if(this.timeRangeUpdatedDuringEdit=!1,this.originalDashboard=null,this.getVariablesFromState=z?.getVariablesFromState??p.gt,this.events=new i.F,this.id=K.id||null,this.uid=K.uid||null,this.revision=K.revision??void 0,this.title=K.title??"No Title",this.description=K.description,this.tags=K.tags??[],this.timezone=K.timezone??"",this.weekStart=K.weekStart??"",this.editable=K.editable!==!1,this.graphTooltip=K.graphTooltip||0,this.time=K.time??{from:"now-6h",to:"now"},this.timepicker=K.timepicker??{},this.liveNow=!!K.liveNow,this.templating=this.ensureListExist(K.templating),this.annotations=this.ensureListExist(K.annotations),this.refresh=K.refresh||"",this.snapshot=K.snapshot,this.schemaVersion=K.schemaVersion??0,this.fiscalYearStartMonth=K.fiscalYearStartMonth??0,this.version=K.version??0,this.links=K.links??[],this.gnetId=K.gnetId||null,this.panels=(0,n.map)(K.panels??[],W=>new L.rY(W)),this.originalDashboard=(0,n.cloneDeep)(K),this.originalTemplating=(0,n.cloneDeep)(this.templating),this.originalTime=(0,n.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(k),this.updateSchema(K),z?.autoMigrateOldPanels||!g.config.angularSupportEnabled||g.config.featureToggles.autoMigrateOldPanels)for(const W of this.panelIterator()){const Z=L.G7[W.type];!W.autoMigrateFrom&&Z&&(W.autoMigrateFrom=W.type,W.type=Z)}this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new a.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(y.h$.subscribe(C.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(y.h$.subscribe(C.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(y.h$.subscribe(C.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(k=>k.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:c.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(K){K=K||{},K.canShare=K.canShare!==!1,K.canSave=K.canSave!==!1,K.canStar=K.canStar!==!1,K.canEdit=K.canEdit!==!1,K.canDelete=K.canDelete!==!1,K.showSettings=K.canEdit,K.canMakeEditable=K.canSave&&!this.editable,K.hasUnsavedFolderChange=!1,this.editable||(K.canEdit=!1,K.canDelete=!1,K.canSave=!1),this.meta=K}getSaveModelCloneOld(K){const k=(0,n.defaults)(K||{},{saveVariables:!0,saveTimerange:!0});let z={};for(const W in this)N.nonPersistedProperties[W]||!this.hasOwnProperty(W)||(z[W]=(0,n.cloneDeep)(this[W]));return z.templating=this.getTemplatingSaveModel(k),k.saveTimerange||(z.time=this.originalTime),z.panels=this.getPanelSaveModels(),z=(0,f.M)(z),z.getVariables=()=>z.templating.list,z}getSaveModelClone(K){const k=this.getSaveModelCloneOld(K),z=JSON.stringify(k);return JSON.parse(z)}updatePanels(K){const k=R(this.panels,K??[]);return k.changed&&(this.panels=k.panels??[],this.sortPanelsByGridPos(),this.events.publish(new s._B)),k}getPanelSaveModels(){return this.panels.filter(K=>this.isSnapshotTruthy()||!(K.type==="add-panel"||K.repeatPanelId||K.repeatedByRow)).map(K=>{if(K.libraryPanel){const{id:k,title:z,libraryPanel:W,gridPos:Z}=K;return{id:k,title:z,gridPos:Z,libraryPanel:{uid:W.uid,name:W.name}}}return this.panelInEdit&&this.panelInEdit.id===K.id?this.panelInEdit.getSaveModel():K.getSaveModel()}).map(K=>(this.isSnapshotTruthy()||(delete K.scopedVars,K.type==="row"&&K.panels&&K.panels.length>0&&(K.panels=K.panels.filter(k=>!k.repeatPanelId).map(k=>(delete k.scopedVars,k)))),K))}getTemplatingSaveModel(K){const k=this.originalTemplating?.list??[],W=this.getVariablesFromState(this.uid).map(H=>{const X=v.z.get(H.type).getSaveModel(H,K.saveVariables);if(!K.saveVariables){const Y=k.find(({name:ne,type:se})=>ne===H.name&&se===H.type);if(!Y)return X;H.type==="adhoc"?X.filters=Y.filters:(X.current=Y.current,X.options=Y.options)}return X});return{list:(0,f.M)(W)}}timeRangeUpdated(K){this.events.publish(new u.md(K)),(0,D.WI)((0,E.DU)(this.uid,K)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(K={refreshAll:!0,panelIds:[]}){if(this.events.publish(new u.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(K.refreshAll||K.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const k of this.panels)!this.otherPanelInFullscreen(k)&&(K.refreshAll||K.panelIds.includes(k.id))&&k.refresh()}render(){this.events.publish(new s._z);for(const K of this.panels)K.render()}panelInitialized(K){const k=K.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(K)&&!k&&K.refresh()}otherPanelInFullscreen(K){return(this.panelInEdit||this.panelInView)&&!(K.isViewing||K.isEditing)}initEditPanel(K){return(0,b.$t)().stopAutoRefresh(),this.panelInEdit=K.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,b.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(K){this.panelInView=K,K.setIsViewing(!0)}exitViewPanel(K){this.panelInView=void 0,K.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const K=new Set;let k=this.getNextPanelId();for(const z of this.panelIterator())(!z.id||K.has(z.id))&&(z.id=k++),K.add(z.id)}ensureListExist(K={}){return K.list??=[],K}getNextPanelId(){let K=0;for(const k of this.panelIterator())k.id>K&&(K=k.id);return K+1}*panelIterator(){for(const K of this.panels){yield K;const k=K.panels??[];for(const z of k)yield z}}forEachPanel(K){for(let k=0;k<this.panels.length;k++)K(this.panels[k],k)}getPanelById(K,k=!1){if(this.panelInEdit&&this.panelInEdit.id===K)return this.panelInEdit;if(k){for(const z of this.panelIterator())if(z.id===K)return z;return null}else return this.panels.find(z=>z.id===K)??null}canEditPanel(K){return!!(this.meta.canEdit&&K&&!K.repeatPanelId&&K.type!=="row")}canEditPanelById(K){return this.canEditPanel(this.getPanelById(K))}addPanel(K){K.id=this.getNextPanelId(),this.panels.unshift(new L.rY(K)),this.sortPanelsByGridPos(),this.events.publish(new s._B)}updateMeta(K){this.meta={...this.meta,...K},this.events.publish(new s.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((K,k)=>K.gridPos.y===k.gridPos.y?K.gridPos.x-k.gridPos.x:K.gridPos.y-k.gridPos.y)}clearUnsavedChanges(K,k){for(const z of this.panels)z.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=K,this.originalTemplating=K.templating,k.saveTimerange&&(this.originalTime=K.time)}hasUnsavedChanges(){return!!this.panels.find(k=>k.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;U(this.panels);const K=this.panels.filter(k=>(!k.repeat||k.repeatedByRow)&&k.repeatPanelId);(0,n.pull)(this.panels,...K),K.map(k=>k.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let K=0;K<this.panels.length;K++){const k=this.panels[K];k.repeat&&this.repeatPanel(k,K)}this.sortPanelsByGridPos(),this.events.publish(new s._B)}}cleanUpRowRepeats(K){const k=K.map(W=>W.id),z=K.filter(W=>!W.repeat&&W.repeatPanelId&&k.includes(W.repeatPanelId));(0,n.pull)(K,...z),(0,n.pull)(this.panels,...z)}processRowRepeats(K){if(this.isSnapshotTruthy()||!this.hasVariables())return;let k=K.panels??[];if(!K.collapsed){const z=this.panels.findIndex(W=>W.id===K.id);k=this.getRowPanels(z)}this.cleanUpRowRepeats(k);for(const z of k)if(z.repeat){const W=this.panels.findIndex(Z=>Z.id===z.id);this.repeatPanel(z,W)}}getPanelRepeatClone(K,k,z){if(k===0)return K;const W=K.getSaveModel();W.id=this.getNextPanelId();const Z=new L.rY(W);return this.panels.splice(z+k,0,Z),Z.repeatPanelId=K.id,Z.repeat=void 0,this.panelInView?.id===Z.id&&(Z.setIsViewing(!0),this.panelInView=Z),Z}getRowRepeatClone(K,k,z){if(k===0){if(!K.collapsed){const X=this.getRowPanels(z);K.panels=X}return K}const W=new L.rY(K.getSaveModel());let Z,H;return K.collapsed?(Z=(0,n.cloneDeep)(K.panels)??[],W.panels=Z,H=z+k):(Z=this.getRowPanels(z),W.panels=Z.map(X=>X.getSaveModel()),H=z+(Z.length+1)*k),this.panels.splice(H,0,W),this.updateRepeatedPanelIds(W),W}repeatPanel(K,k){const z=this.getPanelRepeatVariable(K);if(!z)return;if(K.type==="row"){this.repeatRow(K,k,z);return}const W=this.getSelectedVariableOptions(z),Z=K.maxPerRow||4;let H=0,X=K.gridPos.y;for(let ne=0;ne<W.length;ne++){const se=W[ne];let re;re=this.getPanelRepeatClone(K,ne,k),re.scopedVars??={},re.scopedVars[z.name]=se,K.repeatDirection===l.OA?(ne>0&&(X+=re.gridPos.h),re.gridPos.y=X):(re.gridPos.w=Math.max(l.cz/W.length,l.cz/Z),re.gridPos.x=H,re.gridPos.y=X,H+=re.gridPos.w,H+re.gridPos.w>l.cz&&(H=0,X+=re.gridPos.h))}const Y=X-K.gridPos.y;if(Y>0){const ne=k+W.length;for(const se of this.panels.slice(ne))S(K,se)||(se.gridPos.y+=Y)}}repeatRow(K,k,z){const W=this.getSelectedVariableOptions(z);for(let Z=0;Z<W.length;Z++){const H=W[Z],X=this.getRowRepeatClone(K,Z,k);_(X,z,H);const Y=this.getRowHeight(X),ne=X.panels||[];let se;if(K.collapsed){for(const re of ne)_(re,z,H),Z>0&&this.updateRepeatedPanelIds(re,!0);X.gridPos.y+=Z,se=k+Z+1}else{const re=k+(ne.length+1)*Z+1;ne.forEach((ge,q)=>{if(_(ge,z,H),Z>0){const me=new L.rY(ge);this.updateRepeatedPanelIds(me,!0),me.gridPos.y+=Y*Z,this.panels.splice(re+q,0,me)}}),X.panels=[],X.gridPos.y+=Y*Z,se=re+ne.length}if(W.length>1)for(const re of this.panels.slice(se))re.gridPos.y+=Y}}updateRepeatedPanelIds(K,k){return K.repeatPanelId=K.id,K.id=this.getNextPanelId(),k?K.repeatedByRow=!0:K.repeat=void 0,K}getSelectedVariableOptions(K){let k;return(0,P.HY)(K)?k=K.options.slice(1,K.options.length):k=(0,n.filter)(K.options,{selected:!0}),k}getRowHeight(K){if(!K.panels||K.panels.length===0)return 0;if(K.collapsed)return 1;const k=(0,n.maxBy)(K.panels,({gridPos:z})=>z.y+z.h).gridPos;return k.y+k.h-K.gridPos.y}removePanel(K){this.panels=this.panels.filter(k=>k!==K),K.destroy(),this.events.publish(new s._B)}removeRow(K,k){(!k&&K.collapsed||k&&!K.collapsed)&&this.toggleRow(K),this.removePanel(K)}expandRows(){const K=this.panels.filter(k=>k.type==="row"&&k.collapsed);for(const k of K)this.toggleRow(k)}collapseRows(){const K=this.panels.filter(k=>k.type==="row"&&!k.collapsed);for(const k of K)this.toggleRow(k)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(K=>K.hide!==2)||this.annotations.list.some(K=>!K.hide)}getPanelInfoById(K){const k=this.panels.findIndex(z=>z.id===K);return k>=0?{panel:this.panels[k],index:k}:null}duplicatePanel(K){const k=K.getSaveModel();return k.id=this.getNextPanelId(),delete k.repeat,delete k.repeatIteration,delete k.repeatPanelId,delete k.scopedVars,k.alert&&delete k.thresholds,delete k.alert,K.gridPos.x+K.gridPos.w*2<=l.cz?k.gridPos.x+=K.gridPos.w:k.gridPos.y+=K.gridPos.h,this.addPanel(k),k}formatDate(K,k){return(0,r.dq)(K,{format:k,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const K of this.panels)K.destroy()}toggleRow(K){const k=(0,n.indexOf)(this.panels,K);if(!K.collapsed){const H=this.getRowPanels(k);(0,n.pull)(this.panels,...H),K.panels=H.map(X=>X.getSaveModel()),K.collapsed=!0,H.some(X=>X.hasChanged)&&K.configRev++,this.events.publish(new s._B);return}K.collapsed=!1;const z=K.panels??[],W=z.some(H=>H.repeat),Z=K.repeat;if(z.length>0){const X=(z[0].gridPos.y??K.gridPos.y)-(K.gridPos.y+K.gridPos.h);let Y=k+1,ne=K.gridPos.y;for(const re of z){if(Z){const ge=this.getPanelRepeatVariable(K);if(re.scopedVars??={},ge){const q=this.getSelectedVariableOptions(ge);re.scopedVars={...re.scopedVars,[ge.name]:q[0]}}}re.gridPos.y??(re.gridPos.y=K.gridPos.y),re.gridPos.y-=X,this.panels.splice(Y,0,new L.rY(re)),Y+=1,ne=Math.max(ne,re.gridPos.y+re.gridPos.h)}const se=ne-K.gridPos.y-1;for(const re of this.panels.slice(Y))re.gridPos.y+=se;K.panels=[],W&&this.processRowRepeats(K)}this.sortPanelsByGridPos(),this.events.publish(new s._B)}getRowPanels(K){const k=this.panels.slice(K+1),z=k.findIndex(Z=>Z.type==="row");return k.slice(0,z>=0?z:this.panels.length)}on(K,k){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(K,k)}off(K,k){console.log("DashboardModel.off is deprecated"),this.events.off(K,k)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(K){return(0,r.E8)(K,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:d.contextSrv?.user?.timezone}updateSchema(K){new x.o3(this).updateSchema(K)}hasTimeChanged(){const{time:K,originalTime:k}=this;return!((0,n.isEqual)(K,k)||(0,n.isEqual)((0,o.CQ)(K?.from),(0,o.CQ)(k?.from))&&(0,n.isEqual)((0,o.CQ)(K?.to),(0,o.CQ)(k?.to)))}autoFitPanels(K,k){const z=Math.max(...this.panels.map(ne=>ne.gridPos.h+ne.gridPos.y)),W=55,Z=20;let H=K-W-Z;k&&k!==h.KioskMode.TV&&(H+=W);const X=Math.floor(H/(l.K3+l.hD)),Y=z/X;for(const ne of this.panels)ne.gridPos.y=Math.round(ne.gridPos.y/Y)||1,ne.gridPos.h=Math.round(ne.gridPos.h/Y)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(h.CoreEvents.nq)}getPanelByUrlId(K){const k=parseInt(K??"0",10),z=this.panels.filter(W=>W.collapsed);for(const W of z)W.panels?.some(H=>H.id===k)&&this.toggleRow(W);return this.getPanelById(k)}toggleLegendsForAll(){const K=this.panels.filter(G),k=K.filter(Z=>Z.legend.show).length,z=K.length-k,W=k>=z;for(const Z of K)Z.legend.show=!W,Z.render()}toggleExemplarsForAll(){for(const K of this.panels)for(const k of K.targets){if(!(k.datasource&&k.datasource.type==="prometheus"))continue;const z=k;z.exemplar=!z.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(K){let k=!0;return K?k=!!this.meta.annotationsPermissions?.dashboard.canEdit:k=!!this.meta.annotationsPermissions?.organization.canEdit,(g.config.featureToggles.annotationPermissionUpdate||this.canEditDashboard())&&k}canDeleteAnnotations(K){let k=!0;return K?k=!!this.meta.annotationsPermissions?.dashboard.canDelete:k=!!this.meta.annotationsPermissions?.organization.canDelete,g.config.featureToggles.annotationPermissionUpdate?k:k&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(k=>k.builtIn===1)?.enable===!1?!1:g.config.featureToggles.annotationPermissionUpdate?!!this.meta.annotationsPermissions?.dashboard.canAdd:!!this.meta.annotationsPermissions?.dashboard.canAdd&&this.canEditDashboard()}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(K,k){!(0,n.isEqual)(K?.gridPos,k?.gridPos)&&this.events.publish(new s._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(K){return this.getVariablesFromState(this.uid).find(k=>k.name===K.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const K=this.originalTemplating?.list??[],k=this.getTemplatingSaveModel({saveVariables:!0}).list;return K.length!==k.length?!1:!(0,n.isEqual)(k,K)}variablesTimeRangeProcessDoneHandler(K){const k=K.payload.variableIds.length>0;this.variablesChangedHandler(new C.x9({panelIds:[],refreshAll:!0}),k)}variablesChangedHandler(K,k=!0){if(k&&this.processRepeats(),K.payload.refreshAll||(0,b.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=K.payload.panelIds.filter(z=>z!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(K.payload)}variablesChangedInUrlHandler(K){this.templateVariableValueUpdated(),this.startRefresh(K.payload)}getOriginalDashboard(){return this.originalDashboard}hasAngularPlugins(){return this.panels.some(K=>{const k=K.isAngularPlugin()&&!K.plugin?.meta.angular?.hideDeprecation;let z=!1;return K.datasource?.uid&&(z=(0,m.G)(K.datasource?.uid)),k||z})}};let w=N;w.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0,originalDashboard:!0};function G(K){return!!K.legend}function _(K,k,z){K.scopedVars??={},K.scopedVars[k.name]=z}},30937:(Q,A,e)=>{"use strict";e.d(A,{G7:()=>s,Jg:()=>P,hb:()=>C,rY:()=>D});var n=e(69781),a=e.n(n),i=e(79117),r=e(83994),o=e(44343),g=e(87877),u=e(1727),c=e(61129),l=e(83811),d=e(82866),f=e(65354),m=e(74642),v=e(64879);const E={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},p={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},h={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},s={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},y={"heatmap-new":"heatmap"};class D{constructor(T){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!1,this.cachedPluginOptions={},this.events=new r.F,this.restoreModel(T),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,i.Z)()}restoreModel(T){for(const R in this)E[R]||!this.hasOwnProperty(R)||T[R]||typeof this[R]!="function"&&typeof this[R]!="symbol"&&delete this[R];for(const R in T)this[R]=T[R];const O=y[this.type];O&&(this.autoMigrateFrom=this.type,this.type=O),(0,n.defaultsDeep)(this,(0,n.cloneDeep)(h)),this.ensureQueryIds()}generateNewKey(){this.key=(0,i.Z)()}ensureQueryIds(){if(this.targets&&(0,n.isArray)(this.targets))for(const T of this.targets)T.refId||(T.refId=(0,f.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(T){this.options=T,this.configRev++,this.events.publish(new m.Wj),this.render()}updateFieldConfig(T){this.fieldConfig=T,this.configRev++,this.events.publish(new m.Wj),this.resendLastResult(),this.render()}getSaveModel(){const T={};for(const O in this)E[O]||!this.hasOwnProperty(O)||(0,n.isEqual)(this[O],h[O])||(T[O]=(0,n.cloneDeep)(this[O]));return this.type==="row"&&this.panels&&this.panels.length>0&&(T.panels=this.panels.map(O=>{if(O.libraryPanel){const{id:R,title:I,libraryPanel:M,gridPos:x}=O;return{id:R,title:I,gridPos:x,libraryPanel:{uid:M.uid,name:M.name}}}return O})),T}setIsViewing(T){this.isViewing=T}updateGridPos(T,O=!0){T.x===this.gridPos.x&&T.y===this.gridPos.y&&T.h===this.gridPos.h&&T.w===this.gridPos.w||(this.gridPos.x=T.x,this.gridPos.y=T.y,this.gridPos.w=T.w,this.gridPos.h=T.h,O&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:T,dashboardTimezone:O,timeData:R,width:I}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:T,timezone:O,timeRange:R.timeRange,timeInfo:R.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(I),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?o.zj.PanelEditor:this.isViewing?o.zj.PanelViewer:o.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new u.U5)}render(){this.hasRefreshed?this.events.publish(new m._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((T,O)=>E[O]||p[O]?T:{...T,[O]:this[O]},{})}restorePanelOptions(T){const O=this.cachedPluginOptions[T];O&&(Object.keys(O.properties).map(R=>{this[R]=O.properties[R]}),this.fieldConfig=(0,g.__)(this.fieldConfig,O.fieldConfig))}applyPluginOptionDefaults(T,O){const R=(0,g.d4)({plugin:T,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:O});this.fieldConfig=R.fieldConfig,this.options=R.options}async pluginLoaded(T){this.plugin=T;const O=C(T);if(this.autoMigrateFrom){const R=s[this.autoMigrateFrom]!=null,I=this.getOptionsToRemember(),M=this.autoMigrateFrom,x=this.type;this.clearPropertiesBeforePluginChange(),this.type=x,this.plugin=T,this.callPanelTypeChangeHandler(T,M,I,R)}if(T.onPanelMigration&&O!==this.pluginVersion){const R=T.onPanelMigration(this);this.options=await R,this.pluginVersion=O}this.applyPluginOptionDefaults(T,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const T in this)p[T]||delete this[T];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,g.aS)(this.fieldConfig.overrides,g._k)}}callPanelTypeChangeHandler(T,O,R,I){if(T.onPanelTypeChanged){const M=I?{angular:R}:R.options;Object.assign(this.options,T.onPanelTypeChanged(this,O,M,this.fieldConfig))}}changePlugin(T){const O=T.meta.id,R=this.getOptionsToRemember(),I=this.fieldConfig,M=this.type,x=this.isAngularPlugin()||!!s[M];this.cachedPluginOptions[M]={properties:R,fieldConfig:I},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(O),this.callPanelTypeChangeHandler(T,M,R,x),this.type=O,this.plugin=T,this.configRev++,this.applyPluginOptionDefaults(T,!0),T.onPanelMigration&&(this.pluginVersion=C(T))}updateQueries(T){const{dataSource:O}=T;this.datasource={uid:O.uid,type:O.type},this.cacheTimeout=T.cacheTimeout,this.queryCachingTTL=T.queryCachingTTL,this.timeFrom=T.timeRange?.from,this.timeShift=T.timeRange?.shift,this.hideTimeOverride=T.timeRange?.hide,this.interval=T.minInterval,this.maxDataPoints=T.maxDataPoints,this.targets=T.queries,this.configRev++,this.events.publish(new m.pO)}addQuery(T){T=T||{refId:"A"},T.refId=(0,f.Hs)(this.targets),this.targets.push(T),this.configRev++}changeQuery(T,O){T.refId=this.targets[O].refId,this.configRev++,this.targets=this.targets.map((R,I)=>I===O?T:R)}getEditClone(){const T=this.getSaveModel(),O=new D(T);O.isEditing=!0,O.plugin=this.plugin;const R=this.getQueryRunner();return O.getQueryRunner().useLastResultFrom(R),O}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:l.default.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new v.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angular?.detected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(T){this.transformations=T,this.resendLastResult(),this.configRev++,this.events.publish(new m.Xw)}setProperty(T,O){this[T]=O,this.configRev++,T==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(T,O,R){const I=this.getQueryRunner().getLastRequest(),M=Object.assign({},this.scopedVars,I?.scopedVars,O);return(0,c.J)().replace(T,M,R)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(T){for(const[O,R]of Object.entries(T.model)){switch(O){case"id":case"gridPos":case"libraryPanel":continue}this[O]=R}this.libraryPanel=T}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function C(b){return b&&b.meta.info.version?b.meta.info.version:l.default.buildInfo.version}function P(b){const T={};return Object.entries(b).filter(([O,R])=>!E[O]&&b.hasOwnProperty(O)&&!(0,n.isEqual)(R,h[O])).forEach(([O,R])=>{T[O]=R}),(0,d.Xh)(T)}},93793:(Q,A,e)=>{"use strict";e.d(A,{$j:()=>m,f4:()=>h,fG:()=>v,lw:()=>E,tM:()=>p});var n=e(69391),a=e(7939),i=e(42876),r=e(48510),o=e(27524),g=e(58838),u=e(62873),c=e(43773),l=e(60490),d=e(89660),f=e(50051);function m(s,y){return async D=>{await(0,n.i)().post("/api/dashboards/import",s),D((0,a.$l)((0,i.AT)("Dashboard Imported",y))),D((0,u.m3)())}}function v(s){return async y=>{await(0,n.i)().delete(`/api/dashboards/uid/${s}`),y((0,u.m3)())}}const E=()=>(s,y)=>{const C=y().dashboard.getModel();C&&(C.destroy(),s((0,c.wX)(C.uid))),(0,d.$t)().stopAutoRefresh(),s((0,f.sG)()),s((0,o.Vl)()),r.H.leave(),(0,l.h4)().setCurrent(void 0)},p=s=>y=>{y((0,g.YT)(s)),(0,d.$t)().refreshTimeModel()},h=s=>y=>{y((0,g.zW)(s)),(0,d.$t)().refreshTimeModel()}},25353:(Q,A,e)=>{"use strict";e.d(A,{f:()=>n.f,r:()=>a.rY});var n=e(40931),a=e(30937)},16356:(Q,A,e)=>{"use strict";e.d(A,{ZQ:()=>_,mV:()=>G,f1:()=>z,$M:()=>k});var n=e(84912),a=e(74011),i=e(93670),r=e(19690),o=e(69391),g=e(85498),u=e(7939),c=e(83599),l=e(42876),d=e(41327),f=e(39357),m=e(34750),v=e(60490),E=e(89660),p=e(18128),h=e(31509),s=e(17878);function y(W){return async Z=>{const H=await d.ae.getFolderByUid(W);return Z((0,s.G3)(H)),Z((0,u.RL)((0,h.B1)(H))),H}}var D=e(48510),C=e(7918),P=e(77378),b=e(42342),T=e(34576),O=e(43773),R=e(99282),I=e(50609),M=e(40931),x=e(21057),L=e(64704);function S(W){const Z={dashboardId:W.id,dashboardName:W.title,dashboardUid:W.uid,folderName:W.meta.folderTitle,eventName:x.ct.DashboardView};(0,L.r_)(Z)}var U=e(50051);async function N(W,Z,H){const X=f.Z.getObject(K);if(X)return z(),X;try{switch(W.routeName){case b.DashboardRoutes.Home:{const ne=(0,p.wc)().getFromCache(b.DashboardRoutes.Home);if(ne)return ne;const se=await d.ae.get("/api/dashboards/home");if(se.redirectUri){const re=n.u.stripBaseFromUrl(se.redirectUri);return r.E1.replace(re),null}return se.meta.canSave=!1,se.meta.canShare=!1,se.meta.canStar=!1,se}case b.DashboardRoutes.Public:return await m.pD.loadDashboard("public",W.urlSlug,W.accessToken);case b.DashboardRoutes.Embedded:if(W.dashboardDto)return W.dashboardDto;case b.DashboardRoutes.Normal:{const Y=await m.pD.loadDashboard(W.urlType,W.urlSlug,W.urlUid);if(Y.meta.folderUid)try{await Z(y(Y.meta.folderUid))}catch(ne){console.warn("Error fetching parent folder",Y.meta.folderUid,"for dashboard",ne)}if(W.fixUrl&&Y.meta.url&&!C.r0.isPlaying){const ne=n.u.stripBaseFromUrl(Y.meta.url),se=r.E1.getLocation().pathname;ne!==se&&(r.E1.replace({...r.E1.getLocation(),pathname:ne}),console.log("not correct url correcting",ne,se))}return Y}case b.DashboardRoutes.New:return W.urlFolderUid&&await Z(y(W.urlFolderUid)),_(W.urlFolderUid,W.panelType);case b.DashboardRoutes.Path:{const Y=W.urlSlug??"";return await m.pD.loadDashboard(b.DashboardRoutes.Path,Y,Y)}default:throw{message:"Unknown route "+W.routeName}}}catch(Y){return(0,o.kW)(Y)&&Y.cancelled||(Z((0,U.jA)({message:"Failed to fetch dashboard",error:Y})),console.error(Y)),null}}const w=(W,Z={})=>(W.forEach(H=>{H.panels?w(H.panels,Z):H.targets&&H.targets.forEach(X=>{X.datasource?.type&&(Z[X.datasource.type]?Z[X.datasource.type].push(X):Z[X.datasource.type]=[X])})}),Z);function G(W){return async(Z,H)=>{Z((0,U.sf)());const X=await N(W,Z,H),Y=X?.dashboard?.version;if(!X)return;Z((0,U.Nv)());let ne;try{ne=new M.f(X.dashboard,X.meta)}catch(fe){Z((0,U.jA)({message:"Failed create dashboard model",error:fe})),console.error(fe);return}const se=H(),re=r.E1.getSearchObject();re.orgId||r.E1.partial({orgId:se.user.orgId},!0);const ge=(0,E.$t)();(0,v.h4)().setCurrent(ne),ge.init(ne);const me=(0,P.mn)(W.urlUid??ne.uid);if(await Z((0,O.LX)(me,ne)),(0,T.Tl)({dashboard:ne,timeSrv:ge}).run({dashboard:ne,range:ge.timeRange()}),(0,R.cp)(H())===me&&H().dashboard.initPhase===b.DashboardInitPhase.Services){try{ne.processRepeats(),re.autofitpanels&&ne.autoFitPanels(window.innerHeight,re.kiosk),W.keybindingSrv.setupDashboardBindings(ne)}catch(fe){fe instanceof Error&&Z((0,u.$l)((0,l.t_)("Dashboard init failed",fe))),console.error(fe)}W.routeName!==b.DashboardRoutes.New?(S(ne),D.H.watch(ne.uid)):D.H.leave(),ne.weekStart!==""?(0,a.Ls)(ne.weekStart):(0,a.Ls)(g.config.bootData.user.weekStart),c.Z.publish(new i.Pl({dashboardId:ne.uid,orgId:se.user.orgId,userId:se.user.user?.id,grafanaVersion:g.config.buildInfo.version,queries:w(ne.panels)})),(0,I.H)(ne,Y),Z((0,U.dS)(ne))}}}function _(W,Z){const H=g.config.featureToggles.emptyDashboardPage?[]:[{type:Z??"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}],X={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{title:"New dashboard",panels:H}};return W&&(X.meta.folderUid=W),X}const K="DASHBOARD_FROM_LS_KEY";function k(W){f.Z.setObject(K,W)}function z(){f.Z.delete(K)}},50051:(Q,A,e)=>{"use strict";e.d(A,{Nv:()=>d,Rd:()=>v,ZP:()=>p,dS:()=>l,jA:()=>c,sG:()=>f,sf:()=>u,tq:()=>m});var n=e(4579),a=e(7205),i=e(42342),r=e(40931);const o={initPhase:i.DashboardInitPhase.NotStarted,getModel:()=>null,initError:null,initialDatasource:void 0},g=(0,n.oM)({name:"dashboard",initialState:o,reducers:{dashboardInitFetching:h=>{h.initPhase=i.DashboardInitPhase.Fetching},dashboardInitServices:h=>{h.initPhase=i.DashboardInitPhase.Services},dashboardInitCompleted:(h,s)=>{h.getModel=()=>s.payload,h.initPhase=i.DashboardInitPhase.Completed},dashboardInitFailed:(h,s)=>{h.initPhase=i.DashboardInitPhase.Failed,h.initError=s.payload,h.getModel=()=>new r.f({...a.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:h=>{h.initPhase=i.DashboardInitPhase.NotStarted,h.initError=null,h.getModel=()=>null},addPanel:(h,s)=>{},setInitialDatasource:(h,s)=>{h.initialDatasource=s.payload}}}),{dashboardInitFetching:u,dashboardInitFailed:c,dashboardInitCompleted:l,dashboardInitServices:d,cleanUpDashboard:f,addPanel:m,setInitialDatasource:v}=g.actions,p={dashboard:g.reducer}},63711:(Q,A,e)=>{"use strict";e.d(A,{$0:()=>y,$N:()=>h,AI:()=>l,AX:()=>s,Dh:()=>v,LU:()=>c,L_:()=>d,RB:()=>m,rm:()=>f,uZ:()=>E,yQ:()=>D});var n=e(69781),a=e.n(n),i=e(19690),r=e(83811),o=e(21279),g=e(39357),u=e(90172);function c(P,b){const T={type:"timeseries",title:"Panel Title",gridPos:(0,u.lg)(P),datasource:b?{uid:b}:null,isNew:!0};return P.addPanel(T),T.id}function l(P,b){const T={type:b,title:"Widget title",gridPos:(0,u.lg)(P),datasource:null,isNew:!0};return P.addPanel(T),T.id}function d(P){const b={type:"row",title:"Row title",gridPos:{x:0,y:0}};P.addPanel(b)}function f(){i.E1.push("/dashboard/import")}function m(P){const b={type:"add-library-panel",gridPos:(0,u.lg)(P)};P.addPanel(b)}function v(P,b){if(!b)return;const T=(0,u.lg)(P),O={type:b.id,title:"Panel Title",gridPos:{x:T.x,y:T.y,w:b.defaults.gridPos.w,h:b.defaults.gridPos.h}};b.defaults&&((0,n.defaults)(O,b.defaults),O.title=b.defaults.title,g.Z.delete(o.zF)),P.addPanel(O)}function E(){const P=(0,n.chain)(r.default.panels).filter({hideFromList:!1}).map(T=>T).value(),b=g.Z.get(o.zF);if(b){const T=JSON.parse(b),O=(0,n.find)(P,{id:T.type});if(O){const R=(0,n.cloneDeep)(O);return R.name=T.title,R.sort=-1,{...R,defaults:{...T}}}}}const p="grafana.dashboards.panelEdit.lastUsedDatasource";function h(P){if(g.Z.exists(p)){const b=g.Z.getObject(p);if(b?.dashboardUid===P)return b}}function s(P){if(!g.Z.exists(p))return;const T=g.Z.getObject(p)?.datasourceUid??"";C(P,T)}function y(P){g.Z.setObject(p,{dashboardUid:P,datasourceUid:""})}function D(P,b){const T=h(P);if(!T)C(P,b);else{const O=T?.dashboardUid??"";C(O,b)}}function C(P,b){g.Z.setObject(p,{dashboardUid:P,datasourceUid:b})}},90172:(Q,A,e)=>{"use strict";e.d(A,{Kq:()=>T,Po:()=>b,W1:()=>M,WJ:()=>D,bY:()=>P,jN:()=>C,lg:()=>S,oe:()=>O,qw:()=>I});var n=e(69781),a=e.n(n),i=e(56821),r=e(17201),o=e(74011),g=e(89026),u=e(61129),c=e(83599),l=e(83811),d=e(21279),f=e(39357),m=e(64878),v=e(30937),E=e(96870),p=e(37061),h=e(2507),s=e(86573),y=e(74642);const D=(U,N,w)=>{if(w!==!1){const G=N.alert&&!l.default.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,_=N.alert?"YES":void 0;c.Z.publish(new y.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:G,icon:"trash-alt",confirmText:_,yesText:"Remove",onConfirm:()=>D(U,N,!1)}));return}U.removePanel(N),(0,s.WI)((0,h.qj)(N.key))},C=(U,N)=>{U.duplicatePanel(N)},P=U=>{let N=U;U instanceof v.rY&&(N=U.getSaveModel()),f.Z.set(d.zF,JSON.stringify(N)),c.Z.emit(i.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},b=(U,N)=>{c.Z.publish(new y.Dn({component:m.ShareModal,props:{dashboard:U,panel:N}}))},T=(U,N)=>{c.Z.publish(new y.Dn({component:E.c,props:{panel:N,initialFolderUid:U.meta.folderUid,isOpen:!0}}))},O=U=>{c.Z.publish(new y.Dn({component:p.i,props:{onConfirm:()=>U.unlinkLibraryPanel(),isOpen:!0}}))},R=U=>{U.refresh()},I=U=>{const N={...U.options};N.legend.showLegend===!0?N.legend.showLegend=!1:N.legend.showLegend=!0,U.updateOptions(N)};function M(U,N){const w={timeInfo:"",timeRange:N};if(U.timeFrom){const G=(0,u.J)().replace(U.timeFrom,U.scopedVars),_=r.describeTextRange(G);if(_.invalid)return w.timeInfo="invalid time override",w;if((0,n.isString)(N.raw.from)){const K=(0,o.C_)(N.from).tz(),k=(0,o.C_)(N.to).tz(),z=g.parse(_.from,void 0,K);w.timeInfo=_.display,w.timeRange={from:z,to:g.parse(_.to,void 0,k),raw:{from:_.from,to:_.to}}}}if(U.timeShift){const G=(0,u.J)().replace(U.timeShift,U.scopedVars);if(r.describeTextRange(G).invalid)return w.timeInfo="invalid timeshift",w;const K="-"+G;w.timeInfo+=" timeshift "+K;const k=g.parseDateMath(K,w.timeRange.from,!1),z=g.parseDateMath(K,w.timeRange.to,!0);w.timeRange={from:k,to:z,raw:{from:k,to:z}}}return U.hideTimeOverride&&(w.timeInfo=""),w}function x(U){const w=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return U.maxDataPoints?U.maxDataPoints:Math.ceil(w*(U.gridPos.w/24))}function L(U,N){const w=U.plugin&&U.plugin.noPadding?0:config.theme.panelPadding*2,G=U.hasTitle()?config.theme.panelHeaderHeight:0;return N-G-w-PANEL_BORDER}function S(U){for(const w of U.panelIterator())w.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},79832:(Q,A,e)=>{"use strict";e.d(A,{O:()=>i});var n=e(74011),a=e(89026);const i=(r,o)=>{const g={from:(0,n.v9)(r.from)?(0,n.CQ)(r.from):r.from,to:(0,n.v9)(r.to)?(0,n.CQ)(r.to):r.to},u=o?o.getTimezone():void 0;return{from:a.parse(g.from,!1,u,o?.fiscalYearStartMonth),to:a.parse(g.to,!0,u,o?.fiscalYearStartMonth),raw:g}}},50609:(Q,A,e)=>{"use strict";e.d(A,{H:()=>a});var n=e(92762);function a(o,g){const u=o.templating.list.map(l=>l.type).reduce((l,d)=>(l[i(d)]=1+l[i(d)]||1,l),{}),c=o.panels.map(l=>l.type).reduce((l,d)=>(l[r(d)]=1+l[r(d)]||1,l),{});n.a.dashboardInitialized({uid:o.uid,title:o.title,theme:o.style,schemaVersion:o.schemaVersion,version_before_migration:g,panels_count:o.panels.length,...c,...u,settings_nowdelay:o.timepicker.nowDelay,settings_livenow:!!o.liveNow})}const i=o=>`variable_type_${o}_count`,r=o=>`panel_type_${o}_count`},30253:(Q,A,e)=>{"use strict";e.d(A,{DK:()=>g,eM:()=>o,dg:()=>u});var n=e(71156),a=e(98147);function i(c){const l=new Set;return Object.keys(c).forEach(d=>{c[d].forEach(f=>{l.add(f)})}),l}function r(c){const l=Array.from(i(c));return l.length===1?l[0]:`${l.slice(0,-1).join(", ")} or ${l.slice(-1)}`}function o(c){return new n.y(l=>{let d=0;Promise.all([e.e(3758),e.e(5191)]).then(e.bind(e,33758)).then(f=>{c.forEach(m=>{const v=new FileReader;v.readAsArrayBuffer(m),v.onload=()=>{const E=v.result;if(E&&E instanceof ArrayBuffer){if(m.type==="application/json"){const p=new TextDecoder("utf-8"),h=JSON.parse(p.decode(E));l.next({dataFrames:[(0,a.g0)(h)],file:m})}else l.next({dataFrames:f.readSpreadsheet(E),file:m});++d>=c.length&&l.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const g={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},u=5e5},84809:(Q,A,e)=>{"use strict";e.d(A,{P:()=>u});var n=e(31733),a=e(51343),i=e(75923),r=e(53166),o=e(24477),g=e(42342);function u({variant:c,onClick:l}){const d=i.Vt.hasPermission(g.AccessControlAction.DataSourcesCreate),f=o.Z.DataSourcesNew;return n.createElement(a.Qj,{variant:c||"primary",href:f,disabled:!d,tooltip:d?void 0:"You do not have permission to configure new data sources",onClick:l,target:"_blank"},n.createElement(r.cC,{i18nKey:"data-source-picker.add-new-data-source"},"Configure a new data source"))}},27103:(Q,A,e)=>{"use strict";e.d(A,{F:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(96305),o=e(60196);function g({ds:c,onClick:l,selected:d,description:f,...m}){const v=(0,i.l4)(),E=u(v,c.meta.builtIn);return a.createElement(r.Z,{key:c.uid,onClick:l,className:(0,n.cx)(E.card,d?E.selected:void 0),...m},a.createElement(r.Z.Heading,{className:E.heading},a.createElement("div",{className:E.headingContent},a.createElement("span",{className:E.name},c.name," ",c.isDefault?a.createElement(o.P,{tags:["default"]}):null),a.createElement("small",{className:E.type},f||c.meta.name))),a.createElement(r.Z.Figure,{className:E.logo},a.createElement("img",{src:c.meta.info.logos.small,alt:`${c.meta.name} Logo`})))}function u(c,l=!1){return{card:(0,n.css)`
      cursor: pointer;
      background-color: ${c.colors.background.primary};
      border-bottom: 1px solid ${c.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${c.spacing(1)};
    `,heading:(0,n.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,n.css)`
      color: ${c.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,n.css)`
      width: 32px;
      height: 32px;
      padding: ${c.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
        filter: invert(${l&&c.isLight?1:0});
      }
    `,name:(0,n.css)`
      color: ${c.colors.text.primary};
      display: flex;
      gap: ${c.spacing(2)};
    `,type:(0,n.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,n.css)`
      margin: 0 ${c.spacing(1)};
      color: ${c.colors.border.weak};
    `,selected:(0,n.css)`
      background-color: ${c.colors.background.secondary};
    `,meta:(0,n.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}},19251:(Q,A,e)=>{"use strict";e.d(A,{K:()=>d});var n=e(76932),a=e(31733),i=e(61129),r=e(76067),o=e(53166),g=e(29085),u=e(84809),c=e(27103),l=e(66051);function d(p){const h=(0,a.useRef)(null),[s,y]=(0,g.wv)({keyboardEvents:p.keyboardEvents,containerRef:h}),D=(0,r.l4)(),C=E(D,y),{className:P,current:b,onChange:T,enableKeyboardNavigation:O,onClickEmptyStateCTA:R}=p,I=(0,g.Hq)({alerting:p.alerting,annotations:p.annotations,dashboard:p.dashboard,logs:p.logs,metrics:p.metrics,mixed:p.mixed,pluginId:p.pluginId,tracing:p.tracing,type:p.type,variables:p.variables}),[M,x]=(0,g.BM)(),L=p.filter?I.filter(p.filter):I;return a.createElement("div",{ref:h,className:(0,n.cx)(P,C.container),"data-testid":"data-sources-list"},L.length===0&&a.createElement(f,{className:C.emptyState,onClickCTA:R}),L.sort((0,l.Tw)(b,M,v())).map(S=>a.createElement(c.F,{"data-testid":"data-source-card",key:S.uid,ds:S,onClick:()=>{x(S),T(S)},selected:(0,l.TX)(S,b),...O?s:{}})))}function f({className:p,onClickCTA:h}){const s=(0,r.wW)(m);return a.createElement("div",{className:(0,n.cx)(p,s.container)},a.createElement("p",{className:s.message},a.createElement(o.cC,{i18nKey:"data-source-picker.list.no-data-source-message"},"No data sources found")),a.createElement(u.P,{onClick:h}))}function m(p){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,n.css)`
      margin-bottom: ${p.spacing(3)};
    `}}function v(){return(0,i.J)().getVariables().filter(h=>h.type==="datasource").map(h=>`\${${h.id}}`)}function E(p,h){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      ${h} {
        background-color: ${p.colors.background.secondary};
      }
    `,emptyState:(0,n.css)`
      height: 100%;
      flex: 1;
    `}}},81193:(Q,A,e)=>{"use strict";e.d(A,{a:()=>O});var n=e(76932),a=e(69781),i=e(31733),r=e(64704),o=e(85498),g=e(76067),u=e(5572),c=e(64516),l=e(49311),d=e(37758),f=e(54679),m=e(53166),v=e(30253),E=e(24111),p=e(29085),h=e(84809),s=e(27103),y=e(66051);const D={grafana:(0,m.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data"),"-- Mixed --":(0,m.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources"),"-- Dashboard --":(0,m.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations")};function C({className:I,current:M,onChange:x,tracing:L,dashboard:S,mixed:U,metrics:N,type:w,annotations:G,variables:_,alerting:K,pluginId:k,logs:z,filter:W}){const H=(0,p.Hq)({tracing:L,dashboard:S,mixed:U,metrics:N,type:w,annotations:G,variables:_,alerting:K,pluginId:k,logs:z}).filter(X=>(W?W?.(X):!0)&&!!X.meta.builtIn);return i.createElement("div",{className:I,"data-testid":"built-in-data-sources-list"},H.map(X=>i.createElement(s.F,{key:X.uid,ds:X,description:D[X.uid],selected:(0,y.TX)(X,M),onClick:()=>x(X)})))}var P=e(19251);const b="dashboards_dspickermodal_clicked",T={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function O({tracing:I,dashboard:M,mixed:x,metrics:L,type:S,annotations:U,variables:N,alerting:w,pluginId:G,logs:_,uploadFile:K,filter:k,onChange:z,current:W,onDismiss:Z,reportedInteractionFrom:H}){const X=(0,g.wW)(R),[Y,ne]=(0,i.useState)(""),se=H||"modal",re=()=>{Z(),(0,r.ff)(b,{item:T.DISMISS,src:se})},ge=ve=>{z(ve),(0,r.ff)(b,{item:T.SELECT_DS,ds_type:ve.type,src:se})},q=i.useMemo(()=>(0,a.once)(()=>{(0,r.ff)(b,{item:"search",src:se})}),[se]),me=(0,p.wP)("-- Grafana --"),oe=(0,E.k)((ve,pe)=>{me&&(z(me,[ve]),(0,r.ff)(b,{item:T.UPLOAD_FILE,src:se}),pe.length<1&&Z())}),fe=({className:ve})=>i.createElement(C,{className:ve,onChange:ge,current:W,filter:k,variables:N,tracing:I,metrics:L,type:S,annotations:U,alerting:w,pluginId:G,logs:_,dashboard:M,mixed:x});return i.createElement(u.u,{title:(0,m.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:X.modal,contentClassName:X.modalContent,onClickBackdrop:re,onDismiss:re},i.createElement("div",{className:X.leftColumn},i.createElement(c.I,{type:"search",autoFocus:!0,className:X.searchInput,value:Y,prefix:i.createElement(l.J,{name:"search"}),placeholder:(0,m.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:ve=>{ne(ve.currentTarget.value),q()}}),i.createElement(d.$,null,i.createElement(P.K,{onChange:ge,current:W,onClickEmptyStateCTA:()=>(0,r.ff)(b,{item:T.CONFIG_NEW_DS_EMPTY_STATE,src:se}),filter:ve=>(k?k?.(ve):!0)&&(0,y.qW)(ve,Y)&&!ve.meta.builtIn,variables:N,tracing:I,metrics:L,type:S,annotations:U,alerting:w,pluginId:G,logs:_,dashboard:M,mixed:x}),i.createElement(fe,{className:X.appendBuiltInDataSourcesList}))),i.createElement("div",{className:X.rightColumn},i.createElement("div",{className:X.builtInDataSources},i.createElement(d.$,{className:X.builtInDataSourcesList},i.createElement(fe,null)),K&&o.config.featureToggles.editPanelCSVDragAndDrop&&i.createElement(f.Yo,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:v.dg,multiple:!1,accept:v.DK,onDrop:oe}},i.createElement(f.A_,null))),i.createElement("div",{className:X.newDSSection},i.createElement("span",{className:X.newDSDescription},i.createElement(m.cC,{i18nKey:"data-source-picker.modal.configure-new-data-source"},"Open a new tab and configure a data source")),i.createElement(h.P,{variant:"secondary",onClick:()=>{(0,r.ff)(b,{item:T.CONFIG_NEW_DS,src:se}),Z()}}))))}function R(I){return{modal:(0,n.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${I.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,n.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${I.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${I.spacing(4)};
      border-right: 1px solid ${I.colors.border.weak};

      ${I.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${I.spacing(4)};

      ${I.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,n.css)`
      flex: 1 1;
      margin-bottom: ${I.spacing(4)};

      ${I.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,n.css)`
      ${I.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${I.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,n.css)`
      ${I.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,n.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,n.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${I.colors.text.secondary};
    `,searchInput:(0,n.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${I.spacing(1)};
    `}}},79228:(Q,A,e)=>{"use strict";e.d(A,{q:()=>H});var n=e(31733),a=e(27520),i=e(83811),r=e(76932),o=e(16749),g=e(57353),u=e(68420),c=e(48947),l=e(21568),d=e(64704),f=e(76067),m=e(64516),v=e(49311),E=e(25108),p=e(37758),h=e(58947),s=e(51343),y=e(53166),D=e(39793),C=e(71667),P=e(29085),b=e(19251);function T(X){const{dataSource:Y}=X,ne=(0,f.l4)(),se=R(ne,Y?.meta.builtIn);return Y?n.createElement("img",{className:se.pickerDSLogo,alt:`${Y.meta.name} logo`,src:Y.meta.info.logos.small}):O()}function O(){const X=(0,f.wW)(R);return n.createElement("div",{className:X.pickerDSLogo})}function R(X,Y=!1){return{pickerDSLogo:(0,r.css)`
      height: 20px;
      width: 20px;
      filter: invert(${Y&&X.isLight?1:0});
    `}}var I=e(81193),M=e(2770);const x=20,L=200,S={name:"maxSize",enabled:!0,phase:"main",requires:["offset","preventOverflow","flip"],fn({state:X,name:Y,options:ne}){const se=(0,M.Z)(X,ne),{x:re,y:ge}=X.modifiersData.preventOverflow||{x:0,y:0},{width:q,height:me}=X.rects.popper,{width:oe}=X.rects.reference,[fe]=X.placement.split("-"),ve=fe==="left"?"left":"right",pe=fe==="top"?"top":"bottom";X.modifiersData[Y]={maxWidth:q-se[ve]-re,maxHeight:me-se[pe]-ge,minWidth:oe}}},U={name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn({state:X}){const{maxHeight:Y,maxWidth:ne,minWidth:se}=X.modifiersData.maxSize;X.styles.popper.maxHeight??=`${Y-x}px`,X.styles.popper.minHeight??=`${L}px`,X.styles.popper.maxWidth??=ne,X.styles.popper.minWidth??=se}};var N=e(66051);const w="dashboards_dspicker_clicked",G={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function _(X){const{current:Y,onChange:ne,hideTextValue:se=!1,width:re,inputId:ge,noDefault:q=!1,disabled:me=!1,placeholder:oe="Select data source",...fe}=X,ve=(0,f.wW)(K,X),[pe,Me]=(0,n.useState)(!1),[Pe,Ee]=(0,n.useState)(!1),[he,Le]=(0,n.useState)(""),{onKeyDown:ke,keyboardEvents:ot}=(0,D.A)(),it=(0,n.useRef)(null),[ce,le]=(0,n.useState)(),[Re,Ae]=(0,n.useState)(),[Oe,$e]=(0,n.useState)(),Ye=(0,P.wP)(Y),Ne=(0,P.wP)("-- Grafana --"),je=!Y&&q?void 0:Ye,ut=he&&pe?n.createElement(O,null):n.createElement(T,{dataSource:je}),Fe=(0,c.D)(ce,Re,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}},S,U]}),Te=(0,n.useCallback)(()=>{Le(""),Me(!1),ce?.focus()},[Me,ce]),{overlayProps:Ve,underlayProps:tt}=(0,u.Ir)({onClose:Te,isDismissable:!0,isOpen:pe,shouldCloseOnInteractOutside:De=>ce?!ce.isSameNode(De):!1},it),{dialogProps:ae}=(0,o.R)({"aria-label":"Opened data source picker list"},it);function J(){(0,d.ff)(w,{item:G.OPEN_DROPDOWN}),Me(!0),ce?.focus()}function te(){Ne&&ne(Ne,[C.ip])}function de(De){De.key==="Tab"&&!De.shiftKey&&pe&&(De.preventDefault(),Oe?.focus()),De.key==="Tab"&&De.shiftKey&&pe&&Te(),ke(De)}function be(De){De.shiftKey?(De.preventDefault(),ce?.focus()):Te()}return(0,n.useEffect)(()=>{const De=ot.subscribe({next:Ue=>{switch(Ue?.code){case"ArrowDown":J(),Ue.preventDefault();break;case"ArrowUp":J(),Ue.preventDefault();break;case"Escape":Te(),Ue.preventDefault();break}}});return()=>De.unsubscribe()}),n.createElement("div",{className:ve.container,"data-testid":l.wl.components.DataSourcePicker.container},n.createElement("div",{className:ve.trigger,onClick:J},n.createElement(m.I,{id:ge||"data-source-picker",className:Pe?void 0:ve.input,"data-testid":l.wl.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",autoComplete:"off",prefix:je?ut:void 0,suffix:n.createElement(v.J,{name:pe?"search":"angle-down"}),placeholder:se?"":(0,N.Ve)(je)||oe,onFocus:()=>{Ee(!0)},onBlur:()=>{Ee(!1)},onKeyDown:de,value:he,onChange:De=>{J(),Le(De.currentTarget.value)},ref:le,disabled:me})),pe?n.createElement(E.h_,null,n.createElement("div",{...tt}),n.createElement("div",{ref:it,...Ve,...ae},n.createElement(k,{...fe,...Fe.attributes.popper,style:Fe.styles.popper,ref:Ae,footerRef:$e,current:je,filterTerm:he,keyboardEvents:ot,onChange:(De,Ue)=>{Te(),De.uid!==je?.uid&&(ne(De,Ue),(0,d.ff)(w,{item:G.SELECT_DS,ds_type:De.type}))},onClose:Te,onClickAddCSV:te,onDismiss:Te,onNavigateOutsiteFooter:be}))):null)}function K(X,Y){return{container:(0,r.css)`
      position: relative;
      cursor: ${Y.disabled?"not-allowed":"pointer"};
      width: ${X.spacing(Y.width||"auto")};
    `,trigger:(0,r.css)`
      cursor: pointer;
      ${Y.disabled&&"pointer-events: none;"}
    `,input:(0,r.css)`
      input::placeholder {
        color: ${Y.disabled?X.colors.action.disabledText:X.colors.text.primary};
      }
    `}}const k=n.forwardRef((X,Y)=>{const{filterTerm:ne,onChange:se,onClose:re,onClickAddCSV:ge,current:q,filter:me}=X,oe=(0,n.useCallback)(pe=>{se(pe)},[se]),fe=(0,n.useCallback)(()=>{ge?.(),re(),(0,d.ff)(w,{item:G.ADD_FILE})},[ge,re]),ve=(0,f.wW)(z);return n.createElement("div",{style:X.style,ref:Y,className:ve.container},n.createElement(p.$,null,n.createElement(b.K,{...X,enableKeyboardNavigation:!0,className:ve.dataSourceList,current:q,onChange:oe,filter:pe=>(me?me?.(pe):!0)&&(0,N.qW)(pe,ne),onClickEmptyStateCTA:()=>(0,d.ff)(w,{item:G.CONFIG_NEW_DS_EMPTY_STATE})})),n.createElement(g.MT,null,n.createElement(W,{...X,onClickAddCSV:fe,onChange:oe,onNavigateOutsiteFooter:X.onNavigateOutsiteFooter})))});k.displayName="PickerContent";function z(X){return{container:(0,r.css)`
      display: flex;
      flex-direction: column;
      background: ${X.colors.background.primary};
      box-shadow: ${X.shadows.z3};
    `,picker:(0,r.css)`
      background: ${X.colors.background.secondary};
    `,dataSourceList:(0,r.css)`
      flex: 1;
    `,footer:(0,r.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${X.spacing(1.5)};
      border-top: 1px solid ${X.colors.border.weak};
      background-color: ${X.colors.background.secondary};
    `}}function W({onClose:X,onChange:Y,onClickAddCSV:ne,...se}){const re=(0,f.wW)(Z),ge=se.uploadFile&&i.default.featureToggles.editPanelCSVDragAndDrop,q=oe=>{oe.key==="Tab"&&se.onNavigateOutsiteFooter(oe)},me=oe=>{oe.key==="Tab"&&oe.shiftKey&&se.onNavigateOutsiteFooter(oe)};return n.createElement("div",{className:re.footer},n.createElement(h.JY,null,({showModal:oe,hideModal:fe})=>n.createElement(s.zx,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{X(),oe(I.a,{reportedInteractionFrom:"ds_picker",tracing:se.tracing,dashboard:se.dashboard,mixed:se.mixed,metrics:se.metrics,type:se.type,annotations:se.annotations,variables:se.variables,alerting:se.alerting,pluginId:se.pluginId,logs:se.logs,filter:se.filter,uploadFile:se.uploadFile,current:se.current,onDismiss:fe,onChange:(ve,pe)=>{Y(ve,pe),fe()}}),(0,d.ff)(w,{item:G.OPEN_ADVANCED_DS_PICKER})},ref:se.footerRef,onKeyDown:ge?me:q},n.createElement(y.cC,{i18nKey:"data-source-picker.open-advanced-button"},"Open advanced data source picker"),n.createElement(v.J,{name:"arrow-right"}))),ge&&n.createElement(s.zx,{variant:"secondary",size:"sm",onClick:ne,onKeyDown:q},"Add csv or spreadsheet"))}function Z(X){return{footer:(0,r.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${X.spacing(1.5)};
      border-top: 1px solid ${X.colors.border.weak};
      background-color: ${X.colors.background.secondary};
    `}}function H(X){return i.config.featureToggles.advancedDataSourcePicker?n.createElement(_,{...X}):n.createElement(a.q,{...X})}},66051:(Q,A,e)=>{"use strict";e.d(A,{TX:()=>r,Tw:()=>g,Ve:()=>o,qW:()=>u,rJ:()=>c});var n=e(60490),a=e(63711),i=e(24608);function r(l,d){return!l||!d?!1:typeof d=="string"?l.uid===d:l.uid===d.uid}function o(l){if(l){if(typeof l=="string")return`${l} - not found`;if("name"in l)return l.name;if(l.uid)return`${l.uid} - not found`}}function g(l,d,f){return(v,E)=>{const p=v.name.toUpperCase(),h=E.name.toUpperCase();if(l&&r(v,l))return-1;if(l&&r(E,l))return 1;const s=d.indexOf(v.uid),y=d.indexOf(E.uid);if(s>-1&&s>y)return-1;if(y>-1&&y>s)return 1;const D=f.includes(v.uid),C=f.includes(E.uid);return D&&!C?-1:C&&!D||v.meta.builtIn&&!E.meta.builtIn?1:E.meta.builtIn&&!v.meta.builtIn||p<h?-1:1}}function u(l,d=""){return l.name.toLowerCase().includes(d.toLowerCase())}function c(l){if(!l.uid)return;const d=(0,n.h4)().getCurrent()?.uid??"";if(l.uid===i.D)return(0,a.$0)(d);(0,a.yQ)(d,l.uid)}},53812:(Q,A,e)=>{"use strict";e.d(A,{n:()=>n});const n={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},29085:(Q,A,e)=>{"use strict";e.d(A,{BM:()=>o,Hq:()=>g,wP:()=>u,wv:()=>c});var n=e(31733),a=e(50370),i=e(66261);const r="grafana.features.datasources.components.picker.DataSourceDropDown.history";function o(){const[l=[],d]=(0,a.Z)(r,[]),f=(0,n.useCallback)(m=>{m.meta.builtIn||(l.includes(m.uid)?(l.splice(l.findIndex(v=>m.uid===v),1),d([...l,m.uid])):d([...l,m.uid].slice(1,6)))},[l,d]);return[l,f]}function g(l){return(0,i.F)().getList(l)}function u(l){const d=(0,i.F)();return d.getInstanceSettings(l)}function c(l){const{keyboardEvents:d,containerRef:f}=l,m=(0,n.useRef)(0),v="data-role",E="keyboardSelectableItem",p={[v]:E},h=`[${v}="${E}"`,s="data-selectedItem",y=`[${s}="true"]`,D=(0,n.useCallback)(P=>{const b=f?.current?.querySelectorAll(h),T=b?.item(P%b?.length);b?.forEach(O=>O.setAttribute(s,"false")),T&&(T.scrollIntoView({block:"center"}),T.setAttribute(s,"true"))},[f,h]),C=(0,n.useCallback)(()=>{f?.current?.querySelector(y)?.querySelector("button")?.click()},[f,y]);return(0,n.useEffect)(()=>{if(!d)return;const P=d.subscribe({next:b=>{switch(b?.code){case"ArrowDown":{D(++m.current),b.preventDefault();break}case"ArrowUp":m.current=m.current>0?m.current-1:m.current,D(m.current),b.preventDefault();break;case"Enter":C();break}}});return()=>P.unsubscribe()},[d,D,C]),(0,n.useEffect)(()=>{const P=new MutationObserver(b=>{b.some(O=>O.addedNodes&&O.addedNodes.length>0||O.removedNodes&&O.removedNodes.length>0)&&D(0)});return f.current&&P.observe(f.current,{childList:!0}),()=>{P.disconnect()}},[f,h,D]),[p,y]}},41982:(Q,A,e)=>{"use strict";e.d(A,{J_:()=>ne,F5:()=>ge,M9:()=>W,Kj:()=>se,bZ:()=>H,kY:()=>Z,oe:()=>re});var n=e(93670),a=e(84912),i=e(65821),r=e(69391),o=e(85498),g=e(19690),u=e(7939),c=e(75923),l=e(41327),d=e(24477),f=e(97001),m=e(97068),v=e(8913),E=e(42342),p=e(71892),h=e(10704);const s=async()=>await(0,l.i)().get("/api/datasources"),y=async q=>{const me=await(0,p.n)((0,l.i)().fetch({method:"GET",url:`/api/datasources/${q}`,params:(0,h.y)(),showErrorAlert:!1}));if(me.ok)return me.data;throw Error(`Could not find data source by ID: "${q}"`)},D=async q=>{const me=await(0,p.n)((0,l.i)().fetch({method:"GET",url:`/api/datasources/uid/${q}`,params:(0,h.y)(),showErrorAlert:!1}));if(me.ok)return me.data;throw Error(`Could not find data source by UID: "${q}"`)},C=async q=>{try{return await D(q)}catch{console.log(`Failed to lookup data source using UID "${q}"`)}try{return await y(q)}catch{console.log(`Failed to lookup data source using ID "${q}"`)}throw Error("Could not find data source")},P=q=>(0,l.i)().post("/api/datasources",q),b=()=>(0,l.i)().get("/api/plugins",{enabled:1,type:"datasource"}),T=q=>(0,l.i)().put(`/api/datasources/uid/${q.uid}`,q,{showErrorAlert:!1,showSuccessAlert:!1}),O=q=>(0,l.i)().delete(`/api/datasources/uid/${q}`);var R=e(53812),I=e(77758),M=e(59889),x=e(28298);function L(q){const me=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(pe=>pe),oe={},fe={},ve=U();for(const pe of me)oe[pe.id]=pe;for(const pe of q){const Me=ve.find(Ee=>Ee.id===pe.id);if((pe.enterprise||Me)&&(pe.category="enterprise",pe.unlicensed=!(0,x.v)("enterprise.plugins"),pe.info.links=Me?.info?.links||pe.info.links),pe.info.links)for(const Ee of pe.info.links)Ee.name="Learn more";(me.find(Ee=>Ee.id===pe.category)||oe.other).plugins.push(pe),fe[pe.id]=pe}for(const pe of me){if(pe.id==="cloud"&&pe.plugins.push(N()),pe.id==="enterprise")for(const Me of ve)fe[Me.id]||pe.plugins.push(Me);S(pe.plugins)}return me.filter(pe=>pe.plugins.length>0)}function S(q){const me={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};q.sort((oe,fe)=>{const ve=me[oe.id]||0,pe=me[fe.id]||0;return ve>pe?-1:ve<pe||oe.name>fe.name?1:-1})}function U(){return[w({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),w({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),w({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),w({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),w({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),w({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),w({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),w({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),w({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),w({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),w({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),w({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),w({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),w({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),w({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),w({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),w({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"}),w({id:"grafana-sumologic-datasource",description:"SumoLogic integration and datasource",name:"SumoLogic",imgUrl:"public/img/plugins/sumo.svg"})]}function N(){return{id:"gcloud",name:"Grafana Cloud",type:M.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function w(q){return{id:q.id,name:q.name,type:M.zV.datasource,module:"phantom",baseUrl:"",info:{description:q.description,logos:{small:q.imgUrl,large:q.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+q.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var G=e(45246),_=e(72975),K=e(92329);const k=q=>{let me,oe;return q.error&&q.error instanceof i.ZA?(me=q.error.message,oe=q.error.details):(0,r.kW)(q)?me=q.data.message??`HTTP error ${q.statusText}`:q instanceof Error&&(me=q.message),{message:me,details:oe}},z=q=>{const{details:me,message:oe,status:fe}=q;return{status:fe,message:oe,details:me}},W=(q,me={loadDataSource:X,loadDataSourceMeta:Y,getDataSource:K.f6,getDataSourceMeta:K.G4,importDataSourcePlugin:v.nL})=>async(oe,fe)=>{if(!q){oe((0,_.CT)(new Error("Invalid UID")));return}try{const ve=await oe(me.loadDataSource(q));await oe(me.loadDataSourceMeta(ve));const pe=me.getDataSource(fe().dataSources,q),Me=me.getDataSourceMeta(fe().dataSources,pe.type),Pe=await me.importDataSourcePlugin(Me);oe((0,_.iZ)(Pe))}catch(ve){ve instanceof Error&&oe((0,_.CT)(ve))}},Z=(q,me=R.n.Edit,oe={getDatasourceSrv:f.ak,getBackendSrv:l.i})=>async(fe,ve)=>{const pe=await oe.getDatasourceSrv().get(q),Me=me.replace(/:uid/gi,q);pe.testDatasource&&(fe((0,_.j_)()),oe.getBackendSrv().withNoBackendCache(async()=>{try{const Pe=await pe.testDatasource(),Ee=z({...Pe,details:{...Pe.details}});fe((0,_.ng)(Ee)),(0,I.Rw)({grafana_version:o.config.buildInfo.version,plugin_id:pe.type,datasource_uid:pe.uid,success:!0,path:Me}),c.h$.publish(new n.U6)}catch(Pe){const Ee=k(Pe);fe((0,_.Aq)({...Ee})),(0,I.Rw)({grafana_version:o.config.buildInfo.version,plugin_id:pe.type,datasource_uid:pe.uid,success:!1,path:Me}),c.h$.publish(new n._m)}}))};function H(){return async q=>{if(!c.Vt.hasPermission(E.AccessControlAction.DataSourcesRead))return;q((0,_.MP)());const me=await s();q((0,_.be)(me))}}function X(q){return async me=>{let oe=await C(q);return q!==oe.uid&&(window.location.href=a.u.assureBaseUrl(`/datasources/edit/${oe.uid}`),oe={}),me((0,_.rl)(oe)),oe}}function Y(q){return async me=>{const oe=await(0,m.a)(q.type),fe=await(0,v.nL)(oe),ve=fe.DataSourceClass.prototype instanceof i.CK,pe={...oe,isBackend:oe.backend||ve};me((0,_.jS)(pe)),fe.meta=pe,me((0,u.RL)((0,G.B1)(q,fe)))}}function ne(q,me=R.n.Edit){return async()=>{const oe={type:q.id,access:"proxy"},fe=await P(oe),ve=me.replace(/:uid/gi,fe.datasource.uid);await(0,f.ak)().reload(),await c.Vt.fetchUserPermissions(),(0,I.Er)({grafana_version:o.config.buildInfo.version,plugin_id:q.id,datasource_uid:fe.datasource.uid,plugin_version:fe.meta?.info?.version,path:ve}),g.E1.push(ve)}}function se(){return async q=>{q((0,_.Ww)());const me=await b(),oe=L(me);q((0,_.wZ)({plugins:me,categories:oe}))}}function re(q){return async me=>{try{await T(q)}catch(oe){const fe=k(oe);return me((0,_.Aq)(fe)),Promise.reject(q)}return await(0,f.ak)().reload(),me(X(q.uid))}}function ge(){return async(q,me)=>{const{uid:oe}=me().dataSources.dataSource;try{await O(oe),await(0,f.ak)().reload();const fe=d.Z.DataSources;g.E1.push(fe)}catch(fe){const ve=k(fe);q((0,_.Aq)(ve))}}}},67175:(Q,A,e)=>{"use strict";e.d(A,{V:()=>i});var n=e(31733),a=e(53812);const i=(0,n.createContext)(a.n)},5163:(Q,A,e)=>{"use strict";e.d(A,{E:()=>m,IA:()=>P,OU:()=>h,Qs:()=>b,YY:()=>O,_l:()=>T,d7:()=>R,hw:()=>v,nH:()=>s,q6:()=>D,qj:()=>y,wl:()=>C,zJ:()=>E});var n=e(31733),a=e(92089),i=e(83599),r=e(75923),o=e(42342),g=e(74642),u=e(86796),c=e(41982),l=e(67175),d=e(72975),f=e(92329);const m=I=>{const M=(0,o.useDispatch)();(0,n.useEffect)(()=>(M((0,c.M9)(I)),function(){M((0,a.e)({cleanupAction:L=>L.dataSourceSettings=d.fk}))}),[I,M])},v=I=>{const M=(0,o.useDispatch)(),x=R();return()=>M((0,c.kY)(I,x.Edit))},E=()=>{const I=(0,o.useDispatch)(),M=(0,o.useSelector)(L=>L.dataSources.isLoadingDataSources),x=(0,o.useSelector)(L=>L.dataSources.dataSources);return(0,n.useEffect)(()=>{I((0,c.bZ)())},[I]),{isLoading:M,dataSources:x}},p=I=>{const M=useDispatch();useEffect(()=>{M(loadDataSource(I))},[M,I])},h=()=>{const I=(0,o.useDispatch)();(0,n.useEffect)(()=>{I((0,c.Kj)())},[I])},s=()=>{const I=(0,o.useDispatch)(),M=R();return x=>{I((0,c.J_)(x,M.Edit))}},y=()=>{const I=(0,o.useDispatch)();return async M=>I((0,c.oe)(M))},D=()=>{const I=(0,o.useDispatch)(),{name:M}=(0,o.useSelector)(x=>x.dataSources.dataSource);return()=>{i.Z.publish(new g.VJ({title:"Delete",text:`Are you sure you want to delete the "${M}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>I((0,c.F5)())}))}},C=I=>(0,o.useSelector)(M=>(0,f.f6)(M.dataSources,I)),P=I=>{const M=C(I);return(0,u.i)(M)},b=I=>(0,o.useSelector)(M=>(0,f.G4)(M.dataSources,I)),T=()=>(0,o.useSelector)(I=>I.dataSourceSettings),O=I=>{const M=C(I),x=M.readOnly===!0,L=r.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesWrite,M),S=r.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesDelete,M);return{readOnly:x,hasWriteRights:L,hasDeleteRights:S}},R=()=>(0,n.useContext)(l.V)},13341:(Q,A,e)=>{"use strict";e.d(A,{BX:()=>o.BX,E:()=>i.E,Ht:()=>o.Ht,I5:()=>g.I5,IA:()=>g.IA,IO:()=>g.IO,J_:()=>n.J_,Nu:()=>o.Nu,OU:()=>i.OU,Qs:()=>i.Qs,Rz:()=>i.IA,Vj:()=>a.V,YY:()=>i.YY,_l:()=>i._l,d7:()=>i.d7,hw:()=>i.hw,mt:()=>g.mt,nH:()=>i.nH,q6:()=>i.q6,qj:()=>i.qj,r7:()=>g.r7,rl:()=>o.rl,wl:()=>i.wl,yr:()=>o.yr,zJ:()=>i.zJ,zT:()=>o.zT});var n=e(41982),a=e(67175),i=e(5163),r=e(45246),o=e(72975),g=e(92329)},45246:(Q,A,e)=>{"use strict";e.d(A,{B1:()=>l,nI:()=>d,xG:()=>f});var n=e(59889),a=e(28298),i=e(13807),r=e(83811),o=e(75923),g=e(48436),u=e(42342);const c="Loading";function l(v,E){const p=E.meta,h=r.default.featureToggles.featureHighlights,s={img:p.info.logos.large,id:"datasource-"+v.uid,url:"",text:v.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${v.uid}`,text:"Settings",url:`datasources/edit/${v.uid}/`}]};if(E.configPages)for(const T of E.configPages)s.children.push({active:!1,text:T.title,icon:T.icon,url:`datasources/edit/${v.uid}/?page=${T.id}`,id:`datasource-page-${T.id}`});p.includes&&m(p.includes)&&o.Vt.hasRole("Admin")&&s.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${v.uid}`,text:"Dashboards",url:`datasources/edit/${v.uid}/dashboards`});const y=v.type===c,D="feature-highlights-data-source-permissions-badge",C={active:!1,icon:"lock",id:`datasource-permissions-${v.uid}`,text:"Permissions",url:`datasources/edit/${v.uid}/permissions`};if((0,g.d5)()&&!y&&(C.tabSuffix=()=>(0,i.Z)({experimentId:D,eventVariant:"trial"})),(0,a.v)("dspermissions.enforcement")?o.Vt.hasPermissionInMetadata(u.AccessControlAction.DataSourcesPermissionsRead,v)&&s.children.push(C):h&&!y&&s.children.push({...C,url:C.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:D})}),r.default.analytics?.enabled){const T="feature-highlights-data-source-insights-badge",O={active:!1,icon:"info-circle",id:`datasource-insights-${v.uid}`,text:"Insights",url:`datasources/edit/${v.uid}/insights`};(0,g.d5)()&&!y&&(O.tabSuffix=()=>(0,i.Z)({experimentId:T,eventVariant:"trial"})),(0,a.v)("analytics")?o.Vt.hasPermission(u.AccessControlAction.DataSourcesInsightsRead)&&s.children.push(O):h&&!y&&s.children.push({...O,url:O.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:T})})}const P="feature-highlights-query-caching-badge",b={active:!1,icon:"database",id:`datasource-cache-${v.uid}`,text:"Cache",url:`datasources/edit/${v.uid}/cache`,hideFromTabs:!p.isBackend||!r.default.caching.enabled};return(0,g.d5)()&&!y&&(b.tabSuffix=()=>(0,i.Z)({experimentId:P,eventVariant:"trial"})),(0,a.v)("caching")?o.Vt.hasPermissionInMetadata(u.AccessControlAction.DataSourcesCachingRead,v)&&s.children.push(b):h&&!y&&s.children.push({...b,url:b.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:P})}),s}function d(v,E){let p={text:""};for(const h of v.children)if(h.id.indexOf(E)>0){h.active=!0,p=h;break}return{main:v,node:p}}function f(v){const E=l({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:c,typeName:c,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:n.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return d(E,v)}function m(v){return v.find(E=>E.type==="dashboard")!==void 0}},72975:(Q,A,e)=>{"use strict";e.d(A,{Aq:()=>b,BX:()=>v,CT:()=>D,Ht:()=>m,MP:()=>o,Nu:()=>p,Ww:()=>c,ZP:()=>O,be:()=>g,fk:()=>s,iZ:()=>y,jS:()=>u,j_:()=>C,ng:()=>P,rl:()=>r,wZ:()=>l,yr:()=>E,zT:()=>d});var n=e(4579),a=e(89732);const i={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:a.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},r=(0,n.PH)("dataSources/dataSourceLoaded"),o=(0,n.PH)("dataSources/dataSourcesLoad"),g=(0,n.PH)("dataSources/dataSourcesLoaded"),u=(0,n.PH)("dataSources/dataSourceMetaLoaded"),c=(0,n.PH)("dataSources/dataSourcePluginsLoad"),l=(0,n.PH)("dataSources/dataSourcePluginsLoaded"),d=(0,n.PH)("dataSources/setDataSourcesSearchQuery"),f=(0,n.PH)("dataSources/setDataSourcesLayoutMode"),m=(0,n.PH)("dataSources/setDataSourceTypeSearchQuery"),v=(0,n.PH)("dataSources/setDataSourceName"),E=(0,n.PH)("dataSources/setIsDefault"),p=(0,n.PH)("dataSources/setIsSortAscending"),h=(R=i,I)=>o.match(I)?{...R,isLoadingDataSources:!0}:g.match(I)?{...R,isLoadingDataSources:!1,dataSources:I.payload,dataSourcesCount:I.payload.length}:r.match(I)?{...R,dataSource:I.payload}:d.match(I)?{...R,searchQuery:I.payload}:f.match(I)?{...R,layoutMode:I.payload}:c.match(I)?{...R,plugins:[],isLoadingDataSourcePlugins:!0}:l.match(I)?{...R,plugins:I.payload.plugins,categories:I.payload.categories,isLoadingDataSourcePlugins:!1}:m.match(I)?{...R,dataSourceTypeSearchQuery:I.payload}:u.match(I)?{...R,dataSourceMeta:I.payload}:v.match(I)?{...R,dataSource:{...R.dataSource,name:I.payload}}:E.match(I)?{...R,dataSource:{...R.dataSource,isDefault:I.payload}}:p.match(I)?{...R,isSortAscending:I.payload}:R,s={testingStatus:{},loadError:null,loading:!0,plugin:null},y=(0,n.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),D=(0,n.PH)("dataSourceSettings/initDataSourceSettingsFailed"),C=(0,n.PH)("dataSourceSettings/testDataSourceStarting"),P=(0,n.PH)("dataSourceSettings/testDataSourceSucceeded"),b=(0,n.PH)("dataSourceSettings/testDataSourceFailed"),O={dataSources:h,dataSourceSettings:(R=s,I)=>y.match(I)?{...R,plugin:I.payload,loadError:null,loading:!1}:D.match(I)?{...R,plugin:null,loadError:I.payload.message,loading:!1}:C.match(I)?{...R,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:P.match(I)?{...R,testingStatus:{status:I.payload?.status,message:I.payload?.message,details:I.payload?.details}}:b.match(I)?{...R,testingStatus:{status:"error",message:I.payload?.message,details:I.payload?.details}}:R}},92329:(Q,A,e)=>{"use strict";e.d(A,{G4:()=>o,I5:()=>i,IA:()=>l,IO:()=>g,f6:()=>r,mt:()=>a,r7:()=>c});var n=e(90093);const a=(0,n.Z)(d=>{const f=new RegExp(d.searchQuery,"i");return d.dataSources.filter(v=>f.test(v.name)||f.test(v.database)||f.test(v.type)).sort((v,E)=>d.isSortAscending?v.name.localeCompare(E.name):E.name.localeCompare(v.name))}),i=(0,n.Z)(d=>{const f=new RegExp(d.dataSourceTypeSearchQuery,"i");return d.plugins.filter(m=>f.test(m.name))}),r=(d,f)=>d.dataSource.uid===f?d.dataSource:{},o=(d,f)=>d.dataSourceMeta.id===f?d.dataSourceMeta:{},g=d=>d.searchQuery,u=d=>d.layoutMode,c=d=>d.dataSourcesCount,l=d=>d.isSortAscending},77758:(Q,A,e)=>{"use strict";e.d(A,{Er:()=>a,Rw:()=>i,U4:()=>r,aL:()=>c,dF:()=>g,hJ:()=>o,ij:()=>u});var n=e(64704);const a=l=>{(0,n.ff)("grafana_ds_add_datasource_clicked",l)},i=l=>{(0,n.ff)("grafana_ds_test_datasource_clicked",l)},r=l=>{(0,n.ff)("grafana_ds_explore_datasource_clicked",l)},o=l=>{(0,n.ff)("grafana_ds_create_dashboard_clicked",l)},g=l=>{(0,n.ff)("grafana_ds_datasources_list_viewed",l)},u=l=>{(0,n.ff)("connections_datasources_settings_clicked",{item:l})},c=l=>{(0,n.ff)("connections_datasources_ds_configured",l)}},86796:(Q,A,e)=>{"use strict";e.d(A,{i:()=>i});var n=e(91977),a=e(84912);const i=r=>{const o=JSON.stringify({datasource:r.name,context:"explore"});return n.Cj.renderUrl(a.u.assureBaseUrl("/explore"),{left:o})}},57696:()=>{"use strict"},24981:(Q,A,e)=>{"use strict";e.d(A,{L:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(38834),o=e(39236),g=e(51395);const u={label:"Fixed color",value:"_____fixed_____"},c=d=>{const{value:f,context:m,onChange:v,item:E}=d,p="dark-green",h=(0,i.wW)(l),s=f?.field,y=f&&!s&&f?.fixed,D=(0,g.IX)(m.data),C=(0,g.nw)(D,s,u,void 0,E.settings?.baseNameMode),P=(0,a.useCallback)(O=>{if(!O){v(void 0);return}const R=O.value;if(R&&R!==u.value)v({...f,field:R});else{const I=f?.fixed??p;v({...f,field:void 0,fixed:I})}},[v,f]),b=(0,a.useCallback)(O=>{v({field:void 0,fixed:O??p})},[v]),T=y?u:C.find(O=>O.value===s);return a.createElement(a.Fragment,null,a.createElement("div",{className:h.container},a.createElement(r.Ph,{value:T,options:C,onChange:P,noOptionsMessage:"No fields found",isClearable:E.settings?.isClearable,placeholder:E.settings?.placeholder}),y&&a.createElement("div",{className:h.picker},a.createElement(o.zH,{color:f?.fixed,onChange:b,enableNamedColors:!0}))))},l=d=>({container:(0,n.css)`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:(0,n.css)`
    padding-left: 8px;
  `})},97704:(Q,A,e)=>{"use strict";e.d(A,{E:()=>p});var n=e(76932),a=e(31733),i=e(76067),r=e(51343),o=e(47701),g=e(41164),u=e(64516),c=e(72336),l=e(20425),d=e(71509),f=e(43286),m=e(63518),v=e(85887),E=e(42936);const p=y=>{const{value:D,src:C,name:P,placeholder:b,onChange:T,onClear:O,mediaType:R,folderName:I,size:M,color:x,maxFiles:L}=y,S=(0,i.wW)(s),U=(0,i.l4)(),N=(0,a.createRef)(),w=a.createElement(E.Y,{onChange:T,value:D,mediaType:R,folderName:I,maxFiles:L});let G=C;!G&&D&&(G=(0,m.t)(D));const _=x&&{fill:U.visualization.getColorByName(x)},K=()=>D&&G?a.createElement(f.V,{src:G,className:S.icon,style:{..._}}):a.createElement(r.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),k=()=>a.createElement(o.Z,null,a.createElement(g._,{label:null,grow:!0},a.createElement(u.I,{value:h(C,P),placeholder:b,readOnly:!0,prefix:G&&a.createElement(f.V,{src:G,className:S.icon,style:{..._}}),suffix:a.createElement(r.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:O})})));return a.createElement(c.D,{content:w},(z,W,Z)=>a.createElement(a.Fragment,null,N.current&&a.createElement(l.J,{...Z,referenceElement:N.current,onMouseEnter:z,onKeyDown:H=>{(0,d.i)(H,W)}}),a.createElement("div",{ref:N,className:S.pointer,onClick:z,onKeyDown:H=>{H.key==="Enter"&&z()},role:"button",tabIndex:0},M===v.zc.SMALL&&K(),M===v.zc.NORMAL&&k())))};function h(y,D){if(y?.startsWith("public/img/icons")){const C=D?.lastIndexOf(".svg")??0;if(C>0)return D.substring(0,C)}return D}const s=y=>({pointer:(0,n.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,n.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},42936:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>G});var n=e(76932),a=e(16749),i=e(57353),r=e(68420),o=e(31733),g=e(69391),u=e(76067),c=e(51343),l=e(83811),d=e(85887),f=e(85765),m=e(54679),v=e(43286);function E({secondaryText:K="Drag and drop here or browse"}){const k=(0,u.wW)(h);return o.createElement("div",{className:k.iconWrapper},o.createElement("small",{className:k.small},K),o.createElement(c.zx,{type:"button",icon:"upload"},"Upload"))}const p=({mediaType:K,setFormData:k,setUpload:z,error:W})=>{const Z=(0,u.wW)(h),[H,X]=(0,o.useState)(!1),[Y,ne]=(0,o.useState)(""),se=()=>o.createElement(f.g,{label:"Preview"},o.createElement("div",{className:Z.iconPreview},K===d.DD.Icon&&o.createElement(v.V,{src:Y,className:Z.img}),K===d.DD.Image&&o.createElement("img",{src:Y,alt:"Preview of the uploaded file",className:Z.img}))),re=q=>{fetch(`/api/storage/delete/upload/${q.file.name}`,{method:"DELETE"}).catch(me=>console.error("cannot delete file",me))},ge=K==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return o.createElement(m.Yo,{readAs:"readAsBinaryString",onFileRemove:re,options:{accept:ge,multiple:!1,onDrop:q=>{let me=new FormData;me.append("file",q[0]),ne(URL.createObjectURL(q[0])),X(!0),k(me),z(!0)}}},W.message!==""&&H?o.createElement("p",null,W.message):H?o.createElement(se,null):o.createElement(E,null))};function h(K,k){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,n.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${K.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${K.colors.border.medium};
      background-color: ${k?K.colors.background.secondary:K.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,n.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,n.css)`
      margin: ${K.spacing(2,0,1)};
    `,small:(0,n.css)`
      color: ${K.colors.text.secondary};
      margin-bottom: ${K.spacing(2)};
    `,iconContainer:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,n.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${K.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,n.css)`
      width: 147px;
      height: 147px;
      fill: ${K.colors.text.primary};
    `}}var s=e(38834),y=e(76804),D=e(97001),C=e(43741),P=e(61231);const b=(0,o.memo)(function(k){const{columnIndex:z,rowIndex:W,style:Z,data:H}=k,{cards:X,columnCount:Y,onChange:ne,selected:se}=H,re=z+W*Y,ge=X[re],q=(0,u.wW)(O);return o.createElement("div",{style:Z},ge&&o.createElement("div",{key:ge.value,className:se===ge.value?(0,n.cx)(q.card,q.selected):q.card,onClick:()=>ne(ge.value),onKeyDown:me=>{me.key==="Enter"&&ne(ge.value)},role:"button",tabIndex:0},ge.imgUrl.endsWith(".svg")?o.createElement(v.V,{src:ge.imgUrl,className:q.img}):o.createElement("img",{src:ge.imgUrl,alt:"",className:q.img}),o.createElement("h6",{className:q.text},ge.label.slice(0,-4))))},P.wy),T=K=>{const{onChange:k,cards:z,value:W}=K,Z=(0,u.wW)(O);return o.createElement(C.Z,{defaultWidth:680},({width:H,height:X})=>{const se=Math.floor(H/90),re=Math.ceil(z.length/se);return o.createElement(P.Ym,{width:H,height:X,columnCount:se,columnWidth:90,rowCount:re,rowHeight:90,itemData:{cards:z,columnCount:se,onChange:k,selected:W},className:Z.grid},b)})},O=K=>({card:(0,n.css)`
    display: inline-block;
    width: 90px;
    height: 90px;
    margin: 0.75rem;
    margin-left: 15px;
    text-align: center;
    cursor: pointer;
    position: relative;
    background-color: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    padding-top: 6px;
    :hover {
      border-color: ${K.colors.action.hover};
      box-shadow: ${K.shadows.z2};
    }
  `,selected:(0,n.css)`
    border: 2px solid ${K.colors.primary.main};
    :hover {
      border-color: ${K.colors.primary.main};
    }
  `,img:(0,n.css)`
    width: 40px;
    height: 40px;
    object-fit: cover;
    vertical-align: middle;
    fill: ${K.colors.text.primary};
  `,text:(0,n.css)`
    color: ${K.colors.text.primary};
    white-space: nowrap;
    font-size: 12px;
    text-overflow: ellipsis;
    display: block;
    overflow: hidden;
  `,grid:(0,n.css)`
    border: 1px solid ${K.colors.border.medium};
  `}),R=K=>K===d.DD.Icon?[d.QS.Icon,d.QS.IOT,d.QS.Marker]:[d.QS.BG],I=(K,k)=>K.find(z=>k.startsWith(z.value))??K[0],M=K=>{const{value:k,mediaType:z,folderName:W,newValue:Z,setNewValue:H,maxFiles:X}=K,Y=(0,u.wW)(x),ne=R(z).map(Me=>({label:Me,value:Me})),[se,re]=(0,o.useState)(),[ge,q]=(0,o.useState)(I(ne,k?.length?k:W)),[me,oe]=(0,o.useState)([]),[fe,ve]=(0,o.useState)([]),pe=Me=>{Me?(Me=Me.toLowerCase(),ve(me.filter(Pe=>Pe.search.includes(Me)))):ve(me)};return(0,o.useEffect)(()=>{const Me=ge?.value;if(Me){const Pe=z===d.DD.Icon?Ee=>Ee.name.endsWith(".svg"):Ee=>Ee.name.endsWith(".png")||Ee.name.endsWith(".gif");(0,D.ak)().get("-- Grafana --").then(Ee=>{Ee.listFiles(Me,X).subscribe({next:he=>{const Le=[];he.forEach(ke=>{if(Pe(ke)){const ot=ke.name.lastIndexOf(".");Le.push({value:`${Me}/${ke.name}`,label:ke.name,search:(ot?ke.name.substring(0,ot):ke.name).toLowerCase(),imgUrl:`public/${Me}/${ke.name}`})}}),oe(Le),ve(Le)}})})}},[z,ge,X]),o.createElement(o.Fragment,null,o.createElement(f.g,null,o.createElement(s.Ph,{options:ne,onChange:q,value:ge,menuShouldPortal:!1})),o.createElement(f.g,null,o.createElement(y.H,{value:se??"",placeholder:"Search",onChange:Me=>{pe(Me),re(Me)}})),fe&&o.createElement("div",{className:Y.cardsWrapper},o.createElement(T,{cards:fe,onChange:Me=>H(Me),value:Z})))},x=K=>({cardsWrapper:(0,n.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var L=e(64516),S=e(36667),U=e(63518);const N=K=>{const{newValue:k,setNewValue:z,mediaType:W}=K,Z=(0,u.wW)(w),H=(0,U.t)(k);let X=k?.substring(k.lastIndexOf("/")+1,k.lastIndexOf("."));return X.length>20&&(X=X.substring(0,20)+"..."),o.createElement(o.Fragment,null,o.createElement(f.g,null,o.createElement(L.I,{onChange:Y=>z(Y.currentTarget.value),value:k})),o.createElement("div",{className:Z.iconContainer},o.createElement(f.g,{label:"Preview"},o.createElement("div",{className:Z.iconPreview},W===d.DD.Icon&&o.createElement(v.V,{src:H,className:Z.img}),W===d.DD.Image&&k&&o.createElement("img",{src:H,alt:"Preview of the selected URL",className:Z.img}))),o.createElement(S._,null,X)))},w=K=>({iconContainer:(0,n.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,n.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${K.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,n.css)`
    width: 147px;
    height: 147px;
    fill: ${K.colors.text.primary};
  `}),G=K=>{const{value:k,onChange:z,mediaType:W,folderName:Z,maxFiles:H}=K,X=(0,u.wW)(_),Y=()=>{z(k)},ne=(0,o.createRef)(),{dialogProps:se}=(0,a.R)({},ne),{overlayProps:re}=(0,r.Ir)({onClose:Y,isDismissable:!0,isOpen:!0},ne),ge=k&&k.includes("://"),[q,me]=(0,o.useState)(k??""),[oe,fe]=(0,o.useState)(ge?d.hQ.URL:d.hQ.Folder),[ve,pe]=(0,o.useState)(new FormData),[Me,Pe]=(0,o.useState)(!1),[Ee,he]=(0,o.useState)({message:""}),Le=le=>`${X.resourcePickerPopoverTab} ${oe===le&&X.resourcePickerPopoverActiveTab}`,ke=()=>o.createElement(M,{value:k,mediaType:W,folderName:Z,newValue:q,setNewValue:me,maxFiles:H}),ot=()=>o.createElement(N,{newValue:q,setNewValue:me,mediaType:W}),it=()=>o.createElement(p,{mediaType:W,setFormData:pe,setUpload:Pe,newValue:q,error:Ee}),ce=()=>{switch(oe){case d.hQ.Folder:return ke();case d.hQ.URL:return ot();case d.hQ.Upload:return it();default:return ke()}};return o.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("section",{ref:ne,...re,...se},o.createElement("div",{className:X.resourcePickerPopover},o.createElement("div",{className:X.resourcePickerPopoverTabs},o.createElement("button",{className:Le(d.hQ.Folder),onClick:()=>fe(d.hQ.Folder)},"Folder"),o.createElement("button",{className:Le(d.hQ.URL),onClick:()=>fe(d.hQ.URL)},"URL")),o.createElement("div",{className:X.resourcePickerPopoverContent},ce(),o.createElement("div",{className:X.buttonRow},o.createElement(c.zx,{variant:"secondary",onClick:()=>Y(),fill:"outline"},"Cancel"),o.createElement(c.zx,{variant:q&&q!==k?"primary":"secondary",onClick:()=>{Me?fetch("/api/storage/upload",{method:"POST",body:ve}).then(le=>{if(le.status>=400){le.json().then(Re=>he(Re));return}else return le.json()}).then(le=>{(0,g.i)().get(`api/storage/read/${le.path}`).then(()=>me(`${l.config.appUrl}api/storage/read/${le.path}`)).then(()=>z(`${l.config.appUrl}api/storage/read/${le.path}`))}).catch(le=>console.error(le)):z(q)}},"Select"))))))},_=K=>({resourcePickerPopover:(0,n.css)`
    border-radius: ${K.shape.radius.default};
    box-shadow: ${K.shadows.z3};
    background: ${K.colors.background.primary};
    border: 1px solid ${K.colors.border.weak};
  `,resourcePickerPopoverTab:(0,n.css)`
    width: 50%;
    text-align: center;
    padding: ${K.spacing(1,0)};
    background: ${K.colors.background.secondary};
    color: ${K.colors.text.secondary};
    font-size: ${K.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,n.css)`
    color: ${K.colors.text.primary};
    font-weight: ${K.typography.fontWeightMedium};
    background: ${K.colors.background.primary};
  `,resourcePickerPopoverContent:(0,n.css)`
    width: 315px;
    font-size: ${K.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${K.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,n.css)`
    display: flex;
    width: 100%;
    border-radius: ${K.shape.radius.default} ${K.shape.radius.default} 0 0;
  `,buttonRow:(0,n.css)({display:"flex",justifyContent:"center",gap:K.spacing(2),padding:K.spacing(1)})})},38444:(Q,A,e)=>{"use strict";e.d(A,{$:()=>m});var n=e(31733),a=e(71199),i=e(47701),r=e(41164),o=e(96856),g=e(51343),u=e(94993),c=e(57272);const l=[{label:"Fixed",value:a.xy.Fixed,description:"Fixed value"},{label:"Field",value:a.xy.Field,description:"Display field value"}],d={settings:{}},f={settings:{}},m=({value:v,context:E,onChange:p})=>{const s=(0,n.useCallback)(b=>{p({...v,mode:b})},[p,v]),y=(0,n.useCallback)(b=>{p({...v,field:b})},[p,v]),D=(0,n.useCallback)((b="")=>{p({...v,fixed:b})},[p,v]),C=()=>{D("")},P=v?.mode??a.xy.Fixed;return n.createElement(n.Fragment,null,n.createElement(i.Z,null,n.createElement(r._,{label:"Source",labelWidth:9,grow:!0},n.createElement(o.S,{value:P,options:l,onChange:s,fullWidth:!0}))),P!==a.xy.Fixed&&n.createElement(i.Z,null,n.createElement(r._,{label:"Field",labelWidth:9,grow:!0},n.createElement(u.b,{context:E,value:v.field??"",onChange:y,item:d}))),P===a.xy.Fixed&&n.createElement(i.Z,{key:v?.fixed},n.createElement(r._,{label:"Value",labelWidth:9,grow:!0},n.createElement(c.A,{context:E,value:v?.fixed,onChange:D,item:f,suffix:v?.fixed&&n.createElement(g.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:C})}))),P===a.xy.Template&&n.createElement(i.Z,null,n.createElement(r._,{label:"Template",labelWidth:9,grow:!0},n.createElement(c.A,{context:E,value:v?.fixed,onChange:D,item:f}))))}},51740:(Q,A,e)=>{"use strict";e.d(A,{Lm:()=>n.L,Lv:()=>p,k9:()=>L,cL:()=>O,$2:()=>U.$});var n=e(24981),a=e(31733);const i=({value:N,onChange:w})=>{const[G,_]=useState(N?[{value:N,label:N}]:[]),[K,k]=useState(),z=window.__grafana_public_path__+"img/icons/unicons/",W=Z=>{w(Z),k(Z)};return useEffect(()=>{getBackendSrv().get(`${z}/index.json`).then(Z=>{_(Z.files.map(H=>({value:H,label:H})))})},[z]),React.createElement(Select,{options:G,value:K,onChange:Z=>{W(Z.value)}})},r=null;var o=e(71199),g=e(47701),u=e(41164),c=e(96856),l=e(94993),d=e(24353),f=e(85887),m=e(97704);const v=[{label:"Fixed",value:o.Q8.Fixed,description:"Fixed value"},{label:"Field",value:o.Q8.Field,description:"Use a string field result"}],E={settings:{}},p=N=>{const{value:w,context:G,onChange:_,item:K}=N,k=9,z=(0,a.useCallback)(q=>{_({...w,mode:q})},[_,w]),W=(0,a.useCallback)((q="")=>{_({...w,field:q})},[_,w]),Z=(0,a.useCallback)(q=>{_({...w,fixed:q??""})},[_,w]),H=q=>{q.stopPropagation(),_({mode:o.Q8.Fixed,fixed:"",field:""})},X=w?.mode??o.Q8.Fixed,Y=K.settings?.showSourceRadio??!0,ne=K.settings?.resourceType??f.DD.Icon,se=K.settings?.folderName??d.ResourceFolderName.Icon,re=K.settings?.maxFiles;let ge="";return ne===f.DD.Icon&&(w?.fixed?ge=(0,d.getPublicOrAbsoluteUrl)(w.fixed):K.settings?.placeholderValue&&(ge=(0,d.getPublicOrAbsoluteUrl)(K.settings.placeholderValue))),a.createElement(a.Fragment,null,Y&&a.createElement(g.Z,null,a.createElement(u._,{label:"Source",labelWidth:k,grow:!0},a.createElement(c.S,{value:X,options:v,onChange:z,fullWidth:!0}))),X!==o.Q8.Fixed&&a.createElement(g.Z,null,a.createElement(u._,{label:"Field",labelWidth:k,grow:!0},a.createElement(l.b,{context:G,value:w.field??"",onChange:W,item:E}))),X===o.Q8.Fixed&&a.createElement(m.E,{onChange:Z,onClear:H,value:w?.fixed,src:ge,placeholder:K.settings?.placeholderText??"Select a value",name:h(w?.fixed)??"",mediaType:ne,folderName:se,size:f.zc.NORMAL,maxFiles:re}),X===o.Q8.Mapping&&a.createElement(g.Z,null,a.createElement(u._,{label:"Mappings",labelWidth:k,grow:!0},a.createElement("div",null,"TODO mappings editor!"))))};function h(N){if(!N)return;const w=N.lastIndexOf("/");return w>0?N.substring(w+1):N}var s=e(76932),y=e(76067),D=e(38834),C=e(51395),P=e(13742),b=e(28711);const T={label:"Fixed value",value:"_____fixed_____"},O=N=>{const{value:w,context:G,onChange:_,item:K}=N,{settings:k}=K,z=(0,y.wW)(R),W=w?.field,Z=!W,H=(0,C.IX)(G.data),X=(0,C.nw)(H,W,T),Y=(0,a.useMemo)(()=>(0,b.x5)(k),[k]),ne=(0,a.useCallback)(fe=>{_((0,b.C)(fe,Y))},[_,Y]),se=(0,a.useCallback)(fe=>{const ve=fe.value;ve&&ve!==T.value?ne({...w,field:ve}):ne({...w,field:void 0})},[ne,w]),re=(0,a.useCallback)(fe=>{fe!==void 0&&ne({...w,min:fe})},[ne,w]),ge=(0,a.useCallback)(fe=>{fe!==void 0&&ne({...w,max:fe})},[ne,w]),q=(0,a.useCallback)(fe=>{fe!==void 0&&ne({...w,fixed:fe})},[ne,w]),me=w??{},oe=Z?T:X.find(fe=>fe.value===W);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(D.Ph,{value:oe,options:X,onChange:se,noOptionsMessage:"No fields found"})),a.createElement("div",{className:z.range},Z&&a.createElement(g.Z,null,a.createElement(u._,{label:"Value",labelWidth:8,grow:!0},a.createElement(P.Y,{value:me.fixed,...Y,onChange:q}))),!Z&&!Y.hideRange&&a.createElement(a.Fragment,null,a.createElement(g.Z,null,a.createElement(u._,{label:"Min",labelWidth:8,grow:!0},a.createElement(P.Y,{value:me.min,...Y,onChange:re}))),a.createElement(g.Z,null,a.createElement(u._,{label:"Max",labelWidth:8,grow:!0},a.createElement(P.Y,{value:me.max,...Y,onChange:ge}))))))},R=N=>({range:(0,s.css)`
    padding-top: 8px;
  `});var I=e(85666);const M={label:"Fixed value",value:"_____fixed_____"},x=[{label:"Mod",value:o.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:o.eK.Clamped,description:"Use field values, clamped to max and min"}],L=({value:N,context:w,onChange:G,item:_})=>{const{settings:K}=_,k=0,z=N?.field,W=!z,Z=(0,C.IX)(w.data),H=(0,C.nw)(Z,z,M,I.fS.number),X=(0,y.wW)(S),Y=(0,a.useCallback)(me=>{const oe=me.value;if(oe&&oe!==M.value)G({...N,field:oe});else{const fe=N.fixed??k;G({...N,field:void 0,fixed:fe})}},[G,N]),ne=(0,a.useCallback)(me=>{G({...N,mode:me})},[G,N]),se=(0,a.useCallback)(me=>{G({...N,field:void 0,fixed:me??k})},[G,N]),re=N??{},ge=N?.mode??o.eK.Mod,q=W?M:H.find(me=>me.value===z);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(g.Z,null,a.createElement(u._,{label:"Limit",labelWidth:8,grow:!0},a.createElement(c.S,{value:ge,options:x,onChange:ne,fullWidth:!0}))),a.createElement(D.Ph,{value:q,options:H,onChange:Y,noOptionsMessage:"No fields found"})),a.createElement("div",{className:X.range},W&&a.createElement(g.Z,null,a.createElement(u._,{label:"Value",labelWidth:8,grow:!0},a.createElement(P.Y,{value:re?.fixed??k,onChange:se,max:K?.max,min:K?.min})))))},S=N=>({range:(0,s.css)`
    padding-top: 8px;
  `});var U=e(38444)},24353:(Q,A,e)=>{"use strict";e.d(A,{MediaType:()=>n.DD,ResourceFolderName:()=>n.QS,findField:()=>o.PI,findFieldIndex:()=>o.rj,getColorDimension:()=>g,getPublicOrAbsoluteUrl:()=>E.t,getResourceDimension:()=>E.I,getScalarDimension:()=>h.y,getScaledDimension:()=>c.W8,getScaledDimensionForField:()=>c.A,getTextDimension:()=>m});var n=e(85887),a=e(99326),i=e(56106),r=e(28073),o=e(25306);function g(s,y,D){return u((0,o.PI)(s,y.field),y,D)}function u(s,y,D){if(!s){const b=D.visualization.getColorByName(y.fixed??"grey");return{isAssumed:!!y.field?.length||!y.fixed,fixed:b,value:()=>b,get:T=>b}}const C=(0,a.fD)(s);if(C.isByValue||s.config.mappings?.length){const b=(0,i.xD)(s,!0);b!==s.config&&(s={...s,config:b},s.state=void 0);const T=(0,r.U)({field:s,theme:D}),O=R=>T(R).color??"#ccc";return{field:s,get:R=>O(s.values[R]),value:()=>O((0,o.cR)(s))}}const P=C.getCalculator(s,D)(0,0);return{fixed:P,value:()=>P,get:b=>P,field:s}}var c=e(28711),l=e(85666),d=e(86850),f=e(71199);function m(s,y){const D=y.field?(0,o.PI)(s,y.field):s?.fields.find(C=>C.type===l.fS.string);return v(D,y)}function v(s,y){let D=y.fixed;const C=y.mode??f.xy.Fixed;if(C===f.xy.Fixed)return{isAssumed:!D,fixed:D,value:()=>D,get:b=>D};if(C===f.xy.Template){const b=T=>`TEMPLATE[${y.fixed} // ${T}]`;return s?{field:s,get:T=>b(s.values[T]),value:()=>b((0,o.cR)(s))}:(D=b(""),{isAssumed:!0,fixed:D,value:()=>D,get:T=>D})}if(!s)return{isAssumed:!0,fixed:D,value:()=>D,get:b=>D};let P=b=>(0,d.zc)(s.display(b));return{field:s,get:b=>P(s.values[b]),value:()=>P((0,o.cR)(s))}}var E=e(63518),p=e(57696),h=e(6825)},63518:(Q,A,e)=>{"use strict";e.d(A,{I:()=>r,t:()=>i});var n=e(71199),a=e(25306);function i(o){return o?o.indexOf(":/")>0?o:window.__grafana_public_path__+o:""}function r(o,g){const u=g.mode??n.Q8.Fixed;if(u===n.Q8.Fixed){const d=i(g.fixed);return{isAssumed:!d,fixed:d,value:()=>d,get:f=>d}}const c=(0,a.PI)(o,g.field);if(!c){const d="";return{isAssumed:!0,fixed:d,value:()=>d,get:f=>d}}if(u===n.Q8.Mapping){const d=f=>i(`${f}`);return{field:c,get:f=>d(c.values[f]),value:()=>d((0,a.cR)(c))}}const l=d=>{if(c&&c.display){const f=c.display(d).icon;return i(f??"")}return""};return{field:c,get:d=>l(c.values[d]),value:()=>l((0,a.cR)(c))}}},6825:(Q,A,e)=>{"use strict";e.d(A,{y:()=>i});var n=e(71199),a=e(25306);function i(o,g){return r((0,a.PI)(o,g?.field),g)}function r(o,g){if(!o){const l=g.fixed??0;return{isAssumed:!!g.field?.length||!g.fixed,fixed:l,value:()=>l,get:()=>l}}let u=l=>l%g.max;return g.mode===n.eK.Clamped&&(u=l=>l<g.min?g.min:l>g.max?g.max:l),{field:o,get:l=>{const d=o.values[l];return d===null||typeof d!="number"?0:u(d)},value:()=>(0,a.cR)(o)}}},28711:(Q,A,e)=>{"use strict";e.d(A,{A:()=>o,C:()=>u,W8:()=>r,x5:()=>g});var n=e(56106),a=e(71199),i=e(25306);function r(c,l){return o((0,i.PI)(c,l?.field),l)}function o(c,l,d){if(!c){const h=l.fixed??0;return{isAssumed:!!l.field?.length||!l.fixed,fixed:h,value:()=>h,get:()=>h}}const f=(0,n.dz)(c),m=l.max-l.min;if(c.values.length<1||m<=0||f.delta<=0)return{fixed:l.min,value:()=>l.min,get:()=>l.min};let E=h=>l.min+h*m;if(d===a.B5.Quad){const h=Math.PI*(l.max/2)**2,s=Math.PI*(l.min/2)**2,y=h-s;E=D=>{let C=s+y*D;return Math.sqrt(C/Math.PI)*2}}const p=h=>{const s=c.values[h];let y=0;return s!==-1/0&&(y=(s-f.min)/f.delta),y>1?y=1:y<0&&(y=0),E(y)};return{get:p,value:()=>p((0,i.cR)(c)),field:c}}function g(c){return c||(c={min:0,max:1}),c.min==null&&(c.min=0),c.max==null&&(c.max=1),c}function u(c,l){let{min:d,max:f}=g(l);if(c||(c={}),c.max==null&&(c.max=f),c.min==null&&(c.min=d),c.min>c.max){const m=c.max;c.max=c.min,c.min=m}return c.min<d&&(c.min=d),c.max>f&&(c.max=f),c.fixed==null&&(c.fixed=c.min+(c.max-c.min)/2),c.field||(c.fixed>f?c.fixed=f:c.fixed<d&&(c.fixed=d)),c}},85887:(Q,A,e)=>{"use strict";e.d(A,{DD:()=>r,QS:()=>i,hQ:()=>o,qj:()=>a,zc:()=>g});var n=e(71199);const a=Object.freeze({fixed:"",mode:n.xy.Field,field:""});var i=(u=>(u.Icon="img/icons/unicons",u.IOT="img/icons/iot",u.Marker="img/icons/marker",u.BG="img/bg",u))(i||{}),r=(u=>(u.Icon="icon",u.Image="image",u))(r||{}),o=(u=>(u.Folder="folder",u.URL="url",u.Upload="upload",u))(o||{}),g=(u=>(u.SMALL="small",u.NORMAL="normal",u))(g||{})},25306:(Q,A,e)=>{"use strict";e.d(A,{FP:()=>g,PI:()=>f,Qz:()=>l,WO:()=>d,cR:()=>v,pb:()=>u,rj:()=>m,z2:()=>c});var n=e(27957),a=e(66542),i=e(85498),r=e(24353),o=e(6825);function g(E,p){if(E?.series&&p.field)for(const h of E.series){const s=(0,r.getColorDimension)(h,p,i.config.theme2);if(!s.isAssumed||E.series.length===1)return s}return(0,r.getColorDimension)(void 0,p,i.config.theme2)}function u(E,p){if(E?.series&&p.field)for(const h of E.series){const s=(0,r.getScaledDimension)(h,p);if(!s.isAssumed||E.series.length===1)return s}return(0,r.getScaledDimension)(void 0,p)}function c(E,p){if(E?.series&&p.field)for(const h of E.series){const s=(0,o.y)(h,p);if(!s.isAssumed||E.series.length===1)return s}return(0,o.y)(void 0,p)}function l(E,p){if(E?.series&&p.field)for(const h of E.series){const s=(0,r.getResourceDimension)(h,p);if(!s.isAssumed||E.series.length===1)return s}return(0,r.getResourceDimension)(void 0,p)}function d(E,p){if(E?.series&&p.field)for(const h of E.series){const s=(0,r.getTextDimension)(h,p);if(!s.isAssumed||E.series.length===1)return s}return(0,r.getTextDimension)(void 0,p)}function f(E,p){const h=m(p,E);return h==null?void 0:E.fields[h]}function m(E,p,h){if(!(!p||!E?.length))for(let s=0;s<p.fields.length;s++){const y=p.fields[s];if(E===y.name)return s;const D=(0,n.CZ)(y,p,h);if(E===D)return s}}function v(E){const p=E.state?.calcs;if(p){const y=p[a.gz.lastNotNull];if(y!=null)return y}const h=E.values;let s=h.length-1;for(;s>=0;){const y=h[s--];if(y!=null)return y}}},40569:(Q,A,e)=>{"use strict";e.d(A,{h:()=>n,w:()=>a});const n={showLabels:"grafana.explore.logs.showLabels",showTime:"grafana.explore.logs.showTime",wrapLogMessage:"grafana.explore.logs.wrapLogMessage",prettifyLogMessage:"grafana.explore.logs.prettifyLogMessage",logsSortOrder:"grafana.explore.logs.sortOrder",logContextWrapLogMessage:"grafana.explore.logs.logContext.wrapLogMessage"},a="grafana.explore.logs.visualisationType"},65162:(Q,A,e)=>{"use strict";e.d(A,{I:()=>c,a:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(99474),o=e(34385);const g=(l,d)=>({valueNavigation:(0,n.css)`
      width: ${o.vl};
      font-weight: bold;
    `,valueNavigationWrapper:(0,n.css)`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:(0,n.css)`
      ${d?"":`border-bottom: 1px solid ${l.colors.border.medium}`};
    `}),u=l=>l.includes(r.QG)?l.replace(r.QG,""):l,c=({valueLabels:l,expanded:d})=>{const f=(0,i.wW)(g,d);return a.createElement("div",{className:f.itemLabelsWrap},a.createElement("div",{className:f.valueNavigationWrapper},l.map((m,v)=>a.createElement("span",{className:f.valueNavigation,key:m.name},u(m.name)))))}},34385:(Q,A,e)=>{"use strict";e.d(A,{ZP:()=>C,vl:()=>p,Cw:()=>h});var n=e(76932),a=e(31733),i=e(98410),r=e(64704),o=e(76067),g=e(41354),u=e(65162),c=e(78621);const l=(P,b)=>({rowWrapper:(0,n.css)`
    position: relative;
    min-width: ${p};
    padding-right: 5px;
  `,rowValue:(0,n.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${P.colors.background.primary});
    }
  `,rowValuesWrap:(0,n.css)`
    padding-left: ${h};
    width: calc(${b} * ${p});
    display: flex;
  `}),d=({totalNumberOfValues:P,values:b,hideFieldsWithoutValues:T})=>{const O=(0,o.wW)(l,P);return a.createElement("div",{role:"cell",className:O.rowValuesWrap},b?.map(R=>T&&(R.value===void 0||R.value===c.T)?null:a.createElement("span",{key:R.key,className:O.rowWrapper},a.createElement("span",{className:O.rowValue},R.value))))},f=P=>{const b=P.isDark?"#ce9178":"#a31515",T=P.isDark?"#73bf69":"#56a64b";return{metricName:(0,n.css)`
      color: ${T};
    `,metricValue:(0,n.css)`
      color: ${b};
    `,expanded:(0,n.css)`
      display: block;
      text-indent: 1em;
    `}},v=({value:P,index:b,length:T,isExpandedView:O})=>{const R=(0,o.wW)(f),I=P.key,M=P.value;return a.createElement("span",{className:O?R.expanded:"",key:b},a.createElement("span",{className:R.metricName},I),a.createElement("span",null,"="),a.createElement("span",null,'"'),a.createElement("span",{className:R.metricValue},M),a.createElement("span",null,'"'),b<T-1&&a.createElement("span",null,", "))},E="20px",p="80px",h="25px",s=(P,b,T)=>({rowWrapper:(0,n.css)`
    border-bottom: 1px solid ${P.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${T?"":"align-items: center;"}
    ${T?"":"height: 100%;"}
  `,copyToClipboardWrapper:(0,n.css)`
    position: absolute;
    left: 0;
    ${T?"":"bottom: 0;"}
    ${T?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:(0,n.css)`
    position: relative;
    width: calc(100% - (${b} * ${p}) - ${h});
  `,rowLabelWrap:(0,n.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${E};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${E}),
        ${P.colors.background.primary}
      );
    }
  `});function y(P){let b=[],T=[];for(const O in P)O in P&&P[O]&&!O.includes("Value")?b.push({key:O,value:P[O]}):O in P&&P[O]&&O.includes("Value")&&T.push({key:O,value:P[O]});return{values:T,attributeValues:b}}const C=({listItemData:P,listKey:b,totalNumberOfValues:T,valueLabels:O,isExpandedView:R})=>{const{__name__:I,...M}=P,[x,L]=(0,i.Z)(),S=O?.length??T,U=(0,o.wW)(s,S,R),{values:N,attributeValues:w}=y(M),G=k=>k==="\u221E"||k==="Infinity"?"+Inf":k,_=`${I}{${w.map(k=>`${k.key}="${G(k.value)}"`)}}`,K=!!(O&&O?.length);return a.createElement(a.Fragment,null,O!==void 0&&R&&a.createElement(u.I,{valueLabels:O,expanded:R}),a.createElement("div",{key:b,className:U.rowWrapper},a.createElement("span",{className:U.copyToClipboardWrapper},a.createElement(g.h,{tooltip:"Copy to clipboard",onClick:()=>{(0,r.ff)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),L(_)},name:"copy"})),a.createElement("span",{role:"cell",className:U.rowLabelWrapWrap},a.createElement("div",{className:U.rowLabelWrap},a.createElement("span",null,I),a.createElement("span",null,"{"),a.createElement("span",null,w.map((k,z)=>a.createElement(v,{isExpandedView:R,value:k,key:z,index:z,length:w.length}))),a.createElement("span",null,"}"))),a.createElement(d,{hideFieldsWithoutValues:K,totalNumberOfValues:S,values:N})))}},78621:(Q,A,e)=>{"use strict";e.d(A,{T:()=>a,u:()=>i});var n=e(86850);const a=" ",i=r=>{const o={},g=[],u=r.fields.filter(d=>!["Time"].includes(d.name));let c=u.find(d=>d.name==="__name__")?.values??[];!c.length&&u.length&&u[0].values.length&&(c=Array(u[0].values.length).fill(""));const l=r.fields.filter(d=>!["__name__"].includes(d.name));return c.forEach(function(d,f){o[d]={};const m=o[d][f]??{};for(const v of l){const E=v.name;if(E!=="Time")if(typeof v?.display=="function"){const p=v?.display(v.values[f]);if(!isNaN(p.numeric))m[E]=p.numeric.toString(10);else{const h=(0,n.zc)(p);h?m[E]=h:E.includes("Value #")&&(m[E]=a)}}else console.warn("Field display method is missing!")}g.push({...m,__name__:d})}),g}},16835:(Q,A,e)=>{"use strict";e.d(A,{q:()=>i});var n=e(31733),a=e(74011);const i=({timeInMs:o,className:g,humanize:u})=>n.createElement("span",{className:g},r(o,u)),r=(o,g=!1)=>{const u=o/1e3;if(!g)return`${u.toFixed(1)}s`;const c=(0,a.Ks)(u,"seconds"),l=c.hours(),d=c.minutes(),f=c.seconds();return l?`${l}h ${d}m ${f}s`:d?`${d}m ${f}s`:`${f}s`}},81811:(Q,A,e)=>{"use strict";e.d(A,{m:()=>je});var n=e(76932),a=e(31733),i=e(83870),r=e(44343),o=e(81548),g=e(61129),u=e(76067),c=e(42302),l=e(97001),d=e(1066),f=e(42342),m=e(41655),v=e(12179),E=e(90093);const h=(Fe,Te,Ve)=>{let tt;return Ve?tt=Te?.childSpanIds.find(ae=>Fe.has(ae)&&Fe.get(ae).startTime+Fe.get(ae).duration<Ve):tt=Te.childSpanIds[0],tt?Fe.get(tt):void 0},y=Fe=>{const Te=[],Ve=[];Fe.forEach(J=>{if(J.references[0]?.refType==="FOLLOWS_FROM"){Te.push(J.spanID);const te=Fe.get(J.references[0].spanID);te.childSpanIds=te.childSpanIds.filter(de=>de!==J.spanID),Fe.set(te.spanID,{...te})}});const tt=J=>{J.forEach(te=>{const de=Fe.get(te);de.hasChildren&&(Ve.push(...de.childSpanIds),tt(de.childSpanIds))})};return tt(Te),[...Te,...Ve].forEach(J=>Fe.delete(J)),Fe},C=Fe=>{let Te=[...Fe.keys()];return Te.forEach(Ve=>{const tt=Fe.get(Ve);if(!(tt&&tt.references.length&&tt.depth))return;const ae=Fe.get(tt.references[0].spanID);if(!ae){Fe.delete(tt.spanID);return}const J=tt.startTime+tt.duration,te=ae.startTime+ae.duration;if(tt.startTime>=ae.startTime){if(tt.startTime>=te){Fe.delete(tt.spanID),ae.childSpanIds=ae.childSpanIds.filter(de=>de!==tt.spanID);return}if(J>te){Fe.set(tt.spanID,{...tt,duration:te-tt.startTime});return}return}J<=ae.startTime?(Fe.delete(tt.spanID),ae.childSpanIds=ae.childSpanIds.filter(de=>de!==tt.spanID)):J<=te?Fe.set(tt.spanID,{...tt,startTime:ae.startTime,duration:J-ae.startTime}):Fe.set(tt.spanID,{...tt,startTime:ae.startTime,duration:te-ae.startTime})}),Te=[...Fe.keys()],Te.forEach(Ve=>{const tt=Fe.get(Ve);if(tt.references.length){const ae=Fe.get(tt.references[0].spanID);tt.references[0].span=ae,Fe.set(Ve,{...tt})}}),Fe},P=(Fe,Te,Ve,tt)=>{const ae=Fe.get(Te);if(!ae)return Ve;const J=h(Fe,ae,tt);let te;if(J)te={spanId:ae.spanID,section_start:J.startTime+J.duration,section_end:tt||ae.startTime+ae.duration},te.section_start!==te.section_end&&Ve.push(te),P(Fe,J.spanID,Ve);else if(te={spanId:ae.spanID,section_start:ae.startTime,section_end:tt||ae.startTime+ae.duration},te.section_start!==te.section_end&&Ve.push(te),ae.references.length){const de=ae.references.filter(be=>be.refType==="CHILD_OF")[0].spanID;P(Fe,de,Ve,ae.startTime)}return Ve};function b(Fe){let Te=[];const Ve=Fe?.spans[0].spanID;if(Ve){const tt=Fe.spans.reduce((ae,J)=>(ae.set(J.spanID,J),ae),new Map);try{const ae=y(tt),J=C(ae);Te=P(J,Ve,Te)}catch(ae){console.log("error while computing critical path for a trace",ae)}}return Te}const O=(0,E.Z)(b);var R=e(52083),I=e.n(R),M=e(91884),x=e(33227),L=e(46133),S=e(17739);const U=.8,N=2,w=200,G=10,_=60,K=6;function k(Fe,Te,Ve,tt,ae){const J=new Map,te=Te.length<_?_:Math.min(Te.length,w),de=window.innerWidth*2;Fe.width=de,Fe.height=te;const be=Math.min(K,Math.max(N,te/Te.length)),De=te/Te.length,Ue=Fe.getContext("2d",{alpha:!1});if(Ue){Ue.fillStyle=ae,Ue.fillRect(0,0,de,te);for(let We=0;We<Te.length;We++){const{valueWidth:et,valueOffset:ze,serviceName:_e}=Te[We],qe=ze/Ve*de;let at=et/Ve*de;at<G&&(at=G);let lt=J.get(_e);lt||(lt=`rgba(${tt(_e).concat(U).join()})`,J.set(_e,lt)),Ue.fillStyle=lt,Ue.fillRect(qe,We*De,at,be)}}}const z=(0,x.B)(Fe=>({CanvasSpanGraph:(0,n.css)`
      label: CanvasSpanGraph;
      background: ${(0,L.h)(Fe,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class W extends a.PureComponent{constructor(Te){super(Te),this.getColor=Ve=>(0,S.e6)(Ve,this.props.theme),this._setCanvasRef=Ve=>{this._canvasElm=Ve},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:Te,items:Ve}=this.props;k(this._canvasElm,Ve,Te,this.getColor,(0,L.h)(this.props.theme,"#fff"))}}render(){return a.createElement("canvas",{className:z(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const Z=(0,u.HE)(W);var H=e(84403);const X=()=>({TickLabels:(0,n.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,n.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function Y(Fe){const{numTicks:Te,duration:Ve}=Fe,tt=(0,u.wW)(X),ae=[];for(let J=0;J<Te+1;J++){const te=J/Te,de=te===1?{right:"0%"}:{left:`${te*100}%`};ae.push(a.createElement("div",{key:te,className:tt.TickLabelsLabel,style:de,"data-testid":"tick"},(0,H.LU)(Ve*te)))}return a.createElement("div",{className:tt.TickLabels,"data-testid":"TickLabels"},ae)}var ne=e(51343),se=e(73118);const re=()=>({GraphTick:(0,n.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function ge(Fe){const{numTicks:Te}=Fe,Ve=(0,u.wW)(re),tt=[];for(let ae=1;ae<Te;ae++){const J=`${ae/Te*100}%`;tt.push(a.createElement("line",{className:Ve.GraphTick,x1:J,y1:"0%",x2:J,y2:"100%",key:ae/Te}))}return a.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},tt)}const q=()=>({ScrubberHandleExpansion:I()((0,n.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:I()((0,n.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:I()((0,n.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,n.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,n.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function me({isDragging:Fe,onMouseDown:Te,onMouseEnter:Ve,onMouseLeave:tt,position:ae}){const J=`${ae*100}%`,te=(0,u.wW)(q),de=I()({[te.ScrubberDragging]:Fe});return a.createElement("g",{className:de,"data-testid":"scrubber-component"},a.createElement("g",{"data-testid":"scrubber-component-g",className:te.ScrubberHandles,onMouseDown:Te,onMouseEnter:Ve,onMouseLeave:tt},a.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:J,className:te.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),a.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:J,className:te.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),a.createElement("line",{className:te.ScrubberLine,y2:"100%",x1:J,x2:J,"data-testid":"scrubber-component-line"}))}const oe=(0,x.B)(Fe=>{const Te="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Ve=(0,n.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,n.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${Te} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,n.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,L.h)(Fe,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,n.css)`
      label: ViewingLayerInactive;
      fill: ${(0,L.h)(Fe,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,n.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,L.h)(Fe,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,n.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,n.css)`
      label: ViewingLayerDrag;
      fill: ${(0,L.h)(Fe,"#44f")};
    `,ViewingLayerFullOverlay:(0,n.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Ve,ViewingLayerResetZoomHoverClassName:Te}}),fe={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function ve(Fe,Te){const[Ve,tt]=Fe<Te?[Fe,Te]:[Te,Fe];return{x:`${Ve*100}%`,width:`${(tt-Ve)*100}%`,leadingX:`${Te*100}%`}}class pe extends a.PureComponent{constructor(Te){super(Te),this._setRoot=Ve=>{this._root=Ve},this._getDraggingBounds=Ve=>{if(!this._root)throw new Error("invalid state");const{left:tt,width:ae}=this._root.getBoundingClientRect(),[J,te]=this.props.viewRange.time.current;let de=1,be=0;return Ve===fe.SHIFT_START?de=te:Ve===fe.SHIFT_END&&(be=J),{clientXLeft:tt,maxValue:de,minValue:be,width:ae}},this._handleReframeMouseMove=({value:Ve})=>{this.props.updateNextViewRangeTime({cursor:Ve})},this._handleReframeMouseLeave=()=>{this._draggerReframe.resetBounds(),this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Ve})=>{const tt=Ve,{time:ae}=this.props.viewRange,te={reframe:{anchor:ae.reframe?ae.reframe.anchor:tt,shift:tt}};this.props.updateNextViewRangeTime(te)},this._handleReframeDragEnd=({manager:Ve,value:tt})=>{const{time:ae}=this.props.viewRange,J=ae.reframe?ae.reframe.anchor:tt,[te,de]=tt<J?[tt,J]:[J,tt];Ve.resetBounds(),this.props.updateViewRangeTime(te,de,"minimap")},this._handleScrubberEnterLeave=({type:Ve})=>{const tt=Ve===se.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:tt})},this._handleScrubberDragUpdate=({event:Ve,tag:tt,type:ae,value:J})=>{ae===se.EUpdateTypes.DragStart&&Ve.stopPropagation(),tt===fe.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:J}):tt===fe.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:J})},this._handleScrubberDragEnd=({manager:Ve,tag:tt,value:ae})=>{const[J,te]=this.props.viewRange.time.current;let de;if(tt===fe.SHIFT_START)de=[ae,te];else if(tt===fe.SHIFT_END)de=[J,ae];else throw new Error("bad state");Ve.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(de[0],de[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new se.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:fe.REFRAME}),this._draggerStart=new se.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:fe.SHIFT_START}),this._draggerEnd=new se.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:fe.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(Te,Ve){const tt=oe(this.props.theme),ae=ve(Te,Ve);return[a.createElement("rect",{key:"fill",className:I()(tt.ViewingLayerDraggedShift,tt.ViewingLayerDrag),x:ae.x,y:"0",width:ae.width,height:this.props.height-2}),a.createElement("rect",{key:"edge",className:I()(tt.ViewingLayerDrag),x:ae.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:Te,viewRange:Ve,numTicks:tt,theme:ae}=this.props,{preventCursorLine:J}=this.state,{current:te,cursor:de,shiftStart:be,shiftEnd:De,reframe:Ue}=Ve.time,We=be!=null||De!=null||Ue!=null,[et,ze]=te;let _e=0;et&&(_e=et*100);let qe=100;ze&&(qe=100-ze*100);let at;!We&&de!=null&&!J&&(at=`${de*100}%`);const lt=oe(ae);return a.createElement("div",{"aria-hidden":!0,className:lt.ViewingLayer,style:{height:Te}},(et!==0||ze!==1)&&a.createElement(ne.zx,{onClick:this._resetTimeZoomClickHandler,className:I()(lt.ViewingLayerResetZoom,lt.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),a.createElement("svg",{height:Te,className:lt.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},_e>0&&a.createElement("rect",{x:0,y:0,height:"100%",width:`${_e}%`,className:lt.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),qe>0&&a.createElement("rect",{x:`${100-qe}%`,y:0,height:"100%",width:`${qe}%`,className:lt.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),a.createElement(ge,{numTicks:tt}),at&&a.createElement("line",{className:lt.ViewingLayerCursorGuide,x1:at,y1:"0",x2:at,y2:Te-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),be!=null&&this._getMarkers(et,be),De!=null&&this._getMarkers(ze,De),a.createElement(me,{isDragging:be!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:et||0}),a.createElement(me,{isDragging:De!=null,position:ze||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),Ue!=null&&this._getMarkers(Ue.anchor,Ue.shift)),We&&a.createElement("div",{className:lt.ViewingLayerFullOverlay}))}}const Me=(0,u.HE)(pe),Pe=60,Ee=4;function he(Fe){return{valueOffset:Fe.relativeStartTime,valueWidth:Fe.duration,serviceName:Fe.process.serviceName}}function Le(Fe){return Fe.spans.map(he)}const ke=(0,E.Z)(Le);class ot extends a.PureComponent{render(){const{height:Te,trace:Ve,viewRange:tt,updateNextViewRangeTime:ae,updateViewRangeTime:J}=this.props;if(!Ve)return a.createElement("div",null);const te=ke(Ve);return a.createElement("div",{className:I()(M.GL,M.H3)},a.createElement(Y,{numTicks:Ee,duration:Ve.duration}),a.createElement("div",{className:M.WW},a.createElement(Z,{valueWidth:Ve.duration,items:te}),a.createElement(Me,{viewRange:tt,numTicks:Ee,height:Te||Pe,updateViewRangeTime:J,updateNextViewRangeTime:ae})))}}ot.defaultProps={height:Pe};var it=e(11992);function ce(){const[Fe,Te]=(0,a.useState)(new Set),Ve=(0,a.useCallback)(function(be){if(Fe.size===0)return;let De=-1,Ue=!0;const We=be.reduce((et,ze)=>(ze.depth<=De&&(Ue=!0),Ue&&et.has(ze.spanID)&&(et.delete(ze.spanID),Ue=!1,De=ze.depth),et),new Set(Fe));Te(We)},[Fe]),tt=(0,a.useCallback)(function(be){if(le(be,Fe))return;let De;const Ue=be.reduce((We,et)=>(De&&et.depth<=De.depth?(We.add(De.spanID),et.hasChildren&&(De=et)):et.hasChildren&&!We.has(et.spanID)&&(De=et),We),new Set(Fe));De&&Ue.add(De.spanID),Te(Ue)},[Fe]),ae=(0,a.useCallback)(function(){Te(new Set)},[]),J=(0,a.useCallback)(function(be){if(le(be,Fe))return;const De=be.reduce((Ue,We)=>(We.hasChildren&&Ue.add(We.spanID),Ue),new Set);Te(De)},[Fe]),te=(0,a.useCallback)(function(be){const De=new Set(Fe);Fe.has(be)?De.delete(be):De.add(be),Te(De)},[Fe]);return{childrenHiddenIDs:Fe,expandOne:Ve,collapseOne:tt,expandAll:ae,collapseAll:J,childrenToggle:te}}function le(Fe,Te){return Fe.filter(tt=>tt.hasChildren).length===Te.size}function Re(Fe){const[Te,Ve]=(0,a.useState)(new Map);(0,a.useEffect)(()=>{Ve(new Map)},[Fe,Ve]);const tt=(0,a.useCallback)(function(de){const be=new Map(Te);be.has(de)?be.delete(de):be.set(de,new v.DetailState),Ve(be)},[Te]),ae=(0,a.useCallback)(function(de,be){const De=Te.get(de);if(!De)return;const Ue=De.toggleLogItem(be),We=new Map(Te);return We.set(de,Ue),Ve(We)},[Te]),J=(0,a.useCallback)(function(de,be){const De=Te.get(de);if(!De)return;const Ue=De.toggleReferenceItem(be),We=new Map(Te);return We.set(de,Ue),Ve(We)},[Te]);return{detailStates:Te,toggleDetail:tt,detailLogItemToggle:ae,detailLogsToggle:(0,a.useCallback)(te=>Ae("logs",Te,Ve)(te),[Te]),detailWarningsToggle:(0,a.useCallback)(te=>Ae("warnings",Te,Ve)(te),[Te]),detailStackTracesToggle:(0,a.useCallback)(te=>Ae("stackTraces",Te,Ve)(te),[Te]),detailReferenceItemToggle:J,detailReferencesToggle:(0,a.useCallback)(te=>Ae("references",Te,Ve)(te),[Te]),detailProcessToggle:(0,a.useCallback)(te=>Ae("process",Te,Ve)(te),[Te]),detailTagsToggle:(0,a.useCallback)(te=>Ae("tags",Te,Ve)(te),[Te])}}function Ae(Fe,Te,Ve){return tt=>{const ae=Te.get(tt);if(!ae)return;let J;Fe==="tags"?J=ae.toggleTags():Fe==="process"?J=ae.toggleProcess():Fe==="warnings"?J=ae.toggleWarnings():Fe==="references"?J=ae.toggleReferences():Fe==="stackTraces"?J=ae.toggleStackTraces():J=ae.toggleLogs();const te=new Map(Te);te.set(tt,J),Ve(te)}}function Oe(){const[Fe,Te]=(0,a.useState)(new Set),Ve=(0,a.useCallback)(function(J){Te(te=>{const de=new Set(te);return de.add(J),de})},[]),tt=(0,a.useCallback)(function(J){Te(te=>{const de=new Set(te);return de.delete(J),de})},[]);return{hoverIndentGuideIds:Fe,addHoverIndentGuideId:Ve,removeHoverIndentGuideId:tt}}var $e=e(65908);function Ye(){const[Fe,Te]=(0,a.useState)({time:{current:[0,1]}}),Ve=(0,a.useCallback)(function(J){Te(te=>{const de={...te.time,...J};return{...te,time:de}})},[]),tt=(0,a.useCallback)(function(J,te){const be={current:[J,te]};Te(De=>({...De,time:be}))},[]);return{viewRange:Fe,updateViewRangeTime:tt,updateNextViewRangeTime:Ve}}const Ne=Fe=>({noDataMsg:(0,n.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Fe.typography.h4.fontSize};
    color: ${Fe.colors.text.secondary};
  `});function je(Fe){const{traceProp:Te,datasource:Ve,topOfViewRef:tt,exploreId:ae,createSpanLink:J}=Fe,{detailStates:te,toggleDetail:de,detailLogItemToggle:be,detailLogsToggle:De,detailProcessToggle:Ue,detailReferencesToggle:We,detailReferenceItemToggle:et,detailTagsToggle:ze,detailWarningsToggle:_e,detailStackTracesToggle:qe}=Re(Fe.dataFrames[0]),{removeHoverIndentGuideId:at,addHoverIndentGuideId:lt,hoverIndentGuideIds:ft}=Oe(),{viewRange:yt,updateViewRangeTime:wt,updateNextViewRangeTime:zt}=Ye(),{expandOne:$t,collapseOne:Ie,childrenToggle:st,collapseAll:Mt,childrenHiddenIDs:ct,expandAll:nt}=ce(),{search:Ct,setSearch:kt,spanFilterMatches:Jt}=(0,$e.Rx)(Te?.spans),[tn,Kt]=(0,a.useState)(""),[cn,dn]=(0,i.Z)(!1),[Sn,Zn]=(0,a.useState)(!1),[_n,Ut]=(0,a.useState)(!1),[Xt,en]=(0,a.useState)(100),[gn,ln]=(0,a.useState)({}),[xn,Dn]=(0,a.useState)({}),Ln=(0,u.wW)(Ne),[hn,Gn]=(0,a.useState)(.4),[Vn,$n]=ut({refId:Fe.dataFrames[0]?.refId,exploreId:Fe.exploreId,datasource:Ve,splitOpenFn:Fe.splitOpenFn}),Wn=(0,a.useMemo)(()=>({childrenHiddenIDs:ct,detailStates:te,hoverIndentGuideIds:ft,spanNameColumnWidth:hn,traceID:Fe.traceProp?.traceID}),[ct,te,ft,hn,Fe.traceProp?.traceID]),Pn=(0,l.ak)().getInstanceSettings(Ve?.name),sa=(0,c.p1)(Pn?.jsonData),An=Pn?.jsonData?.tracesToMetrics,ra=Pn?.jsonData?.tracesToProfiles,ga=Pn?.jsonData,ys=(0,a.useMemo)(()=>J??(0,it.yj)({splitOpenFn:Fe.splitOpenFn,traceToLogsOptions:sa,traceToMetricsOptions:An,traceToProfilesOptions:ra,dataFrame:Fe.dataFrames[0],createFocusSpanLink:$n,trace:Te}),[Fe.splitOpenFn,sa,An,ra,Fe.dataFrames,$n,Te,J]),ds=(0,f.useSelector)(Es=>(0,d.Z)(Es.user)),Ja=Ve?Ve?.type:"unknown",_a=Fe.scrollElement?Fe.scrollElement:document.getElementsByClassName(Fe.scrollElementClass??"")[0],ls=O(Te);return a.createElement(a.Fragment,null,Fe.dataFrames?.length&&Te?a.createElement(a.Fragment,null,a.createElement(v.TracePageHeader,{trace:Te,data:Fe.dataFrames[0],timeZone:ds,search:Ct,setSearch:kt,showSpanFilters:cn,setShowSpanFilters:dn,showSpanFilterMatchesOnly:Sn,setShowSpanFilterMatchesOnly:Zn,showCriticalPathSpansOnly:_n,setShowCriticalPathSpansOnly:Ut,setFocusedSpanIdForSearch:Kt,spanFilterMatches:Jt,datasourceType:Ja,setHeaderHeight:en,app:ae?r.zj.Explore:r.zj.Unknown}),a.createElement(ot,{trace:Te,viewRange:yt,updateNextViewRangeTime:zt,updateViewRangeTime:wt}),a.createElement(v.TraceTimelineViewer,{findMatchesIDs:Jt,trace:Te,traceToProfilesOptions:ra,datasourceType:Ja,spanBarOptions:ga?.spanBar,traceTimeline:Wn,updateNextViewRangeTime:zt,updateViewRangeTime:wt,viewRange:yt,timeZone:ds,setSpanNameColumnWidth:Gn,collapseAll:Mt,collapseOne:Ie,expandAll:nt,expandOne:$t,childrenToggle:st,detailLogItemToggle:be,detailLogsToggle:De,detailWarningsToggle:_e,detailStackTracesToggle:qe,detailReferencesToggle:We,detailReferenceItemToggle:et,detailProcessToggle:Ue,detailTagsToggle:ze,detailToggle:de,addHoverIndentGuideId:lt,removeHoverIndentGuideId:at,linksGetter:()=>[],createSpanLink:ys,scrollElement:_a,focusedSpanId:Vn,focusedSpanIdForSearch:tn,showSpanFilterMatchesOnly:Sn,showCriticalPathSpansOnly:_n,createFocusSpanLink:$n,topOfViewRef:tt,headerHeight:Xt,criticalPath:ls,traceFlameGraphs:gn,setTraceFlameGraphs:ln,redrawListView:xn,setRedrawListView:Dn})):a.createElement("div",{className:Ln.noDataMsg},"No data"))}function ut(Fe){const Te=(0,f.useSelector)(de=>de.explore.panes[Fe.exploreId]?.panelsState.trace),Ve=Te?.spanId,tt=(0,f.useDispatch)(),ae=de=>tt((0,m.km)(Fe.exploreId,"trace",{...Te,spanId:de})),J=(0,f.useSelector)(de=>de.explore.panes[Fe.exploreId]?.queries.find(be=>be.refId===Fe.refId));return[Ve,(de,be)=>{const De={title:"Deep link to this span",url:"",internal:{datasourceUid:Fe.datasource?.uid,datasourceName:Fe.datasource?.name,query:{...J,query:de},panelsState:{trace:{spanId:be}}}},Ue=J?.queryType==="traceql"&&J.query===de;return(0,o._)({link:De,internalLink:De.internal,scopedVars:{},field:{},onClickFn:Ue?()=>ae(Ve===be?void 0:be):Fe.splitOpenFn?()=>Fe.splitOpenFn({datasourceUid:Fe.datasource?.uid,queries:[{...J,query:de}],panelsState:{trace:{spanId:be}}}):void 0,replaceVariables:(0,g.J)().replace.bind((0,g.J)())})}]}},46133:(Q,A,e)=>{"use strict";e.d(A,{h:()=>a});var n=e(37479);function a(i,r,o){if(i.isLight)return r;{if(o){const c=(0,n.Z)(r);return n.Z.mostReadable(o,[c.clone().lighten(25),c.clone().lighten(10),c,c.clone().darken(10),c.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const g=(0,n.Z)(r).toHsl();g.l=1-g.l;const u=(0,n.Z)(g);return u.isLight()?u.darken(5).toHex8String():u.lighten(5).toHex8String()}}},12179:(Q,A,e)=>{"use strict";e.d(A,{DetailState:()=>gr,TracePageHeader:()=>Yr,TraceTimelineViewer:()=>mr,filterSpans:()=>Ho,transformTraceData:()=>ci});var n=e(76932),a=e(31733),i=e(64704),r=e(85498),o=e(33227),g=e(76067),u=e(46133),c=e(85908),l=e.n(c);const f={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let m;function v(){if(m)return m;const Ze=new(l())(document.body);return m=Ze,Ze}function E(Ze){const Je=v();Object.keys(Ze).forEach(Ge=>{const mt=Ze[Ge];mt&&Je.bind(f[Ge].binding,mt)})}function p(){v().reset()}var h=e(52083),s=e.n(h),y=e(91884),D=e(84403);function C(Ze){const{min:Je,max:Ge,viewStart:mt,viewEnd:St}=Ze,At=Ge-Je,Ft=Je+mt*At,an=Ge-(1-St)*At-Ft;return(sn,On)=>({start:(sn-Ft)/an,end:(On-Ft)/an})}function P(Ze,Je,Ge){return!Array.isArray(Ge.tags)||!Ge.tags.length?!1:Ge.tags.some(mt=>mt.key===Ze&&mt.value===Je)}const b=Ze=>Ze.kind==="client",T=P.bind(null,"span.kind","client"),O=Ze=>b(Ze)||T(Ze),R=Ze=>Ze.kind==="server",I=P.bind(null,"span.kind","server"),M=Ze=>R(Ze)||I(Ze),x=Ze=>Ze.statusCode===2,L=P.bind(null,"error",!0),S=P.bind(null,"error","true"),U=Ze=>x(Ze)||L(Ze)||S(Ze);function N(Ze,Je){const{depth:Ge}=Ze[Je];let mt=Je+1;for(;mt<Ze.length&&Ze[mt].depth>Ge;mt++)if(U(Ze[mt]))return!0;return!1}function w(Ze){if(Ze.length<=1||!O(Ze[0]))return!1;const Ge=Ze[0].depth+1;let mt=1;for(;mt<Ze.length&&Ze[mt].depth===Ge;){if(M(Ze[mt]))return Ze[mt];mt++}return null}const G=Ze=>Ze.kind?Ze.kind==="client":Ze.tags.some(({key:Je,value:Ge})=>Je==="span.kind"&&Ge==="client"),_=Ze=>({Ticks:(0,n.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,n.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,u.h)(Ze,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,n.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,n.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function K(Ze){const{endTime:Je,numTicks:Ge,showLabels:mt,startTime:St}=Ze;let At;if(mt){At=[];const an=(Je||0)-(St||0);for(let sn=0;sn<Ge;sn++){const On=(St||0)+sn/(Ge-1)*an;At.push((0,D.LU)(On))}}const Ft=(0,g.wW)(_),Qt=[];for(let an=0;an<Ge;an++){const sn=an/(Ge-1);Qt.push(a.createElement("div",{"data-testid":"TicksID",key:sn,className:Ft.TicksTick,style:{left:`${sn*100}%`}},At&&a.createElement("span",{className:s()(Ft.TicksTickLabel,{[Ft.TicksTickLabelEndAnchor]:sn>=1})},At[an])))}return a.createElement("div",{className:Ft.Ticks},Qt)}K.defaultProps={endTime:null,showLabels:null,startTime:null};const k=()=>({flexRow:(0,n.css)`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function z(Ze){const{children:Je,className:Ge="",...mt}=Ze,St=(0,g.wW)(k);return a.createElement("div",{className:s()(St.flexRow,Ge),...mt},Je)}z.defaultProps={className:""};function W(Ze){const{children:Je,className:Ge="",width:mt,style:St,...At}=Ze,Ft=`${mt*100}%`,Qt={...St,flexBasis:Ft,maxWidth:Ft};return a.createElement("div",{className:s()(y.WW,Ge),style:Qt,"data-testid":"TimelineRowCell",...At},Je)}W.defaultProps={className:"",style:{}},z.Cell=W;var Z=e(41354);const H=()=>({TimelineCollapser:(0,n.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function X(Ze){const{onExpandAll:Je,onExpandOne:Ge,onCollapseAll:mt,onCollapseOne:St}=Ze,At=(0,g.wW)(H);return a.createElement("div",{className:At.TimelineCollapser,"data-testid":"TimelineCollapser"},a.createElement(Z.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Ge}),a.createElement(Z.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:St}),a.createElement(Z.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:Je}),a.createElement(Z.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:mt}))}var Y=e(73118);const ne=(0,o.B)(()=>({TimelineColumnResizer:(0,n.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,n.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,n.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,n.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,n.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,n.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,n.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,n.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class se extends a.PureComponent{constructor(Je){super(Je),this._setRootElm=Ge=>{this._rootElm=Ge},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Ge,width:mt}=this._rootElm.getBoundingClientRect(),{min:St,max:At}=this.props;return{clientXLeft:Ge,width:mt,maxValue:At,minValue:St}},this._handleDragUpdate=({value:Ge})=>{this.setState({dragPosition:Ge})},this._handleDragEnd=({manager:Ge,value:mt})=>{Ge.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(mt)},this._dragManager=new Y.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let Je,Ge;const{position:mt,columnResizeHandleHeight:St}=this.props,{dragPosition:At}=this.state;Je=`${mt*100}%`;const Ft={left:Je};let Qt=!1,an=!1;const sn=ne();if(this._dragManager.isDragging()&&this._rootElm&&At!=null){Qt=At<mt,an=At>mt;const Bn=`${Math.min(mt,At)*100}%`,wn=`calc(${(1-Math.max(mt,At))*100}% - 1px)`;Ge={left:Bn,right:wn}}else Ge=Ft;Ge.height=St;const On=Qt||an;return a.createElement("div",{className:sn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},a.createElement("div",{className:s()(sn.gripIcon,On&&sn.gripIconDragging),style:Ft,"data-testid":"TimelineColumnResizer--gripIcon"}),a.createElement("div",{"aria-hidden":!0,className:s()(sn.dragger,On&&sn.draggerDragging,an&&sn.draggerDraggingRight,Qt&&sn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Ge,"data-testid":"TimelineColumnResizer--dragger"}))}}const re=(0,o.B)(()=>({TimelineViewingLayer:(0,n.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,n.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,n.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,n.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,n.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,n.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,n.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,n.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function ge(Ze){return Reflect.has(Ze,"isOutOfView")}function q(Ze,Je,Ge){return Ze+Ge*(Je-Ze)}function me(Ze,Je,Ge){return(Ge-Ze)/(Je-Ze)}function oe(Ze,Je){let[Ge,mt]=Ze<Je?[Ze,Je]:[Je,Ze];return Ge>=1||mt<=0?{isOutOfView:!0}:(Ge<0&&(Ge=0),mt>1&&(mt=1),{isDraggingLeft:Ze>Je,left:`${Ge*100}%`,width:`${(mt-Ge)*100}%`})}function fe(Ze,Je,Ge,mt,St){const At=me(Ze,Je,Ge),Ft=me(Ze,Je,mt),Qt=oe(At,Ft);if(ge(Qt))return null;const{isDraggingLeft:an,left:sn,width:On}=Qt,Bn=re(),wn=(0,n.cx)({[Bn.TimelineViewingLayerDraggedDraggingRight]:!an,[Bn.TimelineViewingLayerDraggedReframeDrag]:!St,[Bn.TimelineViewingLayerDraggedShiftDrag]:St});return a.createElement("div",{className:(0,n.cx)(Bn.TimelineViewingLayerDragged,Bn.TimelineViewingLayerDraggedDraggingLeft,wn),style:{left:sn,width:On},"data-testid":"Dragged"})}class ve extends a.PureComponent{constructor(Je){super(Je),this._setRoot=Ge=>{this._root=Ge},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Ge,width:mt}=this._root.getBoundingClientRect();return{clientXLeft:Ge,width:mt}},this._handleReframeMouseMove=({value:Ge})=>{const[mt,St]=this.props.viewRangeTime.current,At=q(mt,St,Ge);this.props.updateNextViewRangeTime({cursor:At})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Ge})=>{const{current:mt,reframe:St}=this.props.viewRangeTime,[At,Ft]=mt,Qt=q(At,Ft,Ge),sn={reframe:{anchor:St?St.anchor:Qt,shift:Qt}};this.props.updateNextViewRangeTime(sn)},this._handleReframeDragEnd=({manager:Ge,value:mt})=>{const{current:St,reframe:At}=this.props.viewRangeTime,[Ft,Qt]=St,an=q(Ft,Qt,mt),sn=At?At.anchor:an,[On,Bn]=an<sn?[an,sn]:[sn,an];Ge.resetBounds(),this.props.updateViewRangeTime(On,Bn,"timeline-header")},this._draggerReframe=new Y.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(Je){const{boundsInvalidator:Ge}=this.props;Ge!==Je.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:Je}=this.props,{current:Ge,cursor:mt,reframe:St,shiftEnd:At,shiftStart:Ft}=Je,[Qt,an]=Ge,sn=St!=null||At!=null||Ft!=null;let On;!sn&&mt!=null&&mt>=Qt&&mt<=an&&(On=`${me(Qt,an,mt)*100}%`);const Bn=re();return a.createElement("div",{"aria-hidden":!0,className:Bn.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},On!=null&&a.createElement("div",{className:Bn.TimelineViewingLayerCursorGuide,style:{left:On},"data-testid":"TimelineViewingLayer--cursorGuide"}),St!=null&&fe(Qt,an,St.anchor,St.shift,!1),At!=null&&fe(Qt,an,an,At,!0),Ft!=null&&fe(Qt,an,Qt,Ft,!0))}}const pe=Ze=>({TimelineHeaderRow:(0,n.css)`
      label: TimelineHeaderRow;
      background: ${(0,u.h)(Ze,"#ececec")};
      border-bottom: 1px solid ${(0,u.h)(Ze,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,n.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,n.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function Me(Ze){const{duration:Je,nameColumnWidth:Ge,numTicks:mt,onCollapseAll:St,onCollapseOne:At,onColummWidthChange:Ft,onExpandAll:Qt,onExpandOne:an,updateViewRangeTime:sn,updateNextViewRangeTime:On,viewRangeTime:Bn,columnResizeHandleHeight:wn}=Ze,[zn,ua]=Bn.current,jn=(0,g.wW)(pe);return a.createElement(z,{className:jn.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},a.createElement(z.Cell,{className:s()(y.oD,y.H3,jn.TimelineHeaderWrapper),width:Ge},a.createElement("h4",{className:jn.TimelineHeaderRowTitle},"Service & Operation"),a.createElement(X,{onCollapseAll:St,onExpandAll:Qt,onCollapseOne:At,onExpandOne:an})),a.createElement(z.Cell,{width:1-Ge},a.createElement(ve,{boundsInvalidator:Ge,updateNextViewRangeTime:On,updateViewRangeTime:sn,viewRangeTime:Bn}),a.createElement(K,{numTicks:mt,startTime:zn*Je,endTime:ua*Je,showLabels:!0})),a.createElement(se,{columnResizeHandleHeight:wn,position:Ge,onChange:Ft,min:.2,max:.85}))}var Pe=e(69781),Ee=e(90093),he=e(73351);const Le="peer.service";var ke=e(17739);class ot{constructor(Je){this.ys=[],this.heights=[],this.bufferLen=Je,this.dataLen=-1,this.lastI=-1}profileData(Je){Je!==this.dataLen&&(this.dataLen=Je,this.ys.length=Je,this.heights.length=Je,this.lastI>=Je&&(this.lastI=Je-1))}calcHeights(Je,Ge,mt){mt!=null&&(this.lastI=mt);let St=Je+this.bufferLen;if(St<=this.lastI)return;St>=this.heights.length&&(St=this.heights.length-1);let At=this.lastI;for(this.lastI===-1&&(At=0,this.ys[0]=0);At<=St;){const Ft=this.heights[At]=Ge(At);this.ys[At+1]=this.ys[At]+Ft,At++}this.lastI=St}calcYs(Je,Ge){for(;(this.ys[this.lastI]==null||Je>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Ge)}confirmHeight(Je,Ge){let mt=Je;if(mt>this.lastI){this.calcHeights(mt,Ge);return}const St=Ge(mt);if(St===this.heights[mt])return;const At=St-this.heights[mt];for(this.heights[mt]=St;++mt<=this.lastI;)this.ys[mt]+=At;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=At)}findFloorIndex(Je,Ge){this.calcYs(Je,Ge);let mt=0,St=this.lastI;if(this.ys.length<2||Je<this.ys[1])return 0;if(Je>this.ys[St])return St;let At;for(;mt<St;)if(At=mt+.5*(St-mt)|0,Je>this.ys[At]){if(Je<=this.ys[At+1])return At;mt=At}else if(Je<this.ys[At]){if(Je>=this.ys[At-1])return At-1;St=At}else return At;throw new Error(`unable to find floor index for y=${Je}`)}getRowPosition(Je,Ge){return this.confirmHeight(Je,Ge),{height:this.heights[Je],y:this.ys[Je]}}getEstimatedHeight(){const Je=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?Je|0:Je/(this.lastI+1)*this.heights.length|0}}const it=100;class ce extends a.Component{constructor(Je){super(Je),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Ge=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Ge,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Ge=>this._yPositions.getRowPosition(Ge,this._getHeight),this.scrollToIndex=(Ge,mt)=>{const{scrollElement:St}=this.props,At=St?.getBoundingClientRect().top||0,Qt=(St?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-At,an=this.getRowPosition(Ge).y;this.props.scrollElement?.scrollTo({top:an+Qt-mt-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Ge=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,mt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Ge<this._startIndexDrawn||mt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Ge=>{this.props.windowScroller&&(this._wrapperElm=Ge,Ge&&(this._viewHeight=Ge.clientHeight))},this._initItemHolder=Ge=>{this._itemHolderElm=Ge,this._scanItemHeights()},this._scanItemHeights=()=>{const Ge=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let mt=null,St=null,At=!1;const Ft=this._itemHolderElm.childNodes,Qt=Ft.length;for(let an=0;an<Qt;an++){const sn=Ft[an];if(sn instanceof HTMLElement){const On=sn.getAttribute("data-item-key");if(!On){console.warn("itemKey not found");continue}const wn=(sn.firstElementChild||sn).clientHeight,zn=this._knownHeights.get(On);wn!==zn&&(this._knownHeights.set(On,wn),At?St=On:(At=!0,mt=St=On))}}if(mt!=null&&St!=null){const an=Ge(mt),sn=St===mt?an:Ge(St);this._yPositions.calcHeights(sn,this._getHeight,an),this.forceUpdate()}},this._getHeight=Ge=>{const mt=this.props.getKeyFromIndex(Ge),St=this._knownHeights.get(mt);return St!=null&&St===St?St:this.props.itemHeightGetter(Ge,mt)},this._yPositions=new ot(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:Je}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=Je+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(Je){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&Je.scrollElement!==this.props.scrollElement&&(Je.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const Je=this.props.windowScroller,Ge=Je?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,mt=Je?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Ge!==this._viewHeight||mt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Ge=this._scrollTop,mt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Ge,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(mt,this._getHeight)}render(){const{dataLength:Je,getKeyFromIndex:Ge,initialDraw:mt=it,itemRenderer:St,viewBuffer:At,viewBufferMin:Ft}=this.props,Qt=this._getHeight,an=[];let sn,On;if(this._yPositions.profileData(Je),!this._wrapperElm)sn=0,On=(mt<Je?mt:Je)-1;else{this._isViewChanged()&&this._calcViewIndexes();const zn=Ft>this._startIndex?0:this._startIndex-Ft,ua=Ft<Je-this._endIndex?this._endIndex+Ft:Je-1;zn<this._startIndexDrawn||ua>this._endIndexDrawn?(sn=At>this._startIndex?0:this._startIndex-At,On=this._endIndex+At,On>=Je&&(On=Je-1)):(sn=this._startIndexDrawn>Je-1?0:this._startIndexDrawn,On=this._endIndexDrawn>Je-1?Je-1:this._endIndexDrawn)}this._yPositions.calcHeights(On,Qt,sn||-1),this._startIndexDrawn=sn,this._endIndexDrawn=On,an.length=On-sn+1;for(let zn=sn;zn<=On;zn++){const{y:ua,height:jn}=this._yPositions.getRowPosition(zn,Qt),ha={height:jn,top:ua,position:"absolute"},la=Ge(zn),ma={"data-item-key":la};an.push(St(la,ha,zn,ma))}const Bn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(Bn.onScroll=this._onScroll,Bn.style.height="100%",Bn.style.overflowY="auto");const wn={position:"relative",height:this._yPositions.getEstimatedHeight()};return a.createElement("div",{...Bn,"data-testid":"ListView"},a.createElement("div",{style:wn},a.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},an)))}}ce.defaultProps={initialDraw:it,itemsWrapperClassName:"",windowScroller:!1};var le=e(49311),Re=e(18180),Ae=e(21568),Oe=e(58037),$e=e(72336),Ye=e(20425);function Ne({children:Ze,content:Je,overlayClassName:Ge}){const mt=(0,a.useRef)(null);return a.createElement($e.D,{content:Je,hideAfter:300},(St,At,Ft)=>a.createElement(a.Fragment,null,mt.current&&a.createElement(Ye.J,{...Ft,referenceElement:mt.current,wrapperClassName:Ge,onMouseLeave:At,onMouseEnter:St}),a.cloneElement(Ze,{ref:mt,onMouseEnter:St,onMouseLeave:At})))}const je="label";var ut=e(51343);const Fe=()=>({CopyIcon:(0,n.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function Te(Ze){const Je=(0,g.wW)(Fe),[Ge,mt]=(0,a.useState)(!1),St=()=>{navigator.clipboard.writeText(Ze.copyText),mt(!0)};return a.createElement(Oe.u,{content:Ge?"Copied":Ze.tooltipTitle},a.createElement(ut.zx,{className:s()(Je.CopyIcon),type:"button",icon:Ze.icon,onClick:St}))}Te.defaultProps={icon:"copy",className:void 0};var Ve=e(23932),tt=e.n(Ve);const ae="copyIcon",J=Ze=>({KeyValueTable:(0,n.css)`
      label: KeyValueTable;
      background: ${(0,u.h)(Ze,"#fff")};
      border: 1px solid ${(0,u.h)(Ze,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:(0,n.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,n.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,u.h)(Ze,"#f5f5f5")};
      }
      &:not(:hover) .${ae} {
        visibility: hidden;
      }
    `,keyColumn:(0,n.css)`
      label: keyColumn;
      color: ${(0,u.h)(Ze,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,n.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,n.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),te=/^(\[|\{)/;function de(Ze){if(typeof Ze=="string"&&te.test(Ze))try{return JSON.parse(Ze)}catch{}return Ze}const be=Ze=>a.createElement("a",{href:Ze.href,title:Ze.title,target:"_blank",rel:"noopener noreferrer"},Ze.children," ",a.createElement(le.J,{name:"external-link-alt"}));be.defaultProps={title:""};function De(Ze){const{data:Je,linksGetter:Ge}=Ze,mt=(0,g.wW)(J);return a.createElement("div",{className:s()(mt.KeyValueTable),"data-testid":"KeyValueTable"},a.createElement("table",{className:y.K9},a.createElement("tbody",{className:mt.body},Je.map((St,At)=>{const Ft={__html:tt()(de(St.value))},Qt=a.createElement("div",{className:y.b$,dangerouslySetInnerHTML:Ft}),an=Ge?Ge(Je,At):null;let sn;return an&&an.length?sn=a.createElement("div",null,a.createElement(be,{href:an[0].url,title:an[0].text},Qt)):sn=Qt,a.createElement("tr",{className:mt.row,key:`${St.key}-${At}`},a.createElement("td",{className:mt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},St.key),a.createElement("td",null,sn),a.createElement("td",{className:mt.copyColumn},a.createElement(Te,{className:ae,copyText:JSON.stringify(St,null,2),tooltipTitle:"Copy JSON"})))}))))}const Ue=Ze=>({header:(0,n.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Ze,"#e8e8e8")};
      }
    `,headerEmpty:(0,n.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,n.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,u.h)(Ze,"#ddd")};
      }
    `,emptyIcon:(0,n.css)`
      label: emptyIcon;
      color: ${(0,u.h)(Ze,"#aaa")};
    `,summary:(0,n.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,n.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,u.h)(Ze,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,n.css)`
      label: summaryLabel;
      color: ${(0,u.h)(Ze,"#777")};
    `,summaryDelim:(0,n.css)`
      label: summaryDelim;
      color: ${(0,u.h)(Ze,"#bbb")};
      padding: 0 0.2em;
    `});function We(Ze){const{data:Je}=Ze,Ge=(0,g.wW)(Ue);return!Array.isArray(Je)||!Je.length?null:a.createElement("ul",{className:Ge.summary},Je.map((mt,St)=>a.createElement("li",{className:Ge.summaryItem,key:`${mt.key}-${St}`},a.createElement("span",{className:Ge.summaryLabel},mt.key),a.createElement("span",{className:Ge.summaryDelim},"="),String(mt.value))))}We.defaultProps={data:null};function et(Ze){const{className:Je,data:Ge,highContrast:mt,interactive:St,isOpen:At,label:Ft,linksGetter:Qt,onToggle:an}=Ze,sn=!Array.isArray(Ge)||!Ge.length,On=(0,g.wW)(Ue),Bn=s()(y.Im,{[On.emptyIcon]:sn});let wn=null,zn=null;return St&&(wn=At?a.createElement(le.J,{name:"angle-down",className:Bn}):a.createElement(le.J,{name:"angle-right",className:Bn}),zn={"aria-checked":At,onClick:sn?null:an,role:"switch"}),a.createElement("div",{className:s()(Je,y.ty)},a.createElement("div",{className:s()(On.header,{[On.headerEmpty]:sn,[On.headerHighContrast]:mt&&!sn}),...zn,"data-testid":"AccordianKeyValues--header"},wn,a.createElement("strong",{"data-test":je},Ft,At||":"),!At&&a.createElement(We,{data:Ge})),At&&a.createElement(De,{data:Ge,linksGetter:Qt}))}et.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const ze=Ze=>({AccordianLogs:(0,n.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,u.h)(Ze,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,n.css)`
      label: AccordianLogsHeader;
      background: ${(0,u.h)(Ze,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Ze,"#dadada")};
      }
    `,AccordianLogsContent:(0,n.css)`
      label: AccordianLogsContent;
      background: ${(0,u.h)(Ze,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Ze,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,n.css)`
      label: AccordianLogsFooter;
      color: ${(0,u.h)(Ze,"#999")};
    `});function _e(Ze){const{interactive:Je,isOpen:Ge,linksGetter:mt,logs:St,openedItems:At,onItemToggle:Ft,onToggle:Qt,timestamp:an}=Ze;let sn=null,On="span",Bn=null;Je&&(sn=Ge?a.createElement(le.J,{name:"angle-down",className:y.Im}):a.createElement(le.J,{name:"angle-right",className:"u-align-icon"}),On="a",Bn={"aria-checked":Ge,onClick:Qt,role:"switch"});const wn=(0,g.wW)(ze);return a.createElement("div",{className:wn.AccordianLogs},a.createElement(On,{className:wn.AccordianLogsHeader,...Bn},sn," ",a.createElement("strong",null,"Events")," (",St.length,")"),Ge&&a.createElement("div",{className:wn.AccordianLogsContent},(0,Pe.sortBy)(St,"timestamp").map((zn,ua)=>a.createElement(et,{key:`${zn.timestamp}-${ua}`,className:ua<St.length-1?y.bi:null,data:zn.fields||[],highContrast:!0,interactive:Je,isOpen:At?At.has(zn):!1,label:`${(0,D.LU)(zn.timestamp-an)}`,linksGetter:mt,onToggle:Je&&Ft?()=>Ft(zn):null})),a.createElement("small",{className:wn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}_e.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const qe=Ze=>({wrapper:(0,n.css)({label:"wrapper",bottom:0,left:0,position:"absolute",right:0,top:0,overflow:"hidden",zIndex:0}),bar:(0,n.css)({label:"bar",borderRadius:Ze.shape.radius.default,minWidth:"2px",position:"absolute",height:"36%",top:"32%"}),rpc:(0,n.css)({label:"rpc",position:"absolute",top:"35%",bottom:"35%",zIndex:1}),label:(0,n.css)({label:"label",color:"#aaa",fontSize:"12px",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans - serif",lineHeight:"1em",whiteSpace:"nowrap",padding:"0 0.5em",position:"absolute"}),logMarker:(0,n.css)({label:"logMarker",backgroundColor:(0,u.h)(Ze,"#2c3235"),cursor:"pointer",height:"60%",minWidth:"1px",position:"absolute",top:"20%","&:hover":{backgroundColor:(0,u.h)(Ze,"#464c54")},"&::before, &::after":{content:"''",position:"absolute",top:0,bottom:0,right:0,border:"1px solid transparent"},"&::after":{left:0}}),criticalPath:(0,n.css)({position:"absolute",top:"45%",height:"11%",zIndex:2,overflow:"hidden",background:(0,u.h)(Ze,"#f1f1f1"),borderLeft:`1px solid ${(0,u.h)(Ze,"#2c3235")}`,borderRight:`1px solid ${(0,u.h)(Ze,"#2c3235")}`})});function at(Ze){return`${(Ze*100).toFixed(1)}%`}function lt(Ze){return`${Ze*100}%`}function ft({criticalPath:Ze,viewEnd:Je,viewStart:Ge,getViewedBounds:mt,color:St,shortLabel:At,longLabel:Ft,onClick:Qt,rpc:an,traceStartTime:sn,span:On,className:Bn,labelClassName:wn}){const[zn,ua]=(0,a.useState)(At),jn=()=>ua(At),ha=()=>ua(Ft),la=(0,Pe.groupBy)(On.logs,Fa=>{const oa=mt(Fa.timestamp,Fa.timestamp).start;return at(Math.round(oa*500)/500)}),ma=(0,g.wW)(qe);return a.createElement("div",{className:s()(ma.wrapper,Bn),onBlur:jn,onClick:Qt,onFocus:ha,onMouseOut:jn,onMouseOver:ha,"aria-hidden":!0,"data-testid":Ae.wl.components.TraceViewer.spanBar},a.createElement("div",{"aria-label":zn,className:s()(ma.bar),style:{background:St,left:at(Ge),width:at(Je-Ge)}},a.createElement("div",{className:s()(ma.label,wn),"data-testid":"SpanBar--label"},zn)),a.createElement("div",null,Object.keys(la).map(Fa=>a.createElement(Ne,{key:Fa,content:a.createElement(_e,{interactive:!1,isOpen:!0,logs:la[Fa],timestamp:sn})},a.createElement("div",{"data-testid":"SpanBar--logMarker",className:s()(ma.logMarker),style:{left:Fa}})))),an&&a.createElement("div",{className:s()(ma.rpc),style:{background:an.color,left:at(an.viewStart),width:at(an.viewEnd-an.viewStart)}}),Ze?.map((Fa,oa)=>{const Va=mt(Fa.section_start,Fa.section_end),Ya=Va.start,ps=Va.end,Ts=`${Fa.spanId}-${oa}`;return a.createElement(Oe.u,{key:Ts,placement:"top",content:a.createElement("div",null,"A segment on the ",a.createElement("em",null,"critical path")," of the overall trace/request/workflow.")},a.createElement("div",{"data-testid":"SpanBar--criticalPath",className:ma.criticalPath,style:{left:lt(Ya),width:lt(ps-Ya)}}))}))}const yt=a.memo(ft);var wt=e(46213),zt=e(45502);const $t=(Ze,Je,Ge,mt)=>(Ze.sort(function(St,At){return(St.title||"link").toLowerCase().localeCompare((At.title||"link").toLowerCase())}),Ze.map((St,At)=>a.createElement(wt.s,{key:At,label:St.title||"Link",onClick:St.onClick?Ft=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:mt,grafana_version:r.config.buildInfo.version,type:St.type,location:"menu"}),Ft?.preventDefault(),St.onClick(Ft),Ge()}:void 0,url:St.href,className:Je.menuItem}))),Ie=({links:Ze,datasourceType:Je,color:Ge})=>{const mt=(0,g.wW)(()=>st(Ge)),[St,At]=(0,a.useState)(!1),[Ft,Qt]=(0,a.useState)({x:0,y:0}),an=()=>At(!1);return a.createElement("div",{"data-testid":"SpanLinksMenu",className:mt.wrapper},a.createElement("button",{onClick:sn=>{At(!0),Qt({x:sn.pageX,y:sn.pageY})},className:mt.button},a.createElement(le.J,{name:"link",className:mt.icon})),St?a.createElement(zt.x,{onClose:()=>At(!1),renderMenuItems:()=>$t(Ze,mt,an,Je),focusOnOpen:!1,x:Ft.x,y:Ft.y}):null)},st=Ze=>({wrapper:(0,n.css)`
      border: none;
      background: ${Ze}10;
      border-bottom: 1px solid ${Ze}CF;
      padding-right: 4px;
    `,button:(0,n.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,icon:(0,n.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,menuItem:(0,n.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function Mt(Ze){return(0,Pe.get)((0,Pe.find)(Ze.references,({span:Je,refType:Ge})=>Je&&Je.spanID&&(Ge==="CHILD_OF"||Ge==="FOLLOWS_FROM")),"span")}function ct(Ze){const Je=[];if(!Ze)return Je;let Ge=Mt(Ze);for(;Ge;)Je.push(Ge.spanID),Ge=Mt(Ge);return Je}const nt=(0,o.B)(Ze=>({SpanTreeOffset:(0,n.css)`
      label: SpanTreeOffset;
      color: ${(0,u.h)(Ze,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,n.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,n.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: 1rem;
      height: 100%;
      display: inline-flex;
      transition: padding 300ms ease-out;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,u.h)(Ze,"lightgrey")};
      }
    `,indentGuideActive:(0,n.css)`
      label: indentGuideActive;
      &::before {
        background-color: ${(0,u.h)(Ze,"#777")};
      }
    `,indentGuideThin:(0,n.css)`
      padding-right: 0.3rem;
    `,iconWrapper:(0,n.css)`
      label: iconWrapper;
      position: absolute;
      right: 0;
    `}));class Ct extends a.PureComponent{constructor(Je){super(Je),this.handleMouseLeave=(Ge,mt)=>{(!(Ge.relatedTarget instanceof HTMLSpanElement)||(0,Pe.get)(Ge,"relatedTarget.dataset.ancestorId")!==mt)&&this.props.removeHoverIndentGuideId(mt)},this.handleMouseEnter=(Ge,mt)=>{(!(Ge.relatedTarget instanceof HTMLSpanElement)||(0,Pe.get)(Ge,"relatedTarget.dataset.ancestorId")!==mt)&&this.props.addHoverIndentGuideId(mt)},this.ancestorIds=ct(Je.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:Je,onClick:Ge,showChildrenIcon:mt,span:St,theme:At,visibleSpanIds:Ft}=this.props,{hasChildren:Qt,spanID:an}=St,sn=Qt?{onClick:Ge,role:"switch","aria-checked":Je}:null,On=mt&&Qt&&(Je?a.createElement(le.J,{name:"angle-down","data-testid":"icon-arrow-down",size:"sm"}):a.createElement(le.J,{name:"angle-right","data-testid":"icon-arrow-right",size:"sm"})),Bn=nt(At);return a.createElement("span",{className:s()(Bn.SpanTreeOffset,{[Bn.SpanTreeOffsetParent]:Qt}),...sn},this.ancestorIds.map((wn,zn)=>a.createElement("span",{key:wn,className:s()(Bn.indentGuide,{[Bn.indentGuideActive]:this.props.hoverIndentGuideIds.has(wn),[Bn.indentGuideThin]:zn!==this.ancestorIds.length-1&&wn!=="root"&&!Ft.includes(wn)}),"data-ancestor-id":wn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:ua=>this.handleMouseEnter(ua,wn),onMouseLeave:ua=>this.handleMouseLeave(ua,wn)})),On&&a.createElement("span",{className:Bn.iconWrapper,onMouseEnter:wn=>this.handleMouseEnter(wn,an),onMouseLeave:wn=>this.handleMouseLeave(wn,an),"data-testid":"icon-wrapper"},On))}}Ct.displayName="UnthemedSpanTreeOffset",Ct.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const kt=(0,g.HE)(Ct),Jt="spanBar",tn="spanBarLabel",Kt="nameWrapper",cn="nameWrapperMatchingFilter",dn="jaegerView",Sn="nameColumn",Zn=(0,o.B)((Ze,Je)=>{const Ge={label:"flash",flash:(0,n.keyframes)`
    from {
      background-color: ${(0,u.h)(Ze,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},mt=Je?"":(0,u.h)(Ze,"#fffce4");return{nameWrapper:(0,n.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,n.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${mt};
    `,nameColumn:(0,n.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,n.css)`
      label: endpointName;
      color: ${(0,u.h)(Ze,"#484848")};
      font-size: 0.9em;
    `,view:(0,n.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,n.css)`
      label: viewExpanded;
      background: ${(0,u.h)(Ze,"#f8f8f8")};
      outline: 1px solid ${(0,u.h)(Ze,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,n.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,u.h)(Ze,"#fff3d7")};
      outline: 1px solid ${(0,u.h)(Ze,"#ddd")};
    `,row:(0,n.css)`
      label: row;
      font-size: 0.9em;
      &:hover .${Jt} {
        opacity: 1;
      }
      &:hover .${tn} {
        color: ${(0,u.h)(Ze,"#000")};
      }
      &:hover .${Kt} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Ze,"#fafafa")},
          ${(0,u.h)(Ze,"#f8f8f8")} 75%,
          ${(0,u.h)(Ze,"#eee")}
        );
      }
      &:hover .${dn} {
        background-color: ${(0,u.h)(Ze,"#f5f5f5")};
        outline: 1px solid ${(0,u.h)(Ze,"#ddd")};
      }
    `,rowClippingLeft:(0,n.css)`
      label: rowClippingLeft;
      & .${Sn}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,u.h)(Ze,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Ze,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,n.css)`
      label: rowClippingRight;
      & .${dn}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,u.h)(Ze,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Ze,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,n.css)`
      label: rowExpanded;
      & .${Jt} {
        opacity: 1;
      }
      & .${tn} {
        color: ${(0,u.h)(Ze,"#000")};
      }
      & .${Kt}, &:hover .${Kt} {
        background: ${(0,u.h)(Ze,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,u.h)(Ze,"#ddd")};
      }
      & .${cn} {
        background: ${(0,u.h)(Ze,"#fff3d7")};
      }
      &:hover .${dn} {
        background: ${(0,u.h)(Ze,"#eee")};
      }
    `,rowMatchingFilter:(0,n.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,u.h)(Ze,"#fffbde")};
      &:hover .${Kt} {
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Ze,"#fffbde")},
          ${(0,u.h)(Ze,"#fffbde")} 75%,
          ${(0,u.h)(Ze,"#f7f1c6")}
        );
      }
      &:hover .${dn} {
        background-color: ${(0,u.h)(Ze,"#f7f1c6")};
        outline: 1px solid ${(0,u.h)(Ze,"#ddd")};
      }
    `,rowFocused:(0,n.css)`
      label: rowFocused;
      background-color: ${(0,u.h)(Ze,"#cbe7ff")};
      animation: ${Ge.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Kt}, .${dn}, .${cn} {
        background-color: ${(0,u.h)(Ze,"#cbe7ff")};
        animation: ${Ge.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Jt} {
        opacity: 1;
      }
      & .${tn} {
        color: ${(0,u.h)(Ze,"#000")};
      }
      &:hover .${Kt}, :hover .${dn} {
        background: ${(0,u.h)(Ze,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,u.h)(Ze,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,n.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${dn} {
        background: ${(0,u.h)(Ze,"#ffeccf")};
      }
    `,name:(0,n.css)`
      label: name;
      color: ${(0,u.h)(Ze,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > span {
        color: ${(0,u.h)(Ze,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
      border-bottom-width: 1px;
      border-bottom-style: solid;
    `,nameDetailExpanded:(0,n.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,n.css)`
      label: svcName;
      font-size: 0.9em;
      font-weight: bold;
      margin-right: 0.25rem;
    `,svcNameChildrenCollapsed:(0,n.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,n.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,u.h)(Ze,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,n.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,n.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,n.css)`
      label: labelLeft;
      right: 100%;
    `}});class _n extends a.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(Je,Ge,mt)=>{const St=Ge?.type??"";if(St===Re.Hn)return"";if(St===""||St===Re.th)return`(${mt})`;if(St===Re.Kg){const At=Ge?.tag?.trim()??"";if(At!==""&&Je.tags){const Ft=Je.tags?.find(an=>an.key===At);if(Ft)return`(${Ft.value})`;const Qt=Je.process?.tags?.find(an=>an.key===At);if(Qt)return`(${Qt.value})`}}return""}}render(){const{className:Je,color:Ge,spanBarOptions:mt,columnDivision:St,isChildrenExpanded:At,isDetailExpanded:Ft,isMatchingFilter:Qt,showSpanFilterMatchesOnly:an,isFocused:sn,numTicks:On,rpc:Bn,noInstrumentedServer:wn,showErrorIcon:zn,getViewedBounds:ua,traceStartTime:jn,span:ha,hoverIndentGuideIds:la,addHoverIndentGuideId:ma,removeHoverIndentGuideId:Fa,clippingLeft:oa,clippingRight:Va,theme:Ya,createSpanLink:ps,datasourceType:Ts,showServiceName:Cs,visibleSpanIds:vs,criticalPath:js}=this.props,{duration:ws,hasChildren:br,operationName:_r,process:{serviceName:Zr}}=ha,As=(0,D.LU)(ws),Pr=ua(ha.startTime,ha.startTime+ha.duration),$s=Pr.start,In=Pr.end,aa=Zn(Ya,an),Da=`${Zr}::${_r}`;let ja,Ls;return $s>1-In?(ja=`${Da} | ${As}`,Ls=aa.labelLeft):(ja=`${As} | ${Da}`,Ls=aa.labelRight),a.createElement(z,{className:s()(aa.row,{[aa.rowExpanded]:Ft,[aa.rowMatchingFilter]:Qt,[aa.rowExpandedAndMatchingFilter]:Qt&&Ft,[aa.rowFocused]:sn,[aa.rowClippingLeft]:oa,[aa.rowClippingRight]:Va},Je)},a.createElement(z.Cell,{className:s()(aa.nameColumn,Sn),width:St},a.createElement("div",{className:s()(aa.nameWrapper,Kt,{[aa.nameWrapperMatchingFilter]:Qt,nameWrapperMatchingFilter:Qt})},a.createElement(kt,{onClick:br?this._childrenToggle:void 0,childrenVisible:At,span:ha,hoverIndentGuideIds:la,addHoverIndentGuideId:ma,removeHoverIndentGuideId:Fa,visibleSpanIds:vs}),a.createElement("button",{type:"button",className:s()(aa.name,{[aa.nameDetailExpanded]:Ft}),"aria-checked":Ft,title:Da,onClick:this._detailToggle,role:"switch",style:{background:`${Ge}10`,borderBottomColor:`${Ge}CF`},tabIndex:0},zn&&a.createElement(le.J,{name:"exclamation-circle",style:{backgroundColor:ha.errorIconColor?(0,u.h)(Ya,ha.errorIconColor):(0,u.h)(Ya,"#db2828")},className:aa.errorIcon}),Cs&&a.createElement("span",{className:s()(aa.svcName,{[aa.svcNameChildrenCollapsed]:br&&!At})},`${Zr} `),Bn&&a.createElement("span",null,a.createElement(le.J,{name:"arrow-right"})," ",a.createElement("i",{className:aa.rpcColorMarker,style:{background:Bn.color}}),Bn.serviceName),wn&&a.createElement("span",null,a.createElement(le.J,{name:"arrow-right"})," ",a.createElement("i",{className:aa.rpcColorMarker,style:{background:wn.color}}),wn.serviceName),a.createElement("span",{className:aa.endpointName},Bn?Bn.operationName:_r),a.createElement("span",{className:aa.endpointName}," ",this.getSpanBarLabel(ha,mt,As))),ps&&(()=>{const as=ps(ha),Ir=as?.length||0;return as&&Ir===1?as[0]?a.createElement("a",{href:as[0].href,target:"_blank",style:{background:`${Ge}10`,borderBottom:`1px solid ${Ge}CF`,paddingRight:"4px"},rel:"noopener noreferrer",onClick:as[0].onClick?fs=>{!(fs.ctrlKey||fs.metaKey||fs.shiftKey)&&as[0].onClick&&(fs.preventDefault(),as[0].onClick(fs))}:void 0},as[0].content):null:as&&Ir>1?a.createElement(Ie,{links:as,datasourceType:Ts,color:Ge}):null})())),a.createElement(z.Cell,{className:s()(aa.view,dn,{[aa.viewExpanded]:Ft,[aa.viewExpandedAndMatchingFilter]:Qt&&Ft}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-St,onClick:this._detailToggle},a.createElement(K,{numTicks:On}),a.createElement(yt,{criticalPath:js,rpc:Bn,viewStart:$s,viewEnd:In,getViewedBounds:ua,color:Ge,shortLabel:As,longLabel:ja,traceStartTime:jn,span:ha,labelClassName:`${tn} ${Ls}`,className:Jt})))}}_n.displayName="UnthemedSpanBarRow",_n.defaultProps={className:"",rpc:null};const Ut=(0,g.HE)(_n);var Xt=e(11939),en=e(40137),gn=e(19690),ln=e(92515),xn=e(28718),Dn=e(45563),Ln=e(11992);const hn=Ze=>({Divider:(0,n.css)`
      background: ${(0,u.h)(Ze,"#ddd")};
    `,DividerVertical:(0,n.css)`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:(0,n.css)`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function Gn({className:Ze,style:Je,type:Ge}){const mt=(0,g.wW)(hn);return a.createElement("div",{style:Je,className:(0,n.cx)(mt.Divider,Ge==="horizontal"?mt.DividerHorizontal:mt.DividerVertical,Ze)})}const Vn=Ze=>Je=>({LabeledList:(0,n.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${Ze&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,n.css)`
      label: LabeledListItem;
      display: inline-block;
      ${Ze&&`
        border-right: 1px solid ${(0,u.h)(Je,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,n.css)`
      label: LabeledListLabel;
      color: ${Je.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,n.css)`
      label: LabeledListValue;
      ${!Ze&&"margin-right: 0.55rem;"}
    `});function $n(Ze){const{className:Je,divider:Ge=!1,items:mt}=Ze,St=(0,g.wW)(Vn(Ge));return a.createElement("ul",{className:s()(St.LabeledList,Je)},mt.map(({key:At,label:Ft,value:Qt})=>a.createElement("li",{className:St.LabeledListItem,key:`${At}`},a.createElement("span",{className:St.LabeledListLabel},Ft),a.createElement("strong",{className:St.LabeledListValue},Qt))))}const Wn="kind",Pn="status",sa="status.message",va="library.name",An="library.version",Xn="trace.state",ra="id";var ga=e(81757);function ys(Ze){const{reference:Je,children:Ge,createFocusSpanLink:mt}=Ze,St=mt(Je.traceID,Je.spanID);return a.createElement("a",{href:St.href,target:St.target,rel:"noopener noreferrer",onClick:St.onClick?At=>{At.preventDefault(),St.onClick(At)}:void 0},Ge)}const ds=Ze=>({AccordianReferenceItem:(0,n.css)`
      border-bottom: 1px solid ${(0,u.h)(Ze,"#d8d8d8")};
    `,AccordianKeyValues:(0,n.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,n.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,u.h)(Ze,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,n.css)`
      label: AccordianReferencesHeader;
      background: ${(0,u.h)(Ze,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Ze,"#dadada")};
      }
    `,AccordianReferencesContent:(0,n.css)`
      label: AccordianReferencesContent;
      background: ${(0,u.h)(Ze,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Ze,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,n.css)`
      label: AccordianReferencesFooter;
      color: ${(0,u.h)(Ze,"#999")};
    `,ReferencesList:(0,n.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,n.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,n.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,n.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,n.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,n.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,n.css)`
      margin-right: 8px;
    `,title:(0,n.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Ja(Ze){const{data:Je,createFocusSpanLink:Ge,openedItems:mt,onItemToggle:St,interactive:At}=Ze,Ft=(0,g.wW)(ds);return a.createElement("div",{className:Ft.AccordianReferencesContent},Je.map((Qt,an)=>a.createElement("div",{className:an<Je.length-1?Ft.AccordianReferenceItem:void 0,key:an},a.createElement("div",{className:Ft.item,key:`${Qt.spanID}`},a.createElement(ys,{reference:Qt,createFocusSpanLink:Ge},a.createElement("span",{className:Ft.itemContent},Qt.span?a.createElement("span",null,a.createElement("span",{className:(0,n.cx)("span-svc-name",Ft.serviceName)},Qt.span.process.serviceName),a.createElement("small",{className:"endpoint-name"},Qt.span.operationName)):a.createElement("span",{className:(0,n.cx)("span-svc-name",Ft.title)},"View Linked Span ",a.createElement(le.J,{name:"external-link-alt"})),a.createElement("small",{className:Ft.debugInfo},a.createElement("span",{className:Ft.debugLabel,"data-label":"TraceID:"},Qt.traceID),a.createElement("span",{className:Ft.debugLabel,"data-label":"SpanID:"},Qt.spanID))))),!!Qt.tags?.length&&a.createElement("div",{className:Ft.AccordianKeyValues},a.createElement(et,{className:an<Je.length-1?y.bi:null,data:Qt.tags||[],highContrast:!0,interactive:At,isOpen:mt?mt.has(Qt):!1,label:"attributes",linksGetter:null,onToggle:At&&St?()=>St(Qt):null})))))}const _a=({data:Ze,interactive:Je=!0,isOpen:Ge,onToggle:mt,onItemToggle:St,openedItems:At,createFocusSpanLink:Ft})=>{const Qt=!Array.isArray(Ze)||!Ze.length;let an=null,sn="span",On=null;Je&&(an=Ge?a.createElement(le.J,{name:"angle-down",className:y.Im}):a.createElement(le.J,{name:"angle-right",className:y.Im}),sn="a",On={"aria-checked":Ge,onClick:Qt?null:mt,role:"switch"});const Bn=(0,g.wW)(ds);return a.createElement("div",{className:Bn.AccordianReferences},a.createElement(sn,{className:Bn.AccordianReferencesHeader,...On},an,a.createElement("strong",null,a.createElement("span",null,"References"))," ","(",Ze.length,")"),Ge&&a.createElement(Ja,{data:Ze,openedItems:At,createFocusSpanLink:Ft,onItemToggle:St,interactive:Je}))},ls=a.memo(_a),Es=()=>({TextList:(0,n.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,n.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,n.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Os(Ze){const{data:Je}=Ze,Ge=(0,g.wW)(Es);return a.createElement("div",{className:s()(Ge.TextList),"data-testid":"TextList"},a.createElement("ul",{className:Ge.List},Je.map((mt,St)=>a.createElement("li",{className:Ge.item,key:`${St}`},mt))))}const ts=Ze=>({header:(0,n.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Ze,"#e8e8e8")};
      }
    `});function Xa({data:Ze}){return a.createElement(Os,{data:Ze})}function bs(Ze){const{className:Je,data:Ge,headerClassName:mt,interactive:St,isOpen:At,label:Ft,onToggle:Qt,TextComponent:an=Xa}=Ze,sn=!Array.isArray(Ge)||!Ge.length,On=(0,g.wW)(Ue),Bn=s()(y.Im,{[On.emptyIcon]:sn});let wn=null,zn=null;St&&(wn=At?a.createElement(le.J,{name:"angle-down",className:Bn}):a.createElement(le.J,{name:"angle-right",className:Bn}),zn={"aria-checked":At,onClick:sn?null:Qt,role:"switch"});const ua=(0,g.wW)(ts);return a.createElement("div",{className:Je||""},a.createElement("div",{className:s()(ua.header,mt),...zn,"data-testid":"AccordianText--header"},wn,a.createElement("strong",null,Ft)," (",Ge.length,")"),At&&a.createElement(an,{data:Ge}))}bs.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};var Nr=e(92666),cs=e(71892),ks=e(74011),Hs=e(44343),qa=e(65778),za=e(97001),Is=e(87580);function vr(Ze){const{span:Je,traceToProfilesOptions:Ge,timeZone:mt,traceFlameGraphs:St,setTraceFlameGraphs:At,setRedrawListView:Ft}=Ze,[Qt,{height:an}]=(0,Nr.Z)(),sn=(0,g.wW)(dr),On=Je.tags.filter(jn=>jn.key===Ln.wq),Bn=On.length>0?On[0].value:void 0,wn=(0,a.useCallback)(()=>{const jn=Math.floor(Je.startTime/1e3)-3e4,ha=(Je.startTime+Je.duration)/1e3+3e4,la=(0,ks.CQ)(ha),ma=(0,ks.CQ)(jn);return{from:ma,to:la,raw:{from:ma,to:la}}},[Je.duration,Je.startTime]),zn=async(jn,ha)=>{const la=await(0,za.ak)().get(ha);if(la instanceof Is.tF){const Fa=(await(0,cs.n)(la.query(jn))).data.find(oa=>oa.name==="response");if(Fa&&Fa.length>1)return Fa}},ua=(0,a.useCallback)(async(jn,ha,la)=>{let ma="{}";if(ha.customQuery&&ha.query)ma=ha.query;else{const Va=ha.tags&&ha.tags.length>0?ha.tags:Ln.n4;ma=`{${(0,Ln.yN)(la,Va)}}`}const Fa={requestId:"span-flamegraph-requestId",interval:"2s",intervalMs:2e3,range:wn(),scopedVars:{},app:Hs.zj.Unknown,timezone:mt,startTime:la.startTime,targets:[{labelSelector:ma,groupBy:[],profileTypeId:ha.profileTypeId??"",queryType:"profile",spanSelector:[Bn],refId:"span-flamegraph-refId",datasource:{type:jn.type,uid:jn.uid}}]},oa=await zn(Fa,jn.uid);oa&&oa.length>0&&At({...St,[Bn]:oa})},[wn,Bn,At,mt,St]);return(0,a.useEffect)(()=>{if(r.config.featureToggles.traceToProfiles&&!Object.keys(St).includes(Bn)){let jn;Ge&&Ge?.datasourceUid&&(jn=(0,za.ak)().getInstanceSettings(Ge.datasourceUid)),Ge&&jn&&ua(jn,Ge,Je)}},[At,Je,St,Ge,wn,mt,ua,Bn]),(0,a.useEffect)(()=>{Ft({})},[an,Ft]),St[Bn]?a.createElement("div",{className:sn.flameGraph,ref:Qt},a.createElement("div",{className:sn.flameGraphTitle},"Flame graph"),a.createElement(qa.Z,{data:St[Bn],getTheme:()=>r.config.theme2,showFlameGraphOnly:!0,disableCollapsing:!0})):a.createElement(a.Fragment,null)}const dr=()=>({flameGraph:(0,n.css)({label:"flameGraphInSpan",margin:"5px"}),flameGraphTitle:(0,n.css)({label:"flameGraphTitleInSpan",marginBottom:"5px",fontWeight:"bold"})}),Ns=Ze=>({header:(0,n.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,n.css)`
      overflow: hidden;
    `,debugInfo:(0,n.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,n.css)`
      label: debugLabel;
      &::before {
        color: ${(0,u.h)(Ze,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,n.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,u.h)(Ze,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,u.h)(Ze,"#333")};
      }
    `,AccordianWarnings:(0,n.css)`
      label: AccordianWarnings;
      background: ${(0,u.h)(Ze,"#fafafa")};
      border: 1px solid ${(0,u.h)(Ze,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,n.css)`
      label: AccordianWarningsHeader;
      background: ${(0,u.h)(Ze,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Ze,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,n.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,u.h)(Ze,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,n.css)`
      label: AccordianWarningsLabel;
      color: ${(0,u.h)(Ze,"#d36c08")};
    `,Textarea:(0,n.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,n.css)`
      font-size: 1.5em;
    `});function Wr(Ze){const{detailState:Je,linksGetter:Ge,logItemToggle:mt,logsToggle:St,processToggle:At,span:Ft,tagsToggle:Qt,traceStartTime:an,warningsToggle:sn,stackTracesToggle:On,referencesToggle:Bn,referenceItemToggle:wn,createSpanLink:zn,createFocusSpanLink:ua,datasourceType:jn,traceFlameGraphs:ha,setTraceFlameGraphs:la,traceToProfilesOptions:ma,setRedrawListView:Fa}=Ze,{isTagsOpen:oa,isProcessOpen:Va,logs:Ya,isWarningsOpen:ps,references:Ts,isStackTracesOpen:Cs}=Je,{operationName:vs,process:js,duration:ws,relativeStartTime:br,startTime:_r,traceID:Zr,spanID:As,logs:Pr,tags:$s,warnings:In,references:aa,stackTraces:Da}=Ft,{timeZone:ja}=Ze;let Ls=[{key:"svc",label:"Service:",value:js.serviceName},{key:"duration",label:"Duration:",value:(0,D.LU)(ws)},{key:"start",label:"Start Time:",value:(0,D.LU)(br)+$o(_r,ja)},...Ft.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:Ft.childSpanCount}]:[]];const as=(0,g.wW)(Ns);Ft.kind&&Ls.push({key:Wn,label:"Kind:",value:Ft.kind}),Ft.statusCode!==void 0&&Ls.push({key:Pn,label:"Status:",value:Xt.Q[Ft.statusCode].toLowerCase()}),Ft.statusMessage&&Ls.push({key:sa,label:"Status Message:",value:Ft.statusMessage}),Ft.instrumentationLibraryName&&Ls.push({key:va,label:"Library Name:",value:Ft.instrumentationLibraryName}),Ft.instrumentationLibraryVersion&&Ls.push({key:An,label:"Library Version:",value:Ft.instrumentationLibraryVersion}),Ft.traceState&&Ls.push({key:Xn,label:"Trace State:",value:Ft.traceState});const Ir=(ss,Rr,Sr,ho)=>a.createElement(ln.k,{link:{...ss,title:Sr,target:"_blank",origin:ss.field,onClick:Ji=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:jn,grafana_version:r.config.buildInfo.version,type:Rr,location:"spanDetails"}),ss.onClick?ss.onClick?.(Ji):gn.E1.push(ss.href)}},buttonProps:{icon:ho}});let fs=null,go=null;if(zn){const ss=zn(Ft),Rr=ss?.filter(ho=>ho.type===ga.u.Logs);ss&&Rr&&Rr.length>0&&(fs=Ir(Rr[0],ga.u.Logs,"Logs for this span","gf-logs"));const Sr=ss?.filter(ho=>ho.type===ga.u.Profiles&&ho.title===Dn.vM);ss&&Sr&&Sr.length>0&&(go=Ir(Sr[0],ga.u.Profiles,"Profiles for this span","link"))}const Co=ua(Zr,As);return a.createElement("div",{"data-testid":"span-detail-component"},a.createElement("div",{className:as.header},a.createElement("h2",{className:s()(y.h2)},vs),a.createElement("div",{className:as.listWrapper},a.createElement($n,{className:y.xb,divider:!0,items:Ls}))),a.createElement("span",{style:{marginRight:"10px"}},fs),go,a.createElement(Gn,{className:y.im,type:"horizontal"}),a.createElement("div",null,a.createElement("div",null,a.createElement(et,{data:$s,label:"Span Attributes",linksGetter:Ge,isOpen:oa,onToggle:()=>Qt(As)}),js.tags&&a.createElement(et,{className:y.bi,data:js.tags,label:"Resource Attributes",linksGetter:Ge,isOpen:Va,onToggle:()=>At(As)})),Pr&&Pr.length>0&&a.createElement(_e,{linksGetter:Ge,logs:Pr,isOpen:Ya.isOpen,openedItems:Ya.openedItems,onToggle:()=>St(As),onItemToggle:ss=>mt(As,ss),timestamp:an}),In&&In.length>0&&a.createElement(bs,{className:as.AccordianWarnings,headerClassName:as.AccordianWarningsHeader,label:a.createElement("span",{className:as.AccordianWarningsLabel},"Warnings"),data:In,isOpen:ps,onToggle:()=>sn(As)}),Da?.length?a.createElement(bs,{label:"Stack trace",data:Da,isOpen:Cs,TextComponent:ss=>{let Rr;return ss.data?.length>1?Rr=ss.data.map((Sr,ho)=>`StackTrace ${ho+1}:
${Sr}`).join(`
`):Rr=ss.data?.[0],a.createElement(xn.K,{className:as.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:Rr})},onToggle:()=>On(As)}):null,aa&&aa.length>0&&(aa.length>1||aa[0].refType!=="CHILD_OF")&&a.createElement(ls,{data:aa,isOpen:Ts.isOpen,openedItems:Ts.openedItems,onToggle:()=>Bn(As),onItemToggle:ss=>wn(As,ss),createFocusSpanLink:ua}),r.config.featureToggles.tracesEmbeddedFlameGraph&&Ft.tags.some(ss=>ss.key===Ln.wq)&&a.createElement(vr,{span:Ft,timeZone:ja,traceFlameGraphs:ha,setTraceFlameGraphs:la,traceToProfilesOptions:ma,setRedrawListView:Fa}),a.createElement("small",{className:as.debugInfo},a.createElement("a",{...Co,onClick:ss=>{Co.onClick&&ss.button===0&&(!ss.currentTarget.target||ss.currentTarget.target==="_self")&&!(ss.metaKey||ss.altKey||ss.ctrlKey||ss.shiftKey)&&(ss.preventDefault(),Co.onClick(ss))}},a.createElement(le.J,{name:"link",className:s()(y.Im,as.LinkIcon)})),a.createElement("span",{className:as.debugLabel,"data-label":"SpanID:"})," ",As)))}const $o=(Ze,Je)=>{const Ge=(0,en.dq)(Ze/1e3,{timeZone:Je,defaultWithMS:!0}),mt=Ge.split(" ");return` (${mt[1]?mt[1]:Ge})`},sr=(0,o.B)(Ze=>({expandedAccent:(0,n.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 1px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,n.css)`
      label: infoWrapper;
      border: 1px solid ${(0,u.h)(Ze,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Gr extends a.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(Je,Ge)=>{const{linksGetter:mt,span:St}=this.props;return mt(St,Je,Ge)}}render(){const{color:Je,columnDivision:Ge,detailState:mt,logItemToggle:St,logsToggle:At,processToggle:Ft,referenceItemToggle:Qt,referencesToggle:an,warningsToggle:sn,stackTracesToggle:On,span:Bn,traceToProfilesOptions:wn,timeZone:zn,tagsToggle:ua,traceStartTime:jn,hoverIndentGuideIds:ha,addHoverIndentGuideId:la,removeHoverIndentGuideId:ma,theme:Fa,createSpanLink:oa,focusedSpanId:Va,createFocusSpanLink:Ya,datasourceType:ps,visibleSpanIds:Ts,traceFlameGraphs:Cs,setTraceFlameGraphs:vs,setRedrawListView:js}=this.props,ws=sr(Fa);return a.createElement(z,null,a.createElement(z.Cell,{width:Ge,style:{overflow:"hidden"}},a.createElement(kt,{span:Bn,showChildrenIcon:!1,hoverIndentGuideIds:ha,addHoverIndentGuideId:la,removeHoverIndentGuideId:ma,visibleSpanIds:Ts}),a.createElement(ut.zx,{fill:"text",onClick:this._detailToggle,className:s()(ws.expandedAccent,(0,ut.gN)(Fa)),style:{borderColor:Je},"data-testid":"detail-row-expanded-accent"})),a.createElement(z.Cell,{width:1-Ge},a.createElement("div",{className:ws.infoWrapper,style:{borderTopColor:Je}},a.createElement(Wr,{detailState:mt,linksGetter:this._linksGetter,logItemToggle:St,logsToggle:At,processToggle:Ft,referenceItemToggle:Qt,referencesToggle:an,warningsToggle:sn,stackTracesToggle:On,span:Bn,traceToProfilesOptions:wn,timeZone:zn,tagsToggle:ua,traceStartTime:jn,createSpanLink:oa,focusedSpanId:Va,createFocusSpanLink:Ya,datasourceType:ps,traceFlameGraphs:Cs,setTraceFlameGraphs:vs,setRedrawListView:js}))))}}const ka=(0,g.HE)(Gr),Fr=(0,o.B)(()=>({rowsWrapper:(0,n.css)`
      width: 100%;
    `,row:(0,n.css)`
      width: 100%;
    `,scrollToTopButton:(0,n.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: absolute;
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `})),Vs={bar:28,detail:161,detailWithLogs:197},Eo=5,io=33;function Er(Ze,Je,Ge,mt,St,At,Ft){if(!Ze)return[];St&&mt&&(Ze=Ze.filter(sn=>mt.has(sn.spanID))),At&&Ft&&(Ze=Ze.filter(sn=>Ft.find(On=>On.spanId===sn.spanID)));let Qt=null;const an=[];for(let sn=0;sn<Ze.length;sn++){const On=Ze[sn],{spanID:Bn,depth:wn}=On;let zn=!1;Qt!=null&&(wn>=Qt?zn=!0:Qt=null),!zn&&(Je.has(Bn)&&(Qt=wn+1),an.push({span:On,isDetail:!1,spanIndex:sn}),Ge.has(Bn)&&an.push({span:On,isDetail:!0,spanIndex:sn}))}return an}function Ro(Ze){const[Je,Ge]=Ze;return{left:Je>0,right:Ge<1}}function Ss(Ze,Je,Ge,mt,St,At,Ft){return Ze?Er(Ze.spans,Je,Ge,mt,St,At,Ft):[]}function rs(Ze){const Je=new Map;return Ze&&Ze.spans.forEach(Ge=>{Ge.childSpanIds.length&&Je.set(Ge.spanID,Ge.childSpanIds)}),Je}const jr=(0,Ee.Z)(Ss),Oa=(0,Ee.Z)(C,Pe.isEqual),Ka=(0,Ee.Z)(Ro,Pe.isEqual),Un=(0,Ee.Z)(rs);class xt extends a.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=Je=>this.getRowStates()[Je].spanIndex,this.mapSpanIndexToRowIndex=Je=>{const Ge=this.getRowStates().length;for(let mt=0;mt<Ge;mt++){const{spanIndex:St}=this.getRowStates()[mt];if(St===Je)return mt}throw new Error(`unable to find row for span index: ${Je}`)},this.setListView=Je=>{this.listView=Je},this.getKeyFromIndex=Je=>{const{isDetail:Ge,span:mt}=this.getRowStates()[Je];return`${mt.traceID}--${mt.spanID}--${Ge?"detail":"bar"}`},this.getIndexFromKey=Je=>{const Ge=Je.split("--"),mt=Ge[0],St=Ge[1],At=Ge[2]==="detail",Ft=this.getRowStates().length;for(let Qt=0;Qt<Ft;Qt++){const{span:an,isDetail:sn}=this.getRowStates()[Qt];if(an.spanID===St&&an.traceID===mt&&sn===At)return Qt}return-1},this.getRowHeight=Je=>{const{span:Ge,isDetail:mt}=this.getRowStates()[Je];return mt?Array.isArray(Ge.logs)&&Ge.logs.length?Vs.detailWithLogs:Vs.detail:Vs.bar},this.renderRow=(Je,Ge,mt,St)=>{const{isDetail:At,span:Ft,spanIndex:Qt}=this.getRowStates()[mt],an=Math.max((this.listView?.getTopVisibleIndex()||0)-io,0),sn=(this.listView?.getBottomVisibleIndex()||0)+io,On=this.getVisibleSpanIds(an,sn);return At?this.renderSpanDetailRow(Ft,Je,Ge,St,On):this.renderSpanBarRow(Ft,Qt,Je,Ge,St,On)},this.scrollToSpan=(Je,Ge)=>{if(Ge==null)return;const mt=this.getRowStates().findIndex(St=>St.span.spanID===Ge);mt>=0&&this.listView?.scrollToIndex(mt,Je)},this.scrollToTop=()=>{const{topOfViewRef:Je,datasourceType:Ge,trace:mt}=this.props;Je?.current?.scrollIntoView({behavior:"smooth"}),(0,i.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:Ge,grafana_version:r.config.buildInfo.version,numServices:mt.services.length,numSpans:mt.spans.length})},this.getVisibleSpanIds=(0,Ee.Z)((Je,Ge)=>{const mt=[];for(let St=Je;St<Ge;St++){const At=this.getRowStates()[St];At?.span&&mt.push(At.span.spanID)}return mt})}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(Je){let Ge;for(Ge in Je)if(Je[Ge]!==this.props[Ge])return!0;return!1}componentDidUpdate(Je){const{headerHeight:Ge,focusedSpanId:mt,focusedSpanIdForSearch:St}=this.props;this.hasScrolledToSpan||(this.scrollToSpan(Ge,mt),this.hasScrolledToSpan=!0),mt!==Je.focusedSpanId&&this.scrollToSpan(Ge,mt),St!==Je.focusedSpanIdForSearch&&this.scrollToSpan(Ge,St)}getRowStates(){const{childrenHiddenIDs:Je,detailStates:Ge,trace:mt,findMatchesIDs:St,showSpanFilterMatchesOnly:At,showCriticalPathSpansOnly:Ft,criticalPath:Qt}=this.props;return jr(mt,Je,Ge,St,At,Ft,Qt)}getClipping(){const{currentViewRangeTime:Je}=this.props;return Ka(Je)}getViewedBounds(){const{currentViewRangeTime:Je,trace:Ge}=this.props,[mt,St]=Je;return Oa({min:Ge.startTime,max:Ge.endTime,viewStart:mt,viewEnd:St})}getChildSpansMap(){return Un(this.props.trace)}getAccessors(){const Je=this.listView;if(!Je)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:Je.getViewHeight,getBottomRowIndexVisible:Je.getBottomVisibleIndex,getTopRowIndexVisible:Je.getTopVisibleIndex,getRowPosition:Je.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(Je,Ge,mt,St,At,Ft){const{spanID:Qt,childSpanIds:an}=Je,{serviceName:sn}=Je.process,{childrenHiddenIDs:On,childrenToggle:Bn,detailStates:wn,detailToggle:zn,findMatchesIDs:ua,spanNameColumnWidth:jn,trace:ha,spanBarOptions:la,hoverIndentGuideIds:ma,addHoverIndentGuideId:Fa,removeHoverIndentGuideId:oa,createSpanLink:Va,focusedSpanId:Ya,focusedSpanIdForSearch:ps,showSpanFilterMatchesOnly:Ts,theme:Cs,datasourceType:vs,criticalPath:js}=this.props;if(!ha)return null;const ws=(0,ke._K)(sn,Cs),br=On.has(Qt),_r=wn.has(Qt),Zr=ua?ua.has(Qt):!1,As=Qt===Ya||Qt===ps,Pr=U(Je)||br&&N(ha.spans,Ge);let $s=null;if(br){const fs=w(ha.spans.slice(Ge));if(fs){const go=this.getViewedBounds()(fs.startTime,fs.startTime+fs.duration);$s={color:(0,ke._K)(fs.process.serviceName,Cs),operationName:fs.operationName,serviceName:fs.process.serviceName,viewEnd:go.end,viewStart:go.start}}}const In=Je.tags.find(fs=>fs.key===Le);let aa=null;!Je.hasChildren&&In&&G(Je)&&(aa={serviceName:In.value,color:(0,ke._K)(In.value,Cs)});const Da=Ge>0?ha.spans[Ge-1]:null,ja=[Qt,...an],Ls=fs=>{fs.forEach(go=>{const Co=this.getChildSpansMap().get(go);Co?.length&&(ja.push(...Co),Ls(Co))})};Ls(an);const as=js?.filter(fs=>br?ja.includes(fs.spanId):fs.spanId===Qt),Ir=Fr();return a.createElement("div",{className:Ir.row,key:mt,style:St,...At},a.createElement(Ut,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:ws,spanBarOptions:la,columnDivision:jn,isChildrenExpanded:!br,isDetailExpanded:_r,isMatchingFilter:Zr,isFocused:As,showSpanFilterMatchesOnly:Ts,numTicks:Eo,onDetailToggled:zn,onChildrenToggled:Bn,rpc:$s,noInstrumentedServer:aa,showErrorIcon:Pr,getViewedBounds:this.getViewedBounds(),traceStartTime:ha.startTime,span:Je,hoverIndentGuideIds:ma,addHoverIndentGuideId:Fa,removeHoverIndentGuideId:oa,createSpanLink:Va,datasourceType:vs,showServiceName:Da===null||Da.process.serviceName!==Je.process.serviceName,visibleSpanIds:Ft,criticalPath:as}))}renderSpanDetailRow(Je,Ge,mt,St,At){const{spanID:Ft}=Je,{serviceName:Qt}=Je.process,{detailLogItemToggle:an,detailLogsToggle:sn,detailProcessToggle:On,detailReferencesToggle:Bn,detailReferenceItemToggle:wn,detailWarningsToggle:zn,detailStackTracesToggle:ua,detailStates:jn,detailTagsToggle:ha,detailToggle:la,spanNameColumnWidth:ma,trace:Fa,traceToProfilesOptions:oa,timeZone:Va,hoverIndentGuideIds:Ya,addHoverIndentGuideId:ps,removeHoverIndentGuideId:Ts,linksGetter:Cs,createSpanLink:vs,focusedSpanId:js,createFocusSpanLink:ws,theme:br,datasourceType:_r,traceFlameGraphs:Zr,setTraceFlameGraphs:As,setRedrawListView:Pr}=this.props,$s=jn.get(Ft);if(!Fa||!$s)return null;const In=(0,ke._K)(Qt,br),aa=Fr();return a.createElement("div",{className:aa.row,key:Ge,style:{...mt,zIndex:1},...St},a.createElement(ka,{color:In,columnDivision:ma,onDetailToggled:la,detailState:$s,linksGetter:Cs,logItemToggle:an,logsToggle:sn,processToggle:On,referenceItemToggle:wn,referencesToggle:Bn,warningsToggle:zn,stackTracesToggle:ua,span:Je,traceToProfilesOptions:oa,timeZone:Va,tagsToggle:ha,traceStartTime:Fa.startTime,hoverIndentGuideIds:Ya,addHoverIndentGuideId:ps,removeHoverIndentGuideId:Ts,createSpanLink:vs,focusedSpanId:js,createFocusSpanLink:ws,datasourceType:_r,visibleSpanIds:At,traceFlameGraphs:Zr,setTraceFlameGraphs:As,setRedrawListView:Pr}))}render(){const Je=Fr(),{scrollElement:Ge,redrawListView:mt}=this.props;return a.createElement(a.Fragment,null,a.createElement(ce,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:io,viewBufferMin:io,itemsWrapperClassName:Je.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Ge,redraw:mt}),this.props.topOfViewRef&&a.createElement(he.h,{className:Je.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Tr=(0,g.HE)(xt),Ao=(0,o.B)(Ze=>({TraceTimelineViewer:(0,n.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,u.h)(Ze,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,u.h)(Ze,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,u.h)(Ze,"teal")};
      }

      & .json-markup-null {
        color: ${(0,u.h)(Ze,"teal")};
      }

      & .json-markup-number {
        color: ${(0,u.h)(Ze,"blue","black")};
      }
    `})),ur=5;class Kr extends a.PureComponent{constructor(Je){super(Je),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){E({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:Je,updateNextViewRangeTime:Ge,updateViewRangeTime:mt,viewRange:St,traceTimeline:At,theme:Ft,topOfViewRef:Qt,focusedSpanIdForSearch:an,...sn}=this.props,{trace:On}=sn,Bn=Ao(Ft);return a.createElement("div",{className:Bn.TraceTimelineViewer,ref:wn=>wn&&this.setState({height:wn.getBoundingClientRect().height})},a.createElement(Me,{duration:On.duration,nameColumnWidth:At.spanNameColumnWidth,numTicks:ur,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:Je,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:St.time,updateNextViewRangeTime:Ge,updateViewRangeTime:mt,columnResizeHandleHeight:this.state.height}),a.createElement(Tr,{...sn,...At,setSpanNameColumnWidth:Je,currentViewRangeTime:St.time.current,topOfViewRef:Qt,focusedSpanIdForSearch:an,datasourceType:this.props.datasourceType}))}}const mr=(0,g.HE)(Kr);var lo=e(50248);const Lo=()=>({NewWindowIconLarge:(0,n.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function co(Ze){const{isLarge:Je,className:Ge,...mt}=Ze,St=(0,g.wW)(Lo),At=s()({[St.NewWindowIconLarge]:Je},Ge);return a.createElement(le.J,{className:At,name:"anchor",...mt})}co.defaultProps={isLarge:!1};const Tt=Ze=>a.createElement("a",{href:Ze.href,title:Ze.title,target:"_blank",rel:"noopener noreferrer",className:Ze.className},Ze.children," ",a.createElement(co,null));function Pt(Ze){const{links:Je}=Ze;return a.createElement(Tt,{href:Je[0].url,title:Je[0].text,className:Ze.className})}const qt=100,jt="<trace-without-root-span>",on=()=>({BreakableText:(0,n.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),En=/\W*\w+\W*/g;function Tn(Ze){const{className:Je,text:Ge,wordRegexp:mt=En}=Ze,St=(0,g.wW)(on);if(!Ge)return null;const At=[];mt.exec("");let Ft=mt.exec(Ge)||[Ge];for(;Ft;)At.push(a.createElement("span",{key:`${Ge}-${At.length}`,className:Je||St.BreakableText},Ft[0])),Ft=mt.exec(Ge);return a.createElement(a.Fragment,null,At)}Tn.defaultProps={wordRegexp:En};const Nn=Ze=>({TraceName:(0,n.css)`
      label: TraceName;
      font-size: ${Ze.typography.size.lg};
    `});function kn(Ze){const{className:Je,traceName:Ge}=Ze,mt=(0,g.wW)(Nn),St=String(Ge||jt),At=a.createElement(Tn,{text:St});return a.createElement("span",{className:s()(mt.TraceName,Je)},At)}var Ea=e(58297);const ta=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:qt,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function ia(){return ta}function Aa(Ze){return(0,Pe.get)(ia(),Ze)}function Ms(Ze){const Je=Ze.references?Ze.references.find(Ge=>Ge.refType==="CHILD_OF"):null;return Je?Je.span:null}const Ga=/#\{([^{}]*)\}/g;function _s(Ze){const Je=new Set;return Ze.replace(Ga,(Ge,mt)=>(Je.add(mt),Ge)),Array.from(Je)}function us(Ze,Je,Ge){return Ze.replace(Ga,(mt,St)=>{const At=Ge[St];return At==null?"":Je(At)})}function ns(Ze,Je){if(typeof Ze!="string")throw new Error("Invalid template");return{parameters:_s(Ze),template:us.bind(null,Ze,Je)}}function Rs(Ze){if(typeof Ze=="string")return Je=>Je===Ze;if(Array.isArray(Ze))return Je=>Ze.indexOf(Je)>-1;if(Ze==null)return()=>!0;throw new Error(`Invalid value: ${Ze}`)}const Vr=Ze=>Ze;function os(Ze){try{const Je=ns(Ze.url,encodeURIComponent),Ge=ns(Ze.text,Vr);return{object:Ze,type:Rs(Ze.type),key:Rs(Ze.key),value:Rs(Ze.value),url:Je,text:Ge,parameters:(0,Pe.uniq)(Je.parameters.concat(Ge.parameters))}}catch(Je){return console.error(`Ignoring invalid link pattern: ${Je}`,Ze),null}}function La(Ze,Je){if(Je)return Je.find(Ge=>Ge.key===Ze)}function ms(Ze,Je){let Ge=Je;for(;Ge;){const mt=La(Ze,Ge.tags)||La(Ze,Ge.process.tags);if(mt)return mt;Ge=Ms(Ge)}}function fr(Ze,Je){return Ze.template(Je)}function Ta(Ze,Je){const Ge=[],mt=Object.keys(Je).filter(St=>typeof Je[St]=="string"||Je[St]==="number");return Ze?.filter(St=>St?.type("traces")).forEach(St=>{const At={};St?.parameters.every(Qt=>{const an=Qt;return mt.includes(an)?(At[Qt]=Je[an],!0):!1})&&Ge.push({url:fr(St.url,At),text:fr(St.text,At)})}),Ge}function rr(Ze,Je,Ge,mt){const St=Ge[mt];let At="logs";const Ft=Je.process.tags===Ge;Ft&&(At="process"),Je.tags===Ge&&(At="tags");const an=[];return Ze.forEach(sn=>{if(sn.type(At)&&sn.key(St.key)&&sn.value(St.value)){const On={};sn.parameters.every(wn=>{let zn=La(wn,Ge);return!zn&&!Ft&&(zn=ms(wn,Je)),zn?(On[wn]=zn.value,!0):(console.warn(`Skipping link pattern, missing parameter ${wn} for key ${St.key} in ${At}.`,sn.object),!1)})&&an.push({url:fr(sn.url,On),text:fr(sn.text,On)})}}),an}function Qr(Ze,Je){return(Ge,mt,St)=>{if(Ze.length===0)return[];const At=mt[St];let Ft=Je.get(At);return Ft||(Ft=rr(Ze,Ge,mt,St),Je.set(At,Ft)),Ft}}const ao=(Aa("linkPatterns")||[]).map(os).filter(Ze=>!!Ze),uo=(0,Ea.Z)(10)(Ze=>{const Je=[];return Ze?Ta(ao,Ze):Je}),Fl=Qr(ao,new WeakMap);function Kl(Ze){let Je;const Ge=new Set(Ze.map(({spanID:mt})=>mt));for(let mt=0;mt<Ze.length;mt++){if(Ze[mt].references&&Ze[mt].references.some(({traceID:Qt,spanID:an})=>Qt===Ze[mt].traceID&&Ge.has(an)))continue;if(!Je){Je=Ze[mt];continue}const At=Ze[mt].references&&Ze[mt].references.length||0,Ft=Je.references&&Je.references.length||0;(At<Ft||At===Ft&&Ze[mt].startTime<Je.startTime)&&(Je=Ze[mt])}return Je?`${Je.process.serviceName}: ${Je.operationName}`:""}const ei=(0,Pe.memoize)(Kl,Ze=>Ze.length?Ze[0].traceID:0);function Hi(Ze){for(let Je=0;Je<Ze.length;Je++){const Ge=Ze[Je].tags.filter(At=>At.key==="http.method"),mt=Ze[Je].tags.filter(At=>At.key==="http.status_code"),St=Ze[Je].tags.filter(At=>At.key==="http.url"||At.key==="http.target"||At.key==="http.path");if(Ge.length>0||mt.length>0||St.length>0)return{method:Ge,status:mt,url:St}}return{}}const zo=(0,Pe.memoize)(Hi,Ze=>Ze.length?Ze[0].traceID:0);var Ds=e(83811),Vl=e(16636);const _l=Ze=>({ActionButton:(0,n.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${Ze.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function Gi(Ze){const{onClick:Je,ariaLabel:Ge,label:mt,icon:St}=Ze,At=(0,g.wW)(_l);return a.createElement(ut.zx,{className:At.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:St,"aria-label":Ge,onClick:Je},mt)}const $l=Ze=>({TracePageActions:(0,n.css)`
      label: TracePageActions;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    `,feedback:(0,n.css)`
      margin: 6px;
      color: ${Ze.colors.text.secondary};
      font-size: ${Ze.typography.bodySmall.fontSize};
      &:hover {
        color: ${Ze.colors.text.link};
      }
    `});function zl(Ze){const{traceId:Je,data:Ge,app:mt}=Ze,St=(0,g.l4)(),At=$l(St),[Ft,Qt]=(0,a.useState)(!1),an=()=>{navigator.clipboard.writeText(Je),Qt(!0),setTimeout(()=>{Qt(!1)},5e3)},sn=()=>{const On=(0,Vl.gb)(Ge,"Trace-"+Je.substring(Je.length-6));(0,i.ff)("grafana_traces_download_traces_clicked",{app:mt,grafana_version:Ds.config.buildInfo.version,trace_format:On,location:"trace-view"})};return a.createElement("div",{className:At.TracePageActions},a.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:At.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},a.createElement(le.J,{name:"comment-alt-message"})," Give feedback"),a.createElement(Gi,{onClick:an,ariaLabel:"Copy Trace ID",label:Ft?"Copied!":"Trace ID",icon:"copy"}),a.createElement(Gi,{onClick:sn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var xs=e(84275),Ci=e(30019),kl=e(27218),ti=e(47701),yo=e(41164),ni=e(79106),yr=e(38834),Do=e(4200),ai=e(65908),Hl=e(64516);class ji extends a.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{value:Je}=this.props,Ge=a.createElement(a.Fragment,null,Je&&Je.length&&a.createElement(Z.h,{name:"times",onClick:this.clearUiFind,tooltip:"Clear input"}));return a.createElement("div",{style:{width:"200px"}},a.createElement(Hl.I,{placeholder:"Find...",onChange:mt=>this.props.onChange(mt.currentTarget.value),suffix:Ge,value:Je}))}}ji.defaultProps={value:void 0};const ko=(0,a.memo)(function(Je){const{trace:Ge,spanFilterMatches:mt,setFocusedSpanIdForSearch:St,focusedSpanIndexForSearch:At,setFocusedSpanIndexForSearch:Ft,datasourceType:Qt,showSpanFilters:an}=Je,sn=si((0,g.l4)(),an);(0,a.useEffect)(()=>{if(mt&&At!==-1){const oa=Array.from(mt);St(oa[At])}},[At,St,mt]);const On=(oa,Va)=>{if(oa.preventDefault(),oa.stopPropagation(),Va){if((0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:Qt,grafana_version:r.config.buildInfo.version,direction:"next"}),At===-1||mt&&At===mt.size-1){Ft(0);return}Ft(At+1)}},Bn=(oa,Va)=>{if(oa.preventDefault(),oa.stopPropagation(),Va){if((0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:Qt,grafana_version:r.config.buildInfo.version,direction:"prev"}),mt&&(At===-1||At===0)){Ft(mt.size-1);return}Ft(At-1)}},wn=(oa,Va)=>{oa.key==="Enter"&&On(oa,Va)},zn=(oa,Va)=>{oa.key==="Enter"&&Bn(oa,Va)},ua=(mt&&mt?.size>0)??!1,jn=ua?sn.button:(0,n.cx)(sn.button,sn.buttonDisabled),ha=(0,a.useCallback)(oa=>a.createElement(Oe.u,{content:oa,placement:"top"},a.createElement("span",{className:sn.tooltip},a.createElement(le.J,{name:"info-circle",size:"md"}))),[sn.tooltip]),la=(0,a.useCallback)((oa,Va)=>{let Ya=a.createElement(a.Fragment,null,a.createElement("span",null,`${Ge.spans.length} spans`),ha(a.createElement(a.Fragment,null,a.createElement("div",null,"Services: ",Va),a.createElement("div",null,"Depth: ",oa))));if(mt)if(mt.size===0)Ya=a.createElement(a.Fragment,null,a.createElement("span",null,"0 matches"),ha("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const ps=mt.size===1?"match":"matches",Ts=At!==-1?`${At+1}/${mt.size} ${ps}`:`${mt.size} ${ps}`,Cs=[];mt.forEach(vs=>{Ge.processes[vs]&&Cs.push(Ge.processes[vs].serviceName)}),Ya=a.createElement(a.Fragment,null,a.createElement("span",null,Ts),ha(a.createElement(a.Fragment,null,a.createElement("div",null,"Services: ",new Set(Cs).size,"/",Va),a.createElement("div",null,"Depth: ",oa))))}return Ya},[At,ha,mt,Ge.processes,Ge.spans]),ma=new Set((0,Pe.values)(Ge.processes).map(oa=>oa.serviceName)).size,Fa=(0,Pe.get)((0,Pe.maxBy)(Ge.spans,"depth"),"depth",0)+1;return a.createElement(a.Fragment,null,a.createElement("span",{className:sn.matches},la(Fa,ma)),a.createElement("div",{className:ua?sn.buttons:(0,n.cx)(sn.buttons,sn.buttonsDisabled)},a.createElement("div",{"aria-label":"Prev result button",className:jn,onClick:oa=>Bn(oa,ua),onKeyDown:oa=>zn(oa,ua),role:"button",tabIndex:ua?0:-1},"Prev"),a.createElement("div",{"aria-label":"Next result button",className:jn,onClick:oa=>On(oa,ua),onKeyDown:oa=>wn(oa,ua),role:"button",tabIndex:ua?0:-1},"Next")))}),si=(Ze,Je)=>{const Ge=(0,ut.fW)({theme:Ze,variant:"secondary",size:Je?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,n.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,n.css)`
      cursor: not-allowed;
    `,button:(0,n.css)`
      ${Ge.button};
    `,buttonDisabled:(0,n.css)`
      ${Ge.disabled};
      pointer-events: none;
    `,matches:(0,n.css)`
      margin-right: ${Ze.spacing(2)};
      text-wrap: nowrap;
    `,tooltip:(0,n.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var bi=e(76772);function Ho(Ze,Je){if(!Je)return;let Ge=!1;Ze.serviceName&&(Je=ri(Je,Ze),Ge=!0),Ze.spanName&&(Je=mo(Je,Ze),Ge=!0),(Ze.from||Ze.to)&&(Je=jl(Je,Ze),Ge=!0);const mt=Ha(Je,Ze.tags);if(mt&&(Je=mt,Ge=!0),Ze.query){const St=Gl(Ze.query,Je);St&&(Je=St,Ge=!0)}return Ge?new Set(Je.map(St=>St.spanID)):void 0}function Gl(Ze,Je){if(!Je)return;const Ge=[];Ze.split(/\s+/).filter(Boolean).forEach(Ft=>{Ge.push(Ft.toLowerCase())});const mt=(Ft,Qt)=>Ft.some(an=>Qt.toLowerCase().includes(an)),St=Ft=>Ft?Ft.some(Qt=>mt(Ge,Qt.key)||mt(Ge,Qt.value.toString())):!1,At=Ft=>mt(Ge,Ft.operationName)||mt(Ge,Ft.process.serviceName)||St(Ft.tags)||Ft.kind&&mt(Ge,Ft.kind)||Ft.statusCode!==void 0&&mt(Ge,Xt.Q[Ft.statusCode])||Ft.statusMessage&&mt(Ge,Ft.statusMessage)||Ft.instrumentationLibraryName&&mt(Ge,Ft.instrumentationLibraryName)||Ft.instrumentationLibraryVersion&&mt(Ge,Ft.instrumentationLibraryVersion)||Ft.traceState&&mt(Ge,Ft.traceState)||Ft.logs!==null&&Ft.logs.some(Qt=>St(Qt.fields))||St(Ft.process.tags)||Ge.some(Qt=>Qt===Ft.spanID);return Je.filter(At)}const Ha=(Ze,Je)=>{if(Je=Je.filter(Ge=>Ge.key&&Ge.key!==""||Ge.value),Je.length>0)return Ze.filter(Ge=>Je.every(mt=>{if(mt.key&&mt.value){if(Ge.tags.some(St=>Si(mt,St))||Ge.process.tags.some(St=>Si(mt,St))||Ge.logs&&Ge.logs.some(St=>St.fields.some(At=>Si(mt,At)))||Ge.kind&&mt.key===Wn&&mt.value===Ge.kind||Ge.statusCode!==void 0&&mt.key===Pn&&mt.value===Xt.Q[Ge.statusCode].toLowerCase()||Ge.statusMessage&&mt.key===sa&&mt.value===Ge.statusMessage||Ge.instrumentationLibraryName&&mt.key===va&&mt.value===Ge.instrumentationLibraryName||Ge.instrumentationLibraryVersion&&mt.key===An&&mt.value===Ge.instrumentationLibraryVersion||Ge.traceState&&mt.key===Xn&&mt.value===Ge.traceState||mt.key===ra&&mt.value===Ge.spanID)return Dr(mt.operator,!0)}else if(mt.key&&(Ge.tags.some(St=>Pi(mt.key,St.key))||Ge.process.tags.some(St=>Pi(mt.key,St.key))||Ge.logs&&Ge.logs.some(St=>St.fields.some(At=>Pi(mt.key,At.key)))||Ge.kind&&mt.key===Wn||Ge.statusCode!==void 0&&mt.key===Pn||Ge.statusMessage&&mt.key===sa||Ge.instrumentationLibraryName&&mt.key===va||Ge.instrumentationLibraryVersion&&mt.key===An||Ge.traceState&&mt.key===Xn||mt.key===ra))return Dr(mt.operator,!0);return Dr(mt.operator,!1)}))},Pi=(Ze,Je)=>Ze===Je.toString(),Si=(Ze,Je)=>Ze.key===Je.key.toString()&&Ze.value===Je.value.toString(),Dr=(Ze,Je)=>Ze==="="?Je:!Je,ri=(Ze,Je)=>Ze.filter(Ge=>Je.serviceNameOperator==="="?Ge.process.serviceName===Je.serviceName:Ge.process.serviceName!==Je.serviceName),mo=(Ze,Je)=>Ze.filter(Ge=>Je.spanNameOperator==="="?Ge.operationName===Je.spanName:Ge.operationName!==Je.spanName),jl=(Ze,Je)=>{const Ge=Bo(Je?.from||""),mt=Bo(Je?.to||"");let St=[];if(Ge&&(St=Ze.filter(At=>Je.fromOperator===">"?At.duration>Ge:At.duration>=Ge)),mt){const At=Ft=>Je.toOperator==="<"?Ft.duration<mt:Ft.duration<=mt;St=St.length>0?St.filter(Ft=>At(Ft)):Ze.filter(Ft=>At(Ft))}return St},Bo=Ze=>{if(Ze.includes("ns"))return parseFloat(Ze.split("ns")[0])/1e3;if(Ze.includes("us"))return parseFloat(Ze.split("us")[0]);if(Ze.includes("\xB5s"))return parseFloat(Ze.split("\xB5s")[0]);if(Ze.includes("ms"))return parseFloat(Ze.split("ms")[0])*1e3;if(Ze.includes("s"))return parseFloat(Ze.split("s")[0])*1e3*1e3;if(Ze.includes("m"))return parseFloat(Ze.split("m")[0])*1e3*1e3*60;if(Ze.includes("h"))return parseFloat(Ze.split("h")[0])*1e3*1e3*60*60},fo=(0,a.memo)(function(Je){const{trace:Ge,search:mt,spanFilterMatches:St,showSpanFilterMatchesOnly:At,setShowSpanFilterMatchesOnly:Ft,showCriticalPathSpansOnly:Qt,setShowCriticalPathSpansOnly:an,focusedSpanIndexForSearch:sn,setFocusedSpanIndexForSearch:On,setFocusedSpanIdForSearch:Bn,datasourceType:wn,clear:zn,showSpanFilters:ua}=Je,jn=(0,g.wW)(Ql),ha=(0,a.useMemo)(()=>mt.serviceName&&mt.serviceName!==""||mt.spanName&&mt.spanName!==""||Bo(mt.from||"")||Bo(mt.to||"")||mt.tags.length>1||mt.tags.some(la=>la.key)||mt.query&&mt.query!==""||At,[mt.serviceName,mt.spanName,mt.from,mt.to,mt.tags,mt.query,At]);return a.createElement("div",{className:jn.container},a.createElement("div",{className:jn.controls},a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(ut.zx,{variant:"destructive",disabled:!ha,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:zn},"Clear"),a.createElement("div",{className:jn.matchesOnly},a.createElement(bi.r,{value:At,onChange:la=>Ft(la.currentTarget.checked??!1),label:"Show matches only switch",disabled:!St?.size}),a.createElement(ut.zx,{onClick:()=>Ft(!At),className:jn.clearMatchesButton,variant:"secondary",fill:"text",disabled:!St?.size},"Show matches only")),a.createElement("div",{className:jn.matchesOnly},a.createElement(bi.r,{value:Qt,onChange:la=>an(la.currentTarget.checked??!1),label:"Show critical path only switch"}),a.createElement(ut.zx,{onClick:()=>an(!Qt),className:jn.clearMatchesButton,variant:"secondary",fill:"text"},"Show critical path only"))),a.createElement("div",{className:jn.nextPrevResult},a.createElement(ko,{trace:Ge,spanFilterMatches:St,setFocusedSpanIdForSearch:Bn,focusedSpanIndexForSearch:sn,setFocusedSpanIndexForSearch:On,datasourceType:wn,showSpanFilters:ua})))))}),Ql=Ze=>{const Je=(0,ut.fW)({theme:Ze,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,n.css)(Je.button),buttonDisabled:(0,n.css)(Je.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,n.css)`
      display: inline;
    `,controls:(0,n.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,matchesOnly:(0,n.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;
    `,clearMatchesButton:(0,n.css)`
      color: ${Ze.colors.text.primary};

      &:hover {
        background: inherit;
      }
    `,nextPrevResult:(0,n.css)`
      margin-left: auto;
      display: flex;
      align-items: center;
    `}},Qi=(0,a.memo)(Ze=>{const{trace:Je,search:Ge,setSearch:mt,showSpanFilters:St,setShowSpanFilters:At,showSpanFilterMatchesOnly:Ft,setShowSpanFilterMatchesOnly:Qt,showCriticalPathSpansOnly:an,setShowCriticalPathSpansOnly:sn,setFocusedSpanIdForSearch:On,spanFilterMatches:Bn,datasourceType:wn}=Ze,zn={...(0,g.wW)(Cr)},[ua,jn]=(0,a.useState)(),[ha,la]=(0,a.useState)(),[ma,Fa]=(0,a.useState)(),[oa,Va]=(0,a.useState)({}),[Ya,ps]=(0,a.useState)(-1),Ts=/^\d+(?:\.\d)?\d*(?:ns|us|s|ms|s|m|h)$/,Cs=(0,a.useCallback)(()=>{jn(void 0),la(void 0),Fa(void 0),Va({}),mt(ai.js),Qt(!1)},[mt,Qt]);if((0,a.useEffect)(()=>{Cs()},[Cs,Je]),!Je)return null;const vs=In=>{ps(-1),On(""),mt(In)},js=()=>{if(!ua){const In=Je.spans.map(aa=>aa.process.serviceName);jn((0,Pe.uniq)(In).sort().map(xs.E))}},ws=()=>{if(!ha){const In=Je.spans.map(aa=>aa.operationName);la((0,Pe.uniq)(In).sort().map(xs.E))}},br=()=>{if(!ma){let In=[],aa=[];Je.spans.forEach(Da=>{Da.tags.forEach(ja=>{In.push(ja.key)}),Da.process.tags.forEach(ja=>{In.push(ja.key)}),Da.logs!==null&&Da.logs.forEach(ja=>{ja.fields.forEach(Ls=>{aa.push(Ls.key)})}),Da.kind&&In.push(Wn),Da.statusCode!==void 0&&In.push(Pn),Da.statusMessage&&In.push(sa),Da.instrumentationLibraryName&&In.push(va),Da.instrumentationLibraryVersion&&In.push(An),Da.traceState&&In.push(Xn),In.push(ra)}),In=(0,Pe.uniq)(In).sort(),aa=(0,Pe.uniq)(aa).sort(),Fa([...In,...aa].map(xs.E))}},_r=async In=>{const aa=[];return Je.spans.forEach(Da=>{const ja=Da.tags.find(as=>as.key===In)?.value;ja&&aa.push(ja.toString());const Ls=Da.process.tags.find(as=>as.key===In)?.value;switch(Ls&&aa.push(Ls.toString()),Da.logs!==null&&Da.logs.forEach(as=>{const Ir=as.fields.find(fs=>fs.key===In)?.value;Ir&&aa.push(Ir.toString())}),In){case Wn:Da.kind&&aa.push(Da.kind);break;case Pn:Da.statusCode!==void 0&&aa.push(Xt.Q[Da.statusCode].toLowerCase());break;case sa:Da.statusMessage&&aa.push(Da.statusMessage);break;case va:Da.instrumentationLibraryName&&aa.push(Da.instrumentationLibraryName);break;case An:Da.instrumentationLibraryVersion&&aa.push(Da.instrumentationLibraryVersion);break;case Xn:Da.traceState&&aa.push(Da.traceState);break;case ra:aa.push(Da.spanID);break;default:break}}),(0,Pe.uniq)(aa).sort().map(xs.E)},Zr=(In,aa)=>{mt({...Ge,tags:Ge.tags?.map(ja=>ja.id===In.id?{...ja,key:aa?.value||"",value:void 0}:ja)}),(async()=>{if(aa?.value)Va({...oa,[In.id]:await _r(aa.value)});else{const ja={...oa};ja[In.id]&&delete ja[In.id],Va(ja)}})()},As=()=>{const In={id:(0,ai.kb)(),operator:"="};mt({...Ge,tags:[...Ge.tags,In]})},Pr=In=>{let aa=Ge.tags.filter(Da=>Da.id!==In);aa.length===0&&(aa=[{id:(0,ai.kb)(),operator:"="}]),mt({...Ge,tags:aa})},$s=a.createElement(a.Fragment,null,a.createElement(Oe.u,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},a.createElement("span",{className:zn.collapseLabel},"Span Filters",a.createElement(le.J,{size:"md",name:"info-circle"}))),!St&&a.createElement("div",{className:zn.nextPrevResult},a.createElement(ko,{trace:Je,spanFilterMatches:Bn,setFocusedSpanIdForSearch:On,focusedSpanIndexForSearch:Ya,setFocusedSpanIndexForSearch:ps,datasourceType:wn,showSpanFilters:St})));return a.createElement("div",{className:zn.container},a.createElement(kl.U,{label:$s,collapsible:!0,isOpen:St,onToggle:At},a.createElement(ti.Z,{className:zn.flexContainer},a.createElement(yo._,{label:"Service Name",labelWidth:16},a.createElement(ni.Lh,{spacing:"xs"},a.createElement(yr.Ph,{"aria-label":"Select service name operator",onChange:In=>vs({...Ge,serviceNameOperator:In.value}),options:[(0,xs.E)("="),(0,xs.E)("!=")],value:Ge.serviceNameOperator}),a.createElement(yr.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:In=>vs({...Ge,serviceName:In?.value||""}),onOpenMenu:js,options:ua,placeholder:"All service names",value:Ge.serviceName||null}))),a.createElement(ji,{onChange:In=>{vs({...Ge,query:In}),In===""&&Qt(!1)},value:Ge.query||""})),a.createElement(ti.Z,null,a.createElement(yo._,{label:"Span Name",labelWidth:16},a.createElement(ni.Lh,{spacing:"xs"},a.createElement(yr.Ph,{"aria-label":"Select span name operator",onChange:In=>vs({...Ge,spanNameOperator:In.value}),options:[(0,xs.E)("="),(0,xs.E)("!=")],value:Ge.spanNameOperator}),a.createElement(yr.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:In=>vs({...Ge,spanName:In?.value||""}),onOpenMenu:ws,options:ha,placeholder:"All span names",value:Ge.spanName||null})))),a.createElement(ti.Z,null,a.createElement(yo._,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},a.createElement(ni.Lh,{spacing:"xs",align:"flex-start"},a.createElement(yr.Ph,{"aria-label":"Select min span operator",onChange:In=>vs({...Ge,fromOperator:In.value}),options:[(0,xs.E)(">"),(0,xs.E)(">=")],value:Ge.fromOperator}),a.createElement("div",{className:zn.intervalInput},a.createElement(Do.w,{ariaLabel:"Select min span duration",onChange:In=>vs({...Ge,from:In}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Ge.from||"",validationRegex:Ts})),a.createElement(yr.Ph,{"aria-label":"Select max span operator",onChange:In=>vs({...Ge,toOperator:In.value}),options:[(0,xs.E)("<"),(0,xs.E)("<=")],value:Ge.toOperator}),a.createElement(Do.w,{ariaLabel:"Select max span duration",onChange:In=>vs({...Ge,to:In}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Ge.to||"",validationRegex:Ts})))),a.createElement(ti.Z,{className:zn.tagsRow},a.createElement(yo._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},a.createElement("div",null,Ge.tags.map((In,aa)=>a.createElement("div",{key:aa},a.createElement(ni.Lh,{spacing:"xs",width:"auto"},a.createElement(yr.Ph,{"aria-label":"Select tag key",isClearable:!0,key:In.key,onChange:Da=>Zr(In,Da),onOpenMenu:br,options:ma,placeholder:"Select tag",value:In.key||null}),a.createElement(yr.Ph,{"aria-label":"Select tag operator",onChange:Da=>{vs({...Ge,tags:Ge.tags?.map(ja=>ja.id===In.id?{...ja,operator:Da.value}:ja)})},options:[(0,xs.E)("="),(0,xs.E)("!=")],value:In.operator}),a.createElement("span",{className:zn.tagValues},a.createElement(yr.Ph,{"aria-label":"Select tag value",isClearable:!0,key:In.value,onChange:Da=>{vs({...Ge,tags:Ge.tags?.map(ja=>ja.id===In.id?{...ja,value:Da?.value||""}:ja)})},options:oa[In.id]?oa[In.id]:[],placeholder:"Select value",value:In.value})),a.createElement(Ci._,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>Pr(In.id),title:"Remove tag"}),a.createElement("span",{className:zn.addTag},Ge?.tags?.length&&aa===Ge.tags.length-1&&a.createElement(Ci._,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:As,title:"Add tag"})))))))),a.createElement(fo,{trace:Je,search:Ge,spanFilterMatches:Bn,showSpanFilterMatchesOnly:Ft,setShowSpanFilterMatchesOnly:Qt,showCriticalPathSpansOnly:an,setShowCriticalPathSpansOnly:sn,setFocusedSpanIdForSearch:On,focusedSpanIndexForSearch:Ya,setFocusedSpanIndexForSearch:ps,datasourceType:wn,clear:Cs,showSpanFilters:St})))});Qi.displayName="SpanFilters";const Cr=Ze=>({container:(0,n.css)`
      label: SpanFilters;
      margin: 0.5em 0 -${Ze.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,n.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,flexContainer:(0,n.css)({display:"flex",justifyContent:"space-between"}),addTag:(0,n.css)`
      margin: 0 0 0 10px;
    `,intervalInput:(0,n.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,n.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,n.css)`
      max-width: 200px;
    `,nextPrevResult:(0,n.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${Ze.spacing(1)};
    `}),Yr=(0,a.memo)(Ze=>{const{trace:Je,data:Ge,app:mt,timeZone:St,search:At,setSearch:Ft,showSpanFilters:Qt,setShowSpanFilters:an,showSpanFilterMatchesOnly:sn,setShowSpanFilterMatchesOnly:On,showCriticalPathSpansOnly:Bn,setShowCriticalPathSpansOnly:wn,setFocusedSpanIdForSearch:zn,spanFilterMatches:ua,datasourceType:jn,setHeaderHeight:ha}=Ze,la=(0,g.wW)(Gs);(0,a.useEffect)(()=>{ha(document.querySelector("."+la.header)?.scrollHeight??0)},[ha,Qt,la.header]);const ma=(0,a.useMemo)(()=>Je?uo(Je):[],[Je]);if(!Je)return null;const Fa=(Cs,vs)=>{const js=(0,en.dq)(Cs.startTime/1e3,{timeZone:vs,defaultWithMS:!0}),ws=js.match(/^(.+)(:\d\d\.\d+)$/);return ws?a.createElement("span",{className:la.TracePageHeaderOverviewItemValue},ws[1],a.createElement("span",{className:la.TracePageHeaderOverviewItemValueDetail},ws[2])):js},oa=a.createElement("h1",{className:s()(la.title)},a.createElement(kn,{traceName:ei(Je.spans)}),a.createElement("small",{className:la.duration},(0,D.LU)(Je.duration))),{method:Va,status:Ya,url:ps}=zo(Je.spans);let Ts="green";return Ya&&Ya.length>0&&(Ya[0].value.toString().charAt(0)==="4"?Ts="orange":Ya[0].value.toString().charAt(0)==="5"&&(Ts="red")),a.createElement("header",{className:la.header},a.createElement("div",{className:la.titleRow},ma&&ma.length>0&&a.createElement(Pt,{links:ma,className:la.TracePageHeaderBack}),oa,a.createElement(zl,{traceId:Je.traceID,data:Ge,app:mt})),a.createElement("div",{className:la.subtitle},a.createElement("span",{className:la.timestamp},Fa(Je,St)),a.createElement("span",{className:la.tagMeta},Va&&Va.length>0&&a.createElement(Oe.u,{content:"http.method",interactive:!0},a.createElement("span",{className:la.tag},a.createElement(lo.C,{text:Va[0].value,color:"blue"}))),Ya&&Ya.length>0&&a.createElement(Oe.u,{content:"http.status_code",interactive:!0},a.createElement("span",{className:la.tag},a.createElement(lo.C,{text:Ya[0].value,color:Ts}))),ps&&ps.length>0&&a.createElement(Oe.u,{content:"http.url or http.target or http.path",interactive:!0},a.createElement("span",{className:la.url},ps[0].value)))),a.createElement(Qi,{trace:Je,showSpanFilters:Qt,setShowSpanFilters:an,showSpanFilterMatchesOnly:sn,setShowSpanFilterMatchesOnly:On,showCriticalPathSpansOnly:Bn,setShowCriticalPathSpansOnly:wn,search:At,setSearch:Ft,spanFilterMatches:ua,setFocusedSpanIdForSearch:zn,datasourceType:jn}))});Yr.displayName="TracePageHeader";const Gs=Ze=>({TracePageHeaderBack:(0,n.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:s()((0,n.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,n.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,n.css)`
      label: TracePageHeader;
      background-color: ${Ze.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:(0,n.css)`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:(0,n.css)`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:(0,n.css)`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:(0,n.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,n.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,n.css)`
      vertical-align: middle;
    `,tagMeta:(0,n.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,n.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,n.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});class gr{constructor(Je){const{isTagsOpen:Ge,isProcessOpen:mt,isReferencesOpen:St,isWarningsOpen:At,isStackTracesOpen:Ft,logs:Qt,references:an}=Je||{};this.isTagsOpen=!!Ge,this.isProcessOpen=!!mt,this.isReferencesOpen=!!St,this.isWarningsOpen=!!At,this.isStackTracesOpen=!!Ft,this.logs={isOpen:!!(Qt&&Qt.isOpen),openedItems:Qt&&Qt.openedItems?new Set(Qt.openedItems):new Set},this.references={isOpen:!!(an&&an.isOpen),openedItems:an&&an.openedItems?new Set(an.openedItems):new Set}}toggleTags(){const Je=new gr(this);return Je.isTagsOpen=!this.isTagsOpen,Je}toggleProcess(){const Je=new gr(this);return Je.isProcessOpen=!this.isProcessOpen,Je}toggleReferences(){const Je=new gr(this);return Je.references.isOpen=!this.references.isOpen,Je}toggleReferenceItem(Je){const Ge=new gr(this);return Ge.references.openedItems.has(Je)?Ge.references.openedItems.delete(Je):Ge.references.openedItems.add(Je),Ge}toggleWarnings(){const Je=new gr(this);return Je.isWarningsOpen=!this.isWarningsOpen,Je}toggleStackTraces(){const Je=new gr(this);return Je.isStackTracesOpen=!this.isStackTracesOpen,Je}toggleLogs(){const Je=new gr(this);return Je.logs.isOpen=!this.logs.isOpen,Je}toggleLogItem(Je){const Ge=new gr(this);return Ge.logs.openedItems.has(Je)?Ge.logs.openedItems.delete(Je):Ge.logs.openedItems.add(Je),Ge}}var oi=e(7261);class Or{static iterFunction(Je,Ge=0){return mt=>Je(mt.value,mt,Ge)}static searchFunction(Je){return typeof Je=="function"?Je:(Ge,mt)=>Je instanceof Or?mt===Je:Ge===Je}constructor(Je,Ge=[]){this.value=Je,this.children=Ge}get depth(){return this.children.reduce((Je,Ge)=>Math.max(Ge.depth+1,Je),1)}get size(){let Je=0;return this.walk(()=>Je++),Je}addChild(Je){return this.children.push(Je instanceof Or?Je:new Or(Je)),this}find(Je){if(Or.iterFunction(Or.searchFunction(Je))(this))return this;for(let mt=0;mt<this.children.length;mt++){const St=this.children[mt].find(Je);if(St)return St}return null}getPath(Je){const Ge=Or.iterFunction(Or.searchFunction(Je)),mt=(St,At)=>{const Ft=At.concat([St]);if(Ge(St))return Ft;for(let Qt=0;Qt<St.children.length;Qt++){const an=St.children[Qt],sn=mt(an,Ft);if(sn)return sn}return null};return mt(this,[])}walk(Je,Ge=0){const mt=[];let St=Ge;for(mt.push({node:this,depth:St});mt.length;){const At=mt[mt.length-1];mt.pop();const{node:Ft,depth:Qt}=At;Je(Ft.value,Ft,Qt),St=Qt+1;let an=Ft.children.length-1;for(;an>=0;)mt.push({node:Ft.children[an],depth:St}),an--}}paths(Je){const Ge=[];Ge.push({node:this,childIndex:0});const mt=[];for(;Ge.length;){const{node:St,childIndex:At}=Ge[Ge.length-1];if(St.children.length>=At+1)Ge[Ge.length-1].childIndex++,Ge.push({node:St.children[At],childIndex:0});else{if(St.children.length===0){const Ft=Ge.map(Qt=>Qt.node.value);Je(Ft)}Ge.pop()}}return mt}}const Yl=Ze=>Ze.spanID,Mi=Ze=>Ze.references||[],Zl=(0,oi.P1)((0,oi.P1)(({span:Ze})=>Ze,Mi),({type:Ze})=>Ze,(Ze,Je)=>Ze.find(Ge=>Ge.refType===Je)),cd=(0,oi.P1)(Ze=>Zl({span:Ze,type:"CHILD_OF"}),Ze=>Ze?Ze.spanID:null),Jl=Ze=>Ze.spans,Xl=(0,oi.P1)(Jl,Ze=>Ze.reduce((Je,Ge)=>Je.set(Yl(Ge),Ge),new Map)),Yi="__root__";function Zi(Ze,Je=null){const Ge=new Map(Ze.spans.map(Ft=>[Ft.spanID,new Or(Ft.spanID)])),mt=Je??new Map(Ze.spans.map(Ft=>[Ft.spanID,Ft])),St=new Or(Yi);Ze.spans.forEach(Ft=>{const Qt=Ge.get(Ft.spanID);if(Array.isArray(Ft.references)&&Ft.references.length){const{refType:an,spanID:sn}=Ft.references[0];if(an==="CHILD_OF"||an==="FOLLOWS_FROM")(Ge.get(sn)||St).children?.push(Qt);else throw new Error(`Unrecognized ref type: ${an}`)}else St.children.push(Qt)});const At=(Ft,Qt)=>{const an=Ft?.value?mt.get(Ft.value.toString()):void 0,sn=Qt?.value?mt.get(Qt.value.toString()):void 0;return+(an?.startTime>sn?.startTime)||+(an?.startTime===sn?.startTime)-1};return Ze.spans.forEach(Ft=>{const Qt=Ge.get(Ft.spanID);Qt.children.length>1&&Qt?.children.sort(At)}),St.children.sort(At),St}function ii(Ze){const Je=new Map,Ge=Ze.reduce((St,At)=>(St.some(Ft=>Ft.key===At.key&&Ft.value===At.value)?Je.set(`${At.key}:${At.value}`,`Duplicate tag "${At.key}:${At.value}"`):St.push(At),St),[]),mt=Array.from(Je.values());return{dedupedTags:Ge,warnings:mt}}function li(Ze,Je){const Ge=Ze?.slice()??[],mt=(Je||[]).map(St=>St.toLowerCase());return Ge.sort((St,At)=>{const Ft=St.key.toLowerCase(),Qt=At.key.toLowerCase();for(let an=0;an<mt.length;an++){const sn=mt[an];if(Ft.startsWith(sn)&&!Qt.startsWith(sn))return-1;if(!Ft.startsWith(sn)&&Qt.startsWith(sn))return 1}return Ft>Qt?1:Ft<Qt?-1:0}),Ge}function ci(Ze){if(!Ze?.traceID)return null;const Je=Ze.traceID.toLowerCase();let Ge=0,mt=Number.MAX_SAFE_INTEGER;const St=new Map,At=new Map;Ze.spans=Ze.spans.filter(wn=>!!wn.startTime),Ze.processes=Object.entries(Ze.processes).reduce((wn,[zn,ua])=>(wn[zn]={...ua,tags:li(ua.tags)},wn),{});const Ft=Ze.spans.length;for(let wn=0;wn<Ft;wn++){const zn=Ze.spans[wn],{startTime:ua,duration:jn,processID:ha}=zn;let la=zn.spanID;ua<mt&&(mt=ua),ua+jn>Ge&&(Ge=ua+jn);const ma=St.get(la);ma!=null?(console.warn(`Dupe spanID, ${ma+1} x ${la}`,zn,At.get(la)),(0,Pe.isEqual)(zn,At.get(la))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),St.set(la,ma+1),la=`${la}_${ma}`,zn.spanID=la):St.set(la,1),zn.process=Ze.processes[ha],At.set(la,zn)}const Qt=Zi(Ze,At),an=[],sn={};Qt.walk((wn,zn,ua=0)=>{if(wn==="__root__"||typeof wn!="string")return;const jn=At.get(wn);if(!jn)return;const{serviceName:ha}=jn.process;sn[ha]=(sn[ha]||0)+1,jn.relativeStartTime=jn.startTime-mt,jn.depth=ua-1,jn.hasChildren=zn.children.length>0,jn.childSpanCount=zn.children.length,jn.warnings=jn.warnings||[],jn.tags=jn.tags||[],jn.references=jn.references||[],jn.childSpanIds=zn.children.slice().sort((ma,Fa)=>{const oa=At.get(ma.value),Va=At.get(Fa.value);return Va.startTime+Va.duration-(oa.startTime+oa.duration)}).map(ma=>ma.value);const la=ii(jn.tags);jn.tags=li(la.dedupedTags,Aa("topTagPrefixes")),jn.warnings=jn.warnings.concat(la.warnings),jn.references.forEach((ma,Fa)=>{const oa=At.get(ma.spanID);oa&&(ma.span=oa,Fa>0&&(oa.subsidiarilyReferencedBy=oa.subsidiarilyReferencedBy||[],oa.subsidiarilyReferencedBy.push({spanID:wn,traceID:Je,span:jn,refType:ma.refType})))}),an.push(jn)});const On=ei(an);return{services:Object.keys(sn).map(wn=>({name:wn,numberOfSpans:sn[wn]})),spans:an,traceID:Je,traceName:On,processes:Ze.processes,duration:Ge-mt,startTime:mt,endTime:Ge}}},18180:(Q,A,e)=>{"use strict";e.d(A,{Hn:()=>m,Kg:()=>E,th:()=>v,vc:()=>h});var n=e(76932),a=e(31733),i=e(84275),r=e(44992),o=e(98463),g=e(76067),u=e(47701),c=e(41164),l=e(38834),d=e(64516),f=e(5936);const m="None",v="Duration",E="Tag";function p({options:y,onOptionsChange:D}){const C=(0,g.wW)(s),P=[m,v,E].map(i.E);return a.createElement("div",{className:(0,n.css)({width:"100%"})},a.createElement(u.Z,{className:C.row},a.createElement(c._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},a.createElement(l.Ph,{inputId:"label",options:P,value:y.jsonData.spanBar?.type||"",onChange:b=>{(0,r.tp)({onOptionsChange:D,options:y},"spanBar",{...y.jsonData.spanBar,type:b?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),y.jsonData.spanBar?.type===E&&a.createElement(u.Z,{className:C.row},a.createElement(c._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},a.createElement(d.I,{type:"text",placeholder:"Enter tag key",onChange:b=>(0,r.tp)({onOptionsChange:D,options:y},"spanBar",{...y.jsonData.spanBar,tag:b.currentTarget.value}),value:y.jsonData.spanBar?.tag||"",width:40}))))}const h=({options:y,onOptionsChange:D})=>{let C=y.type;return C+=y.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",a.createElement(o._,{title:"Span bar",description:a.createElement(f.W,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:C,feature:"the span bar"})},a.createElement(p,{options:y,onOptionsChange:D}))},s=y=>({infoText:(0,n.css)`
    label: infoText;
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `,row:(0,n.css)`
    label: row;
    align-items: baseline;
  `})},81757:(Q,A,e)=>{"use strict";e.d(A,{u:()=>n});var n=(a=>(a.Logs="log",a.Traces="trace",a.Metrics="metric",a.Profiles="profile",a.Unknown="unknown",a))(n||{})},91884:(Q,A,e)=>{"use strict";e.d(A,{GL:()=>u,H3:()=>g,Im:()=>E,K9:()=>h,WW:()=>a,b$:()=>v,bi:()=>i,h2:()=>o,im:()=>r,oD:()=>c,ty:()=>p,xb:()=>m});var n=e(76932);const a=(0,n.css)`
  position: relative;
`,i=(0,n.css)`
  margin-bottom: 0.25rem;
`,r=(0,n.css)`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,o=(0,n.css)`
  margin: 0;
`,g=(0,n.css)`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,u=(0,n.css)`
  padding-bottom: 0.5rem;
`,c=(0,n.css)`
  display: flex;
`,l=(0,n.css)`
  align-items: center;
`,d=(0,n.css)`
  align-items: start;
`,f=(0,n.css)`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,m=(0,n.css)`
  text-align: right;
`,v=(0,n.css)`
  display: inline-block;
`,E=(0,n.css)`
  margin: -0.2rem 0.25rem 0 0;
`,p=(0,n.css)`
  text-overflow: ellipsis;
`,h=(0,n.css)`
  width: 100%;
`,s=(0,n.css)`
  color: #aaa;
`,y=(0,n.css)`
  justify-content: flex-end;
`},73118:(Q,A,e)=>{"use strict";e.d(A,{EUpdateTypes:()=>a,default:()=>o});var n=(g=>(g.DragEnd="DragEnd",g.DragMove="DragMove",g.DragStart="DragStart",g.MouseEnter="MouseEnter",g.MouseLeave="MouseLeave",g.MouseMove="MouseMove",g))(n||{});const a=n;var i=e(69781);const r=0;class o{constructor({getBounds:u,tag:c,resetBoundsOnResize:l=!0,...d}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=f=>{const{button:m,clientX:v,type:E}=f;if(this._isDragging||m!==r)return;let p=null,h;if(E==="mouseenter")p=a.MouseEnter,h=this._onMouseEnter;else if(E==="mouseleave")p=a.MouseLeave,h=this._onMouseLeave;else if(E==="mousemove")p=a.MouseMove,h=this._onMouseMove;else throw new Error(`invalid event type: ${E}`);if(!h)return;const{value:s,x:y}=this._getPosition(v);h({event:f,type:p,value:s,x:y,manager:this,tag:this.tag})},this._handleDragEvent=f=>{const{button:m,clientX:v,type:E}=f;let p=null,h;if(E==="mousedown"){if(this._isDragging||m!==r)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const D=(0,i.get)(document,"body.style");D&&(D.userSelect="none"),this._isDragging=!0,p=a.DragStart,h=this._onDragStart}else if(E==="mousemove"){if(!this._isDragging)return;p=a.DragMove,h=this._onDragMove}else if(E==="mouseup"){if(!this._isDragging)return;this._stopDragging(),p=a.DragEnd,h=this._onDragEnd}else throw new Error(`invalid event type: ${E}`);if(!h)return;const{value:s,x:y}=this._getPosition(v);h({event:f,type:p,value:s,x:y,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=u,this.tag=c,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!l,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=d.onMouseEnter,this._onMouseLeave=d.onMouseLeave,this._onMouseMove=d.onMouseMove,this._onDragStart=d.onDragStart,this._onDragMove=d.onDragMove,this._onDragEnd=d.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(u){const{clientXLeft:c,maxValue:l,minValue:d,width:f}=this._getBounds();let m=u-c,v=m/f;return d!=null&&v<d?(v=d,m=d*f):l!=null&&v>l&&(v=l,m=l*f),{value:v,x:m}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const u=(0,i.get)(document,"body.style");u&&(u.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},17739:(Q,A,e)=>{"use strict";e.d(A,{_K:()=>c,e6:()=>l});var n=e(90093),a=e(37479),i=e(63956);function r(f){if(f.length!==7)return[0,0,0];const m=f.slice(1,3),v=f.slice(3,5),E=f.slice(5);return[parseInt(m,16),parseInt(v,16),parseInt(E,16)]}class o{constructor(m,v){const E=d(m,v);this.colorsHex=E,this.colorsRgb=E.map(r),this.cache=new Map,this.prevColorIndex=void 0}_getColorIndex(m){let v=this.cache.get(m);if(v==null){const E=this.hashCode(m?m.toLowerCase():"");if(v=Math.abs(E%this.colorsHex.length),this.prevColorIndex!==void 0){this.prevColorIndex===v&&(v=this.getNextIndex(v));const p=this.colorsHex[this.prevColorIndex];if(a.Z.readability(p,this.colorsHex[v])<1.5){let h=v;for(let s=0;s<this.colorsHex.length;s++)if(h=this.getNextIndex(h),a.Z.readability(p,this.colorsHex[h])>1.5){v=h;break}}}this.cache.set(m,v),this.prevColorIndex=v}return v}getNextIndex(m){return m+1<this.colorsHex.length?m+1:0}hashCode(m){let v=0,E,p;for(E=0;E<m.length;E++)p=m.charCodeAt(E),v=(v<<5)-v+p;return v}getColorByKey(m){const v=this._getColorIndex(m);return this.colorsHex[v]}getRgbColorByKey(m){const v=this._getColorIndex(m);return this.colorsRgb[v]}clear(){this.cache.clear()}}const g=(0,n.Z)((f,m)=>new o(f,m));function u(f){g([],f)}function c(f,m){return g(i.O9,m).getColorByKey(f)}function l(f,m){return g(i.O9,m).getRgbColorByKey(f)}function d(f,m){const v=[...f],E=v.indexOf("#E24D42");E>-1&&v.splice(E,1);const p=f.indexOf("#BF1B00");p>-1&&v.splice(p,1);let h=[];for(const s of v)a.Z.readability(m.colors.background.primary,s)>=3&&h.push(s);return h}},84403:(Q,A,e)=>{"use strict";e.d(A,{LU:()=>D});var n=e(69781),a=e.n(n),i=e(35051),r=e.n(i);const o="YYYY-MM-DD",g="HH:mm",u=1e3,c=1e3*u,l=60*c,d=60*l,f=24*d,m=Math.log10(u),v=[{unit:"d",microseconds:f,ofPrevious:24},{unit:"h",microseconds:d,ofPrevious:60},{unit:"m",microseconds:l,ofPrevious:60},{unit:"s",microseconds:c,ofPrevious:1e3},{unit:"ms",microseconds:u,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],E=(C,P,b)=>toFloatPrecision(C/b,P)*b;function p(C){return moment(C/u).format(o)}function h(C){return moment(C/u).format(g)}function s(C){const P=E(C,m,u);return`${moment.duration(P/u).asMilliseconds()}ms`}function y(C){const P=E(C,m,c);return`${moment.duration(P/u).asSeconds()}s`}function D(C){const[P,b]=(0,n.dropWhile)(v,({microseconds:M},x)=>x<v.length-1&&M>C);if(P.ofPrevious===1e3)return`${(0,n.round)(C/P.microseconds,2)}${P.unit}`;const O=`${Math.floor(C/P.microseconds)}${P.unit}`,R=Math.round(C/b.microseconds%P.ofPrevious),I=`${R}${b.unit}`;return R===0?O:`${O} ${I}`}},11992:(Q,A,e)=>{"use strict";e.d(A,{n4:()=>v,wq:()=>E,yN:()=>P,yj:()=>d});var n=e(31733),a=e(81548),i=e(17201),r=e(74011),o=e(61129),g=e(49311),u=e(97001),c=e(97402),l=e(81757);function d({splitOpenFn:M,traceToLogsOptions:x,traceToMetricsOptions:L,traceToProfilesOptions:S,dataFrame:U,createFocusSpanLink:N,trace:w}){if(!U)return;let G=O(w);const _=U.fields.some(k=>!!k.config.links?.length),K=p(M,U.fields[0],x,L,N,G);return function(z){let W=K(z);if(_){G={...G,...R(z),...I(z,S)};const Z=U.fields.filter(H=>!!H.config.links?.length);try{let H;S?.datasourceUid&&(H=(0,u.ak)().getInstanceSettings(S.datasourceUid));const X=H?.type==="grafana-pyroscope-datasource",Y=z.tags.some(ge=>ge.key===E),ne=X&&Y;let se=[];Z.forEach(ge=>{const q=(0,c.a_)({field:ge,rowIndex:z.dataFrameRowIndex,splitOpenFn:M,range:b(z,void 0,void 0,ne),dataFrame:U,vars:G});se=se.concat(q)});const re=se.map(ge=>({title:ge.title,href:ge.href,onClick:ge.onClick,content:n.createElement(g.J,{name:"link",title:ge.title||"Link"}),field:ge.origin,type:ne?l.u.Profiles:l.u.Unknown}));W.push.apply(W,re)}catch(H){return console.error(H),W}}return W}}const f=M=>M.map(x=>({key:x,value:x.includes(".")?x.replace(".","_"):void 0})),m=f(["cluster","hostname","namespace","pod","service.name","service.namespace"]),v=f(["service.name","service.namespace"]),E="pyroscope.profile.id";function p(M,x,L,S,U,N){let w;L?.datasourceUid&&(w=(0,u.ak)().getInstanceSettings(L.datasourceUid));const G=w?.type==="grafana-splunk-datasource";let _;return S?.datasourceUid&&(_=(0,u.ak)().getInstanceSettings(S.datasourceUid)),function(k){N={...N,...R(k)};const z=[];let W,Z="";if(w&&L){const H=L.customQuery?L.query:void 0,X=L.tags&&L.tags.length>0?L.tags:m;switch(w?.type){case"loki":Z=P(k,X),W=h(k,L,Z,H);break;case"grafana-splunk-datasource":Z=P(k,X,{joinBy:" "}),W=y(k,L,Z,H);break;case"elasticsearch":case"grafana-opensearch-datasource":Z=P(k,X,{labelValueSign:":",joinBy:" AND "}),W=s(k,L,Z,H);break;case"grafana-falconlogscale-datasource":Z=P(k,X,{joinBy:" OR "}),W=C(k,L,Z,H);break;case"googlecloud-logging-datasource":Z=P(k,X,{joinBy:" AND "}),W=D(k,L,Z,H)}if(W){const Y={title:w.name,url:"",internal:{datasourceUid:w.uid,datasourceName:w.name,query:W}};if(N={...N,__tags:{text:"Tags",value:Z}},(0,c.lt)(Y.internal.query,N).allVariablesDefined){const ne=(0,a._)({link:Y,internalLink:Y.internal,scopedVars:N,range:b(k,{startMs:L.spanStartTimeShift?i.intervalToMs(L.spanStartTimeShift):0,endMs:L.spanEndTimeShift?i.intervalToMs(L.spanEndTimeShift):0},G),field:{},onClickFn:M,replaceVariables:(0,o.J)().replace.bind((0,o.J)())});z.push({href:ne.href,title:"Related logs",onClick:ne.onClick,content:n.createElement(g.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:x,type:l.u.Logs})}}}if(_&&S?.queries)for(const H of S.queries){const X=T(H,S?.tags||[],k),Y={title:_.name,url:"",internal:{datasourceUid:_.uid,datasourceName:_.name,query:{expr:X,refId:"A"}}},ne=(0,a._)({link:Y,internalLink:Y.internal,scopedVars:{},range:b(k,{startMs:S.spanStartTimeShift?i.intervalToMs(S.spanStartTimeShift):-12e4,endMs:S.spanEndTimeShift?i.intervalToMs(S.spanEndTimeShift):12e4}),field:{},onClickFn:M,replaceVariables:(0,o.J)().replace.bind((0,o.J)())});z.push({title:H?.name,href:ne.href,onClick:ne.onClick,content:n.createElement(g.J,{name:"chart-line",title:"Explore metrics for this span"}),field:x,type:l.u.Metrics})}if(k.references&&U)for(const H of k.references){if(H.refType==="CHILD_OF")continue;const X=U(H.traceID,H.spanID);z.push({href:X.href,title:H.span?H.span.operationName:"View linked span",content:n.createElement(g.J,{name:"link",title:"View linked span"}),onClick:X.onClick,field:X.origin,type:l.u.Traces})}if(k.subsidiarilyReferencedBy&&U)for(const H of k.subsidiarilyReferencedBy){const X=U(H.traceID,H.spanID);z.push({href:X.href,title:H.span?H.span.operationName:"View linked span",content:n.createElement(g.J,{name:"link",title:"View linked span"}),onClick:X.onClick,field:X.origin,type:l.u.Traces})}return z}}function h(M,x,L,S){const{filterByTraceID:U,filterBySpanID:N}=x;if(S)return{expr:S,refId:""};if(!L)return;let w="{${__tags}}";return U&&M.traceID&&(w+=' |="${__span.traceId}"'),N&&M.spanID&&(w+=' |="${__span.spanId}"'),{expr:w,refId:""}}function s(M,x,L,S){const{filterByTraceID:U,filterBySpanID:N}=x;if(S)return{query:S,refId:"",metrics:[{id:"1",type:"logs"}]};let w=[];return N&&M.spanID&&w.push('"${__span.spanId}"'),U&&M.traceID&&w.push('"${__span.traceId}"'),L&&w.push("${__tags}"),{query:w.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function y(M,x,L,S){const{filterByTraceID:U,filterBySpanID:N}=x;if(S)return{query:S,refId:""};let w="";return L&&(w+="${__tags}"),U&&M.traceID&&(w+=' "${__span.traceId}"'),N&&M.spanID&&(w+=' "${__span.spanId}"'),{query:w,refId:""}}function D(M,x,L,S){const{filterByTraceID:U,filterBySpanID:N}=x;if(S)return{query:S,refId:""};let w=[];return N&&M.spanID&&w.push('"${__span.spanId}"'),U&&M.traceID&&w.push('"${__span.traceId}"'),L&&w.push("${__tags}"),{query:w.join(" AND "),refId:""}}function C(M,x,L,S){const{filterByTraceID:U,filterBySpanID:N}=x;if(S)return{lsql:S,refId:""};if(!L)return;let w="${__tags}";return U&&M.traceID&&(w+=' or "${__span.traceId}"'),N&&M.spanID&&(w+=' or "${__span.spanId}"'),{lsql:w,refId:""}}function P(M,x,{labelValueSign:L="=",joinBy:S=", "}={}){return[...M.process.tags,...M.tags,{key:"spanId",value:M.spanID},{key:"traceId",value:M.traceID},{key:"name",value:M.operationName},{key:"duration",value:M.duration}].map(U=>{const N=x.find(w=>w.key===U.key);if(N)return`${N.value?N.value:N.key}${L}"${U.value}"`}).filter(U=>!!U).join(S)}function b(M,x={startMs:0,endMs:0},L=!1,S=!1){let U=Math.floor(M.startTime/1e3+x.startMs);const N=(M.startTime+M.duration)/1e3;let w=Math.floor(N+x.endMs);L&&w-U<1e3?w=U+1e3:S?(U=U-6e4,w=w+6e4):U===w&&w++;const G=(0,r.CQ)(w),_=(0,r.CQ)(U);return{from:_,to:G,raw:{from:_,to:G}}}function T(M,x=[],L){if(!M.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${L.process.serviceName}"}[5m])) by (le))`;let S=M.query;if(x.length&&S.indexOf("$__tags")!==-1){const U=[...L.process.tags,...L.tags],w=x.reduce((G,_)=>{const K=U.find(k=>k.key===_.key)?.value;return K&&G.push(`${_.value?_.value:_.key}="${K}"`),G},[])?.join(", ");S=S.replace(/\$__tags/g,w)}return S}function O(M){return{__trace:{text:"Trace",value:{duration:M.duration,name:M.traceName,traceId:M.traceID}}}}function R(M){const x={};for(const L of M.process.tags)x[L.key]=L.value;for(const L of M.tags)x[L.key]=L.value;return{__span:{text:"Span",value:{spanId:M.spanID,traceId:M.traceID,duration:M.duration,name:M.operationName,tags:x}}}}function I(M,x){let L={};if(x){const S=x.tags&&x.tags.length>0?x.tags:v;L={__tags:{text:"Tags",value:P(M,S)}}}return L}},65908:(Q,A,e)=>{"use strict";e.d(A,{Rx:()=>u,js:()=>g,kb:()=>r});var n=e(31733),a=e(79117),i=e(12179);const r=()=>(0,a.Z)().slice(0,12),g={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:r(),operator:"="}]};function u(c){const[l,d]=(0,n.useState)(g),f=(0,n.useMemo)(()=>c&&(0,i.filterSpans)(l,c),[l,c]);return{search:l,setSearch:d,spanFilterMatches:f}}},21675:(Q,A,e)=>{"use strict";e.d(A,{N:()=>i});var n=e(46901),a=e(12179);function i(o){if(!o)return null;let g=o.fields.length===1?o.fields[0].values[0]:r(o);return g?(0,a.transformTraceData)(g):null}function r(o){const g=new n.U(o),u={};for(let c=0;c<g.length;c++){const l=g.get(c);if(!l.spanID)return null;u[l.spanID]||(u[l.spanID]={serviceName:l.serviceName,tags:l.serviceTags})}return{traceID:g.get(0).traceID,processes:u,spans:g.toArray().map((c,l)=>{const d=[];return c.parentSpanID&&d.push({refType:"CHILD_OF",spanID:c.parentSpanID,traceID:c.traceID}),c.references&&d.push(...c.references.map(f=>({refType:"FOLLOWS_FROM",...f}))),{...c,duration:c.duration*1e3,startTime:c.startTime*1e3,processID:c.spanID,flags:0,references:d,logs:c.logs?.map(f=>({...f,timestamp:f.timestamp*1e3}))||[],dataFrameRowIndex:l}})}}},42593:(Q,A,e)=>{"use strict";e.d(A,{U:()=>U});var n=e(69781),a=e(31733),i=e(54126),r=e(84912),o=e(64704),g=e(19690),u=e(85498),c=e(32901),l=e(85765),d=e(96856),f=e(25111),m=e(5572),v=e(51343),E=e(66368),p=e(56811),h=e(16356),s=e(42342),y=e(69856),D=e(41327),C=(N=>(N.FETCH_DASHBOARD="fetch-dashboard",N.SET_DASHBOARD_LS="set-dashboard-ls-error",N))(C||{});function P(){const N=(0,h.ZQ)();return N.dashboard.panels=[],N}function b(N,w){let G=[];return N==="table"&&w.panelState?.logs?.columns&&(w.panelState.logs?.labelFieldName&&G.push({id:"extractFields",options:{source:w.panelState.logs.labelFieldName}}),G.push({id:"organize",options:{includeByName:Object.values(w.panelState.logs.columns).reduce((_,K)=>({..._,[K]:!0}),{})}})),G}async function T(N){const w=I(N.queries,N.queryResponse,N?.panelState),G={targets:N.queries,type:w,title:"New Panel",gridPos:{x:0,y:0,w:12,h:8},datasource:N.datasource,transformations:b(w,N)};let _;if(N.dashboardUid)try{_=await D.ae.getDashboardByUid(N.dashboardUid)}catch{throw"fetch-dashboard"}else _=P();_.dashboard.panels=[G,..._.dashboard.panels??[]],_.dashboard.time=N.time;try{(0,h.$M)(_)}catch{throw"set-dashboard-ls-error"}}const O=N=>!N.hide,R=N=>w=>w.refId===N;function I(N,w,G){for(const{refId:_}of N.filter(O)){const K=R(_);if(w.flameGraphFrames.some(K))return"flamegraph";if(w.graphFrames.some(K))return"timeseries";if(w.logsFrames.some(K))return G?.logs?.visualisationType?G.logs.visualisationType:"logs";if(w.nodeGraphFrames.some(K))return"nodeGraph";if(w.traceFrames.some(K))return"traces";if(w.customFrames.some(K))return w.customFrames.find(K)?.meta?.preferredVisualisationPluginId??"table"}return"table"}var M=(N=>(N.NewDashboard="new-dashboard",N.ExistingDashboard="existing-dashboard",N))(M||{});function x(N){}function L(N){return N?`d/${N}`:"dashboard/new"}var S=(N=>(N.UNKNOWN="unknown-error",N.NAVIGATION="navigation-error",N))(S||{});function U(N){const{exploreId:w,onClose:G}=N,_=(0,s.useSelector)((0,y.F9)(w)),[K,k]=(0,a.useState)(),{handleSubmit:z,control:W,formState:{errors:Z},watch:H}=(0,i.cI)({defaultValues:{saveTarget:"new-dashboard"}}),X=p.contextSrv.hasPermission(s.AccessControlAction.DashboardsCreate),Y=p.contextSrv.hasPermission(s.AccessControlAction.DashboardsWrite),ne=[];X&&ne.push({label:"New dashboard",value:"new-dashboard"}),Y&&ne.push({label:"Existing dashboard",value:"existing-dashboard"});const se=ne.length>1?H("saveTarget"):ne[0].value,re=async(ge,q)=>{k(void 0);const me=q.saveTarget==="existing-dashboard"?q.dashboardUid:void 0;(0,o.ff)("e_2_d_submit",{newTab:ge,saveTarget:q.saveTarget,queries:_.queries.length});const{from:oe,to:fe}=_.range.raw;try{await T({dashboardUid:me,datasource:_.datasourceInstance?.getRef(),queries:_.queries,queryResponse:_.queryResponse,panelState:_?.panelsState,time:{from:typeof oe=="string"?oe:oe.toISOString(),to:typeof fe=="string"?fe:fe.toISOString()}})}catch(Me){switch(Me){case C.FETCH_DASHBOARD:k({error:Me,message:"Could not fetch dashboard information. Please try again."});break;case C.SET_DASHBOARD_LS:k({error:Me,message:"Could not add panel to dashboard. Please try again."});break;default:k({error:"unknown-error",message:"Something went wrong. Please try again."})}return}const ve=L(me);if(!ge){G(),g.E1.push(r.u.stripBaseFromUrl(ve));return}if(!!!e.g.open(u.config.appUrl+ve,"_blank")){k({error:"navigation-error",message:"Could not navigate to the selected dashboard. Please try again."}),(0,h.f1)();return}G()};return(0,a.useEffect)(()=>{(0,o.ff)("e_2_d_open")},[]),a.createElement("form",null,ne.length>1&&a.createElement(c.g,{control:W,render:({field:{ref:ge,...q}})=>a.createElement(l.g,{label:"Target dashboard",description:"Choose where to add the panel."},a.createElement(d.S,{options:ne,...q,id:"e2d-save-target"})),name:"saveTarget"}),se==="existing-dashboard"&&(()=>a.createElement(c.g,{render:({field:{ref:ge,value:q,onChange:me,...oe}})=>a.createElement(l.g,{label:"Dashboard",description:"Select in which dashboard the panel will be created.",error:Z.dashboardUid?.message,invalid:!!Z.dashboardUid},a.createElement(E.o,{...oe,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:fe=>me(fe?.uid)})),control:W,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:"This field is required."}}}))(),K&&a.createElement(f.b,{severity:"error",title:"Error adding the panel"},K.message),a.createElement(m.u.ButtonRow,null,a.createElement(v.zx,{type:"reset",onClick:G,fill:"outline",variant:"secondary"},"Cancel"),a.createElement(v.zx,{type:"submit",variant:"secondary",onClick:z((0,n.partial)(re,!0)),icon:"external-link-alt"},"Open in new tab"),a.createElement(v.zx,{type:"submit",variant:"primary",onClick:z((0,n.partial)(re,!1)),icon:"apps"},"Open dashboard")))}},50020:(Q,A,e)=>{"use strict";e.d(A,{k:()=>i});var n=e(56811),a=e(42342);function i(){const r=n.contextSrv.hasPermission(a.AccessControlAction.DashboardsCreate),o=n.contextSrv.hasPermission(a.AccessControlAction.DashboardsWrite);return r&&!o?"Add panel to new dashboard":o&&!r?"Add panel to existing dashboard":"Add panel to dashboard"}},75184:(Q,A,e)=>{"use strict";e.d(A,{F:()=>u});var n=e(31733),a=e(84912),i=e(19690),r=e(5572),o=e(79106),g=e(51343);function u(c){const{onDismiss:l,path:d,title:f}=c,m=()=>{e.g.open(a.u.assureBaseUrl(d),"_blank"),l()},v=()=>i.E1.push(d);return n.createElement(r.u,{title:f,isOpen:!0,onDismiss:l},n.createElement(o.wc,{spacing:"sm"},n.createElement("p",null,"Do you want to proceed in the current tab or open a new tab?")),n.createElement(r.u.ButtonRow,null,n.createElement(g.zx,{onClick:l,fill:"outline",variant:"secondary"},"Cancel"),n.createElement(g.zx,{type:"submit",variant:"secondary",onClick:m,icon:"external-link-alt"},"Open in new tab"),n.createElement(g.zx,{type:"submit",variant:"primary",onClick:v,icon:"apps"},"Open")))}},99025:(Q,A,e)=>{"use strict";e.d(A,{G:()=>r});var n=e(31733),a=e(63424),i=e(89154);function r({extensions:u,onSelect:c}){const{categorised:l,uncategorised:d}=g(u),f=d.length>0&&Object.keys(l).length>0;return n.createElement(a.v,null,n.createElement(n.Fragment,null,Object.keys(l).map(m=>n.createElement(a.v.Group,{key:m,label:(0,i.ew)(m,25)},o(l[m],c))),f&&n.createElement(a.v.Divider,{key:"divider"}),o(d,c)))}function o(u,c){return u.map(l=>n.createElement(a.v.Item,{ariaLabel:l.title,icon:l?.icon||"plug",key:l.id,label:(0,i.ew)(l.title,25),onClick:d=>{if(l.path)return c(l);l.onClick?.(d)}}))}function g(u){return(0,n.useMemo)(()=>{const c=[],l={};for(const d of u){if(!d.category){c.push(d);continue}Array.isArray(l[d.category])||(l[d.category]=[]),l[d.category].push(d)}return{uncategorised:c,categorised:l}},[u])}},86555:(Q,A,e)=>{"use strict";e.d(A,{D:()=>H,N:()=>G});var n=e(69781),a=e(31733),i=e(83994),r=e(44343),o=e(20298),g=e(91977),u=e(79999),c=e(42876),l=e(82866),d=e(97001),f=e(24608),m=e(42342),v=e(36255),E=e(41655),p=e(15359),h=e(93372),s=e(69856),y=e(64684),D=e(72965),C=e(51233),P=e(59781);const b={parse:Y=>{if(!Y.left&&!Y.right)return{to:{left:{datasource:null,queries:[],range:{from:D.UI.from,to:D.UI.to}},schemaVersion:0},error:!1};let ne,se,re,ge;return typeof Y.left=="string"&&([ne,re]=I(Y.left)),typeof Y.right=="string"?[se,ge]=I(Y.right):Y.right&&(se=R,ge=!0),ne||(ne=R),{to:{schemaVersion:0,left:ne,...se&&{right:se}},error:!!re||!!ge}}},T=(Y,...ne)=>ne.some(se=>Y.hasOwnProperty(se));var O=(Y=>(Y[Y.RangeFrom=0]="RangeFrom",Y[Y.RangeTo=1]="RangeTo",Y[Y.Datasource=2]="Datasource",Y[Y.SegmentsStart=3]="SegmentsStart",Y))(O||{});const R={datasource:null,queries:[],range:D.UI};function I(Y){let ne;try{ne=JSON.parse(Y)}catch{return[R,!0]}if(!Array.isArray(ne))return[{queries:[],range:D.UI,...ne},!1];if(ne.length<=3)return[R,!0];const se={from:ne[0],to:ne[1]},re=ne[2],ge=ne.slice(3),q=ge.filter(oe=>!T(oe,"ui","mode","__panelsState")),me=ge.find(oe=>T(oe,"__panelsState"))?.__panelsState;return[{datasource:re,queries:q,range:se,panelsState:me},!1]}const M={parse:Y=>{if(!Y||!Y.panes||typeof Y.panes!="string")return{to:{schemaVersion:1,panes:{[(0,l.z0)()]:x}},error:!1};let ne;try{ne=JSON.parse(Y.panes)}catch{}if(ne==null||typeof ne!="object")return{to:{schemaVersion:1,panes:{[(0,l.z0)()]:x}},error:!0};const se=Object.entries(ne).map(([re,ge])=>[re,L(ge)]).reduce((re,[ge,q])=>({...re,[ge]:q}),{});return Object.keys(se).length||(se[(0,l.z0)()]=x),{to:{schemaVersion:1,panes:se},error:!1}},migrate:Y=>({schemaVersion:1,panes:{[(0,l.z0)()]:Y.left,...Y.right&&{[(0,l.z0)()]:Y.right}}})},x={datasource:null,queries:[],range:D.UI};function L(Y){return!Y||typeof Y!="object"?x:{...x,...(0,P.w)("queries",Y)&&Array.isArray(Y.queries)&&{queries:Y.queries},...(0,P.w)("datasource",Y)&&typeof Y.datasource=="string"&&{datasource:Y.datasource},...(0,P.w)("panelsState",Y)&&!!Y.panelsState&&typeof Y.panelsState=="object"&&{panelsState:Y.panelsState},...(0,P.w)("range",Y)&&!!Y.range&&typeof Y.range=="object"&&(0,P.w)("from",Y.range)&&(0,P.w)("to",Y.range)&&typeof Y.range.from=="string"&&typeof Y.range.to=="string"&&{range:{from:Y.range.from,to:Y.range.to}}}}const S=Y=>N(Y),U=[b,M],N=Y=>{const ne=w(Y),[se,...re]=U.slice(ne),{error:ge,to:q}=se.parse(Y);return[re.reduce((oe,fe)=>fe.migrate?fe.migrate(oe):oe,q),ge]};function w(Y){return!Y||!("schemaVersion"in Y)||!Y.schemaVersion?0:typeof Y.schemaVersion=="number"?Y.schemaVersion:typeof Y.schemaVersion=="string"?Number.parseInt(Y.schemaVersion,10):0}function G(Y){const{location:ne}=(0,u.p)(),se=(0,m.useDispatch)(),re=(0,m.useSelector)(s.Ky),ge=(0,m.useSelector)(ve=>ve.user.orgId),q=(0,a.useRef)(Y),me=(0,a.useRef)("notstarted"),oe=(0,a.useRef)(!1),{warning:fe}=(0,c.iG)();(0,a.useEffect)(()=>{Y.panes||(me.current="notstarted",q.current=Y)},[Y]),(0,a.useEffect)(()=>{const ve=se((0,m.addListener)({predicate:pe=>(oe.current=v.zU.pending.type===pe.type,[p.YV.type,p.bW.fulfilled.type,h.aA.pending.type,y.oW.type,E.Yn.type,v.zU.fulfilled.type].includes(pe.type)&&!oe.current),effect:async(pe,{cancelActiveListeners:Me,delay:Pe,getState:Ee})=>{Me(),await Pe(200);const he=Object.entries(Ee().explore.panes).reduce((Le,[ke,ot])=>ot?{...Le,[ke]:H(ot)}:Le,{});if(!(0,n.isEqual)(q.current.panes,JSON.stringify(he))){const Le=!!q.current.panes&&Object.values(q.current.panes).filter(Boolean).length===0||me.current==="pending";q.current={panes:JSON.stringify(he)},ne.partial({panes:q.current.panes},Le)}}}));return()=>ve()},[se,ne]),(0,a.useEffect)(()=>{const ve=q.current?.panes!==Y.panes,[pe,Me]=S(Y);Me&&fe("Could not parse Explore URL","The requested URL contains invalid parameters, a default Explore state has been loaded.");async function Pe(){const Ee=Object.values(pe.panes);if(Ee.length>1){const he=Ee.some(({range:Le},ke,[{range:ot}])=>!(0,n.isEqual)(Le,ot));se((0,p.tl)({syncedTimes:!he}))}Object.entries(pe.panes).forEach(async([he,Le],ke)=>{const{datasource:ot,queries:it,range:ce,panelsState:le}=Le,Re=re[he];if(Re!==void 0){const Ae=Z(Le,H(Re));Promise.resolve().then(async()=>{Ae.datasource&&ot&&await se((0,v.zU)({exploreId:he,datasource:ot}))}).then(async()=>{Ae.range&&se((0,y.b3)({exploreId:he,rawRange:(0,D.dc)(ce)})),Ae.queries&&se((0,h.SE)({exploreId:he,queries:(0,C.Z)(it)})),(Ae.queries||Ae.range)&&(await se((0,h.ci)(he)),se((0,h.aA)({exploreId:he}))),Ae.panelsState&&le&&se((0,E.Yn)({exploreId:he,panelsState:le}))})}else se((0,E.CK)({exploreId:he,datasource:ot||"",queries:(0,C.Z)(it),range:(0,D.dc)(ce),panelsState:le,position:ke,eventBridge:new i.F}))}),Object.keys(re).filter(he=>!Object.keys(pe.panes).includes(he)).forEach(he=>se((0,p.YV)(he)))}!ve&&me.current==="notstarted"&&(me.current="pending",se((0,p.VY)()),Promise.all(Object.entries(pe.panes).map(([Ee,{datasource:he,queries:Le,range:ke,panelsState:ot}])=>W(he,Le,ge).then(it=>Promise.resolve(it?Le.length?(0,C.Z)(Le).filter(k(it)).map(K(it)?n.identity:ce=>({...ce,datasource:it.getRef()})):(0,d.ak)().get(K(it)?void 0:it.getRef()).then(ce=>[_(ce)]):[]).then(async ce=>{let le=await z(ce);return!le.length&&it&&(le=[_(K(it)?await(0,d.ak)().get():it)]),{exploreId:Ee,range:ke,panelsState:ot,queries:le,datasource:it}})))).then(async Ee=>{const he=await Promise.all(Ee.map(({exploreId:ce,range:le,panelsState:Re,queries:Ae,datasource:Oe})=>se((0,E.CK)({exploreId:ce,datasource:Oe,queries:Ae,range:(0,D.dc)(le),panelsState:Re,eventBridge:new i.F})).unwrap()));if(he.length>1){const ce=he.some(({state:le},Re,[{state:Ae}])=>!(0,n.isEqual)(le.range.raw,Ae.range.raw));se((0,p.tl)({syncedTimes:!ce}))}const Le=he.reduce((ce,{exploreId:le,state:Re})=>({...ce,[le]:H(Re)}),{}),ke=ne.getSearchObject();let ot={};for(const[ce,le]of Object.entries(ke).filter(([Re])=>!["schemaVersion","panes","orgId","left","right"].includes(Re)))ot[ce]=le;const it=new URLSearchParams({schemaVersion:`${pe.schemaVersion}`,panes:JSON.stringify(Le),orgId:`${ge}`,...ot});ne.replace({pathname:ne.getLocation().pathname,search:it.toString()}),me.current="done"})),q.current=Y,ve&&me.current==="done"&&Pe()},[se,re,ge,ne,Y,fe])}function _(Y){return{...Y.getDefaultQuery?.(r.zj.Explore),refId:"A",datasource:Y.getRef()}}function K(Y){return Y.name===f.D}function k(Y){return Y&&K(Y)?ne=>!!ne.datasource:ne=>ne.datasource?typeof ne.datasource=="string"?ne.datasource===Y?.uid:ne.datasource.uid===Y?.uid:!0}async function z(Y){return(await Promise.allSettled(Y.map(se=>(0,d.ak)().get(se.datasource).then(re=>({query:se,ds:re}))))).filter(P.K).map(({value:se})=>se.query)}async function W(Y,ne,se){if(Y)try{return await(0,d.ak)().get(Y)}catch{}const re=[...new Set(ne.map(ge=>ge.datasource).filter(o.fQ).map(ge=>typeof ge=="string"?ge:ge.uid))];try{if(re.length>=1){const ge=(await Promise.allSettled(re.map(q=>(0,d.ak)().get(q)))).filter(P.K);if(ge.length>1)return await(0,d.ak)().get(f.D);if(ge.length===1)return await(0,d.ak)().get(re[0])}}catch{}return(0,d.ak)().get((0,l.y_)(se)).catch(()=>(0,d.ak)().get()).catch(()=>{})}const Z=(Y,ne)=>{const se=!(0,n.isEqual)(ne?.datasource,Y?.datasource),re=!(0,n.isEqual)(ne?.queries,Y?.queries),ge=!(0,n.isEqual)(ne?.range||D.UI,Y?.range||D.UI),q=!(0,n.isEqual)(ne?.panelsState,Y?.panelsState);return{datasource:se,queries:re,range:ge,panelsState:q}};function H(Y){return{datasource:Y.datasourceInstance?.uid||"",queries:Y.queries.map(l.uC),range:(0,g.R_)(Y.range.raw),panelsState:X(Y.panelsState)}}function X(Y){let ne=(0,n.mapValues)(Y,se=>(0,n.isObject)(se)?X(se):se);if(ne=(0,n.omitBy)(ne,n.isEmpty),!(0,n.isEmpty)(ne))return ne}},59781:(Q,A,e)=>{"use strict";e.d(A,{K:()=>n,w:()=>a});const n=i=>i.status==="fulfilled";function a(i,r){return i in r}},30863:(Q,A,e)=>{"use strict";e.d(A,{L:()=>f,Q:()=>v});var n=e(71156),a=e(66261),i=e(64704),r=e(7939),o=e(42876),g=e(33242),u=e(86573),c=e(41655),l=e(15359),d=e(93372);const f=E=>new n.y(p=>{const h=u.h.getState().explore.panes[E]?.correlations;if(h)p.next(h),p.complete();else{const s=u.h.subscribe(()=>{const y=u.h.getState().explore.panes[E]?.correlations;y&&(s(),p.next(y),p.complete())})}});function m(E){return async(p,h)=>{const s=h().explore.panes[E];if(s.datasourceInstance?.uid!==void 0){let y=s.datasourceInstance.meta.mixed?s.queries.map(C=>C.datasource?.uid).filter(C=>C!==null):[s.datasourceInstance.uid];const D=await(0,g.r_)(y);p((0,c.CL)({exploreId:E,correlations:D.correlations||[]}))}}}function v(E,p,h){return async(s,y)=>{const D=Object.keys(y().explore?.panes),C=y().explore?.panes[D[0]],P=y().explore?.panes[D[1]];if(!C||!P)return;const b=C.datasourceInstance?.meta.mixed?C.queries[0].datasource:C.datasourceInstance?.getRef(),T=P.datasourceInstance?.meta.mixed?P.queries[0].datasource:P.datasourceInstance?.getRef(),[O,R]=await Promise.all([(0,a.F)().get(b),(0,a.F)().get(T)]);if(O?.uid&&R?.uid&&P.correlationEditorHelperData?.resultField){const I={sourceUID:O.uid,targetUID:R.uid,label:E||await(0,g.eo)(C,P),description:p,config:{field:P.correlationEditorHelperData.resultField,target:P.queries[0],type:"query",transformations:h}};await(0,g.NO)(O.uid,I).then(async()=>{s((0,l.YV)(D[1])),await s(m(D[0])),await s((0,d.aA)({exploreId:D[0]})),(0,i.ff)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:O.type,targetDataSourceType:R.type})}).catch(M=>{s((0,r.$l)((0,o.t_)("Error creating correlation",M))),console.error(M)})}}}},36255:(Q,A,e)=>{"use strict";e.d(A,{eX:()=>E,zU:()=>v});var n=e(4579),a=e(64704),i=e(20685),r=e(82866),o=e(33242),g=e(42342),u=e(99577),c=e(41655),l=e(93372),d=e(64684),f=e(72965);const m=(0,n.PH)("explore/updateDatasourceInstance"),v=(0,g.createAsyncThunk)("explore/changeDatasource",async({datasource:p,exploreId:h,options:s},{getState:y,dispatch:D})=>{const C=y().user.orgId,{history:P,instance:b}=await(0,f.r_)(C,p),T=y().explore.panes[h].datasourceInstance;(0,a.ff)("explore_change_ds",{from:(T?.meta?.mixed?"mixed":T?.type)||"unknown",to:b.meta.mixed?"mixed":b.type,exploreId:h}),D(m({exploreId:h,datasourceInstance:b,history:P}));const O=y().explore.panes[h].queries,R=(0,f.e1)(b.uid,O),I=await(0,o.r_)(R);D((0,c.CL)({exploreId:h,correlations:I.correlations||[]})),s?.importQueries&&await D((0,l.GJ)(h,O,T,b)),y().explore.panes[h].isLive&&D((0,d.oz)({exploreId:h,refreshInterval:i.dP.offOption.value})),s?.importQueries&&D((0,l.aA)({exploreId:h}))}),E=(p,h)=>{if(m.match(h)){const{datasourceInstance:s,history:y}=h.payload;return(0,r.RZ)(p.querySubscription),{...p,datasourceInstance:s,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,u.DK)(),queryResponse:(0,f.lp)(),queryKeys:[],history:y}}return p}},41655:(Q,A,e)=>{"use strict";e.d(A,{CK:()=>C,CL:()=>y,Oj:()=>p,Yn:()=>v,iz:()=>P,km:()=>E,qN:()=>D});var n=e(4579),a=e(82866),i=e(33242),r=e(1066),o=e(42342),g=e(36255),u=e(85105),c=e(15359),l=e(93372),d=e(64684),f=e(72965);const m=(0,n.PH)("explore/changeSize"),v=(0,n.PH)("explore/changePanels");function E(b,T,O){return async(R,I)=>{const M=I().explore.panes[b];if(M===void 0)return;const{panelsState:x}=M;R(v({exploreId:b,panelsState:{...x,[T]:O}}))}}const p=(0,n.PH)("explore/changeCorrelationHelperData"),h=(0,n.PH)("explore/initializeExploreAction"),s=(0,n.PH)("explore/setUrlReplaced"),y=(0,n.PH)("explore/saveCorrelationsAction");function D(b,{width:T}){return m({exploreId:b,width:T})}const C=(0,o.createAsyncThunk)("explore/initializeExplore",async({exploreId:b,datasource:T,queries:O,range:R,panelsState:I,correlationHelperData:M,eventBridge:x},{dispatch:L,getState:S,fulfillWithValue:U})=>{let N,w=[];if(T){const G=S().user.orgId,_=await(0,f.r_)(G,T);N=_.instance,w=_.history}if(L(h({exploreId:b,queries:O,range:(0,f.rx)(R,(0,r.Z)(S().user)),datasourceInstance:N,history:w,eventBridge:x})),I!==void 0&&L(v({exploreId:b,panelsState:I})),L((0,d.b3)({exploreId:b})),N){const G=(0,f.e1)(N.uid,O),_=await(0,i.r_)(G);L(y({exploreId:b,correlations:_.correlations||[]})),L((0,l.aA)({exploreId:b}))}return M!==void 0&&S().explore.correlationEditorDetails?.editorMode&&L(p({exploreId:b,correlationEditorHelperData:M})),U({exploreId:b,state:S().explore.panes[b]})}),P=(b=(0,f.t5)(),T)=>{if(b=(0,l.Y)(b,T),b=(0,g.eX)(b,T),b=(0,d.ok)(b,T),b=(0,u.Oo)(b,T),c.ZU.match(T)){const{richHistory:O,total:R}=T.payload.richHistoryResults;return{...b,richHistory:O,richHistoryTotal:R}}if(c.Zy.match(T)){const O=T.payload.filters;return{...b,richHistorySearchFilters:O}}if(m.match(T)){const O=T.payload.width;return{...b,containerWidth:O}}if(v.match(T)){const{panelsState:O}=T.payload;return{...b,panelsState:O}}if(p.match(T)){const{correlationEditorHelperData:O}=T.payload;return{...b,correlationEditorHelperData:O}}if(y.match(T))return{...b,correlations:T.payload.correlations};if(h.match(T)){const{queries:O,range:R,datasourceInstance:I,history:M,eventBridge:x}=T.payload;return{...b,range:R,queries:O,initialized:!0,eventBridge:x,queryKeys:(0,a.$$)(O),datasourceInstance:I,history:M,queryResponse:(0,f.lp)(),cache:[],correlations:[]}}return b}},85105:(Q,A,e)=>{"use strict";e.d(A,{Cs:()=>h,Ff:()=>f,KZ:()=>D,NV:()=>m,Oo:()=>C,TV:()=>E,WY:()=>l,ch:()=>y,ev:()=>d,fM:()=>g,ik:()=>v,io:()=>p,sO:()=>s});var n=e(4579),a=e(86234),i=e(87649),r=e(15359),o=e(69856);const g=(0,n.PH)("explore/historyUpdated"),u=({updatedQuery:P,deletedId:b})=>async(T,O)=>{c(O().explore,(R,I)=>{const M=R.richHistory.map(L=>L.id===P?.id?P:L).filter(L=>L.id!==b),x=R.richHistory.length-M.length;T((0,r.ZU)({richHistoryResults:{richHistory:M,total:R.richHistoryTotal-x},exploreId:I}))})},c=(P,b)=>{Object.entries(P.panes).forEach(([T,O])=>{O&&b(O,T)})},l=(P,b,T)=>async(O,R)=>{const{richHistoryStorageFull:I,limitExceeded:M}=await(0,a.au)(P,b,T,!1,"",!R().explore.richHistoryStorageFull,!R().explore.richHistoryLimitExceededWarningShown);I&&O((0,r.fm)()),M&&O((0,r.QN)())},d=(P,b)=>async(T,O)=>{const R=await(0,a.VI)(P,b);T(u({updatedQuery:R}))},f=(P,b)=>async T=>{const O=await(0,a.gt)(P,b);T(u({updatedQuery:O}))},m=P=>async b=>{const T=await(0,a.y9)(P);b(u({deletedId:T}))},v=()=>async(P,b)=>{await(0,a.HK)(),(0,o.M)(b()).forEach(([T])=>{P((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:T})),P((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:T}))})},E=P=>async(b,T)=>{const O=T().explore.panes[P].richHistorySearchFilters;if(O){const R=await(0,a.ub)(O);b((0,r.ZU)({richHistoryResults:R,exploreId:P}))}},p=P=>async(b,T)=>{const O=T().explore.panes[P]?.richHistorySearchFilters,R=T().explore.panes[P]?.richHistory;if(O&&R){const I={...O,page:(O?.page||1)+1},M=await(0,a.ub)(I),x=[...R,...M.richHistory];b((0,r.Zy)({filters:I,exploreId:P})),b((0,r.ZU)({richHistoryResults:{richHistory:x,total:M.total},exploreId:P}))}},h=P=>async b=>{b((0,r.Zy)({filters:void 0,exploreId:P})),b((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:P}))},s=()=>async(P,b)=>{let T=b().explore.richHistorySettings;T||(T=await(0,a.di)(),P((0,r.e8)(T)))},y=P=>async b=>{b((0,r.e8)(P)),await(0,a.kg)(P)},D=(P,b)=>async(T,O)=>{await T((0,r.Zy)({exploreId:P,filters:{...b}}));const R=O().explore.richHistorySettings;(0,i.X)().lastUsedDataSourcesAvailable&&await T(y({...R,lastUsedDatasourceFilters:b.datasourceFilters}))},C=(P,b)=>g.match(b)?{...P,history:b.payload.history}:P},15359:(Q,A,e)=>{"use strict";e.d(A,{AP:()=>C,Hg:()=>I,QN:()=>p,Sx:()=>y,VY:()=>T,YV:()=>P,ZP:()=>U,ZU:()=>v,Zy:()=>s,bW:()=>O,e8:()=>h,fm:()=>E,m$:()=>M,nL:()=>D,tl:()=>m});var n=e(4579),a=e(69781),i=e.n(a),r=e(83994),o=e(19690),g=e(82866),u=e(4419),c=e(42342),l=e(51233),d=e(41655),f=e(72965);const m=(0,n.PH)("explore/syncTimes"),v=(0,n.PH)("explore/richHistoryUpdated"),E=(0,n.PH)("explore/richHistoryStorageFullAction"),p=(0,n.PH)("explore/richHistoryLimitExceededAction"),h=(0,n.PH)("explore/richHistorySettingsUpdated"),s=(0,n.PH)("explore/richHistorySearchFiltersUpdatedAction"),y=(0,n.PH)("explore/splitSizeUpdateAction"),D=(0,n.PH)("explore/maximizePaneAction"),C=(0,n.PH)("explore/evenPaneResizeAction"),P=(0,n.PH)("explore/splitClose"),b=(0,n.PH)("explore/setPaneState"),T=(0,n.PH)("explore/clearPanes"),O=(0,c.createAsyncThunk)("explore/splitOpen",async(N,{getState:w,dispatch:G,requestId:_})=>{const K=Object.values(w().explore.panes)[0],k=N?.queries??(N?.query?[N?.query]:K?.queries||[]);Object.keys(w().explore.panes).forEach((W,Z)=>{Z>=1&&G(P(W))});const z=N?.range||K?.range.raw||f.UI;await G(R({exploreId:_,datasource:N?.datasourceUid||K?.datasourceInstance?.getRef(),queries:(0,l.Z)(k),range:z,panelsState:N?.panelsState||K?.panelsState,correlationHelperData:N?.correlationHelperData,eventBridge:new r.F})),K?.range&&await G(m({syncedTimes:(0,a.isEqual)(K.range.raw,z)}))},{idGenerator:g.z0}),R=(0,c.createAsyncThunk)("explore/createNewSplitOpen",async(N,{dispatch:w})=>{await w((0,d.CK)(N))}),I=(0,n.PH)("explore/changeCorrelationEditorDetails"),M=(N,w)=>async G=>{const{timeRange:_,getExploreUrl:K,openInNewWindow:k}=w,z=await K({queries:N.targets,dsRef:N.datasource,scopedVars:N.scopedVars,timeRange:_,adhocFilters:(0,u.J)().getAdhocFilters(N.datasource?.uid??"",!0)});if(k&&z){k(z);return}o.E1.push(z)},x=(0,f.t5)(),L={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,correlationDirty:!1,queryEditorDirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},U={explore:(N=L,w)=>{if(P.match(w)){const{[w.payload]:_,...K}={...N.panes};return{...N,panes:K,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(y.match(w)){const{largerExploreId:_}=w.payload;return{...N,largerExploreId:_,maxedExploreId:void 0,evenSplitPanes:_===void 0}}if(D.match(w)){const{exploreId:_}=w.payload;return{...N,largerExploreId:_,maxedExploreId:_,evenSplitPanes:!1}}if(C.match(w))return{...N,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(m.match(w))return{...N,syncedTimes:w.payload.syncedTimes};if(E.match(w))return{...N,richHistoryStorageFull:!0};if(p.match(w))return{...N,richHistoryLimitExceededWarningShown:!0};if(h.match(w)){const _=w.payload;return{...N,richHistorySettings:_}}if(R.pending.match(w))return{...N,panes:{...N.panes,[w.meta.arg.exploreId]:x}};if(d.CK.pending.match(w)){const _=Object.entries(N.panes),K=_.slice(0,w.meta.arg.position),k=_.slice(K.length),z=[...K,[w.meta.arg.exploreId,x],...k].reduce((W,[Z,H])=>({...W,[Z]:H}),{});return{...N,panes:z}}if(T.match(w))return{...N,panes:{}};if(I.match(w)){const{editorMode:_,label:K,description:k,canSave:z,correlationDirty:W,queryEditorDirty:Z,isExiting:H,postConfirmAction:X,transformations:Y}=w.payload;return{...N,correlationEditorDetails:{editorMode:!!(_??N.correlationEditorDetails?.editorMode),canSave:!!(z??N.correlationEditorDetails?.canSave),label:K??N.correlationEditorDetails?.label,description:k??N.correlationEditorDetails?.description,transformations:Y??N.correlationEditorDetails?.transformations,correlationDirty:!!(W??N.correlationEditorDetails?.correlationDirty),queryEditorDirty:!!(Z??N.correlationEditorDetails?.queryEditorDirty),isExiting:!!(H??N.correlationEditorDetails?.isExiting),postConfirmAction:X}}}const G=w.payload?.exploreId;return typeof G=="string"?{...N,panes:Object.entries(N.panes).reduce((_,[K,k])=>({..._,[K]:K===G?(0,d.iz)(k,w):k}),{})}:N}}},93372:(Q,A,e)=>{"use strict";e.d(A,{CS:()=>tt,K8:()=>lt,ci:()=>ae,qV:()=>de,LK:()=>ft,Sv:()=>je,GJ:()=>be,W1:()=>yt,sK:()=>De,Y:()=>zt,aA:()=>We,EA:()=>at,P4:()=>Fe,$9:()=>Me,sQ:()=>Ne,KO:()=>qe,SE:()=>$e,z0:()=>wt});var n=e(4579),a=e(89162),i=e.n(a),r=e(69781),o=e(11729),g=e(86457),u=e(77077),c=e(89582),l=e(98121),d=e(20298),f=e(1181),m=e(68387),v=e(51023),E=e(56821),p=e(98147),h=e(66261),s=e(64704),y=e(85498),D=e(39357),C=e(82866),P=e(76447),b=e(33242),T=e(1066),O=e(24608),R=e(42342),I=e(7939),M=e(42876),x=e(60630),L=e(40569),S=e(4558),U=e(28073),N=e(63908),w=e(68911),G=e(85666),_=e(76597),K=e(40641),k=e(33521);const z=Ie=>{const st=[],Mt=[],ct=[],nt=[],Ct=[],kt=[],Jt=[],tn=[];for(const Kt of Ie.series){if(re(Kt)){tn.push(Kt);continue}switch(Kt.meta?.preferredVisualisationType){case"logs":nt.push(Kt);break;case"graph":st.push(Kt);break;case"trace":Ct.push(Kt);break;case"table":Mt.push(Kt);break;case"rawPrometheus":ct.push(Kt);break;case"nodeGraph":kt.push(Kt);break;case"flamegraph":Jt.push(Kt);break;default:se(Kt)&&st.push(Kt),Mt.push(Kt)}}return{...Ie,graphFrames:st,tableFrames:Mt,logsFrames:nt,traceFrames:Ct,nodeGraphFrames:kt,customFrames:tn,flameGraphFrames:Jt,rawPrometheusFrames:ct,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},W=({showCorrelationEditorLinks:Ie,queries:st,correlations:Mt,defaultTargetDatasource:ct})=>nt=>{if(Ie&&ct)for(const Ct of nt.series)for(const kt of Ct.fields){kt.config.links=[],kt.display=kt.display||(0,U.g)();const Jt={};Ct.fields.map(tn=>{Jt[`${tn.name}`]=`\${__data.fields.['${tn.name}']}`}),kt.config.links.push({url:"",origin:N.n1.ExploreCorrelationsEditor,title:`Correlate with ${kt.name}`,internal:{datasourceUid:ct.uid,datasourceName:ct.name,query:{datasource:{uid:ct.uid}},meta:{correlationData:{resultField:kt.name,vars:Jt,origVars:Jt}}}})}else if(st?.length&&Mt?.length){const Ct=(0,r.mapValues)((0,r.groupBy)(st,"refId"),"0.datasource.uid");(0,b.nh)(nt.series,Mt,Ct)}return nt},Z=Ie=>Ie.graphFrames.length?{...Ie,graphResult:Ie.graphFrames}:{...Ie,graphResult:null},H=Ie=>{if(Ie.tableFrames.length===0)return(0,g.of)({...Ie,tableResult:null});Ie.tableFrames.sort((nt,Ct)=>{const kt=nt.refId,Jt=Ct.refId;return kt>Jt?1:kt<Jt?-1:0});const st=Ie.tableFrames.every(nt=>se(nt)),Mt={interpolate:nt=>nt};return(st?(0,g.of)(Ie.tableFrames).pipe(w.Y.joinByFieldTransformer.operator({},Mt)):(0,g.of)(Ie.tableFrames).pipe(w.Y.mergeTransformer.operator({},Mt))).pipe((0,S.U)(nt=>{for(const Ct of nt)for(const kt of Ct.fields)kt.display=kt.display??(0,U.U)({field:kt,theme:y.config.theme2,timeZone:Ie.request?.timezone??"browser"});return{...Ie,tableResult:nt}}))},X=Ie=>{const st=Ie.rawPrometheusFrames;if(!st||st.length===0)return(0,g.of)({...Ie,tableResult:null});st.sort((Ct,kt)=>{const Jt=Ct.refId,tn=kt.refId;return Jt>tn?1:Jt<tn?-1:0});const Mt=st.every(Ct=>se(Ct)),ct={interpolate:Ct=>Ct};return(Mt?(0,g.of)(st).pipe(w.Y.joinByFieldTransformer.operator({},ct)):(0,g.of)(st).pipe(w.Y.mergeTransformer.operator({},ct))).pipe((0,S.U)(Ct=>{const kt=Ct[0];for(const Jt of kt.fields)Jt.display=Jt.display??(0,U.U)({field:Jt,theme:y.config.theme2,timeZone:Ie.request?.timezone??"browser"});return{...Ie,rawPrometheusResult:kt}}))},Y=(Ie={})=>st=>{if(st.logsFrames.length===0)return{...st,logsResult:null};const Mt=st.request?.intervalMs,ct=(0,_.aB)(st.logsFrames,Mt,Ie.absoluteRange,Ie.queries),nt=(0,C.Oy)(Ie.refreshInterval),Ct=(0,K.j0)(ct,nt),kt=Ct.rows,Jt=Ct.series,tn={...Ct,rows:kt,series:Jt};return{...st,logsResult:tn}};function ne(Ie,st,Mt,ct,nt,Ct,kt,Jt){return(0,g.of)(Ie).pipe((0,S.U)(tn=>(0,p.zR)(tn,st)),(0,S.U)(W({defaultTargetDatasource:Jt,showCorrelationEditorLinks:kt,queries:nt,correlations:Ct})),(0,S.U)(z),(0,S.U)(Z),(0,S.U)(Y({absoluteRange:Mt,refreshInterval:ct,queries:nt})),(0,c.z)(X),(0,c.z)(H))}function se(Ie){const st=(0,r.groupBy)(Ie.fields,Mt=>Mt.type);return!!(Object.keys(st).length===2&&st[G.fS.time]?.length===1&&st[G.fS.number])}function re(Ie){return Ie.meta?.preferredVisualisationPluginId?(0,k.eD)(Ie.meta?.preferredVisualisationPluginId):!1}var ge=e(99577),q=e(30863),me=e(41655),oe=e(85105),fe=e(15359),ve=e(64684),pe=e(72965);const Me=Ie=>st=>{const Mt=st.explore.panes[Ie];return Mt&&Mt.queryResponse?Mt.queryResponse.state===d.Gu.Loading||Mt.queryResponse.state===d.Gu.Streaming:!1},Pe=(0,n.PH)("explore/addQueryRow"),Ee=(0,n.PH)("explore/changeQueries"),he=(0,n.PH)("explore/cancelQueries"),Le=(0,n.PH)("explore/queriesImported"),ke=(0,n.PH)("explore/queryStoreSubscription"),ot=(0,n.PH)("explore/setSupplementaryQueryEnabledAction"),it=(0,n.PH)("explore/storeSupplementaryQueryDataProviderAction"),ce=(0,n.PH)("explore/cleanSupplementaryQueryDataProviderAction"),le=(0,n.PH)("explore/cleanSupplementaryQueryAction"),Re=(0,n.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Ae=(0,n.PH)("explore/updateSupplementaryQueryDataAction"),Oe=(0,n.PH)("explore/queryStreamUpdated"),$e=(0,n.PH)("explore/setQueries"),Ye=(0,n.PH)("changeLoadingState"),Ne=(0,n.PH)("explore/setPausedState"),je=(0,n.PH)("explore/clearLogs"),ut=(0,n.PH)("explore/scanStart"),Fe=(0,n.PH)("explore/scanStop"),Te=(0,n.PH)("explore/addResultsToCache"),Ve=(0,n.PH)("explore/clearCache");function tt(Ie,st){return async(Mt,ct)=>{const nt=ct().explore.panes[Ie];let Ct;nt.datasourceInstance?.meta.mixed?Ct=(0,r.findLast)(nt.queries,Jt=>!!Jt.datasource)?.datasource||void 0:Ct=nt.datasourceInstance?.getRef();const kt=await(0,C.Xk)(nt.queries,st,Ct);Mt(Pe({exploreId:Ie,index:st,query:kt}))}}function ae(Ie){return(st,Mt)=>{st(Fe({exploreId:Ie})),st(he({exploreId:Ie}));const ct=Mt().explore.panes[Ie].supplementaryQueries;for(const nt of ge.SY)st(ce({exploreId:Ie,type:nt})),ct[nt]?.data?.state!==d.Gu.Done&&st(le({exploreId:Ie,type:nt}))}}const J=(Ie,st)=>{const Mt=Ie.getRef();return st.map(ct=>({...ct,datasource:Mt}))},te=async(Ie,st,Mt)=>{let ct=[];if(st.meta?.id===Ie.meta?.id)ct=Mt;else if((0,f.p)(st)&&(0,f.CZ)(Ie)){const nt=await st.exportToAbstractQueries(Mt);ct=await Ie.importFromAbstractQueries(nt)}else Ie.importQueries&&(ct=await Ie.importQueries(Mt,st));return J(Ie,ct)},de=(0,R.createAsyncThunk)("explore/changeQueries",async({queries:Ie,exploreId:st},{getState:Mt,dispatch:ct})=>{let nt=!1;const Ct=Mt().explore.panes[st].queries,kt=Mt().explore.panes[st].datasourceInstance?.uid,Jt=Mt().explore.correlationEditorDetails,tn=Jt?.editorMode||!1;!(Object.keys(Mt().explore.panes)[0]===st)&&tn&&!Jt?.queryEditorDirty&&ct((0,fe.Hg)({queryEditorDirty:!0}));for(const cn of Ie)for(const dn of Ct){if(cn.refId===dn.refId&&cn.datasource?.type!==dn.datasource?.type){const Sn=await(0,h.F)().get(dn.datasource),Zn=await(0,h.F)().get({uid:cn.datasource?.uid});await ct(be(st,Ct,Sn,Zn,cn.refId)),nt=!0}if(kt===O.D&&cn.refId===dn.refId&&cn.datasource?.uid!==dn.datasource?.uid){const Sn=(0,pe.e1)(O.D,Ie),Zn=await(0,b.r_)(Sn);ct((0,me.CL)({exploreId:st,correlations:Zn.correlations||[]}))}}nt||ct(Ee({queries:Ie,exploreId:st})),Ie.length<Ct.length&&ct(We({exploreId:st}))}),be=(Ie,st,Mt,ct,nt)=>async Ct=>{if(!Mt){Ct(Le({exploreId:Ie,queries:st}));return}let kt=st;if(ct.uid===O.D)kt=st.map(tn=>({...tn,datasource:Mt.getRef()}));else if(Mt.uid===O.D){const tn=(0,r.groupBy)(st,cn=>cn.datasource?.uid),Kt=await Promise.all(Object.keys(tn).map(async cn=>{const dn=await(0,h.F)().get({uid:cn});return await te(ct,dn,tn[cn])}));kt=(0,r.flatten)(Kt.filter(cn=>cn.length>0))}else{let tn=st;if(nt!==void 0){const Kt=st.find(cn=>cn.refId===nt);Kt&&(tn=[Kt])}kt=await te(ct,Mt,tn)}let Jt=await(0,C.Z8)(kt,ct.getRef());if(nt!==void 0){kt.length===0&&(kt=[await(0,C.Xk)([],void 0,ct.getRef())]);const tn=st.findIndex(cn=>cn.refId===nt),Kt={...Jt[0],refId:st[tn].refId};Jt=[...st],Jt[tn]=Kt}return Ct(Le({exploreId:Ie,queries:Jt})),Jt};function De(Ie,st,Mt){return async(ct,nt)=>{const Ct=nt().explore.panes[Ie],{queries:kt}=Ct,tn=(await Promise.all(kt.map(Kt=>Mt({...Kt},st)))).map((Kt,cn)=>(0,C.fR)(Kt,kt,cn));ct($e({exploreId:Ie,queries:tn})),st.preventSubmit||ct(We({exploreId:Ie}))}}async function Ue(Ie,st,Mt,ct,nt,Ct){const kt=ct.meta.id,Jt=(0,C._Q)(Mt,kt,nt);Ie((0,oe.fM)({exploreId:Ct,history:Jt})),Ie((0,oe.WY)(ct.uid,ct.name,nt));for(const tn in st.panes)await Ie((0,oe.TV)(tn))}const We=(0,R.createAsyncThunk)("explore/runQueries",async({exploreId:Ie,preserveCache:st},{dispatch:Mt,getState:ct})=>{Mt(ae(Ie)),Mt((0,ve.b3)({exploreId:Ie}));const nt=(0,q.L)(Ie);st!==!0&&Mt(ft(Ie));const Ct=ct().explore.panes[Ie],{datasourceInstance:kt,containerWidth:Jt,isLive:tn,range:Kt,scanning:cn,queryResponse:dn,querySubscription:Sn,refreshInterval:Zn,absoluteRange:_n,cache:Ut,supplementaryQueries:Xt,correlationEditorHelperData:en}=Ct,gn=ct().explore.correlationEditorDetails?.editorMode||!1,ln=Object.keys(ct().explore.panes)[0]===Ie,xn=gn&&ln,Dn=xn?await(0,h.F)().get():void 0,Ln=gn&&!ln&&en!==void 0;let hn,Gn;const Vn=Ct.queries.map(Wn=>({...Wn,datasource:Wn.datasource||kt?.getRef()}));kt!=null&&Ue(Mt,ct().explore,Ct.history,kt,Vn,Ie);const $n=(0,pe.M0)(Ut,_n);if($n)hn=(0,o.a)([(0,g.of)($n),nt]).pipe((0,c.z)(([Wn,Pn])=>ne(Wn,dn,_n,Zn,Vn,Pn,xn,Dn))),Gn=hn.subscribe(Wn=>{Mt(Oe({exploreId:Ie,response:Wn}))});else{if(!(0,C.z_)(Vn)||!kt)return;const Wn=kt?.interval;(0,C.RZ)(Sn);const Pn={minInterval:Wn,maxDataPoints:Jt,liveStreaming:tn};let sa={};Ln&&en!==void 0&&Object.entries(en?.vars).forEach(Xn=>{sa[Xn[0]]={value:Xn[1]}});const va=(0,T.Z)(ct().user),An=(0,C.Zf)(Ie,Vn,Pn,Kt,cn,va,sa);if(Mt(Ye({exploreId:Ie,loadingState:d.Gu.Loading})),hn=(0,o.a)([(0,x.v7)(kt,An.request).pipe(tn?(0,l.p)(500):u.y),nt]).pipe((0,c.z)(([Xn,ra])=>ne(Xn,dn,_n,Zn,Vn,ra,xn,Dn))),Gn=hn.subscribe({next(Xn){const ra=ct().explore.panes[Ie];if(Xn.logsResult!==null&&Xn.state===d.Gu.Done&&(0,s.ff)("grafana_explore_logs_result_displayed",{datasourceType:kt.type,visualisationType:ra?.panelsState?.logs?.visualisationType??D.Z.get(L.w)??"N/A",length:Xn.logsResult.rows.length}),Mt(Oe({exploreId:Ie,response:Xn})),ra.scanning)if(Xn.state===d.Gu.Done&&Xn.series.length===0){const ga=(0,P.e)(-1,ra.range);Mt((0,ve.b3)({exploreId:Ie,absoluteRange:ga})),Mt(We({exploreId:Ie}))}else Mt(Fe({exploreId:Ie}))},error(Xn){Mt((0,I.$l)((0,M.t_)("Query processing error",Xn))),Mt(Ye({exploreId:Ie,loadingState:d.Gu.Error})),console.error(Xn)},complete(){ct().explore.panes[Ie].queryResponse.state===d.Gu.Loading&&Mt(Ye({exploreId:Ie,loadingState:d.Gu.Done}))}}),tn)for(const Xn of ge.SY)Mt(ce({exploreId:Ie,type:Xn})),Mt(le({exploreId:Ie,type:Xn}));else Mt(ze({exploreId:Ie,datasourceInstance:kt,transaction:An,newQuerySource:hn,supplementaryQueries:Xt,queries:Vn,absoluteRange:_n}))}Mt(ke({exploreId:Ie,querySubscription:Gn}))}),et=async(Ie,st)=>{const Mt=Ie.filter(nt=>nt.datasource?.uid!==O.D),ct=(0,r.groupBy)(Mt,"datasource.uid");return await Promise.all(Object.values(ct).map(async nt=>({datasource:await(0,h.F)().get(nt[0].datasource,st),targets:nt})))},ze=(0,R.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:Ie,exploreId:st,transaction:Mt,newQuerySource:ct,supplementaryQueries:nt,queries:Ct,absoluteRange:kt},{dispatch:Jt})=>{let tn;Ie.meta.mixed?tn=await et(Mt.request.targets,Mt.request.scopedVars):tn=[{datasource:Ie,targets:Mt.request.targets}];for(const Kt of ge.SY){const cn=(0,ge.Z9)(tn,Kt,{...Mt.request,requestId:`${Mt.request.requestId}_${(0,r.snakeCase)(Kt)}`},ct);cn?(Jt(it({exploreId:st,type:Kt,dataProvider:cn})),_e(nt[Kt].data,Ct,kt)||(Jt(le({exploreId:st,type:Kt})),nt[Kt].enabled&&Jt(yt(st,Kt)))):Jt(ce({exploreId:st,type:Kt}))}});function _e(Ie,st,Mt){if(!Ie)return!1;const ct=(0,r.zipObject)((0,r.map)(st,"refId"),st),nt=(0,r.mapValues)((0,r.groupBy)(Ie.data.map(tn=>tn.meta?.custom?.sourceQuery),"refId"),r.head),Ct=Ie.data.every(tn=>tn.meta?.custom?.logsVolumeType===m.o8.FullRange),kt=i()(ct,nt),Jt=Ie.data.every(tn=>{const Kt=tn.meta?.custom?.absoluteRange;return Kt?Kt&&Kt.from<=Mt.from&&Mt.to<=Kt.to:!0});return Ct&&kt&&Jt}function qe(Ie,st){return(Mt,ct)=>{const nt=ct().explore.panes[Ie].queries,Ct=st.map((kt,Jt)=>(0,C.fR)(kt,nt,Jt));Mt($e({exploreId:Ie,queries:Ct})),Mt(We({exploreId:Ie}))}}function at(Ie){return(st,Mt)=>{st(ut({exploreId:Ie}));const ct=(0,P.e)(-1,Mt().explore.panes[Ie].range);st((0,ve.b3)({exploreId:Ie,absoluteRange:ct})),st(We({exploreId:Ie}))}}function lt(Ie){return(st,Mt)=>{const ct=Mt().explore.panes[Ie].queryResponse,nt=Mt().explore.panes[Ie].absoluteRange,Ct=(0,pe.M7)(nt);ct.state===d.Gu.Done&&st(Te({exploreId:Ie,cacheKey:Ct,queryResponse:ct}))}}function ft(Ie){return(st,Mt)=>{st(Ve({exploreId:Ie}))}}function yt(Ie,st){return(Mt,ct)=>{const{supplementaryQueries:nt}=ct().explore.panes[Ie],Ct=nt[st].dataProvider;if(Ct){const kt=Ct.subscribe({next:Jt=>{Mt(Ae({exploreId:Ie,type:st,data:Jt}))}});Mt(Re({exploreId:Ie,type:st,dataSubscription:kt}))}}}function wt(Ie,st,Mt){return(ct,nt)=>{ct(ot({exploreId:Ie,enabled:st,type:Mt})),(0,ge.B9)(st,Mt),st&&ct(yt(Ie,Mt))}}const zt=(Ie,st)=>{if(Pe.match(st)){const{queries:Mt}=Ie,{index:ct,query:nt}=st.payload,Ct=[...Mt.slice(0,ct+1),{...nt},...Mt.slice(ct+1)];return{...Ie,queries:Ct,queryKeys:(0,C.$$)(Ct)}}if(Ee.match(st)){const{queries:Mt}=st.payload;return{...Ie,queries:Mt}}if(he.match(st))return(0,C.RZ)(Ie.querySubscription),{...Ie,...Ie.queryResponse?{queryResponse:{...Ie.queryResponse,state:d.Gu.Done}}:{}};if($e.match(st)){const{queries:Mt}=st.payload;return{...Ie,queries:Mt.slice(),queryKeys:(0,C.$$)(Mt)}}if(ke.match(st)){const{querySubscription:Mt}=st.payload;return{...Ie,querySubscription:Mt}}if(ot.match(st)){const{enabled:Mt,type:ct}=st.payload,{supplementaryQueries:nt}=Ie,Ct=nt[ct].dataSubscription;!Mt&&Ct&&Ct.unsubscribe();const kt={...nt,[ct]:{...nt[ct],enabled:Mt,data:void 0}};return{...Ie,supplementaryQueries:kt}}if(it.match(st)){const{dataProvider:Mt,type:ct}=st.payload,{supplementaryQueries:nt}=Ie,Ct=nt[ct];Ct?.dataSubscription&&Ct.dataSubscription.unsubscribe();const kt={...nt,[ct]:{...Ct,dataProvider:Mt,dataSubscription:void 0}};return{...Ie,supplementaryQueries:kt}}if(ce.match(st)){const{type:Mt}=st.payload,{supplementaryQueries:ct}=Ie,nt=ct[Mt];nt?.dataSubscription&&nt.dataSubscription.unsubscribe();const Ct={...ct,[Mt]:{...nt,dataProvider:void 0,dataSubscription:void 0}};return{...Ie,supplementaryQueries:Ct}}if(le.match(st)){const{type:Mt}=st.payload,{supplementaryQueries:ct}=Ie,nt={...ct,[Mt]:{...ct[Mt],data:void 0}};return{...Ie,supplementaryQueries:nt}}if(Re.match(st)){const{dataSubscription:Mt,type:ct}=st.payload,{supplementaryQueries:nt}=Ie,Ct={...nt,[ct]:{...nt[ct],dataSubscription:Mt}};return{...Ie,supplementaryQueries:Ct}}if(Ae.match(st)){let{data:Mt,type:ct}=st.payload;const{supplementaryQueries:nt}=Ie,Ct={...nt,[ct]:{...nt[ct],data:Mt}};return{...Ie,supplementaryQueries:Ct}}if(Oe.match(st))return $t(Ie,st);if(Le.match(st)){const{queries:Mt}=st.payload;return{...Ie,queries:Mt,queryKeys:(0,C.$$)(Mt)}}if(Ye.match(st)){const{loadingState:Mt}=st.payload;return{...Ie,queryResponse:{...Ie.queryResponse,state:Mt}}}if(Ne.match(st)){const{isPaused:Mt}=st.payload;return{...Ie,isPaused:Mt}}if(ut.match(st))return{...Ie,scanning:!0};if(Fe.match(st))return{...Ie,scanning:!1,scanRange:void 0};if(Te.match(st)){const{cache:ct}=Ie,{queryResponse:nt,cacheKey:Ct}=st.payload;let kt=[...ct];return kt.some(tn=>tn.key===Ct)||(kt=[{key:Ct,value:nt},...kt].slice(0,5)),{...Ie,cache:kt}}if(Ve.match(st))return{...Ie,cache:[]};if(je.match(st)){if(!Ie.logsResult)return{...Ie,clearedAtIndex:null};if(Ie.queryResponse.state===d.Gu.Loading)return{...Ie,clearedAtIndex:null,logsResult:{...Ie.logsResult,rows:[]}};const Mt=Ie.clearedAtIndex?Ie.clearedAtIndex+Ie.logsResult.rows.length:Ie.logsResult.rows.length-1;return{...Ie,clearedAtIndex:Mt,logsResult:{...Ie.logsResult,rows:[]}}}return Ie},$t=(Ie,st)=>{const{response:Mt}=st.payload,{request:ct,series:nt,error:Ct,graphResult:kt,logsResult:Jt,tableResult:tn,rawPrometheusResult:Kt,traceFrames:cn,nodeGraphFrames:dn,flameGraphFrames:Sn,rawPrometheusFrames:Zn,customFrames:_n}=Mt;if(Ct){if(Ct.type===v.eA.Timeout||Ct.type===v.eA.Cancelled)return{...Ie};y.config.angularSupportEnabled&&Ie.datasourceInstance?.components?.QueryCtrl&&Ie.eventBridge.emit(E.Kh.dataError,Ct)}if(!ct)return{...Ie};if(y.config.angularSupportEnabled&&Ie.datasourceInstance?.components?.QueryCtrl){const Ut=nt.map(Xt=>(0,p.Zr)(Xt));Ie.eventBridge.emit(E.Kh.dataReceived,Ut)}return{...Ie,queryResponse:Mt,graphResult:kt,tableResult:tn,rawPrometheusResult:Kt,logsResult:Ie.isLive&&Jt?{...Jt,rows:(0,pe.bG)(Ie.clearedAtIndex,Jt.rows)}:Jt,showLogs:!!Jt,showMetrics:!!kt,showTable:!!tn?.length,showTrace:!!cn.length,showNodeGraph:!!dn.length,showRawPrometheus:!!Zn.length,showFlameGraph:!!Sn.length,showCustom:!!_n?.length,clearedAtIndex:Ie.isLive?Ie.clearedAtIndex:null}}},69856:(Q,A,e)=>{"use strict";e.d(A,{F9:()=>c,Ky:()=>a,M:()=>r,UP:()=>g,aM:()=>u,pd:()=>o,z7:()=>l});var n=e(7261);const a=d=>d.explore.panes,i=d=>d.explore,r=(0,n.P1)(a,Object.entries),o=(0,n.P1)(r,d=>d.length>1),g=(0,n.P1)(r,d=>d.some(f=>f[1].correlationEditorHelperData!==void 0)),u=d=>(0,n.P1)(a,f=>Object.keys(f)[0]===d),c=d=>(0,n.P1)(a,f=>f[d]),l=(0,n.P1)(i,d=>d.correlationEditorDetails)},64684:(Q,A,e)=>{"use strict";e.d(A,{F9:()=>D,a1:()=>C,b3:()=>h,cD:()=>p,mG:()=>s,oW:()=>v,ok:()=>b,oz:()=>E,vG:()=>P});var n=e(4579),a=e(74011),i=e(20298),r=e(61129),o=e(20685),g=e(82866),u=e(76447),c=e(89660),l=e(40641),d=e(1066),f=e(15359),m=e(93372);const v=(0,n.PH)("explore/changeRange"),E=(0,n.PH)("explore/changeRefreshInterval"),p=T=>(O,R)=>{const{syncedTimes:I}=R().explore;I?Object.keys(R().explore.panes).forEach(M=>{O(h({...T,exploreId:M})),O((0,m.aA)({exploreId:M,preserveCache:!0}))}):(O(h({...T})),O((0,m.aA)({exploreId:T.exploreId,preserveCache:!0})))},h=T=>(O,R)=>{const{exploreId:I,absoluteRange:M,rawRange:x}=T,L=R().explore.panes[I],S=(0,d.Z)(R().user),U=(0,d.i)(R().user),{range:N}=L;let w=N.raw;M&&(w={from:(0,a.GY)(S,M.from),to:(0,a.GY)(S,M.to)}),x&&(w=x);const G=(0,g.OQ)(S,w,U),_={from:G.from.valueOf(),to:G.to.valueOf()};(0,c.$t)().init({timepicker:{},getTimezone:()=>S,timeRangeUpdated(K){},time:G.raw}),(0,r.J)().updateTimeRange(G),O(v({exploreId:I,range:G,absoluteRange:_}))};function s(T){return(O,R)=>{const I=R().explore.panes[T].range.raw;Object.keys(R().explore.panes).filter(x=>x!==T).forEach(x=>{O(p({exploreId:x,rawRange:I}))});const M=R().explore.syncedTimes;O((0,f.tl)({syncedTimes:!M}))}}function y(T){return(O,R)=>{const I=(0,d.Z)(R().user),M=(0,d.i)(R().user);Object.entries(R().explore.panes).forEach(([x,L])=>{const S=(0,g.OQ)(I,L.range.raw,M);T(x,L,S,O)})}}function D(){return y((T,O,R,I)=>{const M={from:R.from.valueOf(),to:R.to.valueOf()};I(p({exploreId:T,absoluteRange:M}))})}function C(T){return y((O,R,I,M)=>{const x=(0,u.e)(T,I);M(p({exploreId:O,absoluteRange:x}))})}function P(T){return y((O,R,I,M)=>{const x=(0,u.h)(I,T);M(p({exploreId:O,absoluteRange:x}))})}const b=(T,O)=>{if(E.match(O)){const{refreshInterval:R}=O.payload,I=o.dP.isLive(R),M=(0,g.Oy)(R),x=(0,l.j0)(T.logsResult,M);return o.dP.isLive(T.refreshInterval)&&!I&&(0,g.RZ)(T.querySubscription),{...T,refreshInterval:R,queryResponse:{...T.queryResponse,state:I?i.Gu.Streaming:i.Gu.Done},isLive:I,isPaused:I?!1:T.isPaused,logsResult:x}}if(v.match(O)){const{range:R,absoluteRange:I}=O.payload;return{...T,range:R,absoluteRange:I}}return T}},72965:(Q,A,e)=>{"use strict";e.d(A,{FG:()=>E,M0:()=>D,M7:()=>y,UI:()=>m,bG:()=>T,dc:()=>P,e1:()=>O,lp:()=>h,r_:()=>s,rx:()=>C,t5:()=>p});var n=e(69781),a=e.n(n),i=e(20298),r=e(5333),o=e(89026),g=e(74011),u=e(24608),c=e(39357),l=e(82866),d=e(97001),f=e(99577);const m={from:"now-1h",to:"now"},v="grafana.explore.style.graph",E=R=>{c.Z.set(v,R)},p=R=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:m},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:h(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,f.DK)(),panelsState:{},correlations:void 0,...R}),h=()=>({state:i.Gu.NotStarted,series:[],timeRange:(0,r.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function s(R,I){let M;try{M=await(0,d.ak)().get(I)}catch{M=await(0,d.ak)().get()}if(M.init)try{M.init()}catch(S){console.error(S)}const x=`grafana.explore.history.${M.meta?.id}`,L=c.Z.getObject(x,[]);return(0,l.ET)(R,M.uid),{history:L,instance:M}}function y(R){const I={from:R.from,to:R.to};return Object.entries(I).map(([x,L])=>`${encodeURIComponent(x)}=${encodeURIComponent(L.toString())}`).join("&")}function D(R,I){const M=y(I),x=R.findIndex(S=>S.key===M);return x>=0?R[x].value:void 0}function C(R,I){return{from:o.parse(R.from,!1,I),to:o.parse(R.to,!0,I),raw:R}}function P(R){let I=m,M={from:b(R.from),to:b(R.to)};return M.from!==null&&M.to!==null&&(I={from:M.from,to:M.to}),I}function b(R){if(R===null)return null;if((0,g.v9)(R))return R;if(typeof R!="string")return null;const I=R;if(I.indexOf("now")!==-1)return I;if(I.length===8)return(0,g.zh)(I,"YYYYMMDD");if(I.length===15)return(0,g.zh)(I,"YYYYMMDDTHHmmss");if(I.length===19)return(0,g.zh)(I,"YYYY-MM-DD HH:mm:ss");if(I.match(/^\d+$/)){const x=parseInt(I,10);return(0,g.zh)(x)}const M=(0,g.zh)(I);return M.isValid()?M:null}const T=(R,I)=>I?R?I.slice(R+1):I:[],O=(R,I)=>R===u.D?(0,n.uniq)(I.map(M=>M.datasource?.uid).filter(M=>!!M)):[R]},97402:(Q,A,e)=>{"use strict";e.d(A,{G4:()=>I,Rb:()=>C,a_:()=>D,lt:()=>T,qQ:()=>y,u8:()=>P});var n=e(69781),a=e.n(n),i=e(31733),r=e(93796),o=e(63908),g=e(44343),u=e(81548),c=e(91977),l=e(61129),d=e(64704),f=e(56811),m=e(38159),v=e(95639),E=e(86555);const h=[M=>!M.internal||f.contextSrv.hasAccessToExplore()],s="grafana_data_link_clicked",y=(M,x)=>S=>{const{field:U,dataLinkScopedVars:N,frame:w,link:G,linkModel:_}=S,{valueRowIndex:K}=S.config;if(!G.internal||K===void 0)return _;const k=D({field:U,rowIndex:K,splitOpenFn:M,range:x,vars:N,dataFrame:w,linksToProcess:[G]});return k.length?(0,n.first)(k):void 0},D=M=>{const{field:x,vars:L,splitOpenFn:S,range:U,rowIndex:N,dataFrame:w}=M,G={...L||{}};G.__value={value:{raw:x.values[N]},text:"Raw value"};let _;w&&(_=(0,r.z)({frame:w,rowIndex:N}),G.__data={value:{name:w.name,refId:w.refId,fields:_},text:"Data"},w.fields.forEach(k=>{_&&_[k.name]&&(G[k.name]={value:_[k.name]})}),G.__targetField={value:_[x.name]});const K=M.linksToProcess||x.config.links;return K?K.filter(W=>h.every(Z=>Z(W,G))).map(W=>{if(W.internal){let Z={};W.internal?.transformations&&W.internal?.transformations.forEach(se=>{let re;se.field?re=w?.fields.find(q=>q.name===se.field)?.values[N]:re=x.values[N],Z={...Z,...(0,m.Y)(se,re,x.name)}});const H={...G,...Z},X=T(W,H);let Y=[];if(X.variables.length===0){const se=x.name.toString();Y.push({variableName:se,value:"",match:""})}else Y=X.variables;const ne=se=>{(0,d.ff)(s,{origin:W.origin||o.n1.Datasource,app:g.zj.Explore,internal:!0}),S?.(se)};return X.allVariablesDefined?{...(0,u._)({link:W,internalLink:W.internal,scopedVars:H,range:U,field:x,onClickFn:M.splitOpenFn?re=>ne(re):void 0,replaceVariables:(0,l.J)().replace.bind((0,l.J)())}),variables:Y}:void 0}else{const Z=(X,Y)=>(0,l.J)().replace(X,{...Y,...G}),H=(0,v.Bq)().getDataLinkUIModel(W,Z,x);return H.title||(H.title=C(H.href)),H}}).filter(W=>!!W):[]};function C(M){M.indexOf("://")<0&&(M=`http://${M}`);let x;try{x=new URL(M).hostname}catch{x=M}return x}function P(M,x){return(0,i.useCallback)((L,S)=>L.fields.flatMap(U=>U.config?.links&&U.config?.links.length?D({field:U,rowIndex:S,range:M,dataFrame:L,splitOpenFn:x}):[]),[M,x])}const b=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function T(M,x){let L=[];return(0,l.J)().replace.bind((0,l.J)())(O(M),x,void 0,L),L=(0,n.uniqBy)(L,"variableName"),{variables:L,allVariablesDefined:L.filter(U=>!b.includes(U.variableName)).every(U=>U.found)}}function O(M){let x="",L;for(L in M)typeof M[L]=="string"?x+=" "+M[L]:typeof M[L]=="object"&&(x+=" "+O(M[L]));return x}const R=M=>M[1]!==void 0,I=M=>{const x=Object.entries(M).filter(R).map(([L,S])=>{const U=(0,E.D)(S);return U.range={to:S.range.to.valueOf().toString(),from:S.range.from.valueOf().toString()},[L,U]}).reduce((L,[S,U])=>({...L,[S]:U}),{});return c.Cj.renderUrl("/explore",{schemaVersion:1,panes:JSON.stringify(x)})}},51233:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>a});var n=e(65354);function a(i){const r=new Set(i.map(o=>o.refId).filter(Boolean));return r.size===i.length?i:(r.clear(),i.map(o=>{if(o.refId&&!r.has(o.refId))return r.add(o.refId),o;const g=(0,n.Hs)(i);return r.add(g),{...o,refId:g}}))}},99577:(Q,A,e)=>{"use strict";e.d(A,{B9:()=>v,DK:()=>E,SY:()=>f,Z9:()=>s});var n=e(69781),a=e.n(n),i=e(71156),r=e(26722),o=e(66463),g=e(31339),u=e(68387),c=e(20298),l=e(39357),d=e(76597);const f=[u.v8.LogsVolume,u.v8.LogsSample],m=y=>`grafana.explore.logs.enable${y}`,v=(y,D)=>{l.Z.set(m(D),y?"true":"false")},E=()=>{let y={[u.v8.LogsVolume]:{enabled:!0},[u.v8.LogsSample]:{enabled:!1}};for(const D of f){if(D===u.v8.LogsSample)continue;l.Z.get(m(D))==="false"&&(y[D]={enabled:!1})}return y},p=(y,D,C)=>new i.y(P=>y.subscribe(b=>{if(b.logsResult&&b.logsResult.rows&&b.logsResult.visibleRange&&b.logsResult.bucketSize!==void 0&&b.state===c.Gu.Done){const T=b.logsResult.bucketSize,O=D.map(M=>M.refId),R=(0,n.groupBy)(b.logsResult.rows,"dataFrame.refId");let I=[];O.forEach(M=>{if(R[M]?.length){const x=(0,d.Nw)(R[M],T);I=[...I,...x];const L={logsVolumeType:u.o8.Limited,absoluteRange:b.logsResult?.visibleRange,datasourceName:C,sourceQuery:D.find(S=>S.refId===M)};P.next({data:I.map(S=>{const U=S.meta?.custom||{};return{...S,meta:{custom:{...U,...L}}}}),state:b.state})}}),P.complete()}})),h=(y,D,C,P)=>{if(y===u.v8.LogsVolume)return p(D,C,P)},s=(y,D,C,P)=>{const T=y.map(({datasource:O,targets:R},I)=>{const M=(0,n.cloneDeep)(C);return M.requestId=`${M.requestId||""}_${I}`,M.targets=R,(0,u.mN)(O,D)?O.getDataProvider(D,M):h(D,P,R,O.name)}).filter(c.fQ);if(T.length!==0)return T.length===1?T[0]:(0,r.T)(...T).pipe((0,g.R)((O,R)=>O.errors&&O.errors.length||R.state===c.Gu.NotStarted?O:R.state===c.Gu.Loading&&O.state===c.Gu.NotStarted?{...O,state:c.Gu.Loading}:R.state&&R.state!==c.Gu.Done?O:{...O,data:[...O.data,...R.data],state:c.Gu.Done},{data:[],state:c.Gu.NotStarted}),(0,o.E)())}},11042:(Q,A,e)=>{"use strict";e.d(A,{mV:()=>b,bE:()=>P});var n=e(57298),a=e(89582),i=e(59889),r=e(65821),o=e(61129),g=e(66261),u=e(31733),c=e(41164),l=e(38834),d=e(95612),f=e(8335),m=e(45886),v=e(10230),E=e(37850),p=e(26894),h=e(75607);const s=15;function y(){const T=(0,u.useRef)({}),O=(0,u.useCallback)(I=>{switch(I){case p.Us.math:case p.Us.reduce:case p.Us.resample:case p.Us.threshold:return T.current[I];case p.Us.classic:return}},[]),R=(0,u.useCallback)((I,M)=>{switch(I){case p.Us.math:T.current.math=M;break;case p.Us.reduce:case p.Us.resample:case p.Us.resample:T.current.reduce=M,T.current.resample=M,T.current.threshold=M;break}},[]);return{getCachedExpression:O,setCachedExpression:R}}function D(T){const{query:O,queries:R,onRunQuery:I,onChange:M}=T,{getCachedExpression:x,setCachedExpression:L}=y();(0,u.useEffect)(()=>{L(O.type,O.expression)},[O.expression,O.type,L]);const S=(0,u.useCallback)(w=>{const G=x(w.value),_=(0,h.J)({...O,type:w.value});M({..._,expression:G??_.expression})},[O,M,x]),U=()=>{const w=R.filter(G=>O.refId!==G.refId).map(G=>({value:G.refId,label:G.refId}));switch(O.type){case p.Us.math:return u.createElement(f.Z,{onChange:M,query:O,labelWidth:s,onRunQuery:I});case p.Us.reduce:return u.createElement(m.v,{refIds:w,onChange:M,labelWidth:s,query:O});case p.Us.resample:return u.createElement(v.p,{query:O,labelWidth:s,onChange:M,refIds:w});case p.Us.classic:return u.createElement(d.I,{onChange:M,query:O,refIds:w});case p.Us.threshold:return u.createElement(E.M,{onChange:M,query:O,labelWidth:s,refIds:w})}},N=p.EJ.find(w=>w.value===O.type);return u.createElement("div",null,u.createElement(c._,{label:"Operation",labelWidth:s},u.createElement(l.Ph,{options:p.EJ,value:N,onChange:S,width:25})),U())}class C extends r.CK{constructor(O){super(O),this.instanceSettings=O}applyTemplateVariables(O,R){const I=(0,o.J)();return{...O,expression:I.replace(O.expression,R),window:I.replace(O.window,R)}}getCollapsedText(O){return`Expression: ${O.type}`}query(O){let R=O.targets.map(async M=>{const x=await(0,g.F)().get(M.datasource);return x.interpolateVariablesInQueries?x?.interpolateVariablesInQueries([M],O.scopedVars,O.filters)[0]:M});return(0,n.D)(Promise.all(R)).pipe((0,a.z)(M=>super.query({...O,targets:M})))}newQuery(O){return{refId:"--",datasource:r.hr,type:O?.type??p.Us.math,...O}}}const P={id:-100,uid:p.Yq,name:r.hr.name,type:r.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:i.zV.datasource,name:r.hr.type,id:r.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},b=new C(P);b.meta={id:r.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},b.components={QueryEditor:D}},95612:(Q,A,e)=>{"use strict";e.d(A,{I:()=>D});var n=e(31733),a=e(47701),i=e(41164),r=e(51343),o=e(49311),g=e(75607),u=e(76932),c=e(76067),l=e(37739),d=e(61513),f=e(38834),m=e(64516),v=e(74201);const E=v.Z.reducerTypes.map(C=>({label:C.text,value:C.value})),p=v.Z.evalOperators.map(C=>({label:C.text,value:C.value})),h=v.Z.evalFunctions.map(C=>({label:C.text,value:C.value})),s=({condition:C,index:P,onChange:b,onRemoveCondition:T,refIds:O})=>{const R=(0,c.wW)(y),I=w=>{b({...C,operator:{type:w.value}})},M=w=>{b({...C,reducer:{type:w.value,params:[]}})},x=w=>{b({...C,query:{params:[w.value]}})},L=w=>{b({...C,evaluator:{params:C.evaluator.params,type:w.value}})},S=(w,G)=>{const _=parseFloat(w.currentTarget.value),K=[...C.evaluator.params];K[G]=_,b({...C,evaluator:{...C.evaluator,params:K}})},U=(0,u.css)`
    width: 60px;
  `,N=C.evaluator.type===v.$.IsWithinRange||C.evaluator.type===v.$.IsOutsideRange;return n.createElement(l.K,null,n.createElement("div",{style:{flex:1}},n.createElement(a.Z,null,P===0?n.createElement("div",{className:(0,u.cx)(R.button,U)},"WHEN"):n.createElement(d.d,{className:(0,u.cx)(R.buttonSelectText,U),options:p,onChange:I,value:p.find(w=>w.value===C.operator.type)}),n.createElement(f.Ph,{options:E,onChange:M,width:20,value:E.find(w=>w.value===C.reducer.type)}),n.createElement("div",{className:R.button},"OF"),n.createElement(f.Ph,{onChange:x,options:O,width:"auto",value:O.find(w=>w.value===C.query.params[0])})),n.createElement(a.Z,null,n.createElement(d.d,{className:R.buttonSelectText,options:h,onChange:L,value:h.find(w=>w.value===C.evaluator.type)}),N?n.createElement(n.Fragment,null,n.createElement(m.I,{type:"number",width:10,onChange:w=>S(w,0),value:C.evaluator.params[0]}),n.createElement("div",{className:R.button},"TO"),n.createElement(m.I,{type:"number",width:10,onChange:w=>S(w,1),value:C.evaluator.params[1]})):C.evaluator.type!==v.$.HasNoValue?n.createElement(m.I,{type:"number",width:10,onChange:w=>S(w,0),value:C.evaluator.params[0]}):null)),n.createElement(r.zx,{variant:"secondary",type:"button",onClick:()=>T(P)},n.createElement(o.J,{name:"trash-alt"})))},y=C=>{const P=(0,u.css)`
    color: ${C.colors.primary.text};
    font-size: ${C.typography.bodySmall.fontSize};
  `;return{buttonSelectText:P,button:(0,u.cx)((0,u.css)`
        display: flex;
        align-items: center;
        border-radius: ${C.shape.radius.default};
        font-weight: ${C.typography.fontWeightMedium};
        border: 1px solid ${C.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${C.spacing(1)};
        background-color: ${C.colors.background.canvas};
      `,P)}},D=({onChange:C,query:P,refIds:b})=>{const T=(I,M)=>{P.conditions&&C({...P,conditions:[...P.conditions.slice(0,M),I,...P.conditions.slice(M+1)]})},O=()=>{if(P.conditions){const I=P.conditions.at(-1)?.query?.params??[],M={...g.R,query:{params:I}};C({...P,conditions:P.conditions.length>0?[...P.conditions,M]:[M]})}},R=I=>{if(P.conditions){const M=P.conditions[I],x=P.conditions.filter(L=>L!==M).map((L,S)=>S===0?{...L,operator:{type:"when"}}:L);C({...P,conditions:x})}};return n.createElement("div",null,n.createElement(a.Z,null,n.createElement(i._,{label:"Conditions",labelWidth:14},n.createElement("div",null,P.conditions?.map((I,M)=>{if(I)return n.createElement(s,{key:M,index:M,condition:I,onChange:x=>T(x,M),onRemoveCondition:R,refIds:b})})))),n.createElement(r.zx,{variant:"secondary",type:"button",onClick:O},n.createElement(o.J,{name:"plus-circle"})))}},8335:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>f});var n=e(76932),a=e(31733),i=e(76067),r=e(37739),o=e(41164),g=e(20888),u=e(65930),c=e(49311),l=e(28718);const d="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",f=({labelWidth:p,onChange:h,query:s,onRunQuery:y})=>{const D=b=>{h({...s,expression:b.target.value})},C=(0,i.wW)(v),P=()=>{s.expression&&y()};return a.createElement(r.K,null,a.createElement(o._,{label:a.createElement(g.W,{width:"auto"},a.createElement(u.P,{fitContent:!0,content:a.createElement("div",{className:C.documentationContainer},a.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",a.createElement("br",null),"Example: ",a.createElement("code",null,"$A + $B")),a.createElement("header",{className:C.documentationHeader},"Available Math functions"),a.createElement("div",{className:C.documentationFunctions},a.createElement(m,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),a.createElement(m,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(m,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(m,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(m,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),a.createElement(m,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),a.createElement(m,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),a.createElement(m,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),a.createElement(m,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),a.createElement(m,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:a.createElement(r.K,{gap:1,direction:"row"},a.createElement(c.J,{name:"book-open"})," Math operator"),footer:a.createElement("div",null,"See our additional documentation on"," ",a.createElement("a",{className:C.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},a.createElement(c.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},a.createElement("div",{className:C.info},"Expression ",a.createElement(c.J,{name:"info-circle"})))),labelWidth:p,grow:!0,shrink:!0},a.createElement(l.K,{value:s.expression,onChange:D,rows:1,placeholder:d,onBlur:P,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},m=({name:p,description:h})=>{const s=(0,i.wW)(E);return a.createElement(a.Fragment,null,a.createElement("span",{className:s.name},p),a.createElement("span",{className:s.description},h))},v=p=>({documentationHeader:(0,n.css)`
    font-size: ${p.typography.h5.fontSize};
    font-weight: ${p.typography.h5.fontWeight};
  `,documentationLink:(0,n.css)`
    color: ${p.colors.text.link};
  `,documentationContainer:(0,n.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${p.spacing(2)};

    padding: ${p.spacing(1)} ${p.spacing(2)};
  `,documentationFunctions:(0,n.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${p.spacing(2)};
  `,info:(0,n.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${p.spacing(1)};
  `}),E=p=>({name:(0,n.css)`
    font-weight: ${p.typography.fontWeightBold};
  `,description:(0,n.css)`
    font-size: ${p.typography.bodySmall.fontSize};
    color: ${p.colors.text.disabled};
  `})},45886:(Q,A,e)=>{"use strict";e.d(A,{v:()=>u});var n=e(31733),a=e(41164),i=e(64516),r=e(47701),o=e(38834),g=e(26894);const u=({labelWidth:c="auto",onChange:l,refIds:d,query:f})=>{const m=g.SQ.find(C=>C.value===f.reducer),v=C=>{l({...f,expression:C.value})},E=C=>{l({...f,reducer:C.value})},p=C=>{l({...f,settings:C})},h=C=>{let P;switch(C.value){case g.kN.ReplaceNonNumbers:let b=0;f.settings?.mode===g.kN.ReplaceNonNumbers&&(b=f.settings?.replaceWithValue??0),P={mode:g.kN.ReplaceNonNumbers,replaceWithValue:b};break;default:P={mode:C.value}}p(P)},s=C=>{const P=C.currentTarget.valueAsNumber;p({mode:g.kN.ReplaceNonNumbers,replaceWithValue:P??0})},y=f.settings?.mode??g.kN.Strict,D=()=>{if(y===g.kN.ReplaceNonNumbers)return n.createElement(a._,{label:"Replace With",labelWidth:c},n.createElement(i.I,{type:"number",width:10,onChange:s,value:f.settings?.replaceWithValue??0}))};return n.createElement(n.Fragment,null,n.createElement(r.Z,null,n.createElement(a._,{label:"Input",labelWidth:c},n.createElement(o.Ph,{onChange:v,options:d,value:f.expression,width:"auto"}))),n.createElement(r.Z,null,n.createElement(a._,{label:"Function",labelWidth:c},n.createElement(o.Ph,{options:g.SQ,value:m,onChange:E,width:20})),n.createElement(a._,{label:"Mode",labelWidth:c},n.createElement(o.Ph,{onChange:h,options:g.YM,value:y,width:25})),D()))}},10230:(Q,A,e)=>{"use strict";e.d(A,{p:()=>u});var n=e(31733),a=e(47701),i=e(41164),r=e(38834),o=e(64516),g=e(26894);const u=({labelWidth:c="auto",onChange:l,refIds:d,query:f})=>{const m=g.Fr.find(y=>y.value===f.downsampler),v=g.r8.find(y=>y.value===f.upsampler),E=y=>{l({...f,window:y.target.value})},p=y=>{l({...f,expression:y.value})},h=y=>{l({...f,downsampler:y.value})},s=y=>{l({...f,upsampler:y.value})};return n.createElement(n.Fragment,null,n.createElement(a.Z,null,n.createElement(i._,{label:"Input",labelWidth:c},n.createElement(r.Ph,{onChange:p,options:d,value:f.expression,width:20}))),n.createElement(a.Z,null,n.createElement(i._,{label:"Resample to",labelWidth:c,tooltip:"10s, 1m, 30m, 1h"},n.createElement(o.I,{onChange:E,value:f.window,width:15})),n.createElement(i._,{label:"Downsample"},n.createElement(r.Ph,{options:g.Fr,value:m,onChange:h,width:25})),n.createElement(i._,{label:"Upsample"},n.createElement(r.Ph,{options:g.r8,value:v,onChange:s,width:25}))))}},37850:(Q,A,e)=>{"use strict";e.d(A,{M:()=>R});var n=e(76932),a=e(31733),i=e(17302),r=e(76067),o=e(47701),g=e(41164),u=e(38834),c=e(61513),l=e(64516),d=e(76772),f=e(83811),m=e(74201),v=e(26894),E=e(4579);const p=(0,E.PH)("thresold/updateRefId"),h=(0,E.PH)("thresold/updateThresholdType"),s=(0,E.PH)("thresold/updateThresholdParams"),y=(0,E.PH)("thresold/updateHysteresis"),D=(0,E.PH)("thresold/updateUnloadParams"),C=(0,E.Lq)({type:v.Us.threshold,refId:"",conditions:[]},x=>{x.addCase(p,(L,S)=>{L.expression=S.payload}),x.addCase(h,(L,S)=>{const U=S.payload.evalFunction,N=S.payload.onError;if(L.conditions[0].evaluator.type=U,!!L.conditions[0].unloadEvaluator){const G=P(L.conditions[0].evaluator.type);N&&N(void 0),L.conditions[0].evaluator.type=U;const _={type:G,params:L.conditions[0].evaluator?.params??[0,0]};L.conditions[0].unloadEvaluator=_}}),x.addCase(s,(L,S)=>{const{param:U,index:N}=S.payload;L.conditions[0].evaluator.params[N]=U}),x.addCase(y,(L,S)=>{const{hysteresisChecked:U,onError:N}=S.payload;U?L.conditions[0].unloadEvaluator={type:P(L.conditions[0].evaluator.type),params:L.conditions[0].evaluator?.params??[0,0]}:(L.conditions[0].unloadEvaluator=void 0,N&&N(void 0))}),x.addCase(D,(L,S)=>{const{param:U,index:N,onError:w}=S.payload;L.conditions[0].unloadEvaluator?L.conditions[0].unloadEvaluator.params[N]=U:L.conditions[0].unloadEvaluator={type:P(L.conditions[0].evaluator.type),params:L.conditions[0].evaluator?.params??[0,0]};const G=b(L.conditions[0]),{errorMsg:_,errorMsgFrom:K,errorMsgTo:k}=G??{};w&&w(_||K||k)})});function P(x){return x===m.$.IsAbove?m.$.IsBelow:x===m.$.IsBelow?m.$.IsAbove:x===m.$.IsWithinRange?m.$.IsOutsideRange:x===m.$.IsOutsideRange?m.$.IsWithinRange:m.$.IsBelow}function b(x){const{unloadEvaluator:L,evaluator:S}=x;if(!S)return;if(L?.params[0]===void 0||Number.isNaN(L?.params[0]))return{errorMsg:"This value cannot be empty"};const{type:U,params:N}=S,{params:w}=L;if(U===m.$.IsWithinRange||U===m.$.IsOutsideRange){if(w[0]===void 0||Number.isNaN(w[0]))return{errorMsgFrom:"This value cannot be empty"};if(w[1]===void 0||Number.isNaN(w[1]))return{errorMsgTo:"This value cannot be empty"}}const[G,_]=L.params,[K,k]=N;switch(U){case m.$.IsAbove:if(G>K)return{errorMsg:`Enter a number less than or equal to ${K}`};break;case m.$.IsBelow:if(G<K)return{errorMsg:`Enter a number more than or equal to ${K}`};break;case m.$.IsOutsideRange:if(G<K)return{errorMsgFrom:`Enter a number more than or equal to ${K}`};if(_>k)return{errorMsgTo:`Enter a number less than or equal to ${k}`};break;case m.$.IsWithinRange:if(G>K)return{errorMsgFrom:`Enter a number less than or equal to ${K}`};if(_<k)return{errorMsgTo:`Enter a number be more than or equal to ${k}`};break;default:throw new Error(`evaluator function type ${U} not supported.`)}}const T=m.$.IsAbove,O={type:"query",evaluator:{type:T,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},R=({labelWidth:x,onChange:L,refIds:S,query:U,onError:N,useHysteresis:w=!1})=>{const G=(0,r.wW)(M),_={...U,conditions:U.conditions?.length?U.conditions:[O]},[K,k]=(0,a.useReducer)(C,_),z=K.conditions[0],W=v.Mi.find(re=>re.value===K.conditions[0].evaluator?.type),Z=re=>{k(p(re.value))};(0,a.useEffect)(()=>{K&&L(K)},[K]);const H=re=>{k(h({evalFunction:re.value??T,onError:N}))},X=(re,ge)=>{k(s({param:parseFloat(re.currentTarget.value),index:ge}))},Y=z.evaluator.type===m.$.IsWithinRange||z.evaluator.type===m.$.IsOutsideRange,ne=!!f.config.featureToggles?.recoveryThreshold&&w;return a.createElement(a.Fragment,null,a.createElement(o.Z,null,a.createElement(g._,{label:"Input",labelWidth:x},a.createElement(u.Ph,{onChange:Z,options:S,value:U.expression,width:20}))),a.createElement(o.Z,null,a.createElement(c.d,{className:G.buttonSelectText,options:v.Mi,onChange:H,value:W}),Y?a.createElement(a.Fragment,null,a.createElement(l.I,{type:"number",width:10,onChange:re=>X(re,0),defaultValue:z.evaluator.params[0]}),a.createElement("div",{className:G.button},"TO"),a.createElement(l.I,{type:"number",width:10,onChange:re=>X(re,1),defaultValue:z.evaluator.params[1]})):a.createElement(l.I,{type:"number",width:10,onChange:re=>X(re,0),defaultValue:z.evaluator.params[0]||0})),ne&&a.createElement(se,{isRange:Y,onError:N}));function se({isRange:re,onError:ge}){const q=!!z.unloadEvaluator,me=ve=>{k(y({hysteresisChecked:ve.currentTarget.checked,onError:ge})),oe.current=!0},oe=a.useRef(!0),fe=()=>{oe.current=!1};return a.createElement("div",{className:G.hysteresis},a.createElement("div",{onMouseDown:fe},a.createElement(d.x,{showLabel:!0,label:"Custom recovery threshold",value:q,onChange:me,className:G.switch})),q&&a.createElement(I,{isRange:re,condition:z,onError:ge,dispatch:k,allowOnblur:oe}))}};function I({isRange:x,condition:L,onError:S,dispatch:U,allowOnblur:N}){const w=(0,r.wW)(M),G=(H,X)=>{const Y=parseFloat(H.currentTarget.value);U(D({param:Y,index:X,onError:S}))},_=b(L),{errorMsg:K,errorMsgFrom:k,errorMsgTo:z}=_??{};if(x)return a.createElement(W,{allowOnblur:N});return a.createElement(Z,{allowOnblur:N});function W({allowOnblur:H}){return L.evaluator.type===m.$.IsWithinRange?a.createElement(o.Z,{className:w.hysteresis},a.createElement(g._,{label:"Stop alerting when outside range",labelWidth:"auto"},a.createElement(i.K,{direction:"row",gap:0},a.createElement("div",{className:w.range},a.createElement(g._,{invalid:!!k,error:k,className:w.noMargin},a.createElement(l.I,{type:"number",width:10,onBlur:X=>H.current&&G(X,0),defaultValue:L.unloadEvaluator?.params[0]}))),a.createElement("div",{className:w.button},"TO"),a.createElement("div",{className:w.range},a.createElement(g._,{invalid:!!z,error:z},a.createElement(l.I,{type:"number",width:10,onBlur:X=>H.current&&G(X,1),defaultValue:L.unloadEvaluator?.params[1]})))))):a.createElement(o.Z,{className:w.hysteresis},a.createElement(g._,{label:"Stop alerting when inside range",labelWidth:"auto"},a.createElement(i.K,{direction:"row",gap:0},a.createElement("div",{className:w.range},a.createElement(g._,{invalid:!!k,error:k},a.createElement(l.I,{type:"number",width:10,onBlur:X=>H.current&&G(X,0),defaultValue:L.unloadEvaluator?.params[0]}))),a.createElement("div",{className:w.button},"TO"),a.createElement("div",{className:w.range},a.createElement(g._,{invalid:!!z,error:z},a.createElement(l.I,{type:"number",width:10,onBlur:X=>H.current&&G(X,1),defaultValue:L.unloadEvaluator?.params[1]}))))))}function Z({allowOnblur:H}){return L.evaluator.type===m.$.IsAbove?a.createElement(o.Z,{className:w.hysteresis},a.createElement(g._,{label:"Stop alerting when below",labelWidth:"auto",invalid:!!K,error:K},a.createElement(l.I,{type:"number",width:10,onBlur:X=>{H.current&&G(X,0)},defaultValue:L.unloadEvaluator?.params[0]}))):a.createElement(o.Z,{className:w.hysteresis},a.createElement(g._,{label:"Stop alerting when above",labelWidth:"auto",invalid:!!K,error:K},a.createElement(l.I,{type:"number",width:10,onBlur:X=>{H.current&&G(X,0)},defaultValue:L.unloadEvaluator?.params[0]})))}}const M=x=>({buttonSelectText:(0,n.css)({color:x.colors.primary.text,fontSize:x.typography.bodySmall.fontSize,textTransform:"uppercase",padding:`0 ${x.spacing(1)}`}),button:(0,n.css)({height:"32px",color:x.colors.primary.text,fontSize:x.typography.bodySmall.fontSize,textTransform:"uppercase",display:"flex",alignItems:"center",borderRadius:x.shape.radius.default,fontWeight:x.typography.fontWeightBold,border:`1px solid ${x.colors.border.medium}`,whiteSpace:"nowrap",padding:`0 ${x.spacing(1)}`,backgroundColor:x.colors.background.primary}),range:(0,n.css)({width:"min-content"}),hysteresis:(0,n.css)({marginTop:x.spacing(2)}),switch:(0,n.css)({paddingLeft:x.spacing(1)}),noMargin:(0,n.css)({margin:0})})},26894:(Q,A,e)=>{"use strict";e.d(A,{EJ:()=>g,Fr:()=>d,Mi:()=>m,SQ:()=>u,Us:()=>r,YM:()=>l,Yq:()=>i,hF:()=>o,kN:()=>c,r8:()=>f});var n=e(66542),a=e(74201);const i="__expr__";var r=(v=>(v.math="math",v.reduce="reduce",v.resample="resample",v.classic="classic_conditions",v.threshold="threshold",v))(r||{});const o=v=>{switch(v){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition";case"threshold":return"Threshold"}},g=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],u=[{value:n.gz.min,label:"Min",description:"Get the minimum value"},{value:n.gz.max,label:"Max",description:"Get the maximum value"},{value:n.gz.mean,label:"Mean",description:"Get the average value"},{value:n.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:n.gz.count,label:"Count",description:"Get the number of values"},{value:n.gz.last,label:"Last",description:"Get the last value"}];var c=(v=>(v.Strict="",v.ReplaceNonNumbers="replaceNN",v.DropNonNumbers="dropNN",v))(c||{});const l=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],d=[{value:n.gz.last,label:"Last",description:"Fill with the last value"},{value:n.gz.min,label:"Min",description:"Fill with the minimum value"},{value:n.gz.max,label:"Max",description:"Fill with the maximum value"},{value:n.gz.mean,label:"Mean",description:"Fill with the average value"},{value:n.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],f=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],m=[{value:a.$.IsAbove,label:"Is above"},{value:a.$.IsBelow,label:"Is below"},{value:a.$.IsWithinRange,label:"Is within range"},{value:a.$.IsOutsideRange,label:"Is outside range"}]},75607:(Q,A,e)=>{"use strict";e.d(A,{J:()=>r,R:()=>o});var n=e(66542),a=e(74201),i=e(26894);const r=g=>{switch(g.type){case i.Us.reduce:g.reducer||(g.reducer=n.gz.mean);break;case i.Us.resample:g.downsampler||(g.downsampler=n.gz.mean),g.upsampler||(g.upsampler="fillna"),g.reducer=void 0;break;case i.Us.math:g.expression=void 0;break;case i.Us.classic:g.conditions||(g.conditions=[o]);break;default:g.reducer=void 0}return g},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:a.$.IsAbove}}},31509:(Q,A,e)=>{"use strict";e.d(A,{AZ:()=>c,B1:()=>m,Pr:()=>u,W3:()=>l,y3:()=>g});var n=e(85498),a=e(53166),i=e(56811),r=e(19237),o=e(42342);const g="manage-folder",u=E=>`folder-dashboards-${E}`,c=E=>`folder-library-panels-${E}`,l=E=>`folder-alerting-${E}`,d=E=>`folder-permissions-${E}`,f=E=>`folder-settings-${E}`;function m(E,p=E.parents){const h={icon:"folder",id:g,subTitle:(0,r.L)("manage-folder"),url:E.url,text:E.title,children:[{active:!1,icon:"apps",id:u(E.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:E.url}]};if(p&&p.length>0){const s=p[p.length-1],y=p.slice(0,p.length-1);h.parentItem=m(s,y)}return h.children.push({active:!1,icon:"library-panel",id:c(E.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${E.url}/library-panels`}),i.contextSrv.hasPermission(o.AccessControlAction.AlertingRuleRead)&&n.config.unifiedAlertingEnabled&&h.children.push({active:!1,icon:"bell",id:l(E.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${E.url}/alerting`}),h}function v(E){const p=m({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return p.children[E].active=!0,{main:p,node:p.children[E]}}},17878:(Q,A,e)=>{"use strict";e.d(A,{G3:()=>g,ZP:()=>l});var n=e(4579),a=e(52368);const i={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1},r=(d,f)=>({...d,...f.payload,hasChanged:!1}),o=(0,n.oM)({name:"folder",initialState:i,reducers:{loadFolder:r,setFolderTitle:(d,f)=>({...d,title:f.payload,hasChanged:f.payload.trim().length>0})},extraReducers:d=>{d.addMatcher(a.Hv.getFolder.matchFulfilled,r)}}),{loadFolder:g,setFolderTitle:u}=o.actions,l={folder:o.reducer}},82951:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>c});var n=e(76932),a=e(31733),i=e(76067),r=e(38834),o=e(25111),g=e(74566);const u=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:g.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],c=({value:d,onChange:f,context:m,item:v})=>{const E=(0,i.wW)(l),[p,h]=(0,a.useState)(),s=v.settings;(0,a.useEffect)(()=>{async function C(){const P=await(0,g.so)(d);h(P)}C()},[d,h]);const{current:y,options:D}=(0,a.useMemo)(()=>{let C=s?.options?[...s.options]:[...u],P=C?.find(b=>b.value===p?.path);return!P&&p&&(P={label:p.path,value:p.path},C.push(P)),{options:C,current:P}},[p,s?.options]);return a.createElement(a.Fragment,null,a.createElement(r.Ph,{value:y,options:D,onChange:C=>f(C.value),allowCustomValue:!0,formatCreateLabel:C=>`Load from URL: ${C}`}),p&&a.createElement(a.Fragment,null,p.error&&a.createElement(o.b,{title:p.error,severity:"warning"}),p.count&&a.createElement("div",{className:E.keys},a.createElement("b",null,"(",p.count,")"),p.examples(10).map(C=>a.createElement("span",{key:C},C,",")),p.count>10&&" ...")))},l=()=>({keys:(0,n.css)`
    margin-top: 4px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;

    > span {
      margin-left: 4px;
    }
  `})},51926:(Q,A,e)=>{"use strict";e.d(A,{C:()=>s});var n=e(85666),a=e(71199),i=e(82951),r=e(76932),o=e(31733),g=e(21568),u=e(76067),c=e(25111),l=e(49311),d=e(38834),f=e(79106),m=e(36911);const v=[{value:a.q1.Auto,label:"Auto",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:a.q1.Coords,label:"Coords",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:a.q1.Geohash,label:"Geohash",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:a.q1.Lookup,label:"Lookup",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],E="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",p=({value:y,onChange:D,context:C,item:P})=>{const[b,T]=(0,o.useState)();(0,o.useEffect)(()=>{P.settings?.source&&P.settings?.data?.length&&P.settings.data[0]&&(0,m.cJ)(P.settings.source).then(I=>{P.settings&&P.settings.data&&T((0,m.g6)(P.settings.data[0],I))})},[P.settings]);const O=(0,u.wW)(h),R=()=>{if(b){if(b.warning)return o.createElement(c.b,{title:b.warning,severity:"warning",buttonContent:o.createElement(l.J,{name:"question-circle",size:"xl"}),className:O.alert,onRemove:()=>{const I=window.open(E,"_blank","noopener,noreferrer");I&&(I.opener=null)}});if(y===a.q1.Auto&&b.description)return o.createElement("span",null,b.description)}return null};return o.createElement(o.Fragment,null,o.createElement(d.Ph,{options:v,value:y,onChange:I=>{D(I.value)}}),o.createElement(f.Lh,{className:O.hGroup},R()))},h=y=>({alert:(0,r.css)`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:(0,r.css)`
      & div {
        width: 100%;
      }
    `});function s(y,D,C,P,b){switch(C.addCustomEditor({id:"modeEditor",path:`${D}mode`,name:"Location Mode",editor:p,settings:{data:b,source:P}}),P?.mode){case a.q1.Coords:C.addFieldNamePicker({path:`${D}latitude`,name:"Latitude field",settings:{filter:T=>T.type===n.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${D}longitude`,name:"Longitude field",settings:{filter:T=>T.type===n.fS.number,noFieldsMessage:"No numeric fields found"}});break;case a.q1.Geohash:C.addFieldNamePicker({path:`${D}geohash`,name:"Geohash field",settings:{filter:T=>T.type===n.fS.string,noFieldsMessage:"No strings fields found"}});break;case a.q1.Lookup:C.addFieldNamePicker({path:`${D}lookup`,name:"Lookup field",settings:{filter:T=>T.type===n.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${D}gazetteer`,name:"Gazetteer",editor:i.Q})}}},70267:(Q,A,e)=>{"use strict";e.d(A,{EK:()=>m,Fh:()=>v,ie:()=>f,uZ:()=>l,zS:()=>d});var n=e(26223),a=e(76857),i=e(32187),r=e(94268),o=e(85666),g=e(26229);function u(p){if(!p?.length)return;const h=[16,8,4,2,1],s="0123456789bcdefghjkmnpqrstuvwxyz";let y=!0;const D=[],C=[];D[0]=-90,D[1]=90,C[0]=-180,C[1]=180;let P;p.split("").forEach(O=>{P=s.indexOf(O),h.forEach(R=>{c(y?C:D,P,R),y=!y})});const b=(D[0]+D[1])/2;return[(C[0]+C[1])/2,b]}function c(p,h,s){h&s?p[0]=(p[0]+p[1])/2:p[1]=(p[0]+p[1])/2}function l(p){return{name:p.name??"Point",type:o.fS.geo,values:p.values.map(h=>{const s=u(h);if(s)return new n.Z((0,r.mi)(s))}),config:E}}function d(p,h){const s=new Array(p.values.length);for(let y=0;y<p.values.length;y++){const D=p.values[y],C=h.values[y];D===null||C===null||(s[y]=new n.Z((0,r.mi)([D,C])))}return{name:"Point",type:o.fS.geo,values:s,config:E}}function f(p,h){const s=h.values.length,y=new Array(s);for(let D=0;D<s;D++)y[D]=p.find(h.values[D])?.geometry();return{name:"Geometry",type:o.fS.geo,values:y,config:E}}function m(p,h){const s=p.values,y=h.values;if(!s||!y)throw"missing src/dest";if(s.length!==y.length)throw"Source and destination field lengths do not match";const D=p.values.length,C=new Array(D);for(let P=0;P<D;P++){const b=s[P],T=y[P];b&&T?C[P]=new a.Z([b,T]):b?C[P]=b:T&&(C[P]=T)}return{name:"Geometry",type:o.fS.geo,values:C,config:E}}function v(p,h){const s=p.values,y=h.values;if(!s||!y)throw"missing src/dest";if(s.length!==y.length)throw"Source and destination field lengths do not match";const D=p.values.length,C=new Array(D);for(let P=0;P<D;P++){const b=s[P],T=y[P];b&&T&&(C[P]=new i.Z([(0,g.Lb)(b),(0,g.Lb)(T)]))}return{name:"Geometry",type:o.fS.geo,values:C,config:E}}const E=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},74566:(Q,A,e)=>{"use strict";e.d(A,{LI:()=>p,so:()=>h});var n=e(47750),a=e(26223),i=e(98147),r=e(85666),o=e(69391),g=e(57596);function u(s){const y=new g.Z().readFeatures(s,{featureProjection:"EPSG:3857"}),D=y.length,C=new Array(D).fill(null),P=[],b=new Map,T=M=>{let x=b.get(M);return x||(x={types:new Set,values:new Array(D).fill(null),count:0},P.push(M),b.set(M,x)),x},O=(...M)=>{for(const x of M)if(!b.has(x))return x;return"___"+M[0]},R={types:new Set,values:new Array(D).fill(null),count:0};for(let M=0;M<D;M++){const x=y[M];C[M]=x.getGeometry();const L=x.getId();L!=null&&(R.values[M]=L,R.types.add((0,i.DP)(L)),R.count++);for(const S of x.getKeys()){const U=x.get(S);if(U===C[M]||U==null)continue;const N=T(S);N.values[M]=U,N.types.add((0,i.DP)(U)),N.count++}}const I=[];if(R.count>0){const M=c(R);I.push({name:O("id","_id","__id"),type:M,values:R.values,config:{}})}I.push({name:O("geo","geometry"),type:r.fS.geo,values:C,config:{}});for(const M of P){const x=b.get(M);if(!x)continue;const L=c(x);I.push({name:M,type:L,values:x.values,config:{}})}return{fields:I,length:D}}function c(s){return s.count<1?r.fS.other:s.types.size>1?(s.values=s.values.map(y=>y!=null?`${y}`:y),r.fS.string):s.types.values().next().value}var l=e(70267),d=e(94268);function f(s,y){let D=0;const C=new Map;for(const P of y){const b=new a.Z((0,d.mi)([P.longitude,P.latitude])),T={point:()=>b,geometry:()=>b};if(P.name&&(C.set(P.name,T),C.set(P.name.toUpperCase(),T)),P.key&&(C.set(P.key,T),C.set(P.key.toUpperCase(),T)),P.keys)for(const O of P.keys)C.set(O,T),C.set(O.toUpperCase(),T);D++}return{path:s,find:P=>{let b=C.get(P);return!b&&typeof P=="string"&&(b=C.get(P.toUpperCase())),b},count:D,examples:P=>{const b=[];if(C.size<1)b.push("no values found");else for(const T of C.keys())if(b.push(T),b.length>=P)break;return b}}}function m(s,y){let D;if(Array.isArray(y)){const C=y[0];if(C.latitude&&C.longitude&&(C.key||C.keys))return f(s,y)}else Array.isArray(y?.features)&&y?.type==="FeatureCollection"&&(D=u(y));if(!D)try{D=(0,i.g0)(y)}catch(C){return{path:s,error:`${C}`,find:P=>{},examples:P=>[]}}return v(D,{path:s})}function v(s,y){const D=[];let C,P,b,T,O;for(const M of s.fields)if(M.type===r.fS.geo&&(C=M),!O&&M.type===r.fS.string&&(O=M),M.name){y.keys&&y.keys.includes(M.name)&&D.push(M);const x=M.name.toUpperCase();switch(x){case"LAT":case"LATITUTE":P=M;break;case"LON":case"LNG":case"LONG":case"LONGITUE":b=M;break;case"GEOHASH":T=M;break;case"ID":case"UID":case"KEY":case"CODE":y.keys||D.push(M);break;default:y.keys||(x.endsWith("_ID")||x.endsWith("_CODE"))&&D.push(M)}}!D.length&&O&&D.push(O);let R=!1;C?R=C.values[0]?.getType()==="Point":T?(C=(0,l.uZ)(T),R=!0):P&&b&&(C=(0,l.zS)(b,P),R=!0);const I=new Map;return D.forEach(M=>{M.values.forEach((x,L)=>{const S=`${x}`;I.set(S.toUpperCase(),L),I.set(S,L)})}),{path:y.path,find:M=>{const x=I.get(M);if(x!=null){const L=C?.values[x];return{frame:s,index:x,point:()=>!L||R?L:new a.Z((0,n.qg)(L.getExtent())),geometry:()=>L}}},examples:M=>{const x=[];for(let L of I.keys())if(x.push(L),x.length>M)break;return x},frame:()=>s,count:s.length}}const E={},p="public/gazetteer/countries.json";async function h(s){s||(s=p);let y=E[s];if(!y){try{const D=await(0,o.i)().get(s);y=m(s,D)}catch(D){console.warn("Error loading placename lookup",s,D),y={path:s,error:"Error loading URL",find:C=>{},examples:C=>[]}}E[s]=y}return y}},36911:(Q,A,e)=>{"use strict";e.d(A,{cJ:()=>f,g6:()=>v});var n=e(27957),a=e(85666),i=e(85610),r=e(18198),o=e(71199),g=e(70267),u=e(74566);function c(E){return p=>{for(const h of p.fields)if(E(h,p,[]))return h}}function l(E){return p=>{for(const h of p.fields){if(E.has(h.name.toLowerCase()))return h;const s=(0,n.CZ)(h,p);if(E.has(s))return h}}}const d={mode:o.q1.Auto,geohash:l(new Set(["geohash"])),latitude:l(new Set(["latitude","lat"])),longitude:l(new Set(["longitude","lon","lng"])),h3:l(new Set(["h3"])),wkt:l(new Set(["wkt"])),lookup:l(new Set(["lookup"])),geo:E=>E.fields.find(p=>p.type===a.fS.geo)};async function f(E){const p={...d,mode:E?.mode??o.q1.Auto};switch(p.gazetteer=await(0,u.so)(E?.gazetteer),p.mode){case o.q1.Geohash:E?.geohash?p.geohash=c((0,i.sq)({id:r.mi.byName,options:E.geohash})):p.geohash=()=>{};break;case o.q1.Lookup:const h=E?.lookup?.length?(0,i.sq)({id:r.mi.byName,options:E.lookup}):(0,i.sq)({id:r.mi.byType,options:a.fS.string});p.lookup=c(h);break;case o.q1.Coords:E?.latitude?p.latitude=c((0,i.sq)({id:r.mi.byName,options:E.latitude})):p.latitude=()=>{},E?.longitude?p.longitude=c((0,i.sq)({id:r.mi.byName,options:E.longitude})):p.longitude=()=>{};break}return p}function m(E,p){const h={mode:p.mode??o.q1.Auto};if(h.mode===o.q1.Auto){if(h.geo=p.geo(E),h.geo)return h;if(h.latitude=p.latitude(E),h.longitude=p.longitude(E),h.latitude&&h.longitude)return h.mode=o.q1.Coords,h;if(h.geohash=p.geohash(E),h.geohash)return h.mode=o.q1.Geohash,h;if(h.lookup=p.lookup(E),h.lookup)return h.mode=o.q1.Lookup,h}switch(h.mode){case o.q1.Coords:h.latitude=p.latitude(E),h.longitude=p.longitude(E);break;case o.q1.Geohash:h.geohash=p.geohash(E);break;case o.q1.Lookup:h.lookup=p.lookup(E);break}return h}function v(E,p){const h=m(E,p);switch(h.mode){case o.q1.Auto:return h.geo?{field:h.geo}:{warning:"Unable to find location fields"};case o.q1.Coords:return h.latitude&&h.longitude?{field:(0,g.zS)(h.longitude,h.latitude),derived:!0,description:`${h.mode}: ${h.latitude.name}, ${h.longitude.name}`}:{warning:"Select latitude/longitude fields"};case o.q1.Geohash:return h.geohash?{field:(0,g.uZ)(h.geohash),derived:!0,description:`${h.mode}`}:{warning:"Select geohash field"};case o.q1.Lookup:return h.lookup?p.gazetteer?{field:(0,g.ie)(p.gazetteer,h.lookup),derived:!0,description:`${h.mode}: ${p.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},28945:(Q,A,e)=>{"use strict";e.d(A,{E:()=>L});var n=e(69781),a=e(31733),i=e(43741),r=e(20447),o=e(96503),g=e(19596),u=e(21568),c=e(64704),l=e(61129),d=e(51343),f=e(89719),m=e(47687),v=e(83811),E=e(53166),p=e(76597),h=e(27957),s=e(76067),y=e(79106),D=e(85765),C=e(38834),P=e(76772),b=e(87243),T=e(76932);const O=U=>(0,T.css)`
  padding: ${U.spacing(0,2)};
  font-size: ${U.typography.bodySmall.fontSize};
  color: ${U.colors.text.secondary};
  overflow: hidden;
  text-overflow: ellipsis;
`,R=({children:U})=>{const N=(0,s.wW)(O);return a.createElement("div",{className:N},U)};var I=e(32950);const M=({options:U,actions:N,onOptionsChange:w,hasTransformations:G,data:_,dataFrames:K,transformationOptions:k,selectedDataFrame:z,onDataFrameChange:W,downloadForExcel:Z,toggleDownloadForExcel:H})=>{const X=(0,s.wW)(I.i);let Y=K;z===r.W.joinByField&&(Y=_);const ne=Y.map((ge,q)=>({value:q,label:`${(0,h.nf)(ge)} (${q})`})),se=[...k,...ne];function re(){let ge="";if(!_)return ge;const q=[];return z===r.W.joinByField?q.push((0,E.t)("dashboard.inspect-data.series-to-columns","Series joined by time")):_.length>1&&q.push((0,h.nf)(_[z])),(U.withTransforms||U.withFieldConfig)&&(U.withTransforms&&q.push((0,E.t)("dashboard.inspect-data.panel-transforms","Panel transforms")),U.withTransforms&&U.withFieldConfig,U.withFieldConfig&&q.push((0,E.t)("dashboard.inspect-data.formatted","Formatted data"))),Z&&q.push((0,E.t)("dashboard.inspect-data.excel-header","Excel header")),q.join(", ")}return a.createElement("div",{className:X.dataDisplayOptions},a.createElement(b.t,{id:"Data options",index:0,title:(0,E.t)("dashboard.inspect-data.data-options","Data options"),headerElement:a.createElement(R,null,re()),isOpen:!1,actions:N},a.createElement("div",{className:X.options,"data-testid":"dataOptions"},a.createElement(y.wc,{spacing:"none"},_.length>1&&a.createElement(D.g,{label:(0,E.t)("dashboard.inspect-data.dataframe-label","Show data frame")},a.createElement(C.Ph,{options:se,value:z,onChange:W,width:30,"aria-label":(0,E.t)("dashboard.inspect-data.dataframe-aria-label","Select dataframe")})),a.createElement(y.Lh,null,G&&w&&a.createElement(D.g,{label:(0,E.t)("dashboard.inspect-data.transformations-label","Apply panel transformations"),description:(0,E.t)("dashboard.inspect-data.transformations-description","Table data is displayed with transformations defined in the panel Transform tab.")},a.createElement(P.r,{value:!!U.withTransforms,onChange:()=>w({...U,withTransforms:!U.withTransforms})})),w&&a.createElement(D.g,{label:(0,E.t)("dashboard.inspect-data.formatted-data-label","Formatted data"),description:(0,E.t)("dashboard.inspect-data.formatted-data-description","Table data is formatted with options defined in the Field and Override tabs.")},a.createElement(P.r,{id:"formatted-data-toggle",value:!!U.withFieldConfig,onChange:()=>w({...U,withFieldConfig:!U.withFieldConfig})})),a.createElement(D.g,{label:(0,E.t)("dashboard.inspect-data.download-excel-label","Download for Excel"),description:(0,E.t)("dashboard.inspect-data.download-excel-description","Adds header to CSV for use with Excel")},a.createElement(P.r,{id:"excel-toggle",value:Z,onChange:H})))))))};var x=e(16636);class L extends a.PureComponent{constructor(N){super(N),this.onExportLogsAsTxt=()=>{const{data:w,dataName:G,app:_}=this.props;(0,c.ff)("grafana_logs_download_logs_clicked",{app:_,format:"logs",area:"inspector"});const K=(0,p.aB)(w||[]);(0,x.Fc)(K,G)},this.onExportTracesAsJson=()=>{const{data:w,dataName:G,app:_}=this.props;if(w)for(const K of w){if(K.meta?.preferredVisualisationType!=="trace")continue;const k=(0,x.gb)(K,G+"-traces");(0,c.ff)("grafana_traces_download_traces_clicked",{app:_,grafana_version:v.config.buildInfo.version,trace_format:k,location:"inspector"})}},this.onExportServiceGraph=()=>{const{data:w,dataName:G,app:_}=this.props;(0,c.ff)("grafana_traces_download_service_graph_clicked",{app:_,grafana_version:v.config.buildInfo.version,location:"inspector"}),w&&(0,x.KO)(w,G)},this.onDataFrameChange=w=>{this.setState({transformId:w.value===r.W.joinByField?r.W.joinByField:r.W.noop,dataFrameIndex:typeof w.value=="number"?w.value:0,selectedDataFrame:w.value})},this.onToggleDownloadForExcel=()=>{this.setState(w=>({downloadForExcel:!w.downloadForExcel}))},this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:r.W.noop,transformationOptions:S(),transformedData:N.data??[],downloadForExcel:!1}}componentDidUpdate(N,w){if(!this.props.data){this.setState({transformedData:[]});return}if(this.props.options.withTransforms){this.setState({transformedData:this.props.data});return}if(N.data!==this.props.data||w.transformId!==this.state.transformId){const G=this.state.transformationOptions.find(_=>_.value===this.state.transformId);if(G&&G.transformer.id!==r.W.noop){const _=this.state.selectedDataFrame,K=this.state.dataFrameIndex,k=(0,o.H)([G.transformer],this.props.data).subscribe(z=>{this.setState({transformedData:z,selectedDataFrame:_,dataFrameIndex:K},()=>k.unsubscribe())});return}this.setState({transformedData:this.props.data});return}}exportCsv(N,w){const{dataName:G}=this.props,{transformId:_}=this.state,K=N[this.state.dataFrameIndex];w&&(0,c.ff)("grafana_logs_download_clicked",{app:this.props.app,format:"csv"}),(0,x.gv)(K,G,{useExcelHeader:this.state.downloadForExcel},_)}getProcessedData(){const{options:N,panelPluginId:w,fieldConfig:G,timeZone:_}=this.props,K=this.state.transformedData;if(!N.withFieldConfig||!w||!G)return(0,g.Of)(K);const k=this.cleanTableConfigFromFieldConfig(w,G);return(0,g.SM)({data:K,theme:v.config.theme2,fieldConfig:k,timeZone:_,replaceVariables:(z,W,Z)=>(0,l.J)().replace(z,W,Z)})}cleanTableConfigFromFieldConfig(N,w){if(N!=="table")return w;w=(0,n.cloneDeep)(w),w.defaults.custom={};for(const G of w.overrides)for(const _ of G.properties)if(_.id.startsWith("custom.")){const K=G.properties.indexOf(_);G.properties.slice(K,1)}return w}renderActions(N,w,G,_){return a.createElement(a.Fragment,null,a.createElement(d.zx,{variant:"primary",onClick:()=>this.exportCsv(N,w),size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-csv"},"Download CSV")),w&&a.createElement(d.zx,{variant:"primary",onClick:this.onExportLogsAsTxt,size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-logs"},"Download logs")),G&&a.createElement(d.zx,{variant:"primary",onClick:this.onExportTracesAsJson,size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-traces"},"Download traces")),_&&a.createElement(d.zx,{variant:"primary",onClick:this.onExportServiceGraph,size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-service"},"Download service graph")))}render(){const{isLoading:N,options:w,data:G,onOptionsChange:_,hasTransformations:K}=this.props,{dataFrameIndex:k,transformationOptions:z,selectedDataFrame:W,downloadForExcel:Z}=this.state,H=(0,I.S)();if(N)return a.createElement("div",null,a.createElement(f.$,{inline:!0})," Loading");const X=this.getProcessedData();if(!X||!X.length)return a.createElement("div",null,"No Data");const Y=X[k]?k:0,ne=X[Y],se=X.some(q=>q?.meta?.preferredVisualisationType==="logs"),re=X.some(q=>q?.meta?.preferredVisualisationType==="trace"),ge=X.some(q=>q?.meta?.preferredVisualisationType==="nodeGraph");return a.createElement("div",{className:H.wrap,"aria-label":u.wl.components.PanelInspector.Data.content},a.createElement("div",{className:H.toolbar},a.createElement(M,{data:G,hasTransformations:K,options:w,dataFrames:X,transformationOptions:z,selectedDataFrame:W,downloadForExcel:Z,onOptionsChange:_,onDataFrameChange:this.onDataFrameChange,toggleDownloadForExcel:this.onToggleDownloadForExcel,actions:this.renderActions(X,se,re,ge)})),a.createElement("div",{className:H.content},a.createElement(i.Z,null,({width:q,height:me})=>q===0?null:a.createElement(m.i,{width:q,height:me,data:ne,showTypeIcons:!0}))))}}function S(){return[{value:r.W.joinByField,label:(0,E.t)("dashboard.inspect-data.transformation","Series joined by time"),transformer:{id:r.W.joinByField,options:{byField:void 0}}}]}},58837:(Q,A,e)=>{"use strict";e.d(A,{f:()=>E});var n=e(76932),a=e(31733),i=e(21568),r=e(53166),o=e(28073),g=e(85666),u=e(86850),c=e(76067);const l=({timeZone:h,name:s,stats:y})=>{const D=(0,c.l4)(),C=(0,c.wW)(f);return!y||!y.length?null:a.createElement("div",{className:C.wrapper},a.createElement("div",{className:"section-heading"},s),a.createElement("table",{className:"filter-table width-30"},a.createElement("tbody",null,y.map((P,b)=>a.createElement("tr",{key:`${P.displayName}-${b}`},a.createElement("td",null,P.displayName),a.createElement("td",{className:C.cell},d(P,h,D)))))))};function d(h,s,y){const D=(0,o.U)({field:{type:g.fS.number,config:h},theme:y,timeZone:s});return(0,u.zc)(D(h.value))}const f=h=>({wrapper:(0,n.css)`
    padding-bottom: ${h.spacing(2)};
  `,cell:(0,n.css)`
    text-align: right;
  `}),m=({name:h,traceIds:s})=>{const y=(0,c.wW)(v);return s.length===0?null:a.createElement("div",{className:y.wrapper},a.createElement("div",{className:"section-heading"},h),a.createElement("table",{className:"filter-table width-30"},a.createElement("tbody",null,s.map((D,C)=>a.createElement("tr",{key:`${D}-${C}`},a.createElement("td",null,D))))))},v=h=>({wrapper:(0,n.css)`
    padding-bottom: ${h.spacing(2)};
  `,cell:(0,n.css)`
    text-align: right;
  `}),E=({data:h,timeZone:s})=>{if(!h.request)return null;let y=[];const D=h.request.endTime?h.request.endTime-h.request.startTime:-1,C=h.timings?.dataProcessingTime||-1;let P=0;for(const I of h.series)P+=I.length;D>0&&y.push({displayName:(0,r.t)("dashboard.inspect-stats.request-time","Total request time"),value:D,unit:"ms"}),C>0&&y.push({displayName:(0,r.t)("dashboard.inspect-stats.processing-time","Data processing time"),value:C,unit:"ms"}),y.push({displayName:(0,r.t)("dashboard.inspect-stats.queries","Number of queries"),value:h.request.targets?.length??0}),y.push({displayName:(0,r.t)("dashboard.inspect-stats.rows","Total number rows"),value:P});let b=[];for(const I of h.series)I.meta&&I.meta.stats&&(b=b.concat(I.meta.stats));const T=(0,r.t)("dashboard.inspect-stats.table-title","Stats"),O=(0,r.t)("dashboard.inspect-stats.data-title","Data source stats"),R=(0,r.t)("dashboard.inspect-stats.data-traceids","Trace IDs");return a.createElement("div",{"aria-label":i.wl.components.PanelInspector.Stats.content,className:p},a.createElement(l,{timeZone:s,name:T,stats:y}),a.createElement(l,{timeZone:s,name:O,stats:b}),a.createElement(m,{name:R,traceIds:h.traceIds??[]}))},p=(0,n.css)`
  height: 100%;
  overflow-y: scroll;
`},8889:(Q,A,e)=>{"use strict";e.d(A,{D:()=>p});var n=e(76932),a=e(31733),i=e(40510),r=e(20298),o=e(21568),g=e(85498),u=e(37739),c=e(51343),l=e(5334),d=e(61375),f=e(79300),m=e(53166),v=e(41327),E=e(32950);class p extends a.PureComponent{constructor(s){super(s),this.subs=new i.w0,this.setFormattedJson=y=>{this.formattedJson=y},this.getTextForClipboard=()=>JSON.stringify(this.formattedJson,null,2),this.onToggleExpand=()=>{this.setState(y=>({...y,allNodesExpanded:!this.state.allNodesExpanded}))},this.onToggleMocking=()=>{this.setState(y=>({...y,isMocking:!this.state.isMocking}))},this.getNrOfOpenNodes=()=>this.state.allNodesExpanded===null?3:this.state.allNodesExpanded?20:1,this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",response:{}}}componentDidMount(){this.subs.add(v.ae.getInspectorStream().subscribe({next:s=>this.onDataSourceResponse(s)}))}componentDidUpdate(s){this.props.data!==s.data&&this.updateQueryList()}updateQueryList(){const{data:s}=this.props,y=s.series,D=[];if(y?.length){let C;y.forEach((P,b)=>{const T=P.meta?.executedQueryString;if(T){const O=P.refId||"?";C?.refId===O?(C.frames++,C.rows+=P.length):(C={refId:O,frames:0,rows:P.length,query:T},D.push(C))}})}this.setState({executedQueries:D})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(s){s.config?.hideFromInspector||(s={...s},s.headers&&delete s.headers,s.config&&(s.request=s.config,delete s.config,delete s.request.transformRequest,delete s.request.transformResponse,delete s.request.paramSerializer,delete s.request.jsonpCallbackParam,delete s.request.headers,delete s.request.requestId,delete s.request.inspect,delete s.request.retry,delete s.request.timeout),s.data&&(s.response=s.data,delete s.config,delete s.data,delete s.status,delete s.statusText,delete s.ok,delete s.url,delete s.redirected,delete s.type,delete s.$$config),this.setState({response:s}))}renderExecutedQueries(s){if(!s.length)return null;const y={refId:(0,n.css)`
        font-weight: ${g.config.theme.typography.weight.semibold};
        color: ${g.config.theme.colors.textBlue};
        margin-right: 8px;
      `};return a.createElement("div",null,s.map(D=>a.createElement(u.K,{key:D.refId,gap:1,direction:"column"},a.createElement("div",null,a.createElement("span",{className:y.refId},D.refId,":"),D.frames>1&&a.createElement("span",null,D.frames," frames, "),a.createElement("span",null,D.rows," rows")),a.createElement("pre",null,D.query))))}render(){const{allNodesExpanded:s,executedQueries:y,response:D}=this.state,{onRefreshQuery:C,data:P}=this.props,b=this.getNrOfOpenNodes(),T=(0,E.S)(),O=Object.keys(D).length>0,R=P.state===r.Gu.Loading;return a.createElement("div",{className:T.wrap},a.createElement("div",{"aria-label":o.wl.components.PanelInspector.Query.content},a.createElement("h3",{className:"section-heading"},"Query inspector"),a.createElement("p",{className:"small muted"},a.createElement(m.cC,{i18nKey:"inspector.query.description"},"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."))),this.renderExecutedQueries(y),a.createElement("div",{className:T.toolbar},a.createElement(c.zx,{icon:"sync",onClick:C,"aria-label":o.wl.components.PanelInspector.Query.refreshButton},a.createElement(m.cC,{i18nKey:"inspector.query.refresh"},"Refresh")),O&&s&&a.createElement(c.zx,{icon:"minus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},a.createElement(m.cC,{i18nKey:"inspector.query.collapse-all"},"Collapse all")),O&&!s&&a.createElement(c.zx,{icon:"plus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},a.createElement(m.cC,{i18nKey:"inspector.query.expand-all"},"Expand all")),O&&a.createElement(l.m,{getText:this.getTextForClipboard,className:T.toolbarItem,icon:"copy",variant:"secondary"},a.createElement(m.cC,{i18nKey:"inspector.query.copy-to-clipboard"},"Copy to clipboard")),a.createElement("div",{className:"flex-grow-1"})),a.createElement("div",{className:T.content},R&&a.createElement(d.u,{text:"Loading query inspector..."}),!R&&O&&a.createElement(f.g,{json:D,open:b,onDidRender:this.setFormattedJson}),!R&&!O&&a.createElement("p",{className:"muted"},a.createElement(m.cC,{i18nKey:"inspector.query.no-data"},"No request and response collected yet. Hit refresh button"))))}}},32950:(Q,A,e)=>{"use strict";e.d(A,{S:()=>r,i:()=>o});var n=e(76932),a=e(33227),i=e(83811);const r=(0,a.B)(()=>o(i.config.theme2)),o=g=>({wrap:(0,n.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
      flex: 1 1 0;
      min-height: 0;
    `,toolbar:(0,n.css)`
      display: flex;
      width: 100%;
      flex-grow: 0;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: ${g.v1.spacing.sm};
    `,toolbarItem:(0,n.css)`
      margin-left: ${g.v1.spacing.md};
    `,content:(0,n.css)`
      flex-grow: 1;
      height: 100%;
    `,editor:(0,n.css)`
      font-family: monospace;
      height: 100%;
      flex-grow: 1;
    `,viewer:(0,n.css)`
      overflow: scroll;
    `,dataFrameSelect:(0,n.css)`
      flex-grow: 2;
    `,leftActions:(0,n.css)`
      display: flex;
      flex-grow: 1;

      max-width: 85%;
      @media (max-width: 1345px) {
        max-width: 75%;
      }
    `,options:(0,n.css)`
      padding-top: ${g.v1.spacing.sm};
    `,dataDisplayOptions:(0,n.css)`
      flex-grow: 1;
      min-width: 300px;
      margin-right: ${g.v1.spacing.sm};
    `,selects:(0,n.css)`
      display: flex;
      > * {
        margin-right: ${g.v1.spacing.sm};
      }
    `})},31285:(Q,A,e)=>{"use strict";e.d(A,{q:()=>n});var n=(a=>(a.Data="data",a.Meta="meta",a.Error="error",a.Stats="stats",a.JSON="json",a.Query="query",a.Help="help",a))(n||{})},16636:(Q,A,e)=>{"use strict";e.d(A,{Fc:()=>d,KO:()=>m,gb:()=>v,gv:()=>f});var n=e(73386),a=e.n(n),i=e(40137),r=e(20447),o=e(67246),g=e(47862),u=e(49973),c=e(45563),l=e(67547);function d(E,p){let h="";E.meta?.forEach(D=>{const C=`${D.label}: ${JSON.stringify(D.value)}
`;h=h+C}),h=h+`

`,E.rows.forEach(D=>{const C=(0,i.dq)(D.timeEpochMs,{defaultWithMS:!0})+"	"+D.entry+`
`;h=h+C});const s=new Blob([h],{type:"text/plain;charset=utf-8"}),y=`${p}-logs-${(0,i.dq)(new Date)}.txt`;a()(s,y)}function f(E,p,h,s=r.W.noop){const y=(0,o.MJ)([E],h),D=new Blob([String.fromCharCode(65279),y],{type:"text/csv;charset=utf-8"}),C=s!==r.W.noop?"-as-"+s.toLocaleLowerCase():"",P=`${p}-data${C}-${(0,i.dq)(new Date)}.csv`;a()(D,P)}function m(E,p){const h=new Blob([JSON.stringify(E)],{type:"application/json"}),s=`${p}-${(0,i.dq)(new Date)}.json`;a()(h,s)}function v(E,p){let h="otlp";switch(E.meta?.custom?.traceFormat){case"jaeger":{let s=(0,u.c6)(new g.v(E));m(s,p),h="jaeger";break}case"zipkin":{let s=(0,l.H)(new g.v(E));m(s,p),h="zipkin";break}case"otlp":default:{let s=(0,c.g9)(new g.v(E));m(s,p);break}}return h}},59777:(Q,A,e)=>{"use strict";e.d(A,{w:()=>i});var n=e(56821),a=e(83599);function i(o){let g="";try{g=JSON.stringify(o,r(),2)}catch(u){u instanceof Error&&(u.toString().includes("RangeError")||u.toString().includes("allocation size overflow"))?a.Z.emit(n.SI.alertError,[u.toString(),"Cannot display JSON, the object is too big."]):a.Z.emit(n.SI.alertError,[u instanceof Error?u.toString():u])}return g}function r(){const o=new WeakSet;return(g,u)=>{if(g==="__dataContext"||g==="__sceneObject")return"Filtered out in JSON serialization";if(typeof u=="object"&&u!==null){if(o.has(u))return;o.add(u)}return u}}},35860:(Q,A,e)=>{"use strict";e.d(A,{GY:()=>g,MA:()=>o,nW:()=>r});var n=e(69391),a=e(75923),i=e(42342);const r=(0,i.createAsyncThunk)("users/fetchInvitees",async()=>a.Vt.hasPermission(i.AccessControlAction.OrgUsersAdd)?await(0,n.i)().get("/api/org/invites"):[]),o=(0,i.createAsyncThunk)("users/addInvitee",async(u,{dispatch:c})=>{await(0,n.i)().post("/api/org/invites",u),await c(r())}),g=(0,i.createAsyncThunk)("users/revokeInvite",async u=>(await(0,n.i)().patch(`/api/org/invites/${u}/revoke`,{}),u))},33497:(Q,A,e)=>{"use strict";e.d(A,{ZP:()=>c,selectors:()=>r});var n=e(4579),a=e(35860);const i=(0,n.HF)({selectId:l=>l.code}),r=i.getSelectors(),o=i.getInitialState({status:"idle"}),c={invites:(0,n.oM)({name:"invites",initialState:o,reducers:{},extraReducers:l=>{l.addCase(a.nW.pending,d=>{d.status="loading"}).addCase(a.nW.fulfilled,(d,{payload:f})=>{i.setAll(d,f),d.status="succeeded"}).addCase(a.nW.rejected,d=>{d.status="failed"}).addCase(a.GY.fulfilled,(d,{payload:f})=>{i.removeOne(d,f),d.status="succeeded"})}}).reducer}},96870:(Q,A,e)=>{"use strict";e.d(A,{T:()=>v,c:()=>E});var n=e(31733),a=e(24789),i=e(59326),r=e(69391),o=e(85765),g=e(64516),u=e(5572),c=e(51343),l=e(33204),d=e(53166),f=e(39501),m=e(21236);const v=({panel:p,initialFolderUid:h,onDismiss:s})=>{const[y,D]=(0,n.useState)(h),[C,P]=(0,n.useState)(p.title),[b,T]=(0,n.useState)(p.title),[O,R]=(0,n.useState)(!1);console.log("folderUid",y),(0,n.useEffect)(()=>R(!0),[C]),(0,a.Z)(()=>T(C),350,[C]);const{saveLibraryPanel:I}=(0,m.E)(),M=(0,n.useCallback)(()=>{p.libraryPanel={uid:"",name:C},I(p,y).then(S=>{(0,r.kW)(S)?p.libraryPanel=void 0:s?.()})},[p,C,y,s,I]),x=(0,i.Z)(async()=>{try{return!(await(0,f.jh)(C)).some(S=>S.folderUid===y)}catch(S){return(0,r.kW)(S)&&(S.isHandled=!0),!0}finally{R(!1)}},[b,y]);console.log("isValidName:",x);const L=!x?.value&&x.value!==void 0&&C===b&&!O;return n.createElement(n.Fragment,null,n.createElement(o.g,{label:(0,d.t)("library-panel.add-modal.name","Library panel name"),invalid:L,error:L?(0,d.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},n.createElement(g.I,{id:"share-panel-library-panel-name-input",name:"name",value:C,onChange:S=>P(S.currentTarget.value)})),n.createElement(o.g,{label:(0,d.t)("library-panel.add-modal.folder","Save in folder"),description:(0,d.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},n.createElement(l.Fz,{onChange:({uid:S})=>D(S),initialFolderUid:h,inputId:"share-panel-library-panel-folder-picker"})),n.createElement(u.u.ButtonRow,null,n.createElement(c.zx,{variant:"secondary",onClick:s,fill:"outline"},n.createElement(d.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),n.createElement(c.zx,{onClick:M,disabled:L},n.createElement(d.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},E=({isOpen:p=!1,panel:h,initialFolderUid:s,...y})=>n.createElement(u.u,{title:"Create library panel",isOpen:p,onDismiss:y.onDismiss},n.createElement(v,{panel:h,initialFolderUid:s,onDismiss:y.onDismiss}))},37061:(Q,A,e)=>{"use strict";e.d(A,{i:()=>i});var n=e(31733),a=e(90069);const i=({isOpen:r,onConfirm:o,onDismiss:g})=>n.createElement(a.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{o(),g()},onDismiss:g,isOpen:r})},3002:(Q,A,e)=>{"use strict";e.d(A,{V:()=>n});function n(a){return!!a.libraryPanel?.uid}},39501:(Q,A,e)=>{"use strict";e.d(A,{E8:()=>v,Ef:()=>m,Kq:()=>l,Mh:()=>u,Ob:()=>d,Pq:()=>g,UO:()=>f,jh:()=>c});var n=e(71892),a=e(7205),i=e(25353),r=e(41327),o=e(3876);async function g({searchString:E="",perPage:p=100,page:h=1,excludeUid:s="",sortDirection:y="",typeFilter:D=[],folderFilterUIDs:C=[]}={}){const P=new URLSearchParams;P.append("searchString",E),P.append("sortDirection",y),P.append("typeFilter",D.join(",")),P.append("folderFilterUIDs",C.join(",")),P.append("excludeUid",s),P.append("perPage",p.toString(10)),P.append("page",h.toString(10)),P.append("kind",o.V.Panel.toString(10));const{result:b}=await(0,r.i)().get(`/api/library-elements?${P.toString()}`);return b}async function u(E,p=!1){const h=await(0,n.n)((0,r.i)().fetch({method:"GET",url:`/api/library-elements/${E}`,showSuccessAlert:!p,showErrorAlert:!p})),{result:s}=h.data,y=new i.f({...a.Ql,schemaVersion:35,panels:[s.model]}),{scopedVars:D,...C}=y.panels[0].getSaveModel();return y.destroy(),{...s,model:C}}async function c(E){const{result:p}=await(0,r.i)().get(`/api/library-elements/name/${E}`);return p}async function l(E,p){const{result:h}=await(0,r.i)().post("/api/library-elements",{folderUid:p,name:E.libraryPanel.name,model:E,kind:o.V.Panel});return h}async function d(E){const{libraryPanel:p,...h}=E,{uid:s,name:y,version:D,folderUid:C}=p,P=o.V.Panel,{result:b}=await(0,r.i)().patch(`/api/library-elements/${s}`,{folderUid:C,name:y,model:h,version:D,kind:P});return b}function f(E){return(0,r.i)().delete(`/api/library-elements/${E}`)}async function m(E){const{result:p}=await(0,r.i)().get(`/api/library-elements/${E}/connections`);return p}async function v(E){const p=await m(E);return p.length===0?[]:await(0,r.i)().search({dashboardUIDs:p.map(s=>s.connectionUid)})}},3876:(Q,A,e)=>{"use strict";e.d(A,{V:()=>n});var n=(i=>(i[i.Panel=1]="Panel",i))(n||{}),a=(i=>(i[i.Dashboard=1]="Dashboard",i))(a||{})},21236:(Q,A,e)=>{"use strict";e.d(A,{E:()=>d});var n=e(74282),a=e(69391),i=e(42876),r=e(53166),o=e(39501);async function g(f,m){const v=u(f),E=await l(v,m);return c(f,E),E}function u(f){let{scopedVars:m,...v}=f.getSaveModel();return v={libraryPanel:{name:f.title,uid:void 0},...v},v}function c(f,m){f.restoreModel({...m.model,configRev:0,libraryPanel:m,title:f.title}),f.hasSavedPanelEditChange=!0,f.refresh()}function l(f,m){return f.libraryPanel?f.libraryPanel&&f.libraryPanel.uid===""?(0,o.Kq)(f,m):(0,o.Ob)(f):Promise.reject()}const d=()=>{const f=(0,i.iG)(),[m,v]=(0,n.default)(async(E,p)=>{try{const h=await g(E,p);return f.success((0,r.t)("library-panels.save.success","Library panel saved")),h}catch(h){throw(0,a.kW)(h)&&(h.isHandled=!0,f.error((0,r.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:h.message??h.data.message}))),h}},[]);return{state:m,saveLibraryPanel:v}}},48510:(Q,A,e)=>{"use strict";e.d(A,{H:()=>D});var n=e(79117),a=e(4230),i=e(56821),r=e(24035),o=e(19690),g=e(75923),u=e(74642),c=e(60490),l=e(76932),d=e(31733),f=e(76067),m=e(5572),v=e(51343),E=(C=>(C.Saved="saved",C.EditingStarted="editing-started",C.EditingCanceled="editing-cancelled",C.Deleted="deleted",C))(E||{});function p({onDismiss:C,event:P}){const b=(0,f.wW)(h),T=()=>{if(P?.action===E.Deleted){o.E1.push("/");return}D.reloadPage(),C()};return d.createElement(m.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:C,onClickBackdrop:()=>{},className:b.modal},d.createElement("div",{className:b.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),d.createElement(m.u.ButtonRow,null,d.createElement(v.zx,{onClick:C,variant:"secondary",fill:"outline"},"Continue editing"),d.createElement(v.zx,{onClick:T,variant:"destructive"},"Discard local changes")))}const h=C=>({modal:(0,l.css)({width:"600px"}),description:(0,l.css)({color:C.colors.text.secondary,paddingBottom:C.spacing(1)})}),s=(0,n.Z)();class y{constructor(){this.editing=!1,this.observer={next:P=>{if((0,a.se)(P)&&this.editing&&P.state===a.yS.Connected&&this.sendEditingState(),(0,a.RL)(P)){if(P.message.sessionId===s)return;const{action:b}=P.message;switch(b){case E.EditingStarted:case E.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const T=(0,c.h4)().getCurrent();if(T?.uid!==P.message.uid){console.log("dashboard event for different dashboard?",P,T);return}const O=this.editing||T.hasUnsavedChanges();if(b===E.Saved)O?g.h$.publish(new u.Dn({component:p,props:{event:P}})):(g.h$.emit(i.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(O&&b===E.EditingStarted&&!this.hasSeenNotice){const R=P.message,I=this.getRecentEditingEvent();(!I||I.message!==R.message)&&(this.hasSeenNotice=!0,g.h$.emit(i.SI.alertWarning,["Another session is editing this dashboard",R.message])),this.lastEditing=R}return}}}}}}setEditingState(P){const b=this.editing=P;this.editing=P,this.hasSeenNotice=!1,b&&g.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:P,uid:b}=this;P&&b&&(0,r.gj)().publish(P,{sessionId:s,uid:b,action:this.editing?E.EditingStarted:E.EditingCanceled,timestamp:Date.now()})}watch(P){const b=(0,r.gj)();b&&P!==this.uid&&(this.channel={scope:a.z.Grafana,namespace:"dashboard",path:`uid/${P}`},this.leave(),P&&(this.subscription=b.getStream(this.channel).subscribe(this.observer)),this.uid=P)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){o.E1.reload()}}const D=new y},5573:(Q,A,e)=>{"use strict";e.d(A,{A1:()=>i,g0:()=>a,iL:()=>g});var n=e(98147),a=(u=>(u.NewValuesSameSchema="NewValuesSameSchema",u.FullFrame="FullFrame",u))(a||{});const i=(u,c)=>"type"in u&&u.type===c,r=Object.values(a),o=u=>"type"in u&&r.includes(u.type),g=u=>(0,n.aY)(u)&&"packetInfo"in u},5278:(Q,A,e)=>{"use strict";e.d(A,{j:()=>o});var n=e(76932),a=e(31733),i=e(76067);const r=["level","lvl","filename"],o=({labels:u})=>{const c=(0,i.wW)(g),l=Object.keys(u).filter(d=>!d.startsWith("_")&&!r.includes(d));return l.length===0?a.createElement("span",{className:(0,n.cx)([c.logsLabels])},a.createElement("span",{className:(0,n.cx)([c.logsLabel])},"(no unique labels)")):a.createElement("span",{className:(0,n.cx)([c.logsLabels])},l.sort().map(d=>{const f=u[d];if(!f)return;const m=`${d}: ${f}`;return a.createElement("span",{key:d,className:(0,n.cx)([c.logsLabel])},a.createElement("span",{className:(0,n.cx)([c.logsLabelValue]),title:m},f))}))},g=u=>({logsLabels:(0,n.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${u.typography.size.xs};
    `,logsLabel:(0,n.css)`
      label: logs-label;
      display: flex;
      padding: ${u.spacing(0,.25)};
      background-color: ${u.colors.background.secondary};
      border-radius: ${u.shape.radius.default};
      margin: ${u.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,n.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${u.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},44900:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>l});var n=e(40184),a=e(31733),i=e(82732),r=e.n(i),o=e(8410),g=e(76067);function u(d,f){return f.split(/;\s*/).reduce((m,v)=>{if(v==="color:rgba(0,0,0,0.5)")return{color:d.colors.text.secondary};const E=v.match(/([^:\s]+)\s*:\s*(.+)/);if(E&&E[1]&&E[2]){const p=E[1].replace(/-([a-z])/g,(h,s)=>s.toUpperCase());m[p]=E[2]}return m},{})}class c extends a.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(f,m){return f.value===m.prevValue?null:{chunks:n.ZP.parse(f.value).spans.map(E=>E.css?{style:u(f.theme,E.css),text:E.text}:{text:E.text}),prevValue:f.value}}render(){const{chunks:f}=this.state;return f.map((m,v)=>{const E=this.props.highlight?.searchWords?a.createElement(r(),{key:v,textToHighlight:m.text,searchWords:this.props.highlight.searchWords,findChunks:o.Xt,highlightClassName:this.props.highlight.highlightClassName}):m.text;return m.style?a.createElement("span",{key:v,style:m.style,"data-testid":"ansiLogLine"},E):E})}}const l=(0,g.HE)(c);l.displayName="LogMessageAnsi"},78923:(Q,A,e)=>{"use strict";e.d(A,{t:()=>c});var n=e(31733),a=e(91977),i=e(84912),r=e(5333),o=e(41354),g=e(5334),u=e(83811);const c=n.memo(({logText:l,onOpenContext:d,onPermalinkClick:f,onPinLine:m,onUnpinLine:v,pinned:E,row:p,showContextToggle:h,styles:s,mouseIsOver:y,onBlur:D,getRowContextQuery:C})=>{const P=h?h(p):!1,b=(0,n.useCallback)(I=>{I.stopPropagation()},[]),T=(0,n.useCallback)(async I=>{if(I.stopPropagation(),C&&(I.nativeEvent.ctrlKey||I.nativeEvent.metaKey||I.nativeEvent.shiftKey)){const M=window.open("about:blank"),x=await C(p,void 0,!1);if(x&&M){const L=a.Cj.renderUrl(i.u.assureBaseUrl(`${(0,u.iE)().appSubUrl}explore`),{left:JSON.stringify({datasource:x.datasource,queries:[x],range:(0,r.JK)()})});M.location=L;return}M?.close()}d(p)},[d,C,p]),O=(0,n.useCallback)(I=>{!I.currentTarget.contains(I.relatedTarget)&&D&&D()},[D]),R=(0,n.useCallback)(()=>l,[l]);return n.createElement("span",{className:`log-row-menu ${s.rowMenu}`,onClick:b,onBlur:O},E&&!y&&n.createElement(o.h,{className:s.unPinButton,size:"md",name:"gf-pin",onClick:()=>v&&v(p),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),y&&n.createElement(n.Fragment,null,P&&n.createElement(o.h,{size:"md",name:"gf-show-context",onClick:T,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),n.createElement(g.m,{className:s.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:R,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),E&&v&&n.createElement(o.h,{className:s.unPinButton,size:"md",name:"gf-pin",onClick:()=>v&&v(p),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!E&&m&&n.createElement(o.h,{className:s.unPinButton,size:"md",name:"gf-pin",onClick:()=>m&&m(p),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),f&&p.rowId!==void 0&&p.uid&&n.createElement(o.h,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>f(p),tabIndex:0})))});c.displayName="LogRowMenuCell"},2178:(Q,A,e)=>{"use strict";e.d(A,{n:()=>u,r:()=>d});var n=e(31733),a=e(82732),i=e.n(a),r=e(8410),o=e(44900),g=e(78923);const u=1e5,c=({hasAnsi:f,entry:m,highlights:v,styles:E})=>{const p=v&&v.length>0&&v[0]&&v[0].length>0&&m.length<u,h=v??[];if(f){const s=p?{searchWords:h,highlightClassName:E.logsRowMatchHighLight}:void 0;return n.createElement(o.Q,{value:m,highlight:s})}else if(p)return n.createElement(i(),{textToHighlight:m,searchWords:h,findChunks:r.Xt,highlightClassName:E.logsRowMatchHighLight});return n.createElement(n.Fragment,null,m)},l=(f,m)=>{if(m)try{return JSON.stringify(JSON.parse(f),void 0,2)}catch{return f}return f},d=n.memo(f=>{const{row:m,wrapLogMessage:v,prettifyLogMessage:E,showContextToggle:p,styles:h,onOpenContext:s,onPermalinkClick:y,onUnpinLine:D,onPinLine:C,pinned:P,mouseIsOver:b,onBlur:T,getRowContextQuery:O}=f,{hasAnsi:R,raw:I}=m,M=(0,n.useMemo)(()=>l(I,E),[I,E]),x=(0,n.useMemo)(()=>b||P,[b,P]);return n.createElement(n.Fragment,null,n.createElement("td",{className:h.logsRowMessage},n.createElement("div",{className:v?h.positionRelative:h.horizontalScroll},n.createElement("button",{className:`${h.logLine} ${h.positionRelative}`},n.createElement(c,{hasAnsi:R,entry:M,highlights:m.searchWords,styles:h})))),n.createElement("td",{className:`log-row-menu-cell ${h.logRowMenuCell}`},x&&n.createElement(g.t,{logText:M,row:m,showContextToggle:p,getRowContextQuery:O,onOpenContext:s,onPermalinkClick:y,onPinLine:C,onUnpinLine:D,pinned:P,styles:h,mouseIsOver:b,onBlur:T})))});d.displayName="LogRowMessage"},23044:(Q,A,e)=>{"use strict";e.d(A,{w:()=>q});var n=e(76932),a=e(90093),i=e(31733),r=e(44343),o=e(71199),g=e(85498),u=e(76067),c=e(64704),l=e(63424),d=e(40641);const f=({x:me,y:oe,onClickFilterValue:fe,onClickFilterOutValue:ve,selection:pe,row:Me,close:Pe})=>{const Ee=(0,i.useRef)(null),he=(0,u.wW)(v);return(0,i.useEffect)(()=>{function ke(ot){ot.key==="Escape"&&Pe()}return document.addEventListener("keyup",ke),()=>{document.removeEventListener("keyup",ke)}},[Pe]),fe||ve?i.createElement("div",{className:he.menu,style:{top:oe,left:me}},i.createElement(l.v,{ref:Ee},i.createElement(l.v.Item,{label:"Copy selection",onClick:()=>{(0,d.zp)(pe,Ee),Pe(),m("copy",pe.length,Me.datasourceType)}}),fe&&i.createElement(l.v.Item,{label:"Add as line contains filter",onClick:()=>{fe(pe,Me.dataFrame.refId),Pe(),m("line_contains",pe.length,Me.datasourceType)}}),ve&&i.createElement(l.v.Item,{label:"Add as line does not contain filter",onClick:()=>{ve(pe,Me.dataFrame.refId),Pe(),m("line_does_not_contain",pe.length,Me.datasourceType)}}))):null};function m(me,oe,fe){(0,c.ff)("grafana_explore_logs_popover_menu",{action:me,selectionLength:oe,datasourceType:fe||"unknown"})}const v=me=>({menu:(0,n.css)({position:"absolute",zIndex:me.zIndex.modal})});class E{constructor(){this.seen=new Set,this.count=0}getKey(oe){this.count+=1;const fe=`k_${oe}`;return this.seen.has(fe)?`i_${this.count}`:(this.seen.add(fe),fe)}}var p=e(69781),h=e(40137),s=e(58037),y=e(49311),D=e(86347),C=e(5334),P=e(41354),b=e(92515),T=e(76597),O=e(33227);const R=me=>({logsStatsRow:(0,n.css)`
    label: logs-stats-row;
    margin: ${parseInt(me.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,n.css)`
    label: logs-stats-row--active;
    color: ${me.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,n.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,n.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,n.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${me.spacing(.75)};
  `,logsStatsRowPercent:(0,n.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${me.spacing(.75)};
    width: ${me.spacing(4.5)};
  `,logsStatsRowBar:(0,n.css)`
    label: logs-stats-row__bar;
    height: ${me.spacing(.5)};
    overflow: hidden;
    background: ${me.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,n.css)`
    label: logs-stats-row__innerbar;
    height: ${me.spacing(.5)};
    overflow: hidden;
    background: ${me.colors.primary.main};
  `}),I=({active:me,count:oe,proportion:fe,value:ve})=>{const pe=(0,u.wW)(R),Me=`${Math.round(fe*100)}%`,Pe={width:Me},Ee=me?(0,n.cx)([pe.logsStatsRow,pe.logsStatsRowActive]):(0,n.cx)([pe.logsStatsRow]);return i.createElement("div",{className:Ee},i.createElement("div",{className:(0,n.cx)([pe.logsStatsRowLabel])},i.createElement("div",{className:(0,n.cx)([pe.logsStatsRowValue]),title:ve},ve),i.createElement("div",{className:(0,n.cx)([pe.logsStatsRowCount])},oe),i.createElement("div",{className:(0,n.cx)([pe.logsStatsRowPercent])},Me)),i.createElement("div",{className:(0,n.cx)([pe.logsStatsRowBar])},i.createElement("div",{className:(0,n.cx)([pe.logsStatsRowInnerBar]),style:Pe})))};I.displayName="LogLabelStatsRow";const M=5,x=(0,O.B)(me=>({logsStats:(0,n.css)`
      label: logs-stats;
      background: inherit;
      color: ${me.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,n.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${me.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,n.css)`
      label: logs-stats__title;
      font-weight: ${me.typography.fontWeightMedium};
      padding-right: ${me.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,n.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,n.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class L extends i.PureComponent{render(){const{label:oe,rowCount:fe,stats:ve,value:pe,theme:Me,isLabel:Pe}=this.props,Ee=x(Me),he=ve.slice(0,M);let Le=he.find(Ae=>Ae.value===pe),ke=ve.slice(M);const ot=!Le;ot&&(Le=ke.find(Ae=>Ae.value===pe),ke=ke.filter(Ae=>Ae.value!==pe));const it=ke.reduce((Ae,Oe)=>Ae+Oe.count,0),le=he.reduce((Ae,Oe)=>Ae+Oe.count,0)+it,Re=it/le;return i.createElement("div",{className:Ee.logsStats,"data-testid":"logLabelStats"},i.createElement("div",{className:Ee.logsStatsHeader},i.createElement("div",{className:Ee.logsStatsTitle},oe,": ",le," of ",fe," rows have that ",Pe?"label":"field")),i.createElement("div",{className:Ee.logsStatsBody},he.map(Ae=>i.createElement(I,{key:Ae.value,...Ae,active:Ae.value===pe})),ot&&Le&&i.createElement(I,{key:Le.value,...Le,active:!0}),it>0&&i.createElement(I,{key:"__OTHERS__",count:it,value:"Other",proportion:Re})))}}const S=(0,u.HE)(L);S.displayName="LogLabelStats";var U=e(71498);const N=(0,a.Z)(me=>({wordBreakAll:(0,n.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,n.css)`
      & > button {
        color: ${me.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${me.shape.radius.circle};
        height: ${me.spacing(me.components.height.sm)};
        width: ${me.spacing(me.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${me.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,n.css)`
      margin-left: ${me.spacing(1)};
    `,wrapLine:(0,n.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,n.css)`
      padding: 0 ${me.spacing(1)};
    `,logDetailsValue:(0,n.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .log-details-value-copy {
        visibility: hidden;
      }
      &:hover {
        .log-details-value-copy {
          visibility: visible;
        }
      }
    `,buttonRow:(0,n.css)`
      display: flex;
      flex-direction: row;
      gap: ${me.spacing(.5)};
      margin-left: ${me.spacing(.5)};
    `}));class w extends i.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:oe,parsedKeys:fe,row:ve}=this.props;oe&&oe(fe[0]),(0,c.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ve.datasourceType,logRowUid:ve.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:oe,parsedKeys:fe,row:ve}=this.props;oe&&oe(fe[0]),(0,c.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ve.datasourceType,logRowUid:ve.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:oe,parsedKeys:fe,parsedValues:ve,row:pe}=this.props;return oe?await oe(fe[0],ve[0],pe.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:oe,parsedKeys:fe,parsedValues:ve,row:pe}=this.props;oe&&oe(fe[0],ve[0],(0,T.Tx)(pe)||void 0),(0,c.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:pe.datasourceType,filterType:"include",logRowUid:pe.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:oe,parsedKeys:fe,parsedValues:ve,row:pe}=this.props;oe&&oe(fe[0],ve[0],(0,T.Tx)(pe)||void 0),(0,c.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:pe.datasourceType,filterType:"exclude",logRowUid:pe.uid})},this.updateStats=()=>{const{getStats:oe}=this.props,fe=oe(),ve=fe?fe.reduce((pe,Me)=>pe+Me.count,0):0;(!(0,p.isEqual)(this.state.fieldStats,fe)||ve!==this.state.fieldCount)&&this.setState({fieldStats:fe,fieldCount:ve})},this.showStats=()=>{const{isLabel:oe,row:fe,app:ve}=this.props,{showFieldsStats:pe}=this.state;pe||this.updateStats(),this.toggleFieldsStats(),(0,c.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:fe.datasourceType,fieldType:oe?"label":"detectedField",type:pe?"close":"open",logRowUid:fe.uid,app:ve})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(oe=>({showFieldsStats:!oe.showFieldsStats}))}generateClipboardButton(oe){const{theme:fe}=this.props,ve=N(fe);return i.createElement("div",{className:`log-details-value-copy ${ve.copyButton}`},i.createElement(C.m,{getText:()=>oe,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(oe,fe){return i.createElement("table",null,i.createElement("tbody",null,oe?.map((ve,pe)=>i.createElement("tr",{key:`${ve}-${pe}`},i.createElement("td",null,ve,fe&&ve!==""&&this.generateClipboardButton(ve))))))}render(){const{theme:oe,parsedKeys:fe,parsedValues:ve,isLabel:pe,links:Me,displayedFields:Pe,wrapLogMessage:Ee,onClickFilterLabel:he,onClickFilterOutLabel:Le,disableActions:ke,row:ot}=this.props,{showFieldsStats:it,fieldStats:ce,fieldCount:le}=this.state,Re=N(oe),Ae=(0,U.h)(oe),Oe=fe==null?!1:fe.length===1,$e=ve==null?!1:ve.length===1,Ye=!ke&&he&&Le,Ne=ot.dataFrame?.refId?` in query ${ot.dataFrame?.refId}`:"",je=!$e&&ve!=null&&!ve.every(Fe=>Fe===""),ut=Pe&&fe!=null&&Pe.includes(fe[0])?i.createElement(P.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):i.createElement(P.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return i.createElement(i.Fragment,null,i.createElement("tr",{className:Ae.logDetailsValue},i.createElement("td",{className:Ae.logsDetailsIcon},i.createElement("div",{className:Re.buttonRow},Ye&&i.createElement(i.Fragment,null,i.createElement(G,{name:"search-plus",onClick:this.filterLabel,isActive:this.isFilterLabelActive,tooltipSuffix:Ne}),i.createElement(P.h,{name:"search-minus",tooltip:`Filter out value${Ne}`,onClick:this.filterOutLabel})),!ke&&Pe&&ut,!ke&&i.createElement(P.h,{variant:it?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!Oe,onClick:this.showStats}))),i.createElement("td",{className:Ae.logDetailsLabel},Oe?fe[0]:this.generateMultiVal(fe)),i.createElement("td",{className:(0,n.cx)(Re.wordBreakAll,Ee&&Re.wrapLine)},i.createElement("div",{className:Re.logDetailsValue},$e?ve[0]:this.generateMultiVal(ve,!0),$e&&this.generateClipboardButton(ve[0]),i.createElement("div",{className:(0,n.cx)(($e||je)&&Re.adjoiningLinkButton)},Me?.map((Fe,Te)=>i.createElement("span",{key:`${Fe.title}-${Te}`},i.createElement(b.k,{link:Fe}))))))),it&&Oe&&$e&&i.createElement("tr",null,i.createElement("td",null,i.createElement(P.h,{variant:it?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),i.createElement("td",{colSpan:2},i.createElement("div",{className:Re.logDetailsStats},i.createElement(S,{stats:ce,label:fe[0],value:ve[0],rowCount:le,isLabel:pe})))))}}const G=({isActive:me,tooltipSuffix:oe,...fe})=>{const[ve,pe]=(0,i.useState)(!1),Me=ve?"Remove filter":"Filter for value";return me().then(pe),i.createElement(P.h,{...fe,variant:ve?"primary":void 0,tooltip:Me+oe})},_=(0,u.HE)(w);_.displayName="LogDetailsRow";var K=e(72071);class k extends i.PureComponent{render(){const{app:oe,row:fe,theme:ve,hasError:pe,onClickFilterOutLabel:Me,onClickFilterLabel:Pe,getRows:Ee,showDuplicates:he,className:Le,onClickShowField:ke,onClickHideField:ot,displayedFields:it,getFieldLinks:ce,wrapLogMessage:le,styles:Re}=this.props,Ae=(0,U.p)(ve,fe.logLevel),Oe=fe.labels?fe.labels:{},$e=Object.keys(Oe).length>0,Ye=(0,K.YD)(fe,ce);let Ne=Ye.filter(J=>J.links?.length);const je=Ne.filter(J=>J.fieldIndex!==fe.entryFieldIndex).sort(),ut=Ne.filter(J=>J.fieldIndex===fe.entryFieldIndex).sort(),Fe=(0,K.DC)(ut),Te=je&&je.length>0||Fe&&Fe.length>0,Ve=fe.dataFrame.meta?.type===D.P.LogLines?[]:Ye.filter(J=>J.links?.length===0&&J.fieldIndex!==fe.entryFieldIndex).sort(),tt=Ve&&Ve.length>0,ae=pe?"":`${Ae.logsRowLevelColor} ${Re.logsRowLevel} ${Re.logsRowLevelDetails}`;return i.createElement("tr",{className:(0,n.cx)(Le,Re.logDetails)},he&&i.createElement("td",null),i.createElement("td",{className:ae,"aria-label":"Log level"}),i.createElement("td",{colSpan:4},i.createElement("div",{className:Re.logDetailsContainer},i.createElement("table",{className:Re.logDetailsTable},i.createElement("tbody",null,($e||tt)&&i.createElement("tr",null,i.createElement("td",{colSpan:100,className:Re.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(Oe).sort().map((J,te)=>{const de=Oe[J];return i.createElement(_,{key:`${J}=${de}-${te}`,parsedKeys:[J],parsedValues:[de],isLabel:!0,getStats:()=>(0,d.lL)(Ee(),J),onClickFilterOutLabel:Me,onClickFilterLabel:Pe,onClickShowField:ke,onClickHideField:ot,row:fe,app:oe,wrapLogMessage:le,displayedFields:it,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Ve.map((J,te)=>{const{keys:de,values:be,fieldIndex:De}=J;return i.createElement(_,{key:`${de[0]}=${be[0]}-${te}`,parsedKeys:de,parsedValues:be,onClickShowField:ke,onClickHideField:ot,onClickFilterOutLabel:Me,onClickFilterLabel:Pe,getStats:()=>(0,d.i6)(fe.dataFrame.fields[De].values),displayedFields:it,wrapLogMessage:le,row:fe,app:oe,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Te&&i.createElement("tr",null,i.createElement("td",{colSpan:100,className:Re.logDetailsHeading,"aria-label":"Data Links"},"Links")),je.map((J,te)=>{const{keys:de,values:be,links:De,fieldIndex:Ue}=J;return i.createElement(_,{key:`${de[0]}=${be[0]}-${te}`,parsedKeys:de,parsedValues:be,links:De,onClickShowField:ke,onClickHideField:ot,getStats:()=>(0,d.i6)(fe.dataFrame.fields[Ue].values),displayedFields:it,wrapLogMessage:le,row:fe,app:oe,disableActions:!1})}),Fe?.map((J,te)=>{const{keys:de,values:be,links:De,fieldIndex:Ue}=J;return i.createElement(_,{key:`${de[0]}=${be[0]}-${te}`,parsedKeys:de,parsedValues:be,links:De,onClickShowField:ke,onClickHideField:ot,getStats:()=>(0,d.i6)(fe.dataFrame.fields[Ue].values),displayedFields:it,wrapLogMessage:le,row:fe,app:oe,disableActions:!0})}),!tt&&!$e&&!Te&&i.createElement("tr",null,i.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const z=(0,u.HE)(k);z.displayName="LogDetails";var W=e(5278),Z=e(2178),H=e(78923);const X=i.memo(me=>{const{row:oe,detectedFields:fe,getFieldLinks:ve,wrapLogMessage:pe,styles:Me,mouseIsOver:Pe,pinned:Ee,...he}=me,Le=(0,K.YD)(oe,ve),ke=pe?"":Y.noWrap,ot=(0,i.useMemo)(()=>fe.map(ce=>{const le=Le.find(Re=>{const{keys:Ae}=Re;return Ae[0]===ce});return le!=null?`${ce}=${le.values}`:oe.labels[ce]!==void 0&&oe.labels[ce]!==null?`${ce}=${oe.labels[ce]}`:null}).filter(ce=>ce!==null).join(" "),[fe,Le,oe.labels]),it=(0,i.useMemo)(()=>Pe||Ee,[Pe,Ee]);return i.createElement(i.Fragment,null,i.createElement("td",{className:Me.logsRowMessage},i.createElement("div",{className:ke},ot)),i.createElement("td",{className:`log-row-menu-cell ${Me.logRowMenuCell}`},it&&i.createElement(H.t,{logText:ot,row:oe,styles:Me,pinned:Ee,mouseIsOver:Pe,...he})))}),Y={noWrap:(0,n.css)`
    white-space: nowrap;
  `};X.displayName="LogRowMessageDisplayedFields";class ne extends i.PureComponent{constructor(oe){super(oe),this.state={permalinked:!1,showingContext:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,p.debounce)(()=>{this.setState({showingContext:!1})},3e3),this.onOpenContext=fe=>{this.setState({showingContext:!0}),this.props.onOpenContext(fe,this.debouncedContextClose)},this.onRowClick=fe=>{this.props.handleTextSelection?.(fe,this.props.row)||this.props.enableLogDetails&&((0,c.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(ve=>({showDetails:!ve.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseMove=fe=>{this.props.handleTextSelection&&document.getSelection()?.toString()&&fe.buttons>0&&this.setState({mouseIsOver:!1})},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(fe,ve=!1)=>{const{row:pe,permalinkedRowId:Me,scrollIntoView:Pe,containerRendered:Ee}=this.props;if(Me!==pe.uid){(fe.permalinked||ve)&&this.setState({permalinked:!1});return}!this.state.permalinked&&Ee&&this.logLineRef.current&&Pe&&(Pe(this.logLineRef.current),(0,c.ff)("grafana_explore_logs_permalink_opened",{datasourceType:pe.datasourceType??"unknown",logRowUid:pe.uid}),this.setState({permalinked:!0}))},this.escapeRow=(0,a.Z)((fe,ve)=>fe.hasUnescapedContent&&ve?{...fe,entry:(0,d.l3)(fe.entry),raw:(0,d.l3)(fe.raw)}:fe),this.logLineRef=i.createRef()}renderTimeStamp(oe){return(0,h.dq)(oe,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(oe,fe){this.scrollToLogRow(fe)}render(){const{getRows:oe,onClickFilterLabel:fe,onClickFilterOutLabel:ve,onClickShowField:pe,onClickHideField:Me,enableLogDetails:Pe,row:Ee,showDuplicates:he,showContextToggle:Le,showLabels:ke,showTime:ot,displayedFields:it,wrapLogMessage:ce,prettifyLogMessage:le,theme:Re,getFieldLinks:Ae,forceEscape:Oe,app:$e,styles:Ye,getRowContextQuery:Ne}=this.props,{showDetails:je,showingContext:ut,permalinked:Fe}=this.state,Te=(0,U.p)(Re,Ee.logLevel),{errorMessage:Ve,hasError:tt}=(0,d.Mi)(Ee),ae=(0,n.cx)(Ye.logsRow,{[Ye.errorLogRow]:tt,[Ye.highlightBackground]:ut||Fe}),J=(0,n.cx)(Ye.logsRow,{[Ye.errorLogRow]:tt,[Ye.highlightBackground]:Fe&&!this.state.showDetails}),te=this.escapeRow(Ee,Oe);return i.createElement(i.Fragment,null,i.createElement("tr",{ref:this.logLineRef,className:ae,onClick:this.onRowClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onFocus:this.onMouseEnter},he&&i.createElement("td",{className:Ye.logsRowDuplicates},te.duplicates&&te.duplicates>0?`${te.duplicates+1}x`:null),i.createElement("td",{className:tt?"":`${Te.logsRowLevelColor} ${Ye.logsRowLevel}`},tt&&i.createElement(s.u,{content:`Error: ${Ve}`,placement:"right",theme:"error"},i.createElement(y.J,{className:Ye.logIconError,name:"exclamation-triangle",size:"xs"}))),Pe&&i.createElement("td",{title:je?"Hide log details":"See log details",className:Ye.logsRowToggleDetails},i.createElement(y.J,{className:Ye.topVerticalAlign,name:je?"angle-down":"angle-right"})),ot&&i.createElement("td",{className:Ye.logsRowLocalTime},this.renderTimeStamp(Ee.timeEpochMs)),ke&&te.uniqueLabels&&i.createElement("td",{className:Ye.logsRowLabels},i.createElement(W.j,{labels:te.uniqueLabels})),it&&it.length>0?i.createElement(X,{row:te,showContextToggle:Le,detectedFields:it,getFieldLinks:Ae,wrapLogMessage:ce,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:Ye,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave}):i.createElement(Z.r,{row:te,showContextToggle:Le,getRowContextQuery:Ne,wrapLogMessage:ce,prettifyLogMessage:le,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:$e,styles:Ye,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave})),this.state.showDetails&&i.createElement(z,{className:J,showDuplicates:he,getFieldLinks:Ae,onClickFilterLabel:fe,onClickFilterOutLabel:ve,onClickShowField:pe,onClickHideField:Me,getRows:oe,row:te,wrapLogMessage:ce,hasError:tt,displayedFields:it,app:$e,styles:Ye,isFilterLabelActive:this.props.isFilterLabelActive}))}}const se=(0,u.HE)(ne);se.displayName="LogRow";const re=100;class ge extends i.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.logRowsRef=(0,i.createRef)(),this.state={renderAll:!1,selection:"",selectedRow:null,popoverMenuCoordinates:{x:0,y:0}},this.openContext=(oe,fe)=>{this.props.onOpenContext&&this.props.onOpenContext(oe,fe)},this.handleSelection=(oe,fe)=>{if(this.popoverMenuSupported()===!1)return!1;const ve=document.getSelection()?.toString();if(!ve||!this.logRowsRef.current)return!1;const pe=this.logRowsRef.current?.getBoundingClientRect();return this.setState({selection:ve,popoverMenuCoordinates:{x:oe.clientX-pe.left,y:oe.clientY-pe.top},selectedRow:fe}),document.addEventListener("click",this.handleDeselection),document.addEventListener("contextmenu",this.handleDeselection),!0},this.handleDeselection=oe=>{if((0,d.RN)(oe.target)&&!this.logRowsRef.current?.contains(oe.target)){this.closePopoverMenu();return}document.getSelection()?.toString()||this.closePopoverMenu()},this.closePopoverMenu=()=>{document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.setState({selection:"",popoverMenuCoordinates:{x:0,y:0},selectedRow:null})},this.makeGetRows=(0,a.Z)(oe=>()=>oe),this.sortLogs=(0,a.Z)((oe,fe)=>(0,d.$u)(oe,fe))}popoverMenuSupported(){return!g.config.featureToggles.logRowsPopoverMenu||this.props.app!==r.zj.Explore?!1:!!(this.props.onClickFilterOutValue||this.props.onClickFilterValue)}componentDidMount(){const{logRows:oe,previewLimit:fe}=this.props,pe=(oe?oe.length:0)<=fe*2;pe?this.setState({renderAll:pe}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:oe,logRows:fe,dedupStrategy:ve,theme:pe,logsSortOrder:Me,previewLimit:Pe,...Ee}=this.props,{renderAll:he}=this.state,Le=(0,U.h)(pe),ke=oe||fe,ot=fe&&fe.length>0,it=ke?ke.reduce((Ne,je)=>je.duplicates?Ne+je.duplicates:Ne,0):0,ce=ve!==o.Y4.none&&it>0,le=ke||[],Re=Me?this.sortLogs(le,Me):le,Ae=Re.slice(0,Pe),Oe=Re.slice(Pe,Re.length),$e=this.makeGetRows(Re),Ye=new E;return i.createElement("div",{className:Le.logRows,ref:this.logRowsRef},this.state.selection&&this.state.selectedRow&&i.createElement(f,{close:this.closePopoverMenu,row:this.state.selectedRow,selection:this.state.selection,...this.state.popoverMenuCoordinates,onClickFilterValue:Ee.onClickFilterValue,onClickFilterOutValue:Ee.onClickFilterOutValue}),i.createElement("table",{className:(0,n.cx)(Le.logsRowsTable,this.props.overflowingContent?"":Le.logsRowsTableContain)},i.createElement("tbody",null,ot&&Ae.map(Ne=>i.createElement(se,{key:Ye.getKey(Ne.uid),getRows:$e,row:Ne,showDuplicates:ce,logsSortOrder:Me,onOpenContext:this.openContext,styles:Le,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Ne.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...Ee})),ot&&he&&Oe.map(Ne=>i.createElement(se,{key:Ye.getKey(Ne.uid),getRows:$e,row:Ne,showDuplicates:ce,logsSortOrder:Me,onOpenContext:this.openContext,styles:Le,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Ne.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...Ee})),ot&&!he&&i.createElement("tr",null,i.createElement("td",{colSpan:5},"Rendering ",Re.length-Pe," rows...")))))}}ge.defaultProps={previewLimit:re};const q=(0,u.HE)(ge);q.displayName="LogsRows"},71498:(Q,A,e)=>{"use strict";e.d(A,{h:()=>l,p:()=>c});var n=e(76932),a=e(90093),i=e(37479),r=e(68387),o=e(77081),g=e(85498),u=e(83998);const c=(d,f)=>{let m=d.isLight?d.v1.palette.gray5:d.v1.palette.gray2;switch(f){case r.in.crit:case r.in.critical:m="#705da0";break;case r.in.error:case r.in.err:m="#e24d42";break;case r.in.warning:case r.in.warn:m=d.colors.warning.main;break;case r.in.info:m="#7eb26d";break;case r.in.debug:m="#1f78c1";break;case r.in.trace:m="#6ed0e0";break}return{logsRowLevelColor:(0,n.css)`
      &::after {
        background-color: ${m};
      }
    `}},l=(0,a.Z)(d=>{const f=u.hoverColor(d.colors.background.secondary,d),m=(0,i.Z)(d.components.dashboard.background).setAlpha(.7).toRgbString(),v=g.config.featureToggles.exploreScrollableLogsContainer;return{logsRowLevel:(0,n.css)`
      label: logs-row__level;
      max-width: ${d.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${d.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,n.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${d.components.textHighlight.text}
      background-color: ${d.components.textHighlight};
    `,logRows:(0,n.css)({position:"relative"}),logsRowsTable:(0,n.css)`
      label: logs-rows;
      font-family: ${d.typography.fontFamilyMonospace};
      font-size: ${d.typography.bodySmall.fontSize};
      width: 100%;
      ${!v&&`margin-bottom: ${d.spacing(2.25)};`}
      position: relative;
    `,logsRowsTableContain:(0,n.css)`
      contain: strict;
    `,highlightBackground:(0,n.css)`
      background-color: ${(0,i.Z)(d.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,n.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${f};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${d.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,n.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,n.css)`
      color: ${d.colors.warning.main};
    `,logsRowToggleDetails:(0,n.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,n.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,n.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,n.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,n.css)`
      padding: 0 0 0 ${d.spacing(.5)};
      height: ${d.spacing(3)};
      width: ${d.spacing(3.25)};
      line-height: ${d.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${o.alpha(d.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,n.css)`
      label: logs-row-details-table;
      border: 1px solid ${d.colors.border.medium};
      padding: 0 ${d.spacing(1)} ${d.spacing(1)};
      border-radius: ${d.shape.radius.default};
      margin: ${d.spacing(2.5)} ${d.spacing(1)} ${d.spacing(2.5)} ${d.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,n.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,n.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${d.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${d.spacing(.75)};
    `,logDetailsLabel:(0,n.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${d.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,n.css)`
      label: logs-row-details__heading;
      font-weight: ${d.typography.fontWeightBold};
      padding: ${d.spacing(1)} 0 ${d.spacing(.5)};
    `,logDetailsValue:(0,n.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${f};
      }
    `,topVerticalAlign:(0,n.css)`
      label: topVerticalAlign;
      margin-top: -${d.spacing(.9)};
      margin-left: -${d.spacing(.25)};
    `,detailsOpen:(0,n.css)`
      &:hover {
        background-color: ${u.hoverColor(d.colors.background.primary,d)};
      }
    `,errorLogRow:(0,n.css)`
      label: erroredLogRow;
      color: ${d.colors.text.secondary};
    `,positionRelative:(0,n.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,n.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${m};
      display: inherit;
    `,horizontalScroll:(0,n.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,n.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,n.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${d.colors.background.primary};
      box-shadow: ${d.shadows.z3};
      padding: ${d.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${d.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,n.css)`
      position: sticky;
      z-index: ${d.zIndex.dropdown};
      margin-top: -${d.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,n.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${d.typography.fontFamilyMonospace};
      font-size: ${d.typography.bodySmall.fontSize};
      letter-spacing: ${d.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,n.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,n.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${d.colors.background.primary};
      }
    `,visibleRowMenu:(0,n.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,n.css)`
      label: linkButton;
      > button {
        padding-top: ${d.spacing(.5)};
      }
    `,hidden:(0,n.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,n.css)`
      height: ${d.spacing(3)};
      line-height: ${d.spacing(2.5)};
    `}})},72071:(Q,A,e)=>{"use strict";e.d(A,{B2:()=>c,DC:()=>u,YD:()=>g});var n=e(69781),a=e.n(n),i=e(90093),r=e(82866),o=e(28982);const g=(0,i.Z)((f,m)=>{const v=c(f,m);return Object.values(v)}),u=(0,i.Z)(f=>{let m=[];return f.forEach(v=>{v.links?.forEach(E=>{if(E.variables){const p=E.variables.map(s=>{const y=s.variableName,D=s.fieldPath?`.${s.fieldPath}`:"";return`${y}${D}`}),h=E.variables.map(s=>s.found?s.value:"");m.push({keys:p,values:h,links:[E],fieldIndex:v.fieldIndex})}})}),m}),c=(0,i.Z)((f,m)=>d(f.dataFrame).visible.filter(p=>p.values[f.rowIndex]!=null).map(p=>{const h=m?m(p,f.rowIndex,f.dataFrame):[],s=p.values[f.rowIndex],y=typeof s=="string"||typeof s=="number"?s.toString():(0,r.Xh)(s);return{keys:[p.name],values:[y],links:h,fieldIndex:p.index}}));function l(f,m){const v=(0,o.L)(f);if(v===null)return new Set;const E=new Set(v.extraFields.map(p=>p.index));return v.severityField!==null&&E.add(v.severityField.index),m.keepBody&&E.add(v.bodyField.index),m.keepTimestamp&&E.add(v.timeField.index),E}function d(f,m){const v=f.fields.map((s,y)=>({...s,index:y})),E=l(f,m??{}),[p,h]=(0,n.partition)(v,s=>s.config.custom?.hidden?!1:(s.config.links??[]).length>0?!0:E.has(s.index));return{visible:p,hidden:h}}},28982:(Q,A,e)=>{"use strict";e.d(A,{m:()=>v,L:()=>p});var n=e(47023),a=e(85666),i=e(86347);function r(h,s){const y=h.labels;if(y!==void 0){const D=new Array(s);return D.fill(y),D}else return null}function o(h,s,y){const D=h.getFieldByName("labels");if(D!==void 0&&D.type===a.fS.other){const C=D.values.map(v);return[D,()=>C]}else return[null,()=>r(s,y.length)]}function g(h){const s=new n.N(h),y=s.getFirstFieldOfType(a.fS.time),D=s.getFirstFieldOfType(a.fS.string);if(y===void 0||D===void 0)return null;const C=s.getFieldByName("tsNs")??null,P=s.getFieldByName("level")??null,b=s.getFieldByName("id")??null,[T,O]=o(s,D,h),R=s.fields.filter((I,M)=>M!==y.index&&M!==D.index&&M!==C?.index&&M!==P?.index&&M!==b?.index&&M!==T?.index);return{timeField:y,bodyField:D,timeNanosecondField:C,severityField:P,idField:b,getLogFrameLabels:O,getLogFrameLabelsAsLabels:O,getLabelFieldName:()=>T?.name??null,extraFields:R}}function u(h,s,y){const D=h.getFieldByName(s);if(D!==void 0)return D.type===y?D:void 0}const c="timestamp",l="body",d="severity",f="id",m="labels";function v(h){const s={};return Object.entries(h).forEach(([y,D])=>{s[y]=typeof D=="string"?D:JSON.stringify(D)}),s}function E(h){const s=new n.N(h),y=u(s,c,a.fS.time),D=u(s,l,a.fS.string);if(y===void 0||D===void 0)return null;const C=u(s,d,a.fS.string)??null,P=u(s,f,a.fS.string)??null,b=u(s,m,a.fS.other)??null,T=b===null?null:b.values,O=s.fields.filter((R,I)=>I!==y.index&&I!==D.index&&I!==C?.index&&I!==P?.index&&I!==b?.index);return{timeField:y,bodyField:D,severityField:C,idField:P,getLogFrameLabels:()=>T,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>T!==null?T.map(v):null,getLabelFieldName:()=>b!==null?b.name:null,extraFields:O}}function p(h){return h.meta?.type===i.P.LogLines?E(h):g(h)}},76597:(Q,A,e)=>{"use strict";e.d(A,{Qp:()=>R,aB:()=>z,UW:()=>G,nu:()=>_,Tx:()=>me,Nw:()=>K,Ce:()=>ge,Bz:()=>re});var n=e(69781),a=e(71156),i=e(34193),r=e(57298),o=e(68387),g=e(71199),u=e(98147),c=e(47023),l=e(85666),d=e(91507),f=e(74011),m=e(84479),v=e(98827),E=e(40137),p=e(17201),h=e(20298),s=e(34668),y=e(63956),D=e(40184),C=e(83811);function P(oe,fe){return C.default.bootData?.user?.lightTheme?fe:oe}var b=e(28982),T=e(40641);const O="Line limit",R="Common labels",I={[o.in.critical]:y.O9[7],[o.in.warning]:y.O9[1],[o.in.error]:y.O9[4],[o.in.info]:y.O9[0],[o.in.debug]:y.O9[5],[o.in.trace]:y.O9[2],[o.in.unknown]:P("#8e8e8e","#bdc4cd")},M=1,x=1e3*M,L=60*x,S=60*L,U=24*S,N=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function w(oe,fe,ve){switch(ve){case g.Y4.exact:return oe.entry.replace(N,"")===fe.entry.replace(N,"");case g.Y4.numbers:return oe.entry.replace(/\d/g,"")===fe.entry.replace(/\d/g,"");case g.Y4.signature:return oe.entry.replace(/\w/g,"")===fe.entry.replace(/\w/g,"");default:return!1}}function G(oe,fe){return fe===g.Y4.none?oe:oe.reduce((ve,pe,Me)=>{const Pe={...pe},Ee=ve[ve.length-1];return Me>0&&w(pe,Ee,fe)?Ee.duplicates++:(Pe.duplicates=0,ve.push(Pe)),ve},[])}function _(oe,fe){return fe.size===0?oe:oe.filter(ve=>!fe.has(ve.logLevel))}function K(oe,fe){const ve={},pe=[];for(const Me of oe){let Pe=ve[Me.logLevel];Pe||(ve[Me.logLevel]=Pe={lastTs:null,datapoints:[],target:Me.logLevel,color:I[Me.logLevel]},pe.push(Pe));const Ee=Math.floor(Me.timeEpochMs/fe)*fe;Ee===Pe.lastTs?Pe.datapoints[Pe.datapoints.length-1][0]++:(Pe.datapoints.push([1,Ee]),Pe.lastTs=Ee);for(const he of pe)he!==Pe&&he.lastTs!==Ee&&(he.datapoints.push([0,Ee]),he.lastTs=Ee)}return pe.map((Me,Pe)=>{Me.datapoints.sort((ke,ot)=>ke[1]-ot[1]);const Ee=(0,u.g0)(Me),Le=new c.N(Ee).getFirstFieldOfType(l.fS.number);return Ee.fields[Le.index].config.min=0,Ee.fields[Le.index].config.decimals=0,Ee.fields[Le.index].config.color={mode:d.S.Fixed,fixedColor:Me.color},Ee.fields[Le.index].config.custom={drawStyle:g.l8.Bars,barAlignment:g.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:Me.color,pointColor:Me.color,fillColor:Me.color,lineWidth:0,fillOpacity:100,stacking:{mode:g.o0.Normal,group:"A"}},Ee})}function k(oe){return oe.fields.some(fe=>fe.type===l.fS.time)&&oe.fields.some(fe=>fe.type===l.fS.string)}function z(oe,fe,ve,pe){const{logSeries:Me}=Z(oe),Pe=X(Me,pe);if(Pe){if(fe&&Pe.rows.length>0){const Ee=Pe.rows.sort(T.DA),{visibleRange:he,bucketSize:Le,visibleRangeMs:ke,requestedRangeMs:ot}=W(Ee,fe,ve);Pe.visibleRange=he,Pe.bucketSize=Le,Pe.series=K(Ee,Le),Pe.meta&&(Pe.meta=Y(Pe,ke,ot))}else Pe.series=[];return Pe.queries=pe,Pe}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:pe}}function W(oe,fe,ve,pe=20,Me=1e3){let Pe=ve,Ee=fe,he=Math.max(Ee*pe,Me),Le,ke;if(ve){const ot=oe[0].timeEpochMs;if(ke=ve.to-ve.from,Le=ve.to-ot,Le>0){const it=Le/ke;Ee*=it,he=Math.max(Math.ceil(Ee*pe),Me),Pe={from:Math.floor(ot/he)*he,to:ve.to}}else Le=1}return{bucketSize:he,visibleRange:Pe,visibleRangeMs:Le,requestedRangeMs:ke}}function Z(oe){const fe=[],ve=[];for(const pe of oe){if(k(pe)||!pe.fields.length){ve.push(pe);continue}pe.length>0&&fe.push(pe)}return{logSeries:ve,metricSeries:fe}}function H(oe,fe,ve){const pe=oe.values[ve],Pe=(0,f.zh)(pe).valueOf();if(fe)return{ts:pe,timeEpochMs:Pe,timeEpochNs:fe.values[ve]};if(oe.nanos!==void 0){const Ee=oe.nanos[ve].toString().padStart(6,"0"),he=`${Pe}${Ee}`;return{ts:pe,timeEpochMs:Pe,timeEpochNs:he}}return{ts:pe,timeEpochMs:Pe,timeEpochNs:Pe+"000000"}}function X(oe,fe=[]){if(oe.length===0)return;const ve=[];let pe=[];const Me=oe.filter(Oe=>Oe.fields.length);Me.length&&Me.forEach(Oe=>{const $e=(0,b.L)(Oe);if($e!=null){const Ye=$e.getLogFrameLabelsAsLabels()??void 0,Ne={rawFrame:Oe,logsFrame:$e,frameLabels:Ye};pe.push(Ne),Ye&&Ye.length>0&&ve.push(Ye)}});const Pe=ve.flat(),Ee=Pe.length>0?(0,m.FT)(Pe):{},he=[];let Le=!1;for(const Oe of pe){const{logsFrame:$e,rawFrame:Ye,frameLabels:Ne}=Oe,{timeField:je,timeNanosecondField:ut,bodyField:Fe,severityField:Te,idField:Ve}=$e;for(let tt=0;tt<Ye.length;tt++){const{ts:ae,timeEpochMs:J,timeEpochNs:te}=H(je,ut??void 0,tt),de=Fe.values[tt]??"",be=typeof de=="string"?de:JSON.stringify(de),De=v.QX.hasAnsiCodes(be),Ue=!!be.match(/\\n|\\t|\\r/),We=Ye.meta?.custom?.searchWords??Ye.meta?.searchWords??[],et=De?D._J.strip(be):be,ze=Ne?.[tt],_e=(0,m.IU)(ze,Ee);Object.keys(_e).length>0&&(Le=!0);let qe=o.in.unknown;const at=Te&&Te.values[tt]||ze&&ze.level;at?qe=(0,T.jx)(at):qe=(0,T.ZO)(et);const lt=fe.find(yt=>yt.refId===Ye.refId)?.datasource?.type,ft={entryFieldIndex:Fe.index,rowIndex:tt,dataFrame:Ye,logLevel:qe,timeFromNow:(0,E.E8)(ae),timeEpochMs:J,timeEpochNs:te,timeLocal:(0,E.dq)(ae,{timeZone:"browser"}),timeUtc:(0,E.dq)(ae,{timeZone:"utc"}),uniqueLabels:_e,hasAnsi:De,hasUnescapedContent:Ue,searchWords:We,entry:et,raw:be,labels:ze||{},uid:`${Ye.refId}_${Ve?Ve.values[tt]:tt.toString()}`,datasourceType:lt};Ve!==null&&(ft.rowId=Ve.values[tt]),he.push(ft)}}const ke=[];(0,n.size)(Ee)>0&&ke.push({label:R,value:Ee,kind:o.Ku.LabelsMap});const it=oe.filter(Oe=>Oe?.meta?.custom?.limit??Oe?.meta?.limit).reduce((Oe,$e)=>(Oe[$e.refId??""]=$e.meta?.custom?.limit??$e.meta?.limit??0,Oe),{}),ce=Object.values(it).reduce((Oe,$e)=>Oe+=$e,0);ce>0&&ke.push({label:O,value:ce,kind:o.Ku.Number});let le=0;const Re={};let Ae=!1;for(const Oe of oe){const $e=Oe.meta?.custom?.lokiQueryStatKey,{refId:Ye}=Oe;if(!Ae&&Oe.meta?.custom?.error&&(ke.push({label:"",value:Oe.meta?.custom.error,kind:o.Ku.Error}),Ae=!0),Ye&&!Re[Ye]){if($e&&Oe.meta?.stats){const Ne=Oe.meta.stats.find(je=>je.displayName===$e);Ne&&(le+=Ne.value)}Re[Ye]=!0}}if(le>0){const{text:Oe,suffix:$e}=(0,s.i7)("B")(le);ke.push({label:"Total bytes processed",value:`${Oe} ${$e}`,kind:o.Ku.String})}return{hasUniqueLabels:Le,meta:ke,rows:he}}function Y(oe,fe,ve){let pe=[...oe.meta];const Me=pe.findIndex(Ee=>Ee.label===O),Pe=Me>=0&&pe[Me]?.value;if(Pe&&typeof Pe=="number"&&Pe>0){let Ee;if(Pe===oe.rows.length&&fe&&ve){const he=(fe/ve*100).toFixed(2);Ee=`${Pe} reached, received logs cover ${he}% (${p.msRangeToTimeString(fe)}) of your selected time range (${p.msRangeToTimeString(ve)})`}else Ee=`${Pe} (${oe.rows.length} returned)`;pe[Me]={label:O,value:Ee,kind:o.Ku.String}}return pe}function ne(oe,fe){const ve=fe&&oe===o.in.unknown?"logs":oe,pe=I[oe];return{displayNameFromDS:ve,color:{mode:d.S.Fixed,fixedColor:pe},custom:{drawStyle:g.l8.Bars,barAlignment:g.pu.Center,lineColor:pe,pointColor:pe,fillColor:pe,lineWidth:1,fillOpacity:100,stacking:{mode:g.o0.Normal,group:"A"}}}}const se=(oe,fe,ve)=>(oe.fields=oe.fields.map(pe=>(pe.type===l.fS.number&&(pe.config={...pe.config,...ne(fe(oe),ve)}),pe)),oe);function re(oe,fe,ve){const pe=ve.range.to.valueOf()-ve.range.from.valueOf(),Me=q(fe.scopedVars,pe);return fe.interval=Me.interval,fe.scopedVars.__interval={value:Me.interval,text:Me.interval},Me.intervalMs!==void 0&&(fe.intervalMs=Me.intervalMs,fe.scopedVars.__interval_ms={value:Me.intervalMs,text:Me.intervalMs}),fe.hideFromInspector=!0,new a.y(Pe=>{let Ee=[];Pe.next({state:h.Gu.Loading,error:void 0,data:[]});const he=oe.query(fe),ke=((0,i.b)(he)?he:(0,r.D)(he)).subscribe({complete:()=>{Pe.complete()},next:ot=>{const{error:it}=ot;if(it!==void 0)Pe.next({state:h.Gu.Error,error:it,data:[]}),Pe.error(it);else{const ce=(0,n.groupBy)(ot.data,"refId");Ee=ot.data.map(le=>{if(le.meta?.dataTopic===g.w5.Annotations)return le;let Re=le.refId||"";Re.startsWith("log-volume-")&&(Re=Re.substr(11));const Ae={logsVolumeType:o.o8.FullRange,absoluteRange:{from:ve.range.from.valueOf(),to:ve.range.to.valueOf()},datasourceName:oe.name,sourceQuery:ve.targets.find(Oe=>Oe.refId===Re)};return le.meta={...le.meta,custom:{...le.meta?.custom,...Ae}},se(le,ve.extractLevel,ce[le.refId].length===1)}),Pe.next({state:ot.state,error:void 0,data:Ee})}},error:ot=>{Pe.next({state:h.Gu.Error,error:ot,data:[]}),Pe.error(ot)}});return()=>{ke?.unsubscribe()}})}function ge(oe,fe){return fe.hideFromInspector=!0,new a.y(ve=>{let pe=[];ve.next({state:h.Gu.Loading,error:void 0,data:[]});const Me=oe.query(fe),Ee=((0,i.b)(Me)?Me:(0,r.D)(Me)).subscribe({complete:()=>{ve.next({state:h.Gu.Done,error:void 0,data:pe}),ve.complete()},next:he=>{const{error:Le}=he;Le!==void 0?(ve.next({state:h.Gu.Error,error:Le,data:[]}),ve.error(Le)):pe=he.data.map(ke=>{const ot=(0,u.g0)(ke),{timeIndex:it}=(0,u.sV)(ot);return(0,u.aK)(ot,it)})},error:he=>{ve.next({state:h.Gu.Error,error:he,data:[]}),ve.error(he)}});return()=>{Ee?.unsubscribe()}})}function q(oe,fe){if(oe.__interval_ms){let ve=oe.__interval_ms.value,pe="";return fe<x*5?(ve=M,pe="1ms"):ve>S?(ve=U,pe="1d"):ve>L?(ve=S,pe="1h"):ve>x?(ve=L,pe="1m"):(ve=x,pe="1s"),{interval:pe,intervalMs:ve}}else return{interval:"$__interval"}}function me(oe){const fe=oe.dataFrame;return fe.length===0||fe.length<=oe.rowIndex?null:(0,u.at)({fields:fe.fields.map(pe=>({...pe,values:[pe.values[oe.rowIndex]]})),refId:fe.refId})}},40641:(Q,A,e)=>{"use strict";e.d(A,{$u:()=>s,DA:()=>E,Di:()=>C,FP:()=>O,Js:()=>T,Mi:()=>y,RN:()=>I,ZO:()=>l,_c:()=>b,hY:()=>P,i6:()=>m,j0:()=>h,jx:()=>d,l3:()=>D,lL:()=>f,zp:()=>R});var n=e(69781),a=e.n(n),i=e(68387),r=e(71199),o=e(47023),g=e(85666),u=e(47862),c=e(72071);function l(M){if(!M)return i.in.unknown;let x=i.in.unknown,L;for(const[S,U]of Object.entries(i.in)){const w=new RegExp(`\\b${S}\\b`,"i").exec(M);w&&(L===void 0||w.index<L)&&(x=U,L=w.index)}return x}function d(M){const x=i.in[M.toString().toLowerCase()];return x||i.in.unknown}function f(M,x){const L=M.filter(N=>N.labels[x]!==void 0),S=L.length,U=(0,n.countBy)(L,N=>N.labels[x]);return v(U,S)}function m(M){const x=M.filter(S=>S!=null),L=(0,n.countBy)(x);return v(L,x.length)}const v=(M,x)=>(0,n.chain)(M).map((L,S)=>({count:L,value:S,proportion:L/x})).sortBy("count").reverse().value(),E=(M,x)=>M.timeEpochMs<x.timeEpochMs?-1:M.timeEpochMs>x.timeEpochMs?1:M.timeEpochNs<x.timeEpochNs?-1:M.timeEpochNs>x.timeEpochNs?1:0,p=(M,x)=>M.timeEpochMs>x.timeEpochMs?-1:M.timeEpochMs<x.timeEpochMs?1:M.timeEpochNs>x.timeEpochNs?-1:M.timeEpochNs<x.timeEpochNs?1:0,h=(M,x)=>{const L=M?s(M.rows,x):[];return M?{...M,rows:L}:{hasUniqueLabels:!1,rows:L}},s=(M,x)=>x===r.UV.Ascending?M.sort(E):M.sort(p),y=M=>M.labels.__error__?{hasError:!0,errorMessage:M.labels.__error__}:{hasError:!1},D=M=>M.replace(/\\r\\n|\\n|\\t|\\r/g,x=>x.slice(1)==="t"?"	":`
`);function C(M){return M.map(x=>{const L=(0,c.B2)(x).reduce((S,U)=>{const N=U.keys[0];return S[N]=U.values[0],S},{});return{line:x.entry,timestamp:x.timeEpochNs,fields:{...L,...x.labels}}})}const P=M=>{let x={from:1/0,to:-1/0};return M.forEach(L=>{const S=L.meta?.custom||{};S.absoluteRange?.from&&S.absoluteRange?.to&&(x={from:Math.min(x.from,S.absoluteRange.from),to:Math.max(x.to,S.absoluteRange.to)})}),x},b=M=>{if(M.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const x={},L={};let S=-1/0;const U={};let N=[];return M.forEach(w=>{const G=new o.N(w),_=G.getFirstFieldOfType(g.fS.time),K=G.getFirstFieldOfType(g.fS.number);if(!_)throw new Error("Missing time field");if(!K)throw new Error("Missing value field");const k=K.config.displayNameFromDS||w.name||"logs",z=K.values.length;U[k]={meta:w.meta,valueFieldConfig:K.config,timeFieldConfig:_.config};for(let W=0;W<z;W++){const Z=_.values[W],H=K.values[W];x[k]??={},x[k][Z]=(x[k][Z]||0)+H,L[Z]=(L[Z]||0)+H,S=Math.max(L[Z],S)}}),Object.keys(x).forEach(w=>{const G=new u.v,{meta:_,timeFieldConfig:K,valueFieldConfig:k}=U[w];G.name=w,G.meta=_,G.addField({name:"Time",type:g.fS.time,config:K}),G.addField({name:"Value",type:g.fS.number,config:k}),Object.entries(x[w]).sort((z,W)=>Number(z[0])-Number(W[0])).forEach(([z,W])=>{G.add({Time:Number(z),Value:W})}),N.push(G)}),{dataFrames:N,maximum:S}},T=M=>{const x=M[0]?.meta?.custom;return x&&x.datasourceName?{name:x.datasourceName}:null},O=M=>M[0]?.meta?.custom?.logsVolumeType===i.o8.Limited,R=async(M,x)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(M);{const L=document.createElement("textarea");x.current?.appendChild(L),L.value=M,L.focus(),L.select(),document.execCommand("copy"),L.remove()}};function I(M){return M instanceof Element}},29852:(Q,A,e)=>{"use strict";e.d(A,{N:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(90069);const o=({title:c})=>{const l=(0,i.wW)(u);return a.createElement("p",{className:l.description},c?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},g=({dashboardTitle:c,onConfirm:l,onDismiss:d})=>a.createElement(r.s,{isOpen:!0,body:a.createElement(o,{title:c}),onConfirm:l,onDismiss:d,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),u=c=>({title:(0,n.css)`
    margin-bottom: ${c.spacing(1)};
  `,description:(0,n.css)`
    font-size: ${c.typography.body.fontSize};
  `})},8239:(Q,A,e)=>{"use strict";e.d(A,{t:()=>r});var n=e(4502);class a extends Error{constructor(g,u){super(u),this.type=g}}class i{constructor(){this.rootName="general"}validateNewDashboardName(g,u){return this.validate(g,u,"A dashboard or a folder with the same name already exists")}validateNewFolderName(g){return this.validate(this.rootName,g,"A folder or dashboard in the general folder with the same name already exists")}async validate(g,u,c){u=(u||"").trim();const l=u.toLowerCase();if(u.length===0)throw new a("REQUIRED","Name is required");if(l===this.rootName)throw new a("EXISTING","This is a reserved name and cannot be used for a folder.");const f=await(0,n.getGrafanaSearcher)().search({kind:["dashboard"],query:u,location:g||"general"});for(const m of f.view)if(l===m.name.toLowerCase())throw new a("EXISTING",c)}}const r=new i},51450:(Q,A,e)=>{"use strict";e.d(A,{$j:()=>b,EW:()=>_,L6:()=>S,Pb:()=>G,ZL:()=>w,iM:()=>K,nQ:()=>v,q_:()=>m,uC:()=>x,ys:()=>P});var n=e(84912),a=e(69391),i=e(19690),r=e(66261),o=e(7939),g=e(42876),u=e(48510),c=e(42342),l=e(39501),d=e(3876),f=e(4554);function m(z){return async W=>{try{W((0,f.AK)());const Z=await(0,a.i)().get(`/api/gnet/dashboards/${z}`);await W(D(Z.json)),await W(h(Z)),W(y())}catch(Z){W((0,f.eh)()),(0,a.kW)(Z)&&W((0,o.$l)((0,g.t_)(Z.data.message||Z)))}}}function v(z){return async W=>{await W(D(z)),await W(s(z)),W(y())}}const E=(z,W)=>z?.usage?.libraryPanels?.filter(Z=>W.inputs.libraryPanels.some(H=>H.state!==f.KQ.Exists&&H.model.uid===Z.uid));function p(z,W){let Z=z.__inputs;if(W.inputs.libraryPanels?.length){const H=[];z.__inputs?.forEach(X=>{if(!X?.usage?.libraryPanels){H.push(X);return}const Y=E(X,W);X.usage={libraryPanels:Y},!!Y?.length&&H.push(X)}),Z=H}return{...z,__inputs:Z}}function h(z){return(W,Z)=>{const H=Z().importDashboard,X=p(z.json,H);W((0,f.S9)({...z,json:X}))}}function s(z){return(W,Z)=>{const H=Z().importDashboard,X=p(z,H);W((0,f.Nw)(X))}}function y(){return(z,W)=>{const Z=W().importDashboard.dashboard;if(Z&&Z.__inputs){const H=[];Z.__inputs.forEach(X=>{const Y={name:X.name,label:X.label,info:X.description,value:X.value,type:X.type,pluginId:X.pluginId,options:[]};Y.description=O(X),X.type===f.n$.DataSource?T(X,Y):Y.info||(Y.info="Specify a string constant"),H.push(Y)}),z((0,f.Zc)(H))}}}function D(z){return async function(W){const Z=await C(z);W((0,f.C2)(Z))}}async function C(z){if(!z||!z.__elements)return[];const W=[];for(const Z of Object.values(z.__elements)){if(Z.kind!==d.V.Panel)continue;const H=Z.model,{type:X,description:Y}=H,{uid:ne,name:se}=Z,re={model:{model:H,uid:ne,name:se,version:0,type:X,kind:d.V.Panel,description:Y},state:f.KQ.New};try{const ge=await(0,l.Mh)(ne,!0);re.state=f.KQ.Exists,re.model=ge}catch(ge){if(ge.status!==404)throw ge}W.push(re)}return W}function P(){return z=>{z((0,f.MO)())}}function b(z){return async(W,Z)=>{const H=Z().importDashboard.dashboard,X=Z().importDashboard.inputs;let Y=[];z.dataSources?.forEach((re,ge)=>{const q=X.dataSources[ge];Y.push({name:q.name,type:q.type,pluginId:q.pluginId,value:re.uid})}),z.constants?.forEach((re,ge)=>{const q=X.constants[ge];Y.push({value:re,name:q.name,type:q.type})});const ne=await(0,a.i)().post("api/dashboards/import",{dashboard:{...H,title:z.title,uid:z.uid||H.uid},overwrite:!0,inputs:Y,folderUid:z.folder.uid}),se=n.u.stripBaseFromUrl(ne.importedUrl);i.E1.push(se)}}const T=(z,W)=>{(0,r.F)().getList({pluginId:z.pluginId}).length===0?W.info="No data sources of type "+z.pluginName+" found":W.info||(W.info="Select a "+z.pluginName+" data source")},O=z=>{if(z.usage&&z.usage.libraryPanels)return`List of affected library panels: ${z.usage.libraryPanels.reduce((Z,H,X)=>X===0?H.name:`${Z}, ${H.name}`,"")}`};async function R(z,W){const Z={totalCount:z.length,successCount:0};for(const H of z)try{await U(H,W)!==null&&(Z.successCount+=1)}catch(X){console.error("Failed to move a folder",X)}return Z}function I(z,W,...Z){return async H=>{try{const X=await z(...Z);return Array.prototype.concat(H,[X])}catch(X){if(W)return H;throw X}}}function M(z,W){const Z=[];for(const H of z)Z.push(I(L,!0,H,!0));for(const H of W)Z.push(I(K,!0,H,!0));return k(Z)}function x(z){return u.H.ignoreNextSave(),(0,a.i)().post("/api/dashboards/db/",{dashboard:z.dashboard,message:z.message??"",overwrite:z.overwrite??!1,folderUid:z.folderUid})}function L(z,W){return getBackendSrv().delete(`/api/folders/${z}?forceDeleteRules=false`,void 0,{showSuccessAlert:W})}function S(z){return(0,a.i)().post("/api/folders",z)}function U(z,W){const Z={parentUid:W.uid};return getBackendSrv().post(`/api/folders/${z}/move`,Z,{showErrorAlert:!1})}const N=1e3;function w(z,W,Z=c.SearchQueryType.Folder){return(0,a.i)().get("/api/search",{query:z,type:Z,permission:W,limit:N})}function G(z){return(0,a.i)().get(`/api/folders/${z}`)}function _(z){return(0,a.i)().get(`/api/folders/id/${z}`)}function K(z,W){return(0,a.i)().delete(`/api/dashboards/uid/${z}`,{showSuccessAlert:W})}function k(z){return z.reduce((W,Z)=>Promise.resolve(W).then(Z),[])}},4554:(Q,A,e)=>{"use strict";e.d(A,{AK:()=>E,C2:()=>m,G7:()=>i,KQ:()=>o,MO:()=>c,Nw:()=>f,S9:()=>d,ZP:()=>h,Zc:()=>l,eh:()=>v,n$:()=>r,wg:()=>g});var n=e(4579),a=e(20298),i=(s=>(s[s.Gcom=0]="Gcom",s[s.Json=1]="Json",s))(i||{}),r=(s=>(s.DataSource="datasource",s.Constant="constant",s.LibraryPanel="libraryPanel",s))(r||{}),o=(s=>(s.New="new",s.Exists="exists",s.Different="different",s))(o||{});const g={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:a.Gu.NotStarted},u=(0,n.oM)({name:"manageDashboards",initialState:g,reducers:{setGcomDashboard:(s,y)=>{s.dashboard={...y.payload.json,id:null},s.meta={updatedAt:y.payload.updatedAt,orgName:y.payload.orgName},s.source=0,s.state=a.Gu.Done},setJsonDashboard:(s,y)=>{s.dashboard={...y.payload,id:null},s.meta=g.meta,s.source=1,s.state=a.Gu.Done},clearDashboard:s=>{s.dashboard={},s.state=a.Gu.NotStarted},setInputs:(s,y)=>{s.inputs={dataSources:y.payload.filter(D=>D.type==="datasource"),constants:y.payload.filter(D=>D.type==="constant"),libraryPanels:s.inputs.libraryPanels||[]}},setLibraryPanelInputs:(s,y)=>{s.inputs.libraryPanels=y.payload},fetchFailed:s=>{s.dashboard={},s.state=a.Gu.Error},fetchDashboard:s=>{s.state=a.Gu.Loading}}}),{clearDashboard:c,setInputs:l,setGcomDashboard:d,setJsonDashboard:f,setLibraryPanelInputs:m,fetchFailed:v,fetchDashboard:E}=u.actions,h={importDashboard:u.reducer}},18645:(Q,A,e)=>{"use strict";e.d(A,{FV:()=>o,JE:()=>c,Q$:()=>g,RF:()=>r,Yi:()=>u});var n=e(69391),a=e(7939),i=e(27276);function r(l={getBackendSrv:n.i}){return async d=>{const f=await l.getBackendSrv().get("/api/org");return d((0,i.jR)(f)),f}}function o(l={getBackendSrv:n.i}){return async(d,f)=>{const m=f().organization.organization;await l.getBackendSrv().put("/api/org",{name:m.name}),d((0,a.H7)(m.name)),d(r(l))}}function g(l,d={getBackendSrv:n.i}){return async f=>{const m=await d.getBackendSrv().post("/api/user/using/"+l);f((0,a.H7)(m.name))}}function u(l,d={getBackendSrv:n.i}){return async f=>{const m=await d.getBackendSrv().post("/api/orgs/",l);f(g(m.orgId))}}function c(l={getBackendSrv:n.i}){return async d=>{const f=await l.getBackendSrv().get("/api/user/orgs");return d((0,i.IM)(f)),f}}},27276:(Q,A,e)=>{"use strict";e.d(A,{IM:()=>g,ZP:()=>c,jR:()=>o,xR:()=>r});var n=e(4579);const a={organization:{},userOrgs:[]},i=(0,n.oM)({name:"organization",initialState:a,reducers:{organizationLoaded:(l,d)=>({...l,organization:d.payload}),setOrganizationName:(l,d)=>({...l,organization:{...l.organization,name:d.payload}}),userOrganizationsLoaded:(l,d)=>({...l,userOrgs:d.payload})}}),{setOrganizationName:r,organizationLoaded:o,userOrganizationsLoaded:g}=i.actions,c={organization:i.reducer}},76757:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>h});var n=e(76932),a=e(31733),i=e(55632),r=e(44343),o=e(19690),g=e(76067),u=e(43348),c=e(42775),l=e(21279),d=e(39357),f=e(90300),m=e(46536),v=e(60490),E=e(42342),p=e(2507);function h(D){const C=(0,g.wW)(y),P=(0,u.R9)(),b=new i.mi(D.data),{dataSummary:T}=b,O=s(D,T),R=(0,E.useDispatch)(),I=(0,v.h4)().getCurrent()?.getPanelById(D.panelId),M=()=>{d.Z.setObject(l.FL,m.Ok.Suggestions),R((0,f.g_)(!0))},x=()=>{I&&R((0,p.Kc)({panel:I,pluginId:"table"}))},L=S=>{I&&(R((0,p.Kc)({...S,panel:I})),S.transformations&&setTimeout(()=>{o.E1.partial({tab:"transform"})},100))};return a.createElement("div",{className:C.wrapper},a.createElement("div",{className:C.message},O),P.app===r.zj.PanelEditor&&T.hasData&&I&&a.createElement("div",{className:C.actions},D.suggestions&&a.createElement(a.Fragment,null,D.suggestions.map(S=>a.createElement(c.x,{key:S.name,icon:"process",onClick:()=>L(S)},S.name))),a.createElement(c.x,{icon:"table",onClick:x},"Switch to table"),a.createElement(c.x,{icon:"chart-line",onClick:M},"Open visualization suggestions")))}function s({data:D,fieldConfig:C,message:P,needsNumberField:b,needsTimeField:T,needsStringField:O},R){return P||(!D.series||D.series.length===0||D.series.every(I=>I.length===0)?C?.defaults.noValue??"No data":O&&!R.hasStringField?"Data is missing a string field":b&&!R.hasNumberField?"Data is missing a number field":T&&!R.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const y=D=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,n.css)({textAlign:"center",color:D.colors.text.secondary,fontSize:D.typography.size.lg,width:"100%"}),actions:(0,n.css)({marginTop:D.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:D.spacing(1),rowGap:D.spacing(1),width:"100%",maxWidth:"600px"})})},103:(Q,A,e)=>{"use strict";e.d(A,{F:()=>u,X:()=>c});var n=e(31733),a=e(42439),i=e(59889),r=e(25111),o=e(42342);class g extends n.PureComponent{constructor(d){super(d)}render(){const d={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return n.createElement("div",{style:d},n.createElement(r.b,{severity:o.AppNotificationSeverity.Error,...this.props}))}}function u(l,d){const f=class extends n.PureComponent{render(){const E=n.createElement(n.Fragment,null,"Check the server startup logs for more information. ",n.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return n.createElement(g,{title:`Error loading: ${l.id}`,text:E})}},m=new a.c(f);return m.meta=l,m.loadError=!0,m}function c(l,d){const f=class extends n.PureComponent{render(){return n.createElement(g,{title:`Panel plugin not found: ${l}`})}},m=new a.c(d?()=>null:f);return m.meta={id:l,name:l,sort:100,type:i.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},m}},66883:(Q,A,e)=>{"use strict";e.d(A,{$:()=>v});var n=e(31733),a=e(88822),i=e(19596),r=e(35210),o=e(87877),g=e(61129),u=e(76067),c=e(43348),l=e(8310),d=e(75923),f=e(33521);const m={defaults:{},overrides:[]};function v(p){const{pluginId:h,data:s,timeZone:y=(0,a.Z)(),options:D={},width:C,height:P,title:b,onOptionsChange:T=()=>{},onChangeTimeRange:O=()=>{},onFieldConfigChange:R=()=>{},fieldConfig:I=m}=p,M=(0,u.l4)(),x=(0,g.J)(),L=(0,n.useMemo)(()=>x.replace.bind(x),[x]),[S,U]=(0,n.useState)((0,f.q1)(h)),[N,w]=(0,n.useState)(),G=E(S,D,I),{dataLinkPostProcessor:_}=(0,c.R9)(),K=(0,i.Cc)(S,G?.fieldConfig,s,y,M,L,_);if((0,n.useEffect)(()=>{S&&S.hasPluginId(h)||(0,f.Ub)(h).then(z=>U(z)).catch(z=>{w(z.message)})},[h,S]),N)return n.createElement("div",null,"Failed to load plugin: ",N);if(!S||!S.hasPluginId(h))return n.createElement("div",null,"Loading plugin panel...");if(!S.panel)return n.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!K)return n.createElement("div",null,"No panel data");const k=S.panel;return n.createElement(l.z4,{dependencies:[S,s]},n.createElement(r.b,{meta:S.meta},n.createElement(k,{id:1,data:K,title:b,timeRange:K.timeRange,timeZone:y,options:G.options,fieldConfig:I,transparent:!1,width:C,height:P,renderCounter:0,replaceVariables:z=>z,onOptionsChange:T,onFieldConfigChange:R,onChangeTimeRange:O,eventBus:d.h$})))}function E(p,h,s){return(0,n.useMemo)(()=>{if(p)return(0,o.d4)({plugin:p,currentOptions:h,currentFieldConfig:s,isAfterPluginChange:!1})},[p,s,h])}},73213:(Q,A,e)=>{"use strict";e.d(A,{X:()=>p});var n=e(76932),a=e(31733),i=e(49876),r=e(59889),o=e(64562),g=e(21568),u=e(76067),c=e(41354),l=e(22525),d=e(95885),f=e(51767);const m=38,v=({isCurrent:D,title:C,plugin:P,onClick:b,onDelete:T,disabled:O,showBadge:R,description:I,children:M})=>{const x=(0,u.wW)(s),L=O||P.state===r.BV.deprecated,S=(0,n.cx)({[x.item]:!0,[x.itemDisabled]:L,[x.current]:D});return a.createElement("div",{className:S,"aria-label":g.wl.components.PluginVisualization.item(P.name),"data-testid":g.wl.components.PluginVisualization.item(P.name),onClick:L?void 0:b,title:D?"Click again to close this section":P.name},a.createElement("img",{className:(0,n.cx)(x.img,{[x.disabled]:L}),src:P.info.logos.small,alt:""}),a.createElement("div",{className:(0,n.cx)(x.itemContent,{[x.disabled]:L})},a.createElement("div",{className:x.name},C),I?a.createElement("span",{className:x.description},I):null,M),R&&a.createElement("div",{className:(0,n.cx)(x.badge,{[x.disabled]:L})},a.createElement(y,{plugin:P})),T&&a.createElement(c.h,{name:"trash-alt",onClick:U=>{U.stopPropagation(),T()},className:x.deleteButton,"aria-label":"Delete button on panel type card",tooltip:"Delete"}))};v.displayName="PanelTypeCard";const E=({children:D,hasDescription:C,hasDelete:P,rootProps:b})=>{const T=(0,u.wW)(s),O=(0,u.wW)(h);return a.createElement("div",{className:T.item,...b},a.createElement(i.Z,{className:(0,n.cx)(T.img,O.image),width:m,height:m}),a.createElement("div",{className:T.itemContent},a.createElement("div",{className:T.name},a.createElement(i.Z,{width:160})),C?a.createElement(i.Z,{containerClassName:T.description,width:80}):null,D),P&&a.createElement(i.Z,{containerClassName:(0,n.cx)(T.deleteButton,O.deleteButton),width:16,height:16}))},p=(0,d.y)(v,E),h=()=>({deleteButton:(0,n.css)({lineHeight:1}),image:(0,n.css)({lineHeight:1})}),s=D=>({item:(0,n.css)({position:"relative",display:"flex",flexShrink:0,cursor:"pointer",background:D.colors.background.secondary,borderRadius:D.shape.radius.default,boxShadow:D.shadows.z1,border:`1px solid ${D.colors.background.secondary}`,alignItems:"center",padding:D.spacing(1),width:"100%",overflow:"hidden",transition:D.transitions.create(["background"],{duration:D.transitions.duration.short}),"&:hover":{background:D.colors.emphasize(D.colors.background.secondary,.03)}}),itemContent:(0,n.css)({overflow:"hidden",position:"relative",padding:D.spacing(0,1)}),itemDisabled:(0,n.css)({cursor:"default","&, &:hover":{background:D.colors.action.disabledBackground}}),current:(0,n.css)({label:"currentVisualizationItem",border:`1px solid ${D.colors.primary.border}`,background:D.colors.action.selected}),disabled:(0,n.css)({opacity:.6,filter:"grayscale(1)",cursor:"default",pointerEvents:"none"}),name:(0,n.css)({textOverflow:"ellipsis",overflow:"hidden",fontSize:D.typography.size.sm,fontWeight:D.typography.fontWeightMedium,width:"100%"}),description:(0,n.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",color:D.colors.text.secondary,fontSize:D.typography.bodySmall.fontSize,fontWeight:D.typography.fontWeightLight,width:"100%",maxHeight:"4.5em"}),img:(0,n.css)({maxHeight:m,width:m,display:"flex",alignItems:"center"}),badge:(0,n.css)({background:D.colors.background.primary}),deleteButton:(0,n.css)({cursor:"pointer",marginLeft:"auto"})}),y=({plugin:D})=>(0,o.x)(D.signature)?a.createElement(l.o,{status:D.signature}):a.createElement(f.u,{state:D.state});y.displayName="PanelPluginBadge"},36965:(Q,A,e)=>{"use strict";e.d(A,{G:()=>c});var n=e(76932),a=e(31733),i=e(85498),r=e(76067),o=e(75798),g=e(95471),u=e(67507);function c({pluginId:d,searchQuery:f,onChange:m,isWidget:v=!1}){const E=(0,r.wW)(l),p=(0,a.useMemo)(()=>i.config.featureToggles.vizAndWidgetSplit?v?(0,g.Ry)():(0,g.hK)():(0,g.xW)(),[v]),h=(0,a.useMemo)(()=>(0,g.rw)(p,f,d),[p,f,d]);return h.length===0?a.createElement(o.K,null,"Could not find anything matching your query"):a.createElement("div",{className:E.grid},h.map(s=>a.createElement(u.u,{disabled:!1,key:s.id,isCurrent:s.id===d,plugin:s,onClick:y=>m({pluginId:s.id,withModKey:y.metaKey||y.ctrlKey||y.altKey})})))}const l=d=>({grid:(0,n.css)({maxWidth:"100%",display:"grid",gridGap:d.spacing(.5)}),heading:(0,n.css)({...d.typography.h5,margin:d.spacing(0,.5,1)})})},67507:(Q,A,e)=>{"use strict";e.d(A,{u:()=>i});var n=e(31733),a=e(73213);const i=({isCurrent:r,plugin:o,onClick:g,disabled:u})=>n.createElement(a.X,{title:o.name,plugin:o,description:o.info.description,onClick:g,isCurrent:r,disabled:u,showBadge:!0});i.displayName="VizTypePickerPlugin"},71623:(Q,A,e)=>{"use strict";e.d(A,{H:()=>g,n:()=>o});var n=e(98147),a=e(86850),i=e(93796),r=e(95639);const o=u=>{const c=u.field.links;if(!(!c||c.length===0))return{getLinks:l=>{const d={};if(u.view){const{dataFrame:m}=u.view;d.__series={value:{name:m.name,refId:m.refId},text:"Series"};const v=u.colIndex!==void 0?m.fields[u.colIndex]:void 0;if(v){if(d.__field={value:{name:v.name,labels:v.labels},text:"Field"},u.rowIndex!==void 0&&u.rowIndex>=0){const{timeField:E}=(0,n.sV)(m);d.__value={value:{raw:v.values[u.rowIndex],numeric:u.display.numeric,text:(0,a.zc)(u.display),time:E?E.values[u.rowIndex]:void 0},text:"Value"}}u.view&&(d.__data={value:{name:m.name,refId:m.refId,fields:(0,i.z)({frame:m,rowIndex:u.rowIndex})},text:"Data"})}else d.__value={value:{raw:u.display.numeric,numeric:u.display.numeric,text:(0,a.zc)(u.display),calc:u.name},text:"Value"}}else console.log("VALUE",u);const f=(m,v,E)=>{const p={...d,...v};return l(m,p,E)};return c.map(m=>(0,r.Bq)().getDataLinkUIModel(m,f,u))}}},g=(u,c)=>{const l=u.links;if(!(!l||l.length===0))return{getLinks:()=>l.map(d=>(0,r.Bq)().getDataLinkUIModel(d,c||u.replaceVariables,u))}}},95639:(Q,A,e)=>{"use strict";e.d(A,{Bq:()=>I,PR:()=>y,PW:()=>P});var n=e(69781),a=e.n(n),i=e(81548),r=e(63908),o=e(27957),g=e(85666),u=e(84912),c=e(98827),l=e(91977),d=e(74687),f=e(61129),m=e(71199),v=e(83811);const E=[{value:`${i.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:r.L8.BuiltIn},{value:`${i.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:r.L8.BuiltIn},{value:`${i.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:r.L8.BuiltIn}],p=[{value:`${i.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:r.L8.Series}],h=[{value:`${i.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:r.L8.Value},{value:`${i.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:r.L8.Value},{value:`${i.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:r.L8.Value}],s=M=>M.includes(".")||M.trim().includes(" ")?`["${M}"]`:`.${M}`,y=()=>[...(0,f.J)().getVariables().map(M=>({value:M.name,label:M.name,origin:r.L8.Template})),{value:`${i.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:r.L8.Template},...E],D=M=>{const x=[];for(const S of M)for(const U of S.fields)if(U.labels)for(const N of Object.keys(U.labels))x.push(N);const L=(0,n.chain)(x).flatten().uniq().value();return[{value:`${i.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:r.L8.Field},...L.map(S=>({value:`__field.labels${s(S)}`,label:`labels.${S}`,documentation:`${S} label value`,origin:r.L8.Field}))]},C=M=>{let x,L;const S=[],U={};if(M.length!==1)return[];const N=M[0];for(const w of N.fields){const G=(0,o.CZ)(w,N,M);U[G]||(S.push({value:`__data.fields${s(G)}`,label:`${G}`,documentation:`Formatted value for ${G} on the same row`,origin:r.L8.Fields}),U[G]=!0,!x&&w.type===g.fS.number&&(x={...w,name:G}),!L&&w.config.displayName&&w.config.displayName!==w.name&&(L={...w,name:G}))}return S.length&&S.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:r.L8.Fields}),x&&(S.push({value:`__data.fields${s(x.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:r.L8.Fields}),S.push({value:`__data.fields${s(x.name)}.text`,label:"Show text value",documentation:"the text value",origin:r.L8.Fields})),L&&S.push({value:`__data.fields${s(L.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:r.L8.Fields}),S},P=(M,x)=>{const L={value:`${i.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:r.L8.Value};return x===r.o3.Values?[...p,...D(M),...h,L,...C(M),...y()]:[...p,...D(M),...C(M),...y()]},b=M=>{const x=D(M),L={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...p,...x,...h,L,...y()]};class T{constructor(){this.getDataLinkUIModel=(x,L,S)=>{let U=x.url;x.onBuildUrl&&(U=x.onBuildUrl({origin:S,replaceVariables:L}));const N={href:u.u.assureBaseUrl(U.replace(/\n/g,"")),title:x.title??"",target:x.targetBlank?"_blank":void 0,origin:S};return L&&(N.href=L(N.href,void 0,m.b8.UriEncode),N.title=L(x.title)),x.onClick&&(N.onClick=w=>{x.onClick({origin:S,replaceVariables:L,e:w})}),N.href=(0,v.iE)().disableSanitizeHtml?N.href:c.QX.sanitizeUrl(N.href),N}}getLinkUrl(x){let L={};x.keepTime&&(L[`$${i.W.keepTime}`]=!0),x.includeVars&&(L[`$${i.W.includeVars}`]=!0);let S=u.u.assureBaseUrl(l.Cj.appendQueryToUrl(x.url||"",l.Cj.toUrlParams(L)));return S=(0,f.J)().replace(S),(0,v.iE)().disableSanitizeHtml?S:c.QX.sanitizeUrl(S)}getAnchorInfo(x){const L=(0,f.J)();return{href:this.getLinkUrl(x),title:L.replace(x.title||""),tooltip:L.replace(x.tooltip||"")}}getPanelLinkAnchorInfo(x,L){(0,d.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const S=(U,N,w)=>(0,f.J)().replace(U,{...L,...N},w);return this.getDataLinkUIModel(x,S,{})}}let O;function R(M){O=M}function I(){return O||(O=new T),O}},2507:(Q,A,e)=>{"use strict";e.d(A,{JI:()=>u,Kc:()=>l,ih:()=>d,qj:()=>c});var n=e(87877),a=e(39501),i=e(103),r=e(62873),o=e(74642),g=e(27524);function u(m){return async(v,E)=>{if(m.libraryPanel?.uid&&!("model"in m.libraryPanel)){v(f(m));return}let p=m.type,h=E().plugins.panels[p];if(!h)try{h=await v((0,r.Ro)(p))}catch{h=(0,i.X)(p,p==="row")}m.plugin||await m.pluginLoaded(h),v((0,g.bc)({key:m.key,plugin:h}))}}function c(m){return v=>{v((0,g.WJ)({key:m}))}}function l({panel:m,pluginId:v,options:E,fieldConfig:p,transformations:h}){return async(s,y)=>{if(m.type===v&&!E&&!p&&!h)return;let C=y().plugins.panels[v];if(C||(C=await s((0,r.Ro)(v))),m.type!==v&&m.changePlugin(C),E||p||h){const P=(0,n.d4)({plugin:C,currentOptions:E||m.options,currentFieldConfig:p||m.fieldConfig,isAfterPluginChange:!1});m.options=P.options,m.fieldConfig=P.fieldConfig,m.transformations=h||m.transformations,m.configRev++}m.generateNewKey(),s((0,g.bc)({key:m.key,plugin:C}))}}function d(m,v){return async(E,p)=>{const h=v.model.type,s=m.type;if(m.restoreModel({...v.model,gridPos:m.gridPos,id:m.id,libraryPanel:v}),m.getQueryRunner().clearLastResult(),s!==h){let D=p().plugins.panels[h];D||(D=await E((0,r.Ro)(h))),await m.pluginLoaded(D),m.generateNewKey(),await E((0,g.bc)({key:m.key,plugin:D}))}else{const y=m.key;m.generateNewKey(),E((0,g.mr)({oldKey:y,newKey:m.key}))}m.configRev=0,m.hasSavedPanelEditChange=!0,m.refresh(),m.events.publish(o.pO),m.events.publish(o.Wj)}}function f(m){return async(v,E)=>{const p=m.libraryPanel.uid;try{const h=await(0,a.Mh)(p,!0);m.initLibraryPanel(h),await v(u(m));const s=E().dashboard.getModel();if(m.repeat&&s){const y=s.panels.findIndex(D=>D.id===m.id);s.repeatPanel(m,y),s.sortPanelsByGridPos(),s.events.publish(new o._B)}}catch(h){console.log("ERROR: ",h),v((0,g.bc)({key:m.key,plugin:(0,i.X)("Unable to load library panel: "+p,!1)}))}}}},27524:(Q,A,e)=>{"use strict";e.d(A,{Vl:()=>l,WJ:()=>c,ZP:()=>f,bc:()=>r,mr:()=>u,o8:()=>o,pC:()=>g});var n=e(4579);const a={},i=(0,n.oM)({name:"panels",initialState:a,reducers:{panelModelAndPluginReady:(m,v)=>{m[v.payload.key]={plugin:v.payload.plugin}},changePanelKey:(m,v)=>{m[v.payload.newKey]=m[v.payload.oldKey],delete m[v.payload.oldKey]},removePanel:(m,v)=>{delete m[v.payload.key]},removeAllPanels:m=>{Object.keys(m).forEach(v=>delete m[v])},setPanelInstanceState:(m,v)=>{m[v.payload.key].instanceState=v.payload.value},setPanelAngularComponent:(m,v)=>{const E=m[v.payload.key];E.angularComponent=v.payload.angularComponent}}}),{panelModelAndPluginReady:r,setPanelAngularComponent:o,setPanelInstanceState:g,changePanelKey:u,removePanel:c,removeAllPanels:l}=i.actions,f={panels:i.reducer}},95471:(Q,A,e)=>{"use strict";e.d(A,{Ry:()=>o,hK:()=>g,rw:()=>u,xW:()=>r});var n=e(59889),a=e(84834),i=e(83811);function r(){const c=i.config.panels;return Object.keys(c).filter(l=>c[l].hideFromList===!1).map(l=>c[l]).sort((l,d)=>l.sort-d.sort)}function o(){return r().filter(c=>!!c.skipDataQuery)}function g(){return r().filter(c=>!c.skipDataQuery)}function u(c,l,d){if(!l.length)return c.filter(p=>p.state===n.BV.deprecated?d===p.id:!0);const f=(0,a.x6)(l).toLowerCase(),m=[],v=[],E="graph".startsWith(f);for(const p of c){if(p.state===n.BV.deprecated&&d!==p.id)continue;const s=p.name.toLowerCase().indexOf(f);s===0?m.push(p):s>0?v.push(p):E&&p.id==="timeseries"&&m.push(p)}return m.concat(v)}},7918:(Q,A,e)=>{"use strict";e.d(A,{r0:()=>d});var n=e(69781),a=e.n(n),i=e(84912),r=e(91977),o=e(17201),g=e(19690),u=e(81039);const c={kiosk:!0,autofitpanels:!0,orgId:!0};class l{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this),this.api=(0,u.K9)()}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const v=this.urls[this.index],E=g.E1.getSearchObject(),p=(0,n.pickBy)(E,(s,y)=>c[y]),h=i.u.stripBaseFromUrl(v);this.index++,this.validPlaylistUrl=h,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),g.E1.push(h+"?"+r.Cj.toUrlParams(p))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(m){m.pathname!==this.validPlaylistUrl&&this.stop()}async start(m){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=g.E1.getHistory().listen(this.locationUpdated);const v=[];let E=await this.api.getPlaylist(m);if(!E.items?.length)return;this.interval=o.intervalToMs(E.interval);const p=await(0,u.jc)(E.items);for(const h of p)if(h.dashboards)for(const s of h.dashboards)v.push(s.url);v.length&&(this.urls=v,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),g.E1.getSearchObject().kiosk&&g.E1.partial({kiosk:null}))}}const d=new l},81039:(Q,A,e)=>{"use strict";e.d(A,{Ds:()=>y,K9:()=>D,d5:()=>s,jc:()=>h});var n=e(71892),a=e(46901),i=e(69391),r=e(85498),o=e(7939),g=e(42876),u=e(40268),c=e(71667),l=e(86573),d=e(4502);class f{async getAllPlaylist(){return(0,i.i)().get("/api/playlists/")}async getPlaylist(P){const b=await(0,i.i)().get(`/api/playlists/${P}`);return await E(b),b}async createPlaylist(P){await p(()=>(0,i.i)().post("/api/playlists",P))}async updatePlaylist(P){await p(()=>(0,i.i)().put(`/api/playlists/${P.uid}`,P))}async deletePlaylist(P){await p(()=>(0,i.i)().delete(`/api/playlists/${P}`),"Playlist deleted")}}class m{constructor(){this.apiVersion="playlist.grafana.app/v0alpha1",this.playlistAsK8sResource=P=>({apiVersion:this.apiVersion,kind:"Playlist",metadata:{name:P.uid},spec:{title:P.name,interval:P.interval,items:P.items??[]}}),this.url=`/apis/${this.apiVersion}/namespaces/${r.config.namespace}/playlists`}async getAllPlaylist(){return(await(0,i.i)().get(this.url)).items.map(v)}async getPlaylist(P){const b=await(0,i.i)().get(this.url+"/"+P),T=v(b);return await E(T),T}async createPlaylist(P){const b=this.playlistAsK8sResource(P);await p(()=>(0,i.i)().post(this.url,b))}async updatePlaylist(P){const b=this.playlistAsK8sResource(P);await p(()=>(0,i.i)().put(`${this.url}/${P.uid}`,b))}async deletePlaylist(P){await p(()=>(0,i.i)().delete(`${this.url}/${P}`),"Playlist deleted")}}function v(C){const{spec:P,metadata:b}=C;return{uid:b.name,name:P.title,interval:P.interval,items:P.items}}async function E(C){if(C?.items){for(const P of C.items)if(P.type==="dashboard_by_id"){P.type="dashboard_by_uid";const b=await(0,i.i)().get(`/api/dashboards/ids/${P.value}`);b?.length&&(P.value=b[0])}}}async function p(C,P="Playlist saved"){try{await C(),(0,l.WI)((0,o.$l)((0,g.AT)(P)))}catch(b){b instanceof Error&&(0,l.WI)((0,o.$l)((0,g.t_)("Unable to save playlist",b)))}}async function h(C){let P=0;if(!C?.length)return[];const b=[];for(const R of C){const I={query:"*",kind:["dashboard"],limit:1e3};switch(R.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":I.uid=[R.value];break;case"dashboard_by_tag":I.tags=[R.value];break}b.push({refId:`${P++}`,queryType:c.hR.Search,search:I})}if(!r.config.featureToggles.panelTitleSearch){const R=(0,d.getGrafanaSearcher)(),I=[];for(let M=0;M<b.length;M++){const x=(await R.search(b[M].search)).view;I.push({...C[M],dashboards:x.map(L=>({...L}))})}return I}const T=await(0,u.e)(),O=await(0,n.n)(T.query({targets:b}));if(O.data.length!==C.length)throw new Error("unexpected result size");return C.map((R,I)=>{const M=new a.U(O.data[I]);return{...R,dashboards:M.map(x=>({...x}))}})}function s(){return{items:[],interval:"5m",name:"",uid:""}}function y(C,P){return P?.length?(P=P.toLowerCase(),C.filter(b=>b.name.toLowerCase().includes(P))):C}function D(){return r.config.featureToggles.kubernetesPlaylists?new m:new f}},79378:(Q,A,e)=>{"use strict";e.d(A,{$F:()=>u,E1:()=>m,GP:()=>p,GV:()=>g,P6:()=>h,Tk:()=>E,id:()=>v,jL:()=>c});var n=e(51133),a=e(69391),i=e(10704),r=e(84120),o=e(72311);async function g(y){const D=await l(y),C=!!D,[P,b,T]=await Promise.all([m(),d(y,C),f(y)]),O=P.find(I=>I.id===y),R=O?.dependencies||D?.json?.dependencies;return{grafanaDependency:R?.grafanaDependency??R?.grafanaVersion??"",pluginDependencies:R?.plugins||[],links:O?.info.links||D?.json?.info.links||[],readme:T||D?.readme,versions:b,statusContext:D?.statusContext??"",iam:D?.json?.iam}}async function u(){try{const{items:y}=await(0,a.i)().get(`${r.tB}/plugins`,{includeDeprecated:!0});return y.filter(o.Ok)}catch(y){if((0,a.kW)(y))return y.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw y}}async function c(){try{return await(0,a.i)().get(`${r.O2}/errors`)}catch{return[]}}async function l(y){try{return await(0,a.i)().get(`${r.tB}/plugins/${y}`,{})}catch(D){(0,a.kW)(D)&&(D.isHandled=!0);return}}async function d(y,D){try{return D?((await(0,a.i)().get(`${r.tB}/plugins/${y}/versions`)).items||[]).map(P=>({version:P.version,createdAt:P.createdAt,isCompatible:P.isCompatible,grafanaDependency:P.grafanaDependency})):[]}catch(C){return(0,a.kW)(C)&&(C.isHandled=!0),[]}}async function f(y){try{const D=await(0,a.i)().get(`${r.O2}/${y}/markdown/README`);return D?(0,n.a)(D):""}catch(D){return(0,a.kW)(D)&&(D.isHandled=!0),""}}async function m(){return(await(0,a.i)().get(`${r.O2}`,(0,i.y)({embedded:0}))).filter(o.W5)}async function v(){const{items:y}=await(0,a.i)().get(`${r.GB}/plugins`);return y}async function E(y){return await(0,a.i)().post(`${r.O2}/${y}/install`,void 0,{showErrorAlert:!1})}async function p(y){return await(0,a.i)().post(`${r.O2}/${y}/uninstall`)}async function h(y,D){return(await(0,a.i)().datasourceRequest({url:`/api/plugins/${y}/settings`,method:"POST",data:D}))?.data}const s={getRemotePlugins:u,getInstalledPlugins:m,installPlugin:E,uninstallPlugin:p}},81797:(Q,A,e)=>{"use strict";e.d(A,{L:()=>r});var n=e(76932),a=e(31733),i=e(76067);const r=({children:g,wrap:u,className:c})=>{const l=(0,i.l4)(),d=o(l,u);return a.createElement("div",{className:(0,n.cx)(d.container,c)},g)},o=(g,u)=>({container:(0,n.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${u?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${g.spacing()};
      margin-right: ${g.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},84120:(Q,A,e)=>{"use strict";e.d(A,{GB:()=>a,O2:()=>n,tB:()=>i,uJ:()=>r});const n="/api/plugins",a="/api/instance",i="/api/gnet",r="plugins"},72311:(Q,A,e)=>{"use strict";e.d(A,{AA:()=>s,HT:()=>T,Nh:()=>h,Ok:()=>R,RU:()=>P,Uj:()=>p,W5:()=>O,XB:()=>C,ZG:()=>v,fG:()=>b,uR:()=>d});var n=e(59889),a=e(42016),i=e(85498),r=e(28298),o=e(83811),g=e(75923),u=e(41327),c=e(42342),l=e(49744);function d({local:L=[],remote:S=[],instance:U=[],pluginErrors:N}){const w=[],G=y(N),_=U.reduce((K,k)=>(K.add(k.pluginSlug),K),new Set);return L.forEach(K=>{const k=S.find(W=>W.slug===K.id),z=G[K.id];k||w.push(f(K,void 0,z))}),S.forEach(K=>{const k=L.find(Z=>Z.id===K.slug),z=G[K.slug];if(!(K.status===l.Bs.Deprecated&&!k)){const Z=f(k,K,z);o.default.featureToggles.managedPluginsInstall&&i.config.pluginAdminExternalManageEnabled&&(Z.isFullyInstalled=_.has(K.slug)&&Z.isInstalled,Z.isInstalled=_.has(K.slug)||Z.isInstalled),w.push(Z)}}),w}function f(L,S,U){return!L&&S?m(S,U):L&&!S?v(L,U):E(L,S,U)}function m(L,S){const{name:U,slug:N,description:w,version:G,orgName:_,popularity:K,downloads:k,typeCode:z,updatedAt:W,createdAt:Z,status:H,angularDetected:X}=L,Y=!!S||M(z);return{description:w,downloads:k,id:N,info:{logos:{small:`https://grafana.com/api/plugins/${N}/versions/${G}/logos/small`,large:`https://grafana.com/api/plugins/${N}/versions/${G}/logos/large`}},name:U,orgName:_,popularity:K,publishedAt:Z,signature:D({remote:L,error:S}),updatedAt:W,hasUpdate:!1,isPublished:!0,isInstalled:Y,isDisabled:Y,isDeprecated:H===l.Bs.Deprecated,isCore:L.internal,isDev:!1,isEnterprise:H===l.Bs.Enterprise,type:z,error:S?.errorCode,angularDetected:X,isFullyInstalled:Y}}function v(L,S){const{name:U,info:{description:N,version:w,logos:G,updated:_,author:K},id:k,dev:z,type:W,signature:Z,signatureOrg:H,signatureType:X,hasUpdate:Y,accessControl:ne,angularDetected:se}=L,re=!!S||M(W);return{description:N,downloads:0,id:k,info:{logos:G},name:U,orgName:K.name,popularity:0,publishedAt:"",signature:D({local:L,error:S}),signatureOrg:H,signatureType:X,updatedAt:_,installedVersion:w,hasUpdate:Y,isInstalled:!0,isDisabled:re,isCore:Z==="internal",isPublished:!1,isDeprecated:!1,isDev:!!z,isEnterprise:!1,type:W,error:S?.errorCode,accessControl:ne,angularDetected:se,isFullyInstalled:!0,iam:L.iam}}function E(L,S,U){const N=L?.info.version,w=S?.slug||L?.id||"",G=L?.type||S?.typeCode,_=!!U||M(G);let K={small:`/public/img/icn-${G}.svg`,large:`/public/img/icn-${G}.svg`};return S?K={small:`https://grafana.com/api/plugins/${w}/versions/${S.version}/logos/small`,large:`https://grafana.com/api/plugins/${w}/versions/${S.version}/logos/large`}:L&&L.info.logos&&(K=L.info.logos),{description:L?.info.description||S?.description||"",downloads:S?.downloads||0,hasUpdate:L?.hasUpdate||!1,id:w,info:{logos:K},isCore:!!(S?.internal||L?.signature===n.Xy.internal),isDev:!!L?.dev,isEnterprise:S?.status===l.Bs.Enterprise,isInstalled:!!L||_,isDisabled:_,isDeprecated:S?.status===l.Bs.Deprecated,isPublished:!0,name:S?.name||L?.name||"",orgName:S?.orgName||L?.info.author.name||"",popularity:S?.popularity||0,publishedAt:S?.createdAt||"",type:G,signature:D({local:L,remote:S,error:U}),signatureOrg:L?.signatureOrg||S?.versionSignedByOrgName,signatureType:L?.signatureType||S?.versionSignatureType||S?.signatureType||void 0,updatedAt:S?.updatedAt||L?.info.updated||"",installedVersion:N,error:U?.errorCode,accessControl:L?.accessControl,angularDetected:L?.angularDetected||S?.angularDetected,isFullyInstalled:!!L||_,iam:L?.iam}}const p=L=>`${i.config.pluginCatalogURL}${L}`;var h=(L=>(L.nameAsc="nameAsc",L.nameDesc="nameDesc",L.updated="updated",L.published="published",L.downloads="downloads",L))(h||{});const s=(L,S)=>{const U={nameAsc:(N,w)=>N.name.localeCompare(w.name),nameDesc:(N,w)=>w.name.localeCompare(N.name),updated:(N,w)=>(0,a.J)(w.updatedAt).valueOf()-(0,a.J)(N.updatedAt).valueOf(),published:(N,w)=>(0,a.J)(w.publishedAt).valueOf()-(0,a.J)(N.publishedAt).valueOf(),downloads:(N,w)=>w.downloads-N.downloads};return U[S]?L.sort(U[S]):L};function y(L=[]){return L.reduce((S,U)=>(S[U.pluginId]=U,S),{})}function D(L){const{error:S,local:U,remote:N}=L;if(S)switch(S.errorCode){case n.w2.invalidSignature:return n.Xy.invalid;case n.w2.missingSignature:return n.Xy.missing;case n.w2.modifiedSignature:return n.Xy.modified}return U?.signature?U.signature:N?.signatureType&&N?.versionSignatureType?n.Xy.valid:n.Xy.missing}const C=()=>(0,u.i)().get("/api/frontend/settings").then(L=>{i.config.panels=L.panels});function P(L){if(!L)return;const[S]=L.filter(U=>!!U.isCompatible);return S}const b=()=>i.config.pluginAdminEnabled,T=(L,S,U)=>{const N=i.config.pluginAdminExternalManageEnabled,w=g.Vt.hasPermission(c.AccessControlAction.PluginsInstall),G=!!U;return L.type===n.zV.renderer||L.type===n.zV.secretsmanager||L.isEnterprise&&!(0,r.v)("enterprise.plugins")||L.isDev||!w&&!N||!L.isPublished||!G||!S},O=L=>I(L.id),R=L=>I(L.slug);function I(L){const{pluginCatalogHiddenPlugins:S}=i.config;return!S.includes(L)}function M(L){return L===n.zV.secretsmanager&&!i.config.secretsManagerPluginEnabled}function x(L){return L?.signature==="internal"}},62873:(Q,A,e)=>{"use strict";e.d(A,{DD:()=>D,LP:()=>x,N9:()=>O,Qd:()=>h,Ro:()=>L,Tz:()=>I,bQ:()=>R,bp:()=>s,m3:()=>M,tQ:()=>y,wx:()=>C});var n=e(4579),a=e(57298),i=e(86457),r=e(56183),o=e(44130),g=e(94325),u=e(71892),c=e(85498),l=e(69391),d=e(83811),f=e(33521),m=e(88527),v=e(79378),E=e(84120),p=e(72311);const h=(0,n.hg)(`${E.uJ}/fetchAll`,async(S,U)=>{try{U.dispatch({type:`${E.uJ}/fetchLocal/pending`}),U.dispatch({type:`${E.uJ}/fetchRemote/pending`});const N=c.config.pluginAdminExternalManageEnabled&&d.default.featureToggles.managedPluginsInstall?(0,a.D)((0,v.id)()):(0,i.of)(void 0),w=500,G=(0,a.D)((0,v.jL)()),_=(0,a.D)((0,v.E1)()),K=(0,a.D)((0,v.$F)()).pipe((0,r.K)(k=>(U.dispatch({type:`${E.uJ}/fetchRemote/rejected`}),console.error(k),(0,i.of)([]))));return(0,o.D)({local:_,remote:K,instance:N,pluginErrors:G}).pipe((0,g.V)({each:w,with:()=>(K.subscribe(async k=>{if(U.dispatch({type:`${E.uJ}/fetchRemote/fulfilled`}),k.length>0){const z=await(0,u.n)(_),W=await(0,u.n)(N),Z=await(0,u.n)(G);U.dispatch(C((0,p.uR)({local:z,remote:k,instance:W,pluginErrors:Z})))}}),(0,o.D)({local:_,instance:N,pluginErrors:G}))})).subscribe(({local:k,remote:z,instance:W,pluginErrors:Z})=>{k&&z?(U.dispatch({type:`${E.uJ}/fetchLocal/fulfilled`}),U.dispatch({type:`${E.uJ}/fetchRemote/fulfilled`}),U.dispatch(C((0,p.uR)({local:k,remote:z,instance:W,pluginErrors:Z})))):k&&(U.dispatch({type:`${E.uJ}/fetchLocal/fulfilled`}),U.dispatch(C((0,p.uR)({local:k,pluginErrors:Z}))))},k=>(console.log(k),U.dispatch({type:`${E.uJ}/fetchLocal/rejected`}),U.dispatch({type:`${E.uJ}/fetchRemote/rejected`}),U.rejectWithValue("Unknown error."))),null}catch{return U.rejectWithValue("Unknown error.")}}),s=(0,n.hg)(`${E.uJ}/fetchAllLocal`,async(S,U)=>{try{return(await(0,v.E1)()).map(w=>(0,p.ZG)(w))}catch{return U.rejectWithValue("Unknown error.")}}),y=(0,n.hg)(`${E.uJ}/fetchRemotePlugins`,async(S,U)=>{try{return await(0,v.$F)()}catch(N){return(0,l.kW)(N)&&(N.isHandled=!0),U.rejectWithValue([])}}),D=(0,n.hg)(`${E.uJ}/fetchDetails`,async(S,U)=>{try{const N=await(0,v.GV)(S);return{id:S,changes:{details:N}}}catch{return U.rejectWithValue("Unknown error.")}}),C=(0,n.PH)(`${E.uJ}/addPlugins`),P=(0,n.PH)(`${E.uJ}/addLocalPlugins`),b=(0,n.PH)(`${E.uJ}/addLocalPlugins`),T=(0,n.PH)(`${E.uJ}/addLocalPlugins`),O=(0,n.hg)(`${E.uJ}/install`,async({id:S,version:U,isUpdating:N=!1},w)=>{const G=N?{isInstalled:!0,installedVersion:U,hasUpdate:!1}:{isInstalled:!0,installedVersion:U};try{return await(0,v.Tk)(S),await(0,p.XB)(),N&&(0,m.Hl)(S),{id:S,changes:G}}catch(_){return console.error(_),(0,l.kW)(_)?w.rejectWithValue(_.data):w.rejectWithValue("Unknown error.")}}),R=(0,n.hg)(`${E.uJ}/install`,async()=>({})),I=(0,n.hg)(`${E.uJ}/uninstall`,async(S,U)=>{try{return await(0,v.GP)(S),await(0,p.XB)(),(0,m.Hl)(S),{id:S,changes:{isInstalled:!1,installedVersion:void 0}}}catch(N){return console.error(N),U.rejectWithValue("Unknown error.")}}),M=(0,n.hg)(`${E.uJ}/loadPluginDashboards`,async(S,U)=>{const G=`api/plugins/${U.getState().dataSources.dataSource.type}/dashboards`;return(0,l.i)().get(G)}),x=(0,n.PH)(`${E.uJ}/panelPluginLoaded`),L=S=>async(U,N)=>{let w=N().plugins.panels[S];return w||(w=await(0,f.Ub)(S),N().plugins.panels[S]||U(x(w))),w}},70943:(Q,A,e)=>{"use strict";e.d(A,{CD:()=>o,I6:()=>v,UC:()=>m});var n=e(4579),a=e(84120),i=e(49744),r=e(62873);const o=(0,n.HF)(),g=E=>new RegExp(`${a.uJ}/(.*)/pending`).test(E.type),u=E=>new RegExp(`${a.uJ}/(.*)/fulfilled`).test(E.type),c=E=>new RegExp(`${a.uJ}/(.*)/rejected`).test(E.type),l=E=>{const p=E.lastIndexOf("/");return E.substring(0,p)},d={items:o.getInitialState(),requests:{},settings:{displayMode:i.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},f=(0,n.oM)({name:"plugins",initialState:d,reducers:{setDisplayMode(E,p){E.settings.displayMode=p.payload}},extraReducers:E=>E.addCase(r.wx,(p,h)=>{o.upsertMany(p.items,h.payload)}).addCase(r.bp.fulfilled,(p,h)=>{o.upsertMany(p.items,h.payload)}).addCase(r.DD.fulfilled,(p,h)=>{o.updateOne(p.items,h.payload)}).addCase(r.N9.fulfilled,(p,h)=>{o.updateOne(p.items,h.payload)}).addCase(r.Tz.fulfilled,(p,h)=>{o.updateOne(p.items,h.payload)}).addCase(r.LP,(p,h)=>{p.panels[h.payload.meta.id]=h.payload}).addCase(r.m3.pending,(p,h)=>{p.isLoadingPluginDashboards=!0,p.dashboards=[]}).addCase(r.m3.fulfilled,(p,h)=>{p.isLoadingPluginDashboards=!1,p.dashboards=h.payload}).addMatcher(g,(p,h)=>{p.requests[l(h.type)]={status:i.eE.Pending}}).addMatcher(u,(p,h)=>{p.requests[l(h.type)]={status:i.eE.Fulfilled}}).addMatcher(c,(p,h)=>{p.requests[l(h.type)]={status:i.eE.Rejected,error:h.payload}})}),{setDisplayMode:m}=f.actions,v=f.reducer},49744:(Q,A,e)=>{"use strict";e.d(A,{Bs:()=>r,Co:()=>i,cd:()=>a,eE:()=>c,lL:()=>n,tu:()=>u,vF:()=>o,xc:()=>g});var n=(l=>(l.Grid="grid",l.List="list",l))(n||{}),a=(l=>(l.Home="plugins-home",l.Browse="plugins-browse",l.Details="plugins-details",l))(a||{}),i=(l=>(l.app="apps",l.datasource="database",l.panel="credit-card",l.renderer="capture",l.secretsmanager="key-skeleton-alt",l))(i||{}),r=(l=>(l.Deleted="deleted",l.Active="active",l.Pending="pending",l.Deprecated="deprecated",l.Enterprise="enterprise",l))(r||{}),o=(l=>(l.INSTALL="INSTALL",l.UNINSTALL="UNINSTALL",l.UPDATE="UPDATE",l.REINSTALL="REINSTALL",l))(o||{}),g=(l=>(l.OVERVIEW="Overview",l.VERSIONS="Version history",l.CONFIG="Config",l.DASHBOARDS="Dashboards",l.USAGE="Usage",l.IAM="IAM",l))(g||{}),u=(l=>(l.OVERVIEW="overview",l.VERSIONS="version-history",l.CONFIG="config",l.DASHBOARDS="dashboards",l.USAGE="usage",l.IAM="iam",l))(u||{}),c=(l=>(l.Pending="Pending",l.Fulfilled="Fulfilled",l.Rejected="Rejected",l))(c||{})},96841:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>g});var n=e(31733),a=e(59889),i=e(64704),r=e(25111);function o(u,c){let l;switch(u){case a.zV.app:l="app plugin";break;case a.zV.panel:l="panel plugin";break;case a.zV.datasource:l="data source plugin";break;default:l="plugin"}let d=`This ${l} uses a deprecated, legacy platform based on AngularJS and `;return c===void 0?d+" may be incompatible depending on your Grafana configuration.":c?d+" will stop working in future releases of Grafana.":d+" is incompatible with your current Grafana configuration."}function g(u){const{className:c,angularSupportEnabled:l,pluginId:d,pluginType:f,showPluginDetailsLink:m,interactionElementId:v}=u,[E,p]=(0,n.useState)(!1),h={};return d&&(h.pluginId=d),v&&(h.elementId=v),E?null:n.createElement(r.b,{severity:"warning",title:"Angular plugin",className:c,onRemove:()=>p(!0)},n.createElement("p",null,o(f,l)),n.createElement("div",{className:"markdown-html"},n.createElement("ul",null,n.createElement("li",null,n.createElement("a",{href:"https://grafana.com/docs/grafana/latest/developers/angular_deprecation/",className:"external-link",target:"_blank",rel:"noreferrer",onClick:()=>{(0,i.ff)("angular_deprecation_docs_clicked",h)}},"Read our deprecation notice and migration advice.")),m&&d?n.createElement("li",null,n.createElement("a",{href:`plugins/${encodeURIComponent(d)}`,className:"external-link",target:"_blank",rel:"noreferrer"},"View plugin details")):null)))}},61260:(Q,A,e)=>{"use strict";e.d(A,{G:()=>r});var n=e(85498);function a(o){return Object.values(n.config.datasources).find(g=>g.uid===o)??null}function i(o){return a(o)?.meta.angular?.detected??!1}function r(o){const g=a(o);return(g?.meta.angular?.detected&&!g?.meta.angular.hideDeprecation)??!1}},69386:(Q,A,e)=>{"use strict";e.d(A,{a:()=>r,v:()=>a});var n=e(31733);const a=n.createContext(i());a.displayName="PluginPageContext";function i(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function r(o){return{sectionNav:o??i().sectionNav}}},51767:(Q,A,e)=>{"use strict";e.d(A,{u:()=>r});var n=e(31733),a=e(59889),i=e(50248);const r=g=>{const u=o(g.state);return u?n.createElement(i.C,{className:g.className,color:u.color,title:u.tooltip,text:u.text,icon:u.icon}):null};function o(g){switch(g){case a.BV.deprecated:return{text:"Deprecated",color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case a.BV.alpha:return{text:"Alpha",color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case a.BV.beta:return{text:"Beta",color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}},97001:(Q,A,e)=>{"use strict";e.d(A,{ND:()=>E,ak:()=>s});var n=e(51023),a=e(56821),i=e(42139),r=e(61129),o=e(28109),g=e(69391),u=e(66261),c=e(65821),l=e(83599),d=e(83811),f=e(11042),m=e(26894),v=e(8913);class E{constructor(D=(0,r.J)()){this.templateSrv=D,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(D,C){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=D,this.defaultName=C;for(const P of Object.values(D))P.uid||(P.uid=P.name),this.settingsMapByUid[P.uid]=P,this.settingsMapById[P.id]=P;this.datasources[c.hr.type]=f.mV,this.datasources[m.Yq]=f.mV,this.settingsMapByUid[c.hr.uid]=f.bE,this.settingsMapByUid[m.Yq]=f.bE}getDataSourceSettingsByUid(D){return this.settingsMapByUid[D]}getInstanceSettings(D,C){let P=p(D);if((0,c.Pr)(P))return f.bE;if(P==="default"||P==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(P[0]==="$"){const b=this.templateSrv.replace(P,C,h);let T;return b==="default"?T=this.settingsMapByName[this.defaultName]:T=this.settingsMapByUid[b]??this.settingsMapByName[b],T?{...T,isDefault:!1,name:P,uid:P,rawRef:{type:T.type,uid:T.uid}}:void 0}return this.settingsMapByUid[P]??this.settingsMapByName[P]??this.settingsMapById[P]}get(D,C){let P=p(D);if(!P)return this.get(this.defaultName);if((0,c.Pr)(D))return Promise.resolve(this.datasources[m.Yq]);const b=this.settingsMapByName[P];return b&&(P=b.uid),this.datasources[P]?Promise.resolve(this.datasources[P]):(P=this.templateSrv.replace(P,C,h),P==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[P]?Promise.resolve(this.datasources[P]):this.loadDatasource(P))}async loadDatasource(D){if(this.datasources[D])return Promise.resolve(this.datasources[D]);const C=this.getInstanceSettings(D);if(!C)return Promise.reject({message:`Datasource ${D} was not found`});try{const P=await(0,v.nL)(C.meta);if(this.datasources[D])return this.datasources[D];const b=P.DataSourceClass.length!==1;let T;if(b?T=(0,o.V)().instantiate(P.DataSourceClass,{instanceSettings:C}):T=new P.DataSourceClass(C),T.components=P.components,!(T instanceof n.MF)){const O=T;O.name=C.name,O.id=C.id,O.type=C.type,O.meta=C.meta,O.uid=C.uid,T.getRef=n.MF.prototype.getRef}return this.datasources[D]=T,this.datasources[T.uid]=T,T}catch(P){return P instanceof Error&&l.Z.emit(a.SI.alertError,[C.name+" plugin failed",P.toString()]),Promise.reject({message:`Datasource: ${D} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(D={}){const C=Object.values(this.settingsMapByName).filter(b=>!(b.meta.id==="grafana"||b.meta.id==="mixed"||b.meta.id==="dashboard"||D.metrics&&!b.meta.metrics||D.tracing&&!b.meta.tracing||D.logs&&b.meta.category!=="logging"&&!b.meta.logs||D.annotations&&!b.meta.annotations||D.alerting&&!b.meta.alerting||D.pluginId&&!(0,i.S)(D.pluginId,b.meta)||D.filter&&!D.filter(b)||D.type&&(Array.isArray(D.type)?!D.type.includes(b.type):D.type!==b.type)||!D.all&&b.meta.metrics!==!0&&b.meta.annotations!==!0&&b.meta.tracing!==!0&&b.meta.logs!==!0&&b.meta.alerting!==!0));if(D.variables)for(const b of this.templateSrv.getVariables()){if(b.type!=="datasource")continue;let T=b.current.value==="default"?this.defaultName:b.current.value;Array.isArray(T)&&T.length===1&&(T=T[0]);const O=!Array.isArray(T)&&(this.settingsMapByName[T]||this.settingsMapByUid[T]);if(O){const R=`\${${b.name}}`;C.push({...O,isDefault:!1,name:R,uid:R})}}const P=C.sort((b,T)=>b.name.toLowerCase()>T.name.toLowerCase()?1:b.name.toLowerCase()<T.name.toLowerCase()?-1:0);if(!D.pluginId&&!D.alerting){if(D.mixed){const b=this.getInstanceSettings("-- Mixed --");b&&C.push(b)}if(D.dashboard){const b=this.getInstanceSettings("-- Dashboard --");b&&C.push(b)}if(!D.tracing){const b=this.getInstanceSettings("-- Grafana --");b&&C.push(b)}}return P}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(D=>({name:D.name,value:D.name,meta:D.meta}))}getMetricSources(D){return this.getList({metrics:!0,variables:!D?.skipVariables}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}async reload(){const D=await(0,g.i)().get("/api/frontend/settings");d.default.datasources=D.datasources,d.default.defaultDatasource=D.defaultDatasource,this.init(D.datasources,D.defaultDatasource)}}function p(y){return(0,c.Pr)(y)?c.hr.uid:typeof y=="string"?y:y?.uid}function h(y){return Array.isArray(y)?y[0]:y}const s=()=>(0,u.F)()},89154:(Q,A,e)=>{"use strict";e.d(A,{CR:()=>I,Ch:()=>s,DQ:()=>y,IX:()=>E,KE:()=>v,_A:()=>C,cS:()=>L,eP:()=>p,ew:()=>x,fD:()=>T,lu:()=>P});var n=e(76932),a=e(69781),i=e.n(a),r=e(31733),o=e(59326),g=e(90384),u=e(35210),c=e(74011),l=e(5572),d=e(83599),f=e(97068),m=e(74642);function v(S){console.warn(`[Plugin Extensions] ${S}`)}function E(S){return typeof S=="object"&&"type"in S&&S.type===g.D.link}function p(S){return typeof S=="object"&&"type"in S&&S.type===g.D.component}function h(S,U=""){return(...N)=>{try{return S(...N)}catch(w){w instanceof Error&&console.warn(`${U}${w.message}`)}}}function s(S,U){return{openModal:async w=>{const{title:G,body:_,width:K,height:k}=w;d.Z.publish(new m.Dn({component:y(S,D({title:G,body:_,width:K,height:k}))}))},context:U}}const y=(S,U)=>w=>{const{error:G,loading:_,value:K}=(0,o.Z)(()=>(0,f.a)(S,{showErrorAlert:!1}));return _?null:G?(v(`Could not fetch plugin meta information for "${S}", aborting. (${G.message})`),null):K?r.createElement(u.b,{meta:K},r.createElement(U,{...w})):(v(`Fetched plugin meta information is empty for "${S}", aborting.`),null)},D=({title:S,body:U,width:N,height:w})=>{const G=(0,n.css)({width:N,height:w});return({onDismiss:K})=>r.createElement(l.u,{title:S,className:G,isOpen:!0,onDismiss:K,onClickBackdrop:K},r.createElement(U,{onDismiss:K}))};function C(S,U=new Map){if(!S||typeof S!="object"||Object.isFrozen(S))return S;const N=Array.isArray(S)?[...S]:{...S};if(U.has(S))return U.get(S);U.set(S,N);const w=Reflect.ownKeys(N);for(const G of w){const _=Array.isArray(N)?N[Number(G)]:N[G];_&&(typeof _=="object"||typeof _=="function")&&(Array.isArray(N)?N[Number(G)]=C(_,U):N[G]=C(_,U))}return Object.freeze(N)}function P(S,U){const N=`${S}${U.extensionPointId}${U.title}`;return Array.from(N).reduce((w,G)=>Math.imul(31,w)+G.charCodeAt(0)|0,0).toString()}const b=Symbol("isReadOnlyProxy");function T(S){if(!S||typeof S!="object"||R(S))return S;const U=new WeakMap;return new Proxy(S,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(N,w,G){if(w===b)return!0;const _=Reflect.get(N,w,G);return(0,c.v9)(_)?(0,c.CQ)(_):(0,a.isObject)(_)||(0,a.isArray)(_)?(U.has(_)||U.set(_,T(_)),U.get(_)):_}})}function O(S){return typeof S=="object"&&S!==null}function R(S){return O(S)&&S[b]===!0}function I(S){const U={type:g.D.link,...S};return M(U),U}function M(S){if(S.type!==g.D.link)throw Error("config is not a extension link")}function x(S,U){return S.length<U?S:`${S.slice(0,U-3).trimEnd()}...`}function L(S){const U={},N=[];for(const G of S){const _=G.category;if(!_){N.push({text:x(G.title,25),href:G.path,onClick:G.onClick});continue}Array.isArray(U[_])||(U[_]=[]),U[_].push({text:x(G.title,25),href:G.path,onClick:G.onClick})}const w=Object.keys(U).reduce((G,_)=>(G.push({text:x(_,25),type:"group",subMenu:U[_]}),G),[]);return N.length>0&&(w.length>0&&w.push({text:"divider",type:"divider"}),Array.prototype.push.apply(w,N)),w}},33521:(Q,A,e)=>{"use strict";e.d(A,{Ub:()=>u,_2:()=>d,eD:()=>c,pv:()=>l,q1:()=>f,wG:()=>E});var n=e(42439),a=e(83811),i=e(103),r=e(8913);const o={},g={};function u(p){const h=o[p];if(h)return h;const s=l(p);if(!s)throw new Error(`Plugin ${p} not found`);return o[p]=m(s),p!==s.type&&(o[s.type]=o[p]),o[p]}function c(p){return!!l(p)}function l(p){const h=a.default.panels[p];if(!h){for(const s of Object.values(a.default.panels))if(s.aliasIDs?.includes(p))return s}return h}function d(p){return m(p)}function f(p){return g[p]}function m(p){return(0,r.N$)({path:p.module,version:p.info?.version,isAngular:p.angular?.detected,pluginId:p.id}).then(h=>{if(h.plugin)return h.plugin;if(h.PanelCtrl){const s=new n.c(null);return s.angularPanelCtrl=h.PanelCtrl,s}throw new Error("missing export: plugin or PanelCtrl")}).then(h=>(h.meta=p,g[p.id]=h,!h.panel&&h.angularPanelCtrl&&(h.panel=v(h)),h)).catch(h=>(console.warn("Error loading panel plugin: "+p.id,h),(0,i.F)(p,h)))}let v=p=>null;function E(p){v=p}},88527:(Q,A,e)=>{"use strict";e.d(A,{Hl:()=>o,Vf:()=>r,u0:()=>g});var n=e(97068);const a={},i=Date.now();function r({path:c,version:l}){const d=u(c);d&&!a[d]&&(a[d]=encodeURI(l))}function o(c){const l=`plugins/${c}/module`;a[l]&&delete a[l],(0,n.Z)(c)}function g(c,l=i){const d=u(c);if(!d)return`${c}?_cache=${l}`;const m=a[d]||l;return`${c}?_cache=${m}`}function u(c){const l=/\/.+\/(plugins\/.+\/module)\.js/i.exec(c);if(!l)return;const[d,f]=l;if(f)return f}},56745:(Q,A,e)=>{"use strict";e.d(A,{Nr:()=>i,OY:()=>n,YB:()=>r,xm:()=>a});const n="package",a=/^plugins.+\.css$/i,i=/^(text|application)\/(x-)?javascript(;|$)/,r=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/},90736:(Q,A,e)=>{"use strict";e.d(A,{t:()=>f,g:()=>m});var n=e(85498),a=e(80907),i=e(13318),r=e(56745),o=e(70621);const g=new WeakMap,u={};function c(v,E,p){const h={get(s,y){if(document.currentScript===null&&typeof y!="symbol"&&y.toString()!=="__useDefault"){const C=`${E}.${String(y)}`,P=`${C}`;u[P]||(u[P]=!0,(0,o.PN)(`Plugin using ${C}`,{key:String(y),parent:E,packageName:p}))}let D=Reflect.get(s,y);return D!==null&&typeof D=="object"&&!(D instanceof RegExp)?(g.has(D)||g.set(D,c(D,`${E}.${String(y)}`,p)),g.get(D)):(typeof D=="function"&&(D=D.bind(s)),D)}};return typeof v=="object"&&v!==null?new Proxy(v,h):v}const l=/^(@grafana|app\/)/;function d(v,E){return l.test(E)?c(v,E,E):v}function f(v){return Object.keys(v).reduce((E,p)=>{const h=`${r.OY}:${p}`,s=n.config.featureToggles.pluginsAPIMetrics?d(v[p],p):v[p];return a.i3.set(h,s),i.g.set(p,v[p]),E[p]=h,E},{})}function m(v){return!!n.config.pluginsCDNBaseURL&&v.startsWith(n.config.pluginsCDNBaseURL)}},97068:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>r,a:()=>i});var n=e(69391);const a={};function i(o,g){const u=a[o];return u?Promise.resolve(u):(0,n.i)().get(`/api/plugins/${o}/settings`,void 0,void 0,g).then(c=>(a[o]=c,c)).catch(c=>typeof c=="object"&&c!==null&&"status"in c&&c.status===403?(c.isHandled=!0,Promise.reject(c)):Promise.reject(new Error("Unknown Plugin")))}const r=o=>o?delete a[o]:Object.keys(a).forEach(g=>delete a[g])},8913:(Q,A,e)=>{"use strict";e.d(A,{Av:()=>zh,nL:()=>$h,N$:()=>ed});var n={};e.r(n),e.d(n,{plugin:()=>Le});var a={};e.r(a),e.d(a,{plugin:()=>cs});var i={};e.r(i),e.d(i,{plugin:()=>Ro});var r={};e.r(r),e.d(r,{plugin:()=>Si});var o={};e.r(o),e.d(o,{plugin:()=>Qi});var g={};e.r(g),e.d(g,{plugin:()=>Hu});var u={};e.r(u),e.d(u,{plugin:()=>hd});var c={};e.r(c),e.d(c,{plugin:()=>hm});var l={};e.r(l),e.d(l,{plugin:()=>Pm});var d={};e.r(d),e.d(d,{plugin:()=>xm});var f={};e.r(f),e.d(f,{plugin:()=>Po});var m={};e.r(m),e.d(m,{plugin:()=>xd});var v={};e.r(v),e.d(v,{plugin:()=>_m});var E={};e.r(E),e.d(E,{plugin:()=>Ld});var p={};e.r(p),e.d(p,{plugin:()=>Qm});var h={};e.r(h),e.d(h,{plugin:()=>qm});var s={};e.r(s),e.d(s,{plugin:()=>Cl});var y={};e.r(y),e.d(y,{plugin:()=>df});var D={};e.r(D),e.d(D,{plugin:()=>hf});var C={};e.r(C),e.d(C,{plugin:()=>su});var P={};e.r(P),e.d(P,{plugin:()=>Wf});var b={};e.r(b),e.d(b,{plugin:()=>Xf});var T={};e.r(T),e.d(T,{plugin:()=>ng});var O={};e.r(O),e.d(O,{plugin:()=>zc});var R={};e.r(R),e.d(R,{plugin:()=>lg});var I={};e.r(I),e.d(I,{plugin:()=>Sg});var M=e(51023),x=e(44343),L=e(80907),S=e(31733),U=e(42439),N=e(67451),w=e(85498),G=e(37758),_=e(68144),K=e(84415),k=e(10322),z=e(98319),W=e(39138),Z=e(42342),H=e(76932),X=e(16528),Y=e(76067),ne=e(51343),se=e(71355),re=e(93820),ge=e(19463),q=e(1024),me=e(66172),oe=e(43764);const fe=({alertManagerSourceName:F,group:ee,expandAll:ue})=>{const[Ce,xe]=(0,S.useState)(ue),Be=(0,Y.wW)(ve),Ke=(0,Y.wW)(q.r);return(0,S.useEffect)(()=>xe(ue),[ue]),S.createElement("div",{className:Be.group,"data-testid":"alert-group"},Object.keys(ee.labels).length>0?S.createElement(se.s,{labels:ee.labels,size:"sm"}):S.createElement("div",{className:Be.noGroupingText},"No grouping"),S.createElement("div",{className:Be.row},S.createElement(re.U,{isCollapsed:!Ce,onToggle:()=>xe(!Ce)})," ",S.createElement(ge.Z,{group:ee})),Ce&&S.createElement("div",{className:Be.alerts},ee.alerts.map((Xe,dt)=>{const gt=Xe.status.state.toUpperCase(),vt=(0,X.vT)({start:new Date(Xe.startsAt),end:Date.now()});return S.createElement("div",{"data-testid":"alert-group-alert",className:Be.alert,key:`${Xe.fingerprint}-${dt}`},S.createElement("div",null,S.createElement("span",{className:Ke[Xe.status.state]},gt," "),"for ",vt),S.createElement("div",null,S.createElement(se.s,{labels:Xe.labels,size:"sm"})),S.createElement("div",{className:Be.actionsRow},Xe.status.state===oe.Z9.Suppressed&&S.createElement(ne.Qj,{href:`${(0,me.eQ)("/alerting/silences",F)}&silenceIds=${Xe.status.silencedBy.join(",")}`,className:Be.button,icon:"bell",size:"sm"},"Manage silences"),Xe.status.state===oe.Z9.Active&&S.createElement(ne.Qj,{href:(0,me.VN)(F,Xe.labels),className:Be.button,icon:"bell-slash",size:"sm"},"Silence"),Xe.generatorURL&&S.createElement(ne.Qj,{className:Be.button,href:Xe.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},ve=F=>({noGroupingText:(0,H.css)`
    height: ${F.spacing(4)};
  `,group:(0,H.css)`
    background-color: ${F.colors.background.secondary};
    margin: ${F.spacing(.5,1,.5,1)};
    padding: ${F.spacing(1)};
  `,row:(0,H.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${F.spacing(1)};
  `,alerts:(0,H.css)`
    margin: ${F.spacing(0,2,0,4)};
  `,alert:(0,H.css)`
    padding: ${F.spacing(1,0)};
    & + & {
      border-top: 1px solid ${F.colors.border.medium};
    }
  `,button:(0,H.css)`
    & + & {
      margin-left: ${F.spacing(1)};
    }
  `,actionsRow:(0,H.css)`
    padding: ${F.spacing(1,0)};
  `}),pe=(F,ee)=>(0,S.useMemo)(()=>F.filter(ue=>(0,k.eD)(ue.labels,ee)||ue.alerts.some(Ce=>(0,k.eD)(Ce.labels,ee))),[F,ee]),Me=F=>{const ee=(0,Z.useDispatch)(),ue=w.config.unifiedAlertingEnabled,Ce=F.options.expandAll,xe=F.options.alertmanager,Ke=((0,_._)(vt=>vt.amAlertGroups)||W.oq)[xe||""]?.result||[],Xe=F.options.labels?(0,k.Zh)(F.options.labels):[],dt=pe(Ke,Xe);(0,S.useEffect)(()=>{function vt(){xe&&ee((0,K.mS)(xe))}vt();const Et=setInterval(vt,z.iF);return()=>{clearInterval(Et)}},[ee,xe]);const gt=dt.length>0;return S.createElement(G.$,{autoHeightMax:"100%",autoHeightMin:"100%"},ue&&S.createElement("div",null,gt&&dt.map(vt=>S.createElement(fe,{alertManagerSourceName:xe,key:JSON.stringify(vt.labels),group:vt,expandAll:Ce})),!gt&&"No alerts"))};var Pe=e(38834);function Ee(F){return F.name===N.GC?"Grafana":F.name.slice(0,37)}const he=({onChange:F,current:ee,dataSources:ue})=>{const Ce=(0,S.useMemo)(()=>ue.map(xe=>({label:Ee(xe),value:xe.name,imgUrl:xe.imgUrl,meta:xe.meta})),[ue]);return S.createElement(Pe.Ph,{"aria-label":"Choose Alertmanager",width:29,backspaceRemovesValue:!1,onChange:xe=>xe.value&&F(xe.value),options:Ce,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:ee,getOptionLabel:xe=>xe.label})},Le=new U.c(Me).setPanelOptions(F=>F.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:N.GC,category:["Options"],editor:function(ue){const Ce=(0,S.useMemo)(N.z3,[]);return S.createElement(he,{current:ue.value,onChange:xe=>ue.onChange(xe),dataSources:Ce})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var ke=e(98572),ot=e(37739),it=e(33204),ce=e(8806),le=e.n(ce),Re=e(21568),Ae=e(86434),Oe=e(51450);async function $e({query:F,permissionLevel:ee}){return(await(0,Oe.ZL)(F,ee)).map(xe=>({id:xe.id,title:xe.title,url:xe.url}))}async function Ye({query:F,permissionLevel:ee,extraFolders:ue}){const Ce=await $e({query:F,permissionLevel:ee}),xe=ue??[],Be=F?xe.filter(Ke=>Ke.title?.toLowerCase().includes(F.toLowerCase())):xe;return Ce?Be.concat(Ce):Be}async function Ne({query:F,permissionLevel:ee=Z.PermissionLevelString.View,extraFolders:ue=[]}){return(await Ye({query:F,permissionLevel:ee,extraFolders:ue})).map(xe=>({value:xe,label:xe.title}))}function je(F,ee){return F?.find(ue=>ue.value?.id===ee)}async function ut(F){if(F!=null)try{const{id:ee,title:ue}=await(0,Oe.EW)(F);return{value:{id:ee,title:ue},label:ue}}catch{console.error(`Could not find folder with id:${F}`)}}const Fe={id:void 0,title:"All"},Te={id:Ae.pW,title:Ae.fy};function Ve({onChange:F,extraFolders:ee=[],initialFolderId:ue,permissionLevel:Ce=Z.PermissionLevelString.View}){const[xe,Be]=(0,S.useState)(!1),[Ke,Xe]=(0,S.useState)(void 0),[dt,gt]=(0,S.useState)(void 0),vt=(0,S.useCallback)(async Lt=>{let Ht=je(Lt,ue);Ht||(Ht=await ut(ue)??Lt[0],F(Ht.value)),Be(!0),gt(Lt),Xe(Ht)},[ue,F]),Et=(0,S.useCallback)(async Lt=>{const Ht=await Ne({query:Lt,permissionLevel:Ce,extraFolders:ee});return xe||await vt(Ht),Ht},[Ce,ee,xe,vt]),Nt=le()(Et,300,{leading:!0}),Dt=(0,S.useCallback)(({value:Lt})=>{const Ht=je(dt,Lt?.id);Xe(Ht),F(Lt)},[dt,F]);return S.createElement("div",{"data-testid":Re.wl.components.ReadonlyFolderPicker.container},S.createElement(Pe.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Ke,value:Ke,loadOptions:Nt,onChange:Dt}))}var tt=e(79228),ae=e(69781),J=e.n(ae),te=e(59326),de=e(74011),be=e(89026),De=e(69391),Ue=e(96305),We=e(49311),et=e(74201),ze=e(60490),_e=e(2754);function qe(F){const[ee,ue]=(0,S.useState)(""),Ce=(0,te.Z)(async()=>{if(F.options.showOptions!==_e.kx.Current)return;const Ke={state:lt(F.options.stateFilter)};F.options.alertName&&(Ke.query=F.replaceVariables(F.options.alertName)),F.options.folderId>=0&&(Ke.folderId=F.options.folderId),F.options.dashboardTitle&&(Ke.dashboardQuery=F.options.dashboardTitle),F.options.dashboardAlerts&&(Ke.dashboardId=(0,ze.h4)().getCurrent()?.id),F.options.tags&&(Ke.dashboardTag=F.options.tags);const Xe=await(0,De.i)().get("/api/alerts",Ke,`alert-list-get-current-alert-state-${F.id}`);let dt=at(F.options.sortOrder,Xe.map(gt=>({...gt,stateModel:et.Z.getStateDisplayModel(gt.state),newStateDateAgo:(0,de.CQ)(gt.newStateDate).locale("en").fromNow(!0)})));return dt.length>F.options.maxItems&&(dt=dt.slice(0,F.options.maxItems)),ue(dt.length===0?"No alerts":""),dt},[F.options.showOptions,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.maxItems,F.options.tags,F.options.dashboardAlerts,F.options.dashboardTitle,F.options.folderId,F.options.alertName,F.options.sortOrder,F.timeRange]),xe=(0,te.Z)(async()=>{if(F.options.showOptions!==_e.kx.RecentChanges)return;const Ke={limit:F.options.maxItems,type:"alert",newState:lt(F.options.stateFilter)},Xe=(0,ze.h4)().getCurrent();F.options.dashboardAlerts&&(Ke.dashboardId=Xe?.id),Ke.from=be.parse(Xe?.time.from).unix()*1e3,Ke.to=be.parse(Xe?.time.to).unix()*1e3;const dt=await(0,De.i)().get("/api/annotations",Ke,`alert-list-get-state-changes-${F.id}`),gt=at(F.options.sortOrder,dt.map(vt=>({...vt,time:Xe?.formatDate(vt.time,"MMM D, YYYY HH:mm:ss"),stateModel:et.Z.getStateDisplayModel(vt.newState),info:et.Z.getAlertAnnotationInfo(vt)})));return ue(gt.length===0?"No alerts in current time range":""),gt},[F.options.showOptions,F.options.maxItems,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.dashboardAlerts,F.options.sortOrder]),Be=(0,Y.wW)(ft);return S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("div",{className:Be.container},ee&&S.createElement("div",{className:Be.noAlertsMessage},ee),S.createElement("section",null,S.createElement("ol",{className:Be.alertRuleList},F.options.showOptions===_e.kx.Current?!Ce.loading&&Ce.value&&Ce.value.map(Ke=>S.createElement("li",{className:Be.alertRuleItem,key:`alert-${Ke.id}`},S.createElement(Ue.Z,{href:`${Ke.url}?viewPanel=${Ke.panelId}`,className:Be.cardContainer},S.createElement(Ue.Z.Heading,null,Ke.name),S.createElement(Ue.Z.Figure,{className:(0,H.cx)(Be.alertRuleItemIcon,Ke.stateModel.stateClass)},S.createElement(We.J,{name:Ke.stateModel.iconClass,size:"xl",className:Be.alertIcon})),S.createElement(Ue.Z.Meta,null,S.createElement("div",{className:Be.alertRuleItemText},S.createElement("span",{className:Ke.stateModel.stateClass},Ke.stateModel.text),S.createElement("span",{className:Be.alertRuleItemTime}," for ",Ke.newStateDateAgo)))))):!xe.loading&&xe.value&&xe.value.map(Ke=>S.createElement("li",{className:Be.alertRuleItem,key:`alert-${Ke.id}`},S.createElement(Ue.Z,{className:Be.cardContainer},S.createElement(Ue.Z.Heading,null,Ke.alertName),S.createElement(Ue.Z.Figure,{className:(0,H.cx)(Be.alertRuleItemIcon,Ke.stateModel.stateClass)},S.createElement(We.J,{name:Ke.stateModel.iconClass,size:"xl"})),S.createElement(Ue.Z.Meta,null,S.createElement("span",{className:(0,H.cx)(Be.alertRuleItemText,Ke.stateModel.stateClass)},Ke.stateModel.text),S.createElement("span",null,Ke.time),Ke.info&&S.createElement("span",{className:Be.alertRuleItemInfo},Ke.info)))))))))}function at(F,ee){if(F===_e.As.Importance)return(0,ae.sortBy)(ee,Ce=>et.Z.alertStateSortScore[Ce.state||Ce.newState]);if(F===_e.As.TimeAsc)return(0,ae.sortBy)(ee,Ce=>new Date(Ce.newStateDate||Ce.time));if(F===_e.As.TimeDesc)return(0,ae.sortBy)(ee,Ce=>new Date(Ce.newStateDate||Ce.time)).reverse();const ue=(0,ae.sortBy)(ee,Ce=>(Ce.name||Ce.alertName).toLowerCase());return F===_e.As.AlphaDesc&&ue.reverse(),ue}function lt(F){return Object.entries(F).filter(([ee,ue])=>ue).map(([ee,ue])=>ee)}const ft=F=>({cardContainer:(0,H.css)`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,H.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,H.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,H.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.radius.default};
    margin-bottom: ${F.spacing(.5)};
  `,alertRuleItemIcon:(0,H.css)`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${F.spacing(4)};
    padding: 0 ${F.spacing(.5)} 0 ${F.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:(0,H.css)`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:(0,H.css)`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,H.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,H.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,H.css)`
    margin-right: ${F.spacing(.5)};
  `}),yt=F=>{const ee={showOptions:F.options.showOptions??F.show??_e.kx.Current,maxItems:F.options.maxItems??F.limit??10,sortOrder:F.options.sortOrder??F.sortOrder??_e.As.AlphaAsc,dashboardAlerts:F.options.dashboardAlerts??F.onlyAlertsOnDashboard??!1,alertName:F.options.alertName??F.nameFilter??"",dashboardTitle:F.options.dashboardTitle??F.dashboardFilter??"",folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.dashboardTags??[],stateFilter:F.options.stateFilter??F.stateFilter?.reduce((Ce,xe)=>({...Ce,[xe]:!0}),{})??{}};return parseFloat(F.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(xe=>delete F[xe]),ee};var wt=e(58126),zt=e(50266);function $t(F,ee){const ue=(0,k.Zh)(F);return(0,k.eD)(ee,ue)}function Ie(F,ee){const{stateFilter:ue,alertInstanceLabelFilter:Ce}=F;return(0,ae.isEmpty)(ue)?ee:ee.filter(xe=>(ue.firing&&((0,zt.j)(xe,wt.bj.Alerting)||(0,zt.j)(xe,wt.x_.Firing))||ue.pending&&((0,zt.j)(xe,wt.bj.Pending)||(0,zt.j)(xe,wt.x_.Pending))||ue.noData&&(0,zt.j)(xe,wt.bj.NoData)||ue.normal&&(0,zt.j)(xe,wt.bj.Normal)||ue.error&&(0,zt.j)(xe,wt.bj.Error)||ue.inactive&&(0,zt.j)(xe,wt.x_.Inactive))&&(Ce?$t(F.alertInstanceLabelFilter,xe.labels):!0))}function st(F){return!(F.startsWith("__")&&F.endsWith("__"))}const Mt=F=>{const{onChange:ee,id:ue,defaultValue:Ce,dataSource:xe}=F,Be=(0,Z.useDispatch)();(0,S.useEffect)(()=>{xe?xe&&Be((0,K.y6)({rulesSourceName:xe})):Be((0,K.lB)())},[Be,xe]);const Ke=(0,_._)(vt=>vt.promRules),Xe=(0,W.PE)(Ke),dt=(0,W.yR)(Ke),gt=(0,S.useMemo)(()=>{if((0,ae.isEmpty)(Ke))return[];if(!Xe)return[];const vt=Object.keys(Ke).flatMap(Et=>Ke[Et].result??[]).flatMap(Et=>Et.groups).flatMap(Et=>Et.rules.filter(Nt=>Nt.type===wt.pz.Alerting)).flatMap(Et=>Et.alerts??[]).map(Et=>Object.keys(Et.labels??{})).flatMap(Et=>Et.filter(st));return(0,ae.uniq)(vt)},[Xe,Ke]);return S.createElement(Pe.NU,{id:ue,isLoading:dt,defaultValue:Ce,"aria-label":"group by label keys",placeholder:"Group by",prefix:S.createElement(We.J,{name:"tag-alt"}),onChange:vt=>{ee(vt.map(Et=>Et.value??""))},options:gt.map(vt=>({label:vt,value:vt}))})};var ct=e(83870),nt=e(26124),Ct=e(1727),kt=e(25111),Jt=e(39543),tn=e(61375),Kt=e(83811),cn=e(56811),dn=e(15546),Sn=e(425),Zn=e(41216),_n=e(96198),Ut=e(12788),Xt=e(86504),en=e.n(Xt),gn=e(99698),ln=e(21279);const xn=({rule:F,alerts:ee,options:ue,grafanaTotalInstances:Ce,handleInstancesLimit:xe,limitInstances:Be,grafanaFilteredInstancesTotal:Ke})=>{const Xe=ue.groupMode===_e.LM.Custom?!0:ue.showInstances,[dt,gt]=(0,S.useState)(Xe),vt=(0,Y.wW)(Dn),Et=(0,Y.wW)(ne.gN),Nt=(0,S.useCallback)(()=>{gt(Qn=>!Qn)},[]),Dt=(0,S.useMemo)(()=>Ie(ue,(0,me.Zl)(ue.sortOrder,ee))??[],[ee,ue]),Lt=Ce!==void 0,Ht=Ce&&Ke?Ce-Ke:0,Rt=ee.length-Dt.length,Ot=Lt?Ht:Rt,Vt=Dt.length>0,pt=Vt?Nt:ae.noop;(0,S.useEffect)(()=>{Dt.length===0&&gt(!1)},[Dt]);const _t=async()=>{xe&&(xe(!1),gt(!0))},fn=async()=>{xe&&(xe(!0),gt(!0))},Yt=Be?Ke:Dt.length,un=Dt.length,rn=Lt?Yt:un,Zt=Be?`Showing ${Sn.gr} of ${Ce} instances`:`Showing all ${Ce} instances`,pn=Be?"View all instances":`Limit the result to ${Sn.gr} instances`,nn=Ce&&Sn.gr===Dt.length&&Ce>Dt.length,bn=Ce&&Sn.gr<Dt.length&&!Be,qn=nn||bn?S.createElement("div",{className:vt.footerRow},S.createElement("div",null,Zt),S.createElement(ne.zx,{size:"sm",variant:"secondary",onClick:Be?_t:fn},pn)):void 0;return S.createElement("div",null,ue.groupMode===_e.LM.Default&&S.createElement("button",{className:(0,H.cx)(Et,Vt?vt.clickable:""),onClick:()=>pt()},Vt&&S.createElement(We.J,{name:dt?"angle-down":"angle-right",size:"md"}),S.createElement("span",null,`${rn} ${en()("instance",rn)}`),Ot>0&&S.createElement("span",null,", ",`${Ot} hidden by filters`)),dt&&S.createElement(gn.o,{rule:F,instances:Dt,pagination:{itemsPerPage:2*ln.gN},footerRow:qn}))},Dn=F=>({clickable:(0,H.css)`
    cursor: pointer;
  `,footerRow:(0,H.css)`
    display: flex;
    flex-direction: column;
    gap: ${F.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Ln="__ungrouped__",hn=({rules:F,options:ee})=>{const ue=(0,Y.wW)(Os),Ce=ee.groupBy,xe=(0,S.useMemo)(()=>{const Be=new Map,Ke=gt=>Ce?$n(gt,Ce):!0;F.forEach(gt=>{const vt=(0,_n.Re)(gt),Et=Ke(gt);(vt?.alerts??[]).forEach(Nt=>{const Dt=Et?Gn(Ce,Nt.labels):Ln,Lt=Be.get(Dt)?.alerts??[];Be.set(Dt,{rule:gt,alerts:[...Lt,Nt]})})});const Xe=Be.get(Ln)?.alerts??[];return Be.delete(Ln),Be.set(Ln,{alerts:Xe}),Array.from(Be.entries()).reduce((gt,[vt,{rule:Et,alerts:Nt}])=>{const Dt=Ie(ee,Nt);return Dt.length>0&&gt.set(vt,{rule:Et,alerts:Dt}),gt},new Map)},[Ce,F,ee]);return S.createElement(S.Fragment,null,Array.from(xe).map(([Be,{rule:Ke,alerts:Xe}])=>S.createElement("li",{className:ue.alertRuleItem,key:Be,"data-testid":Be},S.createElement("div",null,S.createElement("div",{className:ue.customGroupDetails},S.createElement("div",{className:ue.alertLabels},Be!==Ln&&Vn(Be).map(([dt,gt])=>S.createElement(Ut.i,{key:dt,labelKey:dt,value:gt})),Be===Ln&&"No grouping")),S.createElement(xn,{rule:Ke,alerts:Xe,options:ee})))))};function Gn(F,ee){return new URLSearchParams(F.map(ue=>[ue,ee[ue]])).toString()}function Vn(F){return[...new URLSearchParams(F)]}function $n(F,ee){const ue=(0,_n.Re)(F);return ee.every(Ce=>(ue?.alerts??[]).some(xe=>xe.labels[Ce]))}const Wn=hn;var Pn=e(56423),sa=e(40040),va=e(97503),An=e(99825);function Xn(F){return Object.values(F).filter(ee=>ee!==void 0).reduce((ee,ue)=>ee+ue,0)}const ra=({rules:F,options:ee,handleInstancesLimit:ue,limitInstances:Ce,hideViewRuleLinkText:xe})=>{const Be=(0,Y.wW)(Os),Ke=(0,Y.wW)(ga),{href:Xe}=(0,Pn.Z)(),dt=F.length<=ee.maxItems?F:F.slice(0,ee.maxItems);return S.createElement(S.Fragment,null,S.createElement("ol",{className:Be.alertRuleList},dt.map((gt,vt)=>{const{namespaceName:Et,groupName:Nt,dataSourceName:Dt}=gt,Lt=(0,_n.x_)(gt.promRule)?gt.promRule:void 0,Ht=(0,_n.ub)(Lt),Rt=(0,va.Yd)(gt.dataSourceName,gt),Ot=(0,va.$V)(Rt),Vt=gt.dataSourceName===N.GC?Xn(gt.instanceTotals):void 0,pt=gt.dataSourceName===N.GC?Xn(gt.filteredInstanceTotals):void 0,_t=(0,An.u)(`/alerting/${encodeURIComponent(Dt)}/${encodeURIComponent(Ot)}/view`,{returnTo:Xe??""});return Lt?S.createElement("li",{className:Be.alertRuleItem,key:`alert-${Et}-${Nt}-${gt.name}-${vt}`},S.createElement("div",{className:Ke.icon},S.createElement(We.J,{name:et.Z.getStateDisplayModel(Lt.state).iconClass,className:Ke[(0,_n.Aq)(Lt.state)],size:"lg"})),S.createElement("div",{className:Be.alertNameWrapper},S.createElement("div",{className:Be.instanceDetails},S.createElement(ot.K,{direction:"row",gap:1},S.createElement("div",{className:Be.alertName,title:gt.name},gt.name),S.createElement(sa.L,null),_t&&S.createElement("a",{href:_t,target:"__blank",className:Be.link,rel:"noopener","aria-label":"View alert rule"},S.createElement("span",{className:(0,H.cx)({[Be.hidden]:xe})},"View alert rule"),S.createElement(We.J,{name:"external-link-alt",size:"sm"}))),S.createElement("div",{className:Be.alertDuration},S.createElement("span",{className:Ke[(0,_n.Aq)(Lt.state)]},(0,_n.SS)(Lt.state))," ",Ht&&Lt.state!==wt.x_.Inactive&&S.createElement(S.Fragment,null,"for"," ",S.createElement("span",null,(0,X.vT)({start:Ht,end:Date.now()}))))),S.createElement(xn,{rule:gt,alerts:Lt.alerts??[],options:ee,grafanaTotalInstances:Vt,grafanaFilteredInstancesTotal:pt,handleInstancesLimit:ue,limitInstances:Ce}))):null})))},ga=F=>({common:(0,H.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${F.shape.radius.default};
    font-size: ${F.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,H.css)`
    margin-top: ${F.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,H.css)`
    color: ${F.colors.success.main};
  `,bad:(0,H.css)`
    color: ${F.colors.error.main};
  `,warning:(0,H.css)`
    color: ${F.colors.warning.main};
  `,neutral:(0,H.css)`
    color: ${F.colors.secondary.main};
  `,info:(0,H.css)`
    color: ${F.colors.primary.main};
  `}),ys=ra;function ds(F){const ee=(ue,[Ce,xe])=>xe?[...ue,Ce]:ue;return Object.entries(F).reduce(ee,[])}const Ja=({dispatch:F,limitInstances:ee,matcherList:ue,dataSourceName:Ce,stateList:xe})=>{F(Ce?(0,K.dn)({rulesSourceName:Ce,limitAlerts:ee?Sn.gr:void 0,matcher:ue,state:xe}):(0,K.ei)(!1,{limitAlerts:ee?Sn.gr:void 0,matcher:ue,state:xe}))};function _a(F){const ee=(0,Z.useDispatch)(),[ue,Ce]=(0,ct.Z)(!0),{usePrometheusRulesByNamespaceQuery:xe}=dn.alertRuleApi,Be=(0,_._)(Ca=>Ca.promRules),Ke=(0,_._)(Ca=>Ca.rulerRules),Xe=(0,W.wt)(Be),dt=F.width<320;(0,S.useEffect)(()=>{F.options.stateFilter.inactive===!0&&(F.options.stateFilter.normal=!0),F.options.stateFilter.inactive=void 0},[F.options.stateFilter]);let gt;(0,nt.Z)(()=>{gt=(0,ze.h4)().getCurrent()});const vt=(0,S.useMemo)(()=>ds(F.options.stateFilter),[F.options.stateFilter]),{options:Et,replaceVariables:Nt}=F,Dt=Et.datasource===N.JY?N.GC:Et.datasource,Lt={...F.options,alertName:Nt(Et.alertName),alertInstanceLabelFilter:Nt(Et.alertInstanceLabelFilter)},Ht=(0,S.useMemo)(()=>(0,k.Zh)(Lt.alertInstanceLabelFilter),[Lt.alertInstanceLabelFilter]),Rt=!Dt||Dt===N.GC,{currentData:Ot=[],isLoading:Vt,refetch:pt}=xe({limitAlerts:ue?Sn.gr:void 0,matcher:Ht,state:vt},{skip:!Rt});(0,S.useEffect)(()=>{Be.loading||Ja({dispatch:ee,limitInstances:ue,matcherList:Ht,dataSourceName:Dt,stateList:vt});const Ca=gt?.events.subscribe(Ct.md,()=>{Rt&&pt(),(!Dt||Dt!==N.GC)&&Ja({dispatch:ee,limitInstances:ue,matcherList:Ht,dataSourceName:Dt,stateList:vt})});return()=>{Ca?.unsubscribe()}},[ee,gt,Ht,vt,ue,Dt,pt,Rt,Be.loading]);const _t=Ca=>{Ca?(Ja({dispatch:ee,limitInstances:ue,matcherList:Ht,dataSourceName:Dt,stateList:vt}),Ce(!0)):(Ja({dispatch:ee,limitInstances:!1,matcherList:Ht,dataSourceName:Dt,stateList:vt}),Ce(!1))},fn=(0,Zn.Zo)(void 0,Ot),Yt=(0,W.wt)(Ke),un=(0,W.I7)(Be),rn=Xe||Yt,Zt=(0,W.yR)(Be),pn=(0,Y.wW)(Os),nn=(0,_n.C7)(fn),bn=F.options.sortOrder,qn=(0,S.useMemo)(()=>Es(F,ls(bn,nn)),[nn,bn,F]),Qn=qn.length===0?"No alerts matching filters":void 0,Rn=Vt||rn&&Zt&&!un,Hn=Object.values(Be).some(Ca=>Ca.result);return!cn.contextSrv.hasPermission(Z.AccessControlAction.AlertingRuleRead)&&!cn.contextSrv.hasPermission(Z.AccessControlAction.AlertingRuleExternalRead)?S.createElement(kt.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("div",{className:pn.container},Hn&&Qn&&S.createElement("div",{className:pn.noAlertsMessage},Qn),Hn&&S.createElement("section",null,F.options.viewMode===_e.wO.Stat&&S.createElement(Jt.w6,{width:F.width,height:F.height,graphMode:Jt.IG.None,textMode:Jt.jG.Auto,justifyMode:Jt.ap.Auto,theme:Kt.config.theme2,value:{text:`${qn.length}`,numeric:qn.length}}),F.options.viewMode===_e.wO.List&&F.options.groupMode===_e.LM.Custom&&S.createElement(Wn,{rules:qn,options:Lt}),F.options.viewMode===_e.wO.List&&F.options.groupMode===_e.LM.Default&&S.createElement(ys,{rules:qn,options:Lt,handleInstancesLimit:_t,limitInstances:ue,hideViewRuleLinkText:dt})),Rn&&S.createElement(tn.u,{text:"Loading..."})))}function ls(F,ee){if(F===_e.As.Importance)return(0,ae.sortBy)(ee,Ce=>et.Z.alertStateSortScore[Ce.state]);if(F===_e.As.TimeAsc)return(0,ae.sortBy)(ee,Ce=>{const xe=(0,_n.Re)(Ce)??void 0;return(0,_n.ub)(xe)||new Date});if(F===_e.As.TimeDesc)return(0,ae.sortBy)(ee,Ce=>{const xe=(0,_n.Re)(Ce)??void 0;return(0,_n.ub)(xe)||new Date}).reverse();const ue=(0,ae.sortBy)(ee,Ce=>Ce.name.toLowerCase());return F===_e.As.AlphaDesc&&ue.reverse(),ue}function Es(F,ee){const{options:ue,replaceVariables:Ce}=F;let xe=[...ee];if(ue.dashboardAlerts){const Be=(0,ze.h4)().getCurrent()?.uid;xe=xe.filter(({annotations:Ke={}})=>Object.entries(Ke).some(([Xe,dt])=>Xe===z.q6.dashboardUID&&dt===Be))}if(ue.alertName){const Be=Ce(ue.alertName);xe=xe.filter(({name:Ke})=>Ke.toLocaleLowerCase().includes(Be.toLocaleLowerCase()))}if(xe=xe.filter(Be=>{const Ke=(0,_n.Re)(Be);return Ke?ue.stateFilter.firing&&Ke.state===wt.x_.Firing||ue.stateFilter.pending&&Ke.state===wt.x_.Pending||ue.stateFilter.normal&&Ke.state===wt.x_.Inactive:!1}),ue.folder&&(xe=xe.filter(Be=>Be.namespaceName===ue.folder.title)),ue.datasource){const Be=ue.datasource===N.JY;xe=xe.filter(Be?({dataSourceName:Ke})=>Ke===N.GC:({dataSourceName:Ke})=>Ke===ue.datasource)}return xe=xe.reduce((Be,Ke)=>{const Xe=(0,_n.Re)(Ke);return(Xe?Ie({stateFilter:ue.stateFilter,alertInstanceLabelFilter:Ce(ue.alertInstanceLabelFilter)},Xe.alerts??[]):[]).length&&Be.push(Ke),Be},[]),xe}const Os=F=>({cardContainer:(0,H.css)`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,H.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,H.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,H.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.radius.default};
    margin-bottom: ${F.spacing(.5)};

    gap: ${F.spacing(2)};
  `,alertName:(0,H.css)`
    font-size: ${F.typography.h6.fontSize};
    font-weight: ${F.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,H.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,H.css)`
    > * {
      margin-right: ${F.spacing(.5)};
    }
  `,alertDuration:(0,H.css)`
    font-size: ${F.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,H.css)`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,H.css)`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,H.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,H.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,H.css)`
    margin-right: ${F.spacing(.5)};
  `,instanceDetails:(0,H.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,H.css)`
    margin-bottom: ${F.spacing(.5)};
  `,link:(0,H.css)`
    word-break: break-all;
    color: ${F.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${F.spacing(1)};
  `,hidden:(0,H.css)`
    display: none;
  `});class ts{getSuggestionsForData(ee){const{dataSummary:ue}=ee;if(ue.hasData)return;ee.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Xa(F){return F.showOptions===_e.kx.Current}const bs=new U.c(qe).setPanelOptions(F=>{F.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:_e.kx.Current},{label:"Recent state changes",value:_e.kx.RecentChanges}]},defaultValue:_e.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:_e.As.AlphaAsc},{label:"Alphabetical (desc)",value:_e.As.AlphaDesc},{label:"Importance",value:_e.As.Importance},{label:"Time (asc)",value:_e.As.TimeAsc},{label:"Time (desc)",value:_e.As.TimeDesc}]},defaultValue:_e.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Xa}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Xa}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:ue,onChange:Ce}){return S.createElement(Ve,{initialFolderId:ue,onChange:xe=>Ce(xe?.id),extraFolders:[Fe,Te]})},category:["Filter"],showIf:Xa}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(ee){return S.createElement(ke.B,{tags:ee.value,onChange:ee.onChange})},category:["Filter"],showIf:Xa}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Xa}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Xa}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Xa}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Xa}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Xa}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Xa})}).setMigrationHandler(yt).setSuggestionsSupplier(new ts),Nr=new U.c(_a).setPanelOptions(F=>{F.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:_e.wO.List,settings:{options:[{label:"List",value:_e.wO.List},{label:"Stat",value:_e.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:_e.LM.Default,settings:{options:[{value:_e.LM.Default,label:"Default grouping"},{value:_e.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:ee=>ee.groupMode===_e.LM.Custom,category:["Options"],editor:ee=>S.createElement(Mt,{id:ee.id??"groupBy",defaultValue:ee.value.map(ue=>({label:ue,value:ue})),onChange:ee.onChange,dataSource:ee.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:_e.As.AlphaAsc},{label:"Alphabetical (desc)",value:_e.As.AlphaDesc},{label:"Importance",value:_e.As.Importance},{label:"Time (asc)",value:_e.As.TimeAsc},{label:"Time (desc)",value:_e.As.TimeDesc}]},defaultValue:_e.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts linked to this dashboard",description:"Only show alerts linked to this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter from alert source",id:"datasource",defaultValue:null,editor:function(ue){return S.createElement(ot.K,{gap:1},S.createElement(tt.q,{...ue,type:["prometheus","loki","grafana"],noDefault:!0,current:ue.value,onChange:Ce=>ue.onChange(Ce.name)}),S.createElement(ne.zx,{variant:"secondary",onClick:()=>ue.onChange(null)},"Clear"))},category:["Filter"]}).addCustomEditor({showIf:ee=>ee.datasource===N.JY||!ee.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(ue){return S.createElement(it.Fz,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:ue.value?.title,initialFolderUid:ue.value?.uid,permissionLevel:Z.PermissionLevelString.View,onClear:()=>ue.onChange(""),...ue})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),cs=w.config.unifiedAlertingEnabled?Nr:bs;var ks=e(40510),Hs=e(84912),qa=e(56821),za=e(93670),Is=e(19690),vr=e(60196),dr=e(33227),Ns=e(64674),Wr=e(83599),$o=e(97124),sr=e(58037);const Gr=({options:F,annotation:ee,formatDate:ue,onClick:Ce,onAvatarClick:xe,onTagClick:Be})=>{const Ke=(0,Y.wW)(Vs),{showUser:Xe,showTags:dt,showTime:gt}=F,{text:vt="",login:Et,email:Nt,avatarUrl:Dt,tags:Lt,time:Ht,timeEnd:Rt}=ee,Ot=()=>{Ce(ee)},Vt=()=>{xe(ee)},pt=Et&&Xe,_t=Ht&&gt,fn=Rt&&Rt!==Ht&&gt;return S.createElement(Ue.Z,{className:Ke.card,onClick:Ot},S.createElement(Ue.Z.Heading,null,S.createElement($o.D,{className:Ke.heading,onClick:Yt=>{Yt.stopPropagation()},content:vt})),_t&&S.createElement(Ue.Z.Description,{className:Ke.timestamp},S.createElement(Fr,{formatDate:ue,time:Ht}),fn&&S.createElement(S.Fragment,null,S.createElement("span",{className:Ke.time},"-"),S.createElement(Fr,{formatDate:ue,time:Rt})," ")),pt&&S.createElement(Ue.Z.Meta,{className:Ke.meta},S.createElement(ka,{email:Nt,login:Et,avatarUrl:Dt,onClick:Vt})),dt&&Lt&&S.createElement(Ue.Z.Tags,null,S.createElement(vr.P,{tags:Lt,onClick:Yt=>Be(Yt,!1)})))},ka=({onClick:F,avatarUrl:ee,login:ue,email:Ce})=>{const xe=(0,Y.wW)(Vs),Be=Xe=>{Xe.stopPropagation(),F()},Ke=S.createElement("span",null,"Created by:",S.createElement("br",null)," ",Ce);return S.createElement(sr.u,{content:Ke,theme:"info",placement:"top"},S.createElement("button",{onClick:Be,className:xe.avatar},S.createElement("img",{src:ee,alt:"avatar icon"})))},Fr=({time:F,formatDate:ee})=>{const ue=(0,Y.wW)(Vs);return S.createElement("span",{className:ue.time},S.createElement("span",null,ee(F)))};function Vs(F){return{card:(0,H.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:F.spacing(1),margin:F.spacing(.5),width:"inherit"}),heading:(0,H.css)({a:{zIndex:1,position:"relative",color:F.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,H.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,H.css)({margin:0,alignSelf:"center"}),time:(0,H.css)({marginLeft:F.spacing(1),marginRight:F.spacing(1),fontSize:F.typography.bodySmall.fontSize,color:F.colors.text.secondary}),avatar:(0,H.css)({border:"none",background:"inherit",margin:0,padding:F.spacing(.5),img:{borderRadius:F.shape.radius.circle,width:F.spacing(2),height:F.spacing(2)}})}}class Eo extends S.PureComponent{constructor(ee){super(ee),this.style=io(w.config.theme2),this.subs=new ks.w0,this.tagListRef=S.createRef(),this.onAnnoClick=async ue=>{if(!ue.time)return;const{options:Ce}=this.props,Be=(0,ze.h4)().getCurrent(),Ke={from:this._timeOffset(ue.time,Ce.navigateBefore,!0),to:this._timeOffset(ue.timeEnd??ue.time,Ce.navigateAfter,!1)};if(Ce.navigateToPanel&&(Ke.viewPanel=ue.panelId),Be?.uid===ue.dashboardUID){Is.E1.partial(Ke);return}const Xe=await(0,De.i)().get("/api/search",{dashboardUIDs:ue.dashboardUID});if(Xe&&Xe.length&&Xe[0].uid===ue.dashboardUID){const dt=Xe[0],gt=new URL(dt.url,window.location.origin);gt.searchParams.set("from",Ke.from),gt.searchParams.set("to",Ke.to),Is.E1.push(Hs.u.stripBaseFromUrl(gt.toString()));return}Wr.Z.emit(qa.SI.alertWarning,["Unknown Dashboard: "+ue.dashboardUID])},this.onTagClick=(ue,Ce)=>{if(!Ce&&this.state.queryTags.includes(ue))return;const xe=Ce?this.state.queryTags.filter(Ke=>Ke!==ue):[...this.state.queryTags,ue];let Be;if(Ce){const Ke=document.activeElement,Xe=Ke?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Ke)&&Xe){const dt=Number.parseInt(Xe,10),gt=this.tagListRef.current.querySelector(`[data-tag-id="${dt+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${dt-1}"]`);gt instanceof HTMLElement&&(Be=gt)}}this.setState({queryTags:xe},()=>Be?.focus())},this.onUserClick=ue=>{this.setState({queryUser:{id:ue.userId,login:ue.login,email:ue.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(ue,Ce)=>{const{options:xe}=this.props,Be=(0,ze.h4)().getCurrent();return Be?S.createElement(Gr,{annotation:ue,formatDate:Be.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:xe}):S.createElement(S.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(za.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(ee,ue){const{options:Ce,timeRange:xe}=this.props;(Ce!==ee.options||this.state.queryTags!==ue.queryTags||this.state.queryUser!==ue.queryUser||ee.renderCounter!==this.props.renderCounter||Ce.onlyInTimeRange&&xe!==ee.timeRange)&&this.doSearch()}async doSearch(){const{options:ee}=this.props,{queryUser:ue,queryTags:Ce}=this.state,xe={tags:ee.tags,limit:ee.limit,type:"annotation"};ee.onlyFromThisDashboard&&(xe.dashboardUID=(0,ze.h4)().getCurrent()?.uid);let Be="";if(ee.onlyInTimeRange){const{timeRange:Xe}=this.props;xe.from=Xe.from.valueOf(),xe.to=Xe.to.valueOf()}else Be="All Time";ue&&(xe.userId=ue.id),ee.tags&&ee.tags.length&&(xe.tags=ee.tags.map(Xe=>this.props.replaceVariables(Xe))),Ce.length&&(xe.tags=xe.tags?[...xe.tags,...Ce]:Ce);const Ke=await(0,De.i)().get("/api/annotations",xe,`anno-list-panel-${this.props.id}`);this.setState({annotations:Ke,timeInfo:Be,loaded:!0})}_timeOffset(ee,ue,Ce=!1){let xe=5,Be="m";const Ke=/^(\d+)(\w)/.exec(ue);Ke&&Ke.length===3&&(xe=parseInt(Ke[1],10),Be=Ke[2]);const Xe=(0,de.CQ)(ee);return Ce&&(xe*=-1),Xe.add(xe,Be).valueOf()}render(){const{loaded:ee,annotations:ue,queryUser:Ce,queryTags:xe}=this.state;if(!ee)return S.createElement("div",null,"loading...");const Be=Ce||xe.length>0;return S.createElement(G.$,{autoHeightMin:"100%"},Be&&S.createElement("div",{className:this.style.filter},S.createElement("b",null,"Filter:"),Ce&&S.createElement(ne.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Ce.email}`},Ce.email),xe.length>0&&S.createElement(vr.P,{icon:"times",tags:xe,onClick:Ke=>this.onTagClick(Ke,!0),getAriaLabel:Ke=>`Remove ${Ke} tag`,className:this.style.tagList,ref:this.tagListRef})),ue.length<1&&S.createElement("div",{className:this.style.noneFound},"No Annotations Found"),S.createElement(Ns.L,{items:ue,renderItem:this.renderItem,getItemKey:Ke=>`${Ke.id}`}))}}const io=(0,dr.B)(F=>({noneFound:(0,H.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,H.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:F.spacing(.5),padding:F.spacing(.5)}),tagList:(0,H.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),Er={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Ro=new U.c(Eo).setPanelOptions(F=>{F.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Er.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Er.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(ee){return S.createElement(ke.B,{tags:ee.value,onChange:ee.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Er.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Er.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Er.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Er.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Er.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Er.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Er.navigateAfter,description:""})}).setPanelChangeHandler((F,ee,ue)=>ee==="ryantxu-annolist-panel"?ue:F.options);var Ss=e(68235),rs=e(91507),jr=e(15476),Oa=e(27957),Ka=e(55632),Un=e(85666),xt=e(71199),Tr=e(31180),Ao=e(39076),ur=e(93443),Kr=e(34104),mr=e(52408),lo=e(68489),Lo=e(39987),co=e(82401),Tt=e(46915),Pt=e(43348),qt=e(90854),jt=e(29129),on=e(66246),En=e(34588),Tn=e(91384),Nn=e(25108),kn=e(40429),Ea=e(42692),ta=e(33255);const ia=({config:F,onUPlotClick:ee,setFocusedSeriesIdx:ue,setFocusedPointIdx:Ce,setCoords:xe,setHover:Be,isToolTipOpen:Ke,isActive:Xe,setIsActive:dt,sync:gt})=>{Ke.current=!1;const vt=()=>{dt&&dt(!0)},Et=()=>{Ke.current||(xe(null),dt&&dt(!1))};let Nt=null,Dt=null;F.addHook("init",Ot=>{Nt=Ot.root.parentElement,Dt=Ot.over,Nt?.addEventListener("click",ee),Dt.addEventListener("mouseleave",Et),Dt.addEventListener("mouseenter",vt),gt&&gt()===Ea.m.Crosshair&&Ot.root.classList.add("shared-crosshair")});const Lt=()=>{Ke.current&&(xe(null),ee())};F.addHook("drawClear",Lt),F.addHook("destroy",()=>{Nt?.removeEventListener("click",ee),Dt?.removeEventListener("mouseleave",Et),Dt?.removeEventListener("mouseenter",vt),Lt()});let Ht;F.addHook("syncRect",(Ot,Vt)=>{Ht=Vt});const Rt=F.getTooltipInterpolator();return Rt&&F.addHook("setCursor",Ot=>{Ke.current||Rt(ue,Ce,Vt=>{if(Vt){xe(null);return}if(!Ht)return;const{x:pt,y:_t}=(0,ta._)(Ot,Ht);pt!==void 0&&_t!==void 0&&xe({canvas:{x:Ot.cursor.left,y:Ot.cursor.top},viewport:{x:pt,y:_t}})},Ot)}),F.addHook("setLegend",Ot=>{if(!Ke.current&&!Rt&&Ce(Ot.legend.idx),Ot.cursor.idxs!=null)for(let Vt=0;Vt<Ot.cursor.idxs.length;Vt++){const pt=Ot.cursor.idxs[Vt];if(pt!=null){const _t={xIndex:pt,yIndex:0,pageX:Ht.left+Ot.cursor.left,pageY:Ht.top+Ot.cursor.top};(!Ke.current||!_t)&&Be(_t);return}}}),F.addHook("setSeries",(Ot,Vt)=>{Ke.current||ue(Vt)}),F};var Aa=e(23420),Ms=e(72680),Ga=e(11056),_s=e(55820),us=e(35560),ns=e(86850),Rs=e(99326),Vr=e(96609),os=e(28073),La=e(50282),ms=e(18700),fr=e(80431),Ta=e(24353),rr=e(77081),Qr=e(1383),ao=e(17473);const uo=Qr.Gj,Fl=Qr.Gj,Kl=8,ei=30,Hi=.65,zo=.1,Ds=.15,Vl=5,_l=10,Gi=.1;function $l(F,ee,ue,Ce,xe){const Be=(0,qt.X1)(F,14),Ke=ee/(Be.width+2)*14,Xe=ue/Ce,dt=Math.min(Xe,Ke);return{fontSize:Math.min(dt,xe??dt),textMetrics:Be}}function zl(F,ee){const{xOri:ue,xDir:Ce,rawValue:xe,getColor:Be,formatValue:Ke,formatShortValue:Xe,fillOpacity:dt=1,showValue:gt,xSpacing:vt=0}=F,Et=ue===xt.wN.Horizontal,Nt=!F.text?.valueSize,Dt=F.stacking!==xt.o0.None,Lt=F.stacking===xt.o0.Percent;let{groupWidth:Ht,barWidth:Rt,barRadius:Ot=0}=F;Dt&&([Ht,Rt]=[Rt,Ht]);let Vt,pt;const _t=yn=>Array.from(yn.data[0].map((Fn,Kn)=>Kn)),fn=vt===0?void 0:(yn,Fn)=>{const Kn=yn.bbox.width,ya=Ce*(Et?1:-1);let ba=Fn.length,Ra=ba-1,Wa=0,Bs=Kn/us.Z.pxRatio,gs=Math.abs(Math.floor(Bs/vt));Wa=ba<gs?0:Math.ceil(ba/gs);let ar=Fn.map((Ks,Vo)=>Wa!==0&&(vt>0?Vo:Ra-Vo)%Wa>0?null:Ks);return ya===1?ar:ar.reverse()},Yt=(yn,Fn,Kn,ya,ba)=>{if(F.xTimeAuto){let Ra=yn.scales.x,Wa=Ra.min,Bs=Ra.max;Ra.min=yn.data[0][0],Ra.max=yn.data[0][yn.data[0].length-1];let gs=(0,jt.mr)(yn,Fn,Kn,ya,ba);return Ra.min=Wa,Ra.max=Bs,gs}return Fn.map(Ra=>Et?Xe(0,Ra):Ke(0,Ra))},un=(yn,Fn,Kn)=>{Fn=0,Kn=Math.max(1,yn.data[0].length-1);let ya=0;(0,Qr.Qm)(yn.data[0].length,Ht,uo,0,(Ra,Wa,Bs)=>{ya=Wa+Bs/2});let ba=Kn-Fn;if(ya===.5)Fn-=ba;else{let Wa=(1/(1-ya*2)*ba-ba)/2;Fn-=Wa,Kn+=Wa}return[Fn,Kn]};let rn=(yn,Fn)=>{let Kn=Array.from({length:Fn},()=>({offs:Array(yn).fill(0),size:Array(yn).fill(0)}));return(0,Qr.Qm)(yn,Ht,uo,null,(ya,ba,Ra)=>{(0,Qr.Qm)(Fn,Rt,Fl,null,(Wa,Bs,gs)=>{Kn[Wa].offs[ya]=ba+Ra*Bs,Kn[Wa].size[ya]=Ra*gs})}),Kn},Zt=(yn,Fn)=>{let Kn=Array.from({length:Fn},()=>({offs:Array(yn).fill(0),size:Array(yn).fill(0)}));return(0,Qr.Qm)(yn,Ht,uo,null,(ya,ba,Ra)=>{(0,Qr.Qm)(Fn,Rt,Fl,null,(Wa,Bs,gs)=>{Kn[Wa].offs[ya]=ba,Kn[Wa].size[ya]=Ra})}),Kn};const pn=Et?zo:Ds,nn=Et?Vl:_l;let bn=[],qn=[],Qn=1,Rn,Hn=F.text?.valueSize??ei,Ca=nn,na=1/0,Ua=1/0,Ma=Be!=null,wa=Ma?{fill:{unit:3,values:(yn,Fn)=>qn[Fn].fill},stroke:{unit:3,values:(yn,Fn)=>qn[Fn].stroke}}:{},ea=us.Z.paths.bars({radius:Lt?0:Dt?(yn,Fn)=>Fn===yn.data.length-1?[Ot,0]:[0,0]:Ot,disp:{x0:{unit:2,values:(yn,Fn)=>bn[Fn].offs},size:{unit:2,values:(yn,Fn)=>bn[Fn].size},...wa},each:(yn,Fn,Kn,ya,ba,Ra,Wa)=>{ya-=yn.bbox.left,ba-=yn.bbox.top;let Bs=yn.data[Fn][Kn];Et?(na=Math.min(na,Bs<0?yn.bbox.height-(ba+Wa):ba),Ua=Ra):(na=Wa,Ua=Math.min(Ua,Bs<0?ya:yn.bbox.width-(ya+Ra)));let gs={x:ya,y:ba,w:Ra,h:Wa,sidx:Fn,didx:Kn};if(F.fullHighlight&&(F.xOri===xt.wN.Horizontal?(gs.y=0,gs.h=yn.bbox.height):(gs.x=0,gs.w=yn.bbox.width)),Vt.add(gs),gt!==xt.Jp.Never){const ar=xe(Fn,Kn);let Ks=1;Lt&&Ia[Fn][Kn]&&(Ks=Ia[Fn][Kn]);const Vo=Ks===0?0:ar/Ks,Xo=Ke(Fn,Vo);if(Ca=Math.min(Ca,Math.round(pn*(Et?Ra:Wa))),Rn[Kn]===void 0&&(Rn[Kn]={}),Rn[Kn][Fn]={text:Xo,value:xe(Fn,Kn),hidden:!1},Nt){const{fontSize:to,textMetrics:lr}=$l(Rn[Kn][Fn].text,Ua*(Et?Hi:1)-(Et?0:Ca),na*(Et?1:Hi)-(Et?Ca:0),1);Rn[Kn][Fn].textMetrics=lr;let Ps=Math.round(Math.min(Hn,ei,to));Qn=Ps/Hn*(Ps/14),Hn=Ps}else Rn[Kn][Fn].textMetrics=(0,qt.X1)(Rn[Kn][Fn].text,Hn);let vi=Et?0:-Math.round(Gi*Hn),Ur=xe(Fn,Kn);if(F.negY?.[Fn]&&Ur!=null&&(Ur*=-1),Ur!=null){const to=yn.bbox.left+(Et?ya+Ra/2:Ur<0?ya-Ca:ya+Ra+Ca),lr=yn.bbox.top+(Et?Ur<0?ba+Wa+Ca:ba-Ca:ba+Wa/2-vi),{textMetrics:Ps={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Rn[Kn][Fn];let oo=0,no=0;Et?(oo=Ps.width*Qn/2,no=Ur>0?(Ps.actualBoundingBoxAscent+Ps.actualBoundingBoxDescent)*Qn:0):(no=(Ps.actualBoundingBoxAscent+Ps.actualBoundingBoxDescent)*Qn/2,oo=Ur<0?Ps.width*Qn:0),Rn[Kn][Fn].x=to,Rn[Kn][Fn].y=lr,Rn[Kn][Fn].bbox={x:to-oo,y:lr-no,w:Ps.width*Qn,h:(Ps.actualBoundingBoxAscent+Ps.actualBoundingBoxDescent)*Qn}}}}});const Cn=yn=>{let Fn=yn.over;Fn.style.overflow="hidden",yn.root.querySelectorAll(".u-cursor-pt").forEach(Kn=>{Kn.style.borderRadius="0",F.fullHighlight&&(Kn.style.zIndex="-1")})},Yn={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(yn,Fn)=>{if(Fn===1){pt=null;let Kn=yn.cursor.left*us.Z.pxRatio,ya=yn.cursor.top*us.Z.pxRatio;Vt.get(Kn,ya,1,1,ba=>{(0,ao.Pn)(Kn,ya,ba.x,ba.y,ba.x+ba.w,ba.y+ba.h)&&(pt=ba)})}return pt&&Fn===pt.sidx?pt.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(yn,Fn)=>{let Kn=pt&&Fn===pt.sidx;return{left:Kn?pt.x/us.Z.pxRatio:-10,top:Kn?pt.y/us.Z.pxRatio:-10,width:Kn?pt.w/us.Z.pxRatio:0,height:Kn?pt.h/us.Z.pxRatio:0}}}},ca=yn=>{if(Vt=Vt||new ao.lW(0,0,yn.bbox.width,yn.bbox.height),Vt.clear(),yn.series.forEach(Fn=>{Fn._paths=null}),Dt?bn=[null,...Zt(yn.data[0].length,yn.data.length-1)]:bn=[null,...rn(yn.data[0].length,yn.data.length-1)],Ma){qn=[null];for(let Fn=1;Fn<yn.data.length;Fn++){let Kn=yn.data[Fn].map((ya,ba)=>ya!=null?Be(Fn,ba,ya):null);qn.push({fill:dt<1?Kn.map(ya=>ya!=null?(0,rr.alpha)(ya,dt):null):Kn,stroke:Kn})}}Rn={},Hn=F.text?.valueSize??ei,Ca=nn,na=Ua=1/0},Jn=yn=>{if(gt===xt.Jp.Never||Hn<Kl)return;yn.ctx.save(),yn.ctx.fillStyle=ee.colors.text.primary,yn.ctx.font=`${Hn}px ${ee.typography.fontFamily}`;let Fn,Kn;for(const ya in Rn){let ba=!0;for(const Ra in Rn[ya]){const Wa=Rn[ya][Ra],{text:Bs,x:gs=0,y:ar=0}=Wa;let{value:Ks}=Wa;F.negY?.[Ra]&&Ks!=null&&(Ks*=-1);let Vo=Et?"center":Ks!==null&&Ks<0?"right":"left",Xo=Et?Ks!==null&&Ks<0?"top":"alphabetic":"middle";if(Vo!==Fn&&(yn.ctx.textAlign=Fn=Vo),Xo!==Kn&&(yn.ctx.textBaseline=Kn=Xo),gt===xt.Jp.Always)yn.ctx.fillText(Bs,gs,ar);else if(gt===xt.Jp.Auto){let{bbox:vi}=Wa,Ur=!1;if(vi==null)Ur=!0,Wa.hidden=!0;else if(!ba)for(const to in Rn[ya]){if(to===Ra)continue;const lr=Rn[ya][to],{bbox:Ps,hidden:oo}=lr;if(!oo&&Ps&&(0,ao.kK)(vi,Ps)){Ur=!0,Wa.hidden=!0;break}}ba=!1,!Ur&&yn.ctx.fillText(Bs,gs,ar)}}}yn.ctx.restore()},Pa=(yn,Fn,Kn,ya)=>{pt?(yn(pt.sidx),Fn(pt.didx),Kn()):Kn(!0)};let Ia=null;function xa(yn,Fn){return Ia=null,(0,fr.Bj)(yn[0],Fn,({totals:Kn})=>{Ia=Kn})}return{cursor:Yn,xRange:un,xValues:Yt,xSplits:_t,hFilter:fn,barsBuilder:ea,init:Cn,drawClear:ca,draw:Jn,interpolateTooltip:Pa,prepData:xa}}const xs={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:xt.wm.Auto,showValue:xt.Jp.Auto,stacking:xt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},Ci={fillOpacity:80,gradientMode:xt.FI.None,lineWidth:1};function kl(F){return F===Ka.wm.Vertical?{xOri:xt.wN.Horizontal,xDir:xt.bQ.Right,yOri:xt.wN.Vertical,yDir:xt.bQ.Up}:{xOri:xt.wN.Vertical,xDir:xt.bQ.Down,yOri:xt.wN.Horizontal,yDir:xt.bQ.Right}}const ti=({frame:F,theme:ee,orientation:ue,showValue:Ce,groupWidth:xe,barWidth:Be,barRadius:Ke=0,stacking:Xe,text:dt,rawValue:gt,getColor:vt,fillOpacity:Et,allFrames:Nt,xTickLabelRotation:Dt,xTickLabelMaxLength:Lt,xTickLabelSpacing:Ht=0,legend:Rt,timeZone:Ot,fullHighlight:Vt})=>{const pt=new La.U,_t=(Qn,Rn)=>(0,ns.zc)(F.fields[Qn].display(Rn)),fn=(Qn,Rn)=>yo(_t(Qn,Rn),Lt),Yt=kl(ue);F.fields.length===2&&(xe=Be,Be=1);const un={xOri:Yt.xOri,xDir:Yt.xDir,groupWidth:xe,barWidth:Be,barRadius:Ke,stacking:Xe,rawValue:gt,getColor:vt,fillOpacity:Et,formatValue:_t,formatShortValue:fn,timeZone:Ot,text:dt,showValue:Ce,legend:Rt,xSpacing:Ht,xTimeAuto:F.fields[0]?.type===Un.fS.time&&!F.fields[0].config.unit?.startsWith("time:"),negY:F.fields.map(Qn=>Qn.config.custom?.transform===xt.pR.NegativeY),fullHighlight:Vt},rn=zl(un,ee);if(pt.setCursor(rn.cursor),pt.addHook("init",rn.init),pt.addHook("drawClear",rn.drawClear),pt.addHook("draw",rn.draw),pt.setTooltipInterpolator(rn.interpolateTooltip),Dt!==0){let Qn=50,Rn=Yt.xOri===xt.wN.Horizontal?14:5;pt.setPadding(ni(F,Dt,Lt,Qn,Rn))}pt.setPrepData(rn.prepData),pt.addScale({scaleKey:"x",isTime:!1,range:rn.xRange,distribution:xt.wf.Ordinal,orientation:Yt.xOri,direction:Yt.xDir});const Zt=F.fields[0].config.custom?.axisPlacement!==xt.LB.Hidden?Yt.xOri===xt.wN.Horizontal?xt.LB.Bottom:xt.LB.Left:xt.LB.Hidden,pn=F.fields[0].config.custom?.axisPlacement!==xt.LB.Hidden;pt.addAxis({scaleKey:"x",isTime:!1,placement:Zt,label:F.fields[0].config.custom?.axisLabel,splits:rn.xSplits,filter:Yt.xOri===0?rn.hFilter:void 0,values:rn.xValues,timeZone:Ot,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Yt.xOri===0?Dt*-1:0,theme:ee,show:pn});let nn=0;const bn=Do(Rt);for(let Qn=1;Qn<F.fields.length;Qn++){const Rn=F.fields[Qn];nn++;const Hn={...Ci,...Rn.config.custom},Ca=Rn.config.unit||ms.j,na=(0,Rs.fD)(Rn),Ma=(0,Rs.YO)(Rn,ee).color;let wa=Hn.axisSoftMin,ea=Hn.axisSoftMax;if(wa==null&&Rn.config.min==null&&(wa=0),ea==null&&Rn.config.max==null&&(ea=0),Hn.thresholdsStyle&&Rn.config.thresholds&&(Hn.thresholdsStyle.mode??xt.i3.Off)!==xt.i3.Off&&pt.addThresholds({config:Hn.thresholdsStyle,thresholds:Rn.config.thresholds,scaleKey:Ca,theme:ee,hardMin:Rn.config.min,hardMax:Rn.config.max,softMin:Hn.axisSoftMin,softMax:Hn.axisSoftMax}),pt.addSeries({scaleKey:Ca,pxAlign:!0,lineWidth:Hn.lineWidth,lineColor:Ma,fillOpacity:Hn.fillOpacity,theme:ee,colorMode:na,pathBuilder:rn.barsBuilder,show:!Hn.hideFrom?.viz,gradientMode:Hn.gradientMode,thresholds:Rn.config.thresholds,hardMin:Rn.config.min,hardMax:Rn.config.max,softMin:Hn.axisSoftMin,softMax:Hn.axisSoftMax,dataFrameFieldIndex:{fieldIndex:bn?Qn:Nt[0].fields.findIndex(Cn=>Cn.type===Un.fS.number&&Cn.state?.seriesIndex===nn-1),frameIndex:0}}),pt.addScale({scaleKey:Ca,min:Rn.config.min,max:Rn.config.max,softMin:wa,softMax:ea,centeredZero:Hn.axisCenteredZero,orientation:Yt.yOri,direction:Yt.yDir,distribution:Hn.scaleDistribution?.type,log:Hn.scaleDistribution?.log}),Hn.axisPlacement!==xt.LB.Hidden){let Cn=Hn.axisPlacement;(!Cn||Cn===xt.LB.Auto)&&(Cn=xt.LB.Left),Yt.xOri===1&&(Cn===xt.LB.Left&&(Cn=xt.LB.Bottom),Cn===xt.LB.Right&&(Cn=xt.LB.Top));let Yn={scaleKey:Ca,label:Hn.axisLabel,size:Hn.axisWidth,placement:Cn,formatValue:(ca,Jn)=>(0,ns.zc)(Rn.display(ca,Jn)),filter:Yt.yOri===0?rn.hFilter:void 0,tickLabelRotation:Yt.xOri===1?Dt*-1:0,theme:ee,grid:{show:Hn.axisGridShow}};Hn.axisBorderShow&&(Yn.border={show:!0}),Hn.axisColorMode===xt.yK.Series&&(Yn.color=Ma),pt.addAxis(Yn)}}let qn=(0,fr.i7)(F);return pt.setStackingGroups(qn),pt};function yo(F,ee){return F.length>ee?F.substring(0,ee).concat("..."):F}function ni(F,ee,ue,Ce=0,xe=0){const Be=F.fields[0].values,Ke=jt.gD,Xe=F.fields[0].display,dt=Dt=>Xe?Xe(Be[Dt]):Be[Dt];let gt=0;for(let Dt=0;Dt<Be.length;Dt++){let Lt=(0,qt.X1)(yo((0,ns.zc)(dt(Dt)),ue),Ke);gt=Lt.width>gt?Lt.width:gt}const vt=ee>0?Math.cos(ee*Math.PI/180)*(0,qt.X1)(yo((0,ns.zc)(dt(Be.length-1)),ue),Ke).width:0,Et=ee<0?Math.cos(ee*-1*Math.PI/180)*(0,qt.X1)(yo((0,ns.zc)(dt(0)),ue),Ke).width:0,Nt=Math.sin((ee>=0?ee:ee*-1)*Math.PI/180)*gt-xe;return[Math.round(jt.gD*us.Z.pxRatio),vt,Nt,Math.max(0,Et-Ce)]}function yr(F,ee,ue){if(!F.length||F.every(Et=>Et.length===0))return{warn:"No data in response"};(0,Oa.UY)(F);const Ce=F.length===1?(0,Vr.Y3)(F[0],F[0].fields.findIndex(Et=>Et.type===Un.fS.time)):(0,Vr._9)({frames:F});if(!Ce)return{warn:"Unable to join data"};let xe;if(ue.colorByField&&(xe=(0,Ta.findField)(Ce,ue.colorByField),!xe))return{warn:"Color field not found"};let Be;if(ue.xField&&(Be=(0,Ta.findField)(Ce,ue.xField),!Be))return{warn:"Configured x field not found"};let Ke,Xe,dt=[];for(const Et of Ce.fields)if(Et!==Be)switch(Et.type){case Un.fS.string:Ke||(Ke=Et);break;case Un.fS.time:Xe||(Xe=Et);break;case Un.fS.number:{const Nt={...Et,state:{...Et.state,seriesIndex:dt.length},config:{...Et.config,custom:{...Et.config.custom,stacking:{group:"_",mode:ue.stacking}}},values:Et.values.map(Dt=>Number.isFinite(Dt)||Dt==null?Dt:null)};ue.stacking===xt.o0.Percent&&(Nt.config.unit="percentunit",Nt.display=(0,os.U)({field:Nt,theme:ee})),dt.push(Nt)}}let gt=Be;if(gt||(gt=Ke||Xe),!gt)return{warn:"Bar charts requires a string or time field"};if(!dt.length)return{warn:"No numeric fields found"};if(xe&&dt.length>1){const Et=dt.find(Nt=>Nt!==xe);Et&&(dt=[Et])}let vt=(0,ae.cloneDeep)(dt);return ue.stacking===xt.o0.Percent&&vt.map(Et=>{const Nt=Ce.fields.find(Dt=>(0,Oa.CZ)(Dt,Ce)===(0,Oa.CZ)(Dt,Ce));Et.config.unit=Nt?.config?.unit??void 0,Et.display=(0,os.U)({field:Et,theme:ee})}),dt.unshift(gt),vt.unshift(gt),{aligned:Ce,colorByField:xe,viz:[{fields:dt,length:gt.values.length}],legend:{fields:vt,length:gt.values.length}}}const Do=F=>!!(F?.sortBy&&F.sortDesc!==null),ai=10,Hl=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(F,ee)=>ee.text?.valueSize===F.text?.valueSize],ji=({data:F,options:ee,fieldConfig:ue,width:Ce,height:xe,timeZone:Be,id:Ke})=>{const Xe=(0,Y.l4)(),{eventBus:dt}=(0,Pt.R9)(),gt=(0,S.useRef)(void 0),vt=(0,S.useRef)(!1),[Et,Nt]=(0,S.useState)(void 0),[Dt,Lt]=(0,S.useState)(null),[Ht,Rt]=(0,S.useState)(null),[Ot,Vt]=(0,S.useState)(null),[pt,_t]=(0,S.useState)(!1),[fn,Yt]=(0,S.useState)(!1),un=()=>{vt.current=!1,Lt(null),Yt(!1)},rn=()=>{vt.current=!vt.current,Yt(vt.current)},Zt=(0,S.useRef)(),pn=(0,S.useRef)(),nn=(0,S.useMemo)(()=>yr(F.series,Xe,ee),[F.series,Xe,ee]),bn="viz"in nn?nn:null;pn.current=bn?.colorByField;const qn=(0,S.useRef)(1e4);(0,S.useMemo)(()=>{qn.current++},[ee]);const Qn=(0,S.useMemo)(()=>{const Cn=bn?.viz[0],Yn=Zt.current;return Cn&&Yn&&(0,co.Ch)(Cn,Yn,!0)||qn.current++,Zt.current=Cn,(F.structureRev??0)+qn.current},[bn,F.structureRev]),Rn=(0,S.useMemo)(()=>!ee.orientation||ee.orientation===Ka.wm.Auto?Ce<xe?Ka.wm.Horizontal:Ka.wm.Vertical:ee.orientation,[Ce,xe,ee.orientation]),Hn=(0,S.useMemo)(()=>{if(ee.xTickLabelMaxLength)return ee.xTickLabelMaxLength;{const Cn=ee.xTickLabelRotation,Yn=(0,qt.X1)("M",jt.gD).width;return xe/2/(Math.sin((Cn>=0?Cn:Cn*-1)*Math.PI/180)*Yn)-3}},[xe,ee.xTickLabelRotation,ee.xTickLabelMaxLength]);if("warn"in nn)return S.createElement(Tt.Z,{panelId:Ke,fieldConfig:ue,data:F,message:nn.warn,needsNumberField:!0});const Ca=(Cn,Yn,ca)=>{const Jn=Yn==null?null:Cn.fields[Yn];if(Jn){const xa=(0,Oa.CZ)(Jn,Cn);Yn=nn.aligned.fields.findIndex(yn=>xa===(0,Oa.CZ)(yn,nn.aligned))}const Pa=ee.fullHighlight&&ee.stacking!==xt.o0.None?xt.f3.Multi:ee.tooltip.mode,Ia=ee.tooltip.mode===xt.f3.Multi?ee.tooltip.sort:xt.As.None;return S.createElement(S.Fragment,null,fn&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Aa.P,{onClick:un,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(_s.H,{data:nn.aligned,rowIndex:ca,columnIndex:Yn,sortOrder:Ia,mode:Pa}))},na=Cn=>{const{legend:Yn}=ee;if(!Cn||Yn.showLegend===!1)return null;if(nn.colorByField){const ca=(0,Ga.$m)([nn.colorByField],Xe);if(ca?.length)return S.createElement(on.AY.Legend,{placement:Yn.placement},S.createElement(En.l,{placement:Yn.placement,items:ca,displayMode:Yn.displayMode}))}return S.createElement(Tn.l,{data:[nn.legend],config:Cn,maxHeight:"35%",maxWidth:"60%",...ee.legend})},Ua=(Cn,Yn)=>Zt.current.fields[Cn].values[Yn];let Ma,wa=1;if(nn.colorByField){const Cn=nn.colorByField,Yn=Cn.display;wa=(Cn.config.custom.fillOpacity??100)/100,Ma=(ca,Jn)=>Yn(pn.current?.values[Jn]).color}else Zt.current.fields.some(Yn=>Yn.config.custom?.gradientMode===xt.FI.Scheme&&Yn.config.color?.mode===rs.S.Thresholds||Yn.config.mappings?.some(Jn=>Jn.type==="value"?Object.values(Jn.options).some(Pa=>Pa.color!=null):Jn.options.result.color!=null))&&(wa=(Zt.current.fields.find(ca=>ca.type===Un.fS.number).config.custom.fillOpacity??100)/100,Ma=(ca,Jn)=>{let Pa=Zt.current.fields[ca];return Pa.display(Pa.values[Jn]).color});const ea=(Cn,Yn,ca)=>{const{barWidth:Jn,barRadius:Pa=0,showValue:Ia,groupWidth:xa,stacking:yn,legend:Fn,tooltip:Kn,text:ya,xTickLabelRotation:ba,xTickLabelSpacing:Ra,fullHighlight:Wa}=ee;return ti({frame:Cn,getTimeRange:ca,timeZone:Be,theme:Xe,timeZones:[Be],eventBus:dt,orientation:Rn,barWidth:Jn,barRadius:Pa,showValue:Ia,groupWidth:xa,xTickLabelRotation:ba,xTickLabelMaxLength:Hn,xTickLabelSpacing:Ra,stacking:yn,legend:Fn,tooltip:Kn,text:ya,rawValue:Ua,getColor:Ma,fillOpacity:wa,allFrames:nn.viz,fullHighlight:Wa})};return S.createElement(Ms.d,{theme:Xe,frames:nn.viz,prepConfig:ea,propsToDiff:Hl,preparePlotFrame:Cn=>Cn[0],renderLegend:na,legend:ee.legend,timeZone:Be,timeRange:{from:1,to:1},structureRev:Qn,width:Ce,height:xe},Cn=>(gt.current!==Cn&&(gt.current=ia({config:Cn,onUPlotClick:rn,setFocusedSeriesIdx:Rt,setFocusedPointIdx:Vt,setCoords:Lt,setHover:Nt,isToolTipOpen:vt,isActive:pt,setIsActive:_t})),ee.tooltip.mode===xt.f3.None?null:S.createElement(Nn.h_,null,Et&&Dt&&Ht&&S.createElement(kn.S,{position:{x:Dt.viewport.x,y:Dt.viewport.y},offset:{x:ai,y:ai},allowPointerEvents:vt.current},Ca(nn.viz[0],Ht,Ot)))))};var ko=e(79106),si=e(96856),bi=e(36356);const Ho=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],Gl=F=>{let ee=F.value??0;const ue=ee<0;ue&&(ee*=-1);let Ce=Ho[0];for(const Ke of Ho)if(Ce=Ke,ee<=Ce.value)break;const xe=Ke=>{F.onChange(Ke*(ue?-1:1))},Be=()=>{F.onChange(F.value*-1)};return S.createElement(ko.Lh,null,S.createElement(si.S,{value:Ce.value,options:Ho,onChange:xe}),ee!==0&&S.createElement(sr.u,{content:"Require space from the right side",placement:"top"},S.createElement("div",null,S.createElement(bi.X,{value:ue,onChange:Be,label:"RTL"}))))};var Ha=e(51437);class Pi{getListWithDefaults(ee){return ee.getListAppender({name:Ha.y.BarChart,pluginId:"barchart",options:{showValue:xt.Jp.Never,legend:{calcs:[],displayMode:xt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:ue=>{ue.options.barWidth=.8}}})}getSuggestionsForData(ee){const ue=this.getListWithDefaults(ee),{dataSummary:Ce}=ee;Ce.frameCount===1&&(!Ce.hasNumberField||!Ce.hasStringField||Ce.rowCountTotal>50||(ue.append({name:Ha.y.BarChart}),Ce.numberFieldCount>1&&(ue.append({name:Ha.y.BarChartStacked,options:{stacking:xt.o0.Normal}}),ue.append({name:Ha.y.BarChartStackedPercent,options:{stacking:xt.o0.Percent}})),ue.append({name:Ha.y.BarChartHorizontal,options:{orientation:Ka.wm.Horizontal}}),Ce.numberFieldCount>1&&(ue.append({name:Ha.y.BarChartHorizontalStacked,options:{stacking:xt.o0.Normal,orientation:Ka.wm.Horizontal}}),ue.append({name:Ha.y.BarChartHorizontalStackedPercent,options:{orientation:Ka.wm.Horizontal,stacking:xt.o0.Percent}}))))}}const Si=new U.c(ji).useFieldConfig({standardOptions:{[Ss.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:rs.S.PaletteClassic}}},useCustomConfig:F=>{const ee=Ci;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ee.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ee.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Tr.q.fillGradient[0].value,settings:{options:Tr.q.fillGradient}}),F.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:xt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:xt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),F.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:xt.i3.Off},settings:{options:Tr.q.thresholdsDisplayModes},editor:Lo.F,override:Lo.F,process:jr.kG,shouldApply:()=>!0}),Ao.r(F,ee,!1),ur.B(F)}}).setPanelOptions((F,ee)=>{const ue=yr(ee.data,w.config.theme2,ee.options??{});let Ce="First string or time field";const xe="viz"in ue?ue.viz[0]:void 0;if(xe?.fields?.length){const Be=xe.fields[0];Ce+=` (${(0,Oa.CZ)(Be,xe)})`}F.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Ce}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Ka.wm.Auto,label:"Auto"},{value:Ka.wm.Horizontal,label:"Horizontal"},{value:Ka.wm.Vertical,label:"Vertical"}]},defaultValue:xs.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:xs.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Be=>Be.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:xs.xTickLabelSpacing,editor:Gl}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.Jp.Auto,label:"Auto"},{value:xt.Jp.Always,label:"Always"},{value:xt.Jp.Never,label:"Never"}]},defaultValue:xs.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:Tr.q.stacking},defaultValue:xs.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:xs.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Be,Ke)=>Be.stacking&&Be.stacking!==xt.o0.None?!1:Dr(Ke)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:xs.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:xs.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:xs.fullHighlight}),F.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!ee.options?.fullHighlight||ee.options?.stacking===xt.o0.None)&&Kr.L(F),mr.J(F),lo.Z(F,!1)}).setSuggestionsSupplier(new Pi);function Dr(F){let ee=0;if(F)for(const ue of F)for(const Ce of ue.fields)Ce.type===Un.fS.number&&ee++;return ee}var ri=e(95070),mo=e(74934);const jl=F=>(0,ri.rD)(F);var Bo=e(44028),fo=e(45127);class Ql{getSuggestionsForData(ee){const{dataSummary:ue}=ee;if(!ue.hasData||!ue.hasNumberField)return;const Ce=ee.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});ue.numberFieldCount>50||(ue.hasStringField&&ue.frameCount===1&&ue.rowCountTotal<30?(Ce.append({name:Ha.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xt.QH.Basic,orientation:Ka.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ce.append({name:Ha.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xt.QH.Lcd,orientation:Ka.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Ce.append({name:Ha.y.BarGaugeBasic,options:{displayMode:xt.QH.Basic,orientation:Ka.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ce.append({name:Ha.y.BarGaugeLCD,options:{displayMode:xt.QH.Lcd,orientation:Ka.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Qi=new U.c(Bo.M).useFieldConfig().setPanelOptions(F=>{(0,mo.j)(F),(0,mo.h)(F),lo.Z(F),F.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:xt.QH.Gradient,label:"Gradient"},{value:xt.QH.Lcd,label:"Retro LCD"},{value:xt.QH.Basic,label:"Basic"}]},defaultValue:fo.v.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:xt.M8.Color,label:"Value color"},{value:xt.M8.Text,label:"Text color"},{value:xt.M8.Hidden,label:"Hidden"}]},defaultValue:fo.v.valueMode}).addRadio({path:"namePlacement",name:"Name placement",settings:{options:[{value:xt.L3.Auto,label:"Auto"},{value:xt.L3.Top,label:"Top"},{value:xt.L3.Left,label:"Left"}]},defaultValue:fo.v.namePlacement,showIf:ee=>ee.orientation!==Ka.wm.Vertical}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:fo.v.showUnfilled,showIf:ee=>ee.displayMode!=="lcd"}).addRadio({path:"sizing",name:"Bar size",settings:{options:[{value:xt.o.Auto,label:"Auto"},{value:xt.o.Manual,label:"Manual"}]},defaultValue:fo.v.sizing}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:fo.v.minVizWidth,settings:{min:0,max:300,step:1},showIf:ee=>ee.sizing===xt.o.Manual&&(ee.orientation===Ka.wm.Auto||ee.orientation===Ka.wm.Vertical)}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:fo.v.minVizHeight,settings:{min:0,max:300,step:1},showIf:ee=>ee.sizing===xt.o.Manual&&(ee.orientation===Ka.wm.Auto||ee.orientation===Ka.wm.Horizontal)}).addSliderInput({path:"maxVizHeight",name:"Max height",description:"Maximum row height (horizontal orientation)",defaultValue:fo.v.maxVizHeight,settings:{min:0,max:300,step:1},showIf:ee=>ee.sizing===xt.o.Manual&&(ee.orientation===Ka.wm.Auto||ee.orientation===Ka.wm.Horizontal)})}).setPanelChangeHandler(ri.ZH).setMigrationHandler(jl).setSuggestionsSupplier(new Ql);var Cr=e(33926),Yr=e(19596),Gs=e(73763),gr=e(9172),oi=e(56035),Or=e(50116);const Yl=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),Mi=Array(53);for(let F=0;F<Mi.length;F++)Mi[F]=2**F;const Zl=(F,ee=1)=>F==null?"-":F.toFixed(ee),cd={drawStyle:xt.l8.Line,showPoints:xt.Jp.Auto,axisPlacement:xt.LB.Auto},Jl=({frame:F,theme:ee,timeZones:ue,getTimeRange:Ce,eventBus:xe,sync:Be,allFrames:Ke,renderers:Xe,tweakScale:dt=Et=>Et,tweakAxis:gt=Et=>Et,eventsScope:vt="__global_"})=>{const Et=new La.U(ue[0]);let Nt;Et.setPrepData(rn=>(Nt=rn[0],(0,fr.Bj)(rn[0],Et.getStackingGroups())));const Dt=F.fields[0];if(!Dt)return Et;const Lt="x";let Ht="_x",Rt="";const Ot=Dt.config.custom?.axisPlacement!==xt.LB.Hidden?xt.LB.Bottom:xt.LB.Hidden,Vt=Dt.config.custom?.axisPlacement!==xt.LB.Hidden;if(Dt.type===Un.fS.time){Ht="time",Et.addScale({scaleKey:Lt,orientation:xt.wN.Horizontal,direction:xt.bQ.Right,isTime:!0,range:()=>{const Zt=Ce();return[Zt.from.valueOf(),Zt.to.valueOf()]}});const rn=ue.length>1?(Zt,pn)=>pn.map((nn,bn)=>bn<2?null:nn):void 0;for(let Zt=0;Zt<ue.length;Zt++){const pn=ue[Zt];Et.addAxis({scaleKey:Lt,isTime:!0,placement:Ot,show:Vt,label:Dt.config.custom?.axisLabel,timeZone:pn,theme:ee,grid:{show:Zt===0&&Dt.config.custom?.axisGridShow},filter:rn})}ue.length>1&&Et.addHook("drawAxes",Zt=>{Zt.ctx.save(),Zt.ctx.fillStyle=ee.colors.text.primary,Zt.ctx.textAlign="left",Zt.ctx.textBaseline="bottom";let pn=0;Zt.axes.forEach(nn=>{if(nn.side===2){let bn=nn._pos+nn._size;Zt.ctx.fillText(ue[pn],Zt.bbox.left,bn*us.Z.pxRatio),pn++}}),Zt.ctx.restore()})}else Dt.config.unit&&(Ht=Dt.config.unit),Et.addScale({scaleKey:Lt,orientation:xt.wN.Horizontal,direction:xt.bQ.Right,range:(rn,Zt,pn)=>[Dt.config.min??Zt,Dt.config.max??pn]}),Et.addAxis({scaleKey:Lt,placement:Ot,show:Vt,label:Dt.config.custom?.axisLabel,theme:ee,grid:{show:Dt.config.custom?.axisGridShow},formatValue:(rn,Zt)=>(0,ns.zc)(Dt.display(rn,Zt))});let pt=Xe?.flatMap(rn=>Object.values(rn.fieldMap).filter(Zt=>rn.indicesOnly.indexOf(Zt)===-1))??[],_t;for(let rn=1;rn<F.fields.length;rn++){const Zt=F.fields[rn],pn={...Zt.config,custom:{...cd,...Zt.config.custom}},nn=pn.custom;if(Zt===Dt||Zt.type!==Un.fS.number&&Zt.type!==Un.fS.enum)continue;let bn=Zt.display??Zl;Zt.config.custom?.stacking?.mode===xt.o0.Percent&&(bn=(0,os.U)({field:{...Zt,config:{...Zt.config,unit:"percentunit"}},theme:ee}));const qn=(0,Or.z)(pn,Zt.type),Qn=(0,Rs.fD)(Zt),Hn=(0,Rs.YO)(Zt,ee).color;if(Et.addScale(dt({scaleKey:qn,orientation:xt.wN.Vertical,direction:xt.bQ.Up,distribution:nn.scaleDistribution?.type,log:nn.scaleDistribution?.log,linearThreshold:nn.scaleDistribution?.linearThreshold,min:Zt.config.min,max:Zt.config.max,softMin:nn.axisSoftMin,softMax:nn.axisSoftMax,centeredZero:nn.axisCenteredZero,range:nn.stacking?.mode===xt.o0.Percent?(Cn,Yn,ca)=>(Yn=Yn<0?-1:0,ca=ca>0?1:0,[Yn,ca]):Zt.type===Un.fS.enum?(Cn,Yn,ca)=>[-1,Zt.config.type.enum.text.length]:void 0,decimals:Zt.config.decimals},Zt)),Rt||(Rt=qn),nn.axisPlacement!==xt.LB.Hidden){let Cn;nn.axisColorMode===xt.yK.Series&&(Qn.isByValue&&Zt.config.custom?.gradientMode===xt.FI.Scheme&&Qn.id===rs.S.Thresholds?Cn=(0,oi.P2)(1,ee,Qn,Zt.config.thresholds):Cn=Hn);const Yn={border:{show:nn.axisBorderShow||!1,width:1/devicePixelRatio,stroke:Cn||ee.colors.text.primary},ticks:{show:nn.axisBorderShow||!1,stroke:Cn||ee.colors.text.primary},color:Cn||ee.colors.text.primary};let ca,Jn,Pa;if(Yl.has(pn.unit))ca=Mi;else if(Zt.type===Un.fS.enum){let Ia=Zt.config.type.enum.text;Pa=Ia.map((xa,yn)=>yn),Jn=Ia}Et.addAxis(gt({scaleKey:qn,label:nn.axisLabel,size:nn.axisWidth,placement:nn.axisPlacement??xt.LB.Auto,formatValue:(Ia,xa)=>(0,ns.zc)(bn(Ia,xa)),theme:ee,grid:{show:nn.axisGridShow},decimals:Zt.config.decimals,distr:nn.scaleDistribution?.type,splits:Pa,values:Jn,incrs:ca,...Yn},Zt))}const Ca=nn.drawStyle===xt.l8.Points?xt.Jp.Always:nn.showPoints;let na=()=>null;nn.spanNulls!==!0&&(na=(Cn,Yn,ca,Jn)=>{let Pa=[],Ia=Cn.series[Yn];if(!ca&&Jn&&Jn.length){const[xa,yn]=Ia.idxs,Fn=Cn.data[0],Kn=Cn.data[Yn],ya=Math.round(Cn.valToPos(Fn[xa],"x",!0)),ba=Math.round(Cn.valToPos(Fn[yn],"x",!0));Jn[0][0]===ya&&Pa.push(xa);for(let Ra=0;Ra<Jn.length;Ra++){let Wa=Jn[Ra],Bs=Jn[Ra+1];if(Bs&&Wa[1]===Bs[0]){let gs=Cn.posToIdx(Wa[1],!0);if(Kn[gs]==null)for(let ar=1;ar<100;ar++){if(Kn[gs+ar]!=null){gs+=ar;break}if(Kn[gs-ar]!=null){gs-=ar;break}}Pa.push(gs)}}Jn[Jn.length-1][1]===ba&&Pa.push(yn)}return Pa.length?Pa:null});let{fillOpacity:Ua}=nn,Ma=null,wa=null;if(Zt.state?.origin){_t||(_t=Xl(F,Ke));const Cn=Ke[Zt.state.origin.frameIndex],Yn=Cn?.fields[Zt.state.origin.fieldIndex],ca=(0,Oa.CZ)(Yn??Zt,Cn,Ke);if(pt.indexOf(ca)>=0)Ma=()=>null,wa=()=>{};else if(nn.transform===xt.pR.Constant){const Jn=us.Z.paths.linear();Ma=(Pa,Ia)=>{const xa=Pa._data,yn=Ce();let Fn=[yn.from.valueOf(),yn.to.valueOf()],Kn=xa[Ia].find(Ra=>Ra!=null),ya=[Kn,Kn],ba=xa.slice();return ba[0]=Fn,ba[Ia]=ya,Jn({...Pa,_data:ba},Ia,0,1)}}if(nn.fillBelowTo){const Jn=F.fields.find(yn=>nn.fillBelowTo===yn.name||nn.fillBelowTo===yn.config?.displayNameFromDS||nn.fillBelowTo===(0,Oa.CZ)(yn,F,Ke)),Pa=Jn?(0,Oa.CZ)(Jn,F,Ke):nn.fillBelowTo,Ia=_t.get(ca),xa=_t.get(Pa);(0,ae.isNumber)(xa)&&(0,ae.isNumber)(Ia)?(Et.addBand({series:[Ia,xa],fill:void 0}),Ua||(Ua=35)):Ua=0}}let ea;Qn.id===rs.S.Thresholds&&(ea=Cn=>(0,Rs.YO)(Nt.fields[Cn],ee).color),Et.addSeries({pathBuilder:Ma,pointsBuilder:wa,scaleKey:qn,showPoints:Ca,pointsFilter:na,colorMode:Qn,fillOpacity:Ua,theme:ee,dynamicSeriesColor:ea,drawStyle:nn.drawStyle,lineColor:nn.lineColor??Hn,lineWidth:nn.lineWidth,lineInterpolation:nn.lineInterpolation,lineStyle:nn.lineStyle,barAlignment:nn.barAlignment,barWidthFactor:nn.barWidthFactor,barMaxWidth:nn.barMaxWidth,pointSize:nn.pointSize,spanNulls:nn.spanNulls||!1,show:!nn.hideFrom?.viz,gradientMode:nn.gradientMode,thresholds:pn.thresholds,hardMin:Zt.config.min,hardMax:Zt.config.max,softMin:nn.axisSoftMin,softMax:nn.axisSoftMax,dataFrameFieldIndex:Zt.state?.origin}),nn.thresholdsStyle&&pn.thresholds&&(nn.thresholdsStyle.mode??xt.i3.Off)!==xt.i3.Off&&Et.addThresholds({config:nn.thresholdsStyle,thresholds:pn.thresholds,scaleKey:qn,theme:ee,hardMin:Zt.config.min,hardMax:Zt.config.max,softMin:nn.axisSoftMin,softMax:nn.axisSoftMax})}let fn=(0,fr.i7)(F);Et.setStackingGroups(fn),Xe?.forEach(rn=>{_t||(_t=Xl(F,Ke));let Zt={};for(let pn in rn.fieldMap){let nn=rn.fieldMap[pn];Zt[pn]=_t.get(nn)}rn.init(Et,Zt)}),Et.scaleKeys=[Lt,Rt];const Yt=15;let un={dataIdx:(rn,Zt,pn,nn)=>{let bn=rn.data[Zt];if(bn[pn]==null){let qn=null,Qn=null,Rn;for(Rn=pn;qn==null&&Rn-- >0;)bn[Rn]!=null&&(qn=Rn);for(Rn=pn;Qn==null&&Rn++<bn.length;)bn[Rn]!=null&&(Qn=Rn);let Hn=rn.data[0],Ca=rn.valToPos(nn,"x"),na=Qn==null?1/0:rn.valToPos(Hn[Qn],"x"),Ua=qn==null?-1/0:rn.valToPos(Hn[qn],"x"),Ma=Ca-Ua,wa=na-Ca;Ma<=wa?Ma<=Yt&&(pn=qn):wa<=Yt&&(pn=Qn)}return pn}};if(Be&&Be()!==Ea.m.Off&&Dt.type===Un.fS.time){const rn={point:{[Lt]:null,[Rt]:null},data:F},Zt=new za.es(rn);un.sync={key:vt,filters:{pub:(pn,nn,bn,qn,Qn,Rn,Hn)=>Be&&Be()===Ea.m.Off?!1:(rn.rowIndex=Hn,bn<0&&qn<0?(rn.point[Ht]=null,rn.point[Rt]=null,xe.publish(new za.xH)):(rn.point[Ht]=nn.posToVal(bn,Lt),rn.point[Rt]=nn.posToVal(qn,Rt),rn.point.panelRelY=qn>0?qn/Rn:1,xe.publish(Zt),Zt.payload.down=void 0),!0)},scales:[Lt,Rt]}}return Et.setSync(),Et.setCursor(un),Et};function Xl(F,ee){const ue=new Map;return F.fields.forEach((Ce,xe)=>{const Be=Ce.state?.origin;if(Be){const Ke=ee[Be.frameIndex]?.fields[Be.fieldIndex];Ke&&ue.set((0,Oa.CZ)(Ke,ee[Be.frameIndex],ee),xe)}}),ue}const Yi=["legend","options","theme"];class Zi extends S.Component{constructor(){super(...arguments),this.prepConfig=(ee,ue,Ce)=>{const{eventBus:xe,eventsScope:Be,sync:Ke}=this.context,{theme:Xe,timeZone:dt,renderers:gt,tweakAxis:vt,tweakScale:Et}=this.props;return Jl({frame:ee,theme:Xe,timeZones:Array.isArray(dt)?dt:[dt],getTimeRange:Ce,eventBus:xe,sync:Ke,allFrames:ue,renderers:gt,tweakScale:Et,tweakAxis:vt,eventsScope:Be})},this.renderLegend=ee=>{const{legend:ue,frames:Ce}=this.props;return!ee||ue&&!ue.showLegend||!(0,Tn.o)(ee,Ce)?null:S.createElement(Tn.l,{data:Ce,config:ee,...ue})}}render(){return S.createElement(Ms.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:Yi,renderLegend:this.renderLegend})}}Zi.contextType=Pt.bb;const ii=(0,Y.HE)(Zi);ii.displayName="TimeSeries";var li=e(11386),ci=e(54565),Ze=e(32684),Je=e(45597),Ge=e(41614);const mt=(F,ee)=>{const ue=[],Ce=new Set;if(F.getLinks){const xe=F.values[ee],Be=F.display?F.display(xe):{text:`${xe}`,numeric:+xe};F.getLinks({calculatedValue:Be,valueRowIndex:ee}).forEach(Ke=>{const Xe=`${Ke.title}/${Ke.href}`;Ce.has(Xe)||(ue.push(Ke),Ce.add(Xe))})}return ue},St=({frames:F,seriesFrame:ee,dataIdxs:ue,seriesIdx:Ce,mode:xe=xt.f3.Single,sortOrder:Be=xt.As.None,isPinned:Ke})=>{const Xe=(0,Y.l4)(),dt=(0,Y.wW)(At),gt=ee.fields[0];if(!gt)return null;const vt=gt.display||(0,os.U)({field:gt,theme:Xe});let Et=vt(gt.values[ue[0]]).text,Nt=[],Dt=[];if(xe===xt.f3.Single||Ke){const Rt=ee.fields[Ce];if(!Rt)return null;const Ot=ue[Ce];Et=vt(gt.values[Ot]).text;const pt=(Rt.display||(0,os.U)({field:Rt,theme:Xe}))(Rt.values[Ot]);Nt=mt(Rt,Ot),Dt=[{label:(0,Oa.CZ)(Rt,ee,F),value:pt?(0,ns.zc)(pt):null,color:pt.color||rs.R,colorIndicator:Ge.F_.series,colorPlacement:Ge.Z2.first}]}if(xe===xt.f3.Multi&&!Ke){const Rt=ee.fields,Ot=[];for(let Vt=0;Vt<Rt.length;Vt++){const pt=ee.fields[Vt];if(!pt||pt===gt||pt.type===Un.fS.time||pt.type!==Un.fS.number||pt.config.custom?.hideFrom?.tooltip||pt.config.custom?.hideFrom?.viz)continue;const _t=ee.fields[Vt].values[ue[Vt]],fn=pt.display(_t);if(Ot.push(_t),Dt.push({label:pt.state?.displayName??pt.name,value:fn?(0,ns.zc)(fn):null,color:fn.color||rs.R,colorIndicator:Ge.F_.series,colorPlacement:Ge.Z2.first,isActive:Ce===Vt}),Be!==xt.As.None){const Yt=[...Dt],un=li.sortValues(Be);Dt.sort((rn,Zt)=>{const pn=Yt.indexOf(rn),nn=Yt.indexOf(Zt);return un(Ot[pn],Ot[nn])})}}}const Lt=()=>({label:gt.type===Un.fS.time?"":(0,Oa.CZ)(gt,ee,F),value:Et}),Ht=()=>Dt;return S.createElement("div",null,S.createElement("div",{className:dt.wrapper},S.createElement(Je.r,{headerLabel:Lt(),isPinned:Ke}),S.createElement(ci.X,{contentLabelValue:Ht(),isPinned:Ke}),Ke&&S.createElement(Ze.c,{dataLinks:Nt,canAnnotate:!1})))},At=F=>({wrapper:(0,H.css)({display:"flex",flexDirection:"column",width:Gs.ui})});var Ft=e(99640),Qt=e(48947),an=e(63956),sn=e(73342),On=e(59582);const Bn=({onDismiss:F,onSave:ee,timeZone:ue,data:Ce,selection:xe,annotation:Be,style:Ke})=>{const Xe=(0,Y.l4)(),dt=(0,Y.wW)(wn),gt=(0,Y.wW)(sn.t),[vt,Et]=(0,S.useState)(null),[Nt,Dt]=(0,S.useState)(null),Lt=(0,Qt.D)(vt,Nt,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let Ht=Ce.fields[0];if(!Ht)return null;const Rt=Ht.display||(0,os.U)({field:Ht,timeZone:ue,theme:Xe}),Ot=xe.min!==xe.max;return S.createElement(Nn.h_,null,S.createElement(S.Fragment,null,S.createElement("div",{style:Ke},S.createElement("div",{className:(0,H.cx)((0,H.css)`
                position: absolute;
                top: ${xe.bbox.top}px;
                left: ${xe.bbox.left}px;
                width: ${xe.bbox.width}px;
                height: ${xe.bbox.height}px;
              `,Ot?dt.overlayRange(Be):dt.overlay(Be))},S.createElement("div",{ref:Et,className:Ot?(0,H.cx)(gt(Be).markerBar,dt.markerBar):(0,H.cx)(gt(Be).markerTriangle,dt.markerTriangle)}))),S.createElement(On.C,{annotation:Be||{time:xe.min,timeEnd:xe.max},timeFormatter:Vt=>Rt(Vt).text,onSave:ee,onDismiss:F,ref:Dt,style:Lt.styles.popper,...Lt.attributes.popper})))},wn=F=>({overlay:ee=>{const ue=F.visualization.getColorByName(ee?.color||an.Jx);return(0,H.css)`
        border-left: 1px dashed ${ue};
      `},overlayRange:ee=>{const ue=F.visualization.getColorByName(ee?.color||an.Jx);return(0,H.css)`
        background: ${rr.alpha(ue,.1)};
        border-left: 1px dashed ${ue};
        border-right: 1px dashed ${ue};
      `},markerTriangle:(0,H.css)`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:(0,H.css)`
      top: 100%;
      left: 0;
      position: absolute;
    `}),zn=({data:F,timeZone:ee,config:ue,children:Ce})=>{const xe=(0,S.useRef)(),[Be,Ke]=(0,S.useState)(),[Xe,dt]=(0,S.useState)(!1),[gt,vt]=(0,S.useState)(null),Et=(0,Ft.Z)(),Nt=(0,S.useCallback)(()=>{vt(null),xe.current&&xe.current.setSelect({top:0,left:0,width:0,height:0}),dt(!1)},[dt,vt]);(0,S.useLayoutEffect)(()=>{let Lt=!1;ue.addHook("init",Rt=>{xe.current=Rt;const Ot=Rt.hooks.setSelect;if(Ot)for(let Vt=0;Vt<Ot.length;Vt++){const pt=Ot[Vt];pt!==Ht&&(Ot[Vt]=(..._t)=>{!Lt&&pt(..._t)})}}),ue.addHook("syncRect",(Rt,Ot)=>{Et()&&Ke(Ot)});const Ht=Rt=>{Lt&&(dt(!0),vt({min:Rt.posToVal(Rt.select.left,"x"),max:Rt.posToVal(Rt.select.left+Rt.select.width,"x"),bbox:{left:Rt.select.left,top:0,height:Rt.select.height,width:Rt.select.width}}),Lt=!1)};ue.addHook("setSelect",Ht),ue.setCursor({bind:{mousedown:(Rt,Ot,Vt)=>pt=>(Lt=pt.button===0&&(pt.metaKey||pt.ctrlKey),Vt(pt),null),mouseup:(Rt,Ot,Vt)=>pt=>(Lt&&Rt.select.width===0&&(Rt.select.left=Rt.cursor.left,Rt.select.height=Rt.bbox.height/window.devicePixelRatio),Vt(pt),null)}})},[ue,Ke,Et]);const Dt=(0,S.useCallback)(({coords:Lt})=>{if(!xe.current||!Be||!Lt)return;const Ht=xe.current.posToVal(Lt.plotCanvas.x,"x");Ht&&(vt({min:Ht,max:Ht,bbox:{left:Lt.plotCanvas.x,top:0,height:Be.height,width:0}}),dt(!0))},[Be]);return S.createElement(S.Fragment,null,Xe&&gt&&Be&&S.createElement(Bn,{selection:gt,onDismiss:Nt,onSave:Nt,data:F,timeZone:ee,style:{position:"absolute",top:`${Be.top}px`,left:`${Be.left}px`,width:`${Be.width}px`,height:`${Be.height}px`}}),Ce?Ce({startAnnotating:Dt}):null)};var ua=e(80193),jn=e(3953),ha=e(6037),la=e(85115),ma=e(46213),Fa=e(45502);const oa=({data:F,config:ee,onClose:ue,timeZone:Ce,replaceVariables:xe,...Be})=>{const[Ke,Xe]=(0,S.useState)(null),[dt,gt]=(0,S.useState)(null),[vt,Et]=(0,S.useState)(!1);(0,S.useLayoutEffect)(()=>{let Dt=null;ee.addHook("init",Lt=>{Lt.over.addEventListener("click",Ht=>{Dt!=null&&!Ht.metaKey&&!Ht.ctrlKey&&!Ht.shiftKey&&(Xe({viewport:{x:Ht.clientX,y:Ht.clientY},plotCanvas:{x:Ht.clientX-Lt.rect.left,y:Ht.clientY-Lt.rect.top}}),gt({seriesIdx:Dt,dataIdx:Lt.cursor.idxs[Dt]}),Et(!0))})}),ee.addHook("setSeries",(Lt,Ht)=>{Dt=Ht})},[ee]);const Nt=(0,S.useMemo)(()=>Be.defaultItems?Be.defaultItems.map(Dt=>({...Dt,items:Dt.items.map(Lt=>({...Lt,onClick:Ht=>{Ke&&Lt.onClick?.(Ht,{coords:Ke})}}))})):[],[Ke,Be.defaultItems]);return S.createElement(S.Fragment,null,vt&&Ke&&S.createElement(Va,{data:F,frames:Be.frames,defaultItems:Nt,timeZone:Ce,selection:{point:dt,coords:Ke},replaceVariables:xe,onClose:()=>{gt(null),Et(!1),ue&&ue()}}))},Va=({selection:F,timeZone:ee,defaultItems:ue,replaceVariables:Ce,data:xe,...Be})=>{const Ke=(0,S.useRef)(null),Xe=()=>{Be.onClose&&Be.onClose()};(0,jn.Z)(Ke,()=>{Xe()});const dt=xe.fields[0];if(!dt)return null;const gt=ue?[...ue]:[];let vt=()=>null;if(F.point){const{seriesIdx:Nt,dataIdx:Dt}=F.point,Lt=dt.display;if(Nt&&Dt!==null){const Ht=xe.fields[Nt],Rt=Ht.display(Ht.values[Dt]);Ht.config.links&&Ht.config.links.length>0&&Ht.getLinks&&gt.push({items:Ht.getLinks({valueRowIndex:Dt}).map(Vt=>({label:Vt.title,ariaLabel:Vt.title,url:Vt.href,target:Vt.target,icon:Vt.target==="_self"?"link":"external-link-alt",onClick:Vt.onClick}))}),vt=()=>S.createElement(ha.b,{timestamp:Lt(dt.values[Dt]).text,displayValue:Rt,seriesColor:Rt.color,displayName:(0,Oa.CZ)(Ht,xe,Be.frames)})}}const Et=()=>gt?.map((Nt,Dt)=>S.createElement(la.k,{key:`${Nt.label}${Dt}`,label:Nt.label},(Nt.items||[]).map(Lt=>S.createElement(ma.s,{key:Lt.url,url:Lt.url,label:Lt.label,target:Lt.target,icon:Lt.icon,active:Lt.active,onClick:Lt.onClick}))));return S.createElement(Fa.x,{renderMenuItems:Et,renderHeader:vt,x:F.coords.viewport.x,y:F.coords.viewport.y,onClose:Xe})};var Ya=e(24402),ps=e(40137),Ts=e(74337),Cs=e(64064),vs=e(45771),js=e(74322);const ws=({timeZone:F,dataFrame:ee,dataFrameFieldIndex:ue,config:Ce,exemplarColor:xe,clickedExemplarFieldIndex:Be,setClickedExemplarFieldIndex:Ke})=>{const Xe=(0,Y.wW)(br),[dt,gt]=(0,S.useState)(!1),[vt,Et]=(0,S.useState)(!1),[Nt,Dt]=S.useState(null),[Lt,Ht]=S.useState(null),{styles:Rt,attributes:Ot}=(0,Qt.D)(Nt,Lt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),Vt=(0,S.useRef)();(0,S.useEffect)(()=>{Be?.fieldIndex===ue.fieldIndex&&Be?.frameIndex===ue.frameIndex||Et(!1)},[Be,ue]);const pt=()=>{const pn=[S.createElement("rect",{fill:xe,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),S.createElement("path",{fill:xe,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),S.createElement("path",{fill:xe,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),S.createElement("rect",{fill:xe,key:"rectangle",width:"5",height:"5"}),S.createElement("path",{fill:xe,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),S.createElement("path",{fill:xe,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return pn[ue.frameIndex%pn.length]},_t=(0,S.useCallback)(()=>{Be===void 0&&(Vt.current&&clearTimeout(Vt.current),gt(!0))},[gt,Be]),fn=()=>{Et(!0)},Yt=(0,S.useCallback)(()=>{Vt.current=setTimeout(()=>{gt(!1)},150)},[gt]),un=(0,S.useCallback)(()=>{const pn=ee.fields.filter(na=>na.config.links?.length&&na.config.links?.length>0)||[],nn=[...pn,...ee.fields.filter(na=>!pn.includes(na))],bn=na=>(0,ps.dq)(na,{format:Ts.U6.fullDate,timeZone:F}),qn=()=>{Et(!1),gt(!1),Ke(void 0)};let Qn=[],Rn=[];nn.map((na,Ua)=>{const Ma=na.values[ue.fieldIndex];na.config.links?.length&&Rn?.push(...na.getLinks?.({valueRowIndex:ue.fieldIndex})||[]);const wa=na.display?na.display(Ma):{text:`${Ma}`,numeric:+Ma};Qn.push({name:na.name,value:Ma,valueString:(0,ns.zc)(wa),highlight:!1})});const Hn={position:"relative",top:"35px",right:"5px",marginRight:0},Ca=()=>w.config.featureToggles.newVizTooltips?S.createElement(S.Fragment,null,vt&&S.createElement(js.o,{onClick:qn,style:Hn}),S.createElement(vs.F,{displayValues:Qn,links:Rn})):S.createElement("div",{className:Xe.wrapper},vt&&S.createElement(js.o,{onClick:qn}),S.createElement("div",{className:Xe.body},S.createElement("div",{className:Xe.header},S.createElement("span",{className:Xe.title},"Exemplars")),S.createElement("div",null,S.createElement("table",{className:Xe.exemplarsTable},S.createElement("tbody",null,nn.map((na,Ua)=>{const Ma=na.values[ue.fieldIndex],wa=na.config.links?.length?na.getLinks?.({valueRowIndex:ue.fieldIndex}):void 0;return S.createElement("tr",{key:Ua},S.createElement("td",{valign:"top"},na.name),S.createElement("td",null,S.createElement("div",{className:Xe.valueWrapper},S.createElement("span",null,na.type===Un.fS.time?bn(Ma):Ma),wa&&S.createElement(Cs.Z,{links:wa}))))}))))));return S.createElement("div",{onMouseEnter:_t,onMouseLeave:Yt,className:Xe.tooltip,ref:Ht,style:Rt.popper,...Ot.popper},Ca())},[Ot.popper,ee.fields,ue,_t,Yt,Rt.popper,Xe,F,vt,Ke]),rn=Ce.getSeries().find(pn=>pn.props.dataFrameFieldIndex?.frameIndex===ue.frameIndex)?.props.lineColor,Zt=()=>{Ke(ue),fn()};return S.createElement(S.Fragment,null,S.createElement("div",{ref:Dt,onClick:Zt,onKeyDown:pn=>{pn.key==="Enter"&&Zt()},onMouseEnter:_t,onMouseLeave:Yt,className:Xe.markerWrapper,"data-testid":Re.wl.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0},S.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:rn},className:(0,H.cx)(Xe.marble,(dt||vt)&&Xe.activeMarble)},pt())),(dt||vt)&&S.createElement(Nn.h_,null,un()))},br=F=>{const ee=F.isDark?F.v1.palette.dark2:F.v1.palette.white,ue=F.isDark?F.v1.palette.dark9:F.v1.palette.gray5,Ce=F.isDark?F.v1.palette.black:F.v1.palette.white,xe=F.isDark?F.v1.palette.dark3:F.v1.palette.gray6;return{markerWrapper:(0,H.css)({padding:"0 4px 4px 4px",width:"8px",height:"8px",boxSizing:"content-box",transform:"translate3d(-50%, 0, 0)","&:hover":{"> svg":{transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"}}}),marker:(0,H.css)({width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:`4px solid ${F.v1.palette.red}`,pointerEvents:"none"}),wrapper:(0,H.css)({background:ee,border:`1px solid ${ue}`,borderRadius:F.shape.borderRadius(2),boxShadow:`0 0 20px ${Ce}`,padding:F.spacing(1)}),exemplarsTable:(0,H.css)({width:"100%","tr td":{padding:"5px 10px",whiteSpace:"nowrap",borderBottom:`4px solid ${F.components.panel.background}`},tr:{backgroundColor:F.colors.background.primary,"&:nth-child(even)":{backgroundColor:xe}}}),valueWrapper:(0,H.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",columnGap:F.spacing(1),"> span":{flexGrow:0},"> *":{flex:"1 1",alignSelf:"center"}}),tooltip:(0,H.css)({background:"none",padding:0,overflowY:"auto",maxHeight:"95vh"}),header:(0,H.css)({background:ue,padding:"6px 10px",display:"flex"}),title:(0,H.css)({fontWeight:F.typography.fontWeightMedium,paddingRight:F.spacing(2),overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),body:(0,H.css)({fontWeight:F.typography.fontWeightMedium,borderRadius:F.shape.borderRadius(2),overflow:"hidden"}),marble:(0,H.css)({display:"block",opacity:.5,transition:"transform 0.15s ease-out"}),activeMarble:(0,H.css)({transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"})}},_r=({exemplars:F,timeZone:ee,config:ue,visibleSeries:Ce})=>{const xe=(0,S.useRef)(),[Be,Ke]=(0,S.useState)();(0,S.useLayoutEffect)(()=>{ue.addHook("init",gt=>{xe.current=gt})},[ue]);const Xe=(0,S.useCallback)((gt,vt)=>{const Et=gt.fields.find(Ot=>Ot.name===Un.Ls),Nt=gt.fields.find(Ot=>Ot.name===Un.M5);if(!Et||!Nt||!xe.current)return;const Dt=Object.keys(xe.current.scales).find(Ot=>!["x","y"].some(Vt=>Vt===Ot))??ms.j,Lt=xe.current.scales[Dt].min,Ht=xe.current.scales[Dt].max;let Rt=Nt.values[vt.fieldIndex];return Lt!=null&&Rt<Lt&&(Rt=Lt),Ht!=null&&Rt>Ht&&(Rt=Ht),{x:xe.current.valToPos(Et.values[vt.fieldIndex],"x"),y:xe.current.valToPos(Rt,Dt)}},[]),dt=(0,S.useCallback)((gt,vt)=>{const Et=Ce!==void 0?Pr(Ce,gt,vt):!0,Nt=Ce!==void 0?As(gt,vt,Ce):void 0;return Et?S.createElement(ws,{setClickedExemplarFieldIndex:Ke,clickedExemplarFieldIndex:Be,timeZone:ee,dataFrame:gt,dataFrameFieldIndex:vt,config:ue,exemplarColor:Nt}):S.createElement(S.Fragment,null)},[ue,ee,Ce,Ke,Be]);return S.createElement(Ya.T,{config:ue,id:"exemplars",events:F,renderEventMarker:dt,mapEventToXYCoords:Xe})},Zr=(F,ee)=>{const ue=F.series.filter(xe=>xe.props.show),Ce=[];return ee?.length&&ue.forEach(xe=>{const Be=xe.props?.dataFrameFieldIndex?.frameIndex,Ke=xe.props?.dataFrameFieldIndex?.fieldIndex;if(Be!==void 0&&Ke!==void 0){const Xe=ee[Be]?.fields[Ke];Xe?.labels&&Ce.push({labels:Xe.labels,color:xe.props?.lineColor??""})}}),{labels:Ce,totalSeriesCount:F.series.length}},As=(F,ee,ue)=>{let Ce;return ue.labels.some(xe=>{const Be=Object.keys(xe.labels),Ke=F.fields.filter(Xe=>Be.find(dt=>dt===Xe.name));return Ke.length&&Ke.every((dt,gt,vt)=>{const Et=dt.values[ee.fieldIndex];return xe.labels[dt.name]===Et})?(Ce=xe.color,!0):!1}),Ce},Pr=(F,ee,ue)=>{let Ce=!1;return F.labels.length===F.totalSeriesCount?Ce=!0:F.labels.some(xe=>{const Be=Object.keys(xe.labels);if(Object.keys(xe.labels).length===0)Ce=!0;else{const Ke=ee.fields.filter(Xe=>Be.find(dt=>dt===Xe.name));Ke.length&&(Ce=F.labels.some(Xe=>Object.keys(Xe.labels).every(dt=>{const gt=Xe.labels[dt];return Ke.find(vt=>vt.values[ue.fieldIndex]===gt)})))}return Ce}),Ce},$s=({config:F,onChangeTimeRange:ee})=>{const ue=(0,S.useRef)(),[Ce,xe]=(0,S.useState)([]),[Be,Ke]=(0,S.useState)();if((0,S.useLayoutEffect)(()=>{F.addHook("init",Dt=>{ue.current=Dt}),F.addHook("setScale",Dt=>{xe(Dt.data?.[0]??[]),Ke(Dt.scales.x??void 0)})},[F]),Ce.length<2||!ee||!Be||!Be.time||!Be.min||!Be.max)return null;let Xe=0,dt=Ce.length-1;for(;Xe<=dt&&Ce[Xe]==null;)Xe++;for(;dt>=0&&Ce[dt]==null;)dt--;const gt=Ce[Xe],vt=Ce[dt],Et=Be.min,Nt=Be.max;return gt==null||vt==null||gt<=Nt&&vt>=Et?null:S.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},S.createElement("div",null,S.createElement("div",null,"Data outside time range"),S.createElement(ne.zx,{onClick:Dt=>ee({from:gt,to:vt}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};$s.displayName="OutsideRangePlugin";var In=e(43031),aa=e.n(In);const Da=({step:F,y:ee,dragBounds:ue,mapPositionToValue:Ce,formatValue:xe,onChange:Be})=>{const Ke=(0,Y.l4)();let Xe=ee,dt="none";ee<(ue.top??0)&&(dt="top"),ee>(ue.bottom??0)+22&&(dt="bottom"),dt==="bottom"&&(Xe=ue.bottom??ee),dt==="top"&&(Xe=ue.top??ee);const gt=typeof Be!="function",vt=(0,Y.wW)(ja,F,dt,gt),[Et,Nt]=(0,S.useState)(F.value),Dt=(0,S.useMemo)(()=>Ke.colors.getContrastText(Ke.visualization.getColorByName(F.color)),[F.color,Ke]);return S.createElement(aa(),{axis:"y",grid:[1,1],disabled:gt,onStop:gt?ae.noop:(Lt,Ht)=>(Be(Ce(Ht.lastY)),!1),onDrag:(Lt,Ht)=>Nt(Ce(Ht.lastY)),position:{x:0,y:Xe},bounds:ue},S.createElement("div",{className:vt.handle,style:{color:Dt}},S.createElement("span",{className:vt.handleText},xe(Et))))};Da.displayName="ThresholdDragHandle";const ja=(F,ee,ue,Ce)=>{const xe=F.visualization.getColorByName(ee.color),Be=Ls(ue),Ke=ue!=="none";return{handle:(0,H.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${xe};
      cursor: ${Ce?"initial":"grab"};
      border-top-right-radius: ${F.shape.radius.default};
      border-bottom-right-radius: ${F.shape.radius.default};
      ${Ke&&(0,H.css)`
        margin-top: 0;
        border-radius: ${F.shape.radius.default};
      `}
      background: ${xe};
      font-size: ${F.typography.bodySmall.fontSize};
      &:before {
        ${Be};
      }
    `,handleText:(0,H.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Ls(F){const ee=F==="none",ue=Ce=>(0,H.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Ce}px;
    border-right-color: inherit;
    border-top: ${Ce}px solid transparent;
    border-bottom: ${Ce}px solid transparent;
  `;return ee?(0,H.css)`
      ${ue(9)};
      left: -9px;
    `:F==="top"?(0,H.css)`
      ${ue(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:F==="bottom"?(0,H.css)`
      ${ue(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const as=60,Ir=({config:F,fieldConfig:ee,onThresholdsChange:ue})=>{const Ce=(0,S.useRef)(),[xe,Be]=(0,S.useState)(0);(0,S.useLayoutEffect)(()=>{F.setPadding([0,as,0,0]),F.addHook("init",Xe=>{Ce.current=Xe}),F.addHook("draw",()=>{Be(Xe=>Xe+1)})},[F]);const Ke=(0,S.useMemo)(()=>{const Xe=Ce.current;if(!Xe)return null;const dt=ee.defaults.thresholds;if(!dt)return null;const gt=(0,Or.z)(ee.defaults,Un.fS.number),vt=ee.defaults.decimals,Et=[];for(let Nt=0;Nt<dt.steps.length;Nt++){const Dt=dt.steps[Nt],Lt=Xe.valToPos(Dt.value,gt);if(Number.isNaN(Lt)||!Number.isFinite(Lt))continue;const Ht=Xe.bbox.height/window.devicePixelRatio,Ot=typeof ue=="function"?pt=>{const _t=[...dt.steps.slice(0,Nt),...dt.steps.slice(Nt+1),{...dt.steps[Nt],value:pt}].sort((fn,Yt)=>fn.value-Yt.value);ue({...dt,steps:_t})}:void 0,Vt=S.createElement(Da,{key:`${Dt.value}-${Nt}`,step:Dt,y:Lt,dragBounds:{top:0,bottom:Ht},mapPositionToValue:pt=>Xe.posToVal(pt,gt),formatValue:pt=>(0,ns.Cf)(gt)(pt,vt).text,onChange:Ot});Et.push(Vt)}return Et},[xe,ee,ue]);return Ce.current?S.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Ce.current.bbox.left+Ce.current.bbox.width)/window.devicePixelRatio}px`,top:`${Ce.current.bbox.top/window.devicePixelRatio}px`,width:`${as}px`,height:`${Ce.current.bbox.height/window.devicePixelRatio}px`}},Ke):null};Ir.displayName="ThresholdControlsPlugin";var fs=e(71805),go=e(70816),Co=e(63621),ss=e(95164);function Rr(F){let ee=new Map;return F.map(Ce=>({...Ce,fields:Ce.fields.map(xe=>{if(xe.type===Un.fS.enum){let Be=(0,Or.z)(xe.config,xe.type),Ke=ee.get(Be);Ke||(Ke=[],ee.set(Be,Ke));let Xe=xe.values.toArray().slice(),dt=xe.config.type.enum.text;if(Ke.length>0)for(let gt=0;gt<Xe.length;gt++)Xe[gt]+=Ke.length;return Ke.push(...dt),xe.config.type.enum.text=Ke,{...xe,values:Xe}}return xe})}))}function Sr(F,ee,ue,Ce){if(!F?.length)return null;let xe=Ce!=null;Ce!=null&&Ce>0&&(F=[{...F[0],fields:[F[0].fields[Ce],...F[0].fields.filter((dt,gt)=>gt!==Ce)]}]);for(let dt of F)for(let gt of dt.fields)gt.type===Un.fS.time&&typeof gt.values[0]!="number"&&(gt.values=(0,go.p8)(gt,{destinationType:Un.fS.time}).values);let Be=0;e:for(let dt of F)for(let gt of dt.fields)if(gt.type===Un.fS.enum&&++Be>1){F=Rr(F);break e}let Ke;const Xe=[];for(let dt of F){const gt=[];let vt=!1,Et=!1,Nt=xe?dt:(0,Co.w)({frame:dt,refFieldPseudoMin:ue?.from.valueOf(),refFieldPseudoMax:ue?.to.valueOf()});const Dt=(0,ss.I)(Nt).fields;for(let Lt=0;Lt<Dt?.length;Lt++){const Ht=Dt[Lt];switch(Ht.type){case Un.fS.time:vt=!0,gt.push(Ht);break;case Un.fS.number:Et=xe?Lt>0:!0,Ke={...Ht,values:Ht.values.map(Vt=>Number.isFinite(Vt)||Vt==null?Vt:null)},gt.push(Ke);break;case Un.fS.enum:Et=!0;case Un.fS.string:Ke={...Ht,values:Ht.values},gt.push(Ke);break;case Un.fS.boolean:Et=!0;const Rt=Ht.config?.custom??{},Ot={...Ht.config,max:1,min:0,custom:Rt};Rt.lineInterpolation!==xt.KC.StepBefore&&(Rt.lineInterpolation=xt.KC.StepAfter),Ke={...Ht,config:Ot,type:Un.fS.number,values:Ht.values.map(Vt=>Vt==null?Vt:Vt?1:0)},(0,ns.br)(Ot.unit)||(Ot.unit="bool",Ke.display=(0,os.U)({field:Ke,theme:ee})),gt.push(Ke);break}}(xe||vt)&&Et&&Xe.push({...dt,length:Nt.length,fields:gt})}return Xe.length?(Ji(Xe,ee,0),ho(Xe,ee),Xe):null}const ho=(F,ee)=>{const{palette:ue}=ee.visualization;for(const Ce of F)for(const xe of Ce.fields)if(xe.type===Un.fS.enum){const Be=ue[xe.state?.seriesIndex%ue.length],Ke=ee.visualization.getColorByName(Be),Xe=xe.config.type.enum;Xe.color=Array(Xe.text.length).fill(Ke),xe.display=(0,os.U)({field:xe,theme:ee})}},Ji=(F,ee,ue)=>{let Ce=0;F.forEach(xe=>{xe.fields.forEach((Be,Ke)=>{Ke!==ue&&(Be.type===Un.fS.number||Be.type===Un.fS.boolean||Be.type===Un.fS.enum)&&(Be.state={...Be.state,seriesIndex:Ce++},Be.display=(0,os.U)({field:Be,theme:ee}))})})};function Xi(F,ee){return!F||!F.length?[ee]:F.map(ue=>ue?.length?ue:ee)}function dd(F,ee,ue,Ce,xe){return F.fields.forEach(Be=>{if(Be.state?.origin?.frameIndex===void 0||ee[Be.state?.origin?.frameIndex]===void 0)return;const Ke=[];for(const dt of ee[Be.state?.origin?.frameIndex].fields)if(dt.type===Un.fS.string)if(Be.values instanceof fs.o){const gt={...dt};gt.values=new fs.o(dt.values,Be.values.getOrderArray()),Ke.push(gt)}else Ke.push(dt);const Xe={fields:[...F.fields,...Ke],length:F.fields.length+Ke.length};Be.getLinks=(0,Yr.oB)(Xe,Be,Be.state.scopedVars,ue,Ce,xe)}),F}var Ar=(F=>(F.Candles="candles",F.CandlesVolume="candles+volume",F.Volume="volume",F))(Ar||{}),qi=(F=>(F.Candles="candles",F.OHLCBars="ohlcbars",F))(qi||{}),wo=(F=>(F.CloseClose="close-close",F.OpenClose="open-close",F))(wo||{});const ql={down:"red",flat:"gray",up:"green"},or={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:xt.jK.List,showLegend:!0,placement:"bottom",calcs:[]}},is={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function ud(F,ee,ue){const Ce=(0,Ta.findField)(F,ue[ee.key]);if(!Ce)for(const xe of F.fields){const Be=(0,Oa.CZ)(xe,F).toLowerCase();if(ee.defaults.includes(Be)||ee.defaults.includes(xe.name))return xe}return Ce}function ir(F,ee,ue,Ce){if(!F?.length)return null;const xe=ee.fields??{},Be=F.length===1?(0,Vr.Y3)(F[0],F[0].fields.findIndex(Dt=>Dt.type===Un.fS.time)):(0,Vr._9)({frames:F});if(!Be?.length)return null;const Ke={aligned:Be,frame:Be,names:{}},Xe=Sr([Be],ue,Ce);if(!Xe)return null;const dt=Ke.frame=Xe[0],gt=dt.fields.findIndex(Dt=>Dt.type===Un.fS.time);if(gt<0)return null;const vt=new Set;for(const Dt of Object.values(is)){const Lt=ud(dt,Dt,xe);Lt&&(Ke[Dt.key]=Lt,vt.add(Lt))}if(!Ke.open&&!Ke.close&&(Ke.open=dt.fields.find(Dt=>Dt.type===Un.fS.number),Ke.open&&vt.add(Ke.open)),Ke.open&&!Ke.close&&!xe.close){const Dt=Ke.open.values.slice(1);Dt.push(Dt[Dt.length-1]),Ke.close={...Ke.open,values:Dt,name:"Next open",state:void 0},vt.add(Ke.close),dt.fields.push(Ke.close),Ke.autoOpenClose=!0}if(Ke.close&&!Ke.open&&!xe.open){const Dt=Ke.close.values.slice();Dt.unshift(Dt[0]),Dt.length=dt.length,Ke.open={...Ke.close,values:Dt,name:"Previous close",state:void 0},vt.add(Ke.open),dt.fields.push(Ke.open),Ke.autoOpenClose=!0}!Ke.high&&!xe.high&&(Ke.high=Ke.open),!Ke.low&&!xe.low&&(Ke.low=Ke.open),ee.mode===Ar.Volume?(Ke.high&&(Ke.high!==Ke.open&&vt.delete(Ke.high),Ke.high=void 0),Ke.low&&(Ke.low!==Ke.open&&vt.delete(Ke.low),Ke.low=void 0)):ee.mode===Ar.Candles&&Ke.volume&&(vt.delete(Ke.volume),Ke.volume=void 0);for(const Dt of Object.values(is)){const Lt=Ke[Dt.key];Lt&&(Ke.names[Dt.key]=(0,Oa.CZ)(Lt,Ke.frame))}const Et=dt.fields[gt],Nt=[Et];ee.includeAllFields?Nt.push(...dt.fields.filter(Dt=>Dt!==Et)):Nt.push(...vt),Ke.frame={...Ke.frame,fields:Nt};for(let Dt=0;Dt<Ke.frame.fields.length;Dt++){const Lt=Ke.frame.fields[Dt];Lt.state={...Lt.state,seriesIndex:Dt-1,origin:{fieldIndex:Dt,frameIndex:0}}}return Ke}const{alpha:el}=rr;function tl(F){let{mode:ee,candleStyle:ue,fields:Ce,colorStrategy:xe,upColor:Be,downColor:Ke,flatColor:Xe,volumeAlpha:dt,flatAsUp:gt=!0}=F;const vt=ee!==Ar.Volume&&Ce.high!=null&&Ce.low!=null,Et=vt&&ue===qi.Candles,Nt=ee!==Ar.Candles&&Ce.volume!=null;function Dt(_t,fn,Yt,un,rn){return _t>0?Yt:_t<0?un:rn?Yt:fn}let Lt=0,Ht=Ce.open,Rt=Ce.high,Ot=Ce.low,Vt=Ce.close,pt=Ce.volume;return _t=>{let fn,Yt,un,rn,Zt,pn;vt&&(un=new Path2D,Yt=new Path2D,fn=new Path2D),Nt&&(rn=new Path2D,Zt=new Path2D,pn=new Path2D);let nn=new Path2D,bn=_t.ctx,qn=_t.data[Lt],Qn=_t.data[Ht],Rn=_t.data[Vt],Hn=vt?_t.data[Rt]:null,Ca=vt?_t.data[Ot]:null,na=Nt?_t.data[pt]:null,Ua=pt!=null?Math.round(_t.valToPos(0,_t.series[pt].scale,!0)):null,[Ma,wa]=_t.series[0].idxs,ea=_t.data[0],Cn=Qn,Yn=_t.bbox.width;if(ea.length>1){let xa=null;for(let yn=0,Fn=1/0;yn<ea.length;yn++)if(Cn[yn]!==void 0){if(xa!=null){let Kn=Math.abs(ea[yn]-ea[xa]);Kn<Fn&&(Fn=Kn,Yn=Math.abs(_t.valToPos(ea[yn],"x",!0)-_t.valToPos(ea[xa],"x",!0)))}xa=yn}}let ca=Math.round(.6*Yn),Jn=2,Pa=2;ca<=12&&(Jn=Pa=1);let Ia=Math.floor(ca/2);for(let xa=Ma;xa<=wa;xa++){let yn=Math.round(_t.valToPos(qn[xa],"x",!0)),Fn=xa===Ma?0:Math.sign(Rn[xa]-Rn[xa-1]),Kn=Math.sign(Rn[xa]-Qn[xa]);if(Nt&&pn&&Zt&&rn){let ya=Dt(xe===wo.CloseClose?Fn:Kn,pn,Zt,rn,xa===Ma&&wo.CloseClose?!1:gt),ba=Math.round(_t.valToPos(na[xa],_t.series[pt].scale,!0));ya.rect(yn-Ia,ba,ca,Ua-ba)}if(vt&&un&&Yt&&fn){let ya=Dt(xe===wo.CloseClose?Fn:Kn,un,Yt,fn,xa===Ma&&wo.CloseClose?!1:gt),ba=Math.round(_t.valToPos(Hn[xa],_t.series[Rt].scale,!0)),Ra=Math.round(_t.valToPos(Ca[xa],_t.series[Ot].scale,!0));ya.rect(yn-Math.floor(Jn/2),ba,Jn,Ra-ba);let Wa=Math.round(_t.valToPos(Qn[xa],_t.series[Ht].scale,!0)),Bs=Math.round(_t.valToPos(Rn[xa],_t.series[Vt].scale,!0));if(Et){let gs=Math.min(Wa,Bs),ar=Math.max(Wa,Bs),Ks=Math.max(1,ar-gs);ya.rect(yn-Ia,gs,ca,Ks),xe===wo.CloseClose&&Kn>=0&&Ks>Pa*2&&nn.rect(yn-Ia+Pa,gs+Pa,ca-Pa*2,Ks-Pa*2)}else ya.rect(yn-Ia,Wa,Ia,Jn),ya.rect(yn,Bs,Ia,Jn)}}bn.save(),bn.rect(_t.bbox.left,_t.bbox.top,_t.bbox.width,_t.bbox.height),bn.clip(),Nt&&pn&&Zt&&rn&&(bn.fillStyle=el(Be,dt),bn.fill(Zt),bn.fillStyle=el(Ke,dt),bn.fill(rn),bn.fillStyle=el(Xe,dt),bn.fill(pn)),vt&&un&&Yt&&fn&&(bn.fillStyle=Be,bn.fill(Yt),bn.fillStyle=Ke,bn.fill(fn),bn.fillStyle=Xe,bn.fill(un),bn.globalCompositeOperation="destination-out",bn.fill(nn)),bn.restore()}}const $u=({data:F,id:ee,timeRange:ue,timeZone:Ce,width:xe,height:Be,options:Ke,fieldConfig:Xe,onChangeTimeRange:dt,replaceVariables:gt})=>{const{sync:vt,canAddAnnotations:Et,onThresholdsChange:Nt,canEditThresholds:Dt,showThresholds:Lt}=(0,Pt.R9)(),Ht=(0,Y.l4)(),Rt=(0,S.useMemo)(()=>ir(F.series,Ke,Ht,ue),[F.series,Ke,Ht,ue]),{renderers:Ot,tweakScale:Vt,tweakAxis:pt,shouldRenderPrice:_t}=(0,S.useMemo)(()=>{let un=(Jn,Pa)=>Jn,rn=(Jn,Pa)=>Jn,Zt={renderers:[],tweakScale:un,tweakAxis:rn,shouldRenderPrice:!1};if(!Rt)return Zt;const pn=Rt.names;if(!Object.keys(pn).length)return Zt;const{mode:nn,candleStyle:bn,colorStrategy:qn}=Ke,Qn={...ql,...Ke.colors};let{open:Rn,high:Hn,low:Ca,close:na,volume:Ua}=pn;if(Rn==null||na==null)return Zt;let Ma=.5,wa=-1,ea=!1;if(Ua!=null&&nn!==Ar.Candles){let Jn=Rt.volume;if(Jn!=null){ea=!0;let{fillOpacity:Pa}=Jn.config.custom;Pa&&(Ma=Pa/100),nn!==Ar.Volume&&(Jn.config={...Jn.config},Jn.config.unit="short",Jn.display=(0,os.U)({field:Jn,theme:Kt.config.theme2}),rn=(Ia,xa)=>{if(xa.name===Rt.volume?.name){let yn=(Fn,Kn)=>{let ya=[],ba=Fn.series[wa].max;for(let Ra=0;Ra<Kn.length&&(ya.push(Kn[Ra]),!(ba&&Kn[Ra]>ba));Ra++);return ya};Ia.space=20,Ia.filter=yn,Ia.ticks={...Ia.ticks,filter:yn}}return Ia},un=(Ia,xa)=>(xa.name===Rt.volume?.name&&(Ia.range=(yn,Fn,Kn)=>[0,Kn*7]),Ia))}}let Cn=nn!==Ar.Volume&&Hn!=null&&Ca!=null;if(!Cn&&!ea)return Zt;let Yn={},ca=[];return Cn?Yn={open:Rn,high:Hn,low:Ca,close:na}:ca.push(Rn,na),ea&&(Yn.volume=Ua,Yn.open=Rn,Yn.close=na),{shouldRenderPrice:Cn,renderers:[{fieldMap:Yn,indicesOnly:ca,init:(Jn,Pa)=>{wa=Pa.volume,Jn.addHook("drawAxes",tl({mode:nn,fields:Pa,upColor:Kt.config.theme2.visualization.getColorByName(Qn.up),downColor:Kt.config.theme2.visualization.getColorByName(Qn.down),flatColor:Kt.config.theme2.visualization.getColorByName(Qn.flat),volumeAlpha:Ma,colorStrategy:qn,candleStyle:bn,flatAsUp:!0}))}}],tweakScale:un,tweakAxis:rn}},[Ke,F.structureRev,F.series.length]);if(!Rt)return S.createElement(Tt.Z,{panelId:ee,fieldConfig:Xe,data:F,needsTimeField:!0,needsNumberField:!0});if(_t)for(let un in Ot[0].fieldMap){let rn=Rt[un];rn.config={...rn.config,custom:{...rn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const fn=!!(Et&&Et()),Yt=Kt.config.featureToggles.newVizTooltips&&vt&&vt()===Ea.m.Off;return S.createElement(ii,{frames:[Rt.frame],structureRev:F.structureRev,timeRange:ue,timeZone:Ce,width:xe,height:Be,legend:Ke.legend,renderers:Ot,tweakAxis:pt,tweakScale:Vt,options:Ke},(un,rn)=>(rn.fields.forEach(Zt=>{Zt.getLinks=(0,Yr.oB)(rn,Zt,Zt.state.scopedVars,gt,Ce)}),S.createElement(S.Fragment,null,Yt?S.createElement(Gs.x2,{config:un,hoverMode:Gs.cm.xAll,queryZoom:dt,clientZoom:!0,render:(Zt,pn,nn,bn=!1)=>S.createElement(St,{frames:[Rt.frame],seriesFrame:rn,dataIdxs:pn,seriesIdx:nn,mode:xt.f3.Multi,isPinned:bn})}):S.createElement(S.Fragment,null,S.createElement(gr.R,{config:un,onZoom:dt,withZoomY:!0}),S.createElement(ta.i,{data:rn,config:un,mode:xt.f3.Multi,sync:vt,timeZone:Ce})),F.annotations&&S.createElement(ua._,{annotations:F.annotations,config:un,timeZone:Ce}),Yt?void 0:fn?S.createElement(zn,{data:rn,timeZone:Ce,config:un},({startAnnotating:Zt})=>S.createElement(oa,{data:rn,config:un,timeZone:Ce,replaceVariables:gt,defaultItems:fn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(pn,nn)=>{nn&&Zt({coords:nn.coords})}}]}]:[]})):S.createElement(oa,{data:rn,config:un,timeZone:Ce,replaceVariables:gt,defaultItems:[]}),F.annotations&&S.createElement(_r,{config:un,exemplars:F.annotations,timeZone:Ce}),(Dt&&Nt||Lt)&&S.createElement(Ir,{config:un,fieldConfig:Xe,onThresholdsChange:Dt?Nt:void 0}),S.createElement($s,{config:un,onChangeTimeRange:dt}))))};class zu{getSuggestionsForData(ee){const{dataSummary:ue}=ee;if(!ee.data?.series||!ue.hasData||ue.timeFieldCount<1||ue.numberFieldCount<2||ue.numberFieldCount>10)return;const Ce=ir(ee.data.series,or,w.config.theme2);if(!Ce||Ce.open===Ce.high&&Ce.open===Ce.low)return;ee.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ha.y.Candlestick,options:or,fieldConfig:{defaults:{},overrides:[]},score:Ce.autoOpenClose?Ka._.Good:Ka._.Best})}}const er=[{label:"Candles",value:Ar.Candles},{label:"Volume",value:Ar.Volume},{label:"Both",value:Ar.CandlesVolume}],ec=[{label:"Candles",value:qi.Candles},{label:"OHLC Bars",value:qi.OHLCBars}],Qa=[{label:"Since Open",value:wo.OpenClose},{label:"Since Prior Close",value:wo.CloseClose}],ku=F=>F.type===Un.fS.number;function xi(F,ee,ue){let Ce="Auto ";if(ue){const xe=ue[ee.key];xe?.config?(Ce+="= "+(0,Oa.CZ)(xe),xe===ue?.open&&ee.key!=="open"&&(Ce+=` (${ee.defaults.join(",")})`)):Ce+=`(${ee.defaults.join(",")})`}F.addFieldNamePicker({path:`fields.${ee.key}`,name:ee.name,description:ee.description,settings:{filter:ku,placeholderText:Ce}})}const Hu=new U.c($u).useFieldConfig((0,Cr.F)(Cr.r)).setPanelOptions((F,ee)=>{const ue=ee.options??or,Ce=ir(ee.data,ue,w.config.theme2);F.addRadio({path:"mode",name:"Mode",description:"",defaultValue:or.mode,settings:{options:er}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:or.candleStyle,settings:{options:ec},showIf:xe=>xe.mode!==Ar.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:or.colorStrategy,settings:{options:Qa}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:ql.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:ql.down}),xi(F,is.open,Ce),ue.mode!==Ar.Volume&&(xi(F,is.high,Ce),xi(F,is.low,Ce)),xi(F,is.close,Ce),ue.mode!==Ar.Candles&&xi(F,is.volume,Ce),F.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:or.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),mr.J(F)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new zu);var tc=e(26371),md=e(91977),fd=e(98827),nc=e(81548),di=e(41354),Ti=e(75923),Gu=e(46211),ju=e(9133),Uo=e(41327),gd=e(69514),Mr=e(7257);const Qu=F=>({dashlistSectionHeader:(0,H.css)`
    padding: ${F.spacing(.25,1)};
    margin-right: ${F.spacing(1)};
  `,dashlistSection:(0,H.css)`
    margin-bottom: ${F.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,H.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${F.colors.border.weak};
    margin-right: ${F.spacing(1)};
    padding: ${F.spacing(1)};
    align-items: center;

    &:hover {
      a {
        color: ${F.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistFolder:(0,H.css)`
    color: ${F.colors.text.secondary};
    font-size: ${F.typography.bodySmall.fontSize};
    line-height: ${F.typography.body.lineHeight};
  `,dashlistTitle:(0,H.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,H.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,H.css)`
    position: relative;
    list-style: none;
  `});async function ac(F,ee){let ue=Promise.resolve([]);if(F.showStarred){const vt={limit:F.maxItems,starred:"true"};ue=(0,Uo.i)().search(vt)}let Ce=Promise.resolve([]),xe=[];if(F.showRecentlyViewed){let vt=await gd.Z.getDashboardOpened();xe=(0,ae.take)(vt,F.maxItems),Ce=(0,Uo.i)().search({dashboardUIDs:xe,limit:F.maxItems})}let Be=Promise.resolve([]);if(F.showSearch){const vt=F.folderUID===""?"general":F.folderUID,Et={limit:F.maxItems,query:ee(F.query,{},"text"),folderUIDs:vt,tag:F.tags.map(Nt=>ee(Nt,{},"text")),type:"dash-db"};Be=(0,Uo.i)().search(Et)}const[Ke,Xe,dt]=await Promise.all([ue,Be,Ce]);let gt=new Map;for(const vt of xe){const Et=dt.find(Nt=>Nt.uid===vt);Et&&gt.set(vt,{...Et,isRecent:!0})}return Xe.forEach(vt=>{vt.uid&&(gt.has(vt.uid)?gt.get(vt.uid).isSearchResult=!0:gt.set(vt.uid,{...vt,isSearchResult:!0}))}),Ke.forEach(vt=>{vt.uid&&(gt.has(vt.uid)?gt.get(vt.uid).isStarred=!0:gt.set(vt.uid,{...vt,isStarred:!0}))}),gt}function Yu(F){const[ee,ue]=(0,S.useState)(new Map),Ce=(0,Z.useDispatch)();(0,S.useEffect)(()=>{ac(F.options,F.replaceVariables).then(Rt=>{ue(Rt)})},[F.options,F.replaceVariables,F.renderCounter]);const xe=async(Rt,Ot)=>{const{uid:Vt,title:pt,url:_t}=Ot;Rt.preventDefault(),Rt.stopPropagation();const fn=await(0,ze.h4)().starDashboard(Ot.uid,Ot.isStarred),Yt=new Map(ee);Yt.set(Ot?.uid??"",{...Ot,isStarred:fn}),ue(Yt),Ce((0,ju.OQ)({id:Vt??"",title:pt,url:_t,isStarred:fn}))},[Be,Ke,Xe]=(0,S.useMemo)(()=>{const Rt=[...ee.values()];return[Rt.filter(Ot=>Ot.isStarred).sort((Ot,Vt)=>Ot.title.localeCompare(Vt.title)),Rt.filter(Ot=>Ot.isRecent),Rt.filter(Ot=>Ot.isSearchResult).sort((Ot,Vt)=>Ot.title.localeCompare(Vt.title))]},[ee]),{showStarred:dt,showRecentlyViewed:gt,showHeadings:vt,showSearch:Et}=F.options,Nt=[{header:"Starred dashboards",dashboards:Be,show:dt},{header:"Recently viewed dashboards",dashboards:Ke,show:gt},{header:"Search",dashboards:Xe,show:Et}],Dt=(0,Y.wW)(Qu),Lt=Zu(F),Ht=Rt=>S.createElement("ul",null,Rt.map(Ot=>{let Vt=Ot.url;return Vt=md.Cj.appendQueryToUrl(Vt,Lt),Vt=(0,Kt.iE)().disableSanitizeHtml?Vt:fd.QX.sanitizeUrl(Vt),S.createElement("li",{className:Dt.dashlistItem,key:`dash-${Ot.uid}`},S.createElement("div",{className:Dt.dashlistLink},S.createElement("div",{className:Dt.dashlistLinkBody},S.createElement("a",{className:Dt.dashlistTitle,href:Vt},Ot.title),Ot.folderTitle&&S.createElement("div",{className:Dt.dashlistFolder},Ot.folderTitle)),S.createElement(di.h,{tooltip:Ot.isStarred?`Unmark "${Ot.title}" as favorite`:`Mark "${Ot.title}" as favorite`,name:Ot.isStarred?"favorite":"star",iconType:Ot.isStarred?"mono":"default",onClick:pt=>xe(pt,Ot)})))}));return S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Nt.map(({show:Rt,header:Ot,dashboards:Vt},pt)=>Rt&&S.createElement("div",{className:Dt.dashlistSection,key:`dash-group-${pt}`},vt&&S.createElement("h6",{className:Dt.dashlistSectionHeader},Ot),Ht(Vt))))}function Zu(F){(0,Gu.r)(Ti.h$,Mr.x9);let ee={};return F.options.keepTime&&(ee[`$${nc.W.keepTime}`]=!0),F.options.includeVars&&(ee[`$${nc.W.includeVars}`]=!0),F.replaceVariables(md.Cj.toUrlParams(ee))}async function so(F){return F===0?"":(await(0,De.i)().get(`/api/folders/id/${F}`,void 0,void 0,{showErrorAlert:!1})).uid}async function Ju(F){const ee={...F.options,showStarred:F.options.showStarred??F.starred,showRecentlyViewed:F.options.showRecentlyViewed??F.recent,showSearch:F.options.showSearch??F.search,showHeadings:F.options.showHeadings??F.headings,maxItems:F.options.maxItems??F.limit,query:F.options.query??F.query,folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.tags};if(parseFloat(F.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(xe=>delete F[xe]),ee.folderId!==void 0){const Ce=ee.folderId;try{const xe=await so(Ce);ee.folderUID=xe,delete ee.folderId}catch(xe){console.warn("Dashlist: Error migrating folder ID to UID",xe)}}return ee}const $r={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},hd=new U.c(Yu).setPanelOptions(F=>{F.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:$r.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:$r.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:$r.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:$r.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:$r.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:$r.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:$r.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:$r.query}).addCustomEditor({path:"folderUID",name:"Folder",id:"folderUID",defaultValue:void 0,editor:function({value:ue,onChange:Ce}){return S.createElement(tc.E,{value:ue,onChange:xe=>Ce(xe)})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:$r.tags,editor(ee){return S.createElement(ke.B,{tags:ee.value,onChange:ee.onChange})}})}).setMigrationHandler(Ju);var zr=e(78061),Ba=e(64704),Xu=e(23979);const Za=({onBlur:F,placeholder:ee})=>{const ue=(0,S.useRef)(null);(0,S.useEffect)(()=>{ue.current&&ue.current.focus()});const Ce=xe=>{xe.key==="Enter"&&xe.currentTarget.blur()};return S.createElement("input",{type:"text",placeholder:ee,onBlur:F,ref:ue,onKeyDown:Ce,"data-testid":"column-input"})},vn=({divStyle:F,onColumnInputBlur:ee})=>{const[ue,Ce]=(0,S.useState)(!1),xe=()=>{Ce(!0)},Be=Ke=>{const Xe=Ke.target.value;Xe&&ee(Xe),Ce(!1)};return S.createElement("div",{className:F},ue?S.createElement(Za,{placeholder:"Column Name",onBlur:Be}):S.createElement("button",{onClick:xe},"+"))};var Oi=e(17863);const Qs=()=>w.config.featureToggles.enableDatagridEditing,qu="600 13px Inter",em="400 13px Inter",nl=document.createElement("canvas"),Ii=20,pd=300,ui=65,Go="both",vd="number",sc={isContextMenuOpen:!1},tm={isInputOpen:!1},Ws="datagrid_panel",Fs={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},nm={name:"A",fields:[],length:0},am={kind:zr.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},Ed={columns:zr.EV.empty(),rows:zr.EV.empty()},sm={sticky:!1,tint:!0},rm={fill:!0,sticky:!1};async function po(F,ee){if(ee&&Qs()){for(let ue=0;ue<F.fields.length;ue++)delete F.fields[ue].config.displayName,delete F.fields[ue].config.displayNameFromDS;return await ee([F])}return!1}const yd=(F,ee=!1)=>{const ue=nl.getContext("2d");return ue.font=ee?qu:em,ue.measureText(F).width},om=F=>Math.max(yd(F.name,!0)+ui,Math.min(pd,F.values.toArray().reduce((ee,ue)=>{const Ce=yd(ue?.toString()??"");return Ce>ee?Ce:ee},0)+Ii)),Ri=(F,ee,ue=!1)=>{const Ce={...F,fields:F.fields.map(xe=>({...xe,values:xe.values.slice()}))};for(const xe of Ce.fields){const Be=xe.values.toArray();for(let Ke=ee.length-1;Ke>=0;Ke--)ue?Be.splice(ee[Ke],1):Be.splice(ee[Ke],1,null);xe.values=[...Be]}return{...Ce,length:Ce.fields[0]?.values.length??0}},im=(F,ee)=>{const ue=ee.x,Ce=ee.y,xe=ee.x+ee.width-1,Be={...F,fields:F.fields.map(Ke=>({...Ke,values:Ke.values.slice()}))};for(let Ke=ue;Ke<=xe;Ke++){const Xe=Be.fields[Ke],dt=Xe.values.toArray();dt.splice(Ce,ee.height,...new Array(ee.height).fill(null)),Xe.values=[...dt]}return{...Be,length:Be.fields[0]?.values.length??0}},lm=F=>{const ee=F.values.toArray();F.values=ee.map(ue=>ue==="undefined"||ue==="null"?null:ue)};function cm(F){return{accentColor:F.colors.primary.main,accentFg:F.colors.secondary.main,textDark:F.colors.text.primary,textMedium:F.colors.text.secondary,textLight:F.colors.text.secondary,textBubble:F.colors.text.primary,textHeader:F.colors.text.primary,bgCell:F.colors.background.primary,bgCellMedium:F.colors.background.primary,bgHeader:F.colors.background.primary,bgHeaderHasFocus:F.colors.background.secondary,bgHeaderHovered:F.colors.background.secondary,linkColor:F.colors.text.link,fontFamily:F.typography.fontFamily,headerFontStyle:`${F.typography.fontWeightMedium} ${F.typography.fontSize}px`,fgIconHeader:F.colors.secondary.contrastText,bgIconHeader:F.colors.secondary.main}}const dm=(F,ee,ue=!1)=>{const Ce=F.values.get(ee);switch(F.type){case Un.fS.boolean:return{kind:zr.p6.Boolean,data:Ce||!1,allowOverlay:!1,readonly:!1};case Un.fS.number:return{kind:zr.p6.Number,data:Ce||0,allowOverlay:Qs()&&!ue,readonly:!1,displayData:Ce!=null?Ce.toString():""};case Un.fS.string:return{kind:zr.p6.Text,data:Ce||"",allowOverlay:Qs()&&!ue,readonly:!1,displayData:Ce!=null?Ce.toString():""};default:return{kind:zr.p6.Text,data:Ce||"",allowOverlay:Qs()&&!ue,readonly:!1,displayData:Ce!=null?Ce.toString():""}}},al=(F,ee)=>({dataEditor:(0,H.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${F.colors.background.secondary} ${F.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${F.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,H.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${F.colors.background.primary};
      button {
        pointer-events: ${ee?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${F.colors.background.primary};
        color: ${F.colors.text.primary};
        border-right: 1px solid ${F.components.panel.borderColor};
        border-bottom: 1px solid ${F.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${F.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${F.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,H.css)`
      height: 37px;
      border: 1px solid ${F.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),rc=F=>F.rows.length||F.columns.length?!0:F.current===void 0?!1:F.current.range&&!(F.current.range.height===1&&F.current.range.width===1);var Ys=(F=>(F.columnResizeStart="columnResizeStart",F.columnResizeEnd="columnResizeEnd",F.columnMove="columnMove",F.updateColumns="updateColumns",F.showColumnRenameInput="showColumnRenameInput",F.hideColumnRenameInput="hideColumnRenameInput",F.openCellContextMenu="openCellContextMenu",F.openHeaderContextMenu="openHeaderContextMenu",F.openHeaderDropdownMenu="openHeaderDropdownMenu",F.closeContextMenu="closeContextMenu",F.multipleCellsSelected="multipleCellsSelected",F.gridSelectionCleared="gridSelectionCleared",F.columnFreezeReset="columnFreezeReset",F.columnFreezeChanged="columnFreezeChanged",F.openSearch="openSearch",F.closeSearch="closeSearch",F))(Ys||{});const Ai={columns:[],contextMenuData:sc,renameColumnInputData:tm,gridSelection:Ed,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},um=new Map([[Un.fS.number,zr.PE.HeaderNumber],[Un.fS.string,zr.PE.HeaderTextTemplate],[Un.fS.boolean,zr.PE.HeaderBoolean],[Un.fS.time,zr.PE.HeaderDate],[Un.fS.other,zr.PE.HeaderReference]]),mm=(F,ee)=>{let ue=[];switch(ee.type){case"columnResizeStart":ue=[...F.columns];const Ce=ee.payload;return ue[Ce.columnIndex]={...F.columns[Ce.columnIndex],width:Ce.width},{...F,columns:ue,isResizeInProgress:!0};case"columnMove":ue=[...F.columns];const xe=ee.payload,Be=F.columns[xe.from].width;let Ke=ue.splice(xe.from,1)[0];return Ke={...Ke,width:Be},ue.splice(xe.to,0,Ke),{...F,columns:ue};case"columnResizeEnd":return{...F,isResizeInProgress:!1};case"updateColumns":const Xe=ee.payload;return ue=[...Xe.frame.fields.map((Ot,Vt)=>{const pt=F.columns.find(fn=>fn.title===Ot.name)?.width;return{title:(0,Oa.CZ)(Ot,Xe.frame),width:pt??om(Ot),icon:um.get(Ot.type),hasMenu:Qs(),trailingRowOptions:{targetColumn:--Vt}}})],{...F,columns:ue};case"showColumnRenameInput":return{...F,renameColumnInputData:{...F.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...F,renameColumnInputData:{...F.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const dt=ee.payload,gt=dt.event,vt=dt.cell;return{...F,contextMenuData:{x:gt.bounds.x+gt.localEventX,y:gt.bounds.y+gt.localEventY,column:vt[0]===-1?void 0:vt[0],row:vt[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Et=ee.payload,Nt=Et.event;return{...F,contextMenuData:{x:Nt.bounds.x+Nt.localEventX,y:Nt.bounds.y+Nt.localEventY,column:Et.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const Dt=ee.payload,Lt=Dt.screenPosition;return{...F,contextMenuData:{x:Lt.x+Lt.width,y:Lt.y+Lt.height,column:Dt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:Lt.x,y:Lt.y,width:Lt.width,height:Lt.height,columnIdx:Dt.columnIndex,isInputOpen:!1,inputValue:Dt.value}};case"closeContextMenu":return{...F,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...F,toggleSearch:!1};case"openSearch":return{...F,toggleSearch:!0};case"multipleCellsSelected":const Ht=ee.payload;return{...F,gridSelection:Ht.selection};case"gridSelectionCleared":return{...F,gridSelection:Ed};case"columnFreezeReset":return{...F,columnFreezeIndex:0};case"columnFreezeChanged":const Rt=ee.payload;return{...F,columnFreezeIndex:Rt.columnIndex};default:return F}},fm=({menuData:F,data:ee,saveData:ue,closeContextMenu:Ce,dispatch:xe,gridSelection:Be,columnFreezeIndex:Ke,renameColumnClicked:Xe})=>{let dt=[],gt=[];const{row:vt,column:Et,x:Nt,y:Dt,isHeaderMenu:Lt}=F;Be.rows&&(dt=Be.rows.toArray()),Be.columns&&(gt=Be.columns.toArray());let Ht="Delete row";dt.length&&dt.length>1&&(Ht=`Delete ${dt.length} rows`);let Rt="Delete column";gt.length&&gt.length>1&&(Rt=`Delete ${gt.length} columns`);const Ot=vt!==void 0&&vt>=0||dt.length,Vt=Et!==void 0&&Et>=0&&vt!==void 0||gt.length,pt=vt!==void 0&&vt>=0&&!dt.length,_t=Et!==void 0&&Et>=0&&vt!==void 0&&!gt.length,fn=()=>S.createElement(S.Fragment,null,Ot?S.createElement(ma.s,{label:Ht,onClick:()=>{if(dt.length){ue(Ri(ee,dt,!0)),xe({type:Ys.gridSelectionCleared});return}vt!==void 0&&vt>=0&&((0,Ba.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),ue(Ri(ee,[vt],!0)))}}):null,Vt?S.createElement(ma.s,{label:Rt,onClick:()=>{if(gt.length){ue({...ee,fields:ee.fields.filter((un,rn)=>!gt.includes(rn))}),xe({type:Ys.gridSelectionCleared});return}Et!==void 0&&Et>=0&&((0,Ba.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),ue({...ee,fields:ee.fields.filter((un,rn)=>rn!==Et)}))}}):null,Vt||Ot?S.createElement(Oi.R,null):null,pt?S.createElement(ma.s,{label:"Clear row",onClick:()=>{(0,Ba.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),ue(Ri(ee,[vt]))}}):null,_t?S.createElement(ma.s,{label:"Clear column",onClick:()=>{const un=ee.fields[Et];un.values=un.values.map(()=>null),(0,Ba.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),ue({...ee})}}):null,pt||_t?S.createElement(Oi.R,null):null,S.createElement(ma.s,{label:"Remove all data",onClick:()=>{(0,Ba.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),ue(nm)}}),S.createElement(ma.s,{label:"Search...",onClick:()=>{(0,Ba.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"open_search"}),xe({type:Ys.openSearch})}})),Yt=()=>{if(Et==null)return null;const un=ee.fields[Et].type,rn=[],Zt=bn=>{rn.push({label:(0,ae.capitalize)(bn),options:{targetField:ee.fields[Et].name,destinationType:bn}})};un===Un.fS.string?(Zt(Un.fS.number),Zt(Un.fS.boolean)):un===Un.fS.number?(Zt(Un.fS.string),Zt(Un.fS.boolean)):un===Un.fS.boolean?(Zt(Un.fS.number),Zt(Un.fS.string)):(Zt(Un.fS.string),Zt(Un.fS.number),Zt(Un.fS.boolean));let pn="Set column freeze position";const nn=Et+1;return Ke===nn&&(pn="Unset column freeze"),S.createElement(S.Fragment,null,rn.length?S.createElement(la.k,{label:"Set field type"},rn.map((bn,qn)=>S.createElement(ma.s,{key:qn,label:bn.label,onClick:()=>{const Qn=(0,go.p8)(ee.fields[Et],bn.options);bn.options.destinationType===Un.fS.string&&lm(Qn);const Rn={name:ee.name,fields:[...ee.fields],length:ee.length};Rn.fields[Et]=Qn,(0,Ba.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"convert_field"}),ue(Rn)}}))):null,S.createElement(Oi.R,null),S.createElement(ma.s,{label:pn,onClick:()=>{(0,Ba.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"column_freeze"}),xe(Ke===nn?{type:Ys.columnFreezeReset}:{type:Ys.columnFreezeChanged,payload:{columnIndex:nn}})}}),S.createElement(ma.s,{label:"Rename column",onClick:Xe}),S.createElement(Oi.R,null),S.createElement(ma.s,{label:"Delete column",onClick:()=>{(0,Ba.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"delete_column"}),ue({...ee,fields:ee.fields.filter((bn,qn)=>qn!==Et)}),xe({type:Ys.gridSelectionCleared})}}),S.createElement(ma.s,{label:"Clear column",onClick:()=>{const bn=ee.fields[Et];bn.values=bn.values.map(()=>null),(0,Ba.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"clear_column"}),ue({...ee})}}))};return S.createElement(Fa.x,{renderMenuItems:Lt?Yt:fn,x:Nt,y:Dt,onClose:Ce})},tr=({renameColumnData:F,onColumnInputBlur:ee,classStyle:ue})=>{const{x:Ce,y:xe,width:Be,height:Ke,inputValue:Xe,columnIdx:dt}=F,[gt,vt]=(0,S.useState)({}),[Et,Nt]=(0,S.useState)(Xe),Dt=(0,S.useRef)(null);(0,S.useLayoutEffect)(()=>{Dt.current?.focus();const Ot=Dt.current?.getBoundingClientRect();if(Ot){const Vt={right:window.innerWidth<Ce+Ot.width,bottom:window.innerHeight<xe+Ot.height};vt({position:"fixed",left:Vt.right?Ce-Ot.width:Ce,top:Vt.bottom?xe-Ot.height:xe,width:Be,height:Ke})}},[Ke,Be,Ce,xe]);const Lt=Ot=>{const Vt=Ot.target.value;Vt&&ee(Vt,dt)},Ht=Ot=>{Nt(Ot.target.value)},Rt=Ot=>{Ot.key==="Enter"&&Ot.currentTarget.blur()};return S.createElement(Nn.h_,null,S.createElement("input",{type:"text",className:ue,value:Et,onBlur:Lt,ref:Dt,style:gt,onChange:Ht,onKeyDown:Rt}))};function gm({options:F,data:ee,id:ue,fieldConfig:Ce,width:xe,height:Be}){const[Ke,Xe]=(0,S.useReducer)(mm,Ai),{onUpdateData:dt}=(0,Pt.R9)(),{columns:gt,contextMenuData:vt,renameColumnInputData:Et,gridSelection:Nt,columnFreezeIndex:Dt,toggleSearch:Lt,isResizeInProgress:Ht}=Ke,Rt=ee.series[F.selectedSeries??0],Ot=(0,Y.l4)(),Vt=cm(Ot);(0,S.useEffect)(()=>{Rt&&Xe({type:Ys.updateColumns,payload:{frame:Rt}})},[Rt]);const pt=([ea,Cn])=>{const Yn=Rt.fields[ea];return!Yn||Cn>Rt.length?am:dm(Yn,Cn,rc(Nt))},_t=(ea,Cn)=>{if(rc(Nt))return;const[Yn,ca]=ea,Jn={...Rt,fields:Rt.fields.map(xa=>({...xa,values:[...xa.values]}))},Pa=Jn.fields[Yn];if(!Pa)return;const Ia=Pa.values.toArray();Ia[ca]=Cn.data,Pa.values=[...Ia],(0,Ba.ff)(Ws,{item:Fs.EDIT_CELL}),po(Jn,dt)},fn=ea=>{const Cn=Rt.length??0;(0,Ba.ff)(Ws,{item:Fs.APPEND_COLUMN}),po({...Rt,fields:[...Rt.fields,{name:ea,type:Un.fS.string,config:{},values:new Array(Cn).fill("")}]},dt)},Yt=()=>{const ea=Rt.fields.map(Cn=>{const Yn=Cn.values.slice();return Yn.push(null),{...Cn,values:Yn}});(0,Ba.ff)(Ws,{item:Fs.APPEND_ROW}),po({...Rt,fields:ea,length:Rt.length+1},dt)},un=(ea,Cn,Yn,ca)=>{(0,Ba.ff)(Ws,{item:Fs.COLUMN_RESIZE}),Xe({type:Ys.columnResizeStart,payload:{columnIndex:Yn,width:Cn}})},rn=(ea,Cn,Yn,ca)=>{Xe({type:Ys.columnResizeEnd})},Zt=()=>{Xe({type:Ys.closeContextMenu})},pn=ea=>{if(ea.current&&ea.current.range)return(0,Ba.ff)(Ws,{item:Fs.DELETE_BTN_PRESSED,selection:"grid-cell"}),po(im(Rt,ea.current.range),dt),!0;const Cn=ea.rows.toArray(),Yn=ea.columns.toArray();if(Cn.length)return(0,Ba.ff)(Ws,{item:Fs.DELETE_BTN_PRESSED,selection:"rows"}),po(Ri(Rt,Cn),dt),!0;if(Yn.length){const ca={...Rt,fields:Rt.fields.map((Jn,Pa)=>Yn.includes(Pa)?{...Jn,values:new Array(Rt.length).fill(null)}:Jn)};return(0,Ba.ff)(Ws,{item:Fs.DELETE_BTN_PRESSED,selection:"columns"}),po(ca,dt),!0}return!1},nn=(ea,Cn)=>{Cn.preventDefault(),Xe({type:Ys.openCellContextMenu,payload:{event:Cn,cell:ea}})},bn=(ea,Cn)=>{Cn.preventDefault(),Xe({type:Ys.openHeaderContextMenu,payload:{event:Cn,columnIndex:ea}})},qn=(ea,Cn)=>{Xe({type:Ys.openHeaderDropdownMenu,payload:{screenPosition:Cn,columnIndex:ea,value:Ke.columns[ea].title}})},Qn=async(ea,Cn)=>{const Yn=Rt.fields.map(Pa=>Pa),ca=Yn[ea];Yn.splice(ea,1),Yn.splice(Cn,0,ca),await po({...Rt,fields:Yn},dt)&&((0,Ba.ff)(Ws,{item:Fs.COLUMN_REORDER}),Xe({type:Ys.columnMove,payload:{from:ea,to:Cn}}))},Rn=(ea,Cn)=>{const Yn=Rt.fields.map(ca=>({...ca,values:ca.values.slice()}));for(const ca of Yn){const Jn=ca.values[ea];ca.values.splice(ea,1),ca.values.splice(Cn,0,Jn)}(0,Ba.ff)(Ws,{item:Fs.ROW_REORDER}),po({...Rt,fields:Yn},dt)},Hn=()=>{(0,Ba.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"rename_column"}),Xe({type:Ys.showColumnRenameInput})},Ca=(ea,Cn)=>{const Yn=Rt.fields.map(ca=>ca);Yn[Cn].name=ea,Xe({type:Ys.hideColumnRenameInput}),po({...Rt,fields:Yn},dt)},na=()=>{Xe({type:Ys.closeSearch})},Ua=ea=>{(0,Ba.ff)(Ws,{item:Fs.GRID_SELECTED}),Xe({type:Ys.multipleCellsSelected,payload:{selection:ea}})},Ma=ea=>{po(ea,dt)};if(!Rt)return S.createElement(Tt.Z,{panelId:ue,fieldConfig:Ce,data:ee});if(!Qs())return S.createElement(Tt.Z,{panelId:ue,message:"Datagrid is not enabled",fieldConfig:Ce,data:ee});if(!document.getElementById("portal")){const ea=document.createElement("div");ea.id="portal",document.body.appendChild(ea)}const wa=al(Ot,Ht);return S.createElement(S.Fragment,null,S.createElement(zr.ZP,{className:wa.dataEditor,getCellContent:pt,columns:gt,rows:Rt.length,width:xe,height:Be,initialSize:[xe,Be],theme:Vt,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:Qs()?_t:void 0,getCellsForSelection:Qs()?!0:void 0,showSearch:Qs()?Lt:!1,onSearchClose:na,gridSelection:Nt,onGridSelectionChange:Qs()?Ua:void 0,onRowAppended:Qs()?Yt:void 0,onDelete:Qs()?pn:void 0,rowMarkers:Qs()?Go:vd,onColumnResize:un,onColumnResizeEnd:rn,onCellContextMenu:Qs()?nn:void 0,onHeaderContextMenu:Qs()?bn:void 0,onHeaderMenuClick:Qs()?qn:void 0,trailingRowOptions:sm,rightElement:Qs()?S.createElement(vn,{onColumnInputBlur:fn,divStyle:wa.addColumnDiv}):null,rightElementProps:rm,freezeColumns:Dt,onRowMoved:Qs()?Rn:void 0,onColumnMoved:Qs()?Qn:void 0}),vt.isContextMenuOpen&&S.createElement(fm,{menuData:vt,data:Rt,saveData:Ma,closeContextMenu:Zt,dispatch:Xe,gridSelection:Nt,columnFreezeIndex:Dt,renameColumnClicked:Hn}),Et.isInputOpen?S.createElement(tr,{onColumnInputBlur:Ca,renameColumnData:Et,classStyle:wa.renameColumnInput}):null)}const Dd={selectedSeries:0},hm=new U.c(gm).setPanelOptions((F,ee)=>{const ue=ee.data.map((Ce,xe)=>({value:xe,label:Ce.refId}));return ee.options&&!ue.map(Ce=>Ce.value).includes(ee.options.selectedSeries??0)&&(ee.options.selectedSeries=Dd.selectedSeries),F.addSelect({path:"selectedSeries",name:"Select series",defaultValue:Dd.selectedSeries,settings:{options:ue}})});class lp extends S.Component{constructor(){super(...arguments),this.subscription=new ks.w0,this.state={}}componentDidMount(){const{eventBus:ee}=this.props;this.subscription.add(ee.subscribe(za.es,ue=>{this.setState({event:ue})})),this.subscription.add(ee.subscribe(za.xH,ue=>{this.setState({event:ue})})),this.subscription.add(ee.subscribe(qa.IA,ue=>{this.setState({event:ue})})),this.subscription.add(ee.subscribe(qa.oi,ue=>{this.setState({event:ue})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:ee}=this.state;if(!ee)return S.createElement("div",null,"no events yet");const{type:ue,payload:Ce,origin:xe}=ee;return S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("h3",null,"Origin: ",xe?.path),S.createElement("span",null,"Type: ",ue),!!Ce&&S.createElement(S.Fragment,null,S.createElement("pre",null,JSON.stringify(Ce.point,null,"  ")),Ce.data&&S.createElement(_s.H,{data:Ce.data,rowIndex:Ce.rowIndex,columnIndex:Ce.columnIndex})))}}var pm=e(58707);let oc=100;class vm extends S.PureComponent{constructor(ee){super(ee),this.history=new pm.d({capacity:40,append:"head"}),this.eventObserver={next:Ce=>{const xe=Ce.origin;this.history.add({key:oc++,type:Ce.type,path:xe?.path,payload:Ce.payload}),this.setState({counter:oc})}},this.state={counter:oc};const ue=[];ue.push(ee.eventBus.getStream(za.es).subscribe(this.eventObserver)),ue.push(ee.eventBus.getStream(za.xH).subscribe(this.eventObserver)),ue.push(ee.eventBus.getStream(za.v9).subscribe(this.eventObserver)),this.subs=ue}componentWillUnmount(){for(const ee of this.subs)ee.unsubscribe()}render(){return S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((ee,ue)=>S.createElement("div",{key:ee.key},JSON.stringify(ee.path)," ",ee.type," / X:",JSON.stringify(ee.payload.x)," / Y:",JSON.stringify(ee.payload.y))))}}var Lr=e(66542);class Em extends S.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(ee){const{data:ue,options:Ce}=this.props;if(ee.data!==ue&&(this.counters.dataChanged++,Ce.counters?.schemaChanged)){const xe=ee.data?.series,Be=ue.series;Be&&xe&&((0,co.nl)(Be,xe,co.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:ee,options:ue}=this.props,Ce=ue.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const xe=Date.now(),Be=xe-this.lastRender;this.lastRender=xe;const Ke=Lr.TB.get(Lr.gz.lastNotNull);return S.createElement("div",null,S.createElement("div",null,S.createElement(di.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),S.createElement("span",null,Ce.render&&S.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Ce.dataChanged&&S.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Ce.schemaChanged&&S.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),S.createElement("span",null,"TIME: ",Be,"ms"))),ee.series&&ee.series.map((Xe,dt)=>S.createElement("div",{key:`${dt}/${Xe.refId}`},S.createElement("h4",null,(0,Oa.nf)(Xe,dt)," (",Xe.length,")"),S.createElement("table",{className:"filter-table"},S.createElement("thead",null,S.createElement("tr",null,S.createElement("td",null,"Field"),S.createElement("td",null,"Type"),S.createElement("td",null,"Last"))),S.createElement("tbody",null,Xe.fields.map((gt,vt)=>{const Et=Ke.reduce(gt,!1,!1)[Ke.id];return S.createElement("tr",{key:`${vt}/${gt.name}`},S.createElement("td",null,(0,Oa.CZ)(gt,Xe,ee.series)),S.createElement("td",null,gt.type),S.createElement("td",null,`${Et}`))}))))))}}var kr=e(85765),ym=e(64516);function Dm(F){const ee=(0,Pt.R9)(),ue=Ce=>{ee.onInstanceStateChange({name:Ce.currentTarget.value})};return S.createElement(S.Fragment,null,S.createElement(kr.g,{label:"State name"},S.createElement(ym.I,{value:ee.instanceState?.name??"",onChange:ue})))}function Cm({value:F,context:ee,onChange:ue,item:Ce}){return S.createElement("div",null,"Current value: ",ee.instanceState?.name," ")}var hr=(F=>(F.Cursor="cursor",F.Events="events",F.Render="render",F.State="State",F.ThrowError="ThrowError",F))(hr||{});class bm extends S.Component{render(){const{options:ee}=this.props;switch(ee.mode){case hr.Events:return S.createElement(vm,{eventBus:this.props.eventBus});case hr.Cursor:return S.createElement(lp,{eventBus:this.props.eventBus});case hr.State:return S.createElement(Dm,{...this.props});case hr.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return S.createElement(Em,{...this.props})}}}const Pm=new U.c(bm).useFieldConfig().setPanelOptions(F=>{F.addSelect({path:"mode",name:"Mode",defaultValue:hr.Render,settings:{options:[{label:"Render",value:hr.Render},{label:"Events",value:hr.Events},{label:"Cursor",value:hr.Cursor},{label:"Cursor",value:hr.Cursor},{label:"Share state",value:hr.State},{label:"Throw error",value:hr.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:ee})=>ee===hr.State,editor:Cm}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:ee})=>ee===hr.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:ee})=>ee===hr.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:ee})=>ee===hr.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var ic=e(44300),Sm=e(65778);function sl(F,ee={}){(0,Ba.ff)(`grafana_flamegraph_${F}`,{app:x.zj.Unknown,grafana_version:w.config.buildInfo.version,...ee})}const Mm=F=>{const ee=(0,ic.d6)(F.data.series[0]);return ee?S.createElement(Tt.Z,{panelId:F.id,data:F.data,message:(0,ic.cN)(ee)}):S.createElement(Sm.Z,{data:F.data.series[0],stickyHeader:!1,getTheme:()=>w.config.theme2,showFlameGraphOnly:F.options?.showFlameGraphOnly??!1,onTableSymbolClick:()=>sl("table_item_selected"),onViewSelected:ue=>sl("view_selected",{view:ue}),onTextAlignSelected:ue=>sl("text_align_selected",{align:ue}),onTableSort:ue=>sl("table_sort_selected",{sort:ue}),disableCollapsing:!w.config.featureToggles.flameGraphItemCollapsing})};class cp{getListWithDefaults(ee){return ee.getListAppender({name:Ha.y.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(ee){if(!ee.data)return;const ue=ee.data.series[0];!ue||(0,ic.d6)(ue)||this.getListWithDefaults(ee).append({name:Ha.y.FlameGraph})}}const xm=new U.c(Mm).setSuggestionsSupplier(new cp);var Mn=e(21628),Zs=e(89719);const lc=(F,ee)=>{const ue="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Ce=ee?ue:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",xe=ee?ue:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Be=F.isDark?Ce:xe;return`
      background-color: ${F.colors.background.secondary};
      margin-right: ${F.spacing(4)};
      border: 1px solid ${F.colors.border.weak};
      border-bottom-left-radius: ${F.shape.borderRadius(2)};
      border-bottom-right-radius: ${F.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Be};
      }
`},rl=(F,ee)=>(0,H.css)`
  color: ${ee?F.v1.palette.blue95:F.colors.text.secondary};

  ${F.breakpoints.down("sm")} {
    display: none;
  }
`,ol=(0,H.css)`
  padding: 16px;
`,Tm=({card:F})=>{const ee=(0,Y.wW)(mi,F.done),ue=(0,Y.wW)(rl,F.done);return S.createElement("div",{className:ee.card},S.createElement("div",{className:ol},S.createElement("a",{href:`${F.href}?utm_source=grafana_gettingstarted`,className:ee.url},S.createElement("div",{className:ee.heading},F.done?"complete":F.heading),S.createElement("h4",{className:ee.title},F.title),S.createElement("div",null,S.createElement(We.J,{className:ue,name:F.icon,size:"xxl"})))),S.createElement("a",{href:`${F.learnHref}?utm_source=grafana_gettingstarted`,className:ee.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",S.createElement(We.J,{name:"external-link-alt"})))},mi=(F,ee)=>({card:(0,H.css)`
      ${lc(F,ee)}

      min-width: 230px;

      ${F.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,H.css)`
      text-transform: uppercase;
      color: ${ee?F.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${F.spacing(2)};
    `,title:(0,H.css)`
      margin-bottom: ${F.spacing(2)};
    `,url:(0,H.css)`
      display: inline-block;
    `,learnUrl:(0,H.css)`
      border-top: 1px solid ${F.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var il=e(39357);const Om=({card:F})=>{const ee=(0,Y.wW)(ll,F.done),ue=(0,Y.wW)(rl,F.done);return S.createElement("a",{className:ee.card,target:"_blank",rel:"noreferrer",href:`${F.href}?utm_source=grafana_gettingstarted`,onClick:Ce=>Im(Ce,F)},S.createElement("div",{className:ol},S.createElement("div",{className:ee.type},F.type),S.createElement("div",{className:ee.heading},F.done?"complete":F.heading),S.createElement("h4",{className:ee.cardTitle},F.title),S.createElement("div",{className:ee.info},F.info),S.createElement(We.J,{className:ue,name:F.icon,size:"xxl"})))},Im=(F,ee)=>{F.preventDefault(),il.Z.get(ee.key)||il.Z.set(ee.key,!0)},ll=(F,ee)=>({card:(0,H.css)`
      ${lc(F,ee)}
      width: 460px;
      min-width: 460px;

      ${F.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${F.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,H.css)`
      color: ${F.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,H.css)`
      text-transform: uppercase;
      color: ${F.colors.primary.text};
      margin-bottom: ${F.spacing(1)};
    `,cardTitle:(0,H.css)`
      margin-bottom: ${F.spacing(2)};
    `,info:(0,H.css)`
      margin-bottom: ${F.spacing(2)};
    `,status:(0,H.css)`
      display: flex;
      justify-content: flex-end;
    `}),cc=({step:F})=>{const ee=(0,Y.wW)(Rm);return S.createElement("div",{className:ee.setup},S.createElement("div",{className:ee.info},S.createElement("h2",{className:ee.title},F.title),S.createElement("p",null,F.info)),S.createElement("div",{className:ee.cards},F.cards.map((ue,Ce)=>{const xe=`${ue.title}-${Ce}`;return ue.type==="tutorial"?S.createElement(Om,{key:xe,card:ue}):S.createElement(Tm,{key:xe,card:ue})})))},Rm=F=>({setup:(0,H.css)`
      display: flex;
      width: 95%;
    `,info:(0,H.css)`
      width: 172px;
      margin-right: 5%;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(4)};
      }
      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,title:(0,H.css)`
      color: ${F.v1.palette.blue95};
    `,cards:(0,H.css)`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${F.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var dc=e(97001);const Cd="Grafana fundamentals",Am="Create users and teams",bo="getting.started.",bd=`${bo}${Cd.replace(" ","-").trim().toLowerCase()}`,cl=`${bo}${Am.replace(" ","-").trim().toLowerCase()}`,fi=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Cd,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(il.Z.get(bd)),key:bd,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(F=>{F((0,dc.ak)().getMetricSources().filter(ee=>ee.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Uo.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:cl,check:()=>Promise.resolve(il.Z.get(cl)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const F=await(0,Uo.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(F.length>0)},done:!1}]}];class Lm extends S.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:fi()},this.onForwardClick=()=>{this.setState(ee=>({currentStep:ee.currentStep+1}))},this.onPreviousClick=()=>{this.setState(ee=>({currentStep:ee.currentStep-1}))},this.dismiss=()=>{const{id:ee}=this.props,ue=(0,ze.h4)().getCurrent(),Ce=ue?.getPanelById(ee);ue?.removePanel(Ce),Uo.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(xe=>{Ti.Vt.user.helpFlags1=xe.helpFlags1})}}async componentDidMount(){const{steps:ee}=this.state,ue=ee.map(async xe=>{const Be=xe.cards.map(async Xe=>Xe.check().then(dt=>({...Xe,done:dt}))),Ke=await Promise.all(Be);return{...xe,done:Ke.every(Xe=>Xe.done),cards:Ke}}),Ce=await Promise.all(ue);this.setState({currentStep:Ce[0].done?1:0,steps:Ce,checksDone:!0})}render(){const{checksDone:ee,currentStep:ue,steps:Ce}=this.state,xe=Bm(),Be=Ce[ue];return S.createElement("div",{className:xe.container},ee?S.createElement(S.Fragment,null,S.createElement(ne.zx,{variant:"secondary",fill:"text",className:xe.dismiss,onClick:this.dismiss},"Remove this panel"),ue===Ce.length-1&&S.createElement(ne.zx,{className:(0,H.cx)(xe.backForwardButtons,xe.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),S.createElement("div",{className:xe.content},S.createElement(cc,{step:Be})),ue<Ce.length-1&&S.createElement(ne.zx,{className:(0,H.cx)(xe.backForwardButtons,xe.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):S.createElement("div",{className:xe.loading},S.createElement("div",{className:xe.loadingText},"Checking completed setup steps"),S.createElement(Zs.$,{size:"xl",inline:!0})))}}const Bm=(0,dr.B)(()=>{const F=w.config.theme2;return{container:(0,H.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${F.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${F.spacing(4)} ${F.spacing(2)} 0;
    `,content:(0,H.css)`
      label: content;
      display: flex;
      justify-content: center;

      ${F.breakpoints.down("xxl")} {
        margin-left: ${F.spacing(3)};
        justify-content: flex-start;
      }
    `,header:(0,H.css)`
      label: header;
      margin-bottom: ${F.spacing(3)};
      display: flex;
      flex-direction: column;

      ${F.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:(0,H.css)`
      height: 58px;
      padding-right: ${F.spacing(2)};
      display: none;

      ${F.breakpoints.up("md")} {
        display: block;
      }
    `,heading:(0,H.css)`
      label: heading;
      margin-right: ${F.spacing(3)};
      margin-bottom: ${F.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${F.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:(0,H.css)`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:(0,H.css)`
      left: 10px;

      ${F.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:(0,H.css)`
      right: 10px;

      ${F.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:(0,H.css)`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${F.spacing(1)};
    `,loading:(0,H.css)`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:(0,H.css)`
      margin-right: ${F.spacing(1)};
    `}}),Po=new U.c(Lm).setNoPadding();var Hr=e(48493),Pd=e(64125);const gi={bucketOffset:0},Sd={fillOpacity:80,gradientMode:xt.FI.None,lineWidth:1};function uc(F,ee){return Math.floor(F/ee)*ee}function dl(F,ee){return Math.ceil(F/ee)*ee}function Md(F){return F.fields[0].type===Un.fS.string?1:F.fields[1].values[0]-F.fields[0].values[0]}function mc(F){return F.fields[0].type===Un.fS.string?1:F.fields[1].values[1]-F.fields[0].values[1]}const fc=(F,ee)=>{let{min:ue,max:Ce}=F.fields[2].config,xe=new La.U,Be=F.fields[0].type===Un.fS.string,Ke=Md(F),Xe=mc(F),dt=Xe/Ke,gt=Xe!==Ke,vt=(Ot,Vt,pt,_t,fn,Yt)=>{let un=Ot.axes[Vt]._space,rn=Ot.valToPos(Ot.data[0][0]+Ke,"x")-Ot.valToPos(Ot.data[0][0],"x"),Zt=uc(ue??Ot.data[0][0],Ke),pn=dl(Ce??Ot.data[0][Ot.data[0].length-1]+Ke,Ke),nn=[],bn=Math.ceil(un/rn);for(let qn=0,Qn=Zt;Qn<=pn;qn++,Qn+=Ke)!(qn%bn)&&nn.push(Qn);return nn};xe.addScale({scaleKey:"x",isTime:!1,distribution:Be?xt.wf.Ordinal:gt?xt.wf.Log:xt.wf.Linear,log:2,orientation:xt.wN.Horizontal,direction:xt.bQ.Right,range:gt?(Ot,Vt,pt)=>us.Z.rangeLog(Vt,pt*dt,2,!0):(Ot,Vt,pt)=>{ue!=null&&(Vt=ue),Ce!=null&&(pt=Ce);let _t=Ot.data[0][0],fn=Ot.data[0][Ot.data[0].length-1];return pt===fn?pt+=Ke:pt=dl(pt,Ke),Vt>_t&&(Vt=uc(Vt,Ke)),[Vt,pt]}}),xe.addScale({scaleKey:"y",isTime:!1,distribution:xt.wf.Linear,orientation:xt.wN.Vertical,direction:xt.bQ.Up});const Et=F.fields[0].display,Nt=Ot=>(0,ns.zc)(Et(Ot));xe.addAxis({scaleKey:"x",isTime:!1,placement:xt.LB.Bottom,incrs:Be?[1]:gt?void 0:Hr.Zi,splits:gt||Be?void 0:vt,values:Be?(Ot,Vt)=>Vt:(Ot,Vt)=>{const pt=Vt.map(Nt),_t=pt.reduce((rn,Zt)=>Math.max((0,qt.X1)(Zt,jt.gD).width,rn),0),fn=10,Yt=Ot.bbox.width/((_t+fn)*devicePixelRatio),un=Math.ceil(pt.length/Yt);return pt.map((rn,Zt)=>Zt%un===0?rn:null)},theme:ee});let Lt=F.fields[2].display;xe.addAxis({scaleKey:"y",isTime:!1,placement:xt.LB.Left,formatValue:(Ot,Vt)=>(0,ns.zc)(Lt(Ot,Vt)),theme:ee}),xe.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Ht=us.Z.paths.bars({align:1,size:[1,1/0]}),Rt=0;for(let Ot=2;Ot<F.fields.length;Ot++){const Vt=F.fields[Ot];Vt.state=Vt.state??{},Vt.state.seriesIndex=Rt++;const pt={...Sd,...Vt.config.custom},_t="y",fn=(0,Rs.fD)(Vt),un=(0,Rs.YO)(Vt,ee).color;xe.addSeries({scaleKey:_t,lineWidth:pt.lineWidth,lineColor:un,fillOpacity:pt.fillOpacity,theme:ee,colorMode:fn,pathBuilder:Ht,show:!pt.hideFrom?.viz,gradientMode:pt.gradientMode,thresholds:Vt.config.thresholds,hardMin:Vt.config.min,hardMax:Vt.config.max,softMin:pt.axisSoftMin,softMax:pt.axisSoftMax,dataFrameFieldIndex:Vt.state.origin})}return xe},wm=F=>{let ee=[];for(const ue of F.fields)ue.name!==Hr.cO&&ee.push(ue.values);for(let ue=1;ue<ee.length;ue++){let Ce=ee[ue];for(let xe=0;xe<Ce.length;xe++)Ce[xe]===0&&(Ce[xe]=null)}return ee};class Li extends S.Component{constructor(ee){super(ee),this.state=this.prepState(ee)}prepState(ee,ue=!0){let Ce=null;const{alignedFrame:xe}=ee;return xe&&(Ce={alignedData:wm(xe)},ue&&(Ce.config=fc(xe,this.props.theme))),Ce}renderLegend(ee){const{legend:ue}=this.props;return!ee||ue.showLegend===!1?null:S.createElement(Tn.l,{data:this.props.rawSeries,config:ee,maxHeight:"35%",maxWidth:"60%",...ue})}componentDidUpdate(ee){const{structureRev:ue,alignedFrame:Ce,bucketSize:xe}=this.props;if(Ce!==ee.alignedFrame){let Be=this.prepState(this.props,!1);Be&&(xe!==ee.bucketSize||this.props.options!==ee.options||this.state.config===void 0||ue!==ee.structureRev||!ue)&&(Be.config=fc(Ce,this.props.theme)),Be&&this.setState(Be)}}render(){const{width:ee,height:ue,children:Ce,alignedFrame:xe}=this.props,{config:Be}=this.state;return Be?S.createElement(on.AY,{width:ee,height:ue,legend:this.renderLegend(Be)},(Ke,Xe)=>S.createElement(Pd.N,{config:this.state.config,data:this.state.alignedData,width:Ke,height:Xe},Ce?Ce(Be,xe):null)):null}}const Um=({data:F,options:ee,width:ue,height:Ce})=>{const xe=(0,Y.l4)(),Be=(0,S.useMemo)(()=>{if(!F.series.length)return;if(F.series.forEach((dt,gt)=>{dt.fields.forEach((vt,Et)=>{vt.state={...vt.state,origin:{frameIndex:gt,fieldIndex:Et}}})}),F.series.length===1){const dt=(0,Hr.qr)(F.series[0]);if(dt)return(0,Hr.zM)(dt)}const Xe=(0,Hr.gY)(F.series,ee);if(Xe)return(0,Hr.zM)(Xe,xe)},[F.series,ee,xe]);if(!Be||!Be.fields.length)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No histogram found in response"));const Ke=Md(Be);return S.createElement(Li,{options:ee,theme:xe,legend:ee.legend,rawSeries:F.series,structureRev:F.structureRev,width:ue,height:Ce,alignedFrame:Be,bucketSize:Ke},(Xe,dt)=>null)};function ul(F){if(F?.length!==1)return!1;const ee=F[0];if(ee.fields.length<3||!(0,Hr.Ok)(ee.fields[0].name)||!(0,Hr.kl)(ee.fields[1].name))return!1;for(const ue of ee.fields)if(ue.type!==Un.fS.number)return!1;return!0}const xd=new U.c(Um).setPanelOptions(F=>{F.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(ee,ue)=>ul(ue)}).addNumberInput({path:"bucketSize",name:Hr.py.bucketSize.name,description:Hr.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:gi.bucketSize,showIf:(ee,ue)=>!ul(ue)}).addNumberInput({path:"bucketOffset",name:Hr.py.bucketOffset.name,description:Hr.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:gi.bucketOffset,showIf:(ee,ue)=>!ul(ue)}).addBooleanSwitch({path:"combine",name:Hr.py.combine.name,description:Hr.py.combine.description,defaultValue:gi.combine,showIf:(ee,ue)=>!ul(ue)}),mr.J(F)}).useFieldConfig({standardOptions:{[Ss.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:rs.S.PaletteClassic}}},useCustomConfig:F=>{const ee=Sd;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ee.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ee.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Tr.q.fillGradient[0].value,settings:{options:Tr.q.fillGradient}}),ur.B(F)}});var Na=e(4230),gc=e(36667);const hc=[{label:"Grafana",value:Na.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:Na.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:Na.z.Plugin,description:"Plugins with live support"}];class Nm extends S.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=ee=>{ee.value&&this.props.onChange({scope:ee.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=ee=>{this.props.onChange({scope:this.props.value?.scope,namespace:ee.value,path:void 0})},this.onPathChanged=ee=>{const{value:ue,onChange:Ce}=this.props;Ce({scope:ue.scope,namespace:ue.namespace,path:ee.value})}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(ee){this.props.value!==ee.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:ee,paths:ue}=this.state,{scope:Ce,namespace:xe,path:Be}=this.props.value,Ke=Fm(Kt.config.theme2);return S.createElement(S.Fragment,null,S.createElement(kt.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),S.createElement("div",null,S.createElement("div",{className:Ke.dropWrap},S.createElement(gc._,null,"Scope"),S.createElement(Pe.Ph,{options:hc,value:hc.find(Xe=>Xe.value===Ce),onChange:this.onScopeChanged})),Ce&&S.createElement("div",{className:Ke.dropWrap},S.createElement(gc._,null,"Namespace"),S.createElement(Pe.Ph,{options:ee,value:ee.find(Xe=>Xe.value===xe)??(xe?{label:xe,value:xe}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),Ce&&xe&&S.createElement("div",{className:Ke.dropWrap},S.createElement(gc._,null,"Path"),S.createElement(Pe.Ph,{options:ue,value:Wm(ue,Be),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function Wm(F,ee){const ue=F.find(Ce=>Ce.value===ee);if(ue)return ue;if(ee)return{label:ee,value:ee}}const Fm=(0,dr.B)(F=>({dropWrap:(0,H.css)`
    margin-bottom: ${F.spacing(1)};
  `}));var Td=e(55739),Od=e(20298),ml=e(24035),No=e(79300),pc=e(73642),Wo=e(18198),jo=e(47687),fl=e(66735);function Id(F){const{data:ee,height:ue,width:Ce,options:xe,fieldConfig:Be,id:Ke,timeRange:Xe}=F,dt=(0,Y.l4)(),gt=(0,Pt.R9)(),vt=(0,fl.yR)(ee.series)?(0,fl.Bc)(ee.series):ee.series,Et=vt?.length,Nt=vt[0]?.fields.length,Dt=Km(vt,xe),Lt=vt[Dt];let Ht=ue;if(!Et||!Nt)return S.createElement(Tt.Z,{panelId:Ke,fieldConfig:Be,data:ee});if(Et>1){const pt=dt.spacing.gridSize*dt.components.height.md,_t=dt.spacing.gridSize;Ht=ue-pt-_t}const Rt=gt.sync&&gt.sync()!==Ea.m.Off,Ot=S.createElement(jo.i,{height:Ht,width:Ce,data:Lt,noHeader:!xe.showHeader,showTypeIcons:xe.showTypeIcons,resizable:!0,initialSortBy:xe.sortBy,onSortByChange:pt=>Rd(pt,F),onColumnResize:(pt,_t)=>Vm(pt,_t,F),onCellFilterAdded:gt.onAddAdHocFilter,footerOptions:xe.footer,enablePagination:xe.footer?.enablePagination,cellHeight:xe.cellHeight,timeRange:Xe,enableSharedCrosshair:w.config.featureToggles.tableSharedCrosshair&&Rt});if(Et===1)return Ot;const Vt=vt.map((pt,_t)=>({label:(0,Oa.nf)(pt),value:_t}));return S.createElement("div",{className:So.wrapper},Ot,S.createElement("div",{className:So.selectWrapper},S.createElement(Pe.Ph,{options:Vt,value:Vt[Dt],onChange:pt=>hi(pt,F)})))}function Km(F,ee){return ee.frameIndex>0&&ee.frameIndex<F.length?ee.frameIndex:0}function Vm(F,ee,ue){const{fieldConfig:Ce}=ue,{overrides:xe}=Ce,Be=Wo.mi.byName,Ke="custom.width",Xe=xe.find(dt=>dt.matcher.id===Be&&dt.matcher.options===F);if(Xe){const dt=Xe.properties.find(gt=>gt.id===Ke);dt?dt.value=ee:Xe.properties.push({id:Ke,value:ee})}else xe.push({matcher:{id:Be,options:F},properties:[{id:Ke,value:ee}]});ue.onFieldConfigChange({...Ce,overrides:xe})}function Rd(F,ee){ee.onOptionsChange({...ee.options,sortBy:F})}function hi(F,ee){ee.onOptionsChange({...ee.options,frameIndex:F.value||0})}const So={wrapper:(0,H.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,H.css)`
    padding: 8px 8px 0px 8px;
  `};var Jr=(F=>(F.Raw="raw",F.JSON="json",F.Auto="auto",F.None="none",F))(Jr||{});class vc extends S.PureComponent{constructor(ee){super(ee),this.styles=Bi(w.config.theme2),this.streamObserver={next:ue=>{(0,Na.se)(ue)?this.setState({status:ue,changed:Date.now()}):(0,Na.RL)(ue)?this.setState({message:ue.message,changed:Date.now()}):console.log("ignore",ue)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=ue=>{const{options:Ce,onOptionsChange:xe}=this.props;try{const Be=JSON.parse(ue);xe({...Ce,json:Be})}catch(Be){console.log("Error reading JSON",Be)}},this.onPublishClicked=async()=>{const{addr:ue}=this.state;if(!ue){console.log("invalid address");return}const Ce=this.props.options?.json;if(!Ce){console.log("nothing to publish");return}const xe=await(0,ml.gj)().publish(ue,Ce);console.log("onPublishClicked (response from publish)",xe)},this.isValid=!!(0,ml.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(ee){this.props.options?.channel!==ee.options?.channel&&this.loadChannel()}async loadChannel(){const ee=this.props.options?.channel;if(!(0,Na.nU)(ee)){console.log("INVALID",ee),this.unsubscribe(),this.setState({addr:void 0});return}if((0,ae.isEqual)(ee,this.state.addr)){console.log("Same channel",this.state.addr);return}const ue=(0,ml.gj)();if(!ue){console.log("INVALID",ee),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",ee);try{this.subscription=ue.getStream(ee).subscribe(this.streamObserver),this.setState({addr:ee,error:void 0})}catch(Ce){this.setState({addr:void 0,error:Ce})}}renderNotEnabled(){const ee=`[feature_toggles]
    enable = live`;return S.createElement(kt.b,{title:"Grafana Live",severity:"info"},S.createElement("p",null,"Grafana live requires a feature flag to run"),S.createElement("b",null,"custom.ini:"),S.createElement("pre",null,ee))}renderMessage(ee){const{options:ue}=this.props,{message:Ce}=this.state;if(!Ce)return S.createElement("div",null,S.createElement("h4",null,"Waiting for data:"),ue.channel?.scope,"/",ue.channel?.namespace,"/",ue.channel?.path);if(ue.message===Jr.JSON)return S.createElement(No.g,{json:Ce,open:5});if(ue.message===Jr.Auto&&Ce instanceof Td.Av){const xe={series:(0,Yr.SM)({data:[Ce],theme:w.config.theme2,replaceVariables:Ke=>Ke,fieldConfig:{defaults:{},overrides:[]}}),state:Od.Gu.Streaming},Be={...this.props,options:{frameIndex:0,showHeader:!0}};return S.createElement(Id,{...Be,data:xe,height:ee})}return S.createElement("pre",null,JSON.stringify(Ce))}renderPublish(ee){const{options:ue}=this.props;return S.createElement(S.Fragment,null,S.createElement(pc.p,{height:ee-32,language:"json",value:ue.json?JSON.stringify(ue.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),S.createElement("div",{style:{height:32}},S.createElement(ne.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:ee}=this.state;if(ee?.state===Na.yS.Connected)return;let ue="";return ee&&(ue=this.styles.status[ee.state]),S.createElement("div",{className:(0,H.cx)(ue,this.styles.statusWrap)},ee?.state)}renderBody(){const{status:ee}=this.state,{options:ue,height:Ce}=this.props;if(ue.publish){if(ue.message===Jr.None)return S.createElement("div",null,this.renderPublish(Ce));const xe=Ce/2;return S.createElement("div",null,S.createElement("div",{style:{height:xe,overflow:"hidden"}},S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(xe))),S.createElement("div",null,this.renderPublish(xe)))}return ue.message===Jr.None?S.createElement("pre",null,JSON.stringify(ee)):S.createElement("div",{style:{overflow:"hidden",height:Ce}},S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ce)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:ee,error:ue}=this.state;return ee?ue?S.createElement("div",null,S.createElement("h2",null,"ERROR"),S.createElement("div",null,JSON.stringify(ue))):S.createElement(S.Fragment,null,this.renderStatus(),this.renderBody()):S.createElement(kt.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Bi=(0,dr.B)(F=>({statusWrap:(0,H.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${F.components.panel.background};
    padding: 10px;
    z-index: ${F.zIndex.modal};
  `,status:{[Na.yS.Pending]:(0,H.css)`
      border: 1px solid ${F.v1.palette.orange};
    `,[Na.yS.Connected]:(0,H.css)`
      border: 1px solid ${F.colors.success.main};
    `,[Na.yS.Connecting]:(0,H.css)`
      border: 1px solid ${F.v1.palette.brandWarning};
    `,[Na.yS.Disconnected]:(0,H.css)`
      border: 1px solid ${F.colors.warning.main};
    `,[Na.yS.Shutdown]:(0,H.css)`
      border: 1px solid ${F.colors.error.main};
    `,[Na.yS.Invalid]:(0,H.css)`
      border: 1px solid red;
    `}})),_m=new U.c(vc).setPanelOptions(F=>{F.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Nm,defaultValue:{}}),F.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Jr.Raw,label:"Raw Text"},{value:Jr.JSON,label:"JSON"},{value:Jr.Auto,label:"Auto"},{value:Jr.None,label:"None"}]},defaultValue:Jr.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var wi=e(68387),gl=e(97402),hl=e(76757),$m=e(5278),Ad=e(23044),Ec=e(76597);const zm=({data:F,timeZone:ee,fieldConfig:ue,options:{showLabels:Ce,showTime:xe,wrapLogMessage:Be,showCommonLabels:Ke,prettifyLogMessage:Xe,sortOrder:dt,dedupStrategy:gt,enableLogDetails:vt},title:Et,id:Nt})=>{const Dt=dt===xt.UV.Ascending,Lt=(0,Y.wW)(km),[Ht,Rt]=(0,S.useState)(0),Ot=(0,S.useRef)(null),{eventBus:Vt}=(0,Pt.R9)(),pt=(0,S.useCallback)(Zt=>{Zt?Vt.publish(new za.es({point:{time:Zt.timeEpochMs}})):Vt.publish(new za.xH)},[Vt]),[_t,fn,Yt]=(0,S.useMemo)(()=>{const Zt=F?(0,Ec.aB)(F.series,F.request?.intervalMs,void 0,F.request?.targets):null,pn=Zt?.rows||[],nn=Zt?.meta?.find(qn=>qn.label===Ec.Qp),bn=(0,Ec.UW)(pn,gt);return[pn,bn,nn]},[F,gt]);(0,S.useLayoutEffect)(()=>{Dt&&Ot.current?Rt(Ot.current.offsetHeight):Rt(0)},[Dt,_t]);const un=(0,S.useCallback)((Zt,pn)=>(0,gl.a_)({field:Zt,rowIndex:pn,range:F.timeRange}),[F]);if(!F||_t.length===0)return S.createElement(hl.Z,{fieldConfig:ue,panelId:Nt,data:F,needsStringField:!0});const rn=()=>S.createElement("div",{className:(0,H.cx)(Lt.labelContainer,Dt&&Lt.labelContainerAscending)},S.createElement("span",{className:Lt.label},"Common labels:"),S.createElement($m.j,{labels:Yt?Yt.value:{labels:"(no common labels)"}}));return S.createElement(G.$,{autoHide:!0,scrollTop:Ht},S.createElement("div",{className:Lt.container,ref:Ot},Ke&&!Dt&&rn(),S.createElement(Ad.w,{logRows:_t,deduplicatedRows:fn,dedupStrategy:gt,showLabels:Ce,showTime:xe,wrapLogMessage:Be,prettifyLogMessage:Xe,timeZone:ee,getFieldLinks:un,logsSortOrder:dt,enableLogDetails:vt,previewLimit:Dt?_t.length:void 0,onLogRowHover:pt,app:x.zj.Dashboard}),Ke&&Dt&&rn()))},km=F=>({container:(0,H.css)({marginBottom:F.spacing(1.5)}),labelContainer:(0,H.css)({margin:F.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,H.css)({margin:F.spacing(.5,0,.5,0)}),label:(0,H.css)({marginRight:F.spacing(.5),fontSize:F.typography.bodySmall.fontSize,fontWeight:F.typography.fontWeightMedium})});class Hm{getSuggestionsForData(ee){const ue=ee.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Ce}=ee;!Ce.hasData||!Ce.hasTimeField||!Ce.hasStringField||(Ce.preferredVisualisationType==="logs"?ue.append({name:Ha.y.Logs,score:Ka._.Best}):ue.append({name:Ha.y.Logs}))}}const Ld=new U.c(zm).setPanelOptions(F=>{F.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:xt.Y4.none,label:"None",description:wi.Uv[xt.Y4.none]},{value:xt.Y4.exact,label:"Exact",description:wi.Uv[xt.Y4.exact]},{value:xt.Y4.numbers,label:"Numbers",description:wi.Uv[xt.Y4.numbers]},{value:xt.Y4.signature,label:"Signature",description:wi.Uv[xt.Y4.signature]}]},defaultValue:xt.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:xt.UV.Descending,label:"Newest first"},{value:xt.UV.Ascending,label:"Oldest first"}]},defaultValue:xt.UV.Descending})}).setSuggestionsSupplier(new Hm);var Gm=e(72279),Bd=e(33501),jm=e(86160);function yc(F){const{width:ee,options:{feedUrl:ue=Bd.k,showImage:Ce}}=F,{state:xe,getNews:Be}=(0,jm.j)(ue);return(0,S.useEffect)(()=>{const Ke=F.eventBus.subscribe(Ct.U5,Be);return()=>{Ke.unsubscribe()}},[Be,F.eventBus]),(0,S.useEffect)(()=>{Be()},[Be]),xe.error?S.createElement(kt.b,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",S.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",S.createElement(We.J,{name:"external-link-alt"}))):xe.loading?S.createElement("div",null,"Loading..."):xe.value?S.createElement(G.$,{autoHeightMin:"100%",autoHeightMax:"100%"},xe.value.map((Ke,Xe)=>S.createElement(Gm.S,{key:Xe,index:Xe,width:ee,showImage:Ce,data:xe.value}))):null}const wd={showImage:!0},Qm=new U.c(yc).setPanelOptions(F=>{F.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Bd.k},defaultValue:wd.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:wd.showImage})});var Ym=e(90093),Ud=e(77266),Zm=e(42618);const Jm=({width:F,height:ee,data:ue,options:Ce})=>{const xe=(0,gl.u8)(ue.timeRange);if(!ue||!ue.series.length)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No data found in response"));const Be=(0,Ym.Z)(Zm.Ee);return S.createElement("div",{style:{width:F,height:ee}},S.createElement(Ud.E,{dataFrames:Be(ue.series,Ce),getLinks:xe}))};var Xm=e(39236),Dc=e(94993);const Br=({value:F,onChange:ee,context:ue})=>{const Ce=(0,Y.wW)(nr),xe=()=>{const Xe={field:"",color:""};ee(F?[...F,Xe]:[Xe])},Be=Xe=>{const dt=F?.slice();dt.splice(Xe,1),ee(dt)},Ke=(Xe,dt,gt)=>{let vt=F?.slice()??[];vt[Xe][dt]=gt,ee(vt)};return S.createElement(S.Fragment,null,F?.map((Xe,dt)=>S.createElement("div",{className:Ce.section,key:dt},S.createElement(Dc.b,{context:ue,value:Xe.field??"",onChange:gt=>{Ke(dt,"field",gt)},item:{settings:{filter:gt=>gt.name.includes("arc__")},id:`arc-field-${dt}`,name:`arc-field-${dt}`}}),S.createElement(Xm.zH,{color:Xe.color||"#808080",onChange:gt=>{Ke(dt,"color",gt)}}),S.createElement(ne.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>Be(dt),title:"Remove arc"}))),S.createElement(ne.zx,{size:"sm",icon:"plus",onClick:xe,variant:"secondary"},"Add arc"))},nr=()=>({section:(0,H.css)`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),qm=new U.c(Jm).setPanelOptions((F,ee)=>{F.addNestedOptions({category:["Nodes"],path:"nodes",build:ue=>{ue.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ue.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),ue.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:Br})}}),F.addNestedOptions({category:["Edges"],path:"edges",build:ue=>{ue.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ue.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var Nd=e(76236),Wd=e(28463),Cc=e(42486),ef=e(41792),pl=e(76806),vl=e(11610),Fd=e(55754),bc=e(84839),Pc=e(37479),El=e(60470),Qo=e(53910),tf=e(83998);let Kd=0;const Vd=()=>Kd++;function nf(F){const ee=(0,S.useRef)(null);return ee.current===null&&(ee.current=F+Vd()),ee.current.toString()}var Mo=(F=>(F.Donut="donut",F.Pie="pie",F))(Mo||{}),Xr=(F=>(F.Name="name",F.Percent="percent",F.Value="value",F))(Xr||{}),xo=(F=>(F.Percent="percent",F.Value="value",F))(xo||{});const _d={values:[]},dp={displayLabels:[]};function $d(F){return!F.field.custom?.hideFrom?.viz&&!isNaN(F.display.numeric)}function zd(F,ee){return ee.display.numeric+F}const af=({fieldDisplayValues:F,pieType:ee,width:ue,height:Ce,highlightedTitle:xe,displayLabels:Be=[],tooltipOptions:Ke})=>{const Xe=(0,Y.l4)(),dt=nf("PieChart"),gt=(0,Y.wW)(xc),vt=(0,Fd.Z)(),{containerRef:Et,TooltipInPortal:Nt}=(0,bc.Z)({detectBounds:!0,scroll:!0}),Dt=F.filter($d),Lt=Yt=>Yt.display.numeric,Ht=Yt=>`${dt}-${(0,Pc.Z)(Yt).toHex()}`,Rt=Yt=>`url(#${Ht(Yt)})`,Ot=Be.length>0,Vt=Ke.mode!=="none"&&vt.tooltipOpen,pt=Dt.reduce(zd,0),_t=rf(ue,Ce,ee),fn=[...new Set(Dt.map(Yt=>Yt.display.color??rs.R))];return S.createElement("div",{className:gt.container},S.createElement("svg",{width:_t.size,height:_t.size,ref:Et,style:{overflow:"visible"}},S.createElement(pl.Z,{top:_t.position,left:_t.position},fn.map(Yt=>S.createElement(ef.Z,{key:Yt,id:Ht(Yt),from:Sc(Yt,Xe),to:Mc(Yt,Xe),fromOffset:_t.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:_t.outerRadius})),S.createElement(vl.Z,{data:Dt,pieValue:Lt,outerRadius:_t.outerRadius,innerRadius:_t.innerRadius,cornerRadius:3,padAngle:.005},Yt=>S.createElement(S.Fragment,null,Yt.arcs.map(un=>{const rn=un.data.display.color??rs.R,Zt=Gd(xe,un);return un.data.hasLinks&&un.data.getLinks?S.createElement(El.V,{key:un.index,links:un.data.getLinks},pn=>S.createElement(kd,{tooltip:vt,highlightState:Zt,arc:un,pie:Yt,fill:Rt(rn),openMenu:pn.openMenu,tooltipOptions:Ke})):S.createElement(kd,{key:un.index,highlightState:Zt,tooltip:vt,arc:un,pie:Yt,fill:Rt(rn),tooltipOptions:Ke})}),Ot&&Yt.arcs.map(un=>{const rn=Gd(xe,un);return S.createElement(sf,{arc:un,key:un.index,highlightState:rn,outerRadius:_t.outerRadius,innerRadius:_t.innerRadius,displayLabels:Be,total:pt,color:Xe.colors.text.primary})}))))),Vt?S.createElement(Nt,{key:Math.random(),top:vt.tooltipTop,className:gt.tooltipPortal,left:vt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},S.createElement(Qo.c,{series:vt.tooltipData})):null)};function kd({arc:F,pie:ee,highlightState:ue,openMenu:Ce,fill:xe,tooltip:Be,tooltipOptions:Ke}){const Xe=(0,Y.l4)(),dt=(0,Y.wW)(xc),{eventBus:gt}=(0,Pt.R9)(),vt=(0,S.useCallback)(Dt=>{gt?.publish({type:za.xH.type,payload:{raw:Dt,x:0,y:0,dataId:F.data.display.title}}),Be.hideTooltip()},[gt,F,Be]),Et=(0,S.useCallback)(Dt=>{gt?.publish({type:za.es.type,payload:{raw:Dt,x:0,y:0,dataId:F.data.display.title}});const Lt=Dt.currentTarget.ownerSVGElement;if(Lt){const Ht=(0,Cc.Z)(Lt,Dt);Be.showTooltip({tooltipLeft:Ht.x,tooltipTop:Ht.y,tooltipData:Hd(ee,F,Ke)})}},[gt,F,Be,ee,Ke]),Nt=jd(ue,dt);return S.createElement("g",{key:F.data.display.title,className:Nt,onMouseMove:Ke.mode!=="none"?Et:void 0,onMouseOut:vt,onClick:Ce,"data-testid":Re.wl.components.Panels.Visualization.PieChart.svgSlice},S.createElement("path",{d:ee.path({...F}),fill:xe,stroke:Xe.colors.background.primary,strokeWidth:1}))}function sf({arc:F,outerRadius:ee,innerRadius:ue,displayLabels:Ce,total:xe,color:Be,highlightState:Ke}){const Xe=(0,Y.wW)(xc),dt=ue===0?ee/6:ue,[gt,vt]=yl(F,ee,dt);if(!(F.endAngle-F.startAngle>=.3))return null;let Nt=Ce.includes(Xr.Name)?Math.min(Math.max(ee/150*14,12),30):Math.min(Math.max(ee/100*14,12),36);return S.createElement("g",{className:jd(Ke,Xe)},S.createElement("text",{fill:Be,x:gt,y:vt,dy:".33em",fontSize:Nt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Ce.includes(Xr.Name)&&S.createElement("tspan",{x:gt,dy:"1.2em"},F.data.display.title),Ce.includes(Xr.Value)&&S.createElement("tspan",{x:gt,dy:"1.2em"},(0,ns.zc)(F.data.display)),Ce.includes(Xr.Percent)&&S.createElement("tspan",{x:gt,dy:"1.2em"},(F.data.display.numeric/xe*100).toFixed(F.data.field.decimals??0)+"%")))}function Hd(F,ee,ue){return ue.mode==="multi"?F.arcs.filter(Ce=>{const xe=Ce.data.field;return xe&&!xe.custom?.hideFrom?.tooltip&&!xe.custom?.hideFrom?.viz}).map(Ce=>({color:Ce.data.display.color??rs.R,label:Ce.data.display.title,value:(0,ns.zc)(Ce.data.display),isActive:Ce.index===ee.index})):[{color:ee.data.display.color??rs.R,label:ee.data.display.title,value:(0,ns.zc)(ee.data.display)}]}function yl(F,ee,ue){const Ce=(ee+ue)/2,xe=(+F.startAngle+ +F.endAngle)/2-Math.PI/2;return[Math.cos(xe)*Ce,Math.sin(xe)*Ce]}function Sc(F,ee){return(0,Pc.Z)(F).darken(20*(ee.isDark?1:-.7)).spin(4).toRgbString()}function Mc(F,ee){return(0,Pc.Z)(F).darken(10*(ee.isDark?1:-.7)).spin(-4).toRgbString()}function rf(F,ee,ue,Ce=16){const xe=Math.min(ee,F),Be=(xe-Ce*2)/2,Ke=ue===Mo.Pie?Be:Math.max(Be/3,20),Xe=Be-Ke,dt=(xe-Ce*2)/2,gt=1-(Be-Xe)/Be;return{position:dt+Ce,size:xe,outerRadius:Be,innerRadius:Xe,gradientFromOffset:gt}}var Dl=(F=>(F[F.Highlighted=0]="Highlighted",F[F.Deemphasized=1]="Deemphasized",F[F.Normal=2]="Normal",F))(Dl||{});function Gd(F,ee){return F?F===ee.data.display.title?0:1:2}function jd(F,ee){switch(F){case 0:return ee.svgArg.highlighted;case 1:return ee.svgArg.deemphasized;case 2:default:return ee.svgArg.normal}}const xc=F=>({container:(0,H.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,H.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,H.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,H.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,H.css)`
      ${(0,tf.getTooltipContainerStyles)(F)}
    `}),Qd={displayMode:xt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[xo.Percent]};function Yd(F){const{data:ee,timeZone:ue,fieldConfig:Ce,replaceVariables:xe,width:Be,height:Ke,options:Xe,id:dt}=F,gt=(0,Y.l4)(),vt=Zd(),Et=(0,Nd.nG)({fieldConfig:Ce,reduceOptions:Xe.reduceOptions,data:ee.series,theme:gt,replaceVariables:xe,timeZone:ue});return up(Et)?S.createElement(on.AY,{width:Be,height:Ke,legend:of(F,Et)},(Nt,Dt)=>S.createElement(af,{width:Nt,height:Dt,highlightedTitle:vt,fieldDisplayValues:Et,tooltipOptions:Xe.tooltip,pieType:Xe.pieType,displayLabels:Xe.displayLabels})):S.createElement(Tt.Z,{panelId:dt,fieldConfig:Ce,data:ee})}function of(F,ee){const ue=F.options.legend??Qd;if(ue.showLegend===!1)return;const Ce=ee.filter($d).reduce(zd,0),xe=ee.sort((Be,Ke)=>isNaN(Be.display.numeric)?1:isNaN(Ke.display.numeric)?-1:Ke.display.numeric-Be.display.numeric).map((Be,Ke)=>{const Xe=Be.field.custom?.hideFrom??{};if(Xe.legend)return;const dt=!!Xe.viz,gt=Be.display;return{label:gt.title??"",color:gt.color??rs.R,yAxis:1,disabled:dt,getItemKey:()=>(gt.title??"")+Ke,getDisplayValues:()=>{const vt=ue.values??[];let Et=[];if(vt.includes(xo.Value)&&Et.push({numeric:gt.numeric,text:(0,ns.zc)(gt),title:"Value"}),vt.includes(xo.Percent)){const Nt=dt?0:gt.numeric/Ce,Dt=Nt*100;Et.push({numeric:Nt,percent:Dt,text:dt||isNaN(Nt)?F.fieldConfig.defaults.noValue??"-":Dt.toFixed(Be.field.decimals??0)+"%",title:vt.length>1?"Percent":""})}return Et}}}).filter(Be=>!!Be);return S.createElement(on.AY.Legend,{placement:ue.placement,width:ue.width},S.createElement(En.l,{items:xe,seriesVisibilityChangeBehavior:Wd.Y.Hide,placement:ue.placement,displayMode:ue.displayMode}))}function up(F){return F.some(ee=>ee.view?.dataFrame.length)}function Zd(){const[F,ee]=(0,S.useState)(),{eventBus:ue}=(0,Pt.R9)();return(0,S.useEffect)(()=>{const Ce=Ke=>{ee(Ke.payload.dataId)},xe=Ke=>{ee(void 0)},Be=new ks.w0;return Be.add(ue.getStream(za.es).subscribe({next:Ce})),Be.add(ue.getStream(za.xH).subscribe({next:xe})),()=>{Be.unsubscribe()}},[ee,ue]),F}const mp=(F,ee,ue)=>{if(ee==="grafana-piechart-panel"&&ue.angular){const Ce=ue.angular,xe=[];let Be=F.options;if(Ce.aliasColors)for(const Ke of Object.keys(Ce.aliasColors)){const Xe=Ce.aliasColors[Ke];Xe&&xe.push({matcher:{id:Wo.mi.byName,options:Ke},properties:[{id:Ss.qb.Color,value:{mode:rs.S.Fixed,fixedColor:Xe}}]})}if(F.fieldConfig={overrides:xe,defaults:{unit:Ce.format,decimals:Ce.decimals?Ce.decimals:0}},Be.legend={placement:"right",values:[],displayMode:xt.jK.Table,showLegend:!0,calcs:[]},Ce.valueName)switch(Be.reduceOptions={calcs:[]},Ce.valueName){case"current":Be.reduceOptions.calcs=["lastNotNull"];break;case"min":Be.reduceOptions.calcs=["min"];break;case"max":Be.reduceOptions.calcs=["max"];break;case"avg":Be.reduceOptions.calcs=["mean"];break;case"total":Be.reduceOptions.calcs=["sum"];break}switch(Ce.legendType){case"Under graph":Be.legend.placement="bottom";break;case"Right side":Be.legend.placement="right";break}switch(Ce.pieType){case"pie":Be.pieType=Mo.Pie;break;case"donut":Be.pieType=Mo.Donut;break}return Ce.legend&&(Ce.legend.show||(Be.legend.showLegend=!1),Ce.legend.values&&Be.legend.values.push(xo.Value),Ce.legend.percentage&&Be.legend.values.push(xo.Percent)),Ce.legendType==="On graph"&&(Be.legend.showLegend=!1,Be.displayLabels=[Xr.Name],Ce.legend.values&&Be.displayLabels.push(Xr.Value),Ce.legend.percentage&&Be.displayLabels.push(Xr.Percent)),Be}return{}};class Tc{getSuggestionsForData(ee){const ue=ee.getListAppender({name:Ha.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[Xr.Percent],legend:{calcs:[],displayMode:xt.jK.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:Ce}=ee;if(Ce.hasNumberField){if(Ce.hasStringField&&Ce.frameCount===1){if(Ce.rowCountTotal>30||Ce.rowCountTotal<2)return;ue.append({name:Ha.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),ue.append({name:Ha.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Mo.Donut}});return}Ce.numberFieldCount>30||Ce.numberFieldCount<2||(ue.append({name:Ha.y.PieChart}),ue.append({name:Ha.y.PieChartDonut,options:{pieType:Mo.Donut}}))}}}const Cl=new U.c(Yd).setPanelChangeHandler(mp).useFieldConfig({disableStandardOptions:[Ss.qb.Thresholds],standardOptions:{[Ss.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:rs.S.PaletteClassic}}},useCustomConfig:F=>{ur.B(F)}}).setPanelOptions(F=>{(0,mo.j)(F),F.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Mo.Pie,label:"Pie"},{value:Mo.Donut,label:"Donut"}]},defaultValue:Mo.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Xr.Percent,label:"Percent"},{value:Xr.Name,label:"Name"},{value:Xr.Value,label:"Value"}]}}),Kr.L(F),mr.J(F,!1),F.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:xo.Percent,label:"Percent"},{value:xo.Value,label:"Value"}]},showIf:ee=>ee.legend.showLegend!==!1})}).setSuggestionsSupplier(new Tc);var Jd=e(87990),Oc=e(96631),Xd=e(82288),Ui=e(36395);const Ic=({data:F,alignedData:ee,seriesIdx:ue,datapointIdx:Ce,timeZone:xe,onAnnotationAdd:Be})=>{const Ke=(0,Y.l4)();if(!F||Ce==null)return null;const Xe=ee.fields[ue],dt=[],gt=new Set;if(Xe.getLinks){const Yt=Xe.values[Ce],un=Xe.display?Xe.display(Yt):{text:`${Yt}`,numeric:+Yt};Xe.getLinks({calculatedValue:un,valueRowIndex:Ce}).forEach(rn=>{const Zt=`${rn.title}/${rn.href}`;gt.has(Zt)||(dt.push(rn),gt.add(Zt))})}const vt=ee.fields[0],Et=vt.display||(0,os.U)({field:vt,timeZone:xe,theme:Ke}),Nt=Xe.state?.origin,Dt=Xe.display||(0,os.U)({field:Xe,timeZone:xe,theme:Ke}),Lt=Xe.values[Ce],Ht=Dt(Lt),Rt=Nt?(0,Oa.CZ)(F[Nt.frameIndex].fields[Nt.fieldIndex],F[Nt.frameIndex],F):null,Ot=(0,Ga.iK)(Xe,Ce);let Vt;Ot&&(Vt=vt.values[Ot]);const pt=vt.values[Ce];let _t=null,fn=null;if(Vt){const Yt=Vt&&(0,Ga.Y)(Vt-pt);fn=S.createElement(S.Fragment,null,S.createElement("br",null),S.createElement("strong",null,"Duration:")," ",Yt),_t=S.createElement(S.Fragment,null," to"," ",S.createElement("strong",null,Et(vt.values[Ot]).text))}return S.createElement("div",null,S.createElement("div",{style:{fontSize:Ke.typography.bodySmall.fontSize}},Rt,S.createElement("br",null),S.createElement(Qo.V,{label:Ht.text,color:Ht.color||rs.R,isActive:!0}),"From ",S.createElement("strong",null,Et(vt.values[Ce]).text),_t,fn),S.createElement("div",{style:{margin:Ke.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ke.colors.border.weak}`}},Be&&S.createElement(ma.s,{label:"Add annotation",icon:"comment-alt",onClick:Be}),dt.length>0&&dt.map((Yt,un)=>S.createElement(ma.s,{key:un,icon:"external-link-alt",target:Yt.target,label:Yt.title,url:Yt.href,onClick:Yt.onClick}))))};Ic.displayName="StateTimelineTooltip";const lf=({data:F,alignedData:ee,dataIdxs:ue,seriesIdx:Ce,timeZone:xe,timeRange:Be,mode:Ke=xt.f3.Single,sortOrder:Xe=xt.As.None,isPinned:dt})=>{const gt=(0,Y.wW)(qd),vt=(0,Y.l4)(),Et=Ce!=null?ue[Ce]:ue.find(_t=>_t!=null);if(Et==null||Ce==null)return null;const Nt=F.reduce((_t,fn)=>_t+fn.fields.filter(Yt=>Yt.type!==Un.fS.time).length,0);if(!ee.meta?.transformations?.length&&ee.fields.length-1!==Nt||!ee.fields[Ce])return null;let Dt=[];const Lt=ee.fields[0],Ht=Lt.display||(0,os.U)({field:Lt,timeZone:xe,theme:vt});let Rt=[];const Ot=Ht(Lt.values[Et]).text;if(Ke===xt.f3.Single||dt){const _t=ee.fields[Ce];Rt=mt(_t,Et);const fn=_t.display||(0,os.U)({field:_t,timeZone:xe,theme:vt}),Yt=_t.values[Et],un=fn(Yt),rn=(0,Ga.iK)(_t,Et);let Zt;rn&&(Zt=Lt.values[rn]);const pn=Lt.values[Et];let nn;if(Zt)nn=Zt&&(0,Ga.Y)(Zt-pn);else{const qn=Be.to.valueOf();nn=(0,Ga.Y)(qn-pn)}const bn=nn?[{label:"Duration",value:nn}]:[];Dt=[{label:(0,Oa.CZ)(_t),value:un.text,color:un.color,colorIndicator:Ge.F_.value,colorPlacement:Ge.Z2.trailing},...bn]}if(Ke===xt.f3.Multi&&!dt){const _t=ee.fields,fn=[];for(let Yt=0;Yt<_t.length;Yt++){const un=_t[Yt];if(!un||un===Lt||un.type===Un.fS.time||un.config.custom?.hideFrom?.tooltip||un.config.custom?.hideFrom?.viz)continue;const rn=un.display||(0,os.U)({field:un,timeZone:xe,theme:vt}),Zt=un.values[ue[Yt]],pn=rn(Zt);fn.push(Zt),Dt.push({label:(0,Oa.CZ)(un),value:pn.text,color:pn.color,colorIndicator:Ge.F_.value,colorPlacement:Ge.Z2.trailing,isActive:Ce===Yt})}if(Xe!==xt.As.None){const Yt=[...Dt],un=li.sortValues(Xe);Dt.sort((rn,Zt)=>{const pn=Yt.indexOf(rn),nn=Yt.indexOf(Zt);return un(fn[pn],fn[nn])})}}const Vt=()=>({label:"",value:Ot}),pt=()=>Dt;return S.createElement("div",{className:gt.wrapper},S.createElement(Je.r,{headerLabel:Vt(),isPinned:dt}),S.createElement(ci.X,{contentLabelValue:pt(),isPinned:dt}),dt&&S.createElement(Ze.c,{dataLinks:Rt,canAnnotate:!1}))},qd=F=>({wrapper:(0,H.css)({display:"flex",flexDirection:"column",width:Gs.ui})}),bl=10,eu=({data:F,timeRange:ee,timeZone:ue,options:Ce,width:xe,height:Be,replaceVariables:Ke,onChangeTimeRange:Xe})=>{const dt=(0,Y.l4)(),gt=(0,S.useRef)(void 0),vt=(0,S.useRef)(!1),[Et,Nt]=(0,S.useState)(void 0),[Dt,Lt]=(0,S.useState)(null),[Ht,Rt]=(0,S.useState)(null),[Ot,Vt]=(0,S.useState)(null),[pt,_t]=(0,S.useState)(!1),[fn,Yt]=(0,S.useState)(!1),{sync:un,canAddAnnotations:rn}=(0,Pt.R9)(),Zt=()=>{vt.current=!1,Lt(null),Yt(!1)},pn=()=>{vt.current=!vt.current,Yt(vt.current)},{frames:nn,warn:bn}=(0,S.useMemo)(()=>(0,Ga.AR)(F.series,Ce.mergeValues??!0,ee,dt),[F.series,Ce.mergeValues,ee,dt]),qn=(0,S.useMemo)(()=>(0,Ga.SA)(nn,Ce.legend,dt),[nn,Ce.legend,dt]),Qn=(0,S.useMemo)(()=>Xi(Ce.timezone,ue),[Ce.timezone,ue]),Rn=(0,S.useCallback)((na,Ua,Ma,wa)=>{const ea=nn??[],Cn=ea.reduce((Yn,ca)=>Yn+ca.fields.filter(Jn=>Jn.type!==Un.fS.time).length,0);return Ua===null||Ma===null||!na.meta?.transformations?.length&&na.fields.length-1!==Cn||!na.fields[Ua]?null:S.createElement(S.Fragment,null,fn&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Aa.P,{onClick:Zt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(Ic,{data:ea,alignedData:na,seriesIdx:Ua,datapointIdx:Ma,timeZone:ue,onAnnotationAdd:wa}))},[ue,nn,fn]);if(!nn||bn)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,bn??"No data found in response"));if(nn.length===1){const na=(0,Td.MB)(nn[0])}const Hn=!!(rn&&rn()),Ca=w.config.featureToggles.newVizTooltips&&un&&un()===Ea.m.Off;return S.createElement(Ui.K,{theme:dt,frames:nn,structureRev:F.structureRev,timeRange:ee,timeZone:Qn,width:xe,height:Be,legendItems:qn,...Ce,mode:Ga.KN.Changes},(na,Ua)=>(gt.current!==na&&!Ca&&(gt.current=ia({config:na,onUPlotClick:pn,setFocusedSeriesIdx:Rt,setFocusedPointIdx:Vt,setCoords:Lt,setHover:Nt,isToolTipOpen:vt,isActive:pt,setIsActive:_t,sync:un})),S.createElement(S.Fragment,null,Ca?S.createElement(S.Fragment,null,Ce.tooltip.mode!==xt.f3.None&&S.createElement(Gs.x2,{config:na,hoverMode:Gs.cm.xOne,queryZoom:Xe,render:(Ma,wa,ea,Cn)=>S.createElement(lf,{data:nn??[],dataIdxs:wa,alignedData:Ua,seriesIdx:ea,timeZone:ue,mode:Ce.tooltip.mode,sortOrder:Ce.tooltip.sort,isPinned:Cn,timeRange:ee})})):S.createElement(S.Fragment,null,S.createElement(gr.R,{config:na,onZoom:Xe}),S.createElement($s,{config:na,onChangeTimeRange:Xe}),F.annotations&&S.createElement(ua._,{annotations:F.annotations,config:na,timeZone:ue}),Hn?S.createElement(zn,{data:Ua,timeZone:ue,config:na},({startAnnotating:Ma})=>Ce.tooltip.mode===xt.f3.None||Ot===null||!pt&&un&&un()===Ea.m.Crosshair?null:S.createElement(Nn.h_,null,Et&&Dt&&Ht&&S.createElement(kn.S,{position:{x:Dt.viewport.x,y:Dt.viewport.y},offset:{x:bl,y:bl},allowPointerEvents:vt.current},Rn(Ua,Ht,Ot,()=>{Ma({coords:{plotCanvas:Dt.canvas,viewport:Dt.viewport}}),Zt()})))):S.createElement(Nn.h_,null,Ce.tooltip.mode!==xt.f3.None&&Et&&Dt&&S.createElement(kn.S,{position:{x:Dt.viewport.x,y:Dt.viewport.y},offset:{x:bl,y:bl},allowPointerEvents:vt.current},Rn(Ua,Ht,Ot)))))))};var Pl=e(6803);const cf=(F,ee,ue)=>{let Ce=F.options??{};if(ee==="natel-discrete-panel"&&ue.angular){const xe=ue.angular,Be=F.fieldConfig??{defaults:{},overrides:[]};xe.units&&(Be.defaults.unit=xe.units);const Ke={fillOpacity:100,lineWidth:0};Be.defaults.custom=Ke,Ce.mergeValues=!0;const Xe={type:Pl.H.ValueToText,options:{}};if(Be.defaults.mappings=[Xe],(0,ae.isArray)(xe.colorMaps))for(const dt of xe.colorMaps){const gt=dt.color;gt&&(Xe.options[dt.text]={color:gt})}if((0,ae.isArray)(xe.valueMaps))for(const dt of xe.valueMaps){const gt=dt.text,vt=dt.value;if(gt&&vt){let Et=Xe.options[vt];Et?Et.text=gt:Xe.options[vt]={text:gt}}}if((0,ae.isArray)(xe.rangeMaps))for(const dt of xe.rangeMaps){let gt=+dt.from,vt=+dt.to;const Et=dt.text;Et&&Be.defaults.mappings.push({type:Pl.H.RangeToText,options:{from:gt,to:vt,result:{text:Et}}})}F.fieldConfig=Be}return Ce},Yo={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:xt.Jp.Auto},Fo={fillOpacity:70,lineWidth:0};class Rc{getSuggestionsForData(ee){const{dataSummary:ue}=ee;if(!ue.hasData||!ue.hasTimeField||!ue.hasStringField&&!ue.hasNumberField||ue.numberFieldCount>=30||ue.preferredVisualisationType==="logs")return;ee.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ha.y.StateTimeline})}}const df=new U.c(eu).setPanelChangeHandler(cf).useFieldConfig({standardOptions:{[Ss.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:rs.S.ContinuousGrYlRd}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Fo.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Fo.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:Xd.c,override:Xd.c,shouldApply:ee=>ee.type!==Un.fS.time,process:jr.kG,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:Oc.M,override:Oc.M,shouldApply:ee=>ee.type!==Un.fS.time,process:jr.kG,settings:{isTime:!0}}),ur.B(F)}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Yo.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.Jp.Auto,label:"Auto"},{value:xt.Jp.Always,label:"Always"},{value:xt.Jp.Never,label:"Never"}]},defaultValue:Yo.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Yo.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Yo.rowHeight}),mr.J(F,!1),Kr.L(F,!w.config.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new Rc).setDataSupport({annotations:!0}),tu=({data:F,alignedData:ee,seriesIdx:ue,datapointIdx:Ce,timeZone:xe})=>{const Be=(0,Y.l4)();if(!F||Ce==null)return null;const Ke=ee.fields[ue],Xe=[],dt=new Set;if(Ke.getLinks){const Rt=Ke.values[Ce],Ot=Ke.display?Ke.display(Rt):{text:`${Rt}`,numeric:+Rt};Ke.getLinks({calculatedValue:Ot,valueRowIndex:Ce}).forEach(Vt=>{const pt=`${Vt.title}/${Vt.href}`;dt.has(pt)||(Xe.push(Vt),dt.add(pt))})}const gt=ee.fields[0],vt=gt.display||(0,os.U)({field:gt,timeZone:xe,theme:Be}),Et=Ke.state?.origin,Nt=Ke.display||(0,os.U)({field:Ke,timeZone:xe,theme:Be}),Dt=Ke.values[Ce],Lt=Nt(Dt),Ht=Et?(0,Oa.CZ)(F[Et.frameIndex].fields[Et.fieldIndex],F[Et.frameIndex],F):null;return S.createElement("div",null,S.createElement("div",{style:{fontSize:Be.typography.bodySmall.fontSize}},S.createElement("strong",null,vt(gt.values[Ce]).text),S.createElement("br",null),S.createElement(Qo.V,{label:Lt.text,color:Lt.color||rs.R,isActive:!0}),Ht),Xe.length>0&&S.createElement("div",{style:{margin:Be.spacing(1,-1,-1,-1),borderTop:`1px solid ${Be.colors.border.weak}`}},Xe.map((Rt,Ot)=>S.createElement(ma.s,{key:Ot,icon:"external-link-alt",target:Rt.target,label:Rt.title,url:Rt.href,onClick:Rt.onClick}))))};tu.displayName="StatusHistoryTooltip";function Ac(F,ee){return F.display?(0,ns.zc)(F.display(ee)):`${ee}`}const uf=({data:F,dataIdxs:ee,alignedData:ue,seriesIdx:Ce,mode:xe=xt.f3.Single,sortOrder:Be=xt.As.None,isPinned:Ke})=>{const Xe=(0,Y.wW)(mf),dt=Ce!=null?ee[Ce]:ee.find(Lt=>Lt!=null);if(dt==null||Ce==null)return null;let gt=[];const vt=ue.fields[0];let Et=[];if(xe===xt.f3.Single||Ke){const Lt=ue.fields[Ce];Et=mt(Lt,dt);const Ht=Lt.display||(0,os.U)(),Rt=Lt.values[dt],Ot=Ht(Rt);gt=[{label:(0,Oa.CZ)(Lt),value:Ac(Lt,Lt.values[dt]),color:Ot.color,colorIndicator:Ge.F_.value,colorPlacement:Ge.Z2.trailing}]}if(xe===xt.f3.Multi&&!Ke){const Lt=ue,Ht=Lt.fields,Rt=[];for(let Ot=0;Ot<Ht.length;Ot++){const Vt=Lt.fields[Ot];if(!Vt||Vt===vt||Vt.type===Un.fS.time||Vt.config.custom?.hideFrom?.tooltip||Vt.config.custom?.hideFrom?.viz)continue;const pt=Vt.display||(0,os.U)(),_t=Vt.values[dt],fn=pt(_t);Rt.push(_t),gt.push({label:(0,Oa.CZ)(Vt),value:Ac(Vt,Vt.values[dt]),color:fn.color,colorIndicator:Ge.F_.value,colorPlacement:Ge.Z2.trailing,isActive:Ce===Ot})}if(Be!==xt.As.None){const Ot=[...gt],Vt=li.sortValues(Be);gt.sort((pt,_t)=>{const fn=Ot.indexOf(pt),Yt=Ot.indexOf(_t);return Vt(Rt[fn],Rt[Yt])})}}const Nt=()=>({label:"",value:Ac(vt,vt.values[dt])}),Dt=()=>gt;return S.createElement("div",{className:Xe.wrapper},S.createElement(Je.r,{headerLabel:Nt(),isPinned:Ke}),S.createElement(ci.X,{contentLabelValue:Dt(),isPinned:Ke}),Ke&&S.createElement(Ze.c,{dataLinks:Et,canAnnotate:!1}))},mf=F=>({wrapper:(0,H.css)({display:"flex",flexDirection:"column",width:"280px"})}),nu=10,qr=({data:F,timeRange:ee,timeZone:ue,options:Ce,width:xe,height:Be,onChangeTimeRange:Ke})=>{const Xe=(0,Y.l4)(),dt=(0,S.useRef)(void 0),gt=(0,S.useRef)(!1),[vt,Et]=(0,S.useState)(void 0),[Nt,Dt]=(0,S.useState)(null),[Lt,Ht]=(0,S.useState)(null),[Rt,Ot]=(0,S.useState)(null),[Vt,pt]=(0,S.useState)(!1),[_t,fn]=(0,S.useState)(!1),{sync:Yt}=(0,Pt.R9)(),un=()=>{gt.current=!1,Dt(null),fn(!1)},rn=()=>{gt.current=!gt.current,fn(gt.current)},{frames:Zt,warn:pn}=(0,S.useMemo)(()=>(0,Ga.AR)(F.series,!1,ee,Xe),[F.series,ee,Xe]),nn=(0,S.useMemo)(()=>(0,Ga.SA)(Zt,Ce.legend,Xe),[Zt,Ce.legend,Xe]),bn=(0,S.useCallback)((Hn,Ca,na)=>{const Ua=Zt??[],Ma=Ua.reduce((wa,ea)=>wa+ea.fields.filter(Cn=>Cn.type!==Un.fS.time).length,0);return Ca===null||na===null||!Hn.meta?.transformations?.length&&Hn.fields.length-1!==Ma||!Hn.fields[Ca]?null:S.createElement(S.Fragment,null,_t&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Aa.P,{onClick:un,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(tu,{data:Ua,alignedData:Hn,seriesIdx:Ca,datapointIdx:na,timeZone:ue}))},[ue,Zt,_t]),qn=Hn=>Ce.tooltip.mode===xt.f3.None||Rt===null||!Vt&&Yt&&Yt()===Ea.m.Crosshair?null:S.createElement(Nn.h_,null,vt&&Nt&&Lt&&S.createElement(kn.S,{position:{x:Nt.viewport.x,y:Nt.viewport.y},offset:{x:nu,y:nu},allowPointerEvents:gt.current},bn(Hn,Lt,Rt))),Qn=(0,S.useMemo)(()=>Xi(Ce.timezone,ue),[Ce.timezone,ue]);if(!Zt||pn)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,pn??"No data found in response"));if(Zt[0].length>xe/2)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"Too many points to visualize properly. ",S.createElement("br",null),"Update the query to return fewer points. ",S.createElement("br",null),"(",Zt[0].length," points received)"));const Rn=w.config.featureToggles.newVizTooltips&&Yt&&Yt()===Ea.m.Off;return S.createElement(Ui.K,{theme:Xe,frames:Zt,structureRev:F.structureRev,timeRange:ee,timeZone:Qn,width:xe,height:Be,legendItems:nn,...Ce,mode:Ga.KN.Samples},(Hn,Ca)=>(dt.current!==Hn&&!Rn&&(dt.current=ia({config:Hn,onUPlotClick:rn,setFocusedSeriesIdx:Ht,setFocusedPointIdx:Ot,setCoords:Dt,setHover:Et,isToolTipOpen:gt,isActive:Vt,setIsActive:pt})),S.createElement(S.Fragment,null,F.annotations&&S.createElement(ua._,{annotations:F.annotations,config:Hn,timeZone:ue,disableCanvasRendering:!0}),Rn?S.createElement(S.Fragment,null,Ce.tooltip.mode!==xt.f3.None&&S.createElement(Gs.x2,{config:Hn,hoverMode:Gs.cm.xyOne,queryZoom:Ke,render:(na,Ua,Ma,wa,ea)=>S.createElement(uf,{data:Zt??[],dataIdxs:Ua,alignedData:Ca,seriesIdx:Ma,timeZone:ue,mode:Ce.tooltip.mode,sortOrder:Ce.tooltip.sort,isPinned:wa})})):S.createElement(S.Fragment,null,S.createElement(gr.R,{config:Hn,onZoom:Ke}),qn(Ca),S.createElement($s,{config:Hn,onChangeTimeRange:Ke})))))},ff={colWidth:.9,rowHeight:.9,showValue:xt.Jp.Auto},Lc={fillOpacity:70,lineWidth:1};class gf{getSuggestionsForData(ee){const{dataSummary:ue}=ee;if(!ue.hasData||!ue.hasTimeField||!ue.hasStringField&&!ue.hasNumberField||ue.numberFieldCount>=30||ue.rowCountMax>100||ue.preferredVisualisationType==="logs")return;ee.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:rs.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:xe=>{xe.options.colWidth=.7}}}).append({name:Ha.y.StatusHistory})}}const hf=new U.c(qr).useFieldConfig({standardOptions:{[Ss.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:rs.S.Thresholds}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Lc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Lc.fillOpacity,settings:{min:0,max:100,step:1}}),ur.B(F)}}).setPanelOptions(F=>{F.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.Jp.Auto,label:"Auto"},{value:xt.Jp.Always,label:"Always"},{value:xt.Jp.Never,label:"Never"}]},defaultValue:xt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),mr.J(F,!1),Kr.L(F,!w.config.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new gf).setDataSupport({annotations:!0});var pf=e(61411),Ni=e(44580),vf=e(76772);function Ef({onChange:F,value:ee,context:ue}){const Ce=xe=>{xe?.currentTarget.checked&&(ue.options.footer.show=!1),F(xe?.currentTarget.checked)};return S.createElement(vf.r,{value:!!ee,onChange:Ce})}function yf({cellOptions:F,onChange:ee}){const ue=xe=>{F.mode=xe,ee(F)},Ce=xe=>{F.valueDisplayMode=xe,ee(F)};return S.createElement(ot.K,{direction:"column",gap:0},S.createElement(kr.g,{label:"Gauge display mode"},S.createElement(si.S,{value:F?.mode??xt.QH.Gradient,onChange:ue,options:Df})),S.createElement(kr.g,{label:"Value display"},S.createElement(si.S,{value:F?.valueDisplayMode??xt.M8.Text,onChange:Ce,options:Bc})))}const Df=[{value:xt.QH.Basic,label:"Basic"},{value:xt.QH.Gradient,label:"Gradient"},{value:xt.QH.Lcd,label:"Retro LCD"}],Bc=[{value:xt.M8.Color,label:"Value color"},{value:xt.M8.Text,label:"Text color"},{value:xt.M8.Hidden,label:"Hidden"}],wc=[{value:xt.v7.Basic,label:"Basic"},{value:xt.v7.Gradient,label:"Gradient"}],Cf=({cellOptions:F,onChange:ee})=>{const ue=Ce=>{F.mode=Ce,ee(F)};return S.createElement(kr.g,{label:"Background display mode"},S.createElement(si.S,{value:F?.mode??xt.v7.Gradient,onChange:ue,options:wc}))};var Uc=e(14103),Sl=e(75703);const bf=["hideValue","drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"];function Pf(F){const ee=(0,Cr.F)(F);return{...ee,useCustomConfig:ue=>{ee.useCustomConfig?.(ue),ue.addBooleanSwitch({path:"hideValue",name:"Hide value"})}}}const Sf=F=>{const{cellOptions:ee,onChange:ue}=F,Ce=(0,S.useMemo)(()=>{const Ke=Pf(Sl.U);return(0,Uc.j)(Ke,"ChartCell")},[]),xe=(0,Y.wW)(xf),Be={...Sl.U,...ee};return S.createElement(ko.wc,null,Ce.list(bf.map(Ke=>`custom.${Ke}`)).map(Ke=>{if(Ke.showIf&&!Ke.showIf(Be))return null;const Xe=Ke.editor,dt=Ke.path;return S.createElement(kr.g,{label:Ke.name,key:Ke.id,className:xe.field},S.createElement(Xe,{onChange:gt=>ue({...ee,[dt]:gt}),value:(Mf(dt,Be)?Be[dt]:void 0)??Ke.defaultValue,item:Ke,context:{data:[]}}))}))};function Mf(F,ee){return F in ee}const xf=()=>({field:(0,H.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),au=({value:F,onChange:ee})=>{const ue=F.type,Ce=(0,Y.wW)(Tf),xe=Nc.find(gt=>gt.value.type===ue);let[Be,Ke]=(0,S.useState)({});const Xe=gt=>{gt.value!==void 0&&(F=gt.value,Be[F.type]!==void 0&&Object.keys(Be[F.type]).length>1&&(F=(0,ae.merge)(F,Be[F.type])),ee(F))},dt=gt=>{Be[F.type]=(0,ae.merge)(F,gt),Ke(Be),ee(Be[F.type])};return S.createElement("div",{className:Ce.fixBottomMargin},S.createElement(kr.g,null,S.createElement(Pe.Ph,{options:Nc,value:xe,onChange:Xe})),ue===xt.h2.Gauge&&S.createElement(yf,{cellOptions:F,onChange:dt}),ue===xt.h2.ColorBackground&&S.createElement(Cf,{cellOptions:F,onChange:dt}),ue===xt.h2.Sparkline&&S.createElement(Sf,{cellOptions:F,onChange:dt}))},Nc=[{value:{type:xt.h2.Auto},label:"Auto"},{value:{type:xt.h2.Sparkline},label:"Sparkline"},{value:{type:xt.h2.ColorText},label:"Colored text"},{value:{type:xt.h2.ColorBackground},label:"Colored background"},{value:{type:xt.h2.Gauge},label:"Gauge"},{value:{type:xt.h2.JSONView},label:"JSON View"},{value:{type:xt.h2.Image},label:"Image"}],Tf=F=>({fixBottomMargin:(0,H.css)({marginBottom:F.spacing(-2)})}),Ml={cellHeight:xt.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class Of{getSuggestionsForData(ee){const ue=ee.getListAppender({name:Ha.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ce=>{Ce.fieldConfig.defaults.custom.minWidth=50}}});ee.dataSummary.fieldCount===0?ue.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):ue.append({})}}const Wi="Table footer",xl=["Cell options"],su=new U.c(Id).setPanelChangeHandler(fl.I0).setMigrationHandler(fl.OF).useFieldConfig({useCustomConfig:F=>{F.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Ni.OA.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Ni.OA.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:Ni.OA.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:au,override:au,defaultValue:Ni.OA.cellOptions,process:jr.kG,category:xl,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:xl,showIf:ee=>ee.cellOptions.type===xt.h2.Auto||ee.cellOptions.type===xt.h2.JSONView||ee.cellOptions.type===xt.h2.ColorText||ee.cellOptions.type===xt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Ni.OA.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:Ml.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:Ml.cellHeight,settings:{options:[{value:xt.Ss.Sm,label:"Small"},{value:xt.Ss.Md,label:"Medium"},{value:xt.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[Wi],name:"Show table footer",defaultValue:Ml.footer?.show}).addCustomEditor({id:"footer.reducer",category:[Wi],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:pf.S.get("stats-picker").editor,defaultValue:[Lr.gz.sum],showIf:ee=>ee.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[Wi],name:"Count rows",description:"Display a single count for all data rows",defaultValue:Ml.footer?.countRows,showIf:ee=>ee.footer?.reducer?.length===1&&ee.footer?.reducer[0]===Lr.gz.count}).addMultiSelect({path:"footer.fields",category:[Wi],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async ee=>{const ue=[];if(ee&&ee.data&&ee.data.length>0){const Ce=ee.data[0];for(const xe of Ce.fields)if(xe.type===Un.fS.number){const Be=(0,Oa.CZ)(xe,Ce,ee.data),Ke=xe.name;ue.push({value:Ke,label:Be})}}return ue}},defaultValue:"",showIf:ee=>ee.footer?.show&&!ee.footer?.countRows||ee.footer?.reducer?.length===1&&ee.footer?.reducer[0]!==Lr.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Ef})}).setSuggestionsSupplier(new Of);var If=e(42341),Rf=e(24789),ru=e(51133),pr=(F=>(F.Code="code",F.HTML="html",F.Markdown="markdown",F))(pr||{}),Tl=(F=>(F.Go="go",F.Html="html",F.Json="json",F.Markdown="markdown",F.Plaintext="plaintext",F.Sql="sql",F.Typescript="typescript",F.Xml="xml",F.Yaml="yaml",F))(Tl||{});const Af="plaintext",Fi={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Wc={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Lf(F){const ee=(0,Y.wW)(Bf),[ue,Ce]=(0,S.useState)({mode:F.options.mode,content:ou(F.options,F.replaceVariables,Kt.default.disableSanitizeHtml)});if((0,Rf.Z)(()=>{const{options:xe,replaceVariables:Be}=F,Ke=ou(xe,Be,Kt.default.disableSanitizeHtml);(Ke!==ue.content||xe.mode!==ue.mode)&&Ce({mode:xe.mode,content:Ke})},100,[F]),ue.mode===pr.Code){const xe=F.options.code??Fi;return S.createElement(pc.p,{key:`${xe.showLineNumbers}/${xe.showMiniMap}`,value:ue.content,language:xe.language??Fi.language,width:F.width,height:F.height,containerStyles:ee.codeEditorContainer,showMiniMap:xe.showMiniMap,showLineNumbers:xe.showLineNumbers,readOnly:!0})}return S.createElement(G.$,{autoHeightMin:"100%",className:ee.containStrict},S.createElement(If.Z,{html:ue.content,className:ee.markdown,"data-testid":"TextPanel-converted-content"}))}function ou(F,ee,ue){let{mode:Ce,content:xe}=F;if(!xe)return"";switch(xe=ee(xe,{},F.code?.language==="json"?"json":"html"),Ce){case pr.Code:break;case pr.HTML:ue||(xe=fd.QX.sanitizeTextPanelContent(xe));break;case pr.Markdown:default:xe=(0,ru.x)(xe,{noSanitize:ue})}return xe}const Bf=F=>({codeEditorContainer:(0,H.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${F.colors.background.primary};
    }
  `,markdown:(0,H.cx)("markdown-html",(0,H.css)`
      height: 100%;
    `),containStrict:(0,H.css)({contain:"strict"})});var wf=e(43741),Fc=e(35921);const Kc=({value:F,onChange:ee,context:ue})=>{const Ce=(0,S.useMemo)(()=>ue.options?.mode??pr.Markdown,[ue]),xe=(0,Y.wW)(Uf),Be=()=>ue.getSuggestions?ue.getSuggestions().map(Ke=>(0,Fc.T)(Ke)):[];return S.createElement("div",{className:(0,H.cx)(xe.editorBox)},S.createElement(wf.Z,{disableHeight:!0},({width:Ke})=>Ke===0?null:S.createElement(pc.p,{value:F,onBlur:ee,onSave:ee,language:Ce,width:Ke,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Be})))},Uf=F=>({editorBox:(0,H.css)`
    label: editorBox;
    border: 1px solid ${F.colors.border.medium};
    border-radius: ${F.shape.radius.default};
    margin: ${F.spacing(.5)} 0;
    width: 100%;
  `}),Nf=F=>{const ee=parseFloat(F.pluginVersion||"6.1");let ue=F.options;if(F.hasOwnProperty("content")&&F.hasOwnProperty("mode")){const xe=F,Be=xe.content,Ke=xe.mode;delete xe.content,delete xe.mode,ee<7.1&&(ue={content:Be,mode:Ke})}return[pr.Code,pr.HTML,pr.Markdown].find(xe=>xe===ue.mode)||(ue={...ue,mode:pr.Markdown}),ue},Wf=new U.c(Lf).setPanelOptions(F=>{F.addRadio({path:"mode",name:"Mode",settings:{options:[{value:pr.Markdown,label:"Markdown"},{value:pr.HTML,label:"HTML"},{value:pr.Code,label:"Code"}]},defaultValue:Wc.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Tl).map(ee=>({value:ee,label:ee}))},defaultValue:Fi.language,showIf:ee=>ee.mode===pr.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Fi.showLineNumbers,showIf:ee=>ee.mode===pr.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Fi.showMiniMap,showIf:ee=>ee.mode===pr.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Kc,defaultValue:Wc.content})}).setMigrationHandler(Nf);var Ff=e(86347),Zo=e(52078),Kf=e(20447);class Vf{getSuggestionsForData(ee){const{dataSummary:ue}=ee;if(!ue.hasTimeField||!ue.hasNumberField||ue.rowCountTotal<2)return;const Ce=ee.getListAppender({name:Ha.y.LineChart,pluginId:"timeseries",options:{legend:{calcs:[],displayMode:xt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Be=>{Be.fieldConfig?.defaults.custom?.drawStyle!==xt.l8.Bars&&(Be.fieldConfig.defaults.custom.lineWidth=Math.max(Be.fieldConfig.defaults.custom.lineWidth??1,2))}}}),xe=100;if(Ce.append({name:Ha.y.LineChart}),ue.rowCountMax<200&&Ce.append({name:Ha.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:xt.KC.Smooth}},overrides:[]}}),ue.numberFieldCount===1){Ce.append({name:Ha.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Ce.append({name:Ha.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:rs.S.ContinuousGrYlRd},custom:{gradientMode:xt.FI.Scheme,lineInterpolation:xt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),ue.rowCountMax<xe&&(Ce.append({name:Ha.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:xt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.FI.Hue}},overrides:[]}}),Ce.append({name:Ha.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:rs.S.ContinuousGrYlRd},custom:{drawStyle:xt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:xt.FI.Scheme}},overrides:[]}}));return}Ce.append({name:Ha.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xt.o0.Normal,group:"A"}}},overrides:[]}}),Ce.append({name:Ha.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xt.o0.Percent,group:"A"}}},overrides:[]}}),ue.rowCountTotal/ue.numberFieldCount<xe&&(Ce.append({name:Ha.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:xt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.FI.Hue,stacking:{mode:xt.o0.Normal,group:"A"}}},overrides:[]}}),Ce.append({name:Ha.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:xt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.FI.Hue,stacking:{mode:xt.o0.Percent,group:"A"}}},overrides:[]}}))}}function _f(F){const ee=(0,ze.h4)().getCurrent()?.getPanelById(F);if(ee){const ue=ee.transformations?[...ee.transformations]:[];return ue.push({id:Kf.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:ue}}}const $f=({data:F,timeRange:ee,timeZone:ue,width:Ce,height:xe,options:Be,fieldConfig:Ke,onChangeTimeRange:Xe,replaceVariables:dt,id:gt})=>{const{sync:vt,canAddAnnotations:Et,onThresholdsChange:Nt,canEditThresholds:Dt,showThresholds:Lt,dataLinkPostProcessor:Ht}=(0,Pt.R9)(),Rt=(0,S.useMemo)(()=>Sr(F.series,Kt.config.theme2,ee),[F.series,ee]),Ot=(0,S.useMemo)(()=>Xi(Be.timezone,ue),[Be.timezone,ue]),Vt=(0,S.useMemo)(()=>{if(Rt?.length&&Rt.every(fn=>fn.meta?.type===Ff.P.TimeSeriesLong)){const fn=_f(gt);return{message:"Long data must be converted to wide",suggestions:fn?[fn]:void 0}}},[Rt,gt]);if(!Rt||Vt)return S.createElement(Tt.Z,{panelId:gt,message:Vt?.message,fieldConfig:Ke,data:F,needsTimeField:!0,needsNumberField:!0,suggestions:Vt?.suggestions});const pt=!!(Et&&Et()),_t=Kt.config.featureToggles.newVizTooltips&&vt&&vt()===Ea.m.Off;return S.createElement(ii,{frames:Rt,structureRev:F.structureRev,timeRange:ee,timeZone:Ot,width:Ce,height:xe,legend:Be.legend,options:Be},(fn,Yt)=>(Yt.fields.some(un=>!!un.config.links?.length)&&(Yt=dd(Yt,Rt,dt,ue,Ht)),S.createElement(S.Fragment,null,S.createElement(Zo.C,{config:fn}),Be.tooltip.mode===xt.f3.None||S.createElement(S.Fragment,null,_t?S.createElement(Gs.x2,{config:fn,hoverMode:Be.tooltip.mode===xt.f3.Single?Gs.cm.xOne:Gs.cm.xAll,queryZoom:Xe,clientZoom:!0,render:(un,rn,Zt,pn=!1)=>S.createElement(St,{frames:Rt,seriesFrame:Yt,dataIdxs:rn,seriesIdx:Zt,mode:Be.tooltip.mode,sortOrder:Be.tooltip.sort,isPinned:pn})}):S.createElement(S.Fragment,null,S.createElement(gr.R,{config:fn,onZoom:Xe,withZoomY:!0}),S.createElement(ta.i,{frames:Rt,data:Yt,config:fn,mode:Be.tooltip.mode,sortOrder:Be.tooltip.sort,sync:vt,timeZone:ue}))),F.annotations&&S.createElement(ua._,{annotations:F.annotations,config:fn,timeZone:ue}),_t?void 0:pt?S.createElement(zn,{data:Yt,timeZone:ue,config:fn},({startAnnotating:un})=>S.createElement(oa,{data:Yt,config:fn,timeZone:ue,replaceVariables:dt,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(rn,Zt)=>{Zt&&un({coords:Zt.coords})}}]}]})):S.createElement(oa,{data:Yt,frames:Rt,config:fn,timeZone:ue,replaceVariables:dt,defaultItems:[]}),F.annotations&&S.createElement(_r,{visibleSeries:Zr(fn,Rt),config:fn,exemplars:F.annotations,timeZone:ue}),(Dt&&Nt||Lt)&&S.createElement(Ir,{config:fn,fieldConfig:Ke,onThresholdsChange:Dt?Nt:void 0}),S.createElement($s,{config:fn,onChangeTimeRange:Xe}))))};var Vc=e(10020),iu=e(60100);const zf=({value:F,onChange:ee})=>{const ue=(0,Y.wW)(kf);(!F||F.length<1)&&(F=[""]);const Ce=()=>{ee([...F,Vc.RQ.default])},xe=Ke=>{const Xe=F.slice();Xe.splice(Ke,1),ee(Xe)},Be=(Ke,Xe)=>{const dt=F.slice();dt[Ke]=Xe??Vc.RQ.default,dt.length===0||dt.length===1&&dt[0]===""?ee(void 0):ee(dt)};return S.createElement("div",null,F.map((Ke,Xe)=>S.createElement("div",{className:ue.wrapper,key:`${Xe}.${Ke}`},S.createElement("span",{className:ue.first},S.createElement(iu.O,{onChange:dt=>Be(Xe,dt),includeInternal:!0,value:Ke??Vc.RQ.default})),Xe===F.length-1?S.createElement(di.h,{name:"plus",onClick:Ce,tooltip:"Add timezone"}):S.createElement(di.h,{name:"times",onClick:()=>xe(Xe),tooltip:"Remove timezone"}))))},kf=F=>({wrapper:(0,H.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,H.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var Hf=e(47423),Gf=e(89660),jf=e(71667);let Ki=null;const lu=(F,ee,ue,Ce)=>{if(ee==="graph"&&ue.angular){const{fieldConfig:xe,options:Be,annotations:Ke}=Qf({...ue.angular,fieldConfig:Ce,panel:F}),Xe=(0,ze.h4)().getCurrent();return Xe&&Ke?.length>0&&(Xe.annotations.list=[...Xe.annotations.list,...Ke],Ki==null&&(Ki=setTimeout(()=>{Ki=null,(0,Gf.$t)().refreshTimeModel()}))),F.fieldConfig=xe,F.alert=ue.angular.alert,Be}return Zf(F),{}};function Qf(F){let ee=[];const ue=F.fieldConfig?.overrides??[],Ce=F.yaxes??[];let xe=cu(Ce[0]);F.fieldConfig?.defaults&&(xe={...F.fieldConfig?.defaults,...xe});const Be={fill:F.dashes?"dash":"solid",dash:[F.dashLength??10,F.spaceLength??10]};if(F.aliasColors)for(const Et of Object.keys(F.aliasColors)){const Nt=F.aliasColors[Et];Nt&&ue.push({matcher:{id:Wo.mi.byName,options:Et},properties:[{id:Ss.qb.Color,value:{mode:rs.S.Fixed,fixedColor:Nt}}]})}let Ke=!1;if(F.seriesOverrides?.length)for(const Et of F.seriesOverrides){if(!Et.alias)continue;const Dt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Et.alias)?Wo.mi.byRegexp:Wo.mi.byName,options:Et.alias},properties:[]};let Lt;for(const Ht of Object.keys(Et)){const Rt=Et[Ht];switch(Ht){case"alias":case"$$hashKey":break;case"yaxis":if(Rt===2){const Ot=cu(Ce[1]);Yf(xe,Ot,Dt.properties)}break;case"fill":Dt.properties.push({id:"custom.fillOpacity",value:Rt*10});break;case"fillBelowTo":Ke=!0,Dt.properties.push({id:"custom.fillBelowTo",value:Rt});break;case"fillGradient":Rt&&(Dt.properties.push({id:"custom.fillGradient",value:"opacity"}),Dt.properties.push({id:"custom.fillOpacity",value:Rt*10}));break;case"points":Dt.properties.push({id:"custom.showPoints",value:Rt?xt.Jp.Always:xt.Jp.Never});break;case"bars":Rt?(Dt.properties.push({id:"custom.drawStyle",value:xt.l8.Bars}),Dt.properties.push({id:"custom.fillOpacity",value:100})):Dt.properties.push({id:"custom.drawStyle",value:xt.l8.Line});break;case"lines":Rt?Dt.properties.push({id:"custom.drawStyle",value:"line"}):Dt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":Dt.properties.push({id:"custom.lineWidth",value:Rt});break;case"pointradius":Dt.properties.push({id:"custom.pointSize",value:2+Rt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Lt||(Lt={fill:Be.fill,dash:[...Be.dash]}),Ht){case"dashLength":Lt.dash[0]=Rt;break;case"spaceLength":Lt.dash[1]=Rt;break;case"dashes":Lt.fill=Rt?"dash":"solid";break}break;case"stack":Dt.properties.push({id:"custom.stacking",value:Jf(Rt)});break;case"color":Dt.properties.push({id:"color",value:{fixedColor:Rt,mode:rs.S.Fixed}});break;case"transform":Dt.properties.push({id:"custom.transform",value:Rt==="negative-Y"?xt.pR.NegativeY:xt.pR.Constant});break;default:console.log("Ignore override migration:",Et.alias,Ht,Rt)}}Lt&&Dt.properties.push({id:"custom.lineStyle",value:Lt}),Dt.properties.length&&ue.push(Dt)}const Xe=xe.custom??{};Xe.drawStyle=F.bars?xt.l8.Bars:F.lines?xt.l8.Line:xt.l8.Points,F.points?(Xe.showPoints=xt.Jp.Always,(0,ae.isNumber)(F.pointradius)&&(Xe.pointSize=2+F.pointradius*2)):Xe.drawStyle!==xt.l8.Points&&(Xe.showPoints=xt.Jp.Never),Xe.lineWidth=F.linewidth,Be.fill!=="solid"&&(Xe.lineStyle=Be),Ke?Xe.fillOpacity=35:(0,ae.isNumber)(F.fill)&&(Xe.fillOpacity=F.fill*10),(0,ae.isNumber)(F.fillGradient)&&F.fillGradient>0&&(Xe.gradientMode=xt.FI.Opacity,Xe.fillOpacity=F.fillGradient*10),Xe.spanNulls=F.nullPointMode===Od.Gl.Ignore,F.steppedLine&&(Xe.lineInterpolation=xt.KC.StepAfter),Xe.drawStyle===xt.l8.Bars&&(Xe.fillOpacity=100),F.stack&&(Xe.stacking={mode:xt.o0.Normal,group:Cr.r.stacking.group}),xe.custom=(0,ae.omitBy)(Xe,ae.isNil),xe.nullValueMode=F.nullPointMode;const dt={legend:{displayMode:xt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:xt.f3.Single,sort:xt.As.None}},gt=F.legend;if(gt){if(gt.show?dt.legend.displayMode=gt.alignAsTable?xt.jK.Table:xt.jK.List:dt.legend.showLegend=!1,gt.rightSide&&(dt.legend.placement="right"),F.legend.values){const Et=(0,ae.pickBy)(F.legend);dt.legend.calcs=du(Et)}F.legend.sideWidth&&(dt.legend.width=F.legend.sideWidth),gt.hideZero&&ue.push(uu(Lr.gz.allIsZero)),gt.hideEmpty&&ue.push(uu(Lr.gz.allIsNull))}F.timeRegions?.length&&F.timeRegions.map((Nt,Dt)=>({name:`T${Dt+1}`,color:Nt.colorMode!=="custom"?Nt.colorMode:Nt.fillColor,line:Nt.line,fill:Nt.fill,fromDayOfWeek:Nt.fromDayOfWeek,toDayOfWeek:Nt.toDayOfWeek,from:Nt.from,to:Nt.to})).forEach((Nt,Dt)=>{const Lt={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[F.panel.id]},iconColor:Nt.fillColor??Nt.color,name:`T${Dt+1}`,target:{queryType:jf.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Nt.fromDayOfWeek,toDayOfWeek:Nt.toDayOfWeek,from:Nt.from,to:Nt.to,timezone:"utc"}}};Nt.fill?ee.push(Lt):Nt.line&&(Lt.iconColor=Nt.lineColor??"white",ee.push(Lt))});const vt=F.tooltip;if(vt&&(vt.shared!==void 0&&(dt.tooltip.mode=vt.shared?xt.f3.Multi:xt.f3.Single),vt.sort!==void 0&&vt.shared))switch(vt.sort){case 1:dt.tooltip.sort=xt.As.Ascending;break;case 2:dt.tooltip.sort=xt.As.Descending;break;default:dt.tooltip.sort=xt.As.None}if(F.thresholds&&F.thresholds.length>0){let Et=[],Nt=!1,Dt=!1;const Lt=F.thresholds.sort((Rt,Ot)=>Rt.value>Ot.value?1:-1);for(let Rt=0;Rt<Lt.length;Rt++){const Ot=Lt[Rt],Vt=Lt.length>Rt+1?Lt[Rt+1]:null;Ot.fill&&(Nt=!0),Ot.line&&(Dt=!0),Ot.op==="gt"&&Et.push({value:Ot.value,color:_c(Ot)}),Ot.op==="lt"&&(Et.length===0&&Et.push({value:-1/0,color:_c(Ot)}),Vt&&Vt.op==="gt"&&Vt.value>Ot.value?Et.push({value:Ot.value,color:"transparent"}):Vt&&Vt.op==="lt"?Et.push({value:Ot.value,color:_c(Vt)}):Et.push({value:Ot.value,color:"transparent"}))}Et.length>0&&Et[0].value!==-1/0&&Et.unshift({color:"transparent",value:-1/0});let Ht=Nt?xt.i3.Area:xt.i3.Line;Dt&&Nt&&(Ht=xt.i3.LineAndArea),xe.custom.thresholdsStyle={mode:Ht},xe.thresholds={mode:Hf.H.Absolute,steps:Et}}return F.xaxis&&F.xaxis.show===!1&&F.xaxis.mode==="time"&&ue.push({matcher:{id:Wo.mi.byType,options:Un.fS.time},properties:[{id:"custom.axisPlacement",value:xt.LB.Hidden}]}),{fieldConfig:{defaults:(0,ae.omitBy)(xe,ae.isNil),overrides:ue},options:dt,annotations:ee}}function _c(F){return F.colorMode==="critical"?"red":F.colorMode==="warning"?"orange":F.colorMode==="custom"?F.fillColor||F.lineColor:"red"}function cu(F){if(!F)return{};const ee={axisPlacement:F.show?xt.LB.Auto:xt.LB.Hidden};if(F.label&&(ee.axisLabel=F.label),F.logBase){const ue=F.logBase;(ue===2||ue===10)&&(ee.scaleDistribution={type:xt.wf.Log,log:ue})}return(0,ae.omitBy)({unit:F.format,decimals:Ol(F.decimals),min:Ol(F.min),max:Ol(F.max),custom:ee},ae.isNil)}function Yf(F,ee,ue){for(const[Be,Ke]of Object.entries(ee))Be!=="custom"&&Ke!==F[Be]&&ue.push({id:Be,value:Ke});const Ce=F.custom??{},xe=ee.custom??{};for(const[Be,Ke]of Object.entries(xe))Ke!==Ce[Be]&&ue.push({id:`custom.${Be}`,value:Ke})}function Ol(F){if((0,ae.isNumber)(F))return F;if((0,ae.isString)(F)){const ee=Number(F);if(!isNaN(ee))return ee}}function du(F){const ee=[];for(const ue of Object.keys(F)){const Ce=Lr.TB.getIfExists(ue);Ce&&ee.push(Ce.id)}return ee}function Zf(F){F.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(F.fieldConfig.defaults.custom.hideFrom.viz=F.fieldConfig.defaults.custom.hideFrom.graph,delete F.fieldConfig.defaults.custom.hideFrom.graph),F.fieldConfig?.overrides&&(F.fieldConfig.overrides=F.fieldConfig.overrides.map(ee=>(ee.properties=ee.properties.map(ue=>(ue.id==="custom.hideFrom"&&ue.value.graph&&(ue.value.viz=ue.value.graph,delete ue.value.graph),ue)),ee)))}function uu(F){return{matcher:{id:Wo.mi.byValue,options:{reducer:F,op:xt.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function Jf(F){const ee=Cr.r.stacking?.group;return{mode:F?xt.o0.Normal:xt.o0.None,group:(0,ae.isString)(F)?F:ee}}const Xf=new U.c($f).setPanelChangeHandler(lu).useFieldConfig((0,Cr.F)(Cr.r)).setPanelOptions(F=>{Kr.L(F),mr.J(F),F.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:zf,defaultValue:void 0})}).setSuggestionsSupplier(new Vf).setDataSupport({annotations:!0,alertStates:!0});var qf=e(66261),eg=e(81811),$c=e(21675);const mu={wrapper:(0,H.css)`
    height: 100%;
    overflow: scroll;
  `},tg=({data:F,options:ee})=>{const ue=(0,S.createRef)(),Ce=(0,S.useMemo)(()=>(0,$c.N)(F.series[0]),[F.series]),xe=(0,te.Z)(async()=>await(0,qf.F)().get(F.request?.targets[0].datasource?.uid));return!F||!F.series.length||!Ce?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No data found in response")):S.createElement("div",{className:mu.wrapper},S.createElement("div",{ref:ue}),S.createElement(eg.m,{dataFrames:F.series,scrollElementClass:mu.wrapper,traceProp:Ce,datasource:xe.value,topOfViewRef:ue,createSpanLink:ee.createSpanLink}))},ng=new U.c(tg);var ag=e(85610),sg=e(64885);const Il=({data:F,timeRange:ee,timeZone:ue,width:Ce,height:xe,options:Be,fieldConfig:Ke,replaceVariables:Xe,id:dt})=>{const{dataLinkPostProcessor:gt}=(0,Pt.R9)(),vt=Be.xField??F.series[0].fields.find(Dt=>Dt.type===Un.fS.number)?.name,Et=(Dt,Lt,Ht)=>(Lt={...Lt,x:ag.Ls.get(Wo.mi.byName).get(vt)},(0,sg.R)(Dt,Lt)),Nt=(0,S.useMemo)(()=>{if(F.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:F.series};let Dt=F.series,Lt;if(Be.xField){if(Lt=(0,Ta.findFieldIndex)(Be.xField,Dt[0]),Lt==null)return{warning:"Unable to find field: "+Be.xField,frames:F.series}}else if(Lt=Dt[0].fields.findIndex(Ht=>Ht.type===Un.fS.number),Lt===-1)return{warning:"No numeric fields found for X axis",frames:Dt};if(Lt!=null){const Ht=Dt[0].fields[Lt];if(Ht.type===Un.fS.number&&!(0,Vr.lP)(Ht.values))return{warning:"Values must be in ascending order",frames:Dt}}return{frames:Sr(Dt,w.config.theme2,void 0,Lt)}},[F.series,Be.xField]);return Nt.warning||!Nt.frames?S.createElement(Tt.Z,{panelId:dt,fieldConfig:Ke,data:F,message:Nt.warning,needsNumberField:!0}):S.createElement(ii,{frames:Nt.frames,structureRev:F.structureRev,timeRange:ee,timeZone:ue,width:Ce,height:xe,legend:Be.legend,options:Be,preparePlotFrame:Et},(Dt,Lt)=>(Lt.fields.some(Ht=>!!Ht.config.links?.length)&&(Lt=dd(Lt,Nt.frames,Xe,ue,gt)),S.createElement(S.Fragment,null,S.createElement(Zo.C,{config:Dt}),Be.tooltip.mode!==xt.f3.None&&S.createElement(S.Fragment,null,w.config.featureToggles.newVizTooltips?S.createElement(Gs.x2,{config:Dt,hoverMode:Be.tooltip.mode===xt.f3.Single?Gs.cm.xOne:Gs.cm.xAll,render:(Ht,Rt,Ot,Vt=!1)=>S.createElement(St,{frames:Nt.frames,seriesFrame:Lt,dataIdxs:Rt,seriesIdx:Ot,mode:Be.tooltip.mode,sortOrder:Be.tooltip.sort,isPinned:Vt})}):S.createElement(ta.i,{frames:Nt.frames,data:Lt,config:Dt,mode:Be.tooltip.mode,sortOrder:Be.tooltip.sort,timeZone:ue})))))};class fu{getSuggestionsForData(ee){const{dataSummary:ue}=ee;return ue.numberFieldCount<2||ue.rowCountTotal<2||ue.rowCountTotal<2?void 0:ee.getListAppender({name:Ha.y.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:xt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:xe=>{xe.fieldConfig?.defaults.custom?.drawStyle!==xt.l8.Bars&&(xe.fieldConfig.defaults.custom.lineWidth=Math.max(xe.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const zc=new U.c(Il).useFieldConfig((0,Cr.F)(Cr.r,!1)).setPanelOptions(F=>{const ee=["X Axis"];F.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:ee,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:ue=>ue.type===Un.fS.number}}),Kr.L(F),mr.J(F)}).setSuggestionsSupplier(new fu),rg=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],og=()=>{const F=(0,Y.wW)(ig);return S.createElement("div",{className:F.container},S.createElement("h1",{className:F.title},"Welcome to Grafana"),S.createElement("div",{className:F.help},S.createElement("h3",{className:F.helpText},"Need help?"),S.createElement("div",{className:F.helpLinks},rg.map((ee,ue)=>S.createElement("a",{key:`${ee.label}-${ue}`,className:F.helpLink,href:`${ee.href}?utm_source=grafana_gettingstarted`},ee.label)))))},ig=F=>({container:(0,H.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${F.spacing(3)};

      ${F.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${F.breakpoints.down("sm")} {
        padding: 0 ${F.spacing(1)};
      }
    `,title:(0,H.css)`
      margin-bottom: 0;

      ${F.breakpoints.down("lg")} {
        margin-bottom: ${F.spacing(1)};
      }

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h2.fontSize};
      }
      ${F.breakpoints.down("sm")} {
        font-size: ${F.typography.h3.fontSize};
      }
    `,help:(0,H.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,H.css)`
      margin-right: ${F.spacing(2)};
      margin-bottom: 0;

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h4.fontSize};
      }

      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,H.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,H.css)`
      margin-right: ${F.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${F.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),lg=new U.c(og).setNoPadding();var cg=(F=>(F[F.NoData=0]="NoData",F[F.BadFrameSelection=1]="BadFrameSelection",F[F.XNotFound=2]="XNotFound",F))(cg||{});function Rl(F){return F.type===Un.fS.number}function dg(F,ee){if(!ee||!ee.length)return{error:0};F||(F={frame:0});let ue=ee[F.frame??0];if(!ue)return{error:1};let Ce=-1;for(let Xe=0;Xe<ue.fields.length;Xe++){const dt=ue.fields[Xe];if(F.x&&F.x===(0,Oa.CZ)(dt,ue,ee)){Ce=Xe;break}if(Rl(dt)&&!F.x){Ce=Xe;break}}let xe=!1;const Be=ue.fields[Ce],Ke=[Be];for(const Xe of ue.fields)if(Xe.type===Un.fS.time&&(xe=!0),!(Xe===Be||!Rl(Xe))){if(F.exclude){const dt=(0,Oa.CZ)(Xe,ue,ee);if(F.exclude.includes(dt))continue}Ke.push(Xe)}return{x:Be,fields:{x:kc(Be),y:ug(Be)},frame:{...ue,fields:Ke},hasData:ue.fields.length>0,hasTime:xe}}function kc(F){return F?ee=>F===ee||!!(F.state&&F.state===ee.state):()=>!1}function ug(F){if(!F)return()=>!1;const ee=kc(F);return ue=>!ee(ue,void 0,void 0)}const mg=({value:F,onChange:ee,context:ue})=>{const Ce=(0,S.useMemo)(()=>ue?.data?.length?ue.data.map((Xe,dt)=>({value:dt,label:`${(0,Oa.nf)(Xe,dt)} (index: ${dt}, rows: ${Xe.length})`})):[{value:0,label:"First result"}],[ue.data]),xe=(0,S.useMemo)(()=>dg(F,ue.data),[ue.data,F]),Be=(0,S.useMemo)(()=>{const Xe={numberFields:[],yFields:[],xAxis:F?.x?{label:`${F.x} (Not found)`,value:F.x}:void 0},dt=ue.data?ue.data[F?.frame??0]:void 0;if(dt){const gt=xe.x?(0,Oa.CZ)(xe.x,xe.frame,ue.data):void 0;for(let vt of dt.fields)if(Rl(vt)){const Et=(0,Oa.CZ)(vt,dt,ue.data),Nt={label:Et,value:Et};Xe.numberFields.push(Nt),F?.x&&Et===F.x&&(Xe.xAxis=Nt),gt!==Et&&Xe.yFields.push({label:Et,value:F?.exclude?.includes(Et)})}}return Xe},[xe,ue.data,F]),Ke=(0,Y.wW)(fg);return ue.data?.length?S.createElement("div",null,S.createElement(kr.g,{label:"Data"},S.createElement(Pe.Ph,{isClearable:!0,options:Ce,placeholder:Ce[0].label,value:Ce.find(Xe=>Xe.value===F?.frame),onChange:Xe=>{ee({...F,frame:Xe?.value})}})),S.createElement(kr.g,{label:"X Field"},S.createElement(Pe.Ph,{isClearable:!0,options:Be.numberFields,value:Be.xAxis,placeholder:`${Be.numberFields?.[0].label} (First numeric)`,onChange:Xe=>{ee({...F,x:Xe?.value})}})),S.createElement(kr.g,{label:"Y Fields"},S.createElement("div",null,Be.yFields.map(Xe=>S.createElement("div",{key:Xe.label,className:Ke.row},S.createElement(di.h,{name:Xe.value?"eye-slash":"eye",onClick:()=>{const dt=F?.exclude?[...F.exclude]:[];let gt=dt.indexOf(Xe.label);gt<0?dt.push(Xe.label):dt.splice(gt,1),ee({...F,exclude:dt})},tooltip:Xe.value?"Disable":"Enable"}),Xe.label))))):S.createElement("div",null,"No data...")},fg=F=>({sorter:(0,H.css)`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:(0,H.css)`
    padding: ${F.spacing(.5,1)};
    border-radius: ${F.shape.radius.default};
    background: ${F.colors.background.secondary};
    min-height: ${F.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${F.components.input.borderColor};
  `});var gg=e(958),gu=e(51740);const hg=({value:F,onChange:ee,context:ue,baseNameMode:Ce})=>{const xe=(Be,Ke)=>{ee({...F,[Ke]:Be})};return S.createElement("div",null,S.createElement(kr.g,{label:"X Field"},S.createElement(Dc.b,{value:F.x??"",context:ue,onChange:Be=>xe(Be,"x"),item:{id:"x",name:"x",settings:{baseNameMode:Ce}}})),S.createElement(kr.g,{label:"Y Field"},S.createElement(Dc.b,{value:F.y??"",context:ue,onChange:Be=>xe(Be,"y"),item:{id:"x",name:"x",settings:{baseNameMode:Ce}}})),S.createElement(kr.g,{label:"Point color"},S.createElement(gu.Lm,{value:F.pointColor,context:ue,onChange:Be=>xe(Be,"pointColor"),item:{id:"x",name:"x",settings:{baseNameMode:Ce,isClearable:!0,placeholder:"Use standard color scheme"}}})),S.createElement(kr.g,{label:"Point size"},S.createElement(gu.cL,{value:F.pointSize,context:ue,onChange:Be=>xe(Be,"pointSize"),item:{id:"x",name:"x",settings:{min:1,max:100}}})))};var Hc=(F=>(F.Auto="auto",F.Manual="manual",F))(Hc||{}),To=(F=>(F.Lines="lines",F.Points="points",F.PointsAndLines="points+lines",F))(To||{});const fp={exclude:[]},Gc={label:xt.Jp.Auto,show:"points"},gp={series:[]},hu=({value:F,onChange:ee,context:ue})=>{const[Ce,xe]=(0,S.useState)(0),Be=(0,Y.wW)(pu),Ke=(vt,Et,Nt)=>{ee(F.map((Dt,Lt)=>Lt===Et?{...Dt,[Nt]:vt}:Dt))},Xe=()=>{ee([...F,{pointColor:void 0,pointSize:Gc.pointSize}]),xe(F.length)};(0,S.useEffect)(()=>{F?.length||Xe()},[]);const dt=vt=>{ee(F.filter((Et,Nt)=>Nt!==vt))},gt=vt=>vt===Ce?`${Be.row} ${Be.sel}`:Be.row;return S.createElement(S.Fragment,null,S.createElement(ne.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:Xe,className:Be.marginBot},"Add series"),S.createElement("div",{className:Be.marginBot},F.map((vt,Et)=>S.createElement("div",{key:`series/${Et}`,className:gt(Et),onClick:()=>xe(Et),role:"button","aria-label":`Select series ${Et+1}`,tabIndex:0,onKeyPress:Nt=>{Nt.key==="Enter"&&xe(Et)}},S.createElement(gg.X,{name:vt.name??`Series ${Et+1}`,onChange:Nt=>Ke(Nt,Et,"name")}),S.createElement(di.h,{name:"trash-alt",title:"remove",className:(0,H.cx)(Be.actionIcon),onClick:()=>dt(Et),tooltip:"Delete series"})))),Ce>=0&&F[Ce]&&S.createElement(hg,{key:`series/${Ce}`,baseNameMode:jr.ii.ExcludeBaseNames,item:{},context:ue,value:F[Ce],onChange:vt=>{ee(F.map((Et,Nt)=>Nt===Ce?vt:Et))}}))},pu=F=>({marginBot:(0,H.css)({marginBottom:"20px"}),row:(0,H.css)({padding:`${F.spacing(.5,1)}`,borderRadius:`${F.shape.radius.default}`,background:`${F.colors.background.secondary}`,minHeight:`${F.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${F.components.input.borderColor}`,"&:hover":{border:`1px solid ${F.components.input.borderHover}`}}),sel:(0,H.css)({border:`1px solid ${F.colors.primary.border}`,"&:hover":{border:`1px solid ${F.colors.primary.border}`}}),actionIcon:(0,H.css)({color:`${F.colors.text.secondary}`,"&:hover":{color:`${F.colors.text}`}})});var Al=e(31621);const jc=({allSeries:F,data:ee,manualSeriesConfigs:ue,seriesMapping:Ce,rowIndex:xe,hoveredPointIndex:Be,options:Ke})=>{const Xe=(0,Y.wW)(pg);if(!F||xe==null)return null;const dt=F[Be],gt=dt.frame(ee),vt=dt.x(gt),Et=dt.y(gt);let Nt;if(Et.getLinks){const Rt=Et.values[xe],Ot=Et.display?Et.display(Rt):{text:`${Rt}`,numeric:+Rt};Nt=Et.getLinks({calculatedValue:Ot,valueRowIndex:xe}).map(Vt=>(Vt.title||(Vt.title=(0,gl.Rb)(Vt.href)),Vt))}let Dt=gt.fields.filter(Rt=>Rt!==vt&&Rt!==Et),Lt=null,Ht=null;if(Ce===Hc.Manual&&ue){const Rt=ue[Be]?.pointColor?.field??"",Ot=ue[Be]?.pointSize?.field??"",Vt=Rt?(0,Ta.findField)(gt,Rt):void 0,pt=Ot?(0,Ta.findField)(gt,Ot):void 0;Ht={colorFacetFieldName:Rt,sizeFacetFieldName:Ot,colorFacetValue:Vt?.values[xe],sizeFacetValue:pt?.values[xe]},Dt=Dt.filter(_t=>_t!==Vt&&_t!==pt)}return Lt={name:(0,Oa.CZ)(Et,gt),val:Et.values[xe],field:Et,color:dt.pointColor(gt)},S.createElement(S.Fragment,null,S.createElement("table",{className:Xe.infoWrap},S.createElement("tr",null,S.createElement("th",{colSpan:2,style:{backgroundColor:Lt.color}})),S.createElement("tbody",null,S.createElement("tr",null,S.createElement("th",null,(0,Oa.CZ)(vt,gt)),S.createElement("td",null,Qc(vt,vt.values[xe]))),S.createElement("tr",null,S.createElement("th",null,Lt.name,":"),S.createElement("td",null,Qc(Lt.field,Lt.val))),Ht!==null&&Ht.colorFacetFieldName&&S.createElement("tr",null,S.createElement("th",null,Ht.colorFacetFieldName,":"),S.createElement("td",null,Ht.colorFacetValue)),Ht!==null&&Ht.sizeFacetFieldName&&S.createElement("tr",null,S.createElement("th",null,Ht.sizeFacetFieldName,":"),S.createElement("td",null,Ht.sizeFacetValue)),Dt.map((Rt,Ot)=>S.createElement("tr",{key:Ot},S.createElement("th",null,(0,Oa.CZ)(Rt,gt),":"),S.createElement("td",null,Qc(Rt,Rt.values[xe])))),Nt&&Nt.length>0&&S.createElement("tr",null,S.createElement("td",{colSpan:2},S.createElement(ko.wc,null,Nt.map((Rt,Ot)=>S.createElement(ne.Qj,{key:Ot,icon:"external-link-alt",target:Rt.target,href:Rt.href,onClick:Rt.onClick,fill:"text",style:{width:"100%"}},Rt.title))))))))};function Qc(F,ee){return F.display?(0,ns.zc)(F.display(ee)):`${ee}`}const pg=F=>({infoWrap:(0,H.css)({padding:"8px",width:"100%",th:{fontWeight:F.typography.fontWeightMedium,padding:F.spacing(.25,2)}}),highlight:(0,H.css)({background:F.colors.action.hover}),xVal:(0,H.css)({fontWeight:F.typography.fontWeightBold}),icon:(0,H.css)({marginRight:F.spacing(1),verticalAlign:"middle"})});function Ll(F,ee){return F.display?(0,ns.zc)(F.display(ee)):`${ee}`}const vu=({dataIdxs:F,seriesIdx:ee,data:ue,allSeries:Ce,dismiss:xe,options:Be,isPinned:Ke})=>{const Xe=(0,Y.wW)(hp),dt=F.find(Ot=>Ot!==null),gt=ee-1;if(!Ce||dt==null)return null;const vt=Ce[gt],Et=vt.frame(ue),Nt=vt.x(Et),Dt=vt.y(Et),Lt=()=>{let Ot=vt.name;Be.seriesMapping==="manual"&&(Ot=Be.series?.[gt]?.name??`Series ${gt+1}`);let Vt=vt.pointColor(Et);return Array.isArray(Vt)&&(Vt=Vt[dt]),{label:Ot,value:null,color:(0,rr.alpha)(Vt,.5),colorIndicator:Ge.F_.marker_md}},Ht=()=>{let Ot=vt.pointColor(Et);Array.isArray(Ot)&&(Ot=Ot[dt]);const Vt={name:(0,Oa.CZ)(Dt,Et),val:Dt.values[dt],field:Dt,color:(0,rr.alpha)(Ot,.5)},pt=[{label:(0,Oa.CZ)(Nt,Et),value:Ll(Nt,Nt.values[dt])},{label:Vt.name,value:Ll(Vt.field,Vt.val)}],_t=Et.fields.filter(fn=>fn!==Nt&&fn!==Dt);return _t&&_t.forEach(fn=>{pt.push({label:fn.name,value:Ll(fn,fn.values[dt])})}),pt},Rt=()=>{let Ot=[];if(Dt.getLinks){const Vt=Dt.values[dt],pt=Dt.display?Dt.display(Vt):{text:`${Vt}`,numeric:+Vt};Ot=Dt.getLinks({calculatedValue:pt,valueRowIndex:dt}).map(_t=>(_t.title||(_t.title=(0,gl.Rb)(_t.href)),_t))}return Ot};return S.createElement("div",{className:Xe.wrapper},S.createElement(Je.r,{headerLabel:Lt(),isPinned:Ke}),S.createElement(ci.X,{contentLabelValue:Ht(),isPinned:Ke}),Ke&&S.createElement(Ze.c,{dataLinks:Rt(),canAnnotate:!1}))},hp=F=>({wrapper:(0,H.css)({display:"flex",flexDirection:"column",width:"280px"})});var vg=e(41099);const Eu=5;function yu(F){return{standardOptions:{[Ss.qb.Min]:{hideFromDefaults:!0},[Ss.qb.Max]:{hideFromDefaults:!0},[Ss.qb.Unit]:{hideFromDefaults:!0},[Ss.qb.Decimals]:{hideFromDefaults:!0},[Ss.qb.NoValue]:{hideFromDefaults:!0},[Ss.qb.DisplayName]:{hideFromDefaults:!0},[Ss.qb.Thresholds]:{hideFromDefaults:!0},[Ss.qb.Mappings]:{hideFromDefaults:!0},[Ss.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:rs.S.PaletteClassic}}},useCustomConfig:ee=>{ee.addRadio({path:"show",name:"Show",defaultValue:F.show,settings:{options:[{label:"Points",value:To.Points},{label:"Lines",value:To.Lines},{label:"Both",value:To.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:F.pointSize?.fixed??Eu,settings:{min:1,max:100,step:1},showIf:ue=>ue.show!==To.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:ue=>ue.show!==To.Points,editor:vg.j,override:vg.j,process:jr.kG,shouldApply:ue=>ue.type===Un.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:F.lineWidth,settings:{min:0,max:10,step:1},showIf:ue=>ue.show!==To.Points}),Ao.r(ee,F),ur.B(ee)}}}function Eg(F,ee,ue,Ce,xe,Be){let Ke,Xe;try{Ke=yg(F,ee()),Xe=Dg(ee,Ke,ue,Ce,xe,Be)}catch(dt){let gt="Unknown error in prepScatter";return typeof dt=="string"?gt=dt:dt instanceof Error&&(gt=dt.message),{error:gt,series:[]}}return{series:Ke,builder:Xe}}function Du(F,ee,ue,Ce,xe,Be){const Ke=ee[ue],Xe=Ke.fields[xe];let dt=Xe.state??{};dt.seriesIndex=F,Xe.state=dt;let gt=Be.pointColorFixed?w.config.theme2.visualization.getColorByName(Be.pointColorFixed):(0,Rs.YO)(Xe,w.config.theme2).color,vt=()=>gt;const Et={...Gc,...Xe.config.custom};let Nt=Rs.WO.get(rs.S.PaletteClassic);if(Be.pointColorIndex){const Ot=ee[ue].fields[Be.pointColorIndex];if(Ot)if(Nt=(0,Rs.fD)(Xe),Nt.isByValue){const Vt=Be.pointColorIndex;vt=pt=>{const _t=pt.fields[Vt];return _t.state?.range&&(_t.state.range=void 0),_t.display=(0,os.U)({field:_t,theme:w.config.theme2}),_t.values.map(fn=>_t.display(fn).color)}}else gt=Nt.getCalculator(Ot,w.config.theme2)(Ot.values[0],1),vt=()=>gt}let Dt=Be.pointSizeConfig,Lt=Be.pointSizeConfig?.fixed??Xe.config.custom?.pointSize?.fixed??Eu,Ht=()=>Lt;Be.pointSizeIndex?Ht=Ot=>{const Vt=(0,Ta.getScaledDimensionForField)(Ot.fields[Be.pointSizeIndex],Be.pointSizeConfig,xt.B5.Quad),pt=Array(Ot.length);for(let _t=0;_t<Ot.length;_t++)pt[_t]=Vt.get(_t);return pt}:Dt={fixed:Lt,min:Lt,max:Lt};const Rt=(0,Oa.CZ)(Xe,Ke,ee);return{name:Rt,frame:Ot=>Ot[ue],x:Ot=>Ot.fields[Ce],y:Ot=>Ot.fields[xe],legend:()=>[{label:Rt,color:gt,getItemKey:()=>Rt,yAxis:xe}],showLine:Et.show!==To.Points,lineWidth:Et.lineWidth??2,lineStyle:Et.lineStyle,lineColor:()=>gt,showPoints:Et.show!==To.Lines?xt.Jp.Always:xt.Jp.Never,pointSize:Ht,pointColor:vt,pointSymbol:(Ot,Vt)=>"circle",label:xt.Jp.Never,labelValue:()=>"",show:!Ke.fields[xe].config.custom.hideFrom?.viz,hints:{pointSize:Dt,pointColor:{mode:Nt}}}}function yg(F,ee){let ue=0;if(!ee.length)throw"Missing data";if(F.seriesMapping==="manual"){if(!F.series?.length)throw"Missing series config";const dt=[];for(const gt of F.series){if(!gt?.x)throw"Select X dimension";if(!gt?.y)throw"Select Y dimension";for(let vt=0;vt<ee.length;vt++){const Et=ee[vt],Nt=(0,Ta.findFieldIndex)(gt.x,Et,ee);if(Nt!=null){const Dt=(0,Ta.findFieldIndex)(gt.y,Et,ee);if(Dt==null)throw"Y must be in the same frame as X";const Lt={pointColorFixed:gt.pointColor?.fixed,pointColorIndex:(0,Ta.findFieldIndex)(gt.pointColor?.field,Et,ee),pointSizeConfig:gt.pointSize,pointSizeIndex:(0,Ta.findFieldIndex)(gt.pointSize?.field,Et,ee)};dt.push(Du(ue++,ee,vt,Nt,Dt,Lt))}}}return dt}const Ce=F.dims??{},xe=Ce.frame??0,Be=ee[xe],Ke=[];let Xe=(0,Ta.findFieldIndex)(Ce.x,Be,ee);for(let dt=0;dt<Be.fields.length;dt++)if(Rl(Be.fields[dt])){if(Xe==null||dt===Xe){Xe=dt;continue}if(Ce.exclude&&Ce.exclude.includes((0,Oa.CZ)(Be.fields[dt],Be,ee)))continue;Ke.push(dt)}if(Xe==null)throw"Missing X dimension";if(!Ke.length)throw"No Y values";return Ke.map(dt=>Du(ue++,ee,xe,Xe,dt,{}))}const Dg=(F,ee,ue,Ce,xe,Be)=>{let Ke,Xe;function dt(_t){return(Yt,un,rn,Zt)=>(us.Z.orient(Yt,un,(pn,nn,bn,qn,Qn,Rn,Hn,Ca,na,Ua,Ma,wa,ea,Cn,Yn)=>{const ca=us.Z.pxRatio,Jn=ee[un-1];let Pa=Yt.data[un],Ia=Jn.showLine,xa=Jn.showPoints===xt.Jp.Always;!xa&&Jn.showPoints===xt.Jp.Auto&&(xa=Pa[0].length<1e3),!xa&&!Ia&&(Ia=!0);let yn=1;Yt.ctx.save(),Yt.ctx.rect(Yt.bbox.left,Yt.bbox.top,Yt.bbox.width,Yt.bbox.height),Yt.ctx.clip(),Yt.ctx.fillStyle=pn.fill(),Yt.ctx.strokeStyle=pn.stroke(),Yt.ctx.lineWidth=yn;let Fn=2*Math.PI,Kn=qn.key,ya=Qn.key,ba=Jn.hints.pointSize;const Ra=Jn.hints.pointColor.mode.isByValue;let Wa=(ba.max??ba.fixed)*ca,Bs=Yt.posToVal(-Wa/2,Kn),gs=Yt.posToVal(Yt.bbox.width/ca+Wa/2,Kn),ar=Yt.posToVal(Yt.bbox.height/ca+Wa/2,ya),Ks=Yt.posToVal(-Wa/2,ya),Vo=_t.disp.size.values(Yt,un),Xo=_t.disp.color.values(Yt,un),vi=_t.disp.color.alpha,Ur=Ia?new Path2D:null,to=null;for(let lr=0;lr<Pa[0].length;lr++){let Ps=Pa[0][lr],oo=Pa[1][lr],no=Vo[lr]*ca;if(Ps>=Bs&&Ps<=gs&&oo>=ar&&oo<=Ks){let td=Rn(Ps,qn,Ua,Ca),Nl=Hn(oo,Qn,Ma,na);Ia&&Ur.lineTo(td,Nl),xa&&(Yt.ctx.moveTo(td+no/2,Nl),Yt.ctx.beginPath(),Yt.ctx.arc(td,Nl,no/2,0,Fn),Ra&&Xo[lr]!==to&&(to=Xo[lr],Yt.ctx.fillStyle=(0,rr.alpha)(to,vi),Yt.ctx.strokeStyle=to),Yt.ctx.fill(),Yt.ctx.stroke(),_t.each(Yt,un,lr,td-no/2-yn/2,Nl-no/2-yn/2,no+yn,no+yn))}}if(Ia){let lr=Jn.frame(F());Yt.ctx.strokeStyle=Jn.lineColor(lr),Yt.ctx.lineWidth=Jn.lineWidth*ca;const{lineStyle:Ps}=Jn;Ps&&Ps.fill!=="solid"&&(Ps.fill==="dot"&&(Yt.ctx.lineCap="round"),Yt.ctx.setLineDash(Ps.dash??[10,10])),Yt.ctx.stroke(Ur)}Yt.ctx.restore()}),null)}let gt=dt({disp:{size:{values:(_t,fn)=>_t.data[fn][2]},color:{values:(_t,fn)=>_t.data[fn][3],alpha:.5}},each:(_t,fn,Yt,un,rn,Zt,pn)=>{un-=_t.bbox.left,rn-=_t.bbox.top,Ke.add({x:un,y:rn,w:Zt,h:pn,sidx:fn,didx:Yt})}});const vt=new La.U;vt.setCursor({drag:{setScale:!0},dataIdx:(_t,fn)=>{if(fn===1){const Yt=us.Z.pxRatio;Xe=null;let un=1/0,rn=_t.cursor.left*Yt,Zt=_t.cursor.top*Yt;Ke.get(rn,Zt,1,1,pn=>{if((0,ao.Pn)(rn,Zt,pn.x,pn.y,pn.x+pn.w,pn.y+pn.h)){let nn=pn.x+pn.w/2,bn=pn.y+pn.h/2,qn=nn-rn,Qn=bn-Zt,Rn=Math.sqrt(qn**2+Qn**2);Rn<=pn.w/2&&Rn<=un&&(un=Rn,Xe=pn)}})}return Xe&&fn===Xe.sidx?Xe.didx:null},points:{size:(_t,fn)=>Xe&&fn===Xe.sidx?Xe.w/us.Z.pxRatio:0,fill:(_t,fn)=>"rgba(255,255,255,0.4)"}});const Et=()=>{Be?.current&&(Ce&&Ce(void 0),xe&&xe())};let Nt=null;vt.addHook("init",(_t,fn)=>{w.config.featureToggles.newVizTooltips||(_t.over.style.overflow="hidden"),Nt=_t.root.parentElement,xe&&Nt?.addEventListener("click",xe)}),vt.addHook("destroy",_t=>{xe&&(Nt?.removeEventListener("click",xe),Et())});let Dt;vt.addHook("syncRect",(_t,fn)=>{Dt=fn}),Ce&&vt.addHook("setLegend",_t=>{if(_t.cursor.idxs!=null)for(let fn=0;fn<_t.cursor.idxs.length;fn++){const Yt=_t.cursor.idxs[fn];if(Yt!=null&&!Be?.current){Ce({scatterIndex:fn-1,xIndex:Yt,pageX:Dt.left+_t.cursor.left,pageY:Dt.top+_t.cursor.top});return}}Be?.current||Ce(void 0)}),vt.addHook("drawClear",_t=>{Et(),Ke=Ke||new ao.lW(0,0,_t.bbox.width,_t.bbox.height),Ke.clear(),_t.series.forEach((fn,Yt)=>{Yt>0&&(fn._paths=null)})}),vt.setMode(2);const Lt=F();let Ht=ee[0].x(ee[0].frame(Lt)),Rt=Ht.config,Ot=Rt.custom,Vt=Ot?.scaleDistribution;vt.addScale({scaleKey:"x",isTime:!1,orientation:xt.wN.Horizontal,direction:xt.bQ.Right,distribution:Vt?.type,log:Vt?.log,linearThreshold:Vt?.linearThreshold,min:Rt.min,max:Rt.max,softMin:Ot?.axisSoftMin,softMax:Ot?.axisSoftMax,centeredZero:Ot?.axisCenteredZero,decimals:Rt.decimals});let pt=Ot.axisLabel;return vt.addAxis({scaleKey:"x",placement:Ot?.axisPlacement!==xt.LB.Hidden?xt.LB.Bottom:xt.LB.Hidden,show:Ot?.axisPlacement!==xt.LB.Hidden,grid:{show:Ot?.axisGridShow},border:{show:Ot?.axisBorderShow},theme:ue,label:pt==null||pt===""?(0,Oa.CZ)(Ht,ee[0].frame(Lt),Lt):pt,formatValue:(_t,fn)=>(0,ns.zc)(Ht.display(_t,fn))}),ee.forEach((_t,fn)=>{let Yt=_t.frame(Lt),un=_t.y(Yt);const rn=_t.lineColor(Yt),Zt=bg(Yt,_t.pointColor);let pn=un.config.unit??"y",nn=un.config,bn=nn.custom,qn=bn?.scaleDistribution;vt.addScale({scaleKey:pn,orientation:xt.wN.Vertical,direction:xt.bQ.Up,distribution:qn?.type,log:qn?.log,linearThreshold:qn?.linearThreshold,min:nn.min,max:nn.max,softMin:bn?.axisSoftMin,softMax:bn?.axisSoftMax,centeredZero:bn?.axisCenteredZero,decimals:nn.decimals});let Qn=bn?.axisLabel;vt.addAxis({scaleKey:pn,theme:ue,placement:bn?.axisPlacement===xt.LB.Auto?xt.LB.Left:bn?.axisPlacement,show:bn?.axisPlacement!==xt.LB.Hidden,grid:{show:bn?.axisGridShow},border:{show:bn?.axisBorderShow},size:bn?.axisWidth,label:Qn==null||Qn===""?(0,Oa.CZ)(un,ee[fn].frame(Lt),Lt):Qn,formatValue:(Rn,Hn)=>(0,ns.zc)(un.display(Rn,Hn))}),vt.addSeries({facets:[{scale:"x",auto:!0},{scale:pn,auto:!0}],pathBuilder:gt,theme:ue,scaleKey:"",lineColor:(0,rr.alpha)(""+rn,1),fillColor:(0,rr.alpha)(Zt,.5),show:!bn.hideFrom?.viz})}),vt};function Cu(F,ee,ue){return F.error||!ee.length?[null]:[null,...F.series.map((Ce,xe)=>{const Be=Ce.frame(ee);let Ke;const Xe=Ce.pointColor(Be);return Array.isArray(Xe)?Ke=Xe:Ke=Array(Be.length).fill(Xe),[Ce.x(Be).values,Ce.y(Be).values,Cg(Be,Ce.pointSize),Ke]})]}function Cg(F,ee){const ue=ee(F);return Array.isArray(ue)?ue:Array(F.length).fill(ue)}function bg(F,ee){const ue=ee(F);return Array.isArray(ue)?ue[0]:ue}const bu=10,Pg=F=>{const[ee,ue]=(0,S.useState)(),[Ce,xe]=(0,S.useState)([]),[Be,Ke]=(0,S.useState)(),[Xe,dt]=(0,S.useState)(),[gt,vt]=(0,S.useState)(),[Et,Nt]=(0,S.useState)(!1),Dt=!!w.config.featureToggles.newVizTooltips,Lt=(0,S.useRef)(!1),Ht=(0,Al.Z)(F.options),Rt=(0,Al.Z)(F.data),Ot=()=>{Lt.current=!1,Nt(!1),pt(void 0)},Vt=()=>{Lt.current=!Lt.current,Nt(Lt.current)},pt=un=>{vt(un)},_t=(0,S.useCallback)(()=>{const un=()=>F.data.series,rn=Eg(F.options,un,w.config.theme2,Dt?null:pt,Dt?null:Vt,Dt?null:Lt);rn.error?ue(rn.error):rn.series.length&&F.data.series&&(Ke(rn.builder),xe(rn.series),dt(()=>Cu(rn,F.data.series)),ue(void 0))},[F.data.series,F.options,Dt]),fn=(0,S.useCallback)(()=>{dt(()=>Cu({error:ee,series:Ce},F.data.series))},[F.data.series,ee,Ce]);(0,S.useEffect)(()=>{Ht!==F.options||Rt?.structureRev!==F.data.structureRev?_t():Rt?.series!==F.data.series&&fn()},[F]);const Yt=()=>{const un=[],rn=nn=>nn==null?"-":nn.toFixed(1),Zt=w.config.theme2;for(let nn=0;nn<Ce.length;nn++){const bn=Ce[nn],qn=bn.frame(F.data.series);if(qn)for(const Qn of bn.legend())Qn.getDisplayValues=()=>{const Rn=F.options.legend.calcs;if(!Rn?.length)return[];const Hn=bn.y(qn),Ca=Hn.display??rn;let na=null;const Ua=(0,Lr.Kx)({field:Hn,reducers:Rn});return Rn.map(Ma=>{const wa=Lr.TB.get(Ma);let ea=Ca;return wa.id===Lr.gz.diffperc&&(ea=(0,os.U)({field:{...Hn,config:{...Hn.config,unit:"percent"}},theme:Zt})),(wa.id===Lr.gz.count||wa.id===Lr.gz.changeCount||wa.id===Lr.gz.distinctCount)&&(na||(na=(0,os.U)({field:{...Hn,config:{...Hn.config,unit:"none"}},theme:Zt})),ea=na),{...ea(Ua[Ma]),title:wa.name,description:wa.description}})},Qn.disabled=!(bn.show??!0),F.options.seriesMapping===Hc.Manual&&(Qn.label=F.options.series?.[nn]?.name??`Series ${nn+1}`),Qn.color=(0,rr.alpha)(bn.lineColor(qn),1),un.push(Qn)}if(!F.options.legend.showLegend)return null;const pn={flexStart:(0,H.css)({div:{justifyContent:"flex-start"}})};return S.createElement(on.AY.Legend,{placement:F.options.legend.placement,width:F.options.legend.width},S.createElement(En.l,{className:pn.flexStart,placement:F.options.legend.placement,items:un,displayMode:F.options.legend.displayMode}))};return ee||!Be||!Xe?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,ee)):S.createElement(S.Fragment,null,S.createElement(on.AY,{width:F.width,height:F.height,legend:Yt()},(un,rn)=>S.createElement(Pd.N,{config:Be,data:Xe,width:un,height:rn},w.config.featureToggles.newVizTooltips&&F.options.tooltip.mode!==xt.f3.None&&S.createElement(Gs.x2,{config:Be,hoverMode:Gs.cm.xyOne,render:(Zt,pn,nn,bn,qn)=>S.createElement(vu,{data:F.data.series,dataIdxs:pn,allSeries:Ce,dismiss:qn,isPinned:bn,options:F.options,seriesIdx:nn})}))),!w.config.featureToggles.newVizTooltips&&S.createElement(Nn.h_,null,gt&&F.options.tooltip.mode!==xt.f3.None&&S.createElement(kn.S,{position:{x:gt.pageX,y:gt.pageY},offset:{x:bu,y:bu},allowPointerEvents:Lt.current},Et&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Aa.P,{onClick:Ot,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(jc,{options:F.options.tooltip,allSeries:Ce,manualSeriesConfigs:F.options.series,seriesMapping:F.options.seriesMapping,rowIndex:gt.xIndex,hoveredPointIndex:gt.scatterIndex,data:F.data.series}))))},Sg=new U.c(Pg).useFieldConfig(yu(Gc)).setPanelOptions(F=>{F.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Table",description:"Plot values within a single table result"},{value:"manual",label:"Manual",description:"Construct values from any result"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:mg,showIf:ee=>ee.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:hu,showIf:ee=>ee.seriesMapping==="manual"}),Kr.L(F,!0),mr.J(F)}),Mg={"core:plugin/graphite":async()=>await e.e(7494).then(e.bind(e,10291)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(8266),e.e(8831)]).then(e.bind(e,8266)),"core:plugin/dashboard":async()=>await e.e(4629).then(e.bind(e,74629)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(6087),e.e(9897)]).then(e.bind(e,16087)),"core:plugin/opentsdb":async()=>await e.e(3168).then(e.bind(e,62126)),"core:plugin/grafana":async()=>await e.e(7537).then(e.bind(e,23671)),"core:plugin/influxdb":async()=>await Promise.all([e.e(2048),e.e(1872),e.e(5783)]).then(e.bind(e,71872)),"core:plugin/loki":async()=>await Promise.all([e.e(9207),e.e(8735),e.e(307),e.e(5890),e.e(1598)]).then(e.bind(e,45890)),"core:plugin/jaeger":async()=>await e.e(890).then(e.bind(e,31146)),"core:plugin/zipkin":async()=>await e.e(4023).then(e.bind(e,96634)),"core:plugin/mixed":async()=>await e.e(2001).then(e.bind(e,74669)),"core:plugin/mysql":async()=>await Promise.all([e.e(2048),e.e(4251)]).then(e.bind(e,48728)),"core:plugin/grafana-postgresql-datasource":async()=>await Promise.all([e.e(2048),e.e(534)]).then(e.bind(e,20684)),"core:plugin/mssql":async()=>await Promise.all([e.e(2048),e.e(5032)]).then(e.bind(e,48386)),"core:plugin/prometheus":async()=>await Promise.all([e.e(9207),e.e(307),e.e(6912),e.e(7004)]).then(e.bind(e,66912)),"core:plugin/grafana-testdata-datasource":async()=>await Promise.all([e.e(5945),e.e(188),e.e(319)]).then(e.bind(e,56855)),"core:plugin/cloud-monitoring":async()=>await Promise.all([e.e(6490),e.e(2430),e.e(3549)]).then(e.bind(e,52430)),"core:plugin/azuremonitor":async()=>await Promise.all([e.e(6826),e.e(5945),e.e(188),e.e(5120),e.e(2364)]).then(e.bind(e,35120)),"core:plugin/tempo":async()=>await Promise.all([e.e(8631),e.e(295)]).then(e.bind(e,8631)),"core:plugin/alertmanager":async()=>await Promise.all([e.e(6826),e.e(6795)]).then(e.bind(e,23)),"core:plugin/grafana-pyroscope-datasource":async()=>await e.e(8693).then(e.bind(e,8886)),"core:plugin/parca":async()=>await Promise.all([e.e(5945),e.e(2015)]).then(e.bind(e,54941)),"core:plugin/text":P,"core:plugin/timeseries":b,"core:plugin/trend":O,"core:plugin/state-timeline":y,"core:plugin/status-history":D,"core:plugin/candlestick":g,"core:plugin/graph":async()=>await Promise.all([e.e(5888),e.e(1260)]).then(e.bind(e,33309)),"core:plugin/xychart":I,"core:plugin/geomap":async()=>await Promise.all([e.e(8296),e.e(8096)]).then(e.bind(e,36304)),"core:plugin/canvas":async()=>await Promise.all([e.e(9122),e.e(3330)]).then(e.bind(e,38529)),"core:plugin/dashlist":u,"core:plugin/alertlist":a,"core:plugin/annolist":i,"core:plugin/heatmap":async()=>await e.e(6987).then(e.bind(e,80203)),"core:plugin/table":C,"core:plugin/table-old":async()=>await e.e(6784).then(e.bind(e,38609)),"core:plugin/news":p,"core:plugin/live":v,"core:plugin/stat":Jd,"core:plugin/datagrid":c,"core:plugin/debug":l,"core:plugin/flamegraph":d,"core:plugin/gettingstarted":f,"core:plugin/gauge":Mn,"core:plugin/piechart":s,"core:plugin/bargauge":o,"core:plugin/barchart":r,"core:plugin/logs":E,"core:plugin/traces":T,"core:plugin/welcome":R,"core:plugin/nodeGraph":h,"core:plugin/histogram":m,"core:plugin/alertGroups":n};var Yc=e(88527),xg=e(78706),Tg=e(6509),Og=e(70576),Ig=e(341),Rg=e.n(Ig),Ag=e(25086),Lg=e.n(Ag),Bg=e(72470),Pu=e.n(Bg),wg=e(45607),Ug=e(55793),Ng=e(55024),Wg=e(16425),Fg=e(34840),Kg=e(51158),Vg=e(4409),_g=e(39806),$g=e(77537),zg=e(76485),Su=e(38177),kp=e(89377),Hp=e(4027),Gp=e(59554),jp=e(65103),Qp=e(85095),Yp=e(28844),Zp=e(26189),Jp=e(47825),Xp=e(7540),kg=e(32711),Hg=e(49244),Gg=e(48018),jg=e(14150),Mu=e(96901),Qg=e(60742),Yg=e(51088),Zg=e(81965);const Vi=Gg;Vi.PanelPlugin=U.c,Vi.DataSourcePlugin=M.hf,Vi.AppPlugin=x.k8,Vi.DataSourceApi=M.MF;const Jg=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((F,ee)=>({...F,[ee]:{fakeDep:1}}),{}),Xg={"@emotion/css":H,"@emotion/react":xg,"@grafana/data":kg,"@grafana/runtime":Hg,"@grafana/slate-react":Su.ZP,"@grafana/ui":Vi,"app/core/app_events":{default:Ti.h$,__useDefault:!0},"app/core/config":{default:Kt.default,__useDefault:!0},"app/core/core":{appEvents:Ti.h$,contextSrv:Ti.Vt},"app/core/services/backend_srv":{BackendSrv:Uo.y$,getBackendSrv:Uo.i},"app/core/table_model":{default:jg.Z,__useDefault:!0},"app/core/time_series":{default:Mu.Z,__useDefault:!0},"app/core/time_series2":{default:Mu.Z,__useDefault:!0},"app/core/utils/datemath":be,"app/core/utils/flatten":Qg,"app/core/utils/kbn":{default:Yg.Z,__useDefault:!0},"app/core/utils/ticks":Zg,"app/features/dashboard/impression_store":{impressions:gd.Z},d3:Tg,emotion:H,i18next:Og,jquery:{default:Rg(),__useDefault:!0},...Jg,lodash:{default:J(),__useDefault:!0},moment:{default:Lg(),__useDefault:!0},prismjs:Pu(),react:S,"react-dom":wg,"react-inlinesvg":Ug,"react-redux":Ng,"react-router-dom":Wg,"react-router":Fg,redux:Kg,rxjs:Vg,"rxjs/operators":_g,slate:$g.ZP,"slate-plain-serializer":zg.Z,"slate-react":Su.ZP};function _i({url:F,source:ee,transformSourceMapURL:ue=!1,transformAssets:Ce=!0}){const xe=F.split("/public/plugins/"),Be=xe[0],Ke=xe[1].split("/")[0];let Xe=ee;return Ce&&(Xe=Xe.replace(/(\/?)(public\/plugins)/g,`${Be}/$2`),Xe=Xe.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Be}/public/$2$3`)),ue&&(Xe=Xe.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Be}/public/plugins/${Ke}/$2.map`)),Xe}var Bl=e(56745),$i=e(90736);async function qg(F,ee,ue){const Ce=await F(ee,ue),xe=Ce.headers.get("content-type")||"";if(Bl.Nr.test(xe)){const Be=await Ce.text();let Ke=Be;if(Bl.YB.test(Ke)&&(Ke=ah(Be)),(0,$i.g)(Ce.url)){const Xe=_i({url:Ce.url,source:Ke});return new Response(new Blob([Xe],{type:"text/javascript"}))}return new Response(new Blob([Ke],{type:"text/javascript"}))}return Ce}function eh(F,ee,ue){const Ce=ee.endsWith("module.js")&&!(0,$i.g)(ee);try{const xe=F.apply(this,[ee,ue]),Be=nh(xe);return Ce?(0,Yc.u0)(Be):Be}catch{return Bl.xm.test(ee)?`${w.config.appSubUrl??""}/public/${ee}`:(console.log(`SystemJS: failed to resolve '${ee}'`),ee)}}function th(F,ee){if(ee.endsWith(".css")&&!F){const Ce=L.i3.get(ee)?.default;Ce&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,Ce])}}function nh(F){return F.startsWith(`${Bl.OY}:`)?F:(F.endsWith("!")&&(F=F.slice(0,-1)),["css","js","json","wasm"].some(Ce=>F.endsWith(Ce))?F:F+".js")}function ah(F){return`(function(define) {
  ${F}
})(window.__grafana_amd_define);`}var sh=e(1188),rh=e(54758),xu=e(97068),Tu=e(30684);function oh(F){const ee=new URL(window.location.href),ue=new URL(F);return ee.host===ue.host}async function ih(F,ee,ue){let Ce="";if(oh(F)?(Ce=await(await fetch(F)).text(),Ce=_i({url:F,source:Ce,transformSourceMapURL:!0,transformAssets:!1})):(0,$i.g)(F)&&(Ce=await(await fetch(F)).text(),Ce=_i({url:F,source:Ce,transformSourceMapURL:!0,transformAssets:!0})),Ce.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");Ce=Ou(Ce),ue.evaluate(Ce)}async function lh(F){if((0,$i.g)(F.module)){const ee=F.module;let Ce=await(await fetch(ee)).text();return Ce=_i({url:ee,source:Ce,transformSourceMapURL:!0,transformAssets:!0}),Ce}else{const ee=(0,Yc.u0)(F.module);let Ce=await(await fetch(ee)).text();return Ce=_i({url:ee,source:Ce,transformSourceMapURL:!0,transformAssets:!1}),Ce=Ou(Ce),Ce}}function Ou(F){return F.replace(/window\.location/gi,"window.locationSandbox")}function ch(F){F.evaluate(`${Tu.X.toString()};${Tu.X.name}()`)}const Ko=["iframe"];var Iu=e(38714),wl=e(59889),Zc=e(70621);const Jc=!!w.config.featureToggles.frontendSandboxMonitorOnly;function dh(F){return!!F&&typeof F=="object"&&F?.hasOwnProperty("plugin")}function qp(F){throw new Error(`Unexpected object: ${F}. This should never happen.`)}function uh(F){return F instanceof S.Component}function ro(F,ee){ee={...ee,source:"sandbox",monitorOnly:String(Jc)},(0,Zc.KE)(F,ee)}function zi(F,ee){ee={...ee,source:"sandbox",monitorOnly:String(Jc)},(0,Zc.H)(F,ee)}function Ru(F,ee){ee={...ee,source:"sandbox",monitorOnly:String(Jc)},(0,Zc.PN)(F,ee)}async function mh({isAngular:F,pluginId:ee}){if(!w.config.featureToggles.pluginsFrontendSandbox||F||location.search.includes("nosandbox")&&w.config.buildInfo.env==="development"||w.config.disableFrontendSandboxForPlugins.includes(ee))return!1;const xe=await(0,xu.a)(ee);return!(xe.type===wl.zV.app&&xe.signatureType===wl._Z.grafana)}function fh(F){return F?.constructor?.name==="RegExp"}function Xc(F){return F&&(fh(F)&&(0,Iu.qD)(F)?new RegExp(F):Array.isArray(F)?F.map(Xc):typeof F=="object"?Object.keys(F).reduce((ee,ue)=>(Reflect.set(ee,ue,Xc(Reflect.get(F,ue))),ee),{}):F)}const wr=new Map,vo=!!w.config.featureToggles.frontendSandboxMonitorOnly,Au=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function gh(){return wr.size===0&&(hh(wr),ph(wr),vh(wr),Ch(wr),Dh(wr),Eh(wr),yh(wr),bh(wr),Ph(wr),Lu(wr),Sh(wr)),wr}function Ul(F,ee){return ro(`Plugin ${ee.id} tried to set a sandboxed property`,{pluginId:ee.id,attrOrMethod:String(F),entity:"window"}),vo?F:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function hh(F){const ee=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const Ce of ee){const xe=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,Ce);if(xe){let Be=function(Ke,Xe){const dt=Xe.id;return ro(`Plugin ${dt} tried to access iframe.${Ce}`,{pluginId:dt,attrOrMethod:Ce,entity:"iframe"}),vo?Ke:()=>{throw new Error("iframe."+Ce+" is not allowed in sandboxed plugins")}};var ue=Be;xe.value&&F.set(xe.value,Be),xe.set&&F.set(xe.set,Be),xe.get&&F.set(xe.get,Be)}}}function ph(F){const ee=Object.getOwnPropertyDescriptor(window,"console");if(ee?.value){let Ce=function(xe,Be){const Ke=Be.id;if(vo)return xe;function Xe(...dt){console.log(`[plugin ${Ke}]`,...dt)}return{log:Xe,warn:Xe,error:Xe,info:Xe,debug:Xe,table:Xe}};var ue=Ce;F.set(ee.value,Ce)}ee?.set&&F.set(ee.set,Ul)}function vh(F){function ee(Ce,xe){const Be=xe.id;return ro(`Plugin ${Be} accessed window.alert`,{pluginId:Be,attrOrMethod:"alert",entity:"window"}),vo?Ce:function(...Ke){console.log(`[plugin ${Be}]`,...Ke)}}const ue=Object.getOwnPropertyDescriptor(window,"alert");ue?.value&&F.set(ue.value,ee),ue?.set&&F.set(ue.set,Ul)}function Eh(F){function ee(Ce,xe){const Be=xe.id;return function(...Xe){for(const dt of Xe){const gt=dt?.toLowerCase()||"";for(const vt of Ko)if(gt.includes("<"+vt)){if(ro(`Plugin ${Be} tried to set ${vt} in innerHTML`,{pluginId:Be,attrOrMethod:"innerHTML",param:vt,entity:"HTMLElement"}),vo)continue;throw new Error("<"+vt+"> is not allowed in sandboxed plugins")}}(0,ae.isFunction)(Ce)&&Ce.apply(this,Xe)}}const ue=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const Ce of ue)Ce?.set&&F.set(Ce.set,ee),Ce?.value&&F.set(Ce.value,ee)}function yh(F){function ee(Ce,xe){const Be=xe.id;return function(Xe,dt){if(Xe&&Ko.includes(Xe)&&(ro(`Plugin ${Be} tried to create ${Xe}`,{pluginId:Be,attrOrMethod:"createElement",param:Xe,entity:"document"}),!vo))return document.createDocumentFragment();if((0,ae.isFunction)(Ce))return Ce.apply(this,[Xe,dt])}}const ue=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");ue?.value&&F.set(ue.value,ee)}function Dh(F){function ee(Be,Ke){const Xe=Ke.id;return function(gt,vt){const Et=gt?.nodeName?.toLowerCase()||"";if(gt&&Ko.includes(Et)&&(ro(`Plugin ${Xe} tried to insert ${Et}`,{pluginId:Xe,attrOrMethod:"insertChild",param:Et,entity:"HTMLElement"}),!vo))return document.createDocumentFragment();if((0,ae.isFunction)(Be))return Be.call(this,gt,vt)}}function ue(Be,Ke){const Xe=Ke.id;return function(gt,vt){const Et=vt?.nodeName?.toLowerCase()||"";if(vt&&Ko.includes(Et)&&(ro(`Plugin ${Xe} tried to insert ${Et}`,{pluginId:Xe,attrOrMethod:"insertAdjacentElement",param:Et,entity:"HTMLElement"}),!vo))return document.createDocumentFragment();if((0,ae.isFunction)(Be))return Be.call(this,gt,vt)}}const Ce=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Be of Ce)Be?.value&&F.set(Be.set,ee);const xe=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");xe?.value&&F.set(xe.set,ue)}function Ch(F){function ee(Be,Ke){const Xe=Ke.id;return function(...gt){let vt=gt;const Et=gt?.filter(Nt=>!Ko.includes(Nt.nodeName.toLowerCase()));vo||(vt=Et),vt.length!==Et.length&&ro(`Plugin ${Xe} tried to append fobiddenElements`,{pluginId:Xe,attrOrMethod:"append",param:gt?.filter(Nt=>Ko.includes(Nt.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,ae.isFunction)(Be)&&Be.apply(this,vt)}}function ue(Be,Ke,Xe){const dt=Ke.id;return function(vt){const Et=vt?.nodeName?.toLowerCase()||"";if(vt&&Ko.includes(Et)&&(ro(`Plugin ${dt} tried to append ${Et}`,{pluginId:dt,attrOrMethod:"appendChild",param:Et,entity:"HTMLElement"}),!vo))return document.createDocumentFragment();if(Xe&&vt&&Et==="script"&&vt instanceof HTMLScriptElement){ih(vt.src,Ke,Xe).then(()=>{vt.onload?.call(vt,new Event("load"))}).catch(Nt=>{vt.onerror?.call(vt,new ErrorEvent("error",{error:Nt}))});return}if((0,ae.isFunction)(Be))return Be.call(this,vt)}}const Ce=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Be of Ce)Be?.value&&F.set(Be.value,ee);const xe=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");xe?.value&&F.set(xe.value,ue)}function bh(F){const ee=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function ue(Ce){return function(...Be){try{const Ke=(0,ae.cloneDeep)(Be);(0,ae.isFunction)(Ce)&&Ce.apply(this,Ke)}catch{throw new Error("postMessage arguments are invalid objects")}}}ee?.value&&F.set(ee.value,ue)}function Ph(F){const ee=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");ee?.get&&F.set(ee.get,()=>()=>window);const ue=["write"];for(const Ce of ue){const xe=Object.getOwnPropertyDescriptor(Document.prototype,Ce);xe?.set&&F.set(xe.set,Ul),xe?.value&&F.set(xe.value,Ul)}}async function Lu(F){const ee=Reflect.get(window,"monaco");if(!ee||Object.hasOwn(ee,Au))return;const ue=ee.languages.setMonarchTokensProvider;function Ce(){return function(...xe){return xe.length!==2?ue.apply(ee,xe):ue.call(ee,xe[0],Xc(xe[1]))}}F.set(ee.languages.setMonarchTokensProvider,Ce),Reflect.set(ee,Au,{})}async function Sh(F){const ee=Object.getOwnPropertyDescriptor(window,"postMessage");function ue(Ce){return function(...Be){try{const Ke=(0,ae.cloneDeep)(Be);(0,ae.isFunction)(Ce)&&Ce.apply(this,Ke)}catch{throw new Error("postMessage arguments are invalid objects")}}}ee?.value&&F.set(ee.value,ue)}function Mh(F){Lu(wr)}const pi=Symbol.for("@@SANDBOX_LIVE_VALUE"),Bu=!!w.config.featureToggles.frontendSandboxMonitorOnly;function xh(F,ee){const ue=Reflect.get(F,"nodeName");if(ue==="body"||F===document.body)return document.body;if(ue==="head"||F===document.head||F===document.documentElement)return F;if(Ko.includes(ue)&&(ro("<"+ue+"> is not allowed in sandboxed plugins",{pluginId:ee,param:ue}),!Bu))throw new Error("<"+ue+"> is not allowed in sandboxed plugins");if(Ah(F,ee)||F.parentNode===document.body||F.closest("#reactRoot")===null||Bu)return F;{const Ce=document.createElement(ue);return Ce.dataset.grafanaPluginSandboxElement="true",Ce}}function Th(F){if(typeof F=="object"&&F instanceof Element)try{return F.nodeName!==void 0}catch{return!1}return!1}function Oh(F){const ee=Reflect.get(F,"style");Object.hasOwn(ee,pi)||Reflect.defineProperty(ee,pi,{})}function Ih(F){F&&(Object.hasOwn(F,pi)||((0,Iu.qD)(F)&&!(F instanceof Function)&&(uh(F)||F instanceof M.MF)?Reflect.defineProperty(F,pi,{}):F===Pu().languages&&Object.defineProperty(F,pi,{})))}function Rh(F){return Object.hasOwn(F,pi)}function Ah(F,ee){return!document.contains(F)||F.closest(`[data-plugin-sandbox=${ee}]`)!==null}let eo;function ev(){return eo||(eo=document.createElement("div"),eo.setAttribute("id","grafana-plugin-sandbox-body"),eo.setAttribute("data-plugin-sandbox","true"),eo.dataset.pluginSandbox="sandboxed-plugin",eo.style.width="100%",eo.style.height="0%",eo.style.overflow="hidden",eo.style.top="0",eo.style.left="0",document.body.appendChild(eo)),eo}let wu=!1;function Lh(){wu||(wu=!0,Bh())}function Bh(){const F=window.history.replaceState;Object.defineProperty(window.history,"replaceState",{value:function(...ee){let ue=ee;try{ue=(0,ae.cloneDeep)(ee)}catch(Ce){ro("Error cloning args in window.history.replaceState",{error:String(Ce)})}return Reflect.apply(F,this,ue)},writable:!0,configurable:!0,enumerable:!1})}var wh=e(13318);async function Uh(F,ee){if(!dh(F))return F;const ue=await Promise.resolve(F.plugin);if(Reflect.has(ue,"panel")&&Reflect.set(ue,"panel",ki(Reflect.get(ue,"panel"),ee)),Reflect.has(ue,"components")){const Ce=Reflect.get(ue,"components");Object.entries(Ce).forEach(([xe,Be])=>{Reflect.set(Ce,xe,ki(Be,ee))}),Reflect.set(ue,"components",Ce)}if(Reflect.has(ue,"root")&&Reflect.set(ue,"root",ki(Reflect.get(ue,"root"),ee)),Reflect.has(ue,"extensionConfigs")){const Ce=Reflect.get(ue,"extensionConfigs");for(const xe of Ce)Reflect.has(xe,"component")&&Reflect.set(xe,"component",ki(Reflect.get(xe,"component"),ee));Reflect.set(ue,"extensionConfigs",Ce)}if(Reflect.has(ue,"configPages")){const Ce=Reflect.get(ue,"configPages")??[];for(const[xe,Be]of Object.entries(Ce))!Be.body||!(0,ae.isFunction)(Be.body)||Reflect.set(Ce,xe,{...Be,body:ki(Be.body,ee)});Reflect.set(ue,"configPages",Ce)}return F}const ki=(F,ee)=>{const ue=S.memo(Ce=>S.createElement("div",{"data-plugin-sandbox":ee.id,style:{height:ee.type===wl.zV.app||ee.type===wl.zV.panel?"100%":"auto"}},S.createElement(F,{...Ce})));return ue.displayName=`GrafanaSandbox(${F.displayName||F.name||"Component"})`,ue},qc=new Map,Uu={};async function Nh({pluginId:F}){Lh();try{const ee=await(0,xu.a)(F);return qc.has(F)||qc.set(F,Wh(ee)),qc.get(F)}catch(ee){const ue=new Error(`Could not import plugin ${F} inside sandbox: `+ee);throw zi(ue,{pluginId:F,error:String(ee)}),ue}}async function Wh(F){return Ru("Loading with sandbox",{pluginId:F.id}),new Promise(async(ee,ue)=>{const Ce=gh();let xe;function Be(Xe){if(Th(Xe)){const vt=xh(Xe,F.id);return Oh(vt),vt}else Ih(Xe);const dt=Ce.get(Xe);if(dt)return dt(Xe,F,xe);const gt=Mh(Xe);return gt||Xe}xe=(0,sh.Z)(window,{distortionCallback:Be,defaultPolicy:rh.k,liveTargetCallback:Rh,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,setImmediate:function(Xe,...dt){return setTimeout(Xe,0,...dt)},get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(Uu[F.id+"-grafanaBootData"]||(Uu[F.id+"-grafanaBootData"]=!0,Ru("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:F.id,guessedPluginName:F.id,parent:"window",packageName:"window",key:"grafanaBootData"})),w.config.buildInfo.env==="development")throw new Error(`Error in ${F.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${F.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),w.config.bootData},async define(Xe,dt,gt){let vt,Et;Array.isArray(Xe)?(vt=Xe,Et=dt):(vt=dt,Et=gt);try{const Nt=Fh(vt,F.id),Dt=Et.apply(null,Nt),Lt=await Uh(Dt,F);ee(Lt)}catch(Nt){const Dt=new Error(`Could not execute plugin's define ${F.id}: `+Nt);zi(Dt,{pluginId:F.id,error:String(Nt)}),ue(Dt)}}})}),ch(xe);let Ke="";try{Ke=await lh(F)}catch(Xe){const dt=new Error(`Could not load plugin code ${F.id}: `+Xe);zi(dt,{pluginId:F.id,error:String(Xe)}),ue(dt)}try{xe.evaluate(Ke)}catch(Xe){const dt=new Error(`Could not run plugin ${F.id} inside sandbox: `+Xe);zi(dt,{pluginId:F.id,error:String(Xe)}),ue(dt)}})}function Fh(F,ee){const ue=[];for(const Ce of F){let xe=wh.g.get(Ce);if(xe?.__useDefault&&(xe=xe.default),!xe){const Be=new Error(`[sandbox] Could not resolve dependency ${Ce}`);throw zi(Be,{pluginId:ee,dependency:Ce,error:String(Be)}),Be}ue.push(xe)}return ue}const Kh=(0,$i.t)(Xg);L.i3.addImportMap({imports:Kh});const Jo=L.i3.constructor.prototype;Jo.shouldFetch=()=>!0;const Vh=Jo.fetch;Jo.fetch=function(F,ee){return qg(Vh,F,ee)};const _h=Jo.resolve;Jo.resolve=eh.bind(Jo,_h),Jo.onload=th;async function ed({path:F,version:ee,isAngular:ue,pluginId:Ce}){ee&&(0,Yc.Vf)({path:F,version:ee});const xe=Mg[F];return xe?typeof xe=="function"?await xe():xe:await mh({isAngular:ue,pluginId:Ce})?Nh({pluginId:Ce}):L.i3.import(F)}function $h(F){return ed({path:F.module,version:F.info?.version,isAngular:F.angular?.detected,pluginId:F.id}).then(ee=>{if(ee.plugin){const ue=ee.plugin;return ue.meta=F,ue}if(ee.Datasource){const ue=new M.hf(ee.Datasource);return ue.setComponentsFromLegacyExports(ee),ue.meta=F,ue}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function zh(F){return ed({path:F.module,version:F.info?.version,isAngular:F.angular?.detected,pluginId:F.id}).then(ee=>{const ue=ee.plugin?ee.plugin:new x.k8;return ue.init(F),ue.meta=F,ue.setComponentsFromLegacyExports(ee),ue})}},13318:(Q,A,e)=>{"use strict";e.d(A,{g:()=>n});const n=new Map([])},35997:(Q,A,e)=>{"use strict";e.d(A,{O:()=>o,d:()=>g});var n=e(59889),a=e(33521),i=e(97068),r=e(8913);async function o(u){const c=await(0,i.a)(u);let l;if(c.type===n.zV.app&&(l=await(0,r.Av)(c)),c.type===n.zV.datasource&&(l=await(0,r.nL)(c)),c.type===n.zV.panel&&(l=await(0,a._2)(c)),c.type===n.zV.renderer&&(l={meta:c}),!l)throw new Error("Unknown Plugin type: "+c.type);return l}function g(u,c,l){let f={...u},m;function v(p,h){return!h.startsWith(p.url??"")||m&&(m.url?.length??0)>(p.url?.length??0)?p:(m&&(m.active=!1),m={...p,active:!0},m)}function E(p,h=0){if(h>10)return p;if(p.children){const s=p.children.map(y=>E(y,h+1));return{...v(p,l),children:s}}return v(p,l)}return f.children=(f?.children??[]).map(E),{main:f,node:m??f}}},58838:(Q,A,e)=>{"use strict";e.d(A,{$S:()=>E,Ns:()=>p,PL:()=>s,Uk:()=>C,YT:()=>f,ZP:()=>I,aw:()=>y,p$:()=>D,qD:()=>h,rf:()=>d,z0:()=>P,zW:()=>m,zc:()=>v});var n=e(4579),a=e(69781),i=e.n(a),r=e(40137),o=e(74011),g=e(83811),u=e(75923);const c={orgId:g.default.bootData.user.orgId,timeZone:g.default.bootData.user.timezone,weekStart:g.default.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},l=(0,n.oM)({name:"user/profile",initialState:c,reducers:{updateTimeZone:(M,x)=>{M.timeZone=x.payload.timeZone},updateWeekStart:(M,x)=>{M.weekStart=x.payload.weekStart},updateFiscalYearStartMonth:(M,x)=>{M.fiscalYearStartMonth=x.payload.fiscalYearStartMonth},setUpdating:(M,x)=>{M.isUpdating=x.payload.updating},userLoaded:(M,x)=>{M.user=x.payload.user},initLoadTeams:(M,x)=>{M.teamsAreLoading=!0},teamsLoaded:(M,x)=>{M.teams=x.payload.teams,M.teamsAreLoading=!1},initLoadOrgs:(M,x)=>{M.orgsAreLoading=!0},orgsLoaded:(M,x)=>{M.orgs=x.payload.orgs,M.orgsAreLoading=!1},initLoadSessions:(M,x)=>{M.sessionsAreLoading=!0},sessionsLoaded:(M,x)=>{const L=x.payload.sessions.sort((S,U)=>Number(U.isActive)-Number(S.isActive));M.sessions=L.map(S=>({id:S.id,isActive:S.isActive,seenAt:(0,r.E8)(S.seenAt),createdAt:S.createdAt,clientIp:S.clientIp,browser:S.browser,browserVersion:S.browserVersion,os:S.os,osVersion:S.osVersion,device:S.device})),M.sessionsAreLoading=!1},userSessionRevoked:(M,x)=>{M.sessions=M.sessions.filter(L=>L.id!==x.payload.tokenId),M.isUpdating=!1}}}),d=M=>async x=>{(0,a.set)(u.Vt,"user.fiscalYearStartMonth",M),x(O({fiscalYearStartMonth:M}))},f=M=>async x=>{(!(0,a.isString)(M)||(0,a.isEmpty)(M))&&(M=g.default?.bootData?.user?.timezone),(0,a.set)(u.Vt,"user.timezone",M),x(b({timeZone:M}))},m=M=>async x=>{(!(0,a.isString)(M)||(0,a.isEmpty)(M))&&(M=g.default?.bootData?.user?.weekStart),(0,a.set)(u.Vt,"user.weekStart",M),x(T({weekStart:M})),(0,o.Ls)(M)},{setUpdating:v,initLoadOrgs:E,orgsLoaded:p,initLoadTeams:h,teamsLoaded:s,userLoaded:y,userSessionRevoked:D,initLoadSessions:C,sessionsLoaded:P,updateTimeZone:b,updateWeekStart:T,updateFiscalYearStartMonth:O}=l.actions,R=l.reducer,I={user:l.reducer}},1066:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>n,i:()=>a});const n=i=>i.timeZone,a=i=>i.fiscalYearStartMonth},42328:(Q,A,e)=>{"use strict";e.d(A,{S:()=>a,f:()=>i});class n{constructor(){this.extraRenderActions=[]}addExtraRenderAction(o){this.extraRenderActions=this.extraRenderActions.concat(o)}getAllExtraRenderAction(){return this.extraRenderActions}}const a=new n,i=new n},47999:(Q,A,e)=>{"use strict";e.d(A,{x:()=>K,t:()=>z});var n=e(52083),a=e.n(n),i=e(69781),r=e(86504),o=e.n(r),g=e(31733),u=e(44343),c=e(56315),l=e(83994),d=e(20298),f=e(98147),m=e(56821),v=e(21568),E=e(66261),p=e(80091),h=e(50248),s=e(8310),y=e(48529),D=e(48229),C=e(87243),P=e(53166),b=e(89660),T=e(30937),O=e(42328),R=e(76932),I=e(76067),M=e(49311),x=e(64516),L=e(65008),S=e(79228);const U=W=>{const{query:Z,queries:H,onChange:X,collapsedText:Y,renderExtras:ne,disabled:se}=W,re=(0,I.wW)(w),[ge,q]=(0,g.useState)(!1),[me,oe]=(0,g.useState)(null),fe=he=>{q(!0)},ve=he=>{if(q(!1),me){oe(null);return}Z.refId!==he&&X({...Z,refId:he})},pe=he=>{const Le=he.currentTarget.value.trim();if(Le.length===0){oe("An empty query name is not allowed");return}for(const ke of H)if(ke!==Z&&Le===ke.refId){oe("Query name already exists");return}me&&oe(null)},Me=he=>{ve(he.currentTarget.value.trim())},Pe=he=>{he.key==="Enter"&&ve(he.currentTarget.value)},Ee=he=>{he.target.select()};return g.createElement(g.Fragment,null,g.createElement("div",{className:re.wrapper},!ge&&g.createElement("button",{className:re.queryNameWrapper,"aria-label":v.wl.components.QueryEditorRow.title(Z.refId),title:"Edit query name",onClick:fe,"data-testid":"query-name-div",type:"button"},g.createElement("span",{className:re.queryName},Z.refId),g.createElement(M.J,{name:"pen",className:re.queryEditIcon,size:"sm"})),ge&&g.createElement(g.Fragment,null,g.createElement(x.I,{type:"text",defaultValue:Z.refId,onBlur:Me,autoFocus:!0,onKeyDown:Pe,onFocus:Ee,invalid:me!==null,onChange:pe,className:re.queryNameInput,"data-testid":"query-name-input"}),me&&g.createElement(L.S,{horizontal:!0},me)),N(W,re),ne&&g.createElement("div",{className:re.itemWrapper},ne()),se&&g.createElement("em",{className:re.contextInfo},"Disabled")),Y&&g.createElement("div",{className:re.collapsedText},Y))},N=(W,Z)=>{const{alerting:H,dataSource:X,onChangeDataSource:Y}=W;return Y?g.createElement("div",{className:Z.itemWrapper},g.createElement(S.q,{variables:!0,alerting:H,current:X.name,onChange:Y})):g.createElement("em",{className:Z.contextInfo},"(",X.name,")")},w=W=>({wrapper:(0,R.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${W.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:(0,R.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${W.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${W.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${W.colors.action.hover};
        border: 1px dashed ${W.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${W.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:(0,R.css)`
      font-weight: ${W.typography.fontWeightMedium};
      color: ${W.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${W.spacing(.5)};
    `,queryEditIcon:(0,R.cx)((0,R.css)`
        margin-left: ${W.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:(0,R.css)`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:(0,R.css)`
      font-weight: ${W.typography.fontWeightRegular};
      font-size: ${W.typography.bodySmall.fontSize};
      color: ${W.colors.text.secondary};
      padding-left: ${W.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:(0,R.css)`
      font-size: ${W.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${W.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:(0,R.css)`
      display: flex;
      margin-left: 4px;
    `});function G({error:W}){const Z=(0,I.wW)(_),H=W?.message??W?.data?.message??"Query error";return g.createElement("div",{className:Z.wrapper},g.createElement("div",{className:Z.icon},g.createElement(M.J,{name:"exclamation-triangle"})),g.createElement("div",{className:Z.message},H,W.traceId!=null&&g.createElement(g.Fragment,null,g.createElement("br",null)," ",g.createElement("span",null,"(Trace ID: ",W.traceId,")"))))}const _=W=>({wrapper:(0,R.css)({marginTop:W.spacing(.5),background:W.colors.background.secondary,display:"flex"}),icon:(0,R.css)({background:W.colors.error.main,color:W.colors.error.contrastText,padding:W.spacing(1)}),message:(0,R.css)({fontSize:W.typography.bodySmall.fontSize,fontFamily:W.typography.fontFamilyMonospace,padding:W.spacing(1)})});class K extends g.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,E.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Z=(0,p.w)(),H='<plugin-component type="query-ctrl" />',X={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Z.load(this.element,X,H),this.angularScope=X.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Z,onChange:H,queries:X,onRunQuery:Y,onAddQuery:ne,app:se=u.zj.PanelEditor,history:re}=this.props,{datasource:ge,data:q}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ge?.components?.QueryCtrl)return g.createElement("div",{ref:me=>this.element=me});if(ge){let me=this.getReactQueryEditor(ge);if(me)return g.createElement(c.n,{instanceSettings:this.props.dataSource},g.createElement(me,{key:ge?.name,query:Z,datasource:ge,onChange:H,onRunQuery:Y,onAddQuery:ne,data:q,range:(0,b.$t)().timeRange(),queries:X,app:se,history:re}))}return g.createElement("div",null,g.createElement(P.cC,{i18nKey:"query-operation.query-editor-not-exported"},"Data source plugin does not export any Query Editor component"))},this.onToggleEditMode=(Z,H)=>{Z.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),H.isOpen||H.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Z,query:H,onQueryRemoved:X}=this.props;Z(H),X&&X()},this.onCopyQuery=()=>{const{query:Z,onAddQuery:H,onQueryCopied:X}=this.props,Y=(0,i.cloneDeep)(Z);H(Y),X&&X()},this.onDisableQuery=()=>{const{query:Z,onChange:H,onRunQuery:X,onQueryToggled:Y}=this.props;H({...Z,hide:!Z.hide}),X(),Y&&Y(Z.hide)},this.onToggleHelp=()=>{this.setState(Z=>({showingHelp:!Z.showingHelp}))},this.onClickExample=Z=>{Z.datasource===void 0&&(Z.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Z,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Z,query:H}=this.props,Y=(z(Z,H.refId)?.series??[]).reduce((ge,q)=>{if(!q.meta?.notices)return ge;const me=(0,i.filter)(q.meta.notices,{severity:"warning"})??[];return ge.concat(me)},[]),ne=(0,i.uniqBy)(Y,"text");if(!(ne.length>0))return null;const re=ne.map(ge=>ge.text).join(`
`);return g.createElement(h.C,{color:"orange",icon:"exclamation-triangle",text:g.createElement(g.Fragment,null,ne.length," ",o()("warning",ne.length)),tooltip:re})},this.renderExtraActions=()=>{const{query:Z,queries:H,data:X,onAddQuery:Y,dataSource:ne}=this.props,se=O.f.getAllExtraRenderAction().map((re,ge)=>re({query:Z,queries:H,timeRange:X.timeRange,onAddQuery:Y,dataSource:ne,key:ge})).filter(Boolean);return se.push(this.renderWarnings()),se},this.renderActions=Z=>{const{query:H,hideDisableQuery:X=!1}=this.props,{hasTextEditMode:Y,datasource:ne,showingHelp:se}=this.state,re=!!H.hide,ge=ne?.components?.QueryEditorHelp;return g.createElement(g.Fragment,null,ge&&g.createElement(D.V,{title:(0,P.t)("query-operation.header.datasource-help","Show data source help"),icon:"question-circle",onClick:this.onToggleHelp,active:se}),Y&&g.createElement(D.y,{title:(0,P.t)("query-operation.header.toggle-edit-mode","Toggle text edit mode"),icon:"pen",onClick:q=>{this.onToggleEditMode(q,Z)}}),this.renderExtraActions(),g.createElement(D.y,{title:(0,P.t)("query-operation.header.duplicate-query","Duplicate query"),icon:"copy",onClick:this.onCopyQuery}),X?null:g.createElement(D.V,{title:(0,P.t)("query-operation.header.disable-query","Disable query"),icon:re?"eye-slash":"eye",active:re,onClick:this.onDisableQuery}),g.createElement(D.y,{title:(0,P.t)("query-operation.header.remove-query","Remove query"),icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Z=>{const{alerting:H,query:X,dataSource:Y,onChangeDataSource:ne,onChange:se,queries:re,renderHeaderExtras:ge}=this.props;return g.createElement(U,{query:X,queries:re,onChangeDataSource:ne,dataSource:Y,disabled:X.hide,onClick:q=>this.onToggleEditMode(q,Z),onChange:se,collapsedText:Z.isOpen?null:this.renderCollapsedText(),renderExtras:ge,alerting:H})}}componentDidMount(){const{data:Z,query:H,id:X}=this.props,Y=z(Z,H.refId);this.id=(0,i.uniqueId)(X+"_"),this.setState({data:Y}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Z,queries:H}=this.props,{datasource:X}=this.state,Y=new T.rY({targets:H}),ne={},se=this;return{datasource:X,target:Z,panel:Y,dashboard:ne,refresh:()=>{Z.hide!==se.props.query.hide&&(Z.hide=se.props.query.hide),this.props.onChange(Z),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new l.F,range:(0,b.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const Z=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return Z?.rawRef?.uid??Z?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let Z;const H=this.getInterpolatedDataSourceUID();try{Z=await this.dataSourceSrv.get(H)}catch{Z=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(Z),this.setState({datasource:Z,queriedDataSourceIdentifier:H,hasTextEditMode:(0,i.has)(Z,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Z){const{datasource:H,queriedDataSourceIdentifier:X}=this.state,{data:Y,query:ne}=this.props;if(Z.id!==this.props.id&&(this.id=(0,i.uniqueId)(this.props.id+"_")),Y!==Z.data){const se=z(Y,ne.refId);this.setState({data:se}),this.angularScope&&(this.angularScope.range=(0,b.$t)().timeRange()),this.angularQueryEditor&&se&&k(this.angularScope,se,this.angularQueryEditor)}if(H&&X!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Z){if(Z)switch(this.props.app){case u.zj.Explore:return Z.components?.ExploreMetricsQueryField||Z.components?.ExploreLogsQueryField||Z.components?.ExploreQueryField||Z.components?.QueryEditor;case u.zj.PanelEditor:case u.zj.Dashboard:default:return Z.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:Z}=this.state;return Z?.getQueryDisplayText?Z.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Z,index:H,visualization:X,collapsable:Y}=this.props,{datasource:ne,showingHelp:se,data:re}=this.state,ge=Z.hide,q=re?.error&&re.error.refId===Z.refId?re.error:re?.errors?.find(ve=>ve.refId===Z.refId),me=a()("query-editor-row",{"query-editor-row--disabled":ge,"gf-form-disabled":ge});if(!ne)return null;const oe=this.renderPluginEditor(),fe=ne.components?.QueryEditorHelp;return g.createElement("div",{"data-testid":"query-editor-row","aria-label":v.wl.components.QueryEditorRows.rows},g.createElement(C.t,{id:this.id,draggable:!0,collapsable:Y,index:H,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},g.createElement("div",{className:me,id:this.id},g.createElement(s.z4,null,se&&fe&&g.createElement(y.h,null,g.createElement(fe,{onClickExample:ve=>this.onClickExample(ve),query:this.props.query,datasource:ne})),oe),q&&g.createElement(G,{error:q}),X)))}}function k(W,Z,H){if(Z.state===d.Gu.Done){const X=Z.series.map(Y=>(0,f.Zr)(Y));W.events.emit(m.Kh.dataReceived,X)}else Z.state===d.Gu.Error&&W.events.emit(m.Kh.dataError,Z.error);setTimeout(H.digest)}function z(W,Z){const H=W.series.filter(se=>se.refId===Z);if(W.state!==d.Gu.Loading&&(W.error||W.errors?.length)&&!W.series.length)return{...W,state:d.Gu.Error};let X=W.state,Y=W.errors?.find(se=>se.refId===Z);!Y&&W.error&&(Y=W.error.refId===Z?W.error:void 0),X!==d.Gu.Loading&&(Y?X=d.Gu.Error:W.state===d.Gu.Error&&(X=d.Gu.Done));const ne=W.timeRange;return{...W,state:X,series:H,error:Y,errors:Y?[Y]:void 0,timeRange:ne}}},89636:(Q,A,e)=>{"use strict";e.d(A,{l:()=>g});var n=e(31733),a=e(4113),i=e(64704),r=e(66261),o=e(47999);class g extends n.PureComponent{constructor(){super(...arguments),this.onRemoveQuery=l=>{this.props.onQueriesChange(this.props.queries.filter(d=>d!==l))},this.onDragStart=l=>{const{queries:d,dsSettings:f}=this.props;(0,i.ff)("query_row_reorder_started",{startIndex:l.source.index,numberOfQueries:d.length,datasourceType:f.type})},this.onDragEnd=l=>{const{queries:d,onQueriesChange:f,dsSettings:m}=this.props;if(!l||!l.destination)return;const v=l.source.index,E=l.destination.index;if(v===E){(0,i.ff)("query_row_reorder_canceled",{startIndex:v,endIndex:E,numberOfQueries:d.length,datasourceType:m.type});return}const p=Array.from(d),[h]=p.splice(v,1);p.splice(E,0,h),f(p),(0,i.ff)("query_row_reorder_ended",{startIndex:v,endIndex:E,numberOfQueries:d.length,datasourceType:m.type})}}onChangeQuery(l,d){const{queries:f,onQueriesChange:m}=this.props;m(f.map((v,E)=>E===d?l:v))}onDataSourceChange(l,d){const{queries:f,onQueriesChange:m}=this.props;m(f.map((v,E)=>{if(E!==d)return v;const p={type:l.type,uid:l.uid};return v.datasource&&(0,r.F)().getInstanceSettings(v.datasource)?.type===l.type?{...v,datasource:p}:{refId:v.refId,hide:v.hide,datasource:p}}))}render(){const{dsSettings:l,data:d,queries:f,app:m,history:v,eventBus:E,onAddQuery:p,onRunQueries:h,onQueryCopied:s,onQueryRemoved:y,onQueryToggled:D}=this.props;return n.createElement(a.Z5,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},n.createElement(a.bK,{droppableId:"transformations-list",direction:"vertical"},C=>n.createElement("div",{"data-testid":"query-editor-rows",ref:C.innerRef,...C.droppableProps},f.map((P,b)=>{const T=u(P,l),O=l.meta.mixed?R=>this.onDataSourceChange(R,b):void 0;return n.createElement(o.x,{id:P.refId,index:b,key:P.refId,data:d,query:P,dataSource:T,onChangeDataSource:O,onChange:R=>this.onChangeQuery(R,b),onRemoveQuery:this.onRemoveQuery,onAddQuery:p,onRunQuery:h,onQueryCopied:s,onQueryRemoved:y,onQueryToggled:D,queries:f,app:m,history:v,eventBus:E})}),C.placeholder)))}}const u=(c,l)=>c.datasource&&(0,r.F)().getInstanceSettings(c.datasource)||l},64571:(Q,A,e)=>{"use strict";e.d(A,{D:()=>H,Y:()=>Y});var n=e(76932),a=e(31733),i=e(20298),r=e(5333),o=e(44343),g=e(59889),u=e(21568),c=e(66261),l=e(19690),d=e(79106),f=e(51343),m=e(37758),v=e(5572),E=e(33227),p=e(71918),h=e(59326),s=e(51133),y=e(69391),D=e(61375);function C({pluginId:se}){const{value:re,loading:ge,error:q}=(0,h.Z)(async()=>(0,y.i)().get(`/api/plugins/${se}/markdown/query_help`),[]),me=(0,s.a)(re);return ge?a.createElement(D.u,{text:"Loading help..."}):q?a.createElement("h3",null,"An error occurred when loading help."):re===""?a.createElement("h3",null,"No query help could be found."):a.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:me}})}var P=e(83811),b=e(41327),T=e(65354),O=e(81193),R=e(79228),I=e(11042),M=e(96841),x=e(7307),L=e(61260),S=e(92624),U=e(42328),N=e(89636),w=e(17201),G=e(64516),_=e(76772),K=e(87243);class k extends a.PureComponent{constructor(re){super(re),this.onRelativeTimeChange=q=>{this.setState({timeRangeFrom:q.target.value})},this.onTimeShiftChange=q=>{this.setState({timeRangeShift:q.target.value})},this.onOverrideTime=q=>{const{options:me,onChange:oe}=this.props,fe=W(q.target.value),ve=z(fe);ve&&me.timeRange?.from!==fe&&oe({...me,timeRange:{...me.timeRange??{},from:fe}}),this.setState({relativeTimeIsValid:ve})},this.onTimeShift=q=>{const{options:me,onChange:oe}=this.props,fe=W(q.target.value),ve=z(fe);ve&&me.timeRange?.shift!==fe&&oe({...me,timeRange:{...me.timeRange??{},shift:fe}}),this.setState({timeShiftIsValid:ve})},this.onToggleTimeOverride=()=>{const{onChange:q,options:me}=this.props;this.setState({timeRangeHide:!this.state.timeRangeHide},()=>{q({...me,timeRange:{...me.timeRange??{},hide:this.state.timeRangeHide}})})},this.onCacheTimeoutBlur=q=>{const{options:me,onChange:oe}=this.props;oe({...me,cacheTimeout:W(q.target.value)})},this.onQueryCachingTTLBlur=q=>{const{options:me,onChange:oe}=this.props;let fe=parseInt(q.target.value,10);(isNaN(fe)||fe===0)&&(fe=null),oe({...me,queryCachingTTL:fe})},this.onMaxDataPointsBlur=q=>{const{options:me,onChange:oe}=this.props;let fe=parseInt(q.currentTarget.value,10);(isNaN(fe)||fe===0)&&(fe=null),fe!==me.maxDataPoints&&oe({...me,maxDataPoints:fe})},this.onMinIntervalBlur=q=>{const{options:me,onChange:oe}=this.props,fe=W(q.target.value);fe!==me.minInterval&&oe({...me,minInterval:fe})},this.onOpenOptions=()=>{this.setState({isOpen:!0})},this.onCloseOptions=()=>{this.setState({isOpen:!1})};const{options:ge}=re;this.state={timeRangeFrom:ge.timeRange?.from||"",timeRangeShift:ge.timeRange?.shift||"",timeRangeHide:ge.timeRange?.hide??!1,isOpen:!1,relativeTimeIsValid:!0,timeShiftIsValid:!0}}renderCacheTimeoutOption(){const{dataSource:re,options:ge}=this.props,q=`If your time series store has a query cache this option can override the default cache timeout. Specify a
    numeric value in seconds.`;return re.meta.queryOptions?.cacheTimeout?a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(p.c,{width:9,tooltip:q},"Cache timeout"),a.createElement(G.I,{type:"text",className:"width-6",placeholder:"60",spellCheck:!1,onBlur:this.onCacheTimeoutBlur,defaultValue:ge.cacheTimeout??""}))):null}renderQueryCachingTTLOption(){const{dataSource:re,options:ge}=this.props,q="Cache time-to-live: How long results from this queries in this panel will be cached, in milliseconds. Defaults to the TTL in the caching configuration for this datasource.";return re.cachingConfig?.enabled?a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(p.c,{width:9,tooltip:q},"Cache TTL"),a.createElement(G.I,{type:"number",className:"width-6",placeholder:`${re.cachingConfig.TTLMs}`,spellCheck:!1,onBlur:this.onQueryCachingTTLBlur,defaultValue:ge.queryCachingTTL??void 0}))):null}renderMaxDataPointsOption(){const{data:re,options:ge}=this.props,q=re.request?.maxDataPoints,me=ge.maxDataPoints??"",oe=me==="";return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(p.c,{width:9,tooltip:a.createElement(a.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),a.createElement(G.I,{type:"number",className:"width-6",placeholder:`${q}`,spellCheck:!1,onBlur:this.onMaxDataPointsBlur,defaultValue:me}),oe&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-label query-segment-operator"},"="),a.createElement("div",{className:"gf-form-label"},"Width of panel"))))}renderIntervalOption(){const{data:re,dataSource:ge,options:q}=this.props,me=re.request?.interval,oe=ge.interval??"No limit";return a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(p.c,{width:9,tooltip:a.createElement(a.Fragment,null,"A lower limit for the interval. Recommended to be set to write frequency, for example ",a.createElement("code",null,"1m")," ","if your data is written every minute. Default value can be set in data source settings for most data sources.")},"Min interval"),a.createElement(G.I,{type:"text",className:"width-6",placeholder:`${oe}`,spellCheck:!1,onBlur:this.onMinIntervalBlur,defaultValue:q.minInterval??""}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(p.c,{width:9,tooltip:a.createElement(a.Fragment,null,"The evaluated interval that is sent to data source and is used in ",a.createElement("code",null,"$__interval")," and"," ",a.createElement("code",null,"$__interval_ms"),". This value is not exactly equal to"," ",a.createElement("code",null,"Time range / max data points"),", it will approximate a series of magic number.")},"Interval"),a.createElement(p.c,{width:6},me),a.createElement("div",{className:"gf-form-label query-segment-operator"},"="),a.createElement("div",{className:"gf-form-label"},"Time range / max data points"))))}renderCollapsedText(re){const{data:ge,options:q}=this.props,{isOpen:me}=this.state;if(me)return;let oe=q.maxDataPoints??"";oe===""&&ge.request&&(oe=`auto = ${ge.request.maxDataPoints}`);let fe=q.minInterval;return ge.request&&(fe=`${ge.request.interval}`),a.createElement(a.Fragment,null,a.createElement("div",{className:re.collapsedText},"MD = ",oe),a.createElement("div",{className:re.collapsedText},"Interval = ",fe))}render(){const{timeRangeHide:re,relativeTimeIsValid:ge,timeShiftIsValid:q}=this.state,{timeRangeFrom:me,timeRangeShift:oe,isOpen:fe}=this.state,ve=Z();return a.createElement(K.t,{id:"Query options",index:0,title:"Query options",headerElement:this.renderCollapsedText(ve),isOpen:fe,onOpen:this.onOpenOptions,onClose:this.onCloseOptions},this.renderMaxDataPointsOption(),this.renderIntervalOption(),this.renderCacheTimeoutOption(),this.renderQueryCachingTTLOption(),a.createElement("div",{className:"gf-form"},a.createElement(p.c,{width:9,tooltip:a.createElement(a.Fragment,null,"Overrides the relative time range for individual panels, which causes them to be different than what is selected in the dashboard time picker in the top-right corner of the dashboard. For example to configure the Last 5 minutes the Relative time should be ",a.createElement("code",null,"now-5m")," and ",a.createElement("code",null,"5m"),", or variables like ",a.createElement("code",null,"$_relativeTime"),".")},"Relative time"),a.createElement(G.I,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onRelativeTimeChange,onBlur:this.onOverrideTime,invalid:!ge,value:me})),a.createElement("div",{className:"gf-form"},a.createElement(p.c,{width:9,tooltip:a.createElement(a.Fragment,null,"Overrides the time range for individual panels by shifting its start and end relative to the time picker. For example to configure the Last 1h the Time shift should be ",a.createElement("code",null,"now-1h")," and"," ",a.createElement("code",null,"1h"),", or variables like ",a.createElement("code",null,"$_timeShift"),".")},"Time shift"),a.createElement(G.I,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onTimeShiftChange,onBlur:this.onTimeShift,invalid:!q,value:oe})),(oe||me)&&a.createElement("div",{className:"gf-form-inline align-items-center"},a.createElement(p.c,{width:9},"Hide time info"),a.createElement(_.r,{value:re,onChange:this.onToggleTimeOverride})))}}const z=se=>se?w.isValidTimeSpan(se):!0,W=se=>se===""?null:se,Z=(0,E.B)(()=>{const{theme:se}=P.config;return{collapsedText:(0,n.css)`
      margin-left: ${se.spacing.md};
      font-size: ${se.typography.size.sm};
      color: ${se.colors.textWeak};
    `}});class H extends a.PureComponent{constructor(){super(...arguments),this.backendSrv=b.ae,this.dataSourceSrv=(0,c.F)(),this.querySubscription=null,this.state={isDataSourceModalOpen:!!l.E1.getSearchObject().firstPanel,isLoadingHelp:!1,helpContent:null,isPickerOpen:!1,isHelpOpen:!1,queries:[],data:{state:i.Gu.NotStarted,series:[],timeRange:(0,r.JK)()}},this.onChangeDataSource=async(re,ge)=>{const{dsSettings:q}=this.state,me=q?await(0,c.F)().get(q.uid):void 0,oe=await(0,c.F)().get(re.uid),fe=ge||await(0,S.I)(oe,re.uid,this.state.queries,me),ve=await this.dataSourceSrv.get(re.name);this.onChange({queries:fe,dataSource:{name:re.name,uid:re.uid,type:re.meta.id,default:re.isDefault}}),this.setState({queries:fe,dataSource:ve,dsSettings:re}),ge&&this.props.onRunQueries()},this.onAddQueryClick=()=>{const{queries:re}=this.state;this.onQueriesChange((0,T.DI)(re,this.newQuery())),this.onScrollBottom()},this.onAddExpressionClick=()=>{this.onQueriesChange((0,T.DI)(this.state.queries,I.mV.newQuery())),this.onScrollBottom()},this.onScrollBottom=()=>{setTimeout(()=>{this.state.scrollElement&&this.state.scrollElement.scrollTo({top:1e4})},20)},this.onUpdateAndRun=re=>{this.props.onOptionsChange(re),this.props.onRunQueries()},this.onOpenHelp=()=>{this.setState({isHelpOpen:!0})},this.onCloseHelp=()=>{this.setState({isHelpOpen:!1})},this.onCloseDataSourceModal=()=>{this.setState({isDataSourceModalOpen:!1})},this.onAddQuery=re=>{const{dsSettings:ge,queries:q}=this.state;this.onQueriesChange((0,T.DI)(q,re,{type:ge?.type,uid:ge?.uid})),this.onScrollBottom()},this.onQueriesChange=re=>{this.onChange({queries:re}),this.setState({queries:re})},this.setScrollRef=re=>{this.setState({scrollElement:re})}}async componentDidMount(){const{options:re,queryRunner:ge}=this.props;this.querySubscription=ge.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:q=>this.onPanelDataUpdate(q)}),this.setNewQueriesAndDatasource(re)}componentWillUnmount(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}async componentDidUpdate(){const{options:re}=this.props,ge=await(0,c.F)().get(re.dataSource);this.state.dataSource&&ge.uid!==this.state.dataSource?.uid&&this.setNewQueriesAndDatasource(re)}async setNewQueriesAndDatasource(re){try{const ge=await this.dataSourceSrv.get(re.dataSource),q=this.dataSourceSrv.getInstanceSettings(re.dataSource),me=await this.dataSourceSrv.get(),oe=ge.getRef(),fe=re.queries.map(ve=>({...(0,T.vH)(ve)&&ge?.getDefaultQuery?.(o.zj.PanelEditor),datasource:oe,...ve}));this.setState({queries:fe,dataSource:ge,dsSettings:q,defaultDataSource:me})}catch(ge){console.log("failed to load data source",ge)}}onPanelDataUpdate(re){this.setState({data:re})}newQuery(){const{dsSettings:re,defaultDataSource:ge}=this.state,q=re?.meta.mixed?ge:re;return{...this.state.dataSource?.getDefaultQuery?.(o.zj.PanelEditor),datasource:{uid:q?.uid,type:q?.type}}}onChange(re){this.props.onOptionsChange({...this.props.options,...re})}renderTopSection(re){const{onOpenQueryInspector:ge,options:q}=this.props,{dataSource:me,data:oe,dsSettings:fe}=this.state;return!fe||!me?null:a.createElement(Y,{data:oe,dataSource:me,options:q,dsSettings:fe,onOptionsChange:this.onUpdateAndRun,onDataSourceChange:this.onChangeDataSource,onOpenQueryInspector:ge})}renderQueries(re){const{onRunQueries:ge}=this.props,{data:q,queries:me}=this.state;return(0,x.yl)(re.name)?a.createElement(x.hD,{queries:me,panelData:q,onChange:this.onQueriesChange,onRunQueries:ge}):a.createElement("div",{"aria-label":u.wl.components.QueryTab.content},a.createElement(N.l,{queries:me,dsSettings:re,onQueriesChange:this.onQueriesChange,onAddQuery:this.onAddQuery,onRunQueries:ge,data:q}))}isExpressionsSupported(re){return(re.meta.alerting||re.meta.mixed)===!0}renderExtraActions(){return U.S.getAllExtraRenderAction().map((re,ge)=>re({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:ge})).filter(Boolean)}renderAddQueryRow(re,ge){const q=!(0,x.yl)(re.name);return a.createElement(d.Lh,{spacing:"md",align:"flex-start"},q&&a.createElement(f.zx,{icon:"plus",onClick:this.onAddQueryClick,variant:"secondary","data-testid":u.wl.components.QueryTab.addQuery},"Add query"),P.default.expressionsEnabled&&this.isExpressionsSupported(re)&&a.createElement(f.zx,{icon:"plus",onClick:this.onAddExpressionClick,variant:"secondary",className:ge.expressionButton,"data-testid":"query-tab-add-expression"},a.createElement("span",null,"Expression\xA0")),this.renderExtraActions())}render(){const{isHelpOpen:re,dsSettings:ge}=this.state,q=X();return a.createElement(m.$,{autoHeightMin:"100%",scrollRefCallback:this.setScrollRef},a.createElement("div",{className:q.innerWrapper},this.renderTopSection(q),ge&&a.createElement(a.Fragment,null,a.createElement("div",{className:q.queriesWrapper},this.renderQueries(ge)),this.renderAddQueryRow(ge,q),re&&a.createElement(v.u,{title:"Data source help",isOpen:!0,onDismiss:this.onCloseHelp},a.createElement(C,{pluginId:ge.meta.id})))))}}const X=(0,E.B)(()=>{const{theme:se}=P.default;return{innerWrapper:(0,n.css)`
      display: flex;
      flex-direction: column;
      padding: ${se.spacing.md};
    `,dataSourceRow:(0,n.css)`
      display: flex;
      margin-bottom: ${se.spacing.md};
    `,dataSourceRowItem:(0,n.css)`
      margin-right: ${se.spacing.inlineFormMargin};
    `,dataSourceRowItemOptions:(0,n.css)`
      flex-grow: 1;
      margin-right: ${se.spacing.inlineFormMargin};
    `,queriesWrapper:(0,n.css)`
      padding-bottom: 16px;
    `,expressionWrapper:(0,n.css)``,expressionButton:(0,n.css)`
      margin-right: ${se.spacing.sm};
    `}});function Y({dataSource:se,options:re,data:ge,dsSettings:q,onDataSourceChange:me,onOptionsChange:oe,onOpenQueryInspector:fe}){const ve=X(),[pe,Me]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{className:ve.dataSourceRow},a.createElement(p.c,{htmlFor:"data-source-picker",width:"auto"},"Data source"),a.createElement("div",{className:ve.dataSourceRowItem},a.createElement(ne,{options:re,onChange:async(Pe,Ee)=>await me?.(Pe,Ee),isDataSourceModalOpen:!!l.E1.getSearchObject().firstPanel})),se&&a.createElement(a.Fragment,null,a.createElement("div",{className:ve.dataSourceRowItem},a.createElement(f.zx,{variant:"secondary",icon:"question-circle",title:"Open data source help",onClick:()=>Me(!0),"data-testid":"query-tab-help-button"})),a.createElement("div",{className:ve.dataSourceRowItemOptions},a.createElement(k,{options:re,dataSource:se,data:ge,onChange:Pe=>{oe?.(Pe)}})),fe&&a.createElement("div",{className:ve.dataSourceRowItem},a.createElement(f.zx,{variant:"secondary",onClick:fe,"aria-label":u.wl.components.QueryTab.queryInspectorButton},"Query inspector")))),se&&(0,L.G)(se.uid)&&a.createElement(M.Y,{pluginId:se.type,pluginType:g.zV.datasource,angularSupportEnabled:P.default?.angularSupportEnabled,showPluginDetailsLink:!0,interactionElementId:"datasource-query"})),pe&&a.createElement(v.u,{title:"Data source help",isOpen:!0,onDismiss:()=>Me(!1)},a.createElement(C,{pluginId:q.meta.id})))}function ne({options:se,onChange:re,...ge}){const[q,me]=(0,a.useState)(!!ge.isDataSourceModalOpen);(0,a.useEffect)(()=>{l.E1.getSearchObject().firstPanel&&l.E1.partial({firstPanel:null},!0)},[]);const oe={metrics:!0,mixed:!0,dashboard:!0,variables:!0,current:se.dataSource,uploadFile:!0,onChange:async(fe,ve)=>{await re(fe,ve),me(!1)}};return a.createElement(a.Fragment,null,q&&P.default.featureToggles.advancedDataSourcePicker&&a.createElement(O.a,{...oe,onDismiss:()=>me(!1)}),a.createElement(R.q,{...oe}))}},34576:(Q,A,e)=>{"use strict";e.d(A,{Tl:()=>oe,kt:()=>ge});var n=e(37153),a=e(94557),i=e(40510),r=e(26722),o=e(96506),g=e(4558),u=e(50014),c=e(29739),l=e(60400),d=e(30914),f=e(57423),m=e(79163),v=e(1727),E=e(83811),p=e(69781);function h(fe){let ve=[];const pe=(0,p.partition)(fe,"id"),Me=(0,p.groupBy)(pe[0],"id");return ve=(0,p.map)(Me,Pe=>Pe.length>1&&!(0,p.every)(Pe,s)?(0,p.find)(Pe,Ee=>Ee.eventType!=="panel-alert"):(0,p.head)(Pe)),ve=(0,p.concat)(ve,pe[1]),ve}function s(fe){return fe.eventType==="panel-alert"}var y=e(89660),D=e(57298),C=e(56183),P=e(69391),b=e(86961);class T{canWork({dashboard:ve,range:pe}){return!(!ve.id||pe.raw.to!=="now"||!ve.panels.find(Me=>!!Me.alert))}work(ve){if(!this.canWork(ve))return(0,b.H_)();const{dashboard:pe}=ve;return(0,D.D)((0,P.i)().get("/api/alerts/states-for-dashboard",{dashboardId:pe.id},`dashboard-query-runner-alert-states-${pe.id}`)).pipe((0,g.U)(Me=>({alertStates:Me,annotations:[]})),(0,C.K)(b.Rc))}}var O=e(86457),R=e(89582),I=e(74534),M=e(85498),x=e(66261),L=e(76875),S=e(74642),U=e(69434);class N{canRun(ve){return ve?!!(!ve.annotationQuery||ve.annotations):!1}run({annotation:ve,datasource:pe,dashboard:Me,range:Pe}){if(!this.canRun(pe))return(0,O.of)([]);const Ee={};return(0,U.r)({dashboard:Me,range:Pe,panel:Ee},pe,ve).pipe((0,g.U)(he=>he.events??[]),(0,C.K)(b.h1))}}var w=e(14354);class G{canRun(ve){return ve?(0,w.yr)(ve)?!0:!!(ve.annotationQuery&&!ve.annotations):!1}run({annotation:ve,datasource:pe,dashboard:Me,range:Pe}){return this.canRun(pe)?(0,D.D)(pe.annotationQuery({range:Pe,rangeRaw:Pe.raw,annotation:ve,dashboard:Me})).pipe((0,C.K)(b.h1)):(0,O.of)([])}}class _{constructor(ve=[new G,new N]){this.runners=ve}canWork({dashboard:ve}){return!!ve.annotations.list.find(_.getAnnotationsToProcessFilter)}work(ve){if(!this.canWork(ve))return(0,b.H_)();const{dashboard:pe,range:Me}=ve;let Pe=pe.annotations.list.filter(_.getAnnotationsToProcessFilter);M.config.publicDashboardAccessToken&&Pe.length>0&&(Pe=[Pe[0]]);const Ee=Pe.map(he=>{let Le;if(M.config.publicDashboardAccessToken){const ke=new L.k;Le=(0,O.of)(ke).pipe((0,C.K)(b.hs))}else Le=(0,D.D)((0,x.F)().get(he.datasource)).pipe((0,C.K)(b.hs));return Le.pipe((0,R.z)(ke=>{const ot=this.runners.find(it=>it.canRun(ke));return ot?(pe.events.publish(new S.z(he)),ot.run({annotation:he,datasource:ke,dashboard:pe,range:Me}).pipe((0,u.R)(ge().cancellations().pipe((0,I.h)(it=>it===he))),(0,g.U)(it=>(pe.snapshot&&(he.snapshotData=(0,p.cloneDeep)(it)),M.config.publicDashboardAccessToken?it:(0,b.pG)(he,it))),(0,d.x)(()=>{pe.events.publish(new S.RB(he))}))):(0,O.of)([])}))});return(0,r.T)(Ee).pipe((0,c.J)(),(0,l.u)((he,Le)=>he.concat(Le)),(0,g.U)(he=>({annotations:he,alertStates:[]})))}static getAnnotationsToProcessFilter(ve){return ve.enable&&!ve.snapshotData}}var K=e(75502),k=e(63949),z=e(56811),W=e(98319),Z=e(96198),H=e(1797),X=e(42342);class Y{constructor(){this.hasAlertRules={}}canWork({dashboard:ve,range:pe}){return!(!ve.uid||M.config.publicDashboardAccessToken||pe.raw.to!=="now"||this.hasAlertRules[ve.uid]===!1||!(z.contextSrv.hasPermission(X.AccessControlAction.AlertingRuleRead)&&z.contextSrv.hasPermission(X.AccessControlAction.AlertingRuleExternalRead)))}work(ve){if(!this.canWork(ve))return(0,b.H_)();const{dashboard:pe}=ve;return(0,D.D)((0,P.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:pe.uid},`dashboard-query-runner-unified-alert-states-${pe.id}`)).pipe((0,g.U)(Me=>{if(Me.status==="success"){this.hasAlertRules[pe.uid]=!1;const Pe={};return Me.data.groups.forEach(Ee=>Ee.rules.forEach(he=>{if((0,Z.x_)(he)&&he.annotations&&he.annotations[W.q6.panelID]){this.hasAlertRules[pe.uid]=!0;const Le=Number(he.annotations[W.q6.panelID]),ke=(0,H.n)(he.state);Pe[Le]?ke===k.Z.Alerting&&Pe[Le].state!==k.Z.Alerting?Pe[Le].state=k.Z.Alerting:ke===k.Z.Pending&&Pe[Le].state!==k.Z.Alerting&&Pe[Le].state!==k.Z.Pending&&(Pe[Le].state=k.Z.Pending):Pe[Le]={state:ke,id:Object.keys(Pe).length,panelId:Le,dashboardId:pe.id}}})),{alertStates:Object.values(Pe),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,C.K)(b.Rc))}}class ne{constructor(ve,pe=(0,y.$t)(),Me=[E.config.unifiedAlertingEnabled?new Y:new T,new K.g,new _]){this.dashboard=ve,this.timeSrv=pe,this.workers=Me,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new n.t(1),this.runs=new a.x,this.cancellationStream=new a.x,this.runsSubscription=this.runs.subscribe(Pe=>this.executeRun(Pe)),this.eventsSubscription=ve.events.subscribe(v.U5,Pe=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(ve){this.runs.next(ve)}getResult(ve){return this.results.asObservable().pipe((0,g.U)(pe=>{const Me=(0,b.tD)(pe.annotations,ve),Pe=pe.alertStates.find(Ee=>!!ve&&Ee.panelId===ve);return{annotations:h(Me),alertState:Pe}}))}executeRun(ve){const Me=this.workers.filter(ke=>ke.canWork(ve)).map(ke=>ke.work(ve)),Pe=new i.w0,Ee=(0,r.T)(Me).pipe((0,u.R)(this.runs.asObservable()),(0,c.J)(),(0,l.u)((ke,ot)=>(ke.annotations=ke.annotations.concat(ot.annotations),ke.alertStates=ke.alertStates.concat(ot.alertStates),ke)),(0,d.x)(()=>{Pe.unsubscribe()}),(0,f.B)()),he=new i.w0,Le=(0,o.H)(200).pipe((0,m.h)({annotations:[],alertStates:[]}),(0,u.R)(Ee),(0,d.x)(()=>{he.unsubscribe()}));he.add(Le.subscribe(ke=>{this.results.next(ke)})),Pe.add(Ee.subscribe(ke=>{this.results.next(ke)}))}cancel(ve){this.cancellationStream.next(ve)}cancellations(){return this.cancellationStream.asObservable().pipe((0,f.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let se;function re(fe){se&&se.destroy(),se=fe}function ge(){if(!se)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return se}let q;function me(fe){q=fe}function oe(fe){q||(q=({dashboard:pe,timeSrv:Me,workers:Pe})=>new ne(pe,Me,Pe));const ve=q(fe);return re(ve),ve}},76875:(Q,A,e)=>{"use strict";e.d(A,{k:()=>d});var n=e(86457),a=e(57298),i=e(51023),r=e(98147),o=e(69391),g=e(85498),u=e(67451),c=e(71667);const l="-- Public --";class d extends i.MF{constructor(){let m={};super({name:"public-ds",id:0,type:"public-ds",meta:m,uid:l,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(v){return{...v,queryType:c.hR.Annotations,refId:"anno"}}}}query(m){return m.targets.length?m.targets[0]?.datasource?.uid===u.JY?(0,a.D)(this.getAnnotations(m)):(0,n.of)({data:[]}):(0,n.of)({data:[]})}async getAnnotations(m){const{range:{to:v,from:E}}=m,p={from:E.valueOf(),to:v.valueOf()},h=await(0,o.i)().get(`/api/public/dashboards/${g.config.publicDashboardAccessToken}/annotations`,p);return{data:[(0,r.g0)(h)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},75502:(Q,A,e)=>{"use strict";e.d(A,{g:()=>i});var n=e(86457),a=e(86961);class i{canWork({dashboard:o}){return o?.annotations?.list?.some(g=>g.enable&&!!g.snapshotData)}work(o){if(!this.canWork(o))return(0,a.H_)();const g=this.getAnnotationsFromSnapshot(o.dashboard);return(0,n.of)({annotations:g,alertStates:[]})}getAnnotationsFromSnapshot(o){return(o?.annotations?.list?.filter(l=>l.enable)).filter(l=>!!l.snapshotData).reduce((l,d)=>l.concat((0,a.pG)(d,d.snapshotData)),[])}getAnnotationsInSnapshot(o,g){const u=this.getAnnotationsFromSnapshot(o);return(0,a.tD)(u,g)}}},86961:(Q,A,e)=>{"use strict";e.d(A,{H_:()=>m,Rc:()=>v,em:()=>s,h1:()=>d,hs:()=>f,pG:()=>h,tD:()=>p});var n=e(69781),a=e.n(n),i=e(86457),r=e(46901),o=e(54291),g=e(85498),u=e(86573),c=e(42876),l=e(43025);function d(y){return y.cancelled?(0,i.of)([]):(E("AnnotationQueryRunner failed",y),(0,i.of)([]))}function f(y){return E("Failed to retrieve datasource",y),(0,i.of)(void 0)}const m=()=>(0,i.of)({annotations:[],alertStates:[]});function v(y){return y.cancelled||E("DashboardQueryRunner failed",y),m()}function E(y,D){const C=(0,o.P)(D);console.error("handleAnnotationQueryRunnerError",C);const P=(0,c.t_)(y,C.message);(0,u.WI)((0,l.$l)(P))}function p(y,D){return D==null?y:y.filter(C=>{let P;if(P=C.source,!P)return!0;if(P.filter){const b=(P.filter.ids??[]).includes(D);if(P.filter.exclude){if(b)return!1}else if(!b)return!1}return C.panelId&&C.source.type==="dashboard"?C.panelId===D:!0})}function h(y,D){y.snapshotData&&(y=(0,n.cloneDeep)(y),delete y.snapshotData);for(const C of D)switch(C.source=y,C.color=g.config.theme2.visualization.getColorByName(y.iconColor),C.type=y.name,C.isRegion=!!(C.timeEnd&&C.time!==C.timeEnd),C.newState?.toLowerCase()){case"pending":C.color="yellow";break;case"alerting":C.color="red";break;case"ok":C.color="green";break;case"normal":C.color="green";break;case"no_data":C.color="gray";break;case"nodata":C.color="gray";break}return D}function s(y){if(!y||!y.length)return[];const D=[];for(const C of y){const P=new r.U(C);for(let b=0;b<C.length;b++){const T=(0,n.cloneDeep)(P.get(b));D.push(T)}}return D}},64879:(Q,A,e)=>{"use strict";e.d(A,{o:()=>S,t:()=>L});var n=e(69781),a=e(37153),i=e(86457),r=e(89582),o=e(4558),g=e(56183),u=e(20298),c=e(98147),l=e(5333),d=e(19596),f=e(82401),m=e(71199),v=e(96503),E=e(44343),p=e(17201),h=e(54291),s=e(65821),y=e(5573),D=e(97001),C=e(4419),P=e(7307),b=e(34576),T=e(11729),O=e(47206);function R(N=[]){N.forEach(w=>{w.meta={...w.meta,dataTopic:m.w5.Annotations}})}function I(N,w){return(0,T.a)([N,w]).pipe((0,r.z)(G=>{const[_,K]=G;if(K.annotations?.length||K.alertState){_.annotations||(_.annotations=[]);const k=_.annotations.concat((0,O.P)(K.annotations));R(k);const z=K.alertState;return(0,i.of)({..._,annotations:k,alertState:z})}return R(_.annotations),(0,i.of)(_)}))}var M=e(60630);let x=100;function L(){return"Q"+x++}class S{constructor(w){this.templateSrv=(0,C.J)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new a.t(1),this.dataConfigSource=w}getData(w){const{withFieldConfig:G,withTransforms:_}=w;let K=1,k,z=[],W=[],Z,H=!0,X=-1;if(this.dataConfigSource.snapshotData){const Y={state:u.Gu.Done,series:this.dataConfigSource.snapshotData.map(ne=>(0,c.g0)(ne)),timeRange:(0,l.JK)(),structureRev:K};return(0,i.of)(Y)}return this.subject.pipe((0,r.z)(Y=>{let ne=this.dataConfigSource.getFieldOverrideOptions(),se=this.dataConfigSource.getTransformations();if(Y.series===W&&k?.fieldConfig===ne?.fieldConfig&&Z===se)return(0,i.of)({...Y,structureRev:K,series:z});k=ne,Z=se,W=Y.series;let re=(0,i.of)(Y);return _&&(re=this.applyTransformations(Y)),re.pipe((0,o.U)(ge=>{let q=ge,me=!1;if(G&&ge.series?.length){if(X===this.dataConfigSource.configRev){const oe=ge.series.find(fe=>(0,y.iL)(fe));oe&&!oe.packetInfo.schemaChanged&&z[0].fields.length===oe.fields.length&&(q={...q,series:z.map((fe,ve)=>({...fe,length:ge.series[ve].length,fields:fe.fields.map((pe,Me)=>({...pe,values:ge.series[ve].fields[Me].values,state:{...pe.state,calcs:void 0,range:void 0}}))}))},me=!0)}ne!=null&&(H||!me)&&(X=this.dataConfigSource.configRev,q={...q,series:(0,d.SM)({timeZone:ge.request?.timezone??"browser",data:q.series,...ne})},q.annotations&&(q.annotations=(0,d.SM)({data:q.annotations,...ne,fieldConfig:{defaults:{},overrides:[]}})),H=!1)}return!me&&!(0,f.nl)(z,q.series,f.Ch)&&K++,z=q.series,{...q,structureRev:K}}))}))}applyTransformations(w){const G=this.dataConfigSource.getTransformations();if(!G||G.length===0)return(0,i.of)(w);const _={interpolate:Z=>this.templateSrv.replace(Z,w?.request?.scopedVars)};let K=G.filter(Z=>Z.topic==null||Z.topic===m.w5.Series),k=G.filter(Z=>Z.topic===m.w5.Annotations),z=(0,v.H)(K,w.series,_),W=(0,v.H)(k,w.annotations??[],_);return(0,n.merge)(z,W).pipe((0,o.U)(Z=>{let X=Z.some(Y=>Y.meta?.dataTopic===m.w5.Annotations)?{annotations:Z}:{series:Z};return{...w,...X}}),(0,g.K)(Z=>(console.warn("Error running transformation:",Z),(0,i.of)({...w,state:u.Gu.Error,errors:[(0,h.P)(Z)]}))))}async run(w){const{queries:G,timezone:_,datasource:K,panelId:k,dashboardUID:z,timeRange:W,timeInfo:Z,cacheTimeout:H,queryCachingTTL:X,maxDataPoints:Y,scopedVars:ne,minInterval:se,app:re}=w;if((0,P.yl)(K)){this.pipeToSubject((0,P.AK)(w,G[0]),k,!0);return}const ge={app:re??E.zj.Dashboard,requestId:L(),timezone:_,panelId:k,dashboardUID:z,range:W,timeInfo:Z,interval:"",intervalMs:0,targets:(0,n.cloneDeep)(G),maxDataPoints:Y,scopedVars:ne||{},cacheTimeout:H,queryCachingTTL:X,startTime:Date.now(),rangeRaw:W.raw};try{const q=await U(K,ge.scopedVars),me=q.meta?.mixed;ge.targets=ge.targets.map(ve=>{const pe=ve.datasource?.type===s.hr.type;return(!ve.datasource||ve.datasource.uid!==q.uid&&!me&&!pe)&&(ve.datasource=q.getRef()),ve});const oe=se?this.templateSrv.replace(se,ge.scopedVars):q.interval,fe=p.calculateInterval(W,Y,oe);ge.scopedVars=Object.assign({},ge.scopedVars,{__interval:{text:fe.interval,value:fe.interval},__interval_ms:{text:fe.intervalMs.toString(),value:fe.intervalMs}}),ge.interval=fe.interval,ge.intervalMs=fe.intervalMs,ge.filters=this.templateSrv.getAdhocFilters(q.name,!0),this.lastRequest=ge,this.pipeToSubject((0,M.v7)(q,ge),k)}catch(q){this.pipeToSubject((0,i.of)({state:u.Gu.Error,error:(0,h.P)(q),series:[],timeRange:ge.range}),k)}}pipeToSubject(w,G,_=!1){this.subscription&&this.subscription.unsubscribe();let K=w;const k=this.dataConfigSource.getDataSupport();if(k.alertStates||k.annotations){const z=this.dataConfigSource;K=I(w,(0,b.kt)().getResult(z.id))}this.subscription=K.subscribe({next:z=>{const W=this.lastResult,Z=_?z:(0,c.zR)(z,W);if(W!=null&&Z.state!==u.Gu.Streaming){let H=(0,f.nl)(W.series??[],Z.series??[],(ne,se)=>ne===se),X=(0,f.nl)(W.annotations??[],Z.annotations??[],(ne,se)=>ne===se),Y=W.state===Z.state;if(H&&(Z.series=W.series),X&&(Z.annotations=W.annotations),H&&X&&Y)return}this.lastResult=Z,this.subject.next(Z)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===u.Gu.Loading||this.lastResult.state===u.Gu.Streaming)&&this.subject.next({...this.lastResult,state:u.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new a.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(w){this.lastResult=w.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(w){this.lastResult=w}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function U(N,w){return N&&typeof N=="object"&&"query"in N?N:await(0,D.ak)().get(N,w)}},96299:(Q,A,e)=>{"use strict";e.d(A,{V:()=>a});var n=e(30914);function a(i,r){return(0,n.x)(()=>{r&&i.resolveCancelerIfExists(r)})}},83019:(Q,A,e)=>{"use strict";e.d(A,{C:()=>a});var n=e(82401);const a=(i,r)=>{let o=1;return r?.structureRev&&r.series&&(o=r.structureRev,(0,n.nl)(i.series,r.series,n.Ch)||o++),i.structureRev=o,i}},60630:(Q,A,e)=>{"use strict";e.d(A,{v7:()=>N});var n=e(69781),a=e(86457),i=e(26722),r=e(96506),o=e(57298),g=e(4558),u=e(56183),c=e(89852),l=e(57423),d=e(79163),f=e(50014),m=e(20298),v=e(71199),E=e(89026),p=e(44343),h=e(70621),s=e(54291),y=e(85498),D=e(65821),C=e(41327),P=e(65354),b=e(11042),T=e(96299),O=e(91977),R=e(21057),I=e(64704),M=e(60490);function x(G){let _=!1;return k=>{if(!k.request||_||O.Cj.getUrlSearchParams().editPanel!=null||k.state!==m.Gu.Done&&k.state!==m.Gu.Error)return;const W={eventName:R.ct.DataRequest,source:k.request.app,datasourceName:G.name,datasourceId:G.id,datasourceUid:G.uid,datasourceType:G.type,dataSize:0,duration:k.request.endTime-k.request.startTime};K(W,k),k.request.app!==p.zj.Explore&&k.request.app!==p.zj.Correlations&&L(W,k),k.series&&k.series.length>0&&(W.dataSize=k.series.length),(0,I.r_)(W),_=!0};function K(k,z){const W={};for(let H=0;H<z.series.length;H++){const X=z.series[H].refId;X&&!W[X]&&(W[X]=z.series[H].meta?.isCachedResponse??!1)}k.totalQueries=Object.keys(W).length,k.cachedQueries=Object.values(W).filter(H=>H===!0).length,k.panelId=z.request.panelId;const Z=(0,M.h4)().getCurrent();Z&&(k.dashboardId=Z.id,k.dashboardName=Z.title,k.dashboardUid=Z.uid,k.folderName=Z.meta.folderTitle)}}function L(G,_){_.errors?.length?G.error=_.errors.join(", "):_.error&&(G.error=_.error.message)}function S(G,_){const K=_.panelData.request,k={..._.packets},z=G.key??G.data?.[0]?.refId??"A";k[z]=G;let W=G.state||m.Gu.Done,Z,H;const X=[],Y=[];for(const ge in k){const q=k[ge];if((q.error||q.errors?.length)&&(W=m.Gu.Error,Z=q.error,H=q.errors),q.data&&q.data.length)for(const me of q.data){if(me.meta?.dataTopic===v.w5.Annotations){Y.push(me);continue}X.push(me)}}const ne=U(K,W),se={state:W,series:X,annotations:Y,error:Z,errors:H,request:K,timeRange:ne},re=new Set([..._.panelData.traceIds??[],...G.traceIds??[]]);return re.size>0&&(se.traceIds=Array.from(re)),{packets:k,panelData:se}}function U(G,_){const K=G.range;return!(0,n.isString)(K.raw.from)||_!==m.Gu.Streaming?K:{...K,from:E.parse(K.raw.from,!1),to:E.parse(K.raw.to,!0)}}function N(G,_,K){let k={panelData:{state:m.Gu.Loading,series:[],request:_,timeRange:_.range},packets:{}};if(!_.targets.length)return _.endTime=Date.now(),k.panelData.state=m.Gu.Done,(0,a.of)(k.panelData);const z=w(G,_,K).pipe((0,g.U)(W=>{if(!(0,n.map)(W.data))throw new Error(`Expected response data to be array, got ${typeof W.data}.`);return _.endTime=Date.now(),k=S(W,k),k.panelData}),(0,u.K)(W=>(console.error("runRequest.catchError",W),(0,h.H)(W),(0,a.of)({...k.panelData,state:m.Gu.Error,error:(0,s.P)(W)}))),(0,c.b)(x(G)),(0,T.V)(C.ae,_.requestId),(0,l.B)());return(0,i.T)((0,r.H)(200).pipe((0,d.h)(k.panelData),(0,f.R)(z)),z)}function w(G,_,K){if(_.targets=_.targets.map(z=>(0,P.vH)(z)?{...G?.getDefaultQuery?.(p.zj.PanelEditor),...z}:z),y.config.publicDashboardAccessToken)return(0,o.D)(G.query(_));for(const z of _.targets)if((0,D.Pr)(z.datasource))return b.mV.query(_);const k=K?K(_):G.query(_);return(0,o.D)(k)}},92624:(Q,A,e)=>{"use strict";e.d(A,{I:()=>g});var n=e(44343),a=e(1181),i=e(61129),r=e(65821),o=e(65354);async function g(u,c,l,d){let f=l;const m={type:u.type,uid:c},v={...u?.getDefaultQuery?.(n.zj.PanelEditor),datasource:m,refId:"A"};if(d?.meta.id!==u.meta.id){if(u.meta.mixed)return l;if((0,a.p)(d)&&(0,a.CZ)(u)){const E=await d.exportToAbstractQueries(l);f=await u.importFromAbstractQueries(E)}else if(d&&u.importQueries)f=await u.importQueries(l,d);else{if(d){const E=(0,i.J)(),p=[];let h=u.uid;const s=E.containsTemplate(c);s&&(h=E.replace(u.uid));const y=l.reduce((D,C)=>{if(C.datasource){let P=C.datasource.uid;const b=E.containsTemplate(P);if(b&&(P=E.replace(C.datasource.uid)),P===h&&b===s)return C.refId=(0,o.Hs)(D),D.concat([C])}return D},p);if(y.length>0)return y}return[v]}}return f.length===0?[v]:f.map(E=>(!(0,r.Pr)(E.datasource)&&!u.meta.mixed&&(E.datasource=m),E))}},86434:(Q,A,e)=>{"use strict";e.d(A,{E_:()=>p,YQ:()=>l,fy:()=>d,pW:()=>c,qb:()=>v,qi:()=>g,rh:()=>m,to:()=>f,xb:()=>E,yw:()=>o});var n=e(40884);const a=null,i=58,r=8,o={label:"A\u2013Z",value:"alpha-asc"},g="search.sections",u="grafana.search.expanded-folder",c=0,l="general",d="General",f="grafana.search.include.panels",m="grafana.search.layout",v="grafana.search.sort",E={dashboard:n.o.DashDB,folder:n.o.DashFolder,home:n.o.DashHome},p=1e3},39793:(Q,A,e)=>{"use strict";e.d(A,{A:()=>o,v:()=>g});var n=e(31733),a=e(94557),i=e(84912),r=e(19690);function o(){const u=(0,n.useRef)(new a.x);return{keyboardEvents:u.current,onKeyDown:c=>{switch(c.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":u.current.next(c);default:}}}}function g(u,c,l){const d=(0,n.useRef)({x:0,y:-1}),[f,m]=(0,n.useState)({x:0,y:-1}),v=(0,n.useRef)();return(0,n.useEffect)(()=>{v.current=l.view.fields.url,d.current.x=0,d.current.y=-1,m({...d.current})},[l]),(0,n.useEffect)(()=>{const E=u.subscribe({next:p=>{switch(p?.code){case"ArrowDown":{d.current.y++,m({...d.current});break}case"ArrowUp":d.current.y=Math.max(0,d.current.y-1),m({...d.current});break;case"ArrowRight":{c>0&&(d.current.x=Math.min(c,d.current.x+1),m({...d.current}));break}case"ArrowLeft":{c>0&&(d.current.x=Math.max(0,d.current.x-1),m({...d.current}));break}case"Enter":if(!v.current)break;const h=d.current.x*c+d.current.y;if(h<0){d.current.x=0,d.current.y=0,m({...d.current});break}const s=v.current.values?.[h];typeof s=="string"&&r.E1.push(i.u.stripBaseFromUrl(s))}}});return()=>E.unsubscribe()},[u,c]),f}},24017:(Q,A,e)=>{"use strict";e.d(A,{Jy:()=>r,Nw:()=>g,OY:()=>i,Qw:()=>a,TP:()=>o});var n=e(64704);const a=(c,l)=>{(0,n.ff)(`${c}_viewed`,u(l))},i=(c,l)=>{(0,n.ff)(`${c}_result_clicked`,u(l))},r=(c,l)=>{(0,n.ff)(`${c}_query_submitted`,u(l))},o=(c,{error:l,...d})=>{(0,n.ff)(`${c}_query_failed`,{...u(d),error:l})},g=(c,l,d)=>{(0,n.ff)(`grafana_panel_inspect_${c}_${l}_clicked`,d)},u=c=>({layout:c.layout,starredFilter:c.starred??!1,sort:c.sortValue??"",tagCount:c.tagCount??0,queryLength:c.query?.length??0,includePanels:c.includePanels??!1})},4502:(Q,A,e)=>{"use strict";e.d(A,{getGrafanaSearcher:()=>R});var n=e(85498),a=e(46901),i=e(98147),r=e(28073),o=e(69391),g=e(82113);const u="Loading",c="api/search-v2",l="name_sort";class d{constructor(M){this.fallbackSearcher=M}async search(M){if(M.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(M)}async starred(M){if(M.facet?.length)throw new Error("facets not supported!");const x=await(0,o.i)().get("api/user/stars");return x?.length?this.doSearchQuery({uid:x,query:M.query??"*"}):{view:new a.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(L,S)=>{},isItemLoaded:L=>!0}}async tags(M){const x={...M,query:M.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},S=(await(0,o.i)().post(c,x)).frames.map(U=>(0,i.g0)(U));if(S[0]?.name===u)return this.fallbackSearcher.tags(M);for(const U of S)if(U.fields[0].name==="tag")return v(U);return[]}getSortOptions(){const M=[{value:l,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(n.config.licenseInfo.enabledFeatures.analytics){for(const x of E)M.push({value:`-${x.name}`,label:`${x.display} (most)`}),M.push({value:`${x.name}`,label:`${x.display} (least)`});for(const x of p)M.push({value:`-${x.name}`,label:`${x.display} (recent)`}),M.push({value:`${x.name}`,label:`${x.display} (oldest)`})}return Promise.resolve(M)}async doSearchQuery(M){M=await(0,g.Sd)(M);const x={...M,query:M.query??"*",limit:M.limit??f},S=(await(0,o.i)().post(c,x)).frames.map(k=>(0,i.g0)(k)),U=S.length?(0,i.g0)(S[0]):{fields:[],length:0};if(U.name===u)return this.fallbackSearcher.search(M);for(const k of U.fields)k.display=(0,r.U)({field:k,theme:n.config.theme2});U.meta?.custom||(U.meta={...U.meta,custom:{count:U.length,max_score:1}});const N=U.meta.custom;if(N.locationInfo||(N.locationInfo={}),N.sortBy?.length){const k=U.fields.find(z=>z.name===N.sortBy);if(k){const z=h(k.name);N.sortBy=z,k.name=z}}let w=0,G;const _=async()=>{for(;w>K.dataFrame.length;){const k=K.dataFrame.length;if(k>=N.count)return;const z=await(0,o.i)().post(c,{...x??{},from:k,limit:m}),W=(0,i.g0)(z.frames[0]);if(!W){console.log("no results",W);return}if(W.fields.length!==K.dataFrame.fields.length){console.log("invalid shape",W,K.dataFrame);return}const Z=W.length+K.dataFrame.length;for(let X=0;X<W.fields.length;X++)K.dataFrame.fields[X].values.push(...W.fields[X].values);K.dataFrame.length=Z;const H=W.meta?.custom;if(H?.locationInfo&&N)for(const[X,Y]of Object.entries(H.locationInfo))N.locationInfo[X]=Y}G=void 0},K=new a.U(U);return{totalRows:N.count??U.length,view:K,loadMoreItems:async(k,z)=>(w=Math.max(w,z),G||(G=_()),G),isItemLoaded:k=>k<K.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const f=50,m=100;function v(I){const M=I.fields[0].values,x=I.fields[1].values,L=[];for(let S=0;S<I.length;S++)L.push({term:M[S],count:x[S]});return L}const E=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],p=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function h(I){for(const M of E)if(M.name===I)return M.display;for(const M of p)if(M.name===I)return M.display;return I}var s=e(20670);class y{constructor(M){this.parent=M,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(M){if(M.facet?.length)throw new Error("facets not supported!");if(M.sort!=null)throw new Error("custom sorting is not supported yet");if(M.tags?.length||M.ds_uid?.length)return this.parent.search(M);const L=(await this.getCache(M.kind)).search(M.query);return{isItemLoaded:()=>!0,loadMoreItems:async(S,U)=>{},totalRows:L.length,view:L}}async getCache(M){const x=M?M.sort().join(","):"*",L=this.cache.get(x);if(L)try{return await L}catch{return this.cache.delete(x),new D(new a.U({name:"error",fields:[],length:0}))}const S=this.parent.search({kind:M,limit:5e3}).then(U=>new D(U.view));return this.cache.set(x,S),S}async starred(M){return this.parent.starred(M)}async getSortOptions(){return this.parent.getSortOptions()}async tags(M){return this.parent.tags(M)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class D{constructor(M){this.full=M,this.ufuzzy=new s.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new a.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(x=>({...x,values:[]})),length:0})}search(M){if(!M?.length||M==="*")return this.full;const x=this.full.dataFrame.fields,L=this.names,S=x.map(G=>[]);let[U,N,w]=this.ufuzzy.search(L,M,5);for(let G=0;G<x.length;G++){let _=x[G].values,K=S[G];if(N&&w)for(let k=0;k<w.length;k++){let z=N.idx[w[k]];K.push(_[z])}else if(U)for(let k=0;k<U.length;k++){let z=U[k];K.push(_[z])}}return this.empty.dataFrame.fields.forEach((G,_)=>{G.values=S[_]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var C=e(85666),P=e(41327),b=e(86434);class T{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(M,x){const L=await(0,g.Sd)(x);return L.query?.length&&L.query!=="*"&&(M.query=L.query),L.kind?.length===1&&b.xb[L.kind[0]]&&(M.type=b.xb[L.kind[0]]),L.uid?M.dashboardUID=L.uid:L.location?.length&&(M.folderUIDs=[L.location]),M}async search(M){if(M.facet?.length)throw new Error("facets not supported!");if(M.from!==void 0){if(!M.limit)throw new Error("Must specify non-zero limit parameter when using from");if(M.from/M.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const x=M.limit??(M.from!==void 0?1:b.E_),L=M.from!==void 0?M.from/x+1:void 0,S=await this.composeQuery({limit:x,tag:M.tags,sort:M.sort,page:L},M);return this.doAPIQuery(S)}async starred(M){if(M.facet?.length)throw new Error("facets not supported!");const x=await this.composeQuery({limit:M.limit??b.E_,tag:M.tags,sort:M.sort,starred:M.starred},M);return this.doAPIQuery(x)}async getSortOptions(){return(await P.ae.get("/api/search/sorting")).sortOptions.map(x=>({value:x.name,label:x.displayName}))}async tags(M){return(await P.ae.get("/api/dashboards/tags")).sort((L,S)=>S.count-L.count)}async doAPIQuery(M){const x=await P.ae.get("/api/search",M),L=[],S=[],U=[],N=[],w=[],G=[],_=[];let K;for(let W of x){const Z=W.type==="dash-folder"?"folder":"dashboard";L.push(Z),S.push(W.title),U.push(W.uid),N.push(W.url),w.push(W.tags),_.push(W.sortMeta);let H=W.folderUid;!H&&Z==="dashboard"&&(H="general"),G.push(H),W.sortMetaName?.length&&(K=W.sortMetaName),W.folderUid&&W.folderTitle?this.locationInfo[W.folderUid]={kind:"folder",name:W.folderTitle,url:W.folderUrl,folderId:W.folderId}:Z==="folder"&&(this.locationInfo[W.uid]={kind:Z,name:W.title,url:W.url,folderId:W.id})}const k={fields:[{name:"kind",type:C.fS.string,config:{},values:L},{name:"name",type:C.fS.string,config:{},values:S},{name:"uid",type:C.fS.string,config:{},values:U},{name:"url",type:C.fS.string,config:{},values:N},{name:"tags",type:C.fS.other,config:{},values:w},{name:"location",type:C.fS.string,config:{},values:G}],length:S.length,meta:{custom:{count:S.length,max_score:1,locationInfo:this.locationInfo}}};K?.length&&_.length&&(k.meta.custom.sortBy=K,k.fields.push({name:K,type:C.fS.number,config:{},values:_}));for(const W of k.fields)W.display=(0,r.U)({field:W,theme:n.config.theme2});const z=new a.U(k);return{totalRows:k.length,view:z,loadMoreItems:async(W,Z)=>{},isItemLoaded:W=>!0}}}let O;function R(){if(!O){const I=new T,M=n.config.featureToggles.panelTitleSearch;O=M?new d(I):I,M&&location.search.includes("do-frontend-query")&&(O=new y(O))}return O}},82113:(Q,A,e)=>{"use strict";e.d(A,{J6:()=>o,Sd:()=>a,f9:()=>u});var n=e(60490);async function a(c){return c.query&&c.query.indexOf("folder:current")>=0&&(c={...c,location:await i(),query:c.query.replace("folder:current","").trim()},c.query?.length||(c.query="*")),Promise.resolve(c)}async function i(){try{let c=(0,n.h4)().getCurrent();return c||(await r(500),c=(0,n.h4)().getCurrent()),Promise.resolve(c?.meta?.folderUid)}catch(c){console.error(c)}}function r(c){return new Promise(l=>setTimeout(l,c))}function o(c,l){return c==="dashboard"?"apps":c==="folder"?l?"folder-open":"folder":"question-circle"}function g(c){switch(c){case"dashboard":case"folder":case"panel":return c;default:return"dashboard"}}function u(c,l){const d=l?.dataFrame.meta?.custom,f={kind:g(c.kind),uid:c.uid,title:c.name,url:c.url,tags:c.tags??[]},m=d?.sortBy;if(m){const v=c[m];(typeof v=="string"||typeof v=="number")&&(f.sortMetaName=m,f.sortMeta=v)}if(c.location){const v=c.location.split("/"),E=v[v.length-1],p=d?.locationInfo[E];p&&(f.parentTitle=p.name,f.parentKind=p.kind,f.parentUID=E)}return f}},40884:(Q,A,e)=>{"use strict";e.d(A,{A:()=>a,o:()=>n});var n=(i=>(i.DashDB="dash-db",i.DashHome="dash-home",i.DashFolder="dash-folder",i))(n||{}),a=(i=>(i.List="list",i.Folders="folders",i))(a||{})},84265:(Q,A,e)=>{"use strict";e.d(A,{rb:()=>i,vj:()=>o});var n=e(86434);const a=g=>g?!!(g.query||g.tag?.length>0||g.starred||g.sort):!1,i=()=>{const g=n.qi+".";for(let u=0;u<window.localStorage.length;u++){const c=window.localStorage.key(u);c?.startsWith(g)&&window.localStorage.removeItem(c)}},r=(g="General")=>`${SECTION_STORAGE_KEY}.${g.toLowerCase()}`,o=g=>{const u=Object.entries(g).reduce((c,[l,d])=>{if(d){if(l==="tag"&&!Array.isArray(d))return{...c,tag:[d]}}else return c;return{...c,[l]:d}},{});if(g.folder){const c=`folder:${g.folder}`;return{...u,query:`${c} ${(u.query??"").replace(c,"")}`}}return{...u}}},45413:(Q,A,e)=>{"use strict";e.d(A,{BR:()=>f,Dn:()=>y,Fy:()=>d,LA:()=>l,M4:()=>C,P4:()=>g,PJ:()=>D,Ub:()=>s,ZP:()=>b,aj:()=>P,dt:()=>h,e7:()=>u,pN:()=>p,s3:()=>c});var n=e(4579),a=e(42342);const i={serviceAccount:{},isLoading:!0,tokens:[]},r=(0,n.oM)({name:"serviceaccount",initialState:i,reducers:{serviceAccountFetchBegin:T=>({...T,isLoading:!0}),serviceAccountFetchEnd:T=>({...T,isLoading:!1}),serviceAccountLoaded:(T,O)=>({...T,serviceAccount:O.payload,isLoading:!1}),serviceAccountTokensLoaded:(T,O)=>({...T,tokens:O.payload,isLoading:!1}),rolesFetchBegin:T=>({...T,rolesLoading:!0}),rolesFetchEnd:T=>({...T,rolesLoading:!1})}}),o=r.reducer,{serviceAccountLoaded:g,serviceAccountTokensLoaded:u,serviceAccountFetchBegin:c,serviceAccountFetchEnd:l,rolesFetchBegin:d,rolesFetchEnd:f}=r.actions,m={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:a.ServiceAccountStateFilter.All},v=(0,n.oM)({name:"serviceaccounts",initialState:m,reducers:{serviceAccountsFetched:(T,O)=>{const{totalCount:R,perPage:I,...M}=O.payload,x=Math.ceil(R/I);return{...T,...M,totalPages:x,perPage:I,showPaging:x>1,isLoading:!1}},serviceAccountsFetchBegin:T=>({...T,isLoading:!0}),serviceAccountsFetchEnd:T=>({...T,isLoading:!1}),acOptionsLoaded:(T,O)=>({...T,roleOptions:O.payload}),queryChanged:(T,O)=>({...T,query:O.payload,page:0}),pageChanged:(T,O)=>({...T,page:O.payload}),stateFilterChanged:(T,O)=>({...T,serviceAccountStateFilter:O.payload})}}),E=v.reducer,{serviceAccountsFetchBegin:p,serviceAccountsFetchEnd:h,serviceAccountsFetched:s,acOptionsLoaded:y,pageChanged:D,stateFilterChanged:C,queryChanged:P}=v.actions,b={serviceAccountProfile:o,serviceAccounts:E}},3237:(Q,A,e)=>{"use strict";e.d(A,{Ii:()=>o,UW:()=>l,ZP:()=>v,cD:()=>u,fT:()=>f,ik:()=>c,ki:()=>g,rI:()=>d,rW:()=>r});var n=e(4579);const a={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},i=(0,n.oM)({name:"supportBundles",initialState:a,reducers:{supportBundlesLoaded:(E,p)=>({...E,supportBundles:p.payload,isLoading:!1}),fetchBegin:E=>({...E,isLoading:!0}),fetchEnd:E=>({...E,isLoading:!1}),collectorsFetchBegin:E=>({...E,createBundlePageLoading:!0}),collectorsFetchEnd:E=>({...E,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(E,p)=>({...E,supportBundleCollectors:p.payload,createBundlePageLoading:!1}),setLoadBundleError:(E,p)=>({...E,loadBundlesError:p.payload,supportBundleCollectors:[]}),setCreateBundleError:(E,p)=>({...E,createBundleError:p.payload})}}),{supportBundlesLoaded:r,fetchBegin:o,fetchEnd:g,supportBundleCollectorsLoaded:u,collectorsFetchBegin:c,collectorsFetchEnd:l,setLoadBundleError:d,setCreateBundleError:f}=i.actions,v={supportBundles:i.reducer}},44730:(Q,A,e)=>{"use strict";e.d(A,{BR:()=>l,Fy:()=>c,PJ:()=>g,PL:()=>r,UL:()=>u,ZP:()=>y,aj:()=>o,iI:()=>E,y$:()=>v});var n=e(4579);const a={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},i=(0,n.oM)({name:"teams",initialState:a,reducers:{teamsLoaded:(D,C)=>{const{totalCount:P,perPage:b,...T}=C.payload,O=Math.ceil(P/b);return{...D,...T,totalPages:O,perPage:b,hasFetched:!0}},queryChanged:(D,C)=>({...D,page:1,query:C.payload}),pageChanged:(D,C)=>({...D,page:C.payload}),sortChanged:(D,C)=>({...D,sort:C.payload,page:1}),rolesFetchBegin:D=>({...D,rolesLoading:!0}),rolesFetchEnd:D=>({...D,rolesLoading:!1})}}),{teamsLoaded:r,queryChanged:o,pageChanged:g,sortChanged:u,rolesFetchBegin:c,rolesFetchEnd:l}=i.actions,d=i.reducer,f={team:{},members:[],groups:[],searchMemberQuery:""},m=(0,n.oM)({name:"team",initialState:f,reducers:{teamLoaded:(D,C)=>({...D,team:C.payload}),teamMembersLoaded:(D,C)=>({...D,members:C.payload}),setSearchMemberQuery:(D,C)=>({...D,searchMemberQuery:C.payload}),teamGroupsLoaded:(D,C)=>({...D,groups:C.payload})}}),{teamLoaded:v,teamGroupsLoaded:E,teamMembersLoaded:p,setSearchMemberQuery:h}=m.actions,s=m.reducer,y={teams:d,team:s}},4419:(Q,A,e)=>{"use strict";e.d(A,{J:()=>q});var n=e(69781),a=e(74687),i=e(66261),r=e(61129),o=e(77121),g=e(71199),u=e(58440);function c(me){const oe=o.ep.getVariables(me);return(0,u.q)(oe)}var l=e(73731),d=e(46769),f=e(36138),m=e(99282),v=e(77378);let E={};function p(me){const oe=E[me];return oe||(E[me]=(0,n.property)(me))}class h{constructor(oe,fe,ve){this.state={name:oe.name,value:fe,text:ve,type:oe.type}}getValue(oe){let{value:fe}=this.state;return fe==="string"||fe==="number"||fe==="boolean"?fe:String(fe)}getValueText(){const{value:oe,text:fe}=this.state;return typeof fe=="string"?oe===d.r2?d.xk:fe:Array.isArray(fe)?fe.join(" + "):(console.log("value",fe),String(fe))}}let s;function y(me,oe,fe){return s?(s.state.name=me.name,s.state.type=me.type,s.state.value=oe,s.state.text=fe):s=new h(me,oe,fe),s}function D(me,oe,fe,ve){if(fe=fe||{},me==null||(0,f.Kn)(fe)&&oe!==g.b8.QueryParam)return"";if(!Array.isArray(me)&&typeof me=="object"&&(me=`${me}`),typeof oe=="function")return oe(me,fe,D);oe||(oe=g.b8.Glob);let pe=oe.split(":");pe.length>1?(oe=pe[0],pe=pe.slice(1)):pe=[];let Me=o.Vl.getIfExists(oe);Me||(console.error(`Variable format ${oe} not found. Using glob format as fallback.`),Me=o.Vl.get(g.b8.Glob));const Pe=y(fe,me,ve??me);return Me.formatter(me,pe,Pe)}var C=e(35051),P=e.n(C),b=e(81548),T=e(91977),O=e(88822),R=e(89660),I=e(58655),M=e(86850),x=e(85666),L=e(93796),S=e(28073),U=e(27957),N=e(84479);function w(me,oe,fe){return new Proxy({},{get:(ve,pe)=>{if(pe==="name")return me.name;if(pe==="displayName")return(0,U.CZ)(me,oe,fe);if(pe==="labels"||pe==="formattedLabels")return me.labels?{...me.labels,__values:Object.values(me.labels).sort().join(", "),toString:()=>(0,N.aA)(me.labels,"",!0)}:""}})}function G(me,oe,fe,ve){const pe=_(me,oe,fe);return D(pe,ve)}function _(me,oe,fe){const ve=fe?.__dataContext;if(!ve)return me;const{frame:pe,rowIndex:Me,field:Pe,calculatedValue:Ee}=ve.value;if(Ee)switch(oe){case"numeric":return Ee.numeric.toString();case"raw":return Ee.numeric;case"time":return"";case"text":default:return(0,M.zc)(Ee)}if(Me===void 0)return me;if(oe==="time"){const ot=pe.fields.find(it=>it.type===x.fS.time);return ot?ot.values[Me]:void 0}const he=Pe.values[Me];if(oe==="raw")return he;const ke=(Pe.display??z())(he);switch(oe){case"numeric":return ke.numeric;case"text":return ke.text;default:return(0,M.zc)(ke)}}function K(me,oe,fe,ve){const pe=fe?.__dataContext;if(!pe||!oe)return me;const{frame:Me,rowIndex:Pe}=pe.value;if(Pe===void 0||oe===void 0)return me;const Ee={name:Me.name,refId:Me.refId,fields:(0,L.z)({frame:Me,rowIndex:Pe})},he=p(oe)(Ee)??"";return D(he,ve)}let k;function z(){return k||(k=(0,S.U)()),k}function W(me,oe,fe,ve){const pe=fe?.__dataContext;if(!pe||oe!=="name")return me;const{frame:Me,frameIndex:Pe}=pe.value,Ee=(0,U.nf)(Me,Pe);return D(Ee,ve)}function Z(me,oe,fe,ve){const pe=fe?.__dataContext;if(!pe||oe===void 0||oe==="")return me;const{frame:Me,field:Pe,data:Ee}=pe.value,he=w(Pe,Me,Ee),Le=p(oe)(he)??"";return D(Le,ve)}const H={__value:G,__data:K,__series:W,__field:Z,[b.W.includeVars]:X,[b.W.keepTime]:Y,__timezone:ne};function X(me,oe,fe){const ve=(0,I.c)(fe);return T.Cj.toUrlParams(ve)}function Y(){return T.Cj.toUrlParams((0,R.$t)().timeRangeForUrl())}function ne(){const me=(0,O.Z)({timeZone:(0,R.$t)().timeModel?.getTimezone()});return me==="browser"?P().tz.guess():me}const se={getFilteredVariables:m.Q4,getVariables:m.ng,getVariableWithName:m._K};class re{constructor(oe=se){this.dependencies=oe,this.regex=v.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(oe,fe){this._variables=oe,this.timeRange=fe,this.updateIndex()}get variables(){return(0,a.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return window.__grafanaSceneContext?c(window.__grafanaSceneContext):this.dependencies.getVariables()}updateIndex(){const oe=fe=>fe||fe==="";if(this.index=this._variables.reduce((fe,ve)=>(ve.current&&(ve.current.isNone||oe(ve.current.value))&&(fe[ve.name]=ve),fe),{}),this.timeRange){const fe=this.timeRange.from.valueOf().toString(),ve=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:fe,text:fe}},__to:{current:{value:ve,text:ve}}}}}updateTimeRange(oe){this.timeRange=oe,this.updateIndex()}variableInitialized(oe){this.index[oe.name]=oe}getAdhocFilters(oe,fe){let ve=[],pe=(0,i.F)().getInstanceSettings(oe);if(!pe)return[];!fe&&!this._adhocFiltersDeprecationWarningLogged.get(pe.type)&&((0,a.d)(`DataSource ${pe.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(pe.type,!0));for(const Me of this.getAdHocVariables()){const Pe=Me.datasource?.uid;(Pe===pe.uid||Pe?.indexOf("$")===0&&this.replace(Pe)===pe.uid)&&(ve=ve.concat(Me.filters))}return ve}setGrafanaVariable(oe,fe){this.grafanaVariables.set(oe,fe)}setGlobalVariable(oe,fe){(0,a.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[oe]:{current:fe}}}getVariableName(oe){this.regex.lastIndex=0;const fe=this.regex.exec(oe);return fe?fe.slice(1).find(pe=>pe!==void 0):null}containsTemplate(oe){if(!oe)return!1;const fe=this.getVariableName(oe),ve=fe&&this.getVariableAtIndex(fe);return ve!=null}variableExists(oe){return(0,a.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(oe)}highlightVariablesAsHtml(oe){return!oe||!(0,n.isString)(oe)?oe:(oe=(0,n.escape)(oe),this._replaceWithVariableRegex(oe,void 0,(fe,ve)=>this.getVariableAtIndex(ve)?'<span class="template-variable">'+fe+"</span>":fe))}getAllValue(oe){if(oe.allValue)return oe.allValue;const fe=[];for(let ve=1;ve<oe.options.length;ve++)fe.push(oe.options[ve].value);return fe}getVariableValue(oe,fe){return fe?p(fe)(oe.value):oe.value}getVariableText(oe,fe){return oe.value===fe||typeof fe!="string"?oe.text:fe}replace(oe,fe,ve,pe){return fe&&fe.__sceneObject?o.ep.interpolate(fe.__sceneObject.value,oe,fe,ve):window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?o.ep.interpolate(window.__grafanaSceneContext,oe,fe,ve):oe?(this.regex.lastIndex=0,this._replaceWithVariableRegex(oe,ve,(Me,Pe,Ee,he)=>{const Le=this._evaluateVariableExpression(Me,Pe,Ee,he,fe);return pe&&pe.push({match:Me,variableName:Pe,fieldPath:Ee,format:he,value:Le,found:Le!==Me}),Le})):oe??""}_evaluateVariableExpression(oe,fe,ve,pe,Me){const Pe=this.getVariableAtIndex(fe),Ee=Me?.[fe];if(Ee){const ot=this.getVariableValue(Ee,ve),it=this.getVariableText(Ee,ot);if(ot!=null)return D(ot,pe,Pe,it)}if(!Pe){const ot=H[fe];return ot?ot(oe,ve,Me,pe):oe}if(pe===g.b8.QueryParam||(0,f.Kn)(Pe)){const ot=l.z.get(Pe.type).getValueForUrl(Pe),it=(0,f.Kn)(Pe)?Pe.id:Pe.current.text;return D(ot,pe,Pe,it)}const he=this.grafanaVariables.get(Pe.current.value);if(he)return D(he,pe,Pe);let Le=Pe.current.value,ke=Pe.current.text;if(this.isAllValue(Le)&&(Le=this.getAllValue(Pe),ke=d.xk,Pe.allValue&&pe!==g.b8.Text&&pe!==g.b8.PercentEncode))return this.replace(Le);if(ve){const ot=this.getVariableValue({value:Le,text:ke},ve);if(ot!=null)return D(ot,pe,Pe,ke)}return D(Le,pe,Pe,ke)}_replaceWithVariableRegex(oe,fe,ve){return this.regex.lastIndex=0,oe.replace(this.regex,(pe,Me,Pe,Ee,he,Le,ke)=>ve(pe,Me||Pe||he,Le,Ee||ke||fe))}isAllValue(oe){return oe===d.r2||Array.isArray(oe)&&oe[0]===d.r2}replaceWithText(oe,fe){return(0,a.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(oe,fe,"text")}getVariableAtIndex(oe){if(oe)return this.index[oe]?this.index[oe]:this.dependencies.getVariableWithName(oe)}getAdHocVariables(){return this.dependencies.getFilteredVariables(f.Kn)}}const ge=new re;(0,r.l)(ge);const q=()=>ge},69702:(Q,A,e)=>{"use strict";e.d(A,{$:()=>r});var n=e(77121),a=e(49417),i=e(54431);function r(l){let d="short",f="avg",m=!1,v=l;if(l.endsWith("seconds_sum"))d="s",f="avg",m=!0;else if(l.endsWith("seconds"))d="s",f="avg",m=!1;else if(l.endsWith("bytes"))d="bytes",f="avg",m=!1;else if(l.endsWith("seconds_count")||l.endsWith("seconds_total"))f="sum",m=!0;else{if(l.endsWith("bucket"))return o(l);(l.endsWith("count")||l.endsWith("total"))&&(f="sum",m=!0)}let E=`${i.y7}${i.uA}`;m&&(E=`rate(${E}[$__rate_interval])`);const p={title:`${v}`,variant:"graph",unit:d,queries:[{refId:"A",expr:`${f}(${E})`}],vizBuilder:g},h={title:`${v}`,variant:"graph",unit:d,queries:[{refId:"A",expr:`${f}(${E}) by(${i.OP})`,legendFormat:`{{${i.OP}}}`}],vizBuilder:g};return{preview:p,main:p,breakdown:h,variants:[]}}function o(l){let d="short";l.endsWith("seconds_bucket")&&(d="s");const f={title:l,variant:"p50",unit:d,queries:[{refId:"A",expr:`histogram_quantile(0.50, sum by(le) (rate(${i.y7}${i.uA}[$__rate_interval])))`}],vizBuilder:g},m={title:l,variant:"p50",unit:d,queries:[{refId:"A",expr:`histogram_quantile(0.50, sum by(le, ${i.OP}) (rate(${i.y7}${i.uA}[$__rate_interval])))`}],vizBuilder:g},v={title:l,variant:"percentiles",unit:d,queries:[{refId:"A",expr:`histogram_quantile(0.99, sum by(le) (rate(${i.y7}${i.uA}[$__rate_interval])))`,legendFormat:"99th Percentile"},{refId:"B",expr:`histogram_quantile(0.90, sum by(le) (rate(${i.y7}${i.uA}[$__rate_interval])))`,legendFormat:"90th Percentile"},{refId:"C",expr:`histogram_quantile(0.50, sum by(le) (rate(${i.y7}${i.uA}[$__rate_interval])))`,legendFormat:"50th Percentile"}],vizBuilder:u},E={title:l,variant:"heatmap",unit:d,queries:[{refId:"A",expr:`sum by(le) (rate(${i.y7}${i.uA}[$__rate_interval]))`,format:"heatmap"}],vizBuilder:c};return{preview:f,main:v,variants:[v,E],breakdown:m}}function g(l){return n.wX.timeseries().setTitle(l.title).setUnit(l.unit).setOption("legend",{showLegend:!1}).setCustomFieldConfig("fillOpacity",9)}function u(l){return n.wX.timeseries().setTitle(l.title).setUnit(l.unit).setCustomFieldConfig("fillOpacity",9)}function c(l){return n.wX.heatmap().setTitle(l.title).setUnit(l.unit).setOption("calculate",!1).setOption("color",{mode:a.S_.Scheme,exponent:.5,scheme:"Spectral",steps:32,reverse:!1})}},98355:(Q,A,e)=>{"use strict";e.d(A,{j:()=>b});var n=e(76932),a=e(31733),i=e(19690),r=e(77121),o=e(76067),g=e(76772),u=e(67669),c=e(73351);class l extends r.wx{constructor(x){super({showQuery:x.showQuery??!1,showAdvanced:x.showAdvanced??!1,isOpen:x.isOpen??!1}),this.onToggleShowQuery=()=>{this.setState({showQuery:!this.state.showQuery})},this.onToggleAdvanced=()=>{this.setState({showAdvanced:!this.state.showAdvanced})},this.onToggleMultiValue=()=>{this.setState({multiValueVars:!this.state.multiValueVars})},this.onToggleOpen=L=>{this.setState({isOpen:L})}}}l.Component=({model:M})=>{const{showQuery:x,showAdvanced:L,multiValueVars:S,isOpen:U}=M.useState(),N=(0,o.wW)(d),w=()=>a.createElement("div",{className:N.popover,onClick:G=>G.stopPropagation()},a.createElement("div",{className:N.heading},"Settings"),a.createElement("div",{className:N.options},a.createElement("div",null,"Multi value variables"),a.createElement(g.r,{value:S,onChange:M.onToggleMultiValue}),a.createElement("div",null,"Advanced options"),a.createElement(g.r,{value:L,onChange:M.onToggleAdvanced}),a.createElement("div",null,"Show query"),a.createElement(g.r,{value:x,onChange:M.onToggleShowQuery})));return a.createElement(u.L,{overlay:w,placement:"bottom",onVisibleChange:M.onToggleOpen},a.createElement(c.h,{icon:"cog",variant:"canvas",isOpen:U}))};function d(M){return{popover:(0,n.css)({display:"flex",padding:M.spacing(2),flexDirection:"column",background:M.colors.background.primary,boxShadow:M.shadows.z3,borderRadius:M.shape.borderRadius(),border:`1px solid ${M.colors.border.weak}`,zIndex:1,marginRight:M.spacing(2)}),heading:(0,n.css)({fontWeight:M.typography.fontWeightMedium,paddingBottom:M.spacing(2)}),options:(0,n.css)({display:"grid",gridTemplateColumns:"1fr 50px",rowGap:M.spacing(1),columnGap:M.spacing(2)})}}var f=e(37739),m=e(58037),v=e(54431),E=e(85762);class p extends r.wx{constructor(x){super({steps:x.steps??[],currentStep:x.currentStep??0}),this.stepTransitionInProgress=!1,this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const x=(0,E.wZ)(this);this.state.steps.length===0&&this.addTrailStep(x,"start"),x.subscribeToState((L,S)=>{L.metric!==S.metric&&(this.state.steps.length===1&&(this.state.steps[0].trailState=r.vp.cloneSceneObjectState(S,{history:this})),L.metric&&this.addTrailStep(x,"metric"))}),x.subscribeToEvent(r.pk,L=>{L.payload.state.name===v.Xu&&this.addTrailStep(x,"filters")}),x.subscribeToEvent(r.QI,L=>{L.payload.changedObject instanceof r.gg&&this.addTrailStep(x,"time")})}addTrailStep(x,L){if(this.stepTransitionInProgress)return;const S=this.state.steps.length,U=L==="start"?-1:this.state.currentStep;this.setState({currentStep:S,steps:[...this.state.steps,{description:"Test",type:L,trailState:r.vp.cloneSceneObjectState(x.state,{history:this}),parentIndex:U}]})}goBackToStep(x){this.stepTransitionInProgress=!0,this.setState({currentStep:x}),this.stepTransitionInProgress=!1}renderStepTooltip(x){return a.createElement(f.K,{direction:"column"},a.createElement("div",null,x.type),x.type==="metric"&&a.createElement("div",null,x.trailState.metric))}}p.Component=({model:M})=>{const{steps:x,currentStep:L}=M.useState(),S=(0,o.wW)(h),{ancestry:U,alternatePredecessorStyle:N}=(0,a.useMemo)(()=>{const w=new Set;let G=L;for(;G>=0;)w.add(G),G=x[G].parentIndex;const _=new Map;return w.forEach(K=>{const k=x[K].parentIndex;k+1!==K&&_.set(K,y(K,k))}),{ancestry:w,alternatePredecessorStyle:_}},[L,x]);return a.createElement("div",{className:S.container},a.createElement("div",{className:S.heading},"Trail"),x.map((w,G)=>a.createElement(m.u,{content:()=>M.renderStepTooltip(w),key:G},a.createElement("button",{className:(0,n.cx)(S.step,S.stepTypes[w.type],M.state.currentStep===G?S.stepSelected:"",N.get(G)??"",G!==w.parentIndex+1?S.stepOmitsDirectLeftLink:"",G===0?S.stepOmitsDirectLeftLink:"",U.has(G)?"":S.stepIsNotAncestorOfCurrent),onClick:()=>M.goBackToStep(G)}))))};function h(M){const x=M.visualization;return{container:(0,n.css)({display:"flex",gap:10,alignItems:"center"}),heading:(0,n.css)({}),step:(0,n.css)({flexGrow:0,cursor:"pointer",border:"none",boxShadow:"none",padding:0,margin:0,width:8,height:8,opacity:.7,borderRadius:M.shape.radius.circle,background:M.colors.primary.main,position:"relative","&:hover":{opacity:1},"&:hover:before":{opacity:.7},"&:before":{content:'""',position:"absolute",width:10,height:2,left:-10,top:3,background:M.colors.primary.border,pointerEvents:"none"}}),stepSelected:(0,n.css)({"&:after":{content:'""',borderStyle:"solid",borderWidth:2,borderRadius:"50%",position:"absolute",width:16,height:16,left:-4,top:-4,boxShadow:`0px 0px 0px 2px inset ${M.colors.background.canvas}`}}),stepOmitsDirectLeftLink:(0,n.css)({"&:before":{background:"none"}}),stepIsNotAncestorOfCurrent:(0,n.css)({opacity:.2,"&:hover:before":{opacity:.2}}),stepTypes:{start:s(x.getColorByName("green")),filters:s(x.getColorByName("purple")),metric:s(x.getColorByName("orange")),time:s(M.colors.primary.main)}}}function s(M){return(0,n.css)({background:M,"&:before":{background:M,borderColor:M},"&:after":{borderColor:M}})}function y(M,x){const U=(M-x)*18;return(0,n.css)({"&:before":{content:'""',width:U+2,height:10,borderStyle:"solid",borderWidth:2,borderBottom:"none",borderTopLeftRadius:8,borderTopRightRadius:8,top:-10,left:3-U,background:"none"}})}var D=e(34384),C=e(94147),P=e(78518);class b extends r.wx{constructor(x){super({$timeRange:x.$timeRange??new r.gg({}),$variables:x.$variables??O(x.initialDS,x.metric,x.initialFilters),controls:x.controls??[new r.dn({layout:"vertical"}),new r.o$,new r.n7({}),new r.vf({})],history:x.history??new p({}),settings:x.settings??new l({}),...x}),this._urlSync=new r.oU(this,{keys:["metric"]}),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){return this.state.topScene||this.setState({topScene:T(this.state.metric)}),this.subscribeToEvent(v.J_,this._handleMetricSelectedEvent.bind(this)),this.state.history.subscribeToState((x,L)=>{const S=L.steps.length;if(x.steps.length>S||L.currentStep===x.currentStep)return;const w=x.steps[x.currentStep];this.goBackToStep(w)}),()=>{this.state.embedded||((0,r.oo)().cleanUp(this),(0,P.Y)().setRecentTrail(this))}}goBackToStep(x){this.state.embedded||(0,r.oo)().cleanUp(this),x.trailState.metric||(x.trailState.metric=void 0),this.setState(x.trailState),this.state.embedded||(i.E1.replace((0,E.Ho)(this)),(0,r.oo)().initSync(this))}_handleMetricSelectedEvent(x){this.state.embedded?this.setState(this.getSceneUpdatesForNewMetricValue(x.payload)):i.E1.partial({metric:x.payload,actionView:null});const L=r.ep.lookupVariable(v.Xu,this);L instanceof r.HL&&L.state.set.setState({baseFilters:I(x.payload)})}getSceneUpdatesForNewMetricValue(x){const L={};return L.metric=x,L.topScene=T(x),L}getUrlState(){return{metric:this.state.metric}}updateFromUrl(x){const L={};typeof x.metric=="string"?this.state.metric!==x.metric&&Object.assign(L,this.getSceneUpdatesForNewMetricValue(x.metric)):x.metric===null&&(L.metric=void 0,L.topScene=new C.p({showHeading:!0})),this.setState(L)}}b.Component=({model:M})=>{const{controls:x,topScene:L,history:S,settings:U}=M.useState(),N=(0,o.wW)(R);return a.createElement("div",{className:N.container},a.createElement(S.Component,{model:S}),x&&a.createElement("div",{className:N.controls},x.map(w=>a.createElement(w.Component,{key:w.state.key,model:w})),a.createElement(U.Component,{model:U})),a.createElement("div",{className:N.body},L&&a.createElement(L.Component,{model:L})))};function T(M){return M?new D.u({metric:M}):new C.p({showHeading:!0})}function O(M,x,L){return new r.hT({variables:[new r.l3({name:v.CZ,label:"Data source",value:M,pluginId:x===v.vd?"loki":"prometheus"}),r.HL.create({name:"filters",datasource:v.mF,layout:"vertical",filters:L??[],baseFilters:I(x)})]})}function R(M){return{container:(0,n.css)({flexGrow:1,display:"flex",gap:M.spacing(2),minHeight:"100%",flexDirection:"column"}),body:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",gap:M.spacing(1)}),controls:(0,n.css)({display:"flex",gap:M.spacing(2),alignItems:"flex-end",flexWrap:"wrap"})}}function I(M){return M?[{key:"__name__",operator:"=",value:M}]:[]}},99214:(Q,A,e)=>{"use strict";e.d(A,{A:()=>T,n:()=>I});var n=e(76932),a=e(31733),i=e(97890),r=e(57247),o=e(19690),g=e(77121),u=e(76067),c=e(50186),l=e(37739),d=e(51343),f=e(36717),m=e(58037),v=e(54431);function E({trail:x,onSelect:L,onDelete:S}){const U=(0,u.wW)(s),N=g.ep.lookupVariable(v.Xu,x);if(!(N instanceof g.HL))return null;const w=N.state.set.state.filters,G=h(x);return a.createElement("button",{className:U.container,onClick:()=>L(x)},a.createElement("div",{className:U.wrapper},a.createElement("div",{className:U.heading},p(x.state.metric)),S&&a.createElement(m.u,{content:"Remove bookmark"},a.createElement(d.zx,{size:"sm",icon:"trash-alt",variant:"destructive",fill:"text",onClick:S}))),a.createElement(l.K,{gap:1.5},G&&a.createElement(l.K,{direction:"column",gap:.5},a.createElement("div",{className:U.label},"Datasource"),a.createElement("div",{className:U.value},h(x))),w.map((_,K)=>a.createElement(l.K,{key:K,direction:"column",gap:.5},a.createElement("div",{className:U.label},_.key),a.createElement("div",{className:U.value},_.value)))))}function p(x){return x?x===v.vd?"Logs":x:"Select metric"}function h(x){return g.ep.interpolate(x,v.bS)}function s(x){return{container:(0,n.css)({padding:x.spacing(1),flexGrow:1,display:"flex",flexDirection:"column",gap:x.spacing(2),width:"100%",border:`1px solid ${x.colors.border.weak}`,borderRadius:x.shape.radius.default,cursor:"pointer",boxShadow:"none",background:"transparent",textAlign:"left","&:hover":{background:x.colors.emphasize(x.colors.background.primary,.03)}}),label:(0,n.css)({fontWeight:x.typography.fontWeightMedium,fontSize:x.typography.bodySmall.fontSize}),value:(0,n.css)({fontSize:x.typography.bodySmall.fontSize}),heading:(0,n.css)({padding:x.spacing(0),display:"flex",fontWeight:x.typography.fontWeightMedium,overflowX:"hidden"}),body:(0,n.css)({padding:x.spacing(0)}),wrapper:(0,n.css)({position:"relative",display:"flex",gap:x.spacing.x1,justifyContent:"space-between",width:"100%"})}}var y=e(78518),D=e(85762);class C extends g.wx{constructor(L){super(L),this.onNewMetricsTrail=()=>{const S=P(this),U=(0,D.Xk)();(0,y.Y)().setRecentTrail(U),S.goToUrlForTrail(U)},this.onSelectTrail=S=>{const U=P(this);(0,y.Y)().setRecentTrail(S),U.goToUrlForTrail(S)}}}C.Component=({model:x})=>{const[L,S]=(0,a.useState)(Date.now()),U=(0,u.wW)(b),N=w=>{(0,y.Y)().removeBookmark(w),S(Date.now())};return a.createElement("div",{className:U.container},a.createElement(l.K,{direction:"column",gap:1},a.createElement(f.x,{variant:"h2"},"Data trails"),a.createElement(f.x,{color:"secondary"},"Automatically query, explore and navigate your observability data")),a.createElement(l.K,{gap:2},a.createElement(d.zx,{icon:"plus",size:"lg",variant:"secondary",onClick:x.onNewMetricsTrail},"New metric trail")),a.createElement(l.K,{gap:4},a.createElement("div",{className:U.column},a.createElement(f.x,{variant:"h4"},"Recent trails"),a.createElement("div",{className:U.trailList},(0,y.Y)().recent.map((w,G)=>{const _=w.resolve();return a.createElement(E,{key:(_.state.key||"")+G,trail:_,onSelect:x.onSelectTrail})}))),a.createElement("div",{className:U.column},a.createElement(f.x,{variant:"h4"},"Bookmarks"),a.createElement("div",{className:U.trailList},(0,y.Y)().bookmarks.map((w,G)=>{const _=w.resolve();return a.createElement(E,{key:(_.state.key||"")+G,trail:_,onSelect:x.onSelectTrail,onDelete:()=>N(G)})})))))};function P(x){return g.ep.getAncestor(x,T)}function b(x){return{container:(0,n.css)({padding:x.spacing(2),flexGrow:1,display:"flex",flexDirection:"column",gap:x.spacing(3)}),column:(0,n.css)({width:500,display:"flex",flexDirection:"column",gap:x.spacing(2)}),newTrail:(0,n.css)({height:"auto",justifyContent:"center",fontSize:x.typography.h5.fontSize}),trailCard:(0,n.css)({}),trailList:(0,n.css)({display:"flex",flexDirection:"column",gap:x.spacing(2)})}}class T extends g.wx{constructor(L){super(L)}goToUrlForTrail(L){this.setState({trail:L}),o.E1.push((0,D.Ho)(L))}}T.Component=({model:x})=>{const{trail:L,home:S}=x.useState(),U=(0,u.wW)(M);return a.createElement(i.rs,null,a.createElement(i.AW,{exact:!0,path:"/data-trails",render:()=>a.createElement(c.T,{navId:"data-trails",layout:r.Q.Custom},a.createElement("div",{className:U.customPage},a.createElement(S.Component,{model:S})))}),a.createElement(i.AW,{exact:!0,path:"/data-trails/trail",render:()=>a.createElement(c.T,{navId:"data-trails",pageNav:{text:"Trail"},layout:r.Q.Custom},a.createElement("div",{className:U.customPage},a.createElement(O,{trail:L})))}))};function O({trail:x}){const[L,S]=a.useState(!1);return(0,a.useEffect)(()=>{L||((0,g.oo)().initSync(x),(0,y.Y)().setRecentTrail(x),S(!0))},[x,L]),L?a.createElement(x.Component,{model:x}):null}let R;function I(){return R||(R=new T({trail:(0,D.Xk)(),home:new C({})})),R}function M(x){return{customPage:(0,n.css)({padding:x.spacing(2,3,2,3),background:x.isLight?x.colors.background.primary:x.colors.background.canvas,flexGrow:1,display:"flex",flexDirection:"column"})}}},34384:(Q,A,e)=>{"use strict";e.d(A,{u:()=>_});var n=e(31733),a=e(77121),i=e(68833),r=e(37739),o=e(73351),g=e(49311),u=e(69702),c=e(76932),l=e(96856),d=e(76067),f=e(85765),m=e(54431),v=e(85762);class E extends a.wx{constructor(ne){super(ne),this.onChangeQuery=se=>{const re=this.state.autoQuery.variants.find(ge=>ge.variant===se);this.setState({panel:this.getVizPanelFor(re),queryDef:re})},ne.panel||this.setState({panel:this.getVizPanelFor(ne.autoQuery.main),queryDef:ne.autoQuery.main})}getQuerySelector(ne){const se=this.state.autoQuery.variants;if(se.length===0)return;const re=se.map(ge=>({label:ge.variant,value:ge.variant}));return n.createElement(l.S,{size:"sm",options:re,value:ne.variant,onChange:this.onChangeQuery})}getVizPanelFor(ne){return ne.vizBuilder(ne).setData(new a.uq({datasource:m.mF,maxDataPoints:500,queries:ne.queries})).setHeaderActions(this.getQuerySelector(ne)).build()}}E.Component=({model:Y})=>{const{panel:ne,queryDef:se}=Y.useState(),{showQuery:re}=(0,v.Vy)(Y).useState(),ge=(0,d.wW)(p);if(ne)return re?n.createElement("div",{className:ge.wrapper},n.createElement(r.K,{gap:2},n.createElement(f.g,{label:"Query"},n.createElement("div",null,se&&se.queries.map((q,me)=>n.createElement("div",{key:me},q.expr))))),n.createElement("div",{className:ge.panel},n.createElement(ne.Component,{model:ne}))):n.createElement(ne.Component,{model:ne})};function p(Y){return{wrapper:(0,c.css)({display:"flex",flexDirection:"column",flexGrow:1}),panel:(0,c.css)({position:"relative",flexGrow:1})}}var h=e(51343),s=e(46769);class y extends a.wx{constructor(){super(...arguments),this.onClick=()=>{const ne=a.ep.lookupVariable("filters",this);if(!(ne instanceof a.HL))return;const se=this.state.frame.fields[1]?.labels??{};if(Object.keys(se).length!==1)return;(0,v.eD)(this).setActionView(void 0);const ge=Object.keys(se)[0];ne.state.set.setState({filters:[...ne.state.set.state.filters,{key:ge,operator:"=",value:se[ge]}]})}}}y.Component=({model:Y})=>n.createElement(h.zx,{variant:"primary",size:"sm",fill:"text",onClick:Y.onClick},"Add to filters");var D=e(20298);class C extends a.wx{constructor(ne){super(ne),this.addActivationHandler(()=>{const se=a.ep.getData(this);this._subs.add(se.subscribeToState(re=>{re.data?.state===D.Gu.Done&&this.performRepeat(re.data)})),se.state.data&&this.performRepeat(se.state.data)})}performRepeat(ne){const se=[];for(let re=0;re<ne.series.length;re++){const ge=this.state.getLayoutChild(ne,ne.series[re],re);se.push(ge)}this.state.body.setState({children:se})}}C.Component=({model:Y})=>{const{body:ne}=Y.useState();return n.createElement(ne.Component,{model:ne})};class P extends a.wx{constructor(){super(...arguments),this.onLayoutChange=ne=>{this.setState({active:ne})}}Selector({model:ne}){const{active:se,options:re}=ne.useState();return n.createElement(f.g,{label:"View"},n.createElement(l.S,{options:re,value:se,onChange:ne.onLayoutChange}))}}P.Component=({model:Y})=>{const{layouts:ne,options:se,active:re}=Y.useState(),ge=se.findIndex(me=>me.value===re);if(ge===-1)return null;const q=ne[ge];return n.createElement(q.Component,{model:q})};class b extends a.wx{constructor(ne){super({$variables:ne.$variables??I(),labels:ne.labels??[],...ne}),this.onChange=se=>{const re=this.getVariable();se===s.r2?this.setState({body:O(this.getLabelOptions(re),this._query)}):re.hasAllValue()&&this.setState({body:M(this._query)}),re.changeValueTo(se)},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const ne=this.getVariable();ne.subscribeToState((re,ge)=>{(re.options!==ge.options||re.value!==ge.value||re.loading!==ge.loading)&&this.updateBody(ne)});const se=a.ep.getAncestor(this,_).state.metric;this._query=(0,u.$)(se).breakdown,this.updateBody(ne)}getVariable(){const ne=a.ep.lookupVariable(m.lF,this);if(!(ne instanceof a.$1))throw new Error("Group by variable not found");return ne}updateBody(ne){const se=this.getLabelOptions(ne),re={loading:ne.state.loading,value:String(ne.state.value),labels:se};!this.state.body&&!ne.state.loading&&(re.body=ne.hasAllValue()?O(se,this._query):M(this._query)),this.setState(re)}getLabelOptions(ne){const se=a.ep.lookupVariable(m.Xu,this),re=[];if(!(se instanceof a.HL))return[];const ge=se.state.set.state.filters;for(const q of ne.getOptionsForSelect())ge.find(oe=>oe.key===q.value)||re.push({label:q.label,value:String(q.value)});return re}}b.Component=({model:Y})=>{const{labels:ne,body:se,loading:re,value:ge}=Y.useState(),q=(0,d.wW)(T);return n.createElement("div",{className:q.container},re&&n.createElement("div",null,"Loading..."),n.createElement("div",{className:q.controls},n.createElement(f.g,{label:"By label"},n.createElement(l.S,{options:ne,value:ge,onChange:Y.onChange})),se instanceof P&&n.createElement("div",{className:q.controlsRight},n.createElement(se.Selector,{model:se}))),n.createElement("div",{className:q.content},se&&n.createElement(se.Component,{model:se})))};function T(Y){return{container:(0,c.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,c.css)({flexGrow:1,display:"flex",paddingTop:Y.spacing(0)}),tabHeading:(0,c.css)({paddingRight:Y.spacing(2),fontWeight:Y.typography.fontWeightMedium}),controls:(0,c.css)({flexGrow:0,display:"flex",alignItems:"top",gap:Y.spacing(2)}),controlsRight:(0,c.css)({flexGrow:1,display:"flex",justifyContent:"flex-end"})}}function O(Y,ne){const se=[];for(const re of Y){if(re.value===s.r2)continue;const ge=ne.queries[0].expr.replace(m.OP,String(re.value));se.push(new a.AG({body:a.wX.timeseries().setTitle(re.label).setUnit(ne.unit).setData(new a.uq({maxDataPoints:300,datasource:m.mF,queries:[{refId:"A",expr:ge,legendFormat:`{{${re.label}}}`}]})).setHeaderActions(new S({labelName:String(re.value)})).build()}))}return new P({options:[{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new a.PT({templateColumns:R,autoRows:"200px",children:se}),new a.PT({templateColumns:"1fr",autoRows:"200px",children:se})]})}const R="repeat(auto-fit, minmax(400px, 1fr))";function I(){return new a.hT({variables:[new a.$1({name:m.lF,label:"Group by",datasource:m.mF,includeAll:!0,defaultToAll:!0,query:{query:`label_names(${m.y7})`,refId:"A"},value:"",text:""})]})}function M(Y){return new P({$data:new a.uq({datasource:m.mF,maxDataPoints:300,queries:Y.queries}),options:[{value:"single",label:"Single"},{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new a.QY({direction:"column",children:[new a.fy({minHeight:300,body:a.wX.timeseries().setTitle("$metric").build()})]}),new C({body:new a.PT({templateColumns:R,autoRows:"200px",children:[]}),getLayoutChild:(ne,se,re)=>new a.AG({body:Y.vizBuilder(Y).setTitle(x(se)).setData(new a.Yt({data:{...ne,series:[se]}})).setColor({mode:"fixed",fixedColor:(0,v.Eu)(re)}).setHeaderActions(new y({frame:se})).build()})}),new C({body:new a.PT({templateColumns:"1fr",autoRows:"200px",children:[]}),getLayoutChild:(ne,se,re)=>new a.AG({body:Y.vizBuilder(Y).setTitle(x(se)).setData(new a.Yt({data:{...ne,series:[se]}})).setColor({mode:"fixed",fixedColor:(0,v.Eu)(re)}).setHeaderActions(new y({frame:se})).build()})})]})}function x(Y){const ne=Y.fields[1]?.labels;if(!ne)return"No labels";const se=Object.keys(ne);return se.length===0?"No labels":ne[se[0]]}function L(){return new a.fy({body:new b({})})}class S extends a.wx{constructor(){super(...arguments),this.onClick=()=>{U(this).onChange(this.state.labelName)}}}S.Component=({model:Y})=>n.createElement(h.zx,{variant:"primary",size:"sm",fill:"text",onClick:Y.onClick},"Select");function U(Y){if(Y instanceof b)return Y;if(Y.parent)return U(Y.parent);throw new Error("Unable to find breakdown scene")}var N=e(94147),w=e(10813),G=e(78518);class _ extends a.wx{constructor(ne){super({$variables:ne.$variables??(0,m.Ut)(ne.metric),body:ne.body??Z(ne.metric),...ne}),this._urlSync=new a.oU(this,{keys:["actionView"]})}getUrlState(){return{actionView:this.state.actionView}}updateFromUrl(ne){if(typeof ne.actionView=="string"){if(this.state.actionView!==ne.actionView){const se=K.find(re=>re.value===ne.actionView);se&&this.setActionView(se)}}else ne.actionView===null&&this.setActionView(void 0)}setActionView(ne){const{body:se}=this.state;ne&&ne.value!==this.state.actionView?(se.state.children[0].setState({maxHeight:z}),se.setState({children:[...se.state.children.slice(0,2),ne.getScene()]}),this.setState({actionView:ne.value})):(se.state.children[0].setState({maxHeight:W}),se.setState({children:se.state.children.slice(0,2)}),this.setState({actionView:void 0}))}}_.Component=({model:Y})=>{const{body:ne}=Y.useState();return n.createElement(ne.Component,{model:ne})};const K=[{displayName:"Breakdown",value:"breakdown",getScene:L},{displayName:"Logs",value:"logs",getScene:H},{displayName:"Related metrics",value:"related",getScene:X}];class k extends a.wx{constructor(){super(...arguments),this.onOpenTrail=()=>{this.publishEvent(new m.od,!0)}}getButtonVariant(ne,se){return se===ne?"active":"canvas"}}k.Component=({model:Y})=>{const ne=a.ep.getAncestor(Y,_),se=(0,v.wZ)(Y),[re,ge]=(0,n.useState)(!1),{actionView:q}=ne.useState(),me=()=>{(0,G.Y)().addBookmark(se),ge(!re)};return n.createElement(i.x,{paddingY:1},n.createElement(r.K,{gap:2},K.map(oe=>n.createElement(o.h,{key:oe.value,variant:oe.value===q?"active":"canvas",onClick:()=>ne.setActionView(oe)},oe.displayName)),n.createElement(o.h,{variant:"canvas"},"Add to dashboard"),n.createElement(o.h,{variant:"canvas",icon:"compass",tooltip:"Open in explore (todo)",disabled:!0}),n.createElement(o.h,{variant:"canvas",icon:re?n.createElement(g.J,{name:"favorite",type:"mono",size:"lg"}):n.createElement(g.J,{name:"star",type:"default",size:"lg"}),tooltip:"Bookmark",onClick:me}),n.createElement(o.h,{variant:"canvas",icon:"share-alt",tooltip:"Copy url (todo)",disabled:!0}),se.state.embedded&&n.createElement(o.h,{variant:"canvas",onClick:Y.onOpenTrail},"Open")))};const z=280,W="40%";function Z(Y){const ne=(0,u.$)(Y);return new a.QY({direction:"column",children:[new a.fy({minHeight:z,maxHeight:W,body:new E({autoQuery:ne})}),new a.fy({ySizing:"content",body:new k({})})]})}function H(){return new a.fy({$data:new a.uq({queries:[{refId:"A",datasource:{uid:"gdev-loki"},expr:"{${filters}} | logfmt"}]}),body:a.wX.logs().setTitle("Logs").setHeaderActions(new w.O({metric:m.vd,title:"Open"})).build()})}function X(){return new a.fy({body:new N.p({})})}},94147:(Q,A,e)=>{"use strict";e.d(A,{p:()=>D});var n=e(76932),a=e(87317),i=e(31733),r=e(77121),o=e(7205),g=e(76067),u=e(36717),c=e(64516),l=e(76772),d=e(69702),f=e(10813),m=e(20298),v=e(85666);function E(R){return I=>{const M=r.ep.getData(I);M&&M.subscribeToState(x=>{if(x.data?.state===m.Gu.Loading)return;const L=r.ep.getAncestor(I,D);if(!x.data?.series.length){L.updateMetricPanel(R,!0,!0);return}let S=!1;for(const U of x.data.series){for(const N of U.fields)if(N.type===v.fS.number&&(S=N.values.some(w=>w!=null&&!isNaN(w)&&w!==0),S))break;if(S)break}L.updateMetricPanel(R,!0,!S)})}}var p=e(54431),h=e(85762);const s="175px",y="64px";class D extends r.wx{constructor(I){super({$variables:I.$variables??C(),body:I.body??new r.PT({children:[],templateColumns:"repeat(auto-fill, minmax(450px, 1fr))",autoRows:s,isLazy:!0}),showPreviews:!0,...I}),this.previewCache={},this._variableDependency=new r.JY(this,{variableNames:[p.js],onVariableUpdatesCompleted:this._onVariableChanged.bind(this)}),this.ignoreNextUpdate=!1,this.updateMetricPanel=(M,x,L)=>{const S=this.previewCache[M];S&&(S.isEmpty=L,S.loaded=x,this.previewCache[M]=S,this.buildLayout())},this.onSearchChange=M=>{this.setState({searchQuery:M.currentTarget.value}),this.updateMetrics(),this.buildLayout()},this.onTogglePreviews=()=>{this.setState({showPreviews:!this.state.showPreviews}),this.buildLayout()},this.addActivationHandler(this._onActivate.bind(this))}_onVariableChanged(I,M){M&&(this.updateMetrics(),this.buildLayout())}_onActivate(){this.state.body.state.children.length===0?this.buildLayout():this.ignoreNextUpdate=!0}sortedPreviewMetrics(){return Object.values(this.previewCache).sort((I,M)=>I.isEmpty&&M.isEmpty?I.index-M.index:I.isEmpty?1:M.isEmpty?-1:I.index-M.index)}updateMetrics(){const I=(0,h.wZ)(this),M=r.ep.lookupVariable(p.js,this);if(!(M instanceof r.$1)||M.state.loading)return;const x=new RegExp(this.state.searchQuery??".*"),L=M.state.options,S=I.state.metric!==void 0?T(L,I.state.metric):L,U={},N=120;for(let w=0;w<S.length;w++){const G=S[w],_=String(G.value);if(_.match(x)){if(Object.keys(U).length>N)break;U[_]={name:_,index:w,loaded:!1}}}this.previewCache=U}buildLayout(){if(this.ignoreNextUpdate){this.ignoreNextUpdate=!1;return}const I=r.ep.lookupVariable(p.js,this);if(!(I instanceof r.$1)||I.state.loading)return;Object.keys(this.previewCache).length||this.updateMetrics();const M=[],x=this.sortedPreviewMetrics();for(let S=0;S<x.length;S++){const U=x[S];if(U.itemRef&&U.isPanel){M.push(U.itemRef.resolve());continue}if(this.state.showPreviews){const N=P(U.name,S);U.itemRef=N.getRef(),U.isPanel=!0,M.push(N)}else{const N=new r.AG({$variables:(0,p.Ut)(U.name),body:b(U.name)});U.itemRef=N.getRef(),U.isPanel=!1,M.push(N)}}const L=this.state.showPreviews?s:y;this.state.body.setState({children:M,autoRows:L})}}D.Component=({model:R})=>{const{showHeading:I,searchQuery:M,showPreviews:x}=R.useState(),L=(0,g.wW)(O);return i.createElement("div",{className:L.container},I&&i.createElement("div",{className:L.headingWrapper},i.createElement(u.x,{variant:"h4"},"Select a metric")),i.createElement("div",{className:L.header},i.createElement(c.I,{placeholder:"Search metrics",value:M,onChange:R.onSearchChange}),i.createElement(l.x,{showLabel:!0,label:"Show previews",value:x,onChange:R.onTogglePreviews})),i.createElement(R.state.body.Component,{model:R.state.body}))};function C(){return new r.hT({variables:[new r.$1({name:p.js,datasource:p.mF,hide:o.bU.hideVariable,includeAll:!0,defaultToAll:!0,skipUrlSync:!0,query:{query:`label_values(${p.uA},__name__)`,refId:"A"}})]})}function P(R,I){const M=(0,d.$)(R),x=M.preview.vizBuilder(M.preview).setColor({mode:"fixed",fixedColor:(0,h.Eu)(I)}).setHeaderActions(new f.O({metric:R,title:"Select"})).build();return new r.AG({$variables:(0,p.Ut)(R),$behaviors:[E(R)],$data:new r.uq({datasource:p.mF,maxDataPoints:200,queries:M.preview.queries}),body:x})}function b(R){return r.wX.text().setTitle(R).setHeaderActions(new f.O({metric:R,title:"Select"})).setOption("content","").build()}function T(R,I){return R.sort((M,x)=>{const L=String(M.value),S=L.split("_"),U=S.slice(0,S.length/2).join("_"),N=String(x.value),w=N.split("_"),G=w.slice(0,w.length/2).join("_");return((0,a.Z)(U,I)||0+((0,a.Z)(L,I)||0))-((0,a.Z)(G,I)||0+((0,a.Z)(N,I)||0))})}function O(R){return{container:(0,n.css)({display:"flex",flexDirection:"column",flexGrow:1}),headingWrapper:(0,n.css)({marginTop:R.spacing(1)}),header:(0,n.css)({flexGrow:0,display:"flex",gap:R.spacing(2),marginBottom:R.spacing(1)})}}},10813:(Q,A,e)=>{"use strict";e.d(A,{O:()=>o});var n=e(31733),a=e(77121),i=e(51343),r=e(54431);class o extends a.wx{constructor(){super(...arguments),this.onClick=()=>{this.publishEvent(new r.J_(this.state.metric),!0)}}}o.Component=({model:g})=>n.createElement(i.zx,{variant:"primary",size:"sm",fill:"text",onClick:g.onClick},g.state.title)},78518:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>l});var n=e(69781),a=e.n(n),i=e(77121),r=e(98355),o=e(54431);const g=20;class u{constructor(){this._recent=[],this._bookmarks=[],this.load(),this._save=(0,n.debounce)(()=>{const f=this._recent.slice(0,g).map(v=>this._serializeTrail(v.resolve()));localStorage.setItem(o.Nk,JSON.stringify(f));const m=this._bookmarks.map(v=>this._serializeTrail(v.resolve()));localStorage.setItem(o.YT,JSON.stringify(m))},1e3)}_loadFromStorage(f){const m=[],v=localStorage.getItem(f);if(v){const E=JSON.parse(v);for(const p of E){const h=this._deserializeTrail(p);m.push(h.getRef())}}return m}_deserializeTrail(f){const m=new r.j({});f.history.map(E=>{this._loadFromUrl(m,E.urlValues);const p=E.parentIndex??m.state.history.state.steps.length-1;m.state.history.setState({currentStep:p}),m.state.history.addTrailStep(m,E.type)});const v=f.currentStep??m.state.history.state.steps.length-1;return m.state.history.setState({currentStep:v}),m}_serializeTrail(f){return{history:f.state.history.state.steps.map(v=>{const E=new r.j(i.vp.cloneSceneObjectState(v.trailState));return{urlValues:(0,i.oo)().getUrlState(E),type:v.type,description:v.description,parentIndex:v.parentIndex}}),currentStep:f.state.history.state.currentStep}}_loadFromUrl(f,m){f.urlSync?.updateFromUrl(m),f.forEachChild(v=>this._loadFromUrl(v,m))}get recent(){return this._recent}load(){this._recent=this._loadFromStorage(o.Nk),this._bookmarks=this._loadFromStorage(o.YT)}setRecentTrail(f){this._recent=this._recent.filter(m=>m!==f.getRef()),this._recent.unshift(f.getRef()),this._save()}get bookmarks(){return this._bookmarks}addBookmark(f){this._bookmarks.unshift(f.getRef()),this._save()}removeBookmark(f){f<this._bookmarks.length&&(this._bookmarks.splice(f,1),this._save())}}let c;function l(){return c||(c=new u),c}},54431:(Q,A,e)=>{"use strict";e.d(A,{CZ:()=>m,J_:()=>C,Nk:()=>s,OP:()=>f,Ut:()=>D,Xu:()=>g,YT:()=>y,bS:()=>v,hl:()=>r,js:()=>o,lF:()=>d,mF:()=>h,od:()=>P,uA:()=>u,vd:()=>E,y7:()=>l});var n=e(63121),a=e(77121),i=e(7205);const r="/data-trails/trail",o="metricNames",g="filters",u="{${filters}}",c="metric",l="${metric}",d="groupby",f="${groupby}",m="ds",v="${ds}",E="$__logs__",p="sqr-metric-viz-query",h={uid:v},s="grafana.trails.recent",y="grafana.trails.bookmarks";function D(b){return new a.hT({variables:[new a.M6({name:c,value:b,hide:i.bU.hideVariable})]})}class C extends n.R{}C.type="metric-selected-event";class P extends n.m{}P.type="open-embedded-trail-event"},85762:(Q,A,e)=>{"use strict";e.d(A,{Eu:()=>v,Ho:()=>d,Vy:()=>c,Xk:()=>l,eD:()=>m,wZ:()=>u});var n=e(91977),a=e(85498),i=e(77121),r=e(98355),o=e(34384),g=e(54431);function u(E){return i.ep.getAncestor(E,r.j)}function c(E){return i.ep.getAncestor(E,r.j).state.settings}function l(){return new r.j({$timeRange:new i.gg({from:"now-1h",to:"now"}),embedded:!1})}function d(E){const p=(0,i.oo)().getUrlState(E);return f(p)}function f(E){return n.Cj.renderUrl(g.hl,E)}function m(E){if(E instanceof o.u)return E;if(E.parent)return m(E.parent);throw console.error("Unable to find graph view for",E),new Error("Unable to find trail")}function v(E){const p=a.config.theme2.visualization;return p.getColorByName(p.palette[E%8])}},66872:(Q,A,e)=>{"use strict";e.d(A,{J:()=>p});var n=e(71199),a=e(39076),i=e(31733),r=e(63908),o=e(61129),g=e(85498),u=e(79106),c=e(96856),l=e(64516),d=e(60738),f=e(20003);const m=[{label:"Size",value:n.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:n.kW.Count,description:"Split the buckets based on count"}],v=[{label:"Split",value:n.kW.Size,description:"Split the buckets based on size"}],E=({value:h,onChange:s,item:y})=>{const[D,C]=(0,i.useState)(!1),P=O=>{C(!(0,f.f6)(O)),s({...h,value:O})},T=(0,o.J)().getVariables().map(O=>({value:O.name,label:O.label||O.name,origin:r.L8.Template}));return i.createElement(u.Lh,null,i.createElement(c.S,{value:h?.mode||n.kW.Size,options:h?.scale?.type===n.wf.Log?v:m,onChange:O=>{s({...h,mode:O})}}),g.config.featureToggles.transformationsVariableSupport?i.createElement(d.X,{invalid:D,error:"Value needs to be an integer or a variable",value:h?.value??"",placeholder:"Auto",onChange:P,suggestions:T}):i.createElement(l.I,{value:h?.value??"",placeholder:"Auto",onChange:O=>{s({...h,value:O.currentTarget.value})}}))};function p(h,s,y,D){s.addCustomEditor({id:"xBuckets",path:`${h}xBuckets`,name:"X Bucket",editor:E,category:D,defaultValue:{mode:n.kW.Size}}),s.addCustomEditor({id:"yBuckets",path:`${h}yBuckets`,name:"Y Bucket",editor:E,category:D,defaultValue:{mode:n.kW.Size}}),s.addCustomEditor({id:"yBuckets-scale",path:`${h}yBuckets.scale`,name:"Y Bucket scale",category:D,editor:a.Y,defaultValue:{type:n.wf.Linear}})}},42882:(Q,A,e)=>{"use strict";e.d(A,{xf:()=>z,Oy:()=>U,qJ:()=>_,d8:()=>G,Cj:()=>K});var n=e(4558),a=e(20447),i=e(56528),r=e(85666),o=e(27957),g=e(86850),u=e(86347),c=e(16528),l=e(48493),d=e(96609),f=e(85498),m=e(71199),v=e(73899);const{abs:E,pow:p}=Math,h=new Map;function s(X,Y,ne,se){let re=[],ge=se.map(v.d);for(let q=Y;q<ne;q++){let me=E(q),oe=(0,v.O)(p(X,q),me);for(let fe=0;fe<se.length;fe++){let ve=se[fe]*oe,pe=(ve>=0&&q>=0?0:me)+(q>=ge[fe]?0:ge[fe]),Me=(0,v.O)(ve,pe);re.push(Me),h.set(Me,pe)}}return re}const y=X=>X%1===0,D=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],C=s(10,-16,0,D),P=s(10,0,16,D),b=P.filter(y),T=C.concat(P),O=C.concat(b),R=1*1e3,I=60*R,M=60*I,x=24*M,L=365*x,S=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,R,2*R,4*R,5*R,10*R,15*R,20*R,30*R,I,2*I,4*I,5*I,10*I,15*I,20*I,30*I,M,2*M,4*M,6*M,8*M,12*M,18*M,x,2*x,3*x,4*x,5*x,6*x,7*x,10*x,15*x,30*x,45*x,60*x,90*x,180*x,L,2*L,3*L,4*L,5*L,6*L,7*L,8*L,9*L,10*L],U={id:a.W.heatmap,name:"Create heatmap",description:"Generate heatmap data from source data.",defaultOptions:{},isApplicable:X=>{const{xField:Y,yField:ne,xs:se,ys:re}=W(X);return Y||ne||!se.length||!re.length?i.s.NotPossible:i.s.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(X,Y)=>ne=>ne.pipe((0,n.U)(se=>{if(f.config.featureToggles.transformationsVariableSupport){const re={...X,xBuckets:{...X.xBuckets},yBuckets:{...X.yBuckets}};return re.xBuckets?.value&&(re.xBuckets.value=Y.interpolate(re.xBuckets.value)),re.yBuckets?.value&&(re.yBuckets.value=Y.interpolate(re.yBuckets.value)),U.transformer(re,Y)(se)}else return U.transformer(X,Y)(se)})),transformer:X=>Y=>{const ne=z(Y,X);return X.keepOriginalData?[ne,...Y]:[ne]}};function N(X){return X==="+Inf"?1/0:X==="-Inf"?-1/0:+(X??0)}function w(X,Y){return N(X)-N(Y)}function G(X){return X?.meta?.custom??{}}function _(X){let Y=!1;for(let ne of X.fields)switch(ne.name){case"y":case"yMin":case"yMax":if(Y)return!1;Y=!0}return Y}function K(X){const Y=X.frame.fields[0],ne=Y.values,se=X.frame.fields.filter((Pe,Ee)=>Pe.type===r.fS.number&&Ee>0),re=ne.length*se.length,ge=new Array(re),q=new Array(re),me=new Array(re),oe=se.map(Pe=>Pe.values.slice());oe.forEach((Pe,Ee)=>{for(let he=0;he<Pe.length;he++)me[oe.length*he+Ee]=Pe[he]});const fe=Array.from({length:se.length},(Pe,Ee)=>Ee);for(let Pe=0,Ee=0,he=0;Pe<re;Ee=++Pe%fe.length)q[Pe]=fe[Ee],Ee===0&&Pe>=fe.length&&he++,ge[Pe]=ne[he];let ve=se[0].labels?.le!=null?"yMax":"y";switch(X.layout){case m.kv.le:ve="yMax";break;case m.kv.ge:ve="yMin";break;case m.kv.unknown:ve="y";break}const pe={yOrdinalDisplay:se.map(Pe=>(0,o.CZ)(Pe,X.frame)),yMatchWithLabel:Object.keys(se[0].labels??{})[0]};if(pe.yMatchWithLabel&&(pe.yOrdinalLabel=se.map(Pe=>Pe.labels?.[pe.yMatchWithLabel]??""),pe.yMatchWithLabel==="le"&&(pe.yMinDisplay="0.0")),X.unit?.length||X.decimals!=null){const Pe=(0,g.Cf)(X.unit??"short");pe.yMinDisplay&&(pe.yMinDisplay=(0,g.zc)(Pe(0,X.decimals))),pe.yOrdinalDisplay=pe.yOrdinalDisplay.map(Ee=>{let he=+Ee;return Number.isNaN(he)?Ee:(0,g.zc)(Pe(he,X.decimals))})}const Me={...se[0].config};return Me.displayNameFromDS&&delete Me.displayNameFromDS,{length:ge.length,refId:X.frame.refId,meta:{type:u.P.HeatmapCells,custom:pe},fields:[{name:Y.type===r.fS.time?"xMax":"x",type:Y.type,values:ge,config:Y.config},{name:ve,type:r.fS.number,values:q,config:{unit:"short"}},{name:X.value?.length?X.value:"Value",type:r.fS.number,values:me,config:Me,display:se[0].display}]}}function k(X){X=X.slice(),X.sort((ne,se)=>w(ne.name,se.name));const Y=X.map(ne=>ne.fields[1].values.slice());return Y.reverse(),Y.forEach((ne,se)=>{if(se<Y.length-1)for(let re=0;re<ne.length;re++)ne[re]-=Y[se+1][re]}),Y.reverse(),X.map((ne,se)=>({...ne,fields:[ne.fields[0],{...ne.fields[1],values:Y[se]}]}))}function z(X,Y){const{xField:ne,yField:se,xs:re,ys:ge}=W(X);if(!ne||!se)throw"no heatmap fields found";if(!re.length||!ge.length)throw"no values found";const q=Y.xBuckets??{},me=Y.yBuckets??{};if(q.scale?.type===m.wf.Log)throw"X axis only supports linear buckets";const oe=Y.yBuckets?.scale??{type:m.wf.Linear},fe=Z(re,ge,{xSorted:(0,d.lP)(re),xTime:ne.type===r.fS.time,xMode:q.mode,xSize:q.mode===m.kW.Size?(0,c.iX)((0,c.RA)(q.value??"")):q.value?+q.value:void 0,yMode:me.mode,ySize:me.value?+me.value:void 0,yLog:oe?.type===m.wf.Log?oe?.log:void 0});return{length:fe.x.length,name:(0,o.CZ)(se),meta:{type:u.P.HeatmapCells},fields:[{name:"xMin",type:ne.type,values:fe.x,config:ne.config},{name:"yMin",type:r.fS.number,values:fe.y,config:{...se.config,custom:{scaleDistribution:oe}}},{name:"Count",type:r.fS.number,values:fe.count,config:{unit:"short"}}]}}function W(X){let Y,ne,se=0;for(let me of X)me.fields.find(fe=>fe.type===r.fS.time)&&(se+=me.length);let re=Array(se),ge=Array(se),q=0;for(let me of X){const oe=me.fields.find(ve=>ve.type===r.fS.time);if(!oe)continue;Y||(Y=oe);const fe=oe.values;for(let ve of me.fields)if(ve!==oe&&ve.type===r.fS.number){const pe=ve.values;for(let Me=0;Me<fe.length;Me++,q++)re[q]=fe[Me],ge[q]=pe[Me];ne||(ne=ve)}}return{xField:Y,yField:ne,xs:re,ys:ge}}function Z(X,Y,ne){let se=X.length,re=ne?.xSorted??!1,ge=ne?.ySorted??!1,q=re?X[0]:1/0,me=ge?Y[0]:1/0,oe=re?X[se-1]:-1/0,fe=ge?Y[se-1]:-1/0,ve=ne?.yLog;for(let Ye=0;Ye<se;Ye++)re||(q=Math.min(q,X[Ye]),oe=Math.max(oe,X[Ye])),ge||(!ve||Y[Ye]>0)&&(me=Math.min(me,Y[Ye]),fe=Math.max(fe,Y[Ye]));let pe=ne?.xSize??0,Me=ne?.ySize??0,Pe=ne?.xMode,Ee=ne?.yMode;if((!Number.isFinite(pe)||pe<=0)&&(Pe=m.kW.Count,pe=20),(!Number.isFinite(Me)||Me<=0)&&(Ee=m.kW.Count,Me=10),Pe===m.kW.Count){let Ye=(oe-q)/Math.max(pe-1,1),Ne=ne?.xTime?S:O,je=Ne.findIndex(ut=>ut>Ye)-1;pe=Ne[Math.max(je,0)]}if(Ee===m.kW.Count){let Ye=(fe-me)/Math.max(Me-1,1),Ne=ne?.yTime?S:O,je=Ne.findIndex(ut=>ut>Ye)-1;Me=Ne[Math.max(je,0)]}let he=ne?.xCeil?Ye=>(0,l.UO)(Ye,pe):Ye=>(0,l.mB)(Ye,pe),Le=ne?.yCeil?Ye=>(0,l.UO)(Ye,Me):Ye=>(0,l.mB)(Ye,Me);if(ve){Me=1/(ne?.ySize??1);let Ye=ve===2?Math.log2:Math.log10;Le=ne?.yCeil?Ne=>(0,l.UO)(Ye(Ne),Me):Ne=>(0,l.mB)(Ye(Ne),Me)}let ke=he(q),ot=he(oe),it=Le(me),ce=Le(fe),le=Math.round((ot-ke)/pe)+1,Re=Math.round((ce-it)/Me)+1,[Ae,Oe,$e]=H(le,Re,ke,pe,it,Me,ve);for(let Ye=0;Ye<se;Ye++){if(ve&&Y[Ye]<=0)continue;const Ne=(he(X[Ye])-ke)/pe,je=(Le(Y[Ye])-it)/Me,ut=Ne*Re+je;$e[ut]++}return{x:Ae,y:Oe,count:$e}}function H(X,Y,ne,se,re,ge,q){const me=X*Y,oe=new Array(me),fe=new Array(me),ve=new Array(me);for(let pe=0,Me=0,Pe=ne;pe<me;Me=++pe%Y)ve[pe]=0,q?fe[pe]=q**(re+Me*ge):fe[pe]=re+Me*ge,Me===0&&pe>=Y&&(Pe+=se),oe[pe]=Pe;return[oe,fe,ve]}},2592:(Q,A,e)=>{"use strict";e.d(A,{O8:()=>n,Un:()=>a,X:()=>i});var n=(o=>(o.ShortcodeFigure="shortcodeFigure",o.UIImage="uiImage",o))(n||{});const a={calculateField:{name:"Add field from calculation",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to add a new field calculated from two other fields. Each transformation allows you to add one new field.

  - **Mode** - Select a mode:
    - **Reduce row** - Apply selected calculation on each row of selected fields independently.
    - **Binary operation** - Apply basic binary operations (for example, sum or multiply) on values in a single row from two selected fields.
    - **Unary operation** - Apply basic unary operations on values in a single row from a selected field. The available operations are:
      - **Absolute value (abs)** - Returns the absolute value of a given expression. It represents its distance from zero as a positive number.
      - **Natural exponential (exp)** - Returns _e_ raised to the power of a given expression.
      - **Natural logarithm (ln)** - Returns the natural logarithm of a given expression.
      - **Floor (floor)** - Returns the largest integer less than or equal to a given expression.
      - **Ceiling (ceil)** - Returns the smallest integer greater than or equal to a given expression.
    - **Cumulative functions** - Apply functions on the current row and all preceding rows.
      - **Total** - Calculates the cumulative total up to and including the current row.
      - **Mean** - Calculates the mean up to and including the current row.
    - **Window functions** - Apply window functions. The window can either be **trailing** or **centered**.
      With a trailing window the current row will be the last row in the window. 
      With a centered window the window will be centered on the current row. 
      For even window sizes, the window will be centered between the current row, and the previous row. 
      - **Mean** - Calculates the moving mean or running average.
      - **Stddev** - Calculates the moving standard deviation.
      - **Variance** - Calculates the moving variance.
    - **Row index** - Insert a field with the row index.
  - **Field name** - Select the names of fields you want to use in the calculation for the new field.
  - **Calculation** - If you select **Reduce row** mode, then the **Calculation** field appears. Click in the field to see a list of calculation choices you can use to create the new field. For information about available calculations, refer to [Calculation types][].
  - **Operation** - If you select **Binary operation** or **Unary operation** mode, then the **Operation** fields appear. These fields allow you to apply basic math operations on values in a single row from selected fields. You can also use numerical values for binary operations.
  - **As percentile** - If you select **Row index** mode, then the **As percentile** switch appears. This switch allows you to transform the row index as a percentage of the total number of rows.
  - **Alias** - (Optional) Enter the name of your new field. If you leave this blank, then the field will be named to match the calculation.
  - **Replace all fields** - (Optional) Select this option if you want to hide all other fields and display only your calculated field in the visualization.
  
  > **Note:** **Cumulative functions** and **Window functions** modes are currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`addFieldFromCalculationStatFunctions\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.

  In the example below, we added two fields together and named them Sum.

  ${r("/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png",o,"A stat visualization including one field called Sum")}
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},concatenate:{name:"Concatenate fields",getHelperDocs:function(){return`
  Use this transformation to combine all fields from all frames into one result.
  
  For example, if you have separate queries retrieving temperature and uptime data (Query A) and air quality index and error information (Query B), applying the concatenate transformation yields a consolidated data frame with all relevant information in one view.

  Consider the following:

  **Query A:**

  | Temp  | Uptime    |
  | ----- | --------- |
  | 15.4  | 1230233   |

  **Query B:**

  | AQI   | Errors |
  | ----- | ------ |
  | 3.2   | 5      |

  After you concatenate the fields, the data frame would be:

  | Temp  | Uptime   | AQI   | Errors |
  | ----- | -------- | ----- | ------ |
  | 15.4  | 1230233  | 3.2   | 5      |

  This transformation simplifies the process of merging data from different sources, providing a comprehensive view for analysis and visualization.
  `}},configFromData:{name:"Config from query results",getHelperDocs:function(){return`
  Use this transformation to select a query and extract standard options, such as **Min**, **Max**, **Unit**, and **Thresholds**, and apply them to other query results. This feature enables dynamic visualization configuration based on the data returned by a specific query.

  #### Options

  - **Config query** - Select the query that returns the data you want to use as configuration.
  - **Apply to** - Select the fields or series to which the configuration should be applied.
  - **Apply to options** - Specify a field type or use a field name regex, depending on your selection in **Apply to**.

  #### Field mapping table

  Below the configuration options, you'll find the field mapping table. This table lists all fields found in the data returned by the config query, along with **Use as** and **Select** options. It provides control over mapping fields to config properties, and for multiple rows, it allows you to choose which value to select.

  #### Example

  Input[0] (From query: A, name: ServerA)

  | Time          | Value |
  | ------------- | ----- |
  | 1626178119127 | 10    |
  | 1626178119129 | 30    |

  Input[1] (From query: B)

  | Time          | Value |
  | ------------- | ----- |
  | 1626178119127 | 100   |
  | 1626178119129 | 100   |

  Output (Same as Input[0] but now with config on the Value field)

  | Time          | Value (config: Max=100) |
  | ------------- | ----------------------- |
  | 1626178119127 | 10                      |
  | 1626178119129 | 30                      |

  Each row in the source data becomes a separate field. Each field now has a maximum configuration option set. Options such as **Min**, **Max**, **Unit**, and **Thresholds** are part of the field configuration. If set, they are used by the visualization instead of any options manually configured in the panel editor options pane.

  #### Value mappings

  You can also transform a query result into value mappings. With this option, every row in the configuration query result defines a single value mapping row. See the following example.

  Config query result:

  | Value | Text   | Color |
  | ----- | ------ | ----- |
  | L     | Low    | blue  |
  | M     | Medium | green |
  | H     | High   | red   |

  In the field mapping specify:

  | Field | Use as                  | Select     |
  | ----- | ----------------------- | ---------- |
  | Value | Value mappings / Value  | All values |
  | Text  | Value mappings / Text   | All values |
  | Color | Value mappings / Ciolor | All values |

  Grafana builds value mappings from your query result and applies them to the real data query results. You should see values being mapped and colored according to the config query results.
  `}},convertFieldType:{name:"Convert field type",getHelperDocs:function(){return`
  Use this transformation to modify the field type of a specified field. 
  
  This transformation has the following options:

  - **Field** - Select from available fields
  - **as** - Select the FieldType to convert to
    - **Numeric** - attempts to make the values numbers
    - **String** - will make the values strings
    - **Time** - attempts to parse the values as time
      - Will show an option to specify a DateFormat as input by a string like yyyy-mm-dd or DD MM YYYY hh:mm:ss
    - **Boolean** - will make the values booleans
    - **Enum** - will make the values enums
      - Will show a table to manage the enums
    - **Other** - attempts to parse the values as JSON

  For example, consider the following query that could be modified by selecting the time field as Time and specifying Date Format as YYYY.

  #### Sample Query

  | Time       | Mark      | Value |
  |------------|-----------|-------|
  | 2017-07-01 | above     | 25    |
  | 2018-08-02 | below     | 22    |
  | 2019-09-02 | below     | 29    |
  | 2020-10-04 | above     | 22    |

  The result:

  #### Transformed Query

  | Time                | Mark      | Value |
  |---------------------|-----------|-------|
  | 2017-01-01 00:00:00 | above     | 25    |
  | 2018-01-01 00:00:00 | below     | 22    |
  | 2019-01-01 00:00:00 | below     | 29    |
  | 2020-01-01 00:00:00 | above     | 22    |

  This transformation allows you to flexibly adapt your data types, ensuring compatibility and consistency in your visualizations.
  `}},extractFields:{name:"Extract fields",getHelperDocs:function(){return`
  Use this transformation to select a source of data and extract content from it in different formats. This transformation has the following fields:

  - **Source** - Select the field for the source of data.
  - **Format** - Choose one of the following:
    - **JSON** - Parse JSON content from the source.
    - **Key+value pairs** - Parse content in the format 'a=b' or 'c:d' from the source.
    - **Auto** - Discover fields automatically.
  - **Replace All Fields** - (Optional) Select this option to hide all other fields and display only your calculated field in the visualization.
  - **Keep Time** - (Optional) Available only if **Replace All Fields** is true. Keeps the time field in the output.

  Consider the following dataset:

  #### Dataset Example

  | Timestamp         | json_data |
  |-------------------|-----------|
  | 1636678740000000000 | {"value": 1} |
  | 1636678680000000000 | {"value": 5} |
  | 1636678620000000000 | {"value": 12} |

  You could prepare the data to be used by a [Time series panel][] with this configuration:

  - Source: json_data
  - Format: JSON
    - Field: value
    - Alias: my_value
  - Replace all fields: true
  - Keep time: true

  This will generate the following output:

  #### Transformed Data

  | Timestamp         | my_value |
  |-------------------|----------|
  | 1636678740000000000 | 1        |
  | 1636678680000000000 | 5        |
  | 1636678620000000000 | 12       |

  This transformation allows you to extract and format data in various ways. You can customize the extraction format based on your specific data needs.
  `},links:[{title:"Time series panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/"}]},fieldLookup:{name:"Lookup fields from resource",getHelperDocs:function(){return`
  Use this transformation to enrich a field value by looking up additional fields from an external source. 
  
 This transformation has the following fields:

  - **Field** - Select a text field from your dataset.
  - **Lookup** - Choose from **Countries**, **USA States**, and **Airports**.

  This transformation currently supports spatial data.

  For example, if you have this data:

  #### Dataset Example

  | Location  | Values |
  |-----------|--------|
  | AL        | 0      |
  | AK        | 10     |
  | Arizona   | 5      |
  | Arkansas  | 1      |
  | Somewhere | 5      |

  With this configuration:

  - Field: location
  - Lookup: USA States

  You'll get the following output:

  #### Transformed Data

  | Location  | ID | Name      | Lng        | Lat        | Values |
  |-----------|----|-----------|------------|------------|--------|
  | AL        | AL | Alabama   | -80.891064 | 12.448457  | 0      |
  | AK        | AK | Arkansas  | -100.891064| 24.448457  | 10     |
  | Arizona   |    |           |            |            | 5      |
  | Arkansas  |    |           |            |            | 1      |
  | Somewhere |    |           |            |            | 5      |

  This transformation lets you augment your data by fetching additional information from external sources, providing a more comprehensive dataset for analysis and visualization.
  `}},filterByRefId:{name:"Filter data by query refId",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to hide one or more queries in panels that have multiple queries.

  Grafana displays the query identification letters in dark gray text. Click a query identifier to toggle filtering. If the query letter is white, then the results are displayed. If the query letter is dark, then the results are hidden.

  > **Note:** This transformation is not available for Graphite because this data source does not support correlating returned data with queries.

  In the example below, the panel has three queries (A, B, C). We removed the B query from the visualization.

  ${r("/static/img/docs/transformations/filter-by-query-stat-example-7-0.png",o,"A stat visualization with results from two queries, A and C")}
  `}},filterByValue:{name:"Filter data by values",getHelperDocs:function(){return`
  Use this transformation to selectively filter data points directly within your visualization. This transformation provides options to include or exclude data based on one or more conditions applied to a selected field.

  This transformation is very useful if your data source does not natively filter by values. You might also use this to narrow values to display if you are using a shared query.

  The available conditions for all fields are:

  - **Regex** - Match a regex expression.
  - **Is Null** - Match if the value is null.
  - **Is Not Null** - Match if the value is not null.
  - **Equal** - Match if the value is equal to the specified value.
  - **Different** - Match if the value is different than the specified value.

  The available conditions for number fields are:

  - **Greater** - Match if the value is greater than the specified value.
  - **Lower** - Match if the value is lower than the specified value.
  - **Greater or equal** - Match if the value is greater or equal.
  - **Lower or equal** - Match if the value is lower or equal.
  - **Range** - Match a range between a specified minimum and maximum, min and max included.

  Consider the following dataset:

  #### Dataset Example

  | Time                | Temperature | Altitude |
  |---------------------|-------------|----------|
  | 2020-07-07 11:34:23 | 32          | 101      |
  | 2020-07-07 11:34:22 | 28          | 125      |
  | 2020-07-07 11:34:21 | 26          | 110      |
  | 2020-07-07 11:34:20 | 23          | 98       |
  | 2020-07-07 10:32:24 | 31          | 95       |
  | 2020-07-07 10:31:22 | 20          | 85       |
  | 2020-07-07 09:30:57 | 19          | 101      |

  If you **Include** the data points that have a temperature below 30\xB0C, the configuration will look as follows:

  - Filter Type: 'Include'
  - Condition: Rows where 'Temperature' matches 'Lower Than' '30'

  And you will get the following result, where only the temperatures below 30\xB0C are included:

  #### Transformed Data

  | Time                | Temperature | Altitude |
  |---------------------|-------------|----------|
  | 2020-07-07 11:34:22 | 28          | 125      |
  | 2020-07-07 11:34:21 | 26          | 110      |
  | 2020-07-07 11:34:20 | 23          | 98       |
  | 2020-07-07 10:31:22 | 20          | 85       |
  | 2020-07-07 09:30:57 | 19          | 101      |

  You can add more than one condition to the filter. For example, you might want to include the data only if the altitude is greater than 100. To do so, add that condition to the following configuration:

  - Filter type: 'Include' rows that 'Match All' conditions
  - Condition 1: Rows where 'Temperature' matches 'Lower' than '30'
  - Condition 2: Rows where 'Altitude' matches 'Greater' than '100'

  When you have more than one condition, you can choose if you want the action (include/exclude) to be applied on rows that **Match all** conditions or **Match any** of the conditions you added.

  In the example above, we chose **Match all** because we wanted to include the rows that have a temperature lower than 30\xB0C *AND* an altitude higher than 100. If we wanted to include the rows that have a temperature lower than 30\xB0C *OR* an altitude higher than 100 instead, then we would select **Match any**. This would include the first row in the original data, which has a temperature of 32\xB0C (does not match the first condition) but an altitude of 101 (which matches the second condition), so it is included.

  Conditions that are invalid or incompletely configured are ignored.

  This versatile data filtering transformation lets you to selectively include or exclude data points based on specific conditions. Customize the criteria to tailor your data presentation to meet your unique analytical needs.
  `}},filterFieldsByName:{name:"Filter fields by name",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to selectively remove parts of your query results. There are three ways to filter field names:
  
  - [Using a regular expression](#use-a-regular-expression)
  - [Manually selecting included fields](#manually-select-included-fields)
  - [Using a dashboard variable](#use-a-dashboard-variable)
  
  #### Use a regular expression
  
  When you filter using a regular expression, field names that match the regular expression are included. 
  
  For example, from the input data:

  | Time                | dev-eu-west | dev-eu-north | prod-eu-west | prod-eu-north |
  | ------------------- | ----------- | ------------ | ------------ | ------------- |
  | 2023-03-04 23:56:23 | 23.5        | 24.5         | 22.2         | 20.2          |
  | 2023-03-04 23:56:23 | 23.6        | 24.4         | 22.1         | 20.1          |
  
  The result from using the regular expression 'prod.*' would be:
  
  | Time                | prod-eu-west | prod-eu-north |
  | ------------------- | ------------ | ------------- |
  | 2023-03-04 23:56:23 | 22.2         | 20.2          |
  | 2023-03-04 23:56:23 | 22.1         | 20.1          |
  
  The regular expression can include an interpolated dashboard variable by using the \${variableName} syntax.
  
  #### Manually select included fields
  
  Click and uncheck the field names to remove them from the result. Fields that are matched by the regular expression are still included, even if they're unchecked.
  
  #### Use a dashboard variable
  
  Enable 'From variable' to let you select a dashboard variable that's used to include fields. By setting up a [dashboard variable][] with multiple choices, the same fields can be displayed across multiple visualizations.

  ${r("/static/img/docs/transformations/filter-name-table-before-7-0.png",o,"A table visualization with time, value, Min, and Max columns")}

  Here's the table after we applied the transformation to remove the Min field.

  ${r("/static/img/docs/transformations/filter-name-table-after-7-0.png",o,"A table visualization with time, value, and Max columns")}

  Here is the same query using a Stat visualization.

  ${r("/static/img/docs/transformations/filter-name-stat-after-7-0.png",o,"A stat visualization with value and Max fields")}

  This transformation provides flexibility in tailoring your query results to focus on the specific fields you need for effective analysis and visualization.
  `}},formatString:{name:"Format string",getHelperDocs:function(){return`
  Use this transformation to customize the output of a string field. This transformation has the following fields:
  
  - **Upper case** - Formats the entire string in uppercase characters.
  - **Lower case** - Formats the entire string in lowercase characters.
  - **Sentence case** - Formats the first character of the string in uppercase.
  - **Title case** - Formats the first character of each word in the string in uppercase.
  - **Pascal case** - Formats the first character of each word in the string in uppercase and doesn't include spaces between words.
  - **Camel case** - Formats the first character of each word in the string in uppercase, except the first word, and doesn't include spaces between words.
  - **Snake case** - Formats all characters in the string in lowercase and uses underscores instead of spaces between words.
  - **Kebab case** - Formats all characters in the string in lowercase and uses dashes instead of spaces between words.
  - **Trim** - Removes all leading and trailing spaces from the string.
  - **Substring** - Returns a substring of the string, using the specified start and end positions.

  This transformation provides a convenient way to standardize and tailor the presentation of string data for better visualization and analysis.

  > **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`formatString\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.`}},formatTime:{name:"Format time",getHelperDocs:function(){return`
  Use this transformation to customize the output of a time field. Output can be formatted using [Moment.js format strings](https://momentjs.com/docs/#/displaying/). For example, if you want to display only the year of a time field, the format string 'YYYY' can be used to show the calendar year (for example, 1999 or 2012).

  **Before Transformation:**

  | Timestamp           | Event          |
  | ------------------- | -------------- |
  | 1636678740000000000 | System Start   |
  | 1636678680000000000 | User Login     |
  | 1636678620000000000 | Data Updated   |

  **After applying 'YYYY-MM-DD HH:mm:ss':**

  | Timestamp           | Event          |
  | ------------------- | -------------- |
  | 2021-11-12 14:25:40 | System Start   |
  | 2021-11-12 14:24:40 | User Login     |
  | 2021-11-12 14:23:40 | Data Updated   |

  This transformation lets you tailor the time representation in your visualizations, providing flexibility and precision in displaying temporal data.

  > **Note:** This transformation is available in Grafana 10.1+ as an alpha feature.
  `}},groupBy:{name:"Group by",getHelperDocs:function(){return`
  Use this transformation to group the data by a specified field (column) value and process calculations on each group. Click to see a list of calculation choices. For information about available calculations, refer to [Calculation types][].

  Here's an example of original data.

  | Time                | Server ID | CPU Temperature | Server Status |
  | ------------------- | --------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
  | 2020-07-07 11:34:20 | server 3  | 62              | OK            |
  | 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
  | 2020-07-07 10:31:22 | server 3  | 55              | OK            |
  | 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
  | 2020-07-07 09:30:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:28:06 | server 1  | 80              | OK            |
  | 2020-07-07 09:25:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:23:07 | server 1  | 86              | OK            |

  This transformation goes in two steps. First you specify one or multiple fields to group the data by. This will group all the same values of those fields together, as if you sorted them. For instance if we group by the Server ID field, then it would group the data this way:

  | Time                | Server ID      | CPU Temperature | Server Status |
  | ------------------- | -------------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | **server 1**   | 80              | Shutdown      |
  | 2020-07-07 09:28:06 | **server 1**   | 80              | OK            |
  | 2020-07-07 09:23:07 | **server 1**   | 86              | OK            |
  | 2020-07-07 10:32:20 | server 2       | 90              | Overload      |
  | 2020-07-07 09:30:05 | server 2       | 88              | OK            |
  | 2020-07-07 09:25:05 | server 2       | 88              | OK            |
  | 2020-07-07 11:34:20 | **_server 3_** | 62              | OK            |
  | 2020-07-07 10:31:22 | **_server 3_** | 55              | OK            |
  | 2020-07-07 09:30:57 | **_server 3_** | 62              | Rebooting     |

  All rows with the same value of Server ID are grouped together.

  After choosing which field you want to group your data by, you can add various calculations on the other fields, and apply the calculation to each group of rows. For instance, we could want to calculate the average CPU temperature for each of those servers. So we can add the _mean_ calculation applied on the CPU Temperature field to get the following:

  | Server ID | CPU Temperature (mean) |
  | --------- | ---------------------- |
  | server 1  | 82                     |
  | server 2  | 88.6                   |
  | server 3  | 59.6                   |

  And we can add more than one calculation. For instance:

  - For field Time, we can calculate the _Last_ value, to know when the last data point was received for each server
  - For field Server Status, we can calculate the _Last_ value to know what is the last state value for each server
  - For field Temperature, we can also calculate the _Last_ value to know what is the latest monitored temperature for each server

  We would then get:

  | Server ID | CPU Temperature (mean) | CPU Temperature (last) | Time (last)         | Server Status (last) |
  | --------- | ---------------------- | ---------------------- | ------------------- | -------------------- |
  | server 1  | 82                     | 80                     | 2020-07-07 11:34:20 | Shutdown             |
  | server 2  | 88.6                   | 90                     | 2020-07-07 10:32:20 | Overload             |
  | server 3  | 59.6                   | 62                     | 2020-07-07 11:34:20 | OK                   |

  This transformation allows you to extract essential information from your time series and present it conveniently.
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},groupingToMatrix:{name:"Grouping to matrix",getHelperDocs:function(){return`
  Use this transformation to combine three fields\u2014which are used as input for the **Column**, **Row**, and **Cell value** fields from the query output\u2014and generate a matrix. The matrix is calculated as follows:

  **Original data**

  | Server ID | CPU Temperature | Server Status |
  | --------- | --------------- | ------------- |
  | server 1  | 82              | OK            |
  | server 2  | 88.6            | OK            |
  | server 3  | 59.6            | Shutdown      |

  We can generate a matrix using the values of 'Server Status' as column names, the 'Server ID' values as row names, and the 'CPU Temperature' as content of each cell. The content of each cell will appear for the existing column ('Server Status') and row combination ('Server ID'). For the rest of the cells, you can select which value to display between: **Null**, **True**, **False**, or **Empty**.

  **Output**

  | Server IDServer Status | OK   | Shutdown |
  | ----------------------- | ---- | -------- |
  | server 1                | 82   |          |
  | server 2                | 88.6 |          |
  | server 3                |      | 59.6     |

  Use this transformation to construct a matrix by specifying fields from your query results. The matrix output reflects the relationships between the unique values in these fields. This helps you present complex relationships in a clear and structured matrix format.
  `}},heatmap:{name:"Create heatmap",getHelperDocs:function(){return`
  Use this transformation to prepare histogram data for visualizing trends over time. Similar to the heatmap visualization, this transformation converts histogram metrics into temporal buckets.

  #### X Bucket

  This setting determines how the x-axis is split into buckets.

  - **Size** - Specify a time interval in the input field. For example, a time range of '1h' creates cells one hour wide on the x-axis.
  - **Count** - For non-time-related series, use this option to define the number of elements in a bucket.

  #### Y Bucket

  This setting determines how the y-axis is split into buckets.

  - **Linear**
  - **Logarithmic** - Choose between log base 2 or log base 10.
  - **Symlog** - Uses a symmetrical logarithmic scale. Choose between log base 2 or log base 10, allowing for negative values.

  Assume you have the following dataset:

  | Timestamp           | Value |
  |-------------------- |-------|
  | 2023-01-01 12:00:00 | 5     |
  | 2023-01-01 12:15:00 | 10    |
  | 2023-01-01 12:30:00 | 15    |
  | 2023-01-01 12:45:00 | 8     |

  - With X Bucket set to 'Size: 15m' and Y Bucket as 'Linear', the histogram organizes values into time intervals of 15 minutes on the x-axis and linearly on the y-axis.
  - For X Bucket as 'Count: 2' and Y Bucket as 'Logarithmic (base 10)', the histogram groups values into buckets of two on the x-axis and use a logarithmic scale on the y-axis.
  `}},histogram:{name:"Histogram",getHelperDocs:function(){return`
  Use this transformation to generate a histogram based on input data, allowing you to visualize the distribution of values.

  - **Bucket size** - The range between the lowest and highest items in a bucket (xMin to xMax).
  - **Bucket offset** - The offset for non-zero-based buckets.
  - **Combine series** - Create a unified histogram using all available series.

  **Original data**

  Series 1:

  | A   | B   | C   |
  | --- | --- | --- |
  | 1   | 3   | 5   |
  | 2   | 4   | 6   |
  | 3   | 5   | 7   |
  | 4   | 6   | 8   |
  | 5   | 7   | 9   |

  Series 2:

  | C   |
  | --- |
  | 5   |
  | 6   |
  | 7   |
  | 8   |
  | 9   |

  **Output**

  | xMin | xMax | A   | B   | C   | C   |
  | ---- | ---- | --- | --- | --- | --- |
  | 1    | 2    | 1   | 0   | 0   | 0   |
  | 2    | 3    | 1   | 0   | 0   | 0   |
  | 3    | 4    | 1   | 1   | 0   | 0   |
  | 4    | 5    | 1   | 1   | 0   | 0   |
  | 5    | 6    | 1   | 1   | 1   | 1   |
  | 6    | 7    | 0   | 1   | 1   | 1   |
  | 7    | 8    | 0   | 1   | 1   | 1   |
  | 8    | 9    | 0   | 0   | 1   | 1   |
  | 9    | 10   | 0   | 0   | 1   | 1   |

  Visualize the distribution of values using the generated histogram, providing insights into the data's spread and density.
  `}},joinByField:{name:"Join by field",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to merge multiple results into a single table, enabling the consolidation of data from different queries.

  This is especially useful for converting multiple time series results into a single wide table with a shared time field.

  #### Inner join

  An inner join merges data from multiple tables where all tables share the same value from the selected field. This type of join excludes data where values do not match in every result.

  Use this transformation to combine the results from multiple queries (combining on a passed join field or the first time column) into one result, and drop rows where a successful join cannot occur.

  In the following example, two queries return table data. It is visualized as two separate tables before applying the inner join transformation.

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |
  | 2020-07-07 11:14:20 | postgre | 345001233 |

  **Query B:**

  | Time                | Server   | Errors |
  | ------------------- | -------- | ------ |
  | 2020-07-07 11:34:20 | server 1 | 15     |
  | 2020-07-07 11:24:20 | server 2 | 5      |
  | 2020-07-07 11:04:20 | server 3 | 10     |

  The result after applying the inner join transformation looks like the following:

  | Time                | Job     | Uptime    | Server   | Errors |
  | ------------------- | ------- | --------- | -------- | ------ |
  | 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
  | 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

  #### Outer join

  An outer join includes all data from an inner join and rows where values do not match in every input. While the inner join joins Query A and Query B on the time field, the outer join includes all rows that don't match on the time field.

  In the following example, two queries return table data. It is visualized as two tables before applying the outer join transformation.

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |
  | 2020-07-07 11:14:20 | postgre | 345001233 |

  **Query B:**

  | Time                | Server   | Errors |
  | ------------------- | -------- | ------ |
  | 2020-07-07 11:34:20 | server 1 | 15     |
  | 2020-07-07 11:24:20 | server 2 | 5      |
  | 2020-07-07 11:04:20 | server 3 | 10     |

  The result after applying the outer join transformation looks like the following:

  | Time                | Job     | Uptime    | Server   | Errors |
  | ------------------- | ------- | --------- | -------- | ------ |
  | 2020-07-07 11:04:20 |         |           | server 3 | 10     |
  | 2020-07-07 11:14:20 | postgre | 345001233 |          |        |
  | 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
  | 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

  In the following example, a template query displays time series data from multiple servers in a table visualization. The results of only one query can be viewed at a time.

  ${r("/static/img/docs/transformations/join-fields-before-7-0.png",o,"A table visualization showing results for one server")}

  I applied a transformation to join the query results using the time field. Now I can run calculations, combine, and organize the results in this new table.

  ${r("/static/img/docs/transformations/join-fields-after-7-0.png",o,"A table visualization showing results for multiple servers")}

  Combine and analyze data from various queries with table joining for a comprehensive view of your information.
  `}},joinByLabels:{name:"Join by labels",getHelperDocs:function(){return`
  Use this transformation to join multiple results into a single table.
  
  This is especially useful for converting multiple time series results into a single wide table with a shared **Label** field.

  - **Join** - Select the label to join by between the labels available or common across all time series.
  - **Value** - The name for the output result.

  #### Example

  ##### Input

  series1{what="Temp", cluster="A", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 1    | 10    |
  | 2    | 200   |

  series2{what="Temp", cluster="B", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 1    | 10    |
  | 2    | 200   |

  series3{what="Speed", cluster="B", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 22   | 22    |
  | 28   | 77    |

  ##### Config

  value: "what"

  ##### Output

  | cluster | job | Temp | Speed |
  | ------- | --- | ---- | ----- |
  | A       | J1  | 10   |       |
  | A       | J1  | 200  |       |
  | B       | J1  | 10   | 22    |
  | B       | J1  | 200  | 77    |

  Combine and organize time series data effectively with this transformation for comprehensive insights.
  `}},labelsToFields:{name:"Labels to fields",getHelperDocs:function(){return`
  Use this transformation to convert time series results with labels or tags into a table, including each label's keys and values in the result. Display labels as either columns or row values for enhanced data visualization.

  Given a query result of two time series:

  - Series 1: labels Server=Server A, Datacenter=EU
  - Series 2: labels Server=Server B, Datacenter=EU

  In "Columns" mode, the result looks like this:

  | Time                | Server   | Datacenter | Value |
  | ------------------- | -------- | ---------- | ----- |
  | 2020-07-07 11:34:20 | Server A | EU         | 1     |
  | 2020-07-07 11:34:20 | Server B | EU         | 2     |

  In "Rows" mode, the result has a table for each series and show each label value like this:

  | label      | value    |
  | ---------- | -------- |
  | Server     | Server A |
  | Datacenter | EU       |

  | label      | value    |
  | ---------- | -------- |
  | Server     | Server B |
  | Datacenter | EU       |

  #### Value field name

  If you selected Server as the **Value field name**, then you would get one field for every value of the Server label.

  | Time                | Datacenter | Server A | Server B |
  | ------------------- | ---------- | -------- | -------- |
  | 2020-07-07 11:34:20 | EU         | 1        | 2        |

  #### Merging behavior

  The labels to fields transformer is internally two separate transformations. The first acts on single series and extracts labels to fields. The second is the [merge](#merge) transformation that joins all the results into a single table. The merge transformation tries to join on all matching fields. This merge step is required and cannot be turned off.

  To illustrate this, here is an example where you have two queries that return time series with no overlapping labels.

  - Series 1: labels Server=ServerA
  - Series 2: labels Datacenter=EU

  This will first result in these two tables:

  | Time                | Server  | Value |
  | ------------------- | ------- | ----- |
  | 2020-07-07 11:34:20 | ServerA | 10    |

  | Time                | Datacenter | Value |
  | ------------------- | ---------- | ----- |
  | 2020-07-07 11:34:20 | EU         | 20    |

  After merge:

  | Time                | Server  | Value | Datacenter |
  | ------------------- | ------- | ----- | ---------- |
  | 2020-07-07 11:34:20 | ServerA | 10    |            |
  | 2020-07-07 11:34:20 |         | 20    | EU         |

  Convert your time series data into a structured table format for a clearer and more organized representation.
  `}},limit:{name:"Limit",getHelperDocs:function(){return`
  Use this transformation to restrict the number of rows displayed, providing a more focused view of your data. This is particularly useful when dealing with large datasets.

  Below is an example illustrating the impact of the **Limit** transformation on a response from a data source:

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  | 2020-07-07 10:31:22 | Temperature | 22    |
  | 2020-07-07 09:30:57 | Humidity    | 33    |
  | 2020-07-07 09:30:05 | Temperature | 19    |

  Here is the result after adding a Limit transformation with a value of '3':

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |

  This transformation helps you tailor the visual presentation of your data to focus on the most relevant information.
  `}},merge:{name:"Merge series/tables",getHelperDocs:function(){return`
  Use this transformation to combine the results from multiple queries into a single result, which is particularly useful when using the table panel visualization. This transformation merges values into the same row if the shared fields contain the same data.
  
  Here's an example illustrating the impact of the **Merge series/tables** transformation on two queries returning table data:

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |

  **Query B:**

  | Time                | Job     | Errors |
  | ------------------- | ------- | ------ |
  | 2020-07-07 11:34:20 | node    | 15     |
  | 2020-07-07 11:24:20 | postgre | 5      |

  Here is the result after applying the Merge transformation.

  | Time                | Job     | Errors | Uptime    |
  | ------------------- | ------- | ------ | --------- |
  | 2020-07-07 11:34:20 | node    | 15     | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 5      | 123001233 |

  This transformation combines values from Query A and Query B into a unified table, enhancing the presentation of data for better insights.
  `},links:[{title:"Table panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/"}]},organize:{name:"Organize fields by name",getHelperDocs:function(){return`
  Use this transformation to provide the flexibility to rename, reorder, or hide fields returned by a single query in your panel. This transformation is applicable only to panels with a single query. If your panel has multiple queries, consider using an "Outer join" transformation or removing extra queries.

  #### Transforming fields
  
  Grafana displays a list of fields returned by the query, allowing you to perform the following actions:
  
  - **Change field order** - Hover over a field, and when your cursor turns into a hand, drag the field to its new position.
  - **Hide or show a field** - Use the eye icon next to the field name to toggle the visibility of a specific field.
  - **Rename fields** - Type a new name in the "Rename <field>" box to customize field names.
  
  #### Example:
  
  ##### Original Query Result
  
  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  
  ##### After Applying Field Overrides
  
  | Time                | Sensor      | Reading |
  | ------------------- | ----------- | ------- |
  | 2020-07-07 11:34:20 | Temperature | 25      |
  | 2020-07-07 11:34:20 | Humidity    | 22      |
  | 2020-07-07 10:32:20 | Humidity    | 29      |

  This transformation lets you to tailor the display of query results, ensuring a clear and insightful representation of your data in Grafana.
  `}},partitionByValues:{name:"Partition by values",getHelperDocs:function(){return`
  Use this transformation to streamline the process of graphing multiple series without the need for multiple queries with different 'WHERE' clauses.
  
  This is particularly useful when dealing with a metrics SQL table, as illustrated below:

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | US     | 1520  |
  | 2022-10-20 12:00:00 | EU     | 2936  |
  | 2022-10-20 01:00:00 | US     | 1327  |
  | 2022-10-20 01:00:00 | EU     | 912   |
  
  With the **Partition by values** transformation, you can issue a single query and split the results by unique values in one or more columns (fields) of your choosing. The following example uses 'Region':

  'SELECT Time, Region, Value FROM metrics WHERE Time > "2022-10-20"'

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | US     | 1520  |
  | 2022-10-20 01:00:00 | US     | 1327  |

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | EU     | 2936  |
  | 2022-10-20 01:00:00 | EU     | 912   |

  This transformation simplifies the process and enhances the flexibility of visualizing multiple series within the same time series visualization.
  `}},prepareTimeSeries:{name:"Prepare time series",getHelperDocs:function(){return`
  Use this transformation to address issues when a data source returns time series data in a format that isn't compatible with the desired visualization. This transformation allows you to convert time series data between wide and long formats, providing flexibility in data frame structures.

  #### Available options
  
  ##### Multi-frame time series
  
  Use this option to transform the time series data frame from the wide format to the long format. This is particularly helpful when your data source delivers time series information in a format that needs to be reshaped for optimal compatibility with your visualization.
  
  **Example: Converting from wide to long format**
  
  | Timestamp           | Value1 | Value2 |
  |---------------------|--------|--------|
  | 2023-01-01 00:00:00 | 10     | 20     |
  | 2023-01-01 01:00:00 | 15     | 25     |
  
  **Transformed to:**
  
  | Timestamp           | Variable | Value |
  |---------------------|----------|-------|
  | 2023-01-01 00:00:00 | Value1   | 10    |
  | 2023-01-01 00:00:00 | Value2   | 20    |
  | 2023-01-01 01:00:00 | Value1   | 15    |
  | 2023-01-01 01:00:00 | Value2   | 25    |
  
  
  ##### Wide time series
  
  Select this option to transform the time series data frame from the long format to the wide format. If your data source returns time series data in a long format and your visualization requires a wide format, this transformation simplifies the process.
  
  **Example: Converting from long to wide format**
  
  | Timestamp           | Variable | Value |
  |---------------------|----------|-------|
  | 2023-01-01 00:00:00 | Value1   | 10    |
  | 2023-01-01 00:00:00 | Value2   | 20    |
  | 2023-01-01 01:00:00 | Value1   | 15    |
  | 2023-01-01 01:00:00 | Value2   | 25    |
  
  **Transformed to:**
  
  | Timestamp           | Value1 | Value2 |
  |---------------------|--------|--------|
  | 2023-01-01 00:00:00 | 10     | 20     |
  | 2023-01-01 01:00:00 | 15     | 25     |

  > **Note:** This transformation is available in Grafana 7.5.10+ and Grafana 8.0.6+.
  `},links:[{title:"Data frames",url:"https://grafana.com/docs/grafana/latest/developers/plugins/introduction-to-plugin-development/data-frames/"}]},reduce:{name:"Reduce",getHelperDocs:function(){return`
  Use this transformation to apply a calculation to each field in the data frame and return a single value. This transformation is particularly useful for consolidating multiple time series data into a more compact, summarized format. Time fields are removed when applying this transformation.

  Consider the input:

  **Query A:**

  | Time                | Temp | Uptime  |
  | ------------------- | ---- | ------- |
  | 2020-07-07 11:34:20 | 12.3 | 256122  |
  | 2020-07-07 11:24:20 | 15.4 | 1230233 |

  **Query B:**

  | Time                | AQI | Errors |
  | ------------------- | --- | ------ |
  | 2020-07-07 11:34:20 | 6.5 | 15     |
  | 2020-07-07 11:24:20 | 3.2 | 5      |

  The reduce transformer has two modes:

  - **Series to rows** - Creates a row for each field and a column for each calculation.
  - **Reduce fields** - Keeps the existing frame structure, but collapses each field into a single value.

  For example, if you used the **First** and **Last** calculation with a **Series to rows** transformation, then
  the result would be:

  | Field  | First  | Last    |
  | ------ | ------ | ------- |
  | Temp   | 12.3   | 15.4    |
  | Uptime | 256122 | 1230233 |
  | AQI    | 6.5    | 3.2     |
  | Errors | 15     | 5       |

  The **Reduce fields** with the **Last** calculation,
  results in two frames, each with one row:

  **Query A:**

  | Temp | Uptime  |
  | ---- | ------- |
  | 15.4 | 1230233 |

  **Query B:**

  | AQI | Errors |
  | --- | ------ |
  | 3.2 | 5      |

  This flexible transformation simplifies the process of consolidating and summarizing data from multiple time series into a more manageable and organized format.
  `}},renameByRegex:{name:"Rename by regex",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to rename parts of the query results using a regular expression and replacement pattern.

  You can specify a regular expression, which is only applied to matches, along with a replacement pattern that support back references. For example, let's imagine you're visualizing CPU usage per host and you want to remove the domain name. You could set the regex to '([^.]+)..+' and the replacement pattern to '$1', 'web-01.example.com' would become 'web-01'.
  
  In the following example, we are stripping the prefix from event types. In the before image, you can see everything is prefixed with 'system.'

  ${r("/static/img/docs/transformations/rename-by-regex-before-7-3.png",o,"A bar chart with long series names")}

  With the transformation applied, you can see we are left with just the remainder of the string.

  ${r("/static/img/docs/transformations/rename-by-regex-after-7-3.png",o,"A bar chart with shortened series names")}

  This transformation lets you to tailor your data to meet your visualization needs, making your dashboards more informative and user-friendly.
  `}},rowsToFields:{name:"Rows to fields",getHelperDocs:function(){return`
  Use this transformation to convert rows into separate fields. This can be useful because fields can be styled and configured individually. It can also use additional fields as sources for dynamic field configuration or map them to field labels. The additional labels can then be used to define better display names for the resulting fields.

  This transformation includes a field table which lists all fields in the data returned by the configuration query. This table gives you control over what field should be mapped to each configuration property (the **Use as** option). You can also choose which value to select if there are multiple rows in the returned data.

  This transformation requires:

  - One field to use as the source of field names.

    By default, the transform uses the first string field as the source. You can override this default setting by selecting **Field name** in the **Use as** column for the field you want to use instead.

  - One field to use as the source of values.

    By default, the transform uses the first number field as the source. But you can override this default setting by selecting **Field value** in the **Use as** column for the field you want to use instead.

  Useful when visualizing data in:

  - Gauge
  - Stat
  - Pie chart

  #### Map extra fields to labels

  If a field does not map to config property Grafana will automatically use it as source for a label on the output field-

  **Example:**

  | Name    | DataCenter | Value |
  | ------- | ---------- | ----- |
  | ServerA | US         | 100   |
  | ServerB | EU         | 200   |

  **Output:**

  | ServerA (labels: DataCenter: US) | ServerB (labels: DataCenter: EU) |
  | -------------------------------- | -------------------------------- |
  | 10                               | 20                               |

  The extra labels can now be used in the field display name provide more complete field names.

  If you want to extract config from one query and apply it to another you should use the config from query results transformation.

  #### Example

  **Input:**

  | Name    | Value | Max |
  | ------- | ----- | --- |
  | ServerA | 10    | 100 |
  | ServerB | 20    | 200 |
  | ServerC | 30    | 300 |

  **Output:**

  | ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
  | ------------------------- | ------------------------- | ------------------------- |
  | 10                        | 20                        | 30                        |

  As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.

  This transformation enables the conversion of rows into individual fields, facilitates dynamic field configuration, and maps additional fields to labels.
  `}},seriesToRows:{name:"Series to rows",getHelperDocs:function(){return`
  Use this transformation to combine the result from multiple time series data queries into one single result. This is helpful when using the table panel visualization.

  The result from this transformation will contain three columns: Time, Metric, and Value. The Metric column is added so you easily can see from which query the metric originates from. Customize this value by defining Label on the source query.

  In the example below, we have two queries returning time series data. It is visualized as two separate tables before applying the transformation.

  **Query A:**

  | Time                | Temperature |
  | ------------------- | ----------- |
  | 2020-07-07 11:34:20 | 25          |
  | 2020-07-07 10:31:22 | 22          |
  | 2020-07-07 09:30:05 | 19          |

  **Query B:**

  | Time                | Humidity |
  | ------------------- | -------- |
  | 2020-07-07 11:34:20 | 24       |
  | 2020-07-07 10:32:20 | 29       |
  | 2020-07-07 09:30:57 | 33       |

  Here is the result after applying the Series to rows transformation.

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  | 2020-07-07 10:31:22 | Temperature | 22    |
  | 2020-07-07 09:30:57 | Humidity    | 33    |
  | 2020-07-07 09:30:05 | Temperature | 19    |

  This transformation facilitates the consolidation of results from multiple time series queries, providing a streamlined and unified dataset for efficient analysis and visualization in a tabular format.

  > **Note:** This transformation is available in Grafana 7.1+.
  `}},sortBy:{name:"Sort by",getHelperDocs:function(){return`
  Use this transformation to sort each frame within a query result based on a specified field, making your data easier to understand and analyze. By configuring the desired field for sorting, you can control the order in which the data is presented in the table or visualization.

  Use the **Reverse** switch to inversely order the values within the specified field. This functionality is particularly useful when you want to quickly toggle between ascending and descending order to suit your analytical needs.
  
  For example, in a scenario where time-series data is retrieved from a data source, the **Sort by** transformation can be applied to arrange the data frames based on the timestamp, either in ascending or descending order, depending on the analytical requirements. This capability ensures that you can easily navigate and interpret time-series data, gaining valuable insights from the organized and visually coherent presentation.
  `}},spatial:{name:"Spatial",getHelperDocs:function(){return`
  Use this transformation to apply spatial operations to query results.
  
  - **Action** - Select an action:
    - **Prepare spatial field** - Set a geometry field based on the results of other fields.
      - **Location mode** - Select a location mode (these options are shared by the **Calculate value** and **Transform** modes):
        - **Auto** - Automatically identify location data based on default field names.
        - **Coords** - Specify latitude and longitude fields.
        - **Geohash** - Specify a geohash field.
        - **Lookup** - Specify Gazetteer location fields.
    - **Calculate value** - Use the geometry to define a new field (heading/distance/area).
      - **Function** - Choose a mathematical operation to apply to the geometry:
        - **Heading** - Calculate the heading (direction) between two points.
        - **Area** - Calculate the area enclosed by a polygon defined by the geometry.
        - **Distance** - Calculate the distance between two points.
    - **Transform** - Apply spatial operations to the geometry.
      - **Operation** - Choose an operation to apply to the geometry:
        - **As line** - Create a single line feature with a vertex at each row.
        - **Line builder** - Create a line between two points.
  
  This transformation allows you to manipulate and analyze geospatial data, enabling operations such as creating lines between points, calculating spatial properties, and more.
  `}},timeSeriesTable:{name:"Time series to table transform",getHelperDocs:function(){return`
  Use this transformation to convert time series results into a table, transforming a time series data frame into a **Trend** field. The **Trend** field can then be rendered using the [sparkline cell type][], generating an inline sparkline for each table row. If there are multiple time series queries, each will result in a separate table data frame. These can be joined using join or merge transforms to produce a single table with multiple sparklines per row.

  For each generated **Trend** field value, a calculation function can be selected. The default is **Last non-null value**. This value is displayed next to the sparkline and used for sorting table rows.

  > **Note:** This transformation is available in Grafana 9.5+ as an opt-in beta feature. Modify the Grafana [configuration file][] to use it.
  `},links:[{title:"sparkline cell type",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#sparkline"},{title:"configuration file",url:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/"}]},regression:{name:"Regression analysis",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to create a new data frame containing values predicted by a statistical model. This is useful for finding a trend in chaotic data. It works by fitting a mathematical function to the data, using either linear or polynomial regression. The data frame can then be used in a visualization to display a trendline.

  There are two different models:

  - **Linear regression** - Fits a linear function to the data.
${r("/static/img/docs/transformations/linear-regression.png",o,"A time series visualization with a straight line representing the linear function")}
  - **Polynomial regression** - Fits a polynomial function to the data.
  ${r("/static/img/docs/transformations/polynomial-regression.png",o,"A time series visualization with a curved line representing the polynomial function")}

  > **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`regressionTransformation\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.
  `}}};function i(){return`
  Go to the <a href="https://grafana.com/docs/grafana/latest/panels/transformations/?utm_source=grafana" target="_blank" rel="noreferrer">
  transformation documentation
  </a> for more general documentation.
  `}function r(o,g,u){return g==="shortcodeFigure"?`{{< figure src="${o}" class="docs-image--no-shadow" max-width= "1100px" alt="${u}" >}}`:`![${u}](https://grafana.com${o})`}},83180:(Q,A,e)=>{"use strict";e.d(A,{Ii:()=>i,JJ:()=>a,ac:()=>r});var n=e(71199),a=(g=>(g.Prepare="prepare",g.Calculate="calculate",g.Modify="modify",g))(a||{}),i=(g=>(g.Heading="heading",g.Distance="distance",g.Area="area",g))(i||{}),r=(g=>(g.AsLine="asLine",g.LineBuilder="lineBuilder",g))(r||{});const o={action:"prepare",source:{mode:n.q1.Auto}}},26229:(Q,A,e)=>{"use strict";e.d(A,{Lb:()=>d,Lp:()=>c,N7:()=>m});var n=e(47750),a=e(32187),i=e(26223),r=e(94268),o=e(85893),g=e(85666),u=e(83180);function c(v){const E=[];for(const p of v.values)p&&E.push(d(p));return new a.Z(E)}function l(v){const E=new Array(v.length);if(v.length>1){let p=f(v[0]);for(let h=1;h<v.length;h++){let s=f(v[h]);if(p&&s){let y=Math.atan2(s[0]-p[0],s[1]-p[1])*180/Math.PI;y<0&&(y+=360),E[h-1]=E[h]=y}}}else E.fill(0);return E}function d(v){return v instanceof i.Z?v.getCoordinates():(0,n.qg)(v.getExtent())}function f(v){if(v)return(0,r.bU)(d(v))}function m(v,E){const p=v.values,h=new Array(v.values.length),s=E.calc??u.Ii.Heading,y=E.field??s;switch(s){case u.Ii.Area:{for(let D=0;D<p.length;D++){const C=p[D];C&&(h[D]=(0,o.bg)(C))}return{name:y,type:g.fS.number,config:{unit:"areaM2"},values:h}}case u.Ii.Distance:{for(let D=0;D<p.length;D++){const C=p[D];C&&(h[D]=(0,o.xA)(C))}return{name:y,type:g.fS.number,config:{unit:"lengthm"},values:h}}case u.Ii.Heading:default:return{name:y,type:g.fS.number,config:{unit:"degree"},values:l(p)}}}},60738:(Q,A,e)=>{"use strict";e.d(A,{X:()=>v});var n=e(76932),a=e(31733),i=e(13076),r=e(76067),o=e(25108),g=e(37758),u=e(65008),c=e(64516),l=e(2284);const d=(p,h)=>p-h*Math.floor(p/h),f=8,m=(p,h)=>({suggestionsWrapper:(0,n.css)({boxShadow:p.shadows.z2}),errorTooltip:(0,n.css)({position:"absolute",top:h+f+"px",zIndex:p.zIndex.tooltip}),inputWrapper:(0,n.css)({position:"relative"})}),v=({value:p="",onChange:h,suggestions:s,placeholder:y,error:D,invalid:C})=>{const[P,b]=(0,a.useState)(!1),[T,O]=(0,a.useState)(0),[R,I]=(0,a.useState)(p.toString()),[M,x]=(0,a.useState)(0),[L,S]=(0,a.useState)(0),[U,N]=(0,a.useState)(0),w=(0,r.l4)(),G=m(w,L),_=(0,a.useRef)(null),K=(0,a.useRef)(null);(0,a.useEffect)(()=>{x(E(K.current,T))},[T]);const k=a.useCallback((H,X=_.current)=>{const Y=X.selectionStart,ne=X.value;ne[U-1]==="$"?X.value=ne.slice(0,U)+H.value+ne.slice(Y):X.value=ne.slice(0,U)+"$"+H.value+ne.slice(Y),I(X.value),b(!1),O(0),h(X.value)},[h,U]),z=a.useCallback(H=>{if(!P){if(H.key==="$"||H.key===" "&&H.ctrlKey){N(_.current.selectionStart||0),b(!0);return}return}switch(H.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return b(!1),O(0);case"Enter":return H.preventDefault(),k(s[T]);case"ArrowDown":case"ArrowUp":H.preventDefault();const X=H.key==="ArrowDown"?1:-1;return O(Y=>d(Y+X,s.length));default:return}},[P,s,T,k]),W=a.useCallback(H=>{I(H.currentTarget.value)},[]),Z=a.useCallback(H=>{h(H.currentTarget.value)},[h]);return(0,a.useEffect)(()=>{S(_.current.clientHeight)},[]),a.createElement("div",{className:G.inputWrapper},P&&a.createElement(o.h_,null,a.createElement(i.r,{referenceElement:_.current,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[0,0]}}]},({ref:H,style:X,placement:Y})=>a.createElement("div",{ref:H,style:X,"data-placement":Y,className:G.suggestionsWrapper},a.createElement(g.$,{scrollTop:M,autoHeightMax:"300px",setScrollTop:({scrollTop:ne})=>x(ne)},a.createElement(l.T,{activeRef:K,suggestions:s,onSuggestionSelect:k,onClose:()=>b(!1),activeIndex:T}))))),C&&D&&a.createElement("div",{className:G.errorTooltip},a.createElement(u.S,null,D)),a.createElement(c.I,{placeholder:y,invalid:C,ref:_,value:R,onChange:W,onBlur:Z,onKeyDown:z}))};v.displayName="SuggestionsInput";function E(p,h){return(p?.clientHeight??0)*h}},20003:(Q,A,e)=>{"use strict";e.d(A,{Hg:()=>o,Vx:()=>u,f6:()=>c,jY:()=>g,rm:()=>l});var n=e(31733),a=e(27957),i=e(10020),r=e(85498);function o(d){return(0,n.useMemo)(()=>Array.isArray(d)?Object.keys(d.reduce((f,m)=>!m||!Array.isArray(m.fields)?f:m.fields.reduce((v,E)=>{const p=(0,a.CZ)(E,m,d);return v[p]=!0,v},f),{})):[],[d])}function g(d){const f=new Set;for(const m of d)for(const v of m.fields)if(v.labels)for(const E of Object.keys(v.labels))f.add(E);return f}const u={combine:"Combine",calculateNewFields:"Calculate new fields",createNewVisualization:"Create new visualization",filter:"Filter",performSpatialOperations:"Perform spatial operations",reformat:"Reformat",reorderAndRename:"Reorder and rename"},c=d=>!!(typeof d=="number"||!Number.isNaN(Number(d))||/^\$[A-Za-z0-9_]+$/.test(d)&&r.config.featureToggles.transformationsVariableSupport);function l(d){const f=[];d&&(f.push({label:"Browser",value:"browser"}),f.push({label:"UTC",value:"utc"}));const m=(0,i.ZV)();for(const v of m)f.push({label:v,value:v});return f}},79850:(Q,A,e)=>{"use strict";e.d(A,{BR:()=>v,Fy:()=>m,PJ:()=>d,UL:()=>f,ZP:()=>p,eT:()=>u,k7:()=>l,tZ:()=>c,w4:()=>o});var n=e(4579),a=e(83811);const i={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:a.default.externalUserMngInfo,externalUserMngLinkName:a.default.externalUserMngLinkName,externalUserMngLinkUrl:a.default.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},r=(0,n.oM)({name:"users",initialState:i,reducers:{usersLoaded:(h,s)=>{const{totalCount:y,perPage:D,page:C,orgUsers:P}=s.payload,b=Math.ceil(y/D);return{...h,isLoading:!0,users:P,perPage:D,page:C,totalPages:b}},searchQueryChanged:(h,s)=>({...h,searchQuery:s.payload,page:i.page}),setUsersSearchPage:(h,s)=>({...h,page:s.payload}),pageChanged:(h,s)=>({...h,page:s.payload}),sortChanged:(h,s)=>({...h,sort:s.payload}),usersFetchBegin:h=>({...h,isLoading:!0}),usersFetchEnd:h=>({...h,isLoading:!1}),rolesFetchBegin:h=>({...h,rolesLoading:!0}),rolesFetchEnd:h=>({...h,rolesLoading:!1})}}),{searchQueryChanged:o,setUsersSearchPage:g,usersLoaded:u,usersFetchBegin:c,usersFetchEnd:l,pageChanged:d,sortChanged:f,rolesFetchBegin:m,rolesFetchEnd:v}=r.actions,p={users:r.reducer}},73731:(Q,A,e)=>{"use strict";e.d(A,{z:()=>a});var n=e(18662);const a=new n.B},97285:(Q,A,e)=>{"use strict";e.d(A,{KJ:()=>h,M6:()=>E,Ue:()=>s,Z$:()=>y,ku:()=>p,m2:()=>v});var n=e(69781),a=e.n(n),i=e(97001),r=e(6832),o=e(36138),g=e(43773),u=e(51099),c=e(99282),l=e(63033),d=e(77378),f=e(30017);const m="Filters",v=P=>async(b,T)=>{let O=C(P,T());if(!O&&(b(D(P)),O=C(P,T()),!O))return;const R=O.filters.findIndex(M=>M.key===P.key&&M.value===P.value);if(R===-1){const{value:M,key:x,operator:L}=P,S={value:M,key:x,operator:L};return await b(h((0,d.yQ)(O),S))}const I={...O.filters[R],operator:P.operator};return await b(E((0,d.yQ)(O),{index:R,filter:I}))},E=(P,b)=>async(T,O)=>{const R=(0,c.E0)(P,O());T((0,u.mb)(P.rootStateKey,(0,f.e_)((0,d.Y6)(R,b)))),await T((0,g.MB)((0,d.yQ)(R),!0))},p=(P,b)=>async(T,O)=>{const R=(0,c.E0)(P,O());T((0,u.mb)(P.rootStateKey,(0,f.DO)((0,d.Y6)(R,b)))),await T((0,g.MB)((0,d.yQ)(R),!0))},h=(P,b)=>async(T,O)=>{const R=(0,c.E0)(P,O());T((0,u.mb)(P.rootStateKey,(0,f.QL)((0,d.Y6)(R,b)))),await T((0,g.MB)((0,d.yQ)(R),!0))},s=(P,b)=>async(T,O)=>{const R=(0,c.E0)(P,O());T((0,u.mb)(P.rootStateKey,(0,f.aM)((0,d.Y6)(R,b)))),await T((0,g.MB)((0,d.yQ)(R),!0))},y=(P,b)=>async(T,O)=>{const R=(0,c.E0)(P,O());T((0,u.mb)(P.rootStateKey,(0,l.Pl)((0,d.Y6)(R,{propName:"datasource",propValue:b}))));const M=(await(0,i.ak)().get(b))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";T((0,u.mb)(P.rootStateKey,(0,r.z7)({infoText:M})))},D=P=>(b,T)=>{const O=(0,c.S_)(T()),R={...(0,n.cloneDeep)(f.Js),datasource:P.datasource,name:m,id:m,rootStateKey:O},I=!1,M=(0,c.Eo)(O,T()),x={type:"adhoc",id:R.id,rootStateKey:O};b((0,u.mb)(O,(0,l.VN)((0,d.Y6)(x,{global:I,model:R,index:M}))))},C=(P,b)=>{const T=(0,c.S_)(b),O=(0,c.AE)(T,b);return Object.values(O.variables).find(R=>(0,o.Kn)(R)&&R.datasource?.uid===P.datasource.uid)}},70666:(Q,A,e)=>{"use strict";e.d(A,{F:()=>b});var n=e(31733),a=e(77932),i=e(53166),r=e(68777),o=e(49311),g=e(97001);const u=90,c=({datasource:T,onChange:O,disabled:R,filterKey:I,allFilters:M})=>{const x=()=>m(T,I,M),L=()=>v(T,I,M);return I===null?n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},n.createElement(r.V,{disabled:R,className:"query-segment-key",Component:f,value:I,onChange:O,loadOptions:x,inputMinWidth:u})):n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},n.createElement(r.V,{disabled:R,className:"query-segment-key",value:I,onChange:O,loadOptions:L,inputMinWidth:u}))},l="-- remove filter --",d={label:l,value:l},f=n.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},n.createElement(o.J,{name:"plus"})),m=async(T,O,R)=>{const I=await(0,g.ak)().get(T);if(!I||!I.getTagKeys)return[];const M=R.filter(L=>L.key!==O);return(await I.getTagKeys({filters:M})).map(L=>({label:L.text,value:L.text}))},v=async(T,O,R)=>{const I=await m(T,O,R);return[d,...I]};var E=e(89660);const p=({datasource:T,disabled:O,onChange:R,filterKey:I,filterValue:M,placeHolder:x,allFilters:L})=>{const S=()=>h(T,I,L);return n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},n.createElement(r.V,{className:"query-segment-value",disabled:O,placeholder:x,value:M,onChange:R,loadOptions:S}))},h=async(T,O,R)=>{const I=await(0,g.ak)().get(T);if(!I||!I.getTagValues)return[];const M=(0,E.$t)().timeRange(),x=R.filter(S=>S.key!==O);return(await I.getTagValues({key:O,filters:x,timeRange:M})).map(S=>({label:S.text,value:S.text}))},s=["=","!=","<",">","=~","!~"].map(T=>({label:T,value:T})),y=({value:T,disabled:O,onChange:R})=>n.createElement(a.X,{className:"query-segment-operator",value:T,disabled:O,options:s,onChange:R}),D=({datasource:T,filter:{key:O,operator:R,value:I},onKeyChange:M,onOperatorChange:x,onValueChange:L,placeHolder:S,allFilters:U,disabled:N})=>n.createElement(n.Fragment,null,n.createElement(c,{disabled:N,datasource:T,filterKey:O,onChange:M,allFilters:U}),n.createElement("div",{className:"gf-form"},n.createElement(y,{disabled:N,value:R,onChange:x})),n.createElement(p,{disabled:N,datasource:T,filterKey:O,filterValue:I,allFilters:U,onChange:L,placeHolder:S})),C=({datasource:T,appendBefore:O,onCompleted:R,allFilters:I})=>{const[M,x]=(0,n.useState)(null),[L,S]=(0,n.useState)("="),U=(0,n.useCallback)(G=>{if(G.value!==l){x(G.value??"");return}x(null)},[x]),N=(0,n.useCallback)(G=>S(G.value??""),[S]),w=(0,n.useCallback)(G=>{R({value:G.value??"",operator:L,key:M}),x(null),S("=")},[R,L,M]);return M===null?n.createElement(c,{datasource:T,filterKey:M,onChange:U,allFilters:I}):n.createElement(n.Fragment,{key:"filter-builder"},O,n.createElement(D,{datasource:T,filter:{key:M,value:"",operator:L},placeHolder:(0,i.t)("variable.adhoc.placeholder","Select value"),onKeyChange:U,onOperatorChange:N,onValueChange:w,allFilters:I}))},P=({label:T})=>n.createElement("div",{className:"gf-form"},n.createElement("span",{className:"gf-form-label query-keyword"},T));class b extends n.PureComponent{constructor(){super(...arguments),this.onChange=(O,R)=>I=>{const{filters:M}=this.props,{value:x}=I;return I.value===l?this.props.removeFilter(O):this.props.changeFilter(O,{...M[O],[R]:x})},this.appendFilterToVariable=O=>{this.props.addFilter(O)}}render(){const{filters:O,disabled:R}=this.props;return n.createElement("div",{className:"gf-form-inline"},this.renderFilters(O,R),!R&&n.createElement(C,{datasource:this.props.datasource,appendBefore:O.length>0?n.createElement(P,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()}))}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(O,R){return O.length===0&&R?n.createElement(a.X,{disabled:R,value:"No filters",options:[],onChange:()=>{}}):O.reduce((I,M,x)=>(I.length>0&&I.push(n.createElement(P,{label:"AND",key:`condition-${x}`})),I.push(this.renderFilterSegments(M,x,R)),I),[])}renderFilterSegments(O,R,I){return n.createElement(n.Fragment,{key:`filter-${R}`},n.createElement(D,{disabled:I,datasource:this.props.datasource,filter:O,onKeyChange:this.onChange(R,"key"),onOperatorChange:this.onChange(R,"operator"),onValueChange:this.onChange(R,"value"),allFilters:this.getAllFilters()}))}}},30017:(Q,A,e)=>{"use strict";e.d(A,{DO:()=>c,Js:()=>o,QL:()=>u,aM:()=>d,e_:()=>l,jo:()=>f});var n=e(4579),a=e(7257),i=e(99282),r=e(3374);const o={...a.Eg,type:"adhoc",datasource:null,filters:[]},g=(0,n.oM)({name:"templating/adhoc",initialState:r.s,reducers:{filterAdded:(m,v)=>{const E=(0,i.ir)(m,v.payload.id);E.type==="adhoc"&&E.filters.push(v.payload.data)},filterRemoved:(m,v)=>{const E=(0,i.ir)(m,v.payload.id);if(E.type!=="adhoc")return;const p=v.payload.data;E.filters.splice(p,1)},filterUpdated:(m,v)=>{const E=(0,i.ir)(m,v.payload.id);if(E.type!=="adhoc")return;const{filter:p,index:h}=v.payload.data;E.filters[h]=p},filtersRestored:(m,v)=>{const E=(0,i.ir)(m,v.payload.id);E.type==="adhoc"&&(E.filters=v.payload.data)}}}),{filterAdded:u,filterRemoved:c,filterUpdated:l,filtersRestored:d}=g.actions,f=g.reducer},46769:(Q,A,e)=>{"use strict";e.d(A,{BH:()=>r,IG:()=>g,QX:()=>o,UY:()=>n,r2:()=>i,xk:()=>a});const n="00000000-0000-0000-0000-000000000000",a="All",i="$__all",r="None",o="",g="var-"},95373:(Q,A,e)=>{"use strict";e.d(A,{R:()=>c,z:()=>u});var n=e(14633),a=e(31733),i=e(21568),r=e(76067),o=e(28718),g=e(58387);const u="Grafana-LegacyVariableQueryEditor",c=({onChange:l,query:d})=>{const f=(0,r.wW)(g.w),[m,v]=(0,a.useState)(d),E=s=>{v(s.currentTarget.value)},p=(0,a.useCallback)(s=>{l(s.currentTarget.value,s.currentTarget.value)},[l]),h=(0,n.Me)();return a.createElement(o.K,{id:h,rows:2,value:m,onChange:E,onBlur:p,placeholder:"Metric name or tags query",required:!0,"aria-label":i.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:f.textarea})};c.displayName=u},66426:(Q,A,e)=>{"use strict";e.d(A,{e:()=>o});var n=e(76932),a=e(31733),i=e(76067),r=e(67683);function o({className:u,...c}){const l=(0,i.wW)(g);return a.createElement(r.D,{...c,className:(0,n.cx)(l.legend,u)})}function g(u){return{legend:(0,n.css)({marginTop:u.spacing(3),marginBottom:u.spacing(1)})}}},13413:(Q,A,e)=>{"use strict";e.d(A,{u:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(85765),o=e(38834);function g({name:c,description:l,value:d,options:f,onChange:m,testId:v,width:E}){const p=(0,i.wW)(u),h=(0,a.useId)(),s=`variable-select-input-${c}-${h}`;return a.createElement(r.g,{label:c,description:l,htmlFor:s},a.createElement("div",{"data-testid":v},a.createElement(o.Ph,{inputId:s,onChange:m,value:d,width:E??30,options:f,className:p.selectContainer})))}function u(c){return{selectContainer:(0,n.css)`
      margin-right: ${c.spacing(.5)};
    `}}},58387:(Q,A,e)=>{"use strict";e.d(A,{W:()=>u,w:()=>c});var n=e(76932),a=e(14633),i=e(31733),r=e(76067),o=e(85765),g=e(28718);function u({value:l,name:d,description:f,placeholder:m,onChange:v,onBlur:E,ariaLabel:p,required:h,width:s,testId:y}){const D=(0,r.wW)(c),C=(0,a.Me)();return i.createElement(o.g,{label:d,description:f,htmlFor:C},i.createElement(g.K,{id:C,rows:2,value:l,onChange:v,onBlur:E,placeholder:m,required:h,"aria-label":p,cols:s,className:D.textarea,"data-testid":y}))}function c(l){return{textarea:(0,n.css)`
      white-space: pre-wrap;
      min-height: ${l.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${l.spacing(.75,1)};
      width: inherit;

      ${l.breakpoints.down("sm")} {
        width: 100%;
      }
    `}}},6998:(Q,A,e)=>{"use strict";e.d(A,{V:()=>o});var n=e(14633),a=e(31733),i=e(85765),r=e(64516);function o({value:g,name:u,placeholder:c="",onChange:l,testId:d,width:f,required:m,onBlur:v,grow:E,description:p,invalid:h,error:s,maxLength:y}){const D=(0,n.Me)(u);return a.createElement(i.g,{label:u,description:p,invalid:h,error:s,htmlFor:D},a.createElement(r.I,{type:"text",id:D,placeholder:c,value:g,onChange:l,onBlur:v,width:E?void 0:f??30,"data-testid":d,maxLength:y,required:m}))}},6832:(Q,A,e)=>{"use strict";e.d(A,{PF:()=>a,PV:()=>f,QR:()=>m,Sg:()=>d,Yo:()=>o,gl:()=>r,qe:()=>c,wJ:()=>u,y8:()=>g,z7:()=>l});var n=e(4579);const a={id:"",isValid:!0,errors:{},name:"",extended:null},i=(0,n.oM)({name:"templating/editor",initialState:a,reducers:{variableEditorMounted:(v,E)=>{v.name=E.payload.name,v.id=E.payload.id},variableEditorUnMounted:(v,E)=>a,changeVariableNameSucceeded:(v,E)=>{v.name=E.payload.data.newName,delete v.errors.name,v.isValid=Object.keys(v.errors).length===0},changeVariableNameFailed:(v,E)=>{v.name=E.payload.newName,v.errors.name=E.payload.errorText,v.isValid=Object.keys(v.errors).length===0},addVariableEditorError:(v,E)=>{v.errors[E.payload.errorProp]=E.payload.errorText,v.isValid=Object.keys(v.errors).length===0},removeVariableEditorError:(v,E)=>{delete v.errors[E.payload.errorProp],v.isValid=Object.keys(v.errors).length===0},changeVariableEditorExtended:(v,E)=>{v.extended={...v.extended,...E.payload}},cleanEditorState:()=>a}}),r=i.reducer,{changeVariableNameSucceeded:o,changeVariableNameFailed:g,variableEditorMounted:u,variableEditorUnMounted:c,changeVariableEditorExtended:l,addVariableEditorError:d,removeVariableEditorError:f,cleanEditorState:m}=i.actions},58655:(Q,A,e)=>{"use strict";e.d(A,{c:()=>r});var n=e(61129),a=e(73731),i=e(46769);function r(o){const g={},u=(0,n.J)().getVariables();for(let c=0;c<u.length;c++){const l=u[c],d=o&&o[l.name];l.skipUrlSync||(d?g[i.IG+l.name]=d.value:g[i.IG+l.name]=a.z.get(l.type).getValueForUrl(l))}return g}},36138:(Q,A,e)=>{"use strict";e.d(A,{$7:()=>p,Ju:()=>f,Kn:()=>r,Kr:()=>c,NX:()=>E,R:()=>d,U4:()=>g,VC:()=>o,X7:()=>v,Xh:()=>i,d7:()=>m,eL:()=>u});var n=e(90927),a=e(95373);const i=h=>h.type==="query",r=h=>h.type==="adhoc",o=h=>h.type==="constant",g=h=>"multi"in h,u=h=>"options"in h,c=h=>"current"in h;function l(h){return h===null?!1:typeof h=="string"}const d=h=>!!h.metricFindQuery&&!h.variables,f=h=>{if(!h.variables||h.variables.getType()!==n.j2.Standard)return!1;const s=h.variables;return"toDataQuery"in s&&!!s.toDataQuery},m=h=>{if(!h.variables||h.variables.getType()!==n.j2.Custom)return!1;const s=h.variables;return"query"in s&&"editor"in s&&!!s.query&&!!s.editor},v=h=>h.variables?h.variables.getType()===n.j2.Datasource:!1;function E(h,s){return h?h.displayName===a.z||d(s):!1}function p(h,s){return h?h.displayName!==a.z&&(v(s)||f(s)||m(s)):!1}},79454:(Q,A,e)=>{"use strict";e.d(A,{Kf:()=>a,iV:()=>r,j4:()=>o});var n=e(4579);const a={usages:[],usagesNetwork:[]},i=(0,n.oM)({name:"templating/inspect",initialState:a,reducers:{initInspect:(g,u)=>{const{usages:c,usagesNetwork:l}=u.payload;g.usages=c,g.usagesNetwork=l}}}),r=i.reducer,{initInspect:o}=i.actions},63694:(Q,A,e)=>{"use strict";e.d(A,{MJ:()=>f,GQ:()=>l,V:()=>h,Of:()=>d,PQ:()=>D,dH:()=>I,Yg:()=>s,Rv:()=>O,vI:()=>b});var n=e(81548);function a(M,x){const L=new Set;for(const S of M)L.add(x(S));return L}var i=e(30937),r=e(82866),o=e(25353),g=e(73731),u=e(36138),c=e(77378);const l=M=>{const x=[];for(const L of M)x.push({id:L.id,label:`${L.id}`});return x},d=(M,x)=>M.filter(L=>x.some(S=>S.from===L.id||S.to===L.id)),f=M=>{const x=[];for(const L of M)for(const S of M){if(L===S)continue;g.z.get(L.type).dependsOn(L,S)&&x.push({from:L.id,to:S.id})}return x};function m(M){const x=(0,c.a9)(M);if(!x)return;const L=x.slice(1).find(S=>S!==void 0);if(!(L in{}))return L}const v=(M,x)=>{c.J7.lastIndex=0;const L=[],U=(0,r.Xh)(x,2).match(c.J7);if(!U)return L;for(const N of U){if(!N||N.indexOf("$__")!==-1||N.indexOf("${__")!==-1||N.indexOf("$hashKey")!==-1)continue;const w=m(N);M.some(G=>G.id===w)||L.find(G=>G===w)||w&&L.push(w)}return L},E={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},p=(M,x,L)=>{const S=Object.keys(x.value).reduce((N,w)=>{const G=x.value[w];if(!G||typeof G!="string")return N;const _=E[w]?E[w].find(k=>k.test(M)):void 0;let K=(0,c.QI)(G,M);return w==="repeat"&&G===M&&(K=!0),!_&&K&&(N={...N,[w]:G}),N},{}),U=Object.keys(x.value).reduce((N,w)=>{const G=x.value[w];if(G&&typeof G=="object"&&Object.keys(G).length){let _=G.title||G.name||G.id||w;Array.isArray(x.value)&&x.key==="panels"&&(_=`${_}[${G.id}]`);const K=p(M,{key:w,value:G},{});Object.keys(K).length&&(N={...N,[_]:K})}return N},{});return(Object.keys(S).length||Object.keys(U).length)&&(L={...L,...S,...U}),L},h=(M,x)=>{if(!x)return{unUsed:[],usages:[]};const L=[];let S=[];const U=x.getSaveModelCloneOld();for(const N of M){const w=N.id,G=p(w,{key:"model",value:U},{});!Object.keys(G).length&&!(0,u.Kn)(N)&&L.push(N),Object.keys(G).length&&S.push({variable:N,tree:G})}return{unUsed:L,usages:S}};async function s(M,x){return new Promise((L,S)=>{setTimeout(()=>{try{const U=y(M,x);L(b(U))}catch(U){S(U)}},200)})}function y(M,x){if(!x)return[];let L=[];const S=x.getSaveModelCloneOld(),U=v(M,S);for(const N of U){const w=p(N,{key:"model",value:S},{});if(Object.keys(w).length){const G={id:N,name:N};L.push({variable:G,tree:w})}}return L}function D(M,x,L){const S=a(x.descendants(M),N=>N.name);S.add(n.W.includeVars);for(const N of M)S.add(N);return C([...S],L)}function C(M,x){const L=[];for(const S of M)x[S]&&L.push(...x[S]);return new Set(L)}const P=(M,x)=>{const{id:L,value:S}=x,{nodes:U,edges:N}=M;if(S&&typeof S=="string"){const w=`${x.id}-${S}`;return U.push({id:w,label:S}),N.push({from:w,to:L}),M}if(S&&typeof S=="object"){const w=Object.keys(S);for(const G of w){const _=`${x.id}-${G}`;U.push({id:_,label:G}),N.push({from:_,to:L}),M=P(M,{id:_,value:S[G]})}return M}return M},b=M=>{const x=[];for(const L of M){const{variable:S,tree:U}=L,N={variable:S,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};x.push(P(N,{id:"dashboard",value:U}))}return x},T=M=>Object.values(M).reduce((L,S)=>typeof S=="object"?L+T(S):L+1,0),O=(M,x)=>{const L=x.find(S=>S.variable.id===M);return L?T(L.tree):0};function R(M){const x=[];for(const L of M)x.push(L),L.panels?.length&&x.push(...R(L.panels.map(S=>new PanelModel(S))));return x}function I(M){const x={};for(const L of M){const S=(0,i.Jg)(L),U=[...S.matchAll(/"repeat":"([^"]+)"/g)].map(G=>G[1]),N=S.match(c.J7)?.map(G=>m(G))??[],w=[...U,...N];for(const G of w)G in x?x[G].add(L.id):x[G]=new Set([L.id])}return x}},7652:(Q,A,e)=>{"use strict";e.d(A,{T6:()=>u,kv:()=>d,vH:()=>l});var n=e(4579),a=e(69781),i=e.n(a),r=e(99282),o=e(3374),g=e(7257);const u={...g.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:g.Bd.onTimeRangeChanged,current:{}},c=(0,n.oM)({name:"templating/interval",initialState:o.s,reducers:{createIntervalOptions:(f,m)=>{const v=(0,r.ir)(f,m.payload.id);if(v.type!=="interval")return;const E=(0,a.map)(v.query.match(/(["'])(.*?)\1|\w+/g),p=>(p=p.replace(/["']+/g,""),{text:p.trim(),value:p.trim(),selected:!1}));v.auto&&E.length&&E[0].text!=="auto"&&E.unshift({text:"auto",value:"$__auto_interval_"+v.name,selected:!1}),v.options=E}}}),l=c.reducer,{createIntervalOptions:d}=c.actions},14668:(Q,A,e)=>{"use strict";e.d(A,{XJ:()=>I,nn:()=>C,yy:()=>c,Ew:()=>P,cv:()=>M,aN:()=>D,iQ:()=>b,_M:()=>y,ss:()=>O,wF:()=>R,Ug:()=>T});var n=e(20670),a=e(4579),i=e(69781),r=e(49689);const o=(x,...L)=>L.reduce((S,U)=>U(S),x);var g=e(46769),u=e(36138);const c={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},l=1e3,d=new n.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),f=x=>Array.isArray(x)?x.reduce((L,S)=>((0,i.isString)(S.value)&&(L[S.value]=S),L),{}):{},m=x=>{if(!Array.isArray(x.options))return x.options=[],x;const L=f(x.selectedValues);return x.selectedValues=Object.values(L),x.options=x.options.map(S=>{if(!(0,i.isString)(S.value))return S;const U=!!L[S.value];return S.selected===U?S:{...S,selected:U}}),x.options=v(x.options),x},v=x=>Array.isArray(x)?x.length<=l?x:x.slice(0,l):[],E=x=>{const{options:L,selectedValues:S}=x;return L.length===0||S.length>0||!L[0]||L[0].value!==g.r2||(x.selectedValues=[{...L[0],selected:!0}]),x},p=x=>{const{selectedValues:L}=x;return L.length>1&&(x.selectedValues=L.filter(S=>S.value!==g.r2)),x},h=x=>x.filter(L=>L.value!==g.r2).map(L=>({...L,selected:!0})),s=(0,a.oM)({name:"templating/optionsPicker",initialState:c,reducers:{showOptions:(x,L)=>{const{query:S,options:U}=L.payload;if(x.highlightIndex=-1,x.options=(0,i.cloneDeep)(U),x.id=L.payload.id,x.queryValue="",x.multi=!1,(0,u.U4)(L.payload)&&(x.multi=L.payload.multi??!1),(0,u.Xh)(L.payload)){const{queryValue:N}=L.payload,w=(0,r.b)(S);x.queryValue=w&&N?N:""}return x.selectedValues=x.options.filter(N=>N.selected),o(x,E,m)},hideOptions:(x,L)=>({...c}),toggleOption:(x,L)=>{const{option:S,clearOthers:U,forceSelect:N}=L.payload,{multi:w,selectedValues:G}=x;if(S){const _=!G.find(K=>K.value===S.value&&K.text===S.text);if(S.value===g.r2||!w||U)return _||N?x.selectedValues=[{...S,selected:!0}]:x.selectedValues=[],o(x,E,p,m);if(N||_)return x.selectedValues.push({...S,selected:!0}),o(x,E,p,m);x.selectedValues=G.filter(K=>K.value!==S.value&&K.text!==S.text)}else x.selectedValues=[];return o(x,E,p,m)},moveOptionsHighlight:(x,L)=>{let S=x.highlightIndex+L.payload;return S<0?S=-1:S>=x.options.length&&(S=x.options.length-1),{...x,highlightIndex:S}},toggleAllOptions:(x,L)=>{const S=x.selectedValues.find(N=>N.value===g.r2),U=x.options.find(N=>N.value===g.r2);return x.selectedValues.length>0&&U&&!S?(x.selectedValues=[],x.selectedValues.push({text:U.text??"All",value:U.value,selected:!0}),o(x,m)):S&&x.selectedValues.length===1?(x.selectedValues=h(x.options),o(x,m)):x.selectedValues.length>0&&!U?(x.selectedValues=[],o(x,m)):(x.selectedValues=h(x.options),o(x,m))},updateSearchQuery:(x,L)=>(x.queryValue=L.payload,x),updateOptionsAndFilter:(x,L)=>{const S=x.queryValue.trim();let U=[];if(S==="")U=L.payload;else{const N=L.payload.map(({text:K})=>Array.isArray(K)?K.toString():K),[w,G,_]=d.search(N,S,5);w?.length&&(G&&_?U=_.map(K=>L.payload[G.idx[K]]):U=w.map(K=>L.payload[K]),U.sort((K,k)=>(K.value==="$__all"?-1:0)-(k.value==="$__all"?-1:0)))}return x.options=U,x.highlightIndex=0,o(x,E,m)},updateOptionsFromSearch:(x,L)=>(x.options=L.payload,x.highlightIndex=0,o(x,E,m)),cleanPickerState:()=>c}}),{toggleOption:y,showOptions:D,hideOptions:C,moveOptionsHighlight:P,toggleAllOptions:b,updateSearchQuery:T,updateOptionsAndFilter:O,updateOptionsFromSearch:R,cleanPickerState:I}=s.actions,M=s.reducer},46497:(Q,A,e)=>{"use strict";e.d(A,{x:()=>n});const n=(r,o)=>r&&(o&&!Array.isArray(r.value)?{...r,value:i(r.value),text:i(r.text)}:!o&&Array.isArray(r.value)?{...r,value:a(r.value),text:a(r.text)}:r),a=r=>Array.isArray(r)?r.length>0?r[0]:"":r,i=r=>Array.isArray(r)?r:[r]},43773:(Q,A,e)=>{"use strict";e.d(A,{wX:()=>je,Z7:()=>se,LX:()=>$e,DU:()=>ce,Fz:()=>Pe,Ci:()=>ve,xs:()=>Re,Rk:()=>ut,xQ:()=>Me,MB:()=>he});var n=e(69781),a=e(59970),i=e(32147),r=e(20298),o=e(44992),g=e(19690),u=e(85498),c=e(7939),l=e(56811),d=e(89660),f=e(86573),m=e(42876),v=e(75923),E=e(41327),p=e(23901),h=e(97001),s=e(4419),y=e(73731),D=e(46769),C=e(6832),P=e(36138),b=e(63694),T=e(14668),O=e(46497),R=e(7257),I=e(77378),M=e(27546),x=e(50051),L=e(51099),S=e(49887);const U=(ae,J=-1,te=!1,de=!1)=>{const be={};if(de){const De={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},Ue={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},We={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};be[De.id]=De,be[Ue.id]=Ue,be[We.id]=We}for(let De=0;De<ae;De++)be[De]=createQueryVariable({id:De.toString(),name:`Name-${De}`,label:`Label-${De}`,index:De});return te&&(be[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:ae})),be},N=(ae,J={})=>{const te={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...ae.initialState,...te},...J}}}},w=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),G=()=>combineReducers({templating:keyedVariablesReducer});function _(ae,J){return{templating:{lastKey:ae,keys:{[ae]:{...getInitialTemplatingState(),...J}}}}}function K(ae,J){return ae.find(de=>de.name===J)}function k(ae){return(ae.type==="query"||ae.type==="datasource"||ae.type==="interval")&&ae.refresh===M.Bd.onTimeRangeChanged}var z=e(99282),W=e(63033),Z=e(94775),H=e(4055);const X=(ae,J)=>(te,de)=>{let be=0;const De=J.templating.list;for(let We=0;We<De.length;We++){const et=Y(De[We]);et.rootStateKey=ae,y.z.getIfExists(et.type)&&te((0,L.mb)(ae,(0,W.VN)((0,I.Y6)(et,{global:!1,index:be++,model:et}))))}(0,s.J)().updateTimeRange((0,d.$t)().timeRange());const Ue=(0,z.gt)(ae,de());for(const We of Ue)te((0,L.mb)(ae,(0,W.Mn)((0,I.Y6)(We))))};function Y(ae){if(!(0,P.eL)(ae))return ae;let J=!1;for(const te of ae.options)if(te.selected=!1,Array.isArray(ae.current.value))for(const de of ae.current.value)te.value===de&&(te.selected=J=!0);else te.value===ae.current.value&&(te.selected=J=!0);return!J&&ae.options.length&&(ae.options[0].selected=!0),ae}const ne=(ae,J)=>te=>{const de={...R.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:a.bU.hideVariable,current:{value:{name:J.title,uid:J.uid,toString:()=>J.title}}};te((0,L.mb)(ae,(0,W.VN)((0,I.Y6)(de,{global:de.global,index:de.index,model:de}))));const be={...R.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:a.bU.hideVariable,current:{value:{name:l.contextSrv.user.orgName,id:l.contextSrv.user.orgId,toString:()=>l.contextSrv.user.orgId.toString()}}};te((0,L.mb)(ae,(0,W.VN)((0,I.Y6)(be,{global:be.global,index:be.index,model:be}))));const De={...R.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:a.bU.hideVariable,current:{value:{login:l.contextSrv.user.login,id:l.contextSrv.user.id,email:l.contextSrv.user.email,toString:()=>l.contextSrv.user.id.toString()}}};te((0,L.mb)(ae,(0,W.VN)((0,I.Y6)(De,{global:De.global,index:De.index,model:De}))))},se=(ae,J)=>(te,de)=>{const{rootStateKey:be}=ae,De=(0,z.E0)(ae,de());if(!(0,P.U4)(De)||(0,i.Q)(De.current))return;const Ue=(0,O.x)(De.current,J);te((0,L.mb)(be,(0,W.Pl)((0,I.Y6)(ae,{propName:"multi",propValue:J})))),te((0,L.mb)(be,(0,W.Pl)((0,I.Y6)(ae,{propName:"current",propValue:Ue}))))},re=async(ae,J)=>{if(!ae.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ae.id}`);if(ge(ae,J))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const te=q(ae,J);me(ae.rootStateKey,te,J)&&await new Promise(de=>{const be=f.h.subscribe(()=>{if(!ae.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ae.id}`);me(ae.rootStateKey,te,f.h.getState())||(be(),de())})})},ge=(ae,J,te=new Set)=>te.has(ae.id)?!0:(te=new Set([...te,ae.id]),q(ae,J).some(de=>ge(de,J,te))),q=(ae,J)=>{if(!ae.rootStateKey)return[];const te=[];for(const de of(0,z.gt)(ae.rootStateKey,J))ae!==de&&y.z.getIfExists(ae.type)&&y.z.get(ae.type).dependsOn(ae,de)&&te.push(de);return te},me=(ae,J,te)=>{if(J.length===0)return!1;const de=(0,z.gt)(ae,te);return J.filter(De=>de.some(Ue=>Ue.id===De.id&&(Ue.state===r.Gu.NotStarted||Ue.state===r.Gu.Loading))).length>0},oe=(ae,J)=>async(te,de)=>{const be=(0,z.E0)(ae,de());await re(be,de());const De=J[D.IG+be.name];if(De!==void 0){const Ue=(0,I.Hi)(De);await y.z.get(be.type).setValueFromUrl(be,Ue);return}if(be.hasOwnProperty("refresh")){const Ue=be;if(Ue.refresh===a.Bd.onDashboardLoad||Ue.refresh===a.Bd.onTimeRangeChanged){await te(ut((0,I.yQ)(Ue)));return}}if(be.type==="custom"){await te(ut((0,I.yQ)(be)));return}te(Te(ae))},fe=ae=>async(J,te)=>{const de=g.E1.getSearchObject(),be=(0,z.gt)(ae,te()).map(async De=>await J(oe((0,I.yQ)(De),de)));await Promise.all(be)},ve=(ae,J)=>async(te,de)=>{const be=(0,I.Hi)(J),De=(0,z.E0)(ae,de());(0,I.iD)(De)!==a.Bd.never&&await te(ut((0,I.yQ)(De)));const Ue=(0,z.E0)((0,I.yQ)(De),de());if(!(0,P.eL)(Ue))return;if(!Ue)throw new Error(`Couldn't find variable with name: ${De.name}`);let We=Ue.options.find(et=>et.text===be||et.value===be);if(!We&&(0,P.U4)(Ue)&&Ue.allValue&&be===Ue.allValue&&(We={text:D.xk,value:D.r2,selected:!1}),!We){let et=be;const ze=be;Array.isArray(be)&&(et=be.reduce((_e,qe)=>{const at=Ue.options.find(lt=>lt.value===qe);return at?[].concat(_e,[at.text]):[].concat(_e,[qe])},[])),We={text:et,value:ze,selected:!1}}(0,P.U4)(Ue)&&(We=(0,O.x)({text:(0,n.castArray)(We.text),value:(0,n.castArray)(We.value),selected:!1},Ue.multi)),await y.z.get(De.type).setValue(Ue,We)},pe=ae=>{let J,te,de,be;const De=[];for(J=0;J<ae.options.length;J++)if(be={...ae.options[J]},be.selected=!1,Array.isArray(ae.current.value))for(te=0;te<ae.current.value.length;te++)de=ae.current.value[te],be.value===de&&(be.selected=!0,De.push(be));else be.value===ae.current.value&&(be.selected=!0,De.push(be));return De},Me=(ae,J)=>(te,de)=>{const be=(0,z.E0)(ae,de());if(!(0,P.eL)(be))return Promise.resolve();const De=be.current||{},Ue=y.z.get(be.type).setValue;if(Array.isArray(De.value)){const _e=pe(be);if(_e.length===0){const at=be.options[0];return Ue(be,{value:typeof at.value=="string"?[at.value]:at.value,text:typeof at.text=="string"?[at.text]:at.text,selected:!0})}const qe={value:_e.map(at=>at.value),text:_e.map(at=>at.text),selected:!0};return Ue(be,qe)}let We=null;const et=(0,I.Tt)(be),ze=(0,I.N9)(be);if(We=be.options?.find(_e=>_e.text===et||_e.value===ze),We||J&&(We=be.options?.find(_e=>_e.text===J||_e.value===J),We))return Ue(be,We);if(be.options){const _e=be.options[0];if(_e)return Ue(be,_e)}return Promise.resolve()},Pe=(ae,J,te)=>async de=>{const{rootStateKey:be}=ae;return de((0,L.mb)(be,(0,W.Q8)((0,I.Y6)(ae,{option:J})))),await de(he(ae,te))},Ee=ae=>{const J=new p.kJ;return ae.forEach(te=>{J.createNode(te.name)}),ae.forEach(te=>{ae.forEach(de=>{te!==de&&y.z.get(te.type).dependsOn(te,de)&&J.link(te.name,de.name)})}),J},he=(ae,J,te=v.h$)=>async(de,be)=>{const De=be(),{rootStateKey:Ue}=ae,We=(0,z.E0)(ae,De);if((0,z.AE)(Ue,De).transaction.status===R.LN.Fetching)return(0,I.iD)(We)===a.Bd.never&&(await de(Ve((0,I.yQ)(We))),de(Te(ae))),Promise.resolve();const et=(0,z.gt)(Ue,De),ze=Ee(et),_e=De.dashboard?.getModel()?.panels??[],qe=(0,b.dH)(_e),at=We.type==="adhoc"?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,b.PQ)([We.id],ze,qe)),variable:(0,z.E0)(ae,De)},lt=ze.getNode(We.name);let ft=[];return lt&&(ft=lt.getOptimizedInputEdges().map(yt=>{const wt=et.find(zt=>zt.name===yt.inputNode?.name);return wt?de(ut((0,I.yQ)(wt))):Promise.resolve()})),Promise.all(ft).then(()=>{J&&(te.publish(new R.x9(at)),g.E1.partial(Oe(Ue,be)))})},Le=(ae,J,te,de)=>(J.includes(ae.name)||J.push(ae.name),ae.outputEdges.forEach(be=>{const De=be.outputNode;if(De&&!J.includes(De.name)){const Ue=te.find(We=>We.name===De.name);Ue&&Ue.refresh===a.Bd.onTimeRangeChanged&&de.indexOf(Ue)===-1?(de.push(Ue),J.push(De.name)):Le(De,J,te,de)}}),de),ke=(ae,J)=>ae.outputEdges.every(te=>{const de=te.outputNode;if(de){const be=K(J,de.name);if(be&&be.type==="query")return be.refresh!==a.Bd.onTimeRangeChanged}return!0}),ot=(ae,J)=>{const te=(0,z.gt)(ae,J),de=Ee(te),be=[],De=[];return te.forEach(Ue=>{const We=de.getNode(Ue.name);if(!be.includes(Ue.name)&&We){const et=K(te,We.name);if(!et)return;const ze=k(et);ze&&We.outputEdges.length===0&&De.push(et),ze&&De.includes(et)&&We.outputEdges.length>0&&(De.push(et),Le(We,be,te,De)),ze&&We.outputEdges.length>0&&ke(We,te)&&(De.includes(et)||De.push(et)),!ze&&We.outputEdges.length>0&&Le(We,be,te,De)}}),De},it=(ae,J)=>(0,z.gt)(ae,J).filter(be=>"refresh"in be&&"options"in be?be.refresh===a.Bd.onTimeRangeChanged:!1),ce=(ae,J,te={templateSrv:(0,s.J)(),events:v.h$})=>async(de,be)=>{te.templateSrv.updateTimeRange(J);let De=[];u.config.featureToggles.refactorVariablesTimeRange?De=ot(ae,be()):De=it(ae,be());const Ue=De.map(et=>et.id),We=De.map(et=>de(le((0,I.yQ)(et))));try{await Promise.all(We),te.events.publish(new R.eq({variableIds:Ue}))}catch(et){console.error(et),de((0,c.$l)(Fe("Template variable service failed",et)))}},le=ae=>async(J,te)=>{const de=(0,z.E0)(ae,te());if(!(0,P.eL)(de))return;const be=de.options.slice();await J(ut((0,I.yQ)(de),!0));const De=(0,z.E0)(ae,te());if(!(0,P.eL)(De))return;const Ue=De.options;JSON.stringify(be)!==JSON.stringify(Ue)&&te().dashboard.getModel()?.templateVariableValueUpdated()},Re=(ae,J,te=v.h$)=>async(de,be)=>{const De=[],Ue=be().dashboard.getModel(),We=(0,z.gt)(ae,be());for(const at of We){const lt=D.IG+at.name;if(!J.hasOwnProperty(lt)||!Ae(at,J[lt].value))continue;let ft=J[lt].value;if(J[lt].removed){const wt=Ue?.templating.list.find(zt=>zt.name===at.name);wt&&(0,P.Kr)(wt)&&(ft=wt.current.value),wt&&wt.type==="constant"&&(ft=wt.query)}const yt=y.z.get(at.type).setValueFromUrl(at,ft);De.push(yt)}const et=We.filter(at=>{const lt=D.IG+at.name;return J.hasOwnProperty(lt)&&Ae(at,J[lt].value)&&at.type!=="adhoc"}),ze=Ee(We),_e=(0,b.dH)(Ue?.panels??[]),qe=(0,b.PQ)(et.map(at=>at.id),ze,_e);De.length&&(await Promise.all(De),te.publish(new R.Wy({refreshAll:qe.size===0,panelIds:Array.from(qe)})))};function Ae(ae,J){const te=y.z.get(ae.type).getValueForUrl(ae);let de=(0,I.Hi)(J);return Array.isArray(te)&&!Array.isArray(de)&&(de=[de]),!(0,n.isEqual)(te,de)}const Oe=(ae,J)=>{const te=g.E1.getSearchObject(),de=Object.keys(te).filter(be=>be.indexOf(D.IG)===-1).reduce((be,De)=>(be[De]=te[De],be),{});for(const be of(0,z.gt)(ae,J())){if(be.skipUrlSync)continue;const De=y.z.get(be.type);de[D.IG+be.name]=De.getValueForUrl(be)}return de},$e=(ae,J)=>async(te,de)=>{try{const be=(0,I.mn)(ae),De=de(),Ue=(0,z.cp)(De);Ue&&(0,z.AE)(Ue,De).transaction.status===R.LN.Fetching&&te(je(Ue)),te((0,L.mb)(be,(0,Z.Z9)({uid:be}))),te(ne(be,J)),te(X(be,J)),te(Ye(be)),await te(fe(be)),te((0,L.mb)(be,(0,Z.iv)({uid:be})))}catch(be){te((0,c.$l)(Fe("Templating init failed",be))),console.error(be)}};function Ye(ae,J=h.ak){return(te,de)=>{const be=(0,z.gt)(ae,de());for(const De of be){if(De.type!=="adhoc"&&De.type!=="query")continue;const{datasource:Ue}=De;if((0,o.cv)(Ue))continue;const We=J().getInstanceSettings(Ue),et=We?(0,o.iU)(We):{uid:Ue};te((0,L.mb)(ae,(0,W.Pl)((0,I.Y6)(De,{propName:"datasource",propValue:et}))))}}}const Ne=ae=>J=>{J((0,L.mb)(ae,(0,H.S)())),J((0,L.mb)(ae,(0,C.QR)())),J((0,L.mb)(ae,(0,T.XJ)())),J((0,L.mb)(ae,(0,Z.p3)()))},je=(ae,J={getBackendSrv:E.i})=>te=>{J.getBackendSrv().cancelAllInFlightRequests(),te(Ne(ae))},ut=(ae,J=!1)=>async(te,de)=>{const{rootStateKey:be}=ae;try{if(!(0,I.A3)(be,de()))return;const De=(0,z.E0)(ae,de());te((0,L.mb)(be,(0,W.$M)((0,I.Y6)(De)))),await te(Ve((0,I.yQ)(De))),await y.z.get(De.type).updateOptions(De),te(Te(ae))}catch(De){if(te((0,L.mb)(be,(0,W.Le)((0,I.Y6)(ae,{error:De})))),J||(console.error(De),te((0,c.$l)(Fe("Error updating options:",De,ae)))),J)throw De}},Fe=(ae,J,te)=>(0,m.t_)(`${te?`Templating [${te.id}]`:"Templating"}`,J instanceof Error?`${ae} ${J.message}`:`${ae}`),Te=ae=>(J,te)=>{const{rootStateKey:de}=ae;if(!(0,I.A3)(de,te()))return;const be=(0,z.E0)(ae,te());be.state!==r.Gu.Done&&J((0,L.mb)(ae.rootStateKey,(0,W.qQ)((0,I.Y6)(be))))};function Ve(ae,J=h.ak){return async function(te,de){const{id:be,rootStateKey:De}=ae;if(!(0,I.A3)(De,de()))return;const Ue=(0,z.E0)(ae,de());if(Ue.type==="query")try{const We=await J().get(Ue.datasource??"");if((0,P.R)(We)||!(0,P.Ju)(We)||tt(Ue.query))return;const et={refId:`${We.name}-${be}-Variable-Query`,query:Ue.query};te((0,L.mb)(De,(0,W.Pl)((0,I.Y6)(ae,{propName:"query",propValue:et}))))}catch(We){te((0,c.$l)(Fe("Failed to upgrade legacy queries",We))),console.error(We)}}}function tt(ae){return(0,r.Kn)(ae)&&"refId"in ae&&typeof ae.refId=="string"}},51099:(Q,A,e)=>{"use strict";e.d(A,{ZP:()=>l,mb:()=>g,qM:()=>r});var n=e(77378),a=e(49887),i=e(94775);const r={keys:{}},o=d=>({type:`templating/keyed/${d.action.type.replace(/^templating\//,"")}`,payload:d});function g(d,f){const m=(0,n.mn)(d);return o({key:m,action:f})}const u=d=>typeof d.type=="string"&&d.type.startsWith("templating/keyed")&&"payload"in d&&typeof d.payload.key=="string";function c(d=r,f){if(u(f)){const{key:m,action:v}=f.payload,E=(0,n.mn)(m),p=i.Z9.match(v)?E:d.lastKey,h=(0,a.Q)(),s=d.keys[E],y=h(s,v);return{...d,lastKey:p,keys:{...d.keys,[E]:y}}}return d}const l={templating:c}},49887:(Q,A,e)=>{"use strict";e.d(A,{L:()=>d,Q:()=>l});var n=e(51158),a=e(6832),i=e(79454),r=e(14668),o=e(94775),g=e(3374),u=e(4055);let c;function l(){return c||(c=(0,n.combineReducers)({editor:a.gl,variables:u.L,optionsPicker:r.cv,transaction:o.vw,inspect:i.iV})),c}function d(){return{editor:a.PF,variables:g.s,optionsPicker:r.yy,transaction:o.xO,inspect:i.Kf}}},99282:(Q,A,e)=>{"use strict";e.d(A,{AE:()=>u,E0:()=>o,Eo:()=>m,IV:()=>d,Q4:()=>s,QT:()=>v,S_:()=>h,_K:()=>D,cp:()=>p,gt:()=>c,ir:()=>C,ng:()=>y,xD:()=>f});var n=e(90093),a=e(86573),i=e(77378),r=e(49887);function o(P,b=(0,a.y0)(),T=!0){const{id:O,rootStateKey:R}=P,M=u(R,b).variables[O];if(!M){if(T)throw new Error(`Couldn't find variable with id:${O}`);return}return M}function g(P,b,T=(0,a.y0)()){return Object.values(u(b,T).variables).filter(P).sort((O,R)=>O.index-R.index)}function u(P,b=(0,a.y0)()){return b.templating.keys[(0,i.mn)(P)]??(0,r.L)()}function c(P,b=(0,a.y0)()){return g(l,P,b)}function l(P){return P.type!=="system"}const d=(0,n.Z)((P,b)=>c(P,(0,a.y0)())),f=(P,b)=>c(P,b);function m(P,b=(0,a.y0)()){return v(Object.values(u(P,b).variables))}function v(P){const b=P.filter(l).sort((T,O)=>T.index-O.index);return b.length>0?b[b.length-1].index+1:0}function E(P,b=getState()){return u(P,b).transaction.isDirty}function p(P=(0,a.y0)()){return P.templating?.lastKey}function h(P=(0,a.y0)()){if(!P.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return P.templating.lastKey}function s(P,b=(0,a.y0)()){const T=p(b);return T?g(P,T,b):[]}function y(P=(0,a.y0)()){const b=p(P);return b?c(b,P):[]}function D(P,b=(0,a.y0)()){const T=p(b);if(T)return o({id:P,rootStateKey:T,type:"query"},b,!1)}function C(P,b){return P[b]}},63033:(Q,A,e)=>{"use strict";e.d(A,{$M:()=>P,Be:()=>D,Le:()=>T,Mn:()=>C,Pl:()=>p,Q8:()=>y,VN:()=>E,Y9:()=>s,b5:()=>m,gE:()=>h,mZ:()=>v,qQ:()=>b});var n=e(4579),a=e(69781),i=e.n(a),r=e(20298),o=e(73731),g=e(6832),u=e(36138),c=e(77378),l=e(99282),d=e(3374);const f=(0,n.oM)({name:"templating/shared",initialState:d.s,reducers:{addVariable:(O,R)=>{const I=R.payload.id??R.payload.data.model.name,M=o.z.get(R.payload.type),x=(0,a.cloneDeep)(M.initialState),L=M.beforeAdding?M.beforeAdding(R.payload.data.model):(0,a.cloneDeep)(R.payload.data.model),S={...(0,a.defaults)({},L,x),id:I,index:R.payload.data.index,global:R.payload.data.global};O[I]=S},variableStateNotStarted:(O,R)=>{const I=(0,l.ir)(O,R.payload.id);I.state=r.Gu.NotStarted,I.error=null},variableStateFetching:(O,R)=>{const I=(0,l.ir)(O,R.payload.id);I.state=r.Gu.Loading,I.error=null},variableStateCompleted:(O,R)=>{const I=(0,l.ir)(O,R.payload.id);I&&(I.state=r.Gu.Done,I.error=null)},variableStateFailed:(O,R)=>{const I=(0,l.ir)(O,R.payload.id);I&&(I.state=r.Gu.Error,I.error=R.payload.data.error)},removeVariable:(O,R)=>{if(delete O[R.payload.id],!R.payload.data.reIndex)return;const I=Object.values(O).sort((M,x)=>M.index-x.index);for(let M=0;M<I.length;M++)I[M].index=M},duplicateVariable:(O,R)=>{function I(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const M=(0,a.cloneDeep)(O[R.payload.id]),x=new RegExp(`^copy_of_${I(M.name)}(_(\\d+))?$`),L=Object.values(O).map(({name:_})=>_.match(x)).filter(_=>_!=null),S=L.map(_=>_[2]).filter(_=>_!=null),U=(()=>L.length===0?null:S.length===0?1:S.map(_=>+_).sort((_,K)=>K-_)[0]+1)(),N=`copy_of_${M.name}${U?`_${U}`:""}`,w=R.payload.data?.newId??N,G=(0,l.QT)(Object.values(O));O[w]={...(0,a.cloneDeep)(o.z.get(R.payload.type).initialState),...M,id:w,name:N,index:G}},changeVariableOrder:(O,R)=>{const{toIndex:I,fromIndex:M}=R.payload.data,x=Object.values(O);for(let L=0;L<x.length;L++){const S=x[L];S.index===M?S.index=I:S.index>M&&S.index<=I?S.index--:S.index<M&&S.index>=I&&S.index++}},changeVariableType:(O,R)=>{const{id:I}=R.payload,{label:M,name:x,index:L,description:S,rootStateKey:U}=O[I];O[I]={...(0,a.cloneDeep)(o.z.get(R.payload.data.newType).initialState),id:I,rootStateKey:U,label:M,name:x,index:L,description:S}},setCurrentVariableValue:(O,R)=>{if(!R.payload.data.option)return;const I=(0,l.ir)(O,R.payload.id);if(!(0,u.eL)(I))return;const{option:M}=R.payload.data,x={...M,text:(0,c.Hi)(M?.text),value:(0,c.Hi)(M?.value)};I.current=x,I.options=I.options.map(L=>{L.value=(0,c.Hi)(L.value),L.text=(0,c.Hi)(L.text);let S=!1;if(Array.isArray(x.value))for(let U=0;U<x.value.length;U++){const N=x.value[U];if(L.value===N){S=!0;break}}else L.value===x.value&&(S=!0);return L.selected=S,L})},changeVariableProp:(O,R)=>{const I=(0,l.ir)(O,R.payload.id);I[R.payload.data.propName]=R.payload.data.propValue}},extraReducers:O=>O.addCase(g.Yo,(R,I)=>{const M=(0,l.ir)(R,I.payload.id);M.name=I.payload.data.newName})}),m=f.reducer,{removeVariable:v,addVariable:E,changeVariableProp:p,changeVariableOrder:h,duplicateVariable:s,setCurrentVariableValue:y,changeVariableType:D,variableStateNotStarted:C,variableStateFetching:P,variableStateCompleted:b,variableStateFailed:T}=f.actions},94775:(Q,A,e)=>{"use strict";e.d(A,{Z9:()=>u,iv:()=>l,p3:()=>c,vw:()=>d,xO:()=>r});var n=e(4579),a=e(7257),i=e(63033);const r={uid:null,status:a.LN.NotStarted,isDirty:!1},o=(0,n.oM)({name:"templating/transaction",initialState:r,reducers:{variablesInitTransaction:(f,m)=>{f.uid=m.payload.uid,f.status=a.LN.Fetching},variablesCompleteTransaction:(f,m)=>{f.uid===m.payload.uid&&(f.status=a.LN.Completed)},variablesClearTransaction:(f,m)=>{f.uid=null,f.status=a.LN.NotStarted,f.isDirty=!1}},extraReducers:f=>f.addMatcher(g,(m,v)=>{m.status===a.LN.Completed&&(m.isDirty=!0)})});function g(f){return i.mZ.match(f)||i.VN.match(f)||i.Pl.match(f)||i.gE.match(f)||i.Y9.match(f)||i.Be.match(f)}const{variablesInitTransaction:u,variablesClearTransaction:c,variablesCompleteTransaction:l}=o.actions,d=o.reducer},3374:(Q,A,e)=>{"use strict";e.d(A,{s:()=>n});const n={}},4055:(Q,A,e)=>{"use strict";e.d(A,{L:()=>g,S:()=>o});var n=e(4579),a=e(73731),i=e(63033),r=e(3374);const o=(0,n.PH)("templating/cleanVariables"),g=(u=r.s,c)=>{if(o.match(c)){const l=Object.values(u).filter(f=>f.global);return l?l.reduce((f,m)=>(f[m.id]=m,f),{}):r.s}return c?.payload?.type&&a.z.getIfExists(c?.payload?.type)?a.z.get(c.payload.type).reducer((0,i.b5)(u,c),c):u}},7257:(Q,A,e)=>{"use strict";e.d(A,{$U:()=>n.$U,Bd:()=>n.Bd,Eg:()=>g,LN:()=>o,Wy:()=>l,bU:()=>n.bU,eq:()=>c,x9:()=>u});var n=e(59970),a=e(20298),i=e(63121),r=e(46769),o=(d=>(d.NotStarted="Not started",d.Fetching="Fetching",d.Completed="Completed",d))(o||{});const g={id:r.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:n.bU.dontHide,skipUrlSync:!1,state:a.Gu.NotStarted,error:null,description:null};class u extends i.R{}u.type="variables-changed";class c extends i.R{}c.type="variables-time-range-process-done";class l extends i.R{}l.type="variables-changed-in-url"},77378:(Q,A,e)=>{"use strict";e.d(A,{A3:()=>O,AQ:()=>y,HY:()=>E,Hi:()=>T,J7:()=>f,N9:()=>h,QI:()=>v,Tt:()=>p,Y6:()=>M,a9:()=>m,bi:()=>C,gR:()=>s,iD:()=>D,mn:()=>R,xT:()=>b,yQ:()=>I});var n=e(69781),a=e.n(n),i=e(59970),r=e(61129),o=e(82866),g=e(86573),u=e(73731),c=e(46769),l=e(99282),d=e(7257);const f=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,m=x=>(f.lastIndex=0,f.exec(x));function v(...x){const L=x[x.length-1];x[0]=typeof x[0]=="string"?x[0]:(0,o.Xh)(x[0]);const U=x.slice(0,-1).join(" ").match(f);return!!(U!==null?U.find(w=>{const G=m(w);return G!==null&&G.indexOf(L)>-1}):!1)}const E=x=>{if(!x||!x.current)return!1;if(x.current.value){const L=Array.isArray(x.current.value);if(L&&x.current.value.length&&x.current.value[0]===c.r2||!L&&x.current.value===c.r2)return!0}if(x.current.text){const L=Array.isArray(x.current.text);if(L&&x.current.text.length&&x.current.text[0]===c.xk||!L&&x.current.text===c.xk)return!0}return!1},p=x=>!x||!x.current||!x.current.text?"":Array.isArray(x.current.text)?x.current.text.toString():typeof x.current.text!="string"?"":x.current.text,h=x=>!x||!x.current||x.current.value===void 0||x.current.value===null?null:Array.isArray(x.current.value)?x.current.value.toString():typeof x.current.value!="string"?null:x.current.value;function s(x,L=(0,r.J)()){return!x||!x.regex?"":L.replace(x.regex,{},"regex")}function y(x,L,S,U){const N={range:void 0,variable:x,searchFilter:L,scopedVars:U};return(x.refresh===i.Bd.onTimeRangeChanged||x.refresh===i.Bd.onDashboardLoad)&&(N.range=S.timeRange()),N}function D(x){if(!x||!x.hasOwnProperty("refresh"))return i.Bd.never;const L=x;return L.refresh!==i.Bd.onTimeRangeChanged&&L.refresh!==i.Bd.onDashboardLoad&&L.refresh!==i.Bd.never?i.Bd.never:L.refresh}function C(){return u.z.list().filter(x=>x.id!=="system").map(({id:x,name:L,description:S})=>({label:L,value:x,description:S}))}function P(x){return(0,n.isArray)(x)&&(x.length===0?x=void 0:x.length===1&&(x=x[0])),x}function b(x,L){let S=0;const U={};for(const N in x){if(!N.startsWith(c.IG))continue;let w=P(L[N]),G=P(x[N]);(0,n.isEqual)(G,w)||(U[N]={value:x[N]},S++)}for(const N in L){if(!N.startsWith(c.IG))continue;const w=L[N];(0,n.isArray)(w)&&w.length===0||x.hasOwnProperty(N)||(U[N]={value:"",removed:!0},S++)}return S?U:void 0}function T(x){return Array.isArray(x)?x.map(String):x==null?"":typeof x=="number"?x.toString(10):typeof x=="string"?x:typeof x=="boolean"?x.toString():""}function O(x,L=(0,g.y0)()){return(0,l.AE)(x,L).transaction.status!==d.LN.NotStarted}function R(x){return String(x)}const I=x=>{if(!x.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${x.id}`);return{type:x.type,id:x.id,rootStateKey:x.rootStateKey}};function M(x,L){return{type:x.type,id:x.id,data:L}}},55820:(Q,A,e)=>{"use strict";e.d(A,{H:()=>v});var n=e(76932),a=e(31733),i=e(27957),r=e(86850),o=e(11386),g=e(85498),u=e(71199),c=e(76067),l=e(94746),d=e(26250),f=e(45771);function m(p,h,s,y,D){const C=p.fields,P=s!=null?C[s]:null,b=C.filter(x=>!x.config.custom?.hideFrom?.tooltip),T=b.find(x=>x.name==="traceID")||C[0],O=[];if(b.filter(x=>T===x).length>0&&O.push(T),O.push(...b.filter(x=>T!==x)),O.length===0)return null;const R=[],I=[],M=new Set;for(const x of O){if(D===u.f3.Single&&x!==P)continue;const L=x.values[h],S=x.display?x.display(L):{text:`${L}`,numeric:+L};x.getLinks&&x.getLinks({calculatedValue:S,valueRowIndex:h}).forEach(U=>{const N=`${U.title}/${U.href}`;M.has(N)||(I.push(U),M.add(N))}),R.push({name:(0,i.CZ)(x,p),value:L,valueString:(0,r.zc)(S),highlight:x===P})}return y&&y!==u.As.None&&R.sort((x,L)=>o.sortValues(y)(x.value,L.value)),{displayValues:R,links:I}}const v=({data:p,rowIndex:h,columnIndex:s,sortOrder:y,mode:D,header:C,padding:P=0})=>{const b=(0,c.wW)(E,P);if(!p||h==null)return null;const T=m(p,h,s,y,D);if(T==null)return null;const{displayValues:O,links:R}=T;return g.config.featureToggles.newVizTooltips&&C==="Exemplar"?a.createElement(f.F,{displayValues:O,links:R,header:C}):a.createElement("div",{className:b.wrapper},C&&a.createElement("div",{className:b.header},a.createElement("span",{className:b.title},C)),a.createElement("table",{className:b.infoWrap},a.createElement("tbody",null,O.map((I,M)=>a.createElement("tr",{key:`${M}/${h}`},a.createElement("th",null,I.name),a.createElement("td",null,(0,d.Q)(I.valueString)))),R.map((I,M)=>a.createElement("tr",{key:M},a.createElement("th",null,"Link"),a.createElement("td",{colSpan:2},a.createElement(l.h,{href:I.href,external:I.target==="_blank",weight:"medium",inline:!1},I.title)))))))},E=(p,h=0)=>({wrapper:(0,n.css)({padding:`${h}px`,background:p.components.tooltip.background,borderRadius:p.shape.borderRadius(2)}),header:(0,n.css)({background:p.colors.background.secondary,alignItems:"center",alignContent:"center",display:"flex",paddingBottom:p.spacing(1)}),title:(0,n.css)({fontWeight:p.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),infoWrap:(0,n.css)({padding:p.spacing(1),background:"transparent",border:"none",th:{fontWeight:p.typography.fontWeightMedium,padding:p.spacing(.25,2,.25,0)},tr:{borderBottom:`1px solid ${p.colors.border.weak}`,"&:last-child":{borderBottom:"none"}}}),link:(0,n.css)({color:p.colors.text.link})})},45771:(Q,A,e)=>{"use strict";e.d(A,{F:()=>u});var n=e(76932),a=e(31733),i=e(76067),r=e(79106),o=e(51343),g=e(26250);const u=({displayValues:l,links:d,header:f="Exemplar"})=>{const m=(0,i.wW)(c),v=l.find(E=>E.name==="Time");return l=l.filter(E=>E.name!=="Time"),a.createElement("div",{className:m.exemplarWrapper},a.createElement("div",{className:m.exemplarHeader},a.createElement("span",{className:m.title},f),v&&a.createElement("span",{className:m.time},(0,g.Q)(v.valueString))),a.createElement("div",{className:m.exemplarContent},l.map((E,p)=>a.createElement(r.Lh,{key:p,justify:"space-between",align:"center",spacing:"md"},a.createElement("div",{className:m.label},E.name),a.createElement("div",{className:m.value},(0,g.Q)(E.valueString))))),d&&a.createElement("div",{className:m.exemplarFooter},d.map((E,p)=>a.createElement(o.Qj,{key:p,href:E.href,className:m.linkButton},E.title))))},c=(l,d=0)=>({exemplarWrapper:(0,n.css)({display:"flex",flexDirection:"column",whiteSpace:"pre",borderRadius:l.shape.radius.default,background:l.colors.background.primary,border:`1px solid ${l.colors.border.weak}`,boxShadow:`0 4px 8px ${l.colors.background.primary}`,userSelect:"text"}),exemplarHeader:(0,n.css)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:l.spacing(.5),color:l.colors.text.secondary,padding:l.spacing(1)}),time:(0,n.css)({color:l.colors.text.primary}),exemplarContent:(0,n.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${l.colors.border.medium}`,padding:l.spacing(1)}),exemplarFooter:(0,n.css)({display:"flex",flexDirection:"column",flex:1,borderTop:`1px solid ${l.colors.border.medium}`,padding:l.spacing(1)}),linkButton:(0,n.css)({width:"fit-content"}),label:(0,n.css)({color:l.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:l.spacing(.5)}),value:(0,n.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),title:(0,n.css)({fontWeight:l.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1})})},54458:(Q,A,e)=>{"use strict";var n=e(54758),a=e(18971),i=e(57029),r=e(23818),o=e(73386),g=e(341),u=e(526),c=e(97001),l=e(34750),d=e(60490),f=e(91085),m=e(93258),v=e(59444),E=e(84326),p=e(69781),h=e.n(p),s=e(31733),y=e(46475),D=e(74011),C=e(88822),P=e(61411),b=e(39729),T=e(22814),O=e(84912),R=e(69391),I=e(17721),M=e(19690),x=e(1727),L=e(18543),S=e(80907),U=e(66261),N=e(33500),w=e(93846),G=e(46915),_=e(31524),K=e(39192),k=e(60251),z=e(83811),W=e(30866),Z=e(85498),H=e(85666),X=e(85610),Y=e(18198),ne=e(27957),se=e(20447),re=e(68911),ge=e(40443),q=e(41164),me=e(96856),oe=e(68833),fe=e(51343),ve=e(2592);function pe(B){if(B in ve.Un){const{name:V,getHelperDocs:j,links:ie}=ve.Un[B],ye=j(ve.O8.UIImage),Se=Me(ye);if(ie?.length){const we=ie.map(He=>`
  Or visit <a href="${He.url}" target="_blank">${He.title}</a>

  `).join("");return{name:V,helperDocs:`
        ${Se}
        ${(0,ve.X)()}
  ${we}
        `}}return{name:V,helperDocs:`
      ${Se}
      ${(0,ve.X)()}
      `}}return{name:"No documentation found",helperDocs:(0,ve.X)()}}const Me=B=>B.replace(/\[(.*?)\]\(#.*?\)/g,"$1").replace(/\[[^\]]*\]\[\]/g,"");var Pe=e(47701),Ee=e(38834),he=e(18662),Le=e(63908),ke=e(61129),ot=e(64516),it=e(60738),ce=e(20003);function le(B,V){switch(V.type){case H.fS.boolean:return(0,p.isUndefined)(B)?!1:Re(B);case H.fS.number:return isNaN(B)?0:parseFloat(B);case H.fS.string:return B?String(B):"";default:return B}}const Re=B=>(0,p.isString)(B)?!(B[0]==="F"||B[0]==="f"||B[0]==="0"):!!B;function Ae(B){return function({options:j,onChange:ie,field:ye}){const{validator:Se,converter:we=le}=B,{value:He}=j,[Qe,rt]=(0,s.useState)(!Se(He)),bt=(0,ke.J)().getVariables().map(Gt=>({value:Gt.name,label:Gt.label||Gt.name,origin:Le.L8.Template})),Wt=(0,s.useCallback)(Gt=>{rt(!Se(Gt.currentTarget.value))},[rt,Se]),Bt=(0,s.useCallback)(Gt=>{if(Qe)return;const{value:mn}=Gt.currentTarget;ie({...j,value:we(mn,ye)})},[j,ie,Qe,ye,we]),It=(0,s.useCallback)(Gt=>{rt(!Se(Gt)),ie({...j,value:Gt})},[rt,Se,ie,j]);return Z.config.featureToggles.transformationsVariableSupport?s.createElement(it.X,{invalid:Qe,value:He,error:"Value needs to be an integer or a variable",onChange:It,placeholder:"Value or variable",suggestions:bt}):s.createElement(ot.I,{className:"flex-grow-1",invalid:Qe,defaultValue:String(j.value),placeholder:"Value",onChange:Wt,onBlur:Bt})}}const Oe=()=>[{name:"Is greater",id:Y.mE.greater,component:Ae({validator:ce.f6})},{name:"Is greater or equal",id:Y.mE.greaterOrEqual,component:Ae({validator:ce.f6})},{name:"Is lower",id:Y.mE.lower,component:Ae({validator:ce.f6})},{name:"Is lower or equal",id:Y.mE.lowerOrEqual,component:Ae({validator:ce.f6})},{name:"Is equal",id:Y.mE.equal,component:Ae({validator:()=>!0})},{name:"Is not equal",id:Y.mE.notEqual,component:Ae({validator:()=>!0})}],$e=()=>null,Ye=()=>[{name:"Is null",id:Y.mE.isNull,component:$e},{name:"Is not null",id:Y.mE.isNotNull,component:$e}];function Ne(B){return function({options:j,onChange:ie,field:ye}){const{validator:Se}=B,[we,He]=(0,s.useState)({from:!Se(j.from),to:!Se(j.to)}),rt=(0,ke.J)().getVariables().map(Bt=>({value:Bt.name,label:Bt.label||Bt.name,origin:Le.L8.Template})),ht=(0,s.useCallback)((Bt,It)=>{He({...we,[It]:!Se(Bt.currentTarget.value)})},[He,Se,we]),bt=(0,s.useCallback)((Bt,It)=>{if(we[It])return;const{value:Gt}=Bt.currentTarget;ie({...j,[It]:le(Gt,ye)})},[j,ie,we,ye]),Wt=(0,s.useCallback)((Bt,It)=>{const Gt=!Se(Bt);He({...we,[It]:Gt}),!Gt&&ie({...j,[It]:Bt})},[j,ie,we,He,Se]);return Z.config.featureToggles.transformationsVariableSupport?s.createElement(s.Fragment,null,s.createElement(it.X,{value:String(j.from),invalid:we.from,error:"Value needs to be an integer or a variable",placeholder:"From",onChange:Bt=>Wt(Bt,"from"),suggestions:rt}),s.createElement("div",{className:"gf-form-label"},"and"),s.createElement(it.X,{invalid:we.to,error:"Value needs to be an integer or a variable",value:String(j.to),placeholder:"To",suggestions:rt,onChange:Bt=>Wt(Bt,"to")})):s.createElement(s.Fragment,null,s.createElement(ot.I,{className:"flex-grow-1 gf-form-spacing",invalid:we.from,defaultValue:String(j.from),placeholder:"From",onChange:Bt=>ht(Bt,"from"),onBlur:Bt=>bt(Bt,"from")}),s.createElement("div",{className:"gf-form-label"},"and"),s.createElement(ot.I,{className:"flex-grow-1",invalid:we.to,defaultValue:String(j.to),placeholder:"To",onChange:Bt=>ht(Bt,"to"),onBlur:Bt=>bt(Bt,"to")}))}}const je=()=>[{name:"Is between",id:Y.mE.between,component:Ne({validator:ce.f6})}];function ut(B){return function({options:j,onChange:ie,field:ye}){const{validator:Se,converter:we=le}=B,{value:He}=j,[Qe,rt]=(0,s.useState)(!Se(He)),ht=(0,s.useCallback)(Wt=>{rt(!Se(Wt.currentTarget.value))},[rt,Se]),bt=(0,s.useCallback)(Wt=>{if(Qe)return;const{value:Bt}=Wt.currentTarget;ie({...j,value:we(Bt,ye)})},[j,ie,Qe,ye,we]);return s.createElement(ot.I,{className:"flex-grow-1",invalid:Qe,defaultValue:String(j.value),placeholder:"Value",onChange:ht,onBlur:bt})}}const Fe=()=>[{name:"Regex",id:Y.mE.regex,component:ut({validator:()=>!0,converter:B=>String(B)})}],Te=new he.B(()=>[...Oe(),...Ye(),...je(),...Fe()]),Ve=B=>{const{onDelete:V,onChange:j,filter:ie,fieldsInfo:ye}=B,{fieldsAsOptions:Se,fieldByDisplayName:we}=ye,He=J(ie,Se)??"",Qe=we[He],rt=Qe?tt(Qe):[],ht=ae(ie,rt),bt=Te.getIfExists(ht),Wt=(0,s.useCallback)(Gt=>{Gt?.value&&j({...ie,fieldName:Gt.value})},[j,ie]),Bt=(0,s.useCallback)(Gt=>{if(!Gt?.value)return;const mn=Gt.value,pa=X.U8.get(mn).getDefaultOptions(Qe);j({...ie,config:{id:mn,options:pa}})},[j,ie,Qe]),It=(0,s.useCallback)(Gt=>{j({...ie,config:{...ie.config,options:Gt}})},[j,ie]);return!Qe||!bt||!bt.component?null:s.createElement(Pe.Z,null,s.createElement(q._,{label:"Field",labelWidth:14},s.createElement(Ee.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:Se,value:ie.fieldName,onChange:Wt})),s.createElement(q._,{label:"Match"},s.createElement(Ee.Ph,{className:"width-12",placeholder:"Select test",options:rt,value:ht,onChange:Bt})),s.createElement(q._,{label:"Value",grow:!0},s.createElement(bt.component,{field:Qe,options:ie.config.options??{},onChange:It})),s.createElement(oe.x,{marginBottom:.5},s.createElement(fe.zx,{icon:"times",onClick:V,variant:"secondary"})))},tt=B=>{const V=[];for(const j of X.U8.list())!j.isApplicable(B)||!Te.getIfExists(j.id)||V.push({value:j.id,label:j.name,description:j.description});return V},ae=(B,V)=>{const j=V.find(ie=>ie.value===B.config.id);if(j&&j.value)return j.value;if(V[0]?.value)return V[0]?.value},J=(B,V)=>{const j=V.find(ie=>ie.value===B.fieldName);if(j&&j.value)return j.value;if(V[0]?.value)return V[0]?.value},te=[{label:"Include",value:ge.PQ.include},{label:"Exclude",value:ge.PQ.exclude}],de=[{label:"Match all",value:ge.ER.all},{label:"Match any",value:ge.ER.any}],be=B=>{const{input:V,options:j,onChange:ie}=B,ye=Ue(V),Se=(0,s.useCallback)(()=>{const ht=V[0],bt=ht.fields.find(It=>It.type!==H.fS.time);if(!bt)return;const Wt=(0,p.cloneDeep)(j.filters),Bt=X.U8.get(Y.mE.greater);Wt.push({fieldName:(0,ne.CZ)(bt,ht,V),config:{id:Bt.id,options:Bt.getDefaultOptions(bt)}}),ie({...j,filters:Wt})},[ie,j,V]),we=(0,s.useCallback)(ht=>{let bt=(0,p.cloneDeep)(j.filters);bt.splice(ht,1),ie({...j,filters:bt})},[j,ie]),He=(0,s.useCallback)((ht,bt)=>{let Wt=(0,p.cloneDeep)(j.filters);Wt[bt]=ht,ie({...j,filters:Wt})},[j,ie]),Qe=(0,s.useCallback)(ht=>{ie({...j,type:ht??ge.PQ.include})},[j,ie]),rt=(0,s.useCallback)(ht=>{ie({...j,match:ht??ge.ER.all})},[j,ie]);return s.createElement("div",null,s.createElement(q._,{label:"Filter type",labelWidth:16},s.createElement("div",{className:"width-15"},s.createElement(me.S,{options:te,value:j.type,onChange:Qe,fullWidth:!0}))),s.createElement(q._,{label:"Conditions",labelWidth:16},s.createElement("div",{className:"width-15"},s.createElement(me.S,{options:de,value:j.match,onChange:rt,fullWidth:!0}))),s.createElement(oe.x,{paddingLeft:2},j.filters.map((ht,bt)=>s.createElement(Ve,{key:bt,filter:ht,fieldsInfo:ye,onChange:Wt=>He(Wt,bt),onDelete:()=>we(bt)})),s.createElement(fe.zx,{icon:"plus",size:"sm",onClick:Se,variant:"secondary"},"Add condition")))},De={id:se.W.filterByValue,editor:be,transformation:re.Y.filterByValueTransformer,name:re.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source.",categories:new Set([b.w.Filter]),help:pe(se.W.filterByValue).helperDocs},Ue=B=>(0,s.useMemo)(()=>{const V={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(B)?B.reduce((j,ie)=>ie.fields.reduce((ye,Se)=>{const we=(0,ne.CZ)(Se,ie,B);return ye.fieldByDisplayName[we]||(ye.fieldsAsOptions.push({label:we,value:we,type:Se.type}),ye.fieldByDisplayName[we]=Se),ye},j),V):V},[B]);var We=e(59889),et=e(41540),ze=e(99940),_e=e(63801),qe=e(60971);function at(B,V){const j={data:B.input,options:B.options},ie=new ze.j({id:"root",title:"root"}),ye=we=>{if(we?.length){const He=we[0];let Qe=ie.categories.find(rt=>rt.props.id===He);return Qe||(Qe=new ze.j({id:He,title:He}),ie.categories.push(Qe)),Qe}return ie},Se={getValue:we=>(0,p.get)(B.options,we),onChange:(we,He)=>{B.onChange((0,qe.hs)(B.options,we,He))}};return(0,_e.HZ)(V,Se,ye,j),ie}function lt(B){const V={data:[],options:{}},j={},ie=new et.rt;B(ie,V);for(const ye of ie.getItems())ye.defaultValue!=null&&(0,p.set)(j,ye.path,ye.defaultValue);return j}var ft=e(66872),yt=e(42882);const wt=(B,V)=>{const j=V.options??{};(0,ft.J)("",B,j)},zt=B=>{(0,s.useEffect)(()=>{if(!B.options.xBuckets?.mode){const j=lt(wt);B.onChange({...j,...B.options})}});const V=at(B,wt);return s.createElement("div",null,s.createElement("div",null,V.items.map(j=>j.render())))},$t={id:yt.Oy.id,editor:zt,transformation:yt.Oy,name:yt.Oy.name,description:yt.Oy.description,state:We.BV.alpha,categories:new Set([b.w.CreateNewVisualization]),help:pe(yt.Oy.id).helperDocs};var Ie=e(76932),st=e(76067),Mt=e(45418),ct=e(66542),nt=e(79043),Ct=e(91507),kt=e(61767),Jt=e(47423),tn=e(6803);function Kt(B,V,j){const ie={},ye={};for(const Se of B.fields){const we=(0,ne.CZ)(Se,B),Qe=j.index[we].handler;if(!Qe)continue;const rt=Se.values[V];if(rt==null)continue;const ht=Qe.processor(rt,ie,ye);ht!=null&&(ie[Qe.targetProperty??Qe.key]=ht)}return ye.mappingValues&&(ie.mappings=Sn(ye)),ie}var cn=(B=>(B.Name="field.name",B.Value="field.value",B.Label="field.label",B.Ignore="__ignore",B))(cn||{});const dn=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Ut},{key:"min",processor:Ut},{key:"unit",processor:B=>B.toString()},{key:"decimals",processor:Ut},{key:"displayName",name:"Display name",processor:B=>B.toString()},{key:"color",processor:B=>({fixedColor:B,mode:Ct.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(B,V)=>{const j=(0,kt.I)(B);if(!isNaN(j))return V.thresholds||(V.thresholds={mode:Jt.H.Absolute,steps:[{value:-1/0,color:"green"}]}),V.thresholds.steps.push({value:j,color:"red"}),V.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:ct.gz.allValues,processor:(B,V,j)=>{if((0,p.isArray)(B))return j.mappingValues=B,V.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:ct.gz.allValues,processor:(B,V,j)=>{if((0,p.isArray)(B))return j.mappingColors=B,V.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:ct.gz.allValues,processor:(B,V,j)=>{if((0,p.isArray)(B))return j.mappingTexts=B,V.mappings}}];function Sn(B){const V={type:tn.H.ValueToText,options:{}};if(!B.mappingValues)return[];for(let j=0;j<B.mappingValues.length;j++){const ie=B.mappingValues[j];ie!=null&&(V.options[ie.toString()]={color:B.mappingColors&&B.mappingColors[j],text:B.mappingTexts&&B.mappingTexts[j],index:j})}return[V]}let Zn=null;function _n(){if(Zn===null){Zn={};for(const B of dn)Zn[B.key]=B}return Zn}function Ut(B){const V=(0,kt.I)(B);if(!isNaN(V))return V}function Xt(B,V){for(const j of V)if(B===j.fieldName)return j.handlerKey;return B.toLowerCase()}function en(B){return B?_n()[B]:null}function gn(B,V,j){const ie={index:{}};let ye=V.find(we=>we.handlerKey==="field.name"),Se=V.find(we=>we.handlerKey==="field.value");for(const we of B.fields){const He=(0,ne.CZ)(we,B),Qe=V.find(bt=>bt.fieldName===He),rt=Qe?Qe.handlerKey:He.toLowerCase();let ht=en(rt);j&&(ht?(ht.key==="field.name"&&(ie.nameField=we),ht.key==="field.value"&&(ie.valueField=we)):Qe||(!ie.nameField&&!ye&&we.type===H.fS.string&&(ie.nameField=we,ht=en("field.name")),!ie.valueField&&!Se&&we.type===H.fS.number&&(ie.valueField=we,ht=en("field.value")))),!ht&&j&&(ht=en("field.label")),ie.index[He]={automatic:!Qe,handler:ht,reducerId:Qe?.reducerId??ht?.defaultReducer??ct.gz.lastNotNull}}return ie}function ln({frame:B,mappings:V,onChange:j,withReducers:ie,withNameAndValue:ye}){const Se=(0,st.wW)(Ln),we=xn(B,V,ye),He=dn.map(ht=>Dn(ht,!1)),Qe=(ht,bt)=>{const Wt=V.findIndex(Bt=>Bt.fieldName===ht.fieldName);if(bt)if(Wt!==-1){const Bt=[...V];Bt.splice(Wt,1,{...V[Wt],handlerKey:bt.value}),j(Bt)}else j([...V,{fieldName:ht.fieldName,handlerKey:bt.value}]);else j(Wt!==-1?V.filter((Bt,It)=>It!==Wt):[...V,{fieldName:ht.fieldName,handlerKey:"__ignore"}])},rt=(ht,bt)=>{const Wt=V.findIndex(Bt=>Bt.fieldName===ht.fieldName);if(Wt!==-1){const Bt=[...V];Bt.splice(Wt,1,{...V[Wt],reducerId:bt}),j(Bt)}else j([...V,{fieldName:ht.fieldName,handlerKey:ht.handlerKey,reducerId:bt}])};return s.createElement("table",{className:Se.table},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Field"),s.createElement("th",null,"Use as"),ie&&s.createElement("th",null,"Select"))),s.createElement("tbody",null,we.map(ht=>s.createElement("tr",{key:ht.fieldName},s.createElement("td",{className:Se.labelCell},ht.fieldName),s.createElement("td",{className:Se.selectCell,"data-testid":`${ht.fieldName}-config-key`},s.createElement(Ee.Ph,{options:He,value:ht.configOption,placeholder:ht.placeholder,isClearable:!0,onChange:bt=>Qe(ht,bt)})),ie&&s.createElement("td",{"data-testid":`${ht.fieldName}-reducer`,className:Se.selectCell},s.createElement(nt.m,{stats:[ht.reducerId],defaultStat:ht.reducerId,onChange:bt=>rt(ht,bt[0])}))))))}function xn(B,V,j){const ie=[],ye=gn(B,V??[],j);for(const Se of B.fields){const we=(0,ne.CZ)(Se,B),He=ye.index[we],Qe=Dn(He.handler,He.automatic);ie.push({fieldName:we,configOption:He.automatic?null:Qe,placeholder:He.automatic?Qe?.label:"Choose",handlerKey:He.handler?.key??null,reducerId:He.reducerId})}for(const Se of V)if(!ie.find(we=>we.fieldName===Se.fieldName)){const we=en(Se.handlerKey);ie.push({fieldName:Se.fieldName,handlerKey:Se.handlerKey,configOption:Dn(we,!1),missingInFrame:!0,reducerId:Se.reducerId??ct.gz.lastNotNull})}return Object.values(ie)}function Dn(B,V){if(!B)return null;let j=B.name??(0,p.capitalize)(B.key);return V&&(j=`${j} (auto)`),{label:j,value:B.key}}const Ln=B=>({table:(0,Ie.css)`
    margin-top: ${B.spacing(1)};

    td,
    th {
      border-right: 4px solid ${B.colors.background.primary};
      border-bottom: 4px solid ${B.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${B.typography.bodySmall.fontSize};
      line-height: ${B.spacing(4)};
      padding: ${B.spacing(0,1)};
    }
  `,labelCell:(0,Ie.css)`
    font-size: ${B.typography.bodySmall.fontSize};
    background: ${B.colors.background.secondary};
    padding: ${B.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:(0,Ie.css)`
    padding: 0;
    min-width: 161px;
  `});var hn=e(4558);function Gn(B,V){let j=null;for(const He of V)if(He.refId===B.configRefId){j=He;break}if(!j)return V;const ie={fields:[],length:1},ye=gn(j,B.mappings??[],!1);for(const He of j.fields){const Qe={...He},rt=(0,ne.CZ)(He,j),ht=ye.index[rt],bt=(0,ct.Kx)({field:He,reducers:[ht.reducerId]});Qe.values=[bt[ht.reducerId]],ie.fields.push(Qe)}const Se=[],we=(0,X.sq)(B.applyTo||{id:Y.mi.numeric});for(const He of V){if(He===j&&V.length>1)continue;const Qe={fields:[],length:He.length,refId:He.refId};for(const rt of He.fields)if(we(rt,He,V)){const ht=Kt(ie,0,ye);Qe.fields.push({...rt,config:{...rt.config,...ht}})}else Qe.fields.push(rt);Se.push(Qe)}return Se}const Vn={id:se.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data.",defaultOptions:{configRefId:"config",mappings:[]},operator:B=>V=>V.pipe((0,hn.U)(j=>Gn(B,j)))};function $n({input:B,onChange:V,options:j}){const ie=(0,st.wW)(Pn),ye=B.map(Bt=>Bt.refId).filter(Bt=>Bt!=null).map(Bt=>({label:Bt,value:Bt})),Se=j.configRefId||"config",we=j.applyTo??{id:Y.mi.byType,options:"number"},He=Mt.i.get(we.id),Qe=B.find(Bt=>Bt.refId===Se),rt=Bt=>{V({...j,configRefId:Bt.value||"config"})},ht=Bt=>{V({...j,applyTo:{id:Bt.value}})},bt=Bt=>{V({...j,applyTo:{id:we.id,options:Bt}})},Wt=Mt.i.list().filter(Bt=>!Bt.excludeFromPicker).map(Bt=>({label:Bt.name,value:Bt.id,description:Bt.description}));return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Config query",labelWidth:20},s.createElement(Ee.Ph,{onChange:rt,options:ye,value:Se,width:30}))),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Apply to",labelWidth:20},s.createElement(Ee.Ph,{onChange:ht,options:Wt,value:we.id,width:30}))),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Apply to options",labelWidth:20,className:ie.matcherOptions},s.createElement(He.component,{matcher:He.matcher,data:B,options:we.options,onChange:bt}))),s.createElement(Pe.Z,null,Qe&&s.createElement(ln,{frame:Qe,mappings:j.mappings,onChange:Bt=>V({...j,mappings:Bt}),withReducers:!0})))}const Wn={id:Vn.id,editor:$n,transformation:Vn,name:Vn.name,description:Vn.description,state:We.BV.beta,categories:new Set([b.w.CalculateNewFields]),help:pe(Vn.id).helperDocs},Pn=B=>({matcherOptions:(0,Ie.css)`
    min-width: 404px;
  `});var sa=e(86457),va=e(77077),An=e(55589),Xn=e(76772),ra=e(43280);const ga=16,ys=B=>{const{options:V,onChange:j}=B,{binary:ie}=V;let ye=!ie?.left,Se=!ie?.right;const we=B.names.map(It=>(It===ie?.left&&(ye=!0),It===ie?.right&&(Se=!0),{label:It,value:It})),He=ye?we:[...we,{label:ie?.left,value:ie?.left}],Qe=Se?we:[...we,{label:ie?.right,value:ie?.right}],rt=ra.n.list().map(It=>({label:It.binaryOperationID,value:It.binaryOperationID})),ht=It=>{j({...V,mode:An.ie.BinaryOperation,binary:It})},bt=It=>{ht({...ie,left:It.value})},Wt=It=>{ht({...ie,right:It.value})},Bt=It=>{ht({...ie,operator:It.value})};return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Operation",labelWidth:ga},s.createElement(Ee.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:He,className:"min-width-18",value:ie?.left,onChange:bt})),s.createElement(q._,null,s.createElement(Ee.Ph,{className:"width-4",options:rt,value:ie?.operator??rt[0].value,onChange:Bt})),s.createElement(q._,null,s.createElement(Ee.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:Qe,value:ie?.right,onChange:Wt}))))},ds=B=>{const{names:V,onChange:j,options:ie}=B,{cumulative:ye}=ie,Se=V.map(rt=>({label:rt,value:rt})),we=rt=>{const ht=rt.length?rt[0]:ct.gz.sum;He({...ye,reducer:ht})},He=rt=>{j({...ie,mode:An.ie.CumulativeFunctions,cumulative:rt})},Qe=rt=>{He({...ye,field:rt.value})};return s.createElement(s.Fragment,null,s.createElement(q._,{label:"Field",labelWidth:ga},s.createElement(Ee.Ph,{placeholder:"Field",options:Se,className:"min-width-18",value:ye?.field,onChange:Qe})),s.createElement(q._,{label:"Calculation",labelWidth:ga},s.createElement(nt.m,{allowMultiple:!1,className:"width-18",stats:[ye?.reducer||ct.gz.sum],onChange:we,defaultStat:ct.gz.sum,filterOptions:rt=>rt.id===ct.gz.sum||rt.id===ct.gz.mean})))},Ja=B=>{const{options:V,onChange:j}=B,{index:ie}=V,ye=Se=>{j({...V,index:{asPercentile:Se.currentTarget.checked}})};return s.createElement(s.Fragment,null,s.createElement(q._,{labelWidth:ga,label:"As percentile",tooltip:"Transform the row index as a percentile."},s.createElement(Xn.x,{value:!!ie?.asPercentile,onChange:ye})))};var _a=e(79106),ls=e(65050);const Es=B=>{const{names:V,selected:j,onChange:ie,options:ye}=B,{reduce:Se}=ye,we=ht=>{ie({...ye,reduce:ht})},He=ht=>{j.indexOf(ht)>-1?Qe(j.filter(bt=>bt!==ht)):Qe([...j,ht])},Qe=ht=>{we({...Se,include:ht})},rt=ht=>{const bt=ht.length?ht[0]:ct.gz.sum,{reduce:Wt}=ye;we({...Wt,reducer:bt})};return s.createElement(s.Fragment,null,s.createElement(q._,{label:"Operation",labelWidth:ga,grow:!0},s.createElement(_a.Lh,{spacing:"xs",align:"flex-start",wrap:!0},V.map((ht,bt)=>s.createElement(ls.B,{key:`${ht}/${bt}`,onClick:()=>{He(ht)},label:ht,selected:j.indexOf(ht)>-1})))),s.createElement(q._,{label:"Calculation",labelWidth:ga},s.createElement(nt.m,{allowMultiple:!1,className:"width-18",stats:[Se?.reducer||ct.gz.sum],onChange:rt,defaultStat:ct.gz.sum})))};var Os=e(95961),ts=e(20888);const Xa=B=>{const{options:V,onChange:j}=B,{unary:ie}=V,ye=bt=>{j({...V,mode:An.ie.UnaryOperation,unary:bt})},Se=bt=>{ye({...ie,operator:bt.value})},we=bt=>{ye({...ie,fieldName:bt.value})};let He=!ie?.fieldName;const Qe=B.names.map(bt=>(bt===ie?.fieldName&&(He=!0),{label:bt,value:bt})),rt=Os.m.list().map(bt=>({label:bt.unaryOperationID,value:bt.unaryOperationID})),ht=He?Qe:[...Qe,{label:ie?.fieldName,value:ie?.fieldName}];return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Operation",labelWidth:ga},s.createElement(Ee.Ph,{options:rt,value:ie?.operator??rt[0].value,onChange:Se})),s.createElement(q._,{label:"(",labelWidth:2},s.createElement(Ee.Ph,{placeholder:"Field",className:"min-width-11",options:ht,value:ie?.fieldName,onChange:we})),s.createElement(ts.W,{width:2},")")))};var bs=e(13742);const Nr=B=>{const{options:V,names:j,onChange:ie}=B,{window:ye}=V,Se=j.map(It=>({label:It,value:It})),we=[{label:"Trailing",value:An.Hx.Trailing},{label:"Centered",value:An.Hx.Centered}],He=[{label:"Percentage",value:An.iO.Percentage},{label:"Fixed",value:An.iO.Fixed}],Qe=It=>{ie({...V,mode:An.ie.WindowFunctions,window:It})},rt=It=>{Qe({...ye,field:It.value})},ht=It=>{Qe({...ye,windowSize:It&&ye?.windowSizeMode===An.iO.Percentage?It/100:It})},bt=It=>{const Gt=It;Qe({...ye,windowSize:ye?.windowSize?Gt===An.iO.Percentage?ye.windowSize/100:ye.windowSize*100:void 0,windowSizeMode:Gt})},Wt=It=>{const Gt=It.length?It[0]:ct.gz.sum;Qe({...ye,reducer:Gt})},Bt=It=>{Qe({...ye,windowAlignment:It})};return s.createElement(s.Fragment,null,s.createElement(q._,{label:"Field",labelWidth:ga},s.createElement(Ee.Ph,{placeholder:"Field",options:Se,className:"min-width-18",value:ye?.field,onChange:rt})),s.createElement(q._,{label:"Calculation",labelWidth:ga},s.createElement(nt.m,{allowMultiple:!1,className:"width-18",stats:[ye?.reducer||ct.gz.mean],onChange:Wt,defaultStat:ct.gz.mean,filterOptions:It=>It.id===ct.gz.mean||It.id===ct.gz.variance||It.id===ct.gz.stdDev})),s.createElement(q._,{label:"Type",labelWidth:ga},s.createElement(me.S,{value:ye?.windowAlignment??An.Hx.Trailing,options:we,onChange:Bt})),s.createElement(q._,{label:"Window size mode"},s.createElement(me.S,{value:ye?.windowSizeMode??An.iO.Percentage,options:He,onChange:bt})),s.createElement(q._,{label:ye?.windowSizeMode===An.iO.Percentage?"Window size %":"Window size",labelWidth:ga,tooltip:ye?.windowSizeMode===An.iO.Percentage?"Set the window size as a percentage of the total data":"Window size"},s.createElement(bs.Y,{placeholder:"Auto",min:.1,value:ye?.windowSize&&ye.windowSizeMode===An.iO.Percentage?ye.windowSize*100:ye?.windowSize,onChange:ht})))},cs=[{value:An.ie.BinaryOperation,label:"Binary operation"},{value:An.ie.UnaryOperation,label:"Unary operation"},{value:An.ie.ReduceRow,label:"Reduce row"},{value:An.ie.Index,label:"Row index"}];Z.config.featureToggles.addFieldFromCalculationStatFunctions&&cs.push({value:An.ie.CumulativeFunctions,label:"Cumulative functions"},{value:An.ie.WindowFunctions,label:"Window functions"});const ks=new Set([H.fS.time,H.fS.number,H.fS.string]),Hs=B=>{const{options:V,onChange:j,input:ie}=B,ye=V?.reduce?.include,[Se,we]=(0,s.useState)({names:[],selected:[]});(0,s.useEffect)(()=>{const It={interpolate:mn=>mn},Gt=(0,sa.of)(ie).pipe(re.Y.ensureColumnsTransformer.operator(null,It),Qe(),He(),rt(ye||[])).subscribe(({selected:mn,names:pa})=>{we({names:pa,selected:mn})});return()=>{Gt.unsubscribe()}},[ie,ye]);const He=()=>{if(!Z.config.featureToggles.transformationsVariableSupport)return va.y;const It=(0,ke.J)();return Gt=>Gt.pipe((0,hn.U)(mn=>(mn.push(...It.getVariables().map(pa=>"$"+pa.name)),mn)))},Qe=()=>It=>It.pipe((0,hn.U)(Gt=>{const mn=[],pa={};for(const Sa of Gt)for(const da of Sa.fields){if(!ks.has(da.type))continue;const $a=(0,ne.CZ)(da,Sa,Gt);pa[$a]||(pa[$a]=!0,mn.push($a))}return mn})),rt=It=>Gt=>Gt.pipe((0,hn.U)(mn=>{if(!It.length)return{names:mn,selected:[]};const pa=[],Sa=[];for(const da of mn)It.includes(da)&&Sa.push(da),pa.push(da);return{names:pa,selected:Sa}})),ht=It=>{j({...V,replaceFields:It.currentTarget.checked})},bt=It=>{const Gt=It.value??An.ie.BinaryOperation;Gt===An.ie.WindowFunctions&&(V.window=V.window??An.a1),j({...V,mode:Gt})},Wt=It=>{j({...V,alias:It.target.value})},Bt=V.mode??An.ie.BinaryOperation;return s.createElement(s.Fragment,null,s.createElement(q._,{labelWidth:ga,label:"Mode"},s.createElement(Ee.Ph,{className:"width-18",options:cs,value:cs.find(It=>It.value===Bt),onChange:bt})),Bt===An.ie.BinaryOperation&&s.createElement(ys,{options:V,names:Se.names,onChange:B.onChange}),Bt===An.ie.UnaryOperation&&s.createElement(Xa,{names:Se.names,options:V,onChange:B.onChange}),Bt===An.ie.ReduceRow&&s.createElement(Es,{names:Se.names,selected:Se.selected,options:V,onChange:B.onChange}),Bt===An.ie.CumulativeFunctions&&s.createElement(ds,{names:Se.names,options:V,onChange:B.onChange}),Bt===An.ie.WindowFunctions&&s.createElement(Nr,{names:Se.names,options:V,onChange:B.onChange}),Bt===An.ie.Index&&s.createElement(Ja,{options:V,onChange:B.onChange}),s.createElement(q._,{labelWidth:ga,label:"Alias"},s.createElement(ot.I,{className:"width-18",value:V.alias??"",placeholder:(0,An.h)(V),onChange:Wt})),s.createElement(q._,{labelWidth:ga,label:"Replace all fields"},s.createElement(Xn.x,{value:!!V.replaceFields,onChange:ht})))},qa={id:se.W.calculateField,editor:Hs,transformation:re.Y.calculateFieldTransformer,name:re.Y.calculateFieldTransformer.name,description:"Use the row values to calculate a new field.",categories:new Set([b.w.CalculateNewFields]),help:pe(se.W.calculateField).helperDocs};var za=e(6420);const Is=[{value:za.HO.FieldName,label:"Copy frame name to field name"},{value:za.HO.Label,label:"Add a label with the frame name"},{value:za.HO.Drop,label:"Ignore the frame name"}];class vr extends s.PureComponent{constructor(V){super(V),this.onModeChanged=j=>{const{options:ie,onChange:ye}=this.props,Se=j.value??za.HO.FieldName;ye({...ie,frameNameMode:Se})},this.onLabelChanged=j=>{const{options:ie}=this.props;this.props.onChange({...ie,frameNameLabel:j.target.value})}}render(){const{options:V}=this.props,j=V.frameNameMode??za.HO.FieldName;return s.createElement("div",null,s.createElement(q._,{label:"Name",labelWidth:16,grow:!0},s.createElement(Ee.Ph,{width:36,options:Is,value:Is.find(ie=>ie.value===j),onChange:this.onModeChanged})),j===za.HO.Label&&s.createElement(q._,{label:"Label",labelWidth:16,grow:!0},s.createElement(ot.I,{width:36,value:V.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged})))}}const dr={id:se.W.concatenate,editor:vr,transformation:re.Y.concatenateTransformer,name:re.Y.concatenateTransformer.name,description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",categories:new Set([b.w.Combine]),help:pe(se.W.concatenate).helperDocs};var Ns=e(10020),Wr=e(94993),$o=e(19679),sr=e(24353),Gr=e(4113),ka=e(49311),Fr=e(65008),Vs=e(41354);const Eo=({transformIndex:B,value:V,index:j,mappedIndex:ie,onChangeEnumValue:ye,onRemoveEnumRow:Se,checkIsEnumUniqueValue:we})=>{const He=(0,st.wW)(io),[Qe,rt]=(0,s.useState)(V),[ht,bt]=(0,s.useState)(Qe===""),[Wt,Bt]=(0,s.useState)(null),It=(0,s.useRef)(null);(0,s.useEffect)(()=>{It.current&&It.current.focus()},[It]);const Gt=$a=>{$a.currentTarget.value!==""&&we($a.currentTarget.value)&&$a.currentTarget.value!==V?Bt("Enum value already exists"):Bt(null),rt($a.currentTarget.value)},mn=()=>{if(bt(!1),Bt(null),Qe===""||Wt!==null){Se(ie);return}ye(ie,Qe)},pa=$a=>{$a.key==="Enter"&&($a.preventDefault(),mn())},Sa=()=>{bt(!0)},da=()=>{Se(ie)};return s.createElement(Gr._l,{key:`${B}/${V}`,draggableId:`${B}/${V}`,index:j},$a=>s.createElement("tr",{key:j,ref:$a.innerRef,...$a.draggableProps},s.createElement("td",null,s.createElement("div",{className:He.dragHandle,...$a.dragHandleProps},s.createElement(ka.J,{name:"draggabledots",size:"lg"}))),ht?s.createElement("td",null,s.createElement(ot.I,{ref:It,type:"text",value:Qe,onChange:Gt,onBlur:mn,onKeyDown:pa}),Wt&&s.createElement(Fr.S,null,Wt)):s.createElement("td",{onClick:Sa,className:He.clickableTableCell},V&&V!==""?V:"Click to edit"),s.createElement("td",{className:He.textAlignCenter},s.createElement(_a.Lh,{spacing:"sm"},s.createElement(Vs.h,{name:"trash-alt",onClick:da,"data-testid":"remove-enum-row","aria-label":"Delete enum row",tooltip:"Delete"})))))},io=B=>({dragHandle:(0,Ie.css)({cursor:"grab"}),textAlignCenter:(0,Ie.css)({textAlign:"center"}),clickableTableCell:(0,Ie.css)({cursor:"pointer",width:"100px","&:hover":{color:B.colors.text.maxContrast}})}),Er=Eo,Ro=({input:B,options:V,transformIndex:j,onChange:ie})=>{const ye=(0,st.wW)(Ss),[Se,we]=(0,s.useState)(V.conversions[j].enumConfig?.text??[]);(0,s.useEffect)(()=>{!V.conversions[j].enumConfig?.text?.length&&B.length&&He()},[B]),(0,s.useEffect)(()=>{(()=>{const Gt=Se.map(Sa=>Sa),mn=V.conversions,pa={text:Gt};mn[j]={...mn[j],enumConfig:pa},ie({...V,conversions:mn})})()},[j,Se]);const He=()=>{const It=B.flatMap(mn=>mn?.fields??[]).find(mn=>mn.name===V.conversions[j].targetField);if(!It)return;const Gt=new Set(It?.values);Se.length>0&&!(0,p.isEqual)(Se,Array.from(Gt))&&!window.confirm("This action will overwrite the existing configuration. Are you sure you want to continue?")||we([...Gt])},Qe=(It,Gt)=>{const mn=[...Se];mn.splice(It,1,Gt),we(mn)},rt=It=>{const Gt=[...Se];Gt.splice(It,1),we(Gt)},ht=()=>{we(["",...Se])},bt=(It,Gt)=>{Se.includes(Gt)||Qe(It,Gt)},Wt=It=>Se.includes(It),Bt=It=>{if(!It.destination)return;const Gt=Se.length-It.source.index-1,mn=Se.length-It.destination.index-1,pa=[...Se],Sa=pa[Gt];pa.splice(Gt,1),pa.splice(mn,0,Sa),we(pa)};return s.createElement(Pe.Z,null,s.createElement(_a.Lh,null,s.createElement(fe.zx,{size:"sm",icon:"plus",onClick:()=>He(),className:ye.button},"Generate enum values from data"),s.createElement(fe.zx,{size:"sm",icon:"plus",onClick:()=>ht(),className:ye.button},"Add enum value")),s.createElement(_a.wc,null,s.createElement("table",{className:ye.compactTable},s.createElement(Gr.Z5,{onDragEnd:Bt},s.createElement(Gr.bK,{droppableId:"sortable-enum-config-mappings",direction:"vertical"},It=>s.createElement("tbody",{ref:It.innerRef,...It.droppableProps},[...Se].reverse().map((Gt,mn)=>{const pa=Se.length-mn-1;return s.createElement(Er,{key:`${j}/${Gt}`,transformIndex:j,value:Gt,index:mn,mappedIndex:pa,onChangeEnumValue:bt,onRemoveEnumRow:rt,checkIsEnumUniqueValue:Wt})}),It.placeholder))))))},Ss=B=>({compactTable:(0,Ie.css)({"tbody td":{padding:B.spacing(.5)},marginTop:B.spacing(1),marginBottom:B.spacing(2)}),button:(0,Ie.css)({marginTop:B.spacing(1)})}),rs={settings:{width:24,isClearable:!1}},jr=({input:B,options:V,onChange:j})=>{const ie=$o.OL.filter(Wt=>Wt.value!==H.fS.trace),ye=(0,ce.rm)(!0),Se=(0,Ns.ZV)();ye.push({label:"Browser",value:"browser"}),ye.push({label:"UTC",value:"utc"});for(const Wt of Se)ye.push({label:Wt,value:Wt});const we=(0,s.useCallback)(Wt=>Bt=>{const It=V.conversions;It[Wt]={...It[Wt],targetField:Bt??"",dateFormat:void 0},j({...V,conversions:It})},[j,V]),He=(0,s.useCallback)(Wt=>Bt=>{const It=V.conversions;It[Wt]={...It[Wt],destinationType:Bt.value},j({...V,conversions:It})},[j,V]),Qe=(0,s.useCallback)(Wt=>Bt=>{const It=V.conversions;It[Wt]={...It[Wt],dateFormat:Bt.currentTarget.value},j({...V,conversions:It})},[j,V]),rt=(0,s.useCallback)(()=>{j({...V,conversions:[...V.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[j,V]),ht=(0,s.useCallback)(Wt=>{const Bt=V.conversions;Bt.splice(Wt,1),j({...V,conversions:Bt})},[j,V]),bt=(0,s.useCallback)(Wt=>Bt=>{const It=V.conversions;It[Wt]={...It[Wt],timezone:Bt?.value},j({...V,conversions:It})},[j,V]);return s.createElement(s.Fragment,null,V.conversions.map((Wt,Bt)=>s.createElement("div",{key:`${Wt.targetField}-${Bt}`},s.createElement(Pe.Z,null,s.createElement(q._,{label:"Field"},s.createElement(Wr.b,{context:{data:B},value:Wt.targetField??"",onChange:we(Bt),item:rs})),s.createElement(q._,{label:"as"},s.createElement(Ee.Ph,{options:ie,value:Wt.destinationType,placeholder:"Type",onChange:He(Bt),width:18})),Wt.destinationType===H.fS.time&&s.createElement(q._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},s.createElement(ot.I,{value:Wt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Qe(Bt),width:24})),Wt.destinationType===H.fS.string&&(Wt.dateFormat||(0,sr.findField)(B?.[0],Wt.targetField)?.type===H.fS.time)&&s.createElement(s.Fragment,null,s.createElement(q._,{label:"Date format",tooltip:"Specify the output format."},s.createElement(ot.I,{value:Wt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Qe(Bt),width:24})),s.createElement(q._,{label:"Set timezone",tooltip:"Set the timezone of the date manually"},s.createElement(Ee.Ph,{options:ye,value:Wt.timezone,onChange:bt(Bt),isClearable:!0}))),s.createElement(fe.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>ht(Bt),"aria-label":"Remove convert field type transformer"})),Wt.destinationType===H.fS.enum&&s.createElement(Ro,{input:B,options:V,transformIndex:Bt,onChange:j}))),s.createElement(fe.zx,{size:"sm",icon:"plus",onClick:rt,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Oa={id:se.W.convertFieldType,editor:jr,transformation:re.Y.convertFieldTypeTransformer,name:re.Y.convertFieldTypeTransformer.name,description:re.Y.convertFieldTypeTransformer.description,categories:new Set([b.w.Reformat]),help:pe(se.W.convertFieldType).helperDocs};var Ka=e(84834);class Un extends s.PureComponent{constructor(V){super(V),this.onFieldToggle=j=>{const{selected:ie}=this.state;ie.indexOf(j)>-1?this.onChange(ie.filter(ye=>ye!==j)):this.onChange([...ie,j])},this.onChange=j=>{const{regex:ie,isRegexValid:ye}=this.state,Se={...this.props.options,include:{names:j}};ie&&ye&&(Se.include=Se.include??{},Se.include.pattern=ie),this.setState({selected:j},()=>{this.props.onChange(Se)})},this.onInputBlur=j=>{const{selected:ie,regex:ye}=this.state;let Se=!0;try{ye&&(0,Ka.jO)(ye)}catch{Se=!1}Se?this.props.onChange({...this.props.options,include:{pattern:ye}}):this.props.onChange({...this.props.options,include:{names:ie}}),this.setState({isRegexValid:Se})},this.onVariableChange=j=>{this.props.onChange({...this.props.options,include:{variable:j.value}}),this.setState({variable:j.value})},this.onFromVariableChange=j=>{const ie=j.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:ie}),this.setState({byVariable:ie})},this.state={include:V.options.include?.names||[],regex:V.options.include?.pattern,variable:V.options.include?.variable,byVariable:V.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(V){this.props.input!==V.input&&this.initOptions()}initOptions(){const{input:V,options:j}=this.props,ie=Array.from(j.include?.names??[]),ye=(0,ke.J)().getVariables().map(He=>({label:"$"+He.name,value:"$"+He.name})),Se=[],we={};for(const He of V)for(const Qe of He.fields){const rt=(0,ne.CZ)(Qe,He,V);let ht=we[rt];ht||(ht=we[rt]={name:rt,count:0},Se.push(ht)),ht.count++}if(j.include?.pattern)try{const He=(0,Ka.jO)(j.include.pattern);for(const Qe of Se)He.test(Qe.name)&&ie.push(Qe.name)}catch(He){console.error(He)}if(ie.length){const He=Se.filter(Qe=>ie.includes(Qe.name));this.setState({options:Se,selected:He.map(Qe=>Qe.name),variables:ye,byVariable:j.byVariable||!1,variable:j.include?.variable,regex:j.include?.pattern})}else this.setState({options:Se,selected:Se.map(He=>He.name),variables:ye,byVariable:j.byVariable||!1,variable:j.include?.variable,regex:j.include?.pattern})}render(){const{options:V,selected:j,isRegexValid:ie}=this.state;return s.createElement("div",null,s.createElement(Pe.Z,{label:"Use variable"},s.createElement(q._,{label:"From variable"},s.createElement(Xn.x,{value:this.state.byVariable,onChange:this.onFromVariableChange}))),this.state.byVariable?s.createElement(Pe.Z,null,s.createElement(q._,{label:"Variable"},s.createElement(Ee.Ph,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]}))):s.createElement(Pe.Z,{label:"Identifier"},s.createElement(q._,{label:"Identifier",invalid:!ie,error:ie?void 0:"Invalid pattern"},s.createElement(ot.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:ye=>this.setState({regex:ye.currentTarget.value}),onBlur:this.onInputBlur,width:25})),V.map((ye,Se)=>{const we=`${ye.name}${ye.count>1?" ("+ye.count+")":""}`,He=j.indexOf(ye.name)>-1;return s.createElement(ls.B,{key:`${ye.name}/${Se}`,onClick:()=>{this.onFieldToggle(ye.name)},label:we,selected:He})})))}}const xt={id:se.W.filterFieldsByName,editor:Un,transformation:re.Y.filterFieldsByNameTransformer,name:re.Y.filterFieldsByNameTransformer.name,description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive.",categories:new Set([b.w.Filter]),help:pe(se.W.filterFieldsByName).helperDocs};class Tr extends s.PureComponent{constructor(V){super(V),this.onFieldToggle=j=>{const{selected:ie}=this.state;ie.indexOf(j)>-1?this.onChange(ie.filter(ye=>ye!==j)):this.onChange([...ie,j])},this.onChange=j=>{this.setState({selected:j}),this.props.onChange({...this.props.options,include:j.join("|")})},this.state={include:V.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(V){this.props.input!==V.input&&this.initOptions()}initOptions(){const{input:V,options:j}=this.props,ie=j.include?j.include.split("|"):[],ye=[],Se={};for(const we of V)if(we.refId){let He=Se[we.refId];He||(He=Se[we.refId]={refId:we.refId,count:0},ye.push(He)),He.count++}if(ie.length){const we=[],He=[];for(const Qe of ye)ie.includes(Qe.refId)&&He.push(Qe),we.push(Qe);this.setState({options:we,selected:He.map(Qe=>Qe.refId)})}else this.setState({options:ye,selected:[]})}render(){const{options:V,selected:j}=this.state,{input:ie}=this.props;return s.createElement(s.Fragment,null,ie.length<=1&&s.createElement("div",null,s.createElement(Fr.S,null,"Filter data by query expects multiple queries in the input.")),s.createElement(q._,{label:"Series refId",labelWidth:16,shrink:!0},s.createElement(_a.Lh,{spacing:"xs",align:"flex-start",wrap:!0},V.map((ye,Se)=>{const we=`${ye.refId}${ye.count>1?" ("+ye.count+")":""}`,He=j.indexOf(ye.refId)>-1;return s.createElement(ls.B,{key:`${ye.refId}/${Se}`,onClick:()=>{this.onFieldToggle(ye.refId)},label:we,selected:He})}))))}}const Ao={id:se.W.filterByRefId,editor:Tr,transformation:re.Y.filterFramesByRefIdTransformer,name:re.Y.filterFramesByRefIdTransformer.name,description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel.",categories:new Set([b.w.Filter]),help:pe(se.W.filterByRefId).helperDocs};var ur=e(23626);const Kr={settings:{width:30,filter:B=>B.type===H.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null};function mr({input:B,options:V,onChange:j}){const ie=(0,s.useCallback)(Qe=>{j({...V,stringField:Qe??""})},[j,V]),ye=(0,s.useCallback)(Qe=>{const rt=Qe.value??ur.vh.UpperCase;j({...V,outputFormat:rt})},[j,V]),Se=(0,s.useCallback)(Qe=>{j({...V,substringStart:Qe??0})},[j,V]),we=(0,s.useCallback)(Qe=>{j({...V,substringEnd:Qe??0})},[j,V]),He=Object.values(ur.vh).map(Qe=>({label:Qe,value:Qe}));return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Field",labelWidth:10},s.createElement(Wr.b,{context:{data:B},value:V.stringField??"",onChange:ie,item:Kr})),s.createElement(q._,{label:"Format",labelWidth:10},s.createElement(Ee.Ph,{options:He,value:V.outputFormat,onChange:ye,width:20}))),V.outputFormat===ur.vh.Substring&&s.createElement(Pe.Z,null,s.createElement(q._,{label:"Substring range",labelWidth:15},s.createElement(bs.Y,{min:0,value:V.substringStart??0,onChange:Se,width:7})),s.createElement(q._,null,s.createElement(bs.Y,{min:0,value:V.substringEnd??0,onChange:we,width:7}))))}const lo={id:se.W.formatString,editor:mr,transformation:re.Y.formatStringTransformer,name:re.Y.formatStringTransformer.name,state:We.BV.beta,description:re.Y.formatStringTransformer.description,categories:new Set([b.w.Reformat])};function Lo({input:B,options:V,onChange:j}){const ie=[],ye=(0,ce.rm)(!0);for(const Qe of B)for(const rt of Qe.fields)if(rt.type==="time"){const ht=(0,ne.CZ)(rt,Qe,B);ie.push({label:ht,value:ht})}const Se=(0,s.useCallback)(Qe=>{const rt=Qe?.value!==void 0?Qe.value:"";j({...V,timeField:rt})},[j,V]),we=(0,s.useCallback)(Qe=>{const rt=Qe.target.value;j({...V,outputFormat:rt})},[j,V]),He=(0,s.useCallback)(Qe=>{const rt=Qe?.value!==void 0?Qe.value:"";j({...V,timezone:rt})},[j,V]);return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Time Field",labelWidth:15,grow:!0},s.createElement(Ee.Ph,{options:ie,value:V.timeField,onChange:Se,placeholder:"time",isClearable:!0})),s.createElement(q._,{label:"Format",labelWidth:10,tooltip:s.createElement(s.Fragment,null,"The output format for the field specified as a"," ",s.createElement("a",{href:"https://momentjs.com/docs/#/displaying/",target:"_blank",rel:"noopener noreferrer"},"Moment.js format string"),"."),interactive:!0},s.createElement(ot.I,{onChange:we,value:V.outputFormat})),s.createElement(q._,{label:"Set Timezone",tooltip:"Set the timezone of the date manually",labelWidth:20},s.createElement(Ee.Ph,{options:ye,value:V.timezone,onChange:He,isClearable:!0}))))}const co={id:se.W.formatTime,editor:Lo,transformation:re.Y.formatTimeTransformer,name:re.Y.formatTimeTransformer.name,state:We.BV.alpha,description:re.Y.formatTimeTransformer.description,help:pe(se.W.formatTime).helperDocs};var Tt=e(13854),Pt=e(37739);const qt=({input:B,options:V,onChange:j})=>{const ie=(0,ce.Hg)(B),ye=(0,s.useCallback)(Se=>we=>{j({...V,fields:{...V.fields,[Se]:we}})},[j]);return s.createElement("div",null,ie.map(Se=>s.createElement(on,{onConfigChange:ye(Se),fieldName:Se,config:V.fields[Se],key:Se})))},jt=[{label:"Group by",value:Tt.x.groupBy},{label:"Calculate",value:Tt.x.aggregate}],on=({fieldName:B,config:V,onConfigChange:j})=>{const ie=(0,st.l4)(),ye=En(ie),Se=(0,s.useCallback)(we=>{j({aggregations:V?.aggregations??[],operation:we?.value??null})},[V,j]);return s.createElement(q._,{className:ye.label,label:B,grow:!0,shrink:!0},s.createElement(Pt.K,{gap:.5,direction:"row"},s.createElement("div",{className:ye.operation},s.createElement(Ee.Ph,{options:jt,value:V?.operation,placeholder:"Ignored",onChange:Se,isClearable:!0})),V?.operation===Tt.x.aggregate&&s.createElement(nt.m,{className:ye.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:V.aggregations,onChange:we=>{j({...V,aggregations:we})}})))},En=B=>({label:(0,Ie.css)`
      label {
        min-width: ${B.spacing(32)};
      }
    `,operation:(0,Ie.css)`
      flex-shrink: 0;
      height: 100%;
      width: ${B.spacing(24)};
    `,aggregations:(0,Ie.css)`
      flex-grow: 1;
    `}),Tn={id:se.W.groupBy,editor:qt,transformation:re.Y.groupByTransformer,name:re.Y.groupByTransformer.name,description:re.Y.groupByTransformer.description,categories:new Set([b.w.Combine,b.w.CalculateNewFields,b.w.Reformat]),help:pe(se.W.groupBy).helperDocs};var Nn=e(56528);const kn=({input:B,options:V,onChange:j})=>{const ie=(0,ce.Hg)(B).map(rt=>({label:rt,value:rt})),ye=(0,s.useCallback)(rt=>{j({...V,columnField:rt?.value})},[j,V]),Se=(0,s.useCallback)(rt=>{j({...V,rowField:rt?.value})},[j,V]),we=(0,s.useCallback)(rt=>{j({...V,valueField:rt?.value})},[j,V]),He=[{label:"Null",value:Nn.U.Null,description:"Null value"},{label:"True",value:Nn.U.True,description:"Boolean true value"},{label:"False",value:Nn.U.False,description:"Boolean false value"},{label:"Empty",value:Nn.U.Empty,description:"Empty string"}],Qe=(0,s.useCallback)(rt=>{j({...V,emptyValue:rt?.value})},[j,V]);return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Column",labelWidth:8},s.createElement(Ee.Ph,{options:ie,value:V.columnField,onChange:ye,isClearable:!0})),s.createElement(q._,{label:"Row",labelWidth:8},s.createElement(Ee.Ph,{options:ie,value:V.rowField,onChange:Se,isClearable:!0})),s.createElement(q._,{label:"Cell Value",labelWidth:10},s.createElement(Ee.Ph,{options:ie,value:V.valueField,onChange:we,isClearable:!0})),s.createElement(q._,{label:"Empty Value"},s.createElement(Ee.Ph,{options:He,value:V.emptyValue,onChange:Qe,isClearable:!0}))))},Ea={id:se.W.groupingToMatrix,editor:kn,transformation:re.Y.groupingToMatrixTransformer,name:re.Y.groupingToMatrixTransformer.name,description:"Takes a three fields combination and produces a Matrix.",categories:new Set([b.w.Combine,b.w.Reformat]),help:pe(se.W.groupingToMatrix).helperDocs};var ta=e(48493);const ia=({input:B,options:V,onChange:j})=>{const[ye,Se]=(0,s.useState)({bucketSize:!(0,ce.f6)(V.bucketSize||""),bucketOffset:!(0,ce.f6)(V.bucketOffset||"")}),we=(0,s.useCallback)(Bt=>{j({...V,bucketSize:Bt})},[j,V]),He=(0,s.useCallback)(Bt=>{j({...V,bucketOffset:Bt})},[j,V]),Qe=(0,s.useCallback)(Bt=>{Se({...ye,bucketSize:!(0,ce.f6)(Bt)}),j({...V,bucketSize:Bt})},[j,V,ye,Se]),rt=(0,s.useCallback)(Bt=>{Se({...ye,bucketOffset:!(0,ce.f6)(Bt)}),j({...V,bucketOffset:Bt})},[j,V,ye,Se]),ht=(0,s.useCallback)(()=>{j({...V,combine:!V.combine})},[j,V]),Wt=(0,ke.J)().getVariables().map(Bt=>({value:Bt.name,label:Bt.label||Bt.name,origin:Le.L8.Template}));if(!Z.config.featureToggles.transformationsVariableSupport){let Bt;typeof V.bucketSize=="string"?Bt=parseInt(V.bucketSize,10):Bt=V.bucketSize;let It;return typeof V.bucketOffset=="string"?It=parseInt(V.bucketOffset,10):It=V.bucketOffset,s.createElement("div",null,s.createElement(Pe.Z,null,s.createElement(q._,{labelWidth:18,label:ta.py.bucketSize.name,tooltip:ta.py.bucketSize.description},s.createElement(bs.Y,{value:Bt,placeholder:"auto",onChange:we,min:0}))),s.createElement(Pe.Z,null,s.createElement(q._,{labelWidth:18,label:ta.py.bucketOffset.name,tooltip:ta.py.bucketOffset.description},s.createElement(bs.Y,{value:It,placeholder:"none",onChange:He,min:0}))),s.createElement(Pe.Z,null,s.createElement(q._,{labelWidth:18,label:ta.py.combine.name,tooltip:ta.py.combine.description},s.createElement(Xn.x,{value:V.combine??!1,onChange:ht}))))}return s.createElement("div",null,s.createElement(Pe.Z,null,s.createElement(q._,{invalid:ye.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:ta.py.bucketSize.name,tooltip:ta.py.bucketSize.description},s.createElement(it.X,{suggestions:Wt,value:V.bucketSize,placeholder:"auto",onChange:Qe}))),s.createElement(Pe.Z,null,s.createElement(q._,{labelWidth:18,label:ta.py.bucketOffset.name,tooltip:ta.py.bucketOffset.description,invalid:ye.bucketOffset,error:"Value needs to be an integer or a variable"},s.createElement(it.X,{suggestions:Wt,value:V.bucketOffset,placeholder:"none",onChange:rt}))),s.createElement(Pe.Z,null,s.createElement(q._,{labelWidth:18,label:ta.py.combine.name,tooltip:ta.py.combine.description},s.createElement(Xn.x,{value:V.combine??!1,onChange:ht}))))},Aa={id:se.W.histogram,editor:ia,transformation:re.Y.histogramTransformer,name:re.Y.histogramTransformer.name,description:re.Y.histogramTransformer.description,categories:new Set([b.w.CreateNewVisualization]),help:pe(se.W.histogram).helperDocs};var Ms=e(89957),Ga=e(51395);const _s=[{value:Ms.c.outer,label:"OUTER (TIME SERIES)",description:"Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series."},{value:Ms.c.outerTabular,label:"OUTER (TABULAR)",description:"Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data."},{value:Ms.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables."}];function us({input:B,options:V,onChange:j}){const ie=(0,Ga.IX)(B),ye=(0,Ga.nw)(ie),Se=(0,ke.J)().getVariables().map(Qe=>({value:"$"+Qe.name,label:"$"+Qe.name})),we=(0,s.useCallback)(Qe=>{j({...V,byField:Qe?.value})},[j,V]),He=(0,s.useCallback)(Qe=>{j({...V,mode:Qe?.value})},[j,V]);return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Mode",labelWidth:8,grow:!0},s.createElement(Ee.Ph,{options:_s,value:V.mode??Ms.c.outer,onChange:He}))),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Field",labelWidth:8,grow:!0},s.createElement(Ee.Ph,{options:[...ye,...Se],value:V.byField,onChange:we,placeholder:"time",isClearable:!0}))))}const ns={id:se.W.joinByField,aliasIds:[se.W.seriesToColumns],editor:us,transformation:re.Y.joinByFieldTransformer,name:re.Y.joinByFieldTransformer.name,description:re.Y.joinByFieldTransformer.description,categories:new Set([b.w.Combine]),help:pe(se.W.joinByField).helperDocs};var Rs=e(69452);const Vr=[{value:Rs.k.Columns,label:"Columns"},{value:Rs.k.Rows,label:"Rows"}],os=({input:B,options:V,onChange:j})=>{const{labelNames:ye,selected:Se}=(0,s.useMemo)(()=>{let Qe=[],rt={};for(const bt of B)for(const Wt of bt.fields)if(Wt.labels)for(const Bt of Object.keys(Wt.labels))rt[Bt]||(Qe.push({value:Bt,label:Bt}),rt[Bt]=!0);const ht=new Set(V.keepLabels?.length?V.keepLabels:Object.keys(rt));return{labelNames:Qe,selected:ht}},[V.keepLabels,B]),we=Qe=>{j({...V,valueLabel:Qe?.value})},He=Qe=>{if(Se.has(Qe)?Se.delete(Qe):Se.add(Qe),Se.size===ye.length||!Se.size){const{keepLabels:rt,...ht}=V;j(ht)}else j({...V,keepLabels:[...Se]})};return s.createElement("div",null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Mode",labelWidth:20},s.createElement(me.S,{options:Vr,value:V.mode??Rs.k.Columns,onChange:Qe=>j({...V,mode:Qe})}))),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Labels",labelWidth:20},s.createElement(Pt.K,{gap:1,wrap:"wrap"},ye.map((Qe,rt)=>{const ht=Qe.label;return s.createElement(ls.B,{key:`${ht}/${rt}`,onClick:()=>He(ht),label:ht,selected:Se.has(ht)})})))),V.mode!==Rs.k.Rows&&s.createElement(Pe.Z,null,s.createElement(q._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},s.createElement(Ee.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:ye,value:V?.valueLabel,onChange:we,className:"min-width-16"}))))},La={id:se.W.labelsToFields,editor:os,transformation:re.Y.labelsToFieldsTransformer,name:re.Y.labelsToFieldsTransformer.name,description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column.`,categories:new Set([b.w.Reformat]),help:pe(se.W.labelsToFields).helperDocs},ms=({options:B,onChange:V})=>{const[j,ie]=(0,s.useState)(!1),ye=(0,s.useCallback)(Qe=>{V({...B,limitField:Number(Qe.currentTarget.value)})},[V,B]),Se=(0,s.useCallback)(Qe=>{ie(!(0,ce.f6)(Qe)),V({...B,limitField:Qe})},[V,B]),He=(0,ke.J)().getVariables().map(Qe=>({value:Qe.name,label:Qe.label||Qe.name,origin:Le.L8.Template}));return Z.config.featureToggles.transformationsVariableSupport?s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(it.X,{invalid:j,error:"Value needs to be an integer or a variable",value:String(B.limitField),onChange:Se,placeholder:"Value or variable",suggestions:He}))):s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Limit",labelWidth:8},s.createElement(ot.I,{placeholder:"Limit count",pattern:"[0-9]*",value:B.limitField,onChange:ye,width:25}))))},fr={id:se.W.limit,editor:ms,transformation:re.Y.limitTransformer,name:re.Y.limitTransformer.name,description:"Limit the number of items displayed.",categories:new Set([b.w.Filter]),help:pe(se.W.limit).helperDocs},Ta=({input:B,options:V,onChange:j})=>B.length<=1?s.createElement(Fr.S,null,"Merge has no effect when applied on a single frame."):null,rr={id:se.W.merge,editor:Ta,transformation:re.Y.mergeTransformer,name:re.Y.mergeTransformer.name,description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`,categories:new Set([b.w.Combine]),help:pe(se.W.merge).helperDocs};var Qr=e(52517);const ao=({options:B,input:V,onChange:j})=>{const{indexByName:ie,excludeByName:ye,renameByName:Se,includeByName:we}=B,He=(0,ce.Hg)(V),Qe=(0,s.useMemo)(()=>ei(He,ie),[He,ie]),rt=we&&Object.keys(we).length>0?"include":"exclude",ht=(0,s.useCallback)((It,Gt)=>{j({...B,excludeByName:{...ye,[It]:Gt}})},[j,B,ye]),bt=(0,s.useCallback)((It,Gt)=>{const mn={...B,includeByName:{...we,[It]:!Gt}};j(mn)},[j,B,we]),Wt=(0,s.useCallback)(It=>{if(!It||!It.destination)return;const Gt=It.source.index,mn=It.destination.index;Gt!==mn&&j({...B,indexByName:Kl(He,Gt,mn)})},[j,B,He]),Bt=(0,s.useCallback)((It,Gt)=>{j({...B,renameByName:{...B.renameByName,[It]:Gt}})},[j,B]);return V.length>1?s.createElement(Fr.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):s.createElement(Gr.Z5,{onDragEnd:Wt},s.createElement(Gr.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},It=>s.createElement("div",{ref:It.innerRef,...It.droppableProps},Qe.map((Gt,mn)=>{const pa=we&&Gt in we?we[Gt]:!1,Sa=rt==="include"?pa:!ye[Gt],da=rt==="include"?bt:ht;return s.createElement(uo,{fieldName:Gt,renamedFieldName:Se[Gt],index:mn,onToggleVisibility:da,onRenameField:Bt,visible:Sa,key:Gt})}),It.placeholder)))};ao.displayName="OrganizeFieldsTransformerEditor";const uo=({fieldName:B,renamedFieldName:V,index:j,visible:ie,onToggleVisibility:ye,onRenameField:Se})=>{const we=(0,st.wW)(Fl);return s.createElement(Gr._l,{draggableId:B,index:j},He=>s.createElement("div",{className:"gf-form-inline",ref:He.innerRef,...He.draggableProps},s.createElement("div",{className:"gf-form gf-form--grow"},s.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},s.createElement("span",{...He.dragHandleProps},s.createElement(ka.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:we.draggable})),s.createElement(Vs.h,{className:we.toggle,size:"md",name:ie?"eye":"eye-slash",onClick:()=>ye(B,ie),tooltip:ie?"Disable":"Enable"}),s.createElement("span",{className:we.name,title:B},B)),s.createElement(ot.I,{className:"flex-grow-1",defaultValue:V||"",placeholder:`Rename ${B}`,onBlur:Qe=>Se(B,Qe.currentTarget.value)}))))};uo.displayName="DraggableFieldName";const Fl=B=>({toggle:(0,Ie.css)`
    margin: 0 8px;
    color: ${B.colors.text.secondary};
  `,draggable:(0,Ie.css)`
    opacity: 0.4;
    &:hover {
      color: ${B.colors.text.maxContrast};
    }
  `,name:(0,Ie.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${B.typography.bodySmall.fontSize};
    font-weight: ${B.typography.fontWeightMedium};
  `}),Kl=(B,V,j)=>{const ie=Array.from(B),[ye]=ie.splice(V,1);return ie.splice(j,0,ye),ie.reduce((Se,we,He)=>(Se[we]=He,Se),{})},ei=(B,V={})=>{if(!V||Object.keys(V).length===0)return B;const j=(0,Qr.$)(V);return B.sort(j)},Hi={id:se.W.organize,editor:ao,transformation:re.Y.organizeFieldsTransformer,name:re.Y.organizeFieldsTransformer.name,description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data.",categories:new Set([b.w.ReorderAndRename]),help:pe(se.W.organize).helperDocs};var zo=e(18234),Ds=e(21568);const Vl=({options:B,onChange:V})=>{const j=[{label:"Series to rows",value:zo.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:zo.AL.ReduceFields,description:"Collapse each field into a single value"}],ie=(0,s.useCallback)(we=>{const He=we.value;V({...B,mode:He,includeTimeField:He===zo.AL.ReduceFields?!!B.includeTimeField:!1})},[V,B]),ye=(0,s.useCallback)(()=>{V({...B,includeTimeField:!B.includeTimeField})},[V,B]),Se=(0,s.useCallback)(()=>{V({...B,labelsToFields:!B.labelsToFields})},[V,B]);return s.createElement(s.Fragment,null,s.createElement(q._,{label:"Mode","data-testid":Ds.wl.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16},s.createElement(Ee.Ph,{options:j,value:j.find(we=>we.value===B.mode)||j[0],onChange:ie})),s.createElement(q._,{label:"Calculations","data-testid":Ds.wl.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16},s.createElement(nt.m,{placeholder:"Choose Stat",allowMultiple:!0,stats:B.reducers||[],onChange:we=>{V({...B,reducers:we})}})),B.mode===zo.AL.ReduceFields&&s.createElement(q._,{htmlFor:"include-time-field",labelWidth:16,label:"Include time"},s.createElement(Xn.x,{id:"include-time-field",value:!!B.includeTimeField,onChange:ye})),B.mode!==zo.AL.ReduceFields&&s.createElement(q._,{htmlFor:"labels-to-fields",labelWidth:16,label:"Labels to fields"},s.createElement(Xn.x,{id:"labels-to-fields",value:!!B.labelsToFields,onChange:Se})))},_l={id:se.W.reduce,editor:Vl,transformation:re.Y.reduceTransformer,name:re.Y.reduceTransformer.name,description:re.Y.reduceTransformer.description,categories:new Set([b.w.CalculateNewFields]),help:pe(se.W.reduce).helperDocs};class Gi extends s.PureComponent{constructor(V){super(V),this.handleRegexChange=j=>{const ie=j.currentTarget.value;let ye=!0;if(ie)try{ie&&(0,Ka.jO)(ie)}catch{ye=!1}this.setState(Se=>({...Se,regex:ie,isRegexValid:ye}))},this.handleRenameChange=j=>{const ie=j.currentTarget.value;this.setState(ye=>({...ye,renamePattern:ie}))},this.handleRegexBlur=j=>{const ie=j.currentTarget.value;let ye=!0;try{ie&&(0,Ka.jO)(ie)}catch{ye=!1}this.setState({isRegexValid:ye},()=>{ye&&this.props.onChange({...this.props.options,regex:ie})})},this.handleRenameBlur=j=>{const ie=j.currentTarget.value;this.setState({renamePattern:ie},()=>this.props.onChange({...this.props.options,renamePattern:ie}))},this.state={regex:V.options.regex,renamePattern:V.options.renamePattern,isRegexValid:!0}}render(){const{regex:V,renamePattern:j,isRegexValid:ie}=this.state;return s.createElement(s.Fragment,null,s.createElement(q._,{label:"Match",labelWidth:16,invalid:!ie,error:ie?void 0:"Invalid pattern"},s.createElement(ot.I,{placeholder:"Regular expression pattern",value:V||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})),s.createElement(q._,{label:"Replace",labelWidth:16},s.createElement(ot.I,{placeholder:"Replacement pattern",value:j||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))}}const $l={id:se.W.renameByRegex,editor:Gi,transformation:re.Y.renameByRegexTransformer,name:re.Y.renameByRegexTransformer.name,description:"Renames part of the query result by using regular expression with placeholders.",categories:new Set([b.w.ReorderAndRename]),help:pe(se.W.renameByRegex).helperDocs},zl=({input:B,options:V,onChange:j})=>null,xs={id:se.W.seriesToRows,editor:zl,transformation:re.Y.seriesToRowsTransformer,name:re.Y.seriesToRowsTransformer.name,description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`,categories:new Set([b.w.Combine,b.w.Reformat]),help:pe(se.W.seriesToRows).helperDocs},Ci=({input:B,options:V,onChange:j})=>{const ie=(0,ce.Hg)(B).map(Qe=>({label:Qe,value:Qe})),Se=(0,ke.J)().getVariables().map(Qe=>({label:"$"+Qe.name,value:"$"+Qe.name})),we=(0,s.useCallback)((Qe,rt)=>{j({...V,sort:[rt]})},[j,V]),He=V.sort?.length?V.sort:[{}];return s.createElement("div",null,He.map((Qe,rt)=>s.createElement(Pe.Z,{key:`${Qe.field}/${rt}`},s.createElement(q._,{label:"Field",labelWidth:10,grow:!0},s.createElement(Ee.Ph,{options:Z.config.featureToggles.transformationsVariableSupport?[...ie,...Se]:ie,value:Qe.field,placeholder:"Select field",onChange:ht=>{we(rt,{...Qe,field:ht.value})}})),s.createElement(q._,{label:"Reverse"},s.createElement(Xn.x,{value:!!Qe.desc,onChange:()=>{we(rt,{...Qe,desc:!Qe.desc})}})))))},kl={id:se.W.sortBy,editor:Ci,transformation:re.Y.sortByTransformer,name:re.Y.sortByTransformer.name,description:re.Y.sortByTransformer.description,categories:new Set([b.w.ReorderAndRename]),help:pe(se.W.sortBy).helperDocs};function ti({options:B,onChange:V}){const[j,ie]=(0,s.useState)(B),ye=yo(),Se=ni(),we=()=>{j.push({path:""}),ie([...j]),rt()},He=ht=>{j&&(j.splice(ht,1),ie([...j]),rt())},Qe=(ht,bt,Wt)=>{j&&(Wt==="alias"?j[bt].alias=ht.currentTarget.value??"":j[bt].path=ht.currentTarget.value??"",ie([...j]))},rt=()=>{V(j)};return s.createElement("ol",{className:(0,Ie.cx)(Se.list)},j&&j.map((ht,bt)=>s.createElement("li",{key:bt},s.createElement(Pe.Z,null,s.createElement(q._,{label:"Field",tooltip:ye.field,grow:!0},s.createElement(ot.I,{onBlur:rt,onChange:Wt=>Qe(Wt,bt,"path"),value:ht.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),s.createElement(q._,{label:"Alias",tooltip:ye.alias},s.createElement(ot.I,{width:12,value:ht.alias,onBlur:rt,onChange:Wt=>Qe(Wt,bt,"alias")})),s.createElement(q._,{className:(0,Ie.cx)(Se.removeIcon)},s.createElement(Vs.h,{onClick:()=>He(bt),name:"trash-alt",tooltip:"Remove path"}))))),s.createElement(q._,null,s.createElement(fe.zx,{icon:"plus",onClick:()=>we(),variant:"secondary"},"Add path")))}const yo=()=>{const B=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:s.createElement("div",null,"A valid path of an json object.",s.createElement("div",null,s.createElement("strong",null,"JSON Value:")),s.createElement("pre",null,s.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),s.createElement("strong",null,"Valid Paths:"),B.map((V,j)=>s.createElement("p",{key:j},s.createElement("code",null,V.path),s.createElement("i",null,V.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function ni(){return{list:(0,Ie.css)`
      margin-left: 20px;
    `,removeIcon:(0,Ie.css)`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var yr=e(98147),Do=(B=>(B.JSON="json",B.KeyValues="kvp",B.Auto="auto",B))(Do||{});const ai={id:Do.JSON,name:"JSON",description:"Parse JSON string",parse:B=>JSON.parse(B)};function Hl(B){const V=[];let j="",ie="";const ye={};for(let Se=0;Se<B.length;Se++){let we=B[Se];we===j&&(j="",we=B[++Se]);const He=we==="\\";if(He&&(we=B[++Se]),He||j.length){V.push(we);continue}switch((we==='"'||we==="'")&&(j=we),we){case":":case"=":V.length&&(ie&&(ye[ie]=""),ie=V.join(""),V.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:V.length&&ie===""&&(ye[V.join("")]="",V.length=0);case",":case";":case"&":case"{":case"}":if(V.length){const Qe=V.join("");ie.length?(ye[ie]=Qe,ie=""):ie=Qe,V.length=0}break;default:V.push(we),Se===B.length-1&&ie===""&&V.length&&(ye[V.join("")]="",V.length=0)}}return ie.length&&(ye[ie]=V.join("")),ye}const ji={id:Do.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Hl},ko=[ai,ji],si={id:Do.Auto,name:"Auto",description:"parse new fields automatically",parse:B=>{for(const V of ko)try{const j=V.parse(B);if(j!=null)return j}catch{}}},bi=new he.B(()=>[...ko,si]),Ho={id:se.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(B,V)=>j=>j.pipe((0,hn.U)(ie=>Ho.transformer(B,V)(ie))),transformer:B=>V=>V.map(j=>Gl(j,B))};function Gl(B,V){if(!V.source)return B;const j=(0,sr.findField)(B,V.source);if(!j)return B;const ie=bi.getIfExists(V.format??Do.Auto);if(!ie)throw new Error("unkonwn extractor");const ye=B.length,Se=[],we=new Map;for(let Qe=0;Qe<ye;Qe++){let rt=j.values[Qe];if((0,p.isString)(rt))try{rt=ie.parse(rt)}catch{rt={}}if(rt!=null){if(V.format===Do.JSON&&V.jsonPaths&&V.jsonPaths?.length>0){const ht={},bt=V.jsonPaths.filter(Wt=>Wt.path);bt.length>0&&(bt.forEach(Wt=>{const Bt=Wt.alias&&Wt.alias.length>0?Wt.alias:Wt.path;ht[Bt]=(0,p.get)(rt,Wt.path)??"Not Found"}),rt=ht)}for(const[ht,bt]of Object.entries(rt)){let Wt=we.get(ht);Wt==null&&(Wt=new Array(ye).fill(void 0),we.set(ht,Wt),Se.push(ht)),Wt[Qe]=bt}}}const He=Se.map(Qe=>{const rt=we.get(Qe),ht={name:Qe,values:rt,type:rt?(0,yr.DP)(rt.find(bt=>bt!=null)):H.fS.other,config:{}};return Z.config.featureToggles.extractFieldsNameDeduplication&&(ht.name=(0,ne.U$)(ht,B)),ht});if(V.keepTime){const Qe=(0,sr.findField)(B,"Time")||(0,sr.findField)(B,"time");Qe&&He.unshift(Qe)}return V.replace||He.unshift(...B.fields),{...B,fields:He}}const Ha={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},Pi=({input:B,options:V,onChange:j})=>{const ie=rt=>{j({...V,source:rt})},ye=rt=>{j({...V,format:rt?.value})},Se=rt=>{j({...V,jsonPaths:rt})},we=()=>{V.replace&&(V.keepTime=!1),j({...V,replace:!V.replace})},He=()=>{j({...V,keepTime:!V.keepTime})},Qe=bi.selectOptions(V.format?[V.format]:void 0);return s.createElement("div",null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Source",labelWidth:16},s.createElement(Wr.b,{context:{data:B},value:V.source??"",onChange:ie,item:Ha}))),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Format",labelWidth:16},s.createElement(Ee.Ph,{value:Qe.current[0],options:Qe.options,onChange:ye,width:24,placeholder:"Auto"}))),V.format==="json"&&s.createElement(ti,{options:V.jsonPaths??[],onChange:Se}),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Replace all fields",labelWidth:16},s.createElement(Xn.x,{value:V.replace??!1,onChange:we}))),V.replace&&s.createElement(Pe.Z,null,s.createElement(q._,{label:"Keep time",labelWidth:16},s.createElement(Xn.x,{value:V.keepTime??!1,onChange:He}))))},Si={id:se.W.extractFields,editor:Pi,transformation:Ho,name:Ho.name,description:"Parse fields from content (JSON, labels, etc).",categories:new Set([b.w.Reformat]),help:pe(se.W.extractFields).helperDocs};var Dr=e(25111),ri=e(84333);const mo={id:se.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels.",defaultOptions:{},operator:(B,V)=>j=>j.pipe((0,hn.U)(ie=>mo.transformer(B,V)(ie))),transformer:B=>V=>!V||!V.length?V:[jl(B,V)]};function jl(B,V){if(!B.value?.length)return Bo("No value labele configured");const j=(0,ce.jY)(V);if(j.size<1)return Bo("No labels in result");if(!j.has(B.value))return Bo("Value label not found");let ie=B.join?.length?B.join:Array.from(j);ie=ie.filter(bt=>bt!==B.value);const ye=new Set,Se=new Map,we={};for(const bt of V)for(const Wt of bt.fields)if(Wt.labels&&Wt.type!==H.fS.time){const Bt=ie.map(da=>Wt.labels[da]),It=Bt.join(",");let Gt=Se.get(It);Gt||(Gt={keys:Bt,values:{}},Se.set(It,Gt));const mn=Wt.labels[B.value],pa=Wt.values,Sa=Gt.values[mn];Sa?Gt.values[mn]=Sa.concat(pa):Gt.values[mn]=pa,we[mn]||(we[mn]=Wt),ye.add(mn)}const He=Array.from(ye),Qe=ie.map(()=>[]),rt=He.map(()=>[]);for(const bt of Se.values()){let Wt=-1,Bt=!1;for(;!Bt;){Wt++,Bt=!0;for(let It=0;It<ie.length;It++)Qe[It].push(bt.keys[It]);for(let It=0;It<He.length;It++){const Gt=He[It],mn=bt.values[Gt]??[];rt[It].push(mn[Wt]),mn.length>Wt+1&&(Bt=!1)}}}const ht={fields:[],length:rt[0].length};for(let bt=0;bt<ie.length;bt++)ht.fields.push({name:ie[bt],config:{},type:H.fS.string,values:Qe[bt]});for(let bt=0;bt<He.length;bt++){const Wt=we[He[bt]];ht.fields.push({name:He[bt],config:{},type:Wt.type??H.fS.number,values:rt[bt]})}return ht}function Bo(B){return{meta:{notices:[{severity:"error",text:B}]},fields:[{name:"Error",type:H.fS.string,config:{},values:[B]}],length:0}}function fo({input:B,options:V,onChange:j}){const ie=(0,s.useMemo)(()=>{let Qe;const rt=(0,ce.jY)(B),ht=Array.from(rt).map(mn=>({label:mn,value:mn}));let bt=ht.find(mn=>mn.value===V.value);!bt&&V.value&&(bt={label:`${V.value} (not found)`,value:V.value},ht.push(bt)),B.length?rt.size===0&&(Qe=s.createElement(Dr.b,{title:"No labels found"},"The input does not contain any labels")):Qe=s.createElement(Dr.b,{title:"No input found"},"No input (or labels) found"),rt.delete(V.value);const Wt=Array.from(rt).map(mn=>({label:mn,value:mn}));let Bt=Wt;const It=!!V.join?.length;let Gt="Join";return It?Bt=Wt.filter(mn=>!V.join.includes(mn.value)):Gt=Wt.map(mn=>mn.value).join(", "),{warn:Qe,valueOptions:ht,valueOption:bt,joinOptions:Wt,addOptions:Bt,addText:Gt,hasJoin:It,key:Date.now()}},[V,B]),ye=(Qe,rt)=>{if(!V.join)return;const ht=V.join.slice();if(rt)ht[Qe]=rt;else if(ht.splice(Qe,1),!ht.length){j({...V,join:void 0});return}const bt=new Set(ht);V.value&&bt.delete(V.value),j({...V,join:Array.from(bt)})},Se=Qe=>{const rt=Qe?.value;if(!rt)return;const ht=V.join?V.join.slice():[];ht.push(rt),j({...V,join:ht})},we=10,He="No labels found";return s.createElement("div",null,ie.warn,s.createElement(Pe.Z,null,s.createElement(q._,{error:"required",invalid:!V.value?.length,label:"Value",labelWidth:we,tooltip:"Select the label indicating the values name"},s.createElement(Ee.Ph,{options:ie.valueOptions,value:ie.valueOption,onChange:Qe=>j({...V,value:Qe.value}),noOptionsMessage:He}))),ie.hasJoin?V.join.map((Qe,rt)=>s.createElement(Pe.Z,{key:Qe+rt},s.createElement(q._,{label:"Join",labelWidth:we,error:"Unable to join by the value label",invalid:Qe===V.value},s.createElement(_a.Lh,null,s.createElement(Ee.Ph,{options:ie.joinOptions,value:ie.joinOptions.find(ht=>ht.value===Qe),isClearable:!0,onChange:ht=>ye(rt,ht?.value),noOptionsMessage:He}),!!(ie.addOptions.length&&rt===V.join.length-1)&&s.createElement(ri.b,{icon:"plus",label:"",options:ie.addOptions,onChange:Se,variant:"secondary"}))))):s.createElement(s.Fragment,null,!!ie.addOptions.length&&s.createElement(Pe.Z,null,s.createElement(q._,{label:"Join",labelWidth:we},s.createElement(Ee.Ph,{options:ie.addOptions,placeholder:ie.addText,onChange:Se,noOptionsMessage:He})))))}const Ql={id:mo.id,editor:fo,transformation:mo,name:mo.name,description:mo.description,state:We.BV.beta,categories:new Set([b.w.Combine]),help:pe(mo.id).helperDocs};var Qi=e(82951),Cr=e(89582),Yr=e(57298),Gs=e(74566);const gr={id:se.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:B=>V=>V.pipe((0,Cr.z)(j=>(0,Yr.D)(oi(j,B))))};async function oi(B,V){const j=X.Ls.get(Y.mi.byName).get(V?.lookupField),ie=await(0,Gs.so)(V?.gazetteer??Gs.LI);return ie.frame?Or(B,ie,j):Promise.reject("missing frame in gazetteer")}function Or(B,V,j){const ie=V.frame()?.fields;return ie?B.map(ye=>{const Se=ye.length,we=[];for(const He of ye.fields)if(we.push(He),j(He,ye,B)){const Qe=He.values,rt=[];for(const ht of ie){const bt=new Array(Se);rt.push(bt),we.push({...ht,values:bt})}for(let ht=0;ht<V.count;ht++){const bt=V.find(Qe[ht]);if(bt?.index!=null)for(let Wt=0;Wt<ie.length;Wt++)rt[Wt][ht]=ie[Wt].values[bt.index]}}return{...ye,fields:we}}):B}const Yl={settings:{width:30,filter:B=>B.type===H.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Mi={settings:{}},Zl=({input:B,options:V,onChange:j})=>{const ie=(0,s.useCallback)(Se=>{j({...V,lookupField:Se})},[j,V]),ye=(0,s.useCallback)(Se=>{j({...V,gazetteer:Se})},[j,V]);return s.createElement("div",null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Field",labelWidth:12},s.createElement(Wr.b,{context:{data:B},value:V?.lookupField??"",onChange:ie,item:Yl}))),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Lookup",labelWidth:12},s.createElement(Qi.Q,{value:V?.gazetteer??"",context:{data:B},item:Mi,onChange:ye}))))},cd={id:se.W.fieldLookup,editor:Zl,transformation:gr,name:gr.name,description:"Use a field value to lookup additional fields from an external source. This currently supports spatial data, but will eventually support more formats.",state:We.BV.alpha,categories:new Set([b.w.PerformSpatialOperations]),help:pe(se.W.fieldLookup).helperDocs};var Jl=e(88860),Xl=e(95347);const Yi=(B,V,j=[])=>(V===0?j.push(B):B.forEach(ie=>{Yi(ie,V-1,j)}),j);function Zi(B){const V=B[0].length,j=B.length,ie=new Map;for(let ye=0;ye<V;ye++){let Se=ie;for(let we=0;we<j;we++){let He=B[we][ye],Qe=Se.get(He);Qe==null&&(Qe=we===j-1?[]:new Map,Se.set(He,Qe)),Se=Qe}Se.push(ye)}return Yi(ie,j)}const ii={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function li(B,V,j){return V.map((ie,ye)=>B.withNames?`${ie}${B.separator1}${j[ye]}`:j[ye]).join(B.separator2)}function ci(B,V){const j={};return B.forEach((ie,ye)=>{j[ie]=String(V[ye])}),j}const Ze={id:se.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(B,V)=>j=>j.pipe((0,hn.U)(ie=>Ze.transformer(B,V)(ie))),transformer:(B,V)=>{const j=(0,Jl.f)(V,{names:B.fields});if(!j)return Xl.d.transformer({},V);const ie=(0,X.sq)(j);return ye=>ye.length?Je(ye[0],ie,B):ye}};function Je(B,V,j){const ie=B.fields.filter(He=>V(He,B,[B]));if(!ie.length)return[B];const ye=ie.map(He=>He.values),Se=ie.map(He=>He.name),we={...ii,...j?.naming};return Zi(ye).map(He=>{let Qe=B.name,rt={};if(we.asLabels)rt=ci(Se,ie.map((bt,Wt)=>ye[Wt][He[0]]));else{let bt=li(we,Se,ie.map((Wt,Bt)=>ye[Bt][He[0]]));we?.append&&B.name&&(bt=`${B.name} ${bt}`),Qe=bt}let ht=B.fields;if(!j?.keepFields){const bt=new Set(Se);ht=B.fields.filter(Wt=>!bt.has(Wt.name))}return{name:Qe,meta:B.meta,length:He.length,fields:ht.map(bt=>{const Wt=bt.values,Bt=Array(He.length);for(let It=0;It<He.length;It++)Bt[It]=Wt[He[It]];return{name:bt.name,type:bt.type,config:bt.config,labels:{...bt.labels,...rt},values:Bt}})}})}function Ge({input:B,options:V,onChange:j}){const ie=(0,Ga.IX)(B),ye=(0,Ga.nw)(ie),Se=(0,s.useMemo)(()=>{const bt=new Set(V.fields);return bt.size<1?ye:ye.filter(Wt=>!bt.has(Wt.value))},[ye,V]),we=(0,s.useCallback)(bt=>{if(!bt.value)return;const Wt=new Set(V.fields);Wt.add(bt.value),j({...V,fields:[...Wt]})},[j,V]);let He;(bt=>{bt[bt.asLabels=0]="asLabels",bt[bt.frameName=1]="frameName"})(He||(He={}));const Qe=[{label:"As label",value:0},{label:"As frame name",value:1}],rt=(0,s.useCallback)(bt=>{if(!bt)return;const Wt=new Set(V.fields);Wt.delete(bt),j({...V,fields:[...Wt]})},[j,V]);if(B.length>1)return s.createElement(Fr.S,null,"Partition by values only works with a single frame.");const ht=[...new Set(V.fields)];return s.createElement("div",null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Field",labelWidth:10,grow:!0},s.createElement(_a.Lh,null,ht.map(bt=>s.createElement(fe.zx,{key:bt,icon:"times",variant:"secondary",size:"md",onClick:()=>rt(bt)},bt)),Se.length&&s.createElement(ri.b,{variant:"secondary",size:"md",options:Se,onChange:we,label:"Select field",icon:"plus"})))),s.createElement(Pe.Z,null,s.createElement(q._,{tooltip:"Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data",label:"Naming",labelWidth:10},s.createElement(me.S,{options:Qe,value:V.naming?.asLabels===void 0||V.naming.asLabels?0:1,onChange:bt=>j({...V,naming:{...V.naming,asLabels:bt===0}})}))))}const mt={id:se.W.partitionByValues,editor:Ge,transformation:Ze,name:Ze.name,description:Ze.description,state:We.BV.alpha,categories:new Set([b.w.Reformat]),help:pe(se.W.partitionByValues).helperDocs};var St=e(86347),At=e(47862),Ft=e(96609),Qt=(B=>(B.TimeSeriesWide="wide",B.TimeSeriesLong="long",B.TimeSeriesMulti="multi",B.TimeSeriesMany="many",B))(Qt||{});function an(B){if(!Array.isArray(B)||B.length===0)return B;const V=[];for(const j of sn(B)){const ie=j.fields[0];if(!ie||ie.type!==H.fS.time)continue;const ye=[],Se=[];for(const we of j.fields)switch(we.type){case H.fS.number:case H.fS.boolean:ye.push(we);break;case H.fS.string:Se.push(we);break}for(const we of ye)if(Se.length){const He=new Map;for(let Qe=0;Qe<j.length;Qe++){const rt=ie.values[Qe],ht=we.values[Qe];if(ht===void 0||rt==null)continue;const bt=Se.map(Bt=>Bt.values[Qe]).join("/");let Wt=He.get(bt);if(!Wt){Wt={key:bt,time:[],value:[],labels:{}};for(const Bt of Se)Wt.labels[Bt.name]=Bt.values[Qe];He.set(bt,Wt)}Wt.time.push(rt),Wt.value.push(ht)}for(const Qe of He.values())V.push({name:j.name,refId:j.refId,meta:{...j.meta,type:St.P.TimeSeriesMulti},fields:[{...ie,values:Qe.time},{...we,values:Qe.value,labels:Qe.labels}],length:Qe.time.length})}else V.push({name:j.name,refId:j.refId,meta:{...j.meta,type:St.P.TimeSeriesMulti},fields:[ie,we],length:j.length})}return V}function sn(B){if(!Array.isArray(B)||B.length===0)return B;const V=[];for(const j of B){let ie;const ye=[],Se={},we={},He={},Qe={};for(let It=0;It<j.fields.length;It++){const Gt=j.fields[It];switch(Gt.type){case H.fS.string:case H.fS.boolean:Gt.name in Qe||(Qe[Gt.name]=It,we[Gt.name]=!0);break;case H.fS.time:if(!ie){ie=Gt;break}default:if(Gt.name in Se){const Sa=Se[Gt.name];if(Gt.type!==Sa)continue}else Se[Gt.name]=Gt.type,ye.push(Gt.name);const mn=JSON.stringify(Gt.labels),pa=He[mn];if(pa!==void 0?pa.push(It):He[mn]=[It],Gt.labels!=null)for(const Sa in Gt.labels)we[Sa]=!0}}if(!ie)continue;const rt=[],ht=[],bt=[],Wt=[];for(let It=0;It<j.length;It++)rt.push({time:ie.values[It],wideRowIndex:It});for(const It in He)ht.push(It);for(const It in we)bt.push(It);for(const It in Qe)Wt.push(It);rt.sort((It,Gt)=>It.time-Gt.time),ht.sort(),bt.sort(),ye.sort();const Bt=new At.v({...j,meta:{...j.meta,type:St.P.TimeSeriesLong},fields:[{name:ie.name,type:ie.type}]});for(const It of ye)Bt.addField({name:It,type:Se[It]});for(const It of bt)Bt.addField({name:It,type:H.fS.string});for(const It of rt){const{time:Gt,wideRowIndex:mn}=It;for(const pa of ht){const Sa={};for(const $a of Wt)Sa[$a]=j.fields[Qe[$a]].values[mn];let da=0;for(const $a of He[pa]){const cr=j.fields[$a];if(da++===0&&cr.labels!=null)for(const Di in cr.labels)Sa[Di]=cr.labels[Di];Sa[cr.name]=cr.values[mn]}Sa[ie.name]=Gt,Bt.add(Sa)}}V.push(Bt)}return V}function On(B){return Je(B,j=>j.type===H.fS.string).map(j=>(j.meta||(j.meta={}),j.meta.type=St.P.TimeSeriesMulti,j))}const Bn={id:se.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(B,V)=>j=>j.pipe((0,hn.U)(ie=>Bn.transformer(B,V)(ie))),transformer:B=>{const V=B?.format??"wide";if(V==="many"||V==="multi")return an;if(V==="long")return sn;const j=X.Ls.get(Y.mi.firstTimeField).get({});return ie=>{if(!ie.length)return[];const ye=[];for(const we of ie)we.meta?.type===St.P.TimeSeriesLong?On(we).forEach(He=>ye.push(He)):ye.push(we);const Se=(0,Ft._9)({frames:ye,joinBy:j,keepOriginIndices:!0});return Se?(Se.meta||(Se.meta={}),Se.meta.type=St.P.TimeSeriesWide,[Se]):[]}}},wn={label:"Wide time series",value:Qt.TimeSeriesWide,description:"Creates a single frame joined by time",info:s.createElement("ul",null,s.createElement("li",null,"Single frame"),s.createElement("li",null,"1st field is shared time field"),s.createElement("li",null,"Time in ascending order"),s.createElement("li",null,"Multiple value fields of any type"))},zn={label:"Multi-frame time series",value:Qt.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:s.createElement("ul",null,s.createElement("li",null,"Multiple frames"),s.createElement("li",null,"Each frame has two fields: time, value"),s.createElement("li",null,"Time in ascending order"),s.createElement("li",null,"String values are represented as labels"),s.createElement("li",null,"All values are numeric"))},ua={label:"Long time series",value:Qt.TimeSeriesLong,description:"Convert each frame to long format",info:s.createElement("ul",null,s.createElement("li",null,"Single frame"),s.createElement("li",null,"1st field is time field"),s.createElement("li",null,"Time in ascending order, but may have duplictes"),s.createElement("li",null,"String values are represented as separate fields rather than as labels"),s.createElement("li",null,"Multiple value fields may exist"))},jn=[wn,zn,ua];function ha(B){const{options:V,onChange:j}=B,ie=(0,st.wW)(la),ye=(0,s.useCallback)(Se=>{j({...V,format:Se.value})},[j,V]);return s.createElement(s.Fragment,null,s.createElement(Pe.Z,null,s.createElement(q._,{label:"Format",labelWidth:12},s.createElement(Ee.Ph,{width:35,options:jn,value:jn.find(Se=>Se.value===Qt.TimeSeriesMulti&&V.format===Qt.TimeSeriesMany?!0:Se.value===V.format)||jn[0],onChange:ye,className:"flex-grow-1"}))),s.createElement(Pe.Z,null,s.createElement(q._,{label:"Info",labelWidth:12},s.createElement("div",{className:ie.info},(jn.find(Se=>Se.value===V.format)||jn[0]).info))))}const la=B=>({info:(0,Ie.css)`
    margin-left: 20px;
  `}),ma={id:Bn.id,editor:ha,transformation:Bn,name:Bn.name,description:Bn.description,categories:new Set([b.w.Reformat]),help:pe(Bn.id).helperDocs};var Fa=e(53987),oa=e(45617),Va=(B=>(B.linear="linear",B.polynomial="polynomial",B))(Va||{});const Ya={predictionCount:100,modelType:"linear",degree:2},ps={id:se.W.regression,name:"Regression analysis",operator:(B,V)=>j=>j.pipe((0,hn.U)(ie=>ps.transformer(B,V)(ie))),transformer:(B,V)=>j=>{const{predictionCount:ie,modelType:ye,degree:Se}={...Ya,...B};if(j.length===0)return j;const we=X.Ls.get(Y.mi.byName).get(B.yFieldName),He=X.Ls.get(Y.mi.byName).get(B.xFieldName);let Qe,rt;for(const da of j){const $a=da.fields.find(cr=>we(cr,da,j));if($a){rt=$a;const cr=da.fields.find(Di=>He(Di,da,j));if(cr){Qe=cr;break}else throw"X and Y fields must be part of the same frame"}}if(!Qe||!rt)return j;let ht=Qe.values[0],bt=Qe.values[0];for(let da=1;da<Qe.values.length;da++)Qe.values[da]<ht&&(ht=Qe.values[da]),Qe.values[da]>bt&&(bt=Qe.values[da]);const Wt=(bt-ht)/(ie-1),Bt=[...[...Array(ie-1).keys()].map((da,$a)=>$a*Wt+ht),bt],It=Qe.type===H.fS.time?ht:0,Gt=[],mn=[];for(let da=0;da<Qe.values.length;da++)rt.values[da]!==null&&!isNaN(rt.values[da])&&(mn.push(Qe.values[da]-It),Gt.push(rt.values[da]));let pa;switch(ye){case"linear":pa=new oa.H(mn,Gt);break;case"polynomial":pa=new Fa.P(mn,Gt,Se);break;default:return j}const Sa={name:`${ye} regression`,length:Bt.length,fields:[{name:Qe.name,type:Qe.type,values:Bt,config:{}},{name:`${rt.name} predicted`,type:rt.type,values:Bt.map(da=>pa.predict(da-It)),config:{}}]};return[...j,Sa]}},Ts={editor:Wr.b,id:"",name:"",settings:{width:24,isClearable:!1}},Cs=20,vs=({input:B,options:V,onChange:j})=>{const ie=[{label:"Linear",value:Va.linear},{label:"Polynomial",value:Va.polynomial}];return(0,s.useEffect)(()=>{let ye,Se;if(!V.xFieldName){const we=X.Ls.get(Y.mi.firstTimeField).get({});for(const He of B)if(ye=He.fields.find(Qe=>we(Qe,He,B)),ye)break;if(!ye){const He=X.Ls.get(Y.mi.numeric).get({});for(const Qe of B)if(ye=Qe.fields.find(rt=>He(rt,Qe,B)),ye)break}}if(!V.yFieldName){const we=X.Ls.get(Y.mi.numeric).get({});for(const He of B)if(Se=He.fields.find(Qe=>we(Qe,He,B)&&Qe!==ye),Se)break}ye&&Se&&j({...V,xFieldName:ye.name,yFieldName:Se.name})}),s.createElement(s.Fragment,null,s.createElement(q._,{labelWidth:Cs,label:"X field"},s.createElement(Wr.b,{context:{data:B},value:V.xFieldName??"",item:Ts,onChange:ye=>{j({...V,xFieldName:ye})}})),s.createElement(q._,{labelWidth:Cs,label:"Y field"},s.createElement(Wr.b,{context:{data:B},value:V.yFieldName??"",item:Ts,onChange:ye=>{j({...V,yFieldName:ye})}})),s.createElement(q._,{labelWidth:Cs,label:"Model type"},s.createElement(Ee.Ph,{value:V.modelType??Ya.modelType,onChange:ye=>{j({...V,modelType:ye.value??Ya.modelType})},options:ie})),s.createElement(q._,{labelWidth:Cs,label:"Predicted points",tooltip:"Number of X,Y points to predict"},s.createElement(bs.Y,{value:V.predictionCount??Ya.predictionCount,onChange:ye=>{j({...V,predictionCount:ye})}})),V.modelType===Va.polynomial&&s.createElement(q._,{labelWidth:Cs,label:"Degree"},s.createElement(Ee.Ph,{value:V.degree??Ya.degree,options:[{label:"Quadratic",value:2},{label:"Cubic",value:3},{label:"Quartic",value:4},{label:"Quintic",value:5}],onChange:ye=>{j({...V,degree:ye.value})}})))},js={id:se.W.regression,editor:vs,transformation:ps,name:ps.name,description:ps.description,categories:new Set([b.w.CalculateNewFields]),help:pe(se.W.regression).helperDocs},ws={id:se.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config.",defaultOptions:{},operator:B=>V=>V.pipe((0,hn.U)(j=>j.map(ie=>br(B,ie))))};function br(B,V){const j=gn(V,B.mappings??[],!0),{nameField:ie,valueField:ye}=j;if(!ie||!ye)return V;const Se=[];for(let we=0;we<ie.values.length;we++){const He=ie.values[we],Qe=ye.values[we],rt=Kt(V,we,j),ht=_r(V,we,j),bt={name:`${He}`,type:ye.type,values:[Qe],config:rt,labels:ht};Se.push(bt)}return{fields:Se,length:1}}function _r(B,V,j){const ie={...j.nameField.labels};for(let ye=0;ye<B.fields.length;ye++){const Se=B.fields[ye],we=(0,ne.CZ)(Se,B),He=j.index[we];if(He.handler&&He.handler.key!==cn.Label)continue;const Qe=Se.values[V];Qe!=null&&(ie[we]=Qe)}return ie}function Zr({input:B,options:V,onChange:j}){return B.length===0?null:s.createElement("div",null,s.createElement(ln,{frame:B[0],mappings:V.mappings??[],onChange:ie=>j({...V,mappings:ie}),withNameAndValue:!0}))}const As={id:ws.id,editor:Zr,transformation:ws,name:ws.name,description:ws.description,state:We.BV.beta,categories:new Set([b.w.Reformat]),help:pe(ws.id).helperDocs};var Pr=e(71199),$s=e(51926),In=e(83180),aa=e(70267),Da=e(36911),ja=e(26229);const Ls={id:se.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results.",defaultOptions:{},operator:B=>V=>V.pipe((0,Cr.z)(j=>(0,Yr.D)(Ir(j,B))))};function as(B){return B.action===In.JJ.Modify&&B.modify?.op===In.ac.LineBuilder}async function Ir(B,V){const j=await(0,Da.cJ)(V.source);if(as(V)){const ie=await(0,Da.cJ)(V.modify?.target);return B.map(ye=>{const Se=(0,Da.g6)(ye,j),we=(0,Da.g6)(ye,ie);if(Se.field&&we.field){const He=[...ye.fields],Qe=(0,aa.Fh)(Se.field,we.field),rt=He[0];return rt.type===H.fS.geo&&rt!==Se.field&&rt!==we.field?He[0]=(0,aa.EK)(rt,Qe):He.unshift(Qe),{...ye,fields:He}}return ye})}return B.map(ie=>{let ye=(0,Da.g6)(ie,j);if(ye.field){if(V.action===In.JJ.Modify){switch(V.modify?.op){case In.ac.AsLine:let we=ye.field.name;return(!we||we==="Point")&&(we="Line"),{...ie,length:1,fields:[{...ye.field,name:we,type:H.fS.geo,values:[(0,ja.Lp)(ye.field)]}]}}return ie}const Se=ye.derived?[ye.field,...ie.fields]:ie.fields.slice(0);if(V.action===In.JJ.Calculate&&(Se.push((0,ja.N7)(ye.field,V.calculate??{})),ye.derived=!0),ye.derived)return{...ie,fields:Se}}return ie})}const fs=(B,V)=>{const j=V.options??{};B.addSelect({path:"action",name:"Action",description:"",defaultValue:In.JJ.Prepare,settings:{options:[{value:In.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:In.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:In.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),j.action===In.JJ.Calculate?B.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:In.Ii.Heading,settings:{options:[{value:In.Ii.Heading,label:"Heading"},{value:In.Ii.Area,label:"Area"},{value:In.Ii.Distance,label:"Distance"}]}}):j.action===In.JJ.Modify&&B.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:In.ac.AsLine,settings:{options:[{value:In.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:In.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),as(j)?(B.addNestedOptions({category:["Source"],path:"source",build:(ie,ye)=>{const Se=j.source??{mode:Pr.q1.Auto};(0,$s.C)("Point","",ie,Se)}}),B.addNestedOptions({category:["Target"],path:"modify",build:(ie,ye)=>{const Se=j.modify?.target??{mode:Pr.q1.Auto};(0,$s.C)("Point","target.",ie,Se)}})):(0,$s.C)("Location","source.",B,j.source)},go=B=>{(0,s.useEffect)(()=>{if(!B.options.source?.mode){const ie=lt(fs);B.onChange({...ie,...B.options}),console.log("geometry useEffect",ie)}},[]);const V=Co((0,st.l4)()),j=at(B,fs);return s.createElement("div",null,s.createElement("div",null,j.items.map(ie=>ie.render())),s.createElement("div",null,j.categories.map(ie=>s.createElement("div",{key:ie.props.id,className:V.wrap},s.createElement("h5",null,ie.props.title),s.createElement("div",{className:V.item},ie.items.map(ye=>ye.render()))))))},Co=B=>({wrap:(0,Ie.css)`
      margin-bottom: 20px;
    `,item:(0,Ie.css)`
      border-left: 4px solid ${B.colors.border.strong};
      padding-left: 10px;
    `}),ss={id:se.W.spatial,editor:go,transformation:Ls,name:Ls.name,description:Ls.description,state:We.BV.alpha,categories:new Set([b.w.PerformSpatialOperations]),help:pe(se.W.spatial).helperDocs};var Rr=e(23498);const Sr={id:se.W.timeSeriesTable,name:"Time series to table",description:"Convert time series data to table rows so that they can be viewed in tabular or sparkline format.",defaultOptions:{},isApplicable:B=>{for(const V of B)if((0,Rr.pP)(V))return Nn.s.Applicable;return Nn.s.NotApplicable},isApplicableDescription:"The Time series to table transformation requires at least one time series frame to function. You currently have none.",operator:B=>V=>V.pipe((0,hn.U)(j=>ho(B,j)))};function ho(B,V){const j={},ie={},ye=[];let Se=Xi(V);for(const we of Object.keys(Se)){const He=V.filter(rt=>rt.refId===we);j[we]={},ie[we]={};const Qe=[];He.forEach(rt=>{rt.fields.forEach(ht=>{ht.type===H.fS.number&&ht.labels&&Object.keys(ht.labels).forEach(bt=>{Qe.includes(bt)||(ie[we][bt]=Ji(bt,H.fS.string),Qe.push(bt))})})});for(let rt=0;rt<He.length;rt++){const ht=He[rt];let bt=null,Wt=B[we]?.timeField;if(Wt&&Wt.length>0?bt=ht.fields.find(Bt=>Bt.name===Wt):bt=ht.fields.find(Bt=>(0,Rr.jM)(Bt)),!(0,Rr.pP)(ht)){ye.push(ht);continue}for(const Bt of ht.fields){if(Bt.type!==H.fS.number)continue;const It=B[we]?.stat??ct.gz.lastNotNull,Gt=(0,ct.Kx)({field:Bt,reducers:[It]})[It]??null,mn=new At.v;bt!==void 0&&(mn.addField(bt),mn.addField(Bt),j[we][`Trend #${we}`]===void 0&&(j[we][`Trend #${we}`]=Ji(`Trend #${we}`,H.fS.frame)),j[we][`Trend #${we}`].values.push({...mn,value:Gt,length:Bt.values.length})),Qe.forEach(pa=>{ie[we][pa].values.push(Bt.labels?.[pa]??"")})}}}for(const we of Object.keys(Se)){const He={},Qe=new At.v;Qe.refId=we;const rt=ie[we];if(rt!==void 0)for(const[bt,Wt]of Object.entries(rt))He[bt]===void 0&&(He[bt]=Wt);for(const bt of Object.values(He))Qe.addField(bt);const ht=j[we];for(const bt of Object.values(ht))Qe.addField(bt);Qe.fields.length>0&&ye.push(Qe)}return ye}function Ji(B,V){return{name:B,type:V,config:{},values:[]}}function Xi(B){let V={};for(const j of B)j.refId!==void 0&&(V[j.refId]===void 0?V[j.refId]=1:V[j.refId]++);return V}function dd({input:B,options:V,onChange:j}){const ie=Xi(B),ye=(0,s.useCallback)((He,Qe)=>{const rt=Qe?.value!==void 0?Qe.value:"";j({...V,[He]:{...V[He],timeField:rt}})},[j,V]),Se=(0,s.useCallback)((He,Qe)=>{const rt=Qe[0];rt&&(0,ct.CC)(rt)&&j({...V,[He]:{...V[He],stat:rt}})},[j,V]);let we=[];for(const He of Object.keys(ie)){const Qe={},rt=[];for(const ht of B)if(ht.refId===He)for(const bt of ht.fields)(0,Rr.jM)(bt)&&(Qe[bt.name]=bt);for(const ht of Object.values(Qe)){const{name:bt}=ht;rt.push({label:bt,value:bt})}we.push(s.createElement(Pe.Z,{key:He},s.createElement(q._,null,s.createElement(ts.W,null,`Trend #${He}`)),s.createElement(q._,{label:"Time field",tooltip:"The time field that will be used for the time series. If not selected the first found will be used."},s.createElement(Ee.Ph,{onChange:ye.bind(null,He),options:rt,value:V[He]?.timeField,isClearable:!0})),s.createElement(q._,{label:"Stat",tooltip:"The statistic that should be calculated for this time series."},s.createElement(nt.m,{stats:[V[He]?.stat??ct.gz.lastNotNull],onChange:Se.bind(null,He),filterOptions:ht=>ht.id!==ct.gz.allValues&&ht.id!==ct.gz.uniqueValues}))))}return s.createElement(s.Fragment,null,we)}const Ar={id:Sr.id,editor:dd,transformation:Sr,name:Sr.name,description:Sr.description,state:We.BV.beta,help:pe(Sr.id).helperDocs},qi=()=>[_l,xt,$l,Ao,De,Hi,ns,xs,dr,qa,La,Tn,kl,rr,Aa,As,Wn,ma,Oa,ss,cd,Si,$t,Ea,fr,Ql,mt,...Z.config.featureToggles.formatString?[lo]:[],...Z.config.featureToggles.regressionTransformation?[js]:[],co,Ar];function wo(){return new Promise(B=>require(["vs/language/kusto/monaco.contribution"],()=>B()))}function ql(){return[{id:"kusto",name:"kusto",init:wo}]}var qs=e(26093),or=e(55024),is=e(97890),ud=e(34840),ir=e(64704),el=e(8310),tl=e(58947),$u=e(85530),zu=e(25108),er=e(20298),ec=e(40556),Qa=e(53166),ku=e(66073),xi=e(4832),Hu=e(55735),tc=e(70925),md=e(6485);const fd=()=>{const B=!!z.default.oauth;return{saml:{bgColor:"#464646",enabled:z.default.samlEnabled,name:z.default.samlName||md.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:B&&!!z.default.oauth.google,name:z.default.oauth?.google?.name||"Google",icon:z.default.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:B&&!!z.default.oauth.azuread,name:z.default.oauth?.azuread?.name||"Microsoft",icon:z.default.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:B&&!!z.default.oauth.github,name:z.default.oauth?.github?.name||"GitHub",icon:z.default.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:B&&!!z.default.oauth.gitlab,name:z.default.oauth?.gitlab?.name||"GitLab",icon:z.default.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:B&&!!z.default.oauth.grafana_com,name:z.default.oauth?.grafana_com?.name||"Grafana.com",icon:z.default.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:B&&!!z.default.oauth.okta,name:z.default.oauth?.okta?.name||"Okta",icon:z.default.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:B&&!!z.default.oauth.generic_oauth,name:z.default.oauth?.generic_oauth?.name||"OAuth",icon:z.default.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},nc=B=>({button:(0,Ie.css)({color:"#d8d9da",position:"relative"}),buttonIcon:(0,Ie.css)({position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)"}),divider:{base:(0,Ie.css)({color:B.colors.text.primary,display:"flex",marginBottom:B.spacing(1),justifyContent:"space-between",textAlign:"center",width:"100%"}),line:(0,Ie.css)({width:100,height:10,borderBottom:`1px solid ${B.colors.text}`})}}),di=()=>{const B=(0,st.wW)(nc);return s.createElement(s.Fragment,null,s.createElement("div",{className:B.divider.base},s.createElement("div",null,s.createElement("div",{className:B.divider.line})),s.createElement("div",null,s.createElement("span",null,!z.default.disableLoginForm&&s.createElement("span",null,"or"))),s.createElement("div",null,s.createElement("div",{className:B.divider.line}))),s.createElement("div",{className:"clearfix"}))};function Ti(B,V,j){return(0,Ie.cx)(V.button,(0,Ie.css)({backgroundColor:B.bgColor,color:j.colors.getContrastText(B.bgColor),["&:hover"]:{backgroundColor:j.colors.emphasize(B.bgColor,.15),boxShadow:j.shadows.z1}}))}const Gu=()=>{const B=(0,p.pickBy)(fd(),ye=>ye.enabled),V=Object.keys(B).length>0,j=(0,st.l4)(),ie=(0,st.wW)(nc);return V?s.createElement(_a.wc,null,s.createElement(di,null),Object.entries(B).map(([ye,Se])=>s.createElement(fe.Qj,{key:ye,className:Ti(Se,ie,j),href:`login/${Se.hrefName?Se.hrefName:ye}`,target:"_self",fullWidth:!0},s.createElement(ka.J,{className:ie.buttonIcon,name:Se.icon}),"Sign in with ",Se.name))):null},ju=()=>{const B=(0,z.iE)().verifyEmailEnabled?`${(0,z.iE)().appSubUrl}/verify`:`${(0,z.iE)().appSubUrl}/signup`,V=(0,Ie.css)({paddingTop:"16px"});return s.createElement(_a.wc,null,s.createElement("div",{className:V},"New to Grafana?"),s.createElement(fe.Qj,{className:(0,Ie.css)({width:"100%",justifyContent:"center"}),href:B,variant:"secondary",fill:"outline"},"Sign up"))},Uo=()=>{const B=(0,st.wW)(gd);return document.title=ec.c.AppTitle,s.createElement(xi.Z,null,({loginHint:V,passwordHint:j,disableLoginForm:ie,disableUserSignUp:ye,login:Se,isLoggingIn:we,changePassword:He,skipPasswordChange:Qe,isChangingPassword:rt,showDefaultPasswordWarning:ht,loginErrorMessage:bt})=>s.createElement(tc.dd,{isChangingPassword:rt},!rt&&s.createElement(tc.$s,null,bt&&s.createElement(Dr.b,{className:B.alert,severity:"error",title:(0,Qa.t)("login.error.title","Login failed")},bt),!ie&&s.createElement(Hu.U,{onSubmit:Se,loginHint:V,passwordHint:j,isLoggingIn:we},s.createElement(_a.Lh,{justify:"flex-end"},!Z.config.auth.disableLogin&&s.createElement(fe.Qj,{className:B.forgottenPassword,fill:"text",href:`${Z.config.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),s.createElement(Gu,null),!ye&&s.createElement(ju,null)),rt&&s.createElement(tc.$s,null,s.createElement(ku.G,{showDefaultPasswordWarning:ht,onSubmit:He,onSkip:()=>Qe()}))))},gd=B=>({forgottenPassword:(0,Ie.css)({padding:0,marginTop:B.spacing(.5)}),alert:(0,Ie.css)({width:"100%"})});var Mr=e(50186),Qu=e(63082),ac=e(96305);function Yu({description:B,text:V,url:j}){const ie=(0,st.wW)(Zu);return s.createElement(ac.Z,{className:ie.card,href:j},s.createElement(ac.Z.Heading,null,V),s.createElement(ac.Z.Description,{className:ie.description},B))}const Zu=B=>({card:(0,Ie.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,Ie.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function so({navId:B,header:V}){const{node:j}=(0,Qu.q)(B),ie=(0,st.wW)(Ju),ye=j.children?.filter(Se=>!Se.hideFromTabs);return s.createElement(Mr.T,{navId:j.id},s.createElement(Mr.T.Contents,null,s.createElement("div",{className:ie.content},V,ye&&ye.length>0&&s.createElement("section",{className:ie.grid},ye?.map(Se=>s.createElement(Yu,{key:Se.id,description:Se.subTitle,text:Se.text,url:Se.url??""}))))))}const Ju=B=>({content:(0,Ie.css)({display:"flex",flexDirection:"column",gap:B.spacing(2)}),grid:(0,Ie.css)({display:"grid",gap:B.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:B.spacing(2,0)})});var $r=e(57247),hd=e(65923);function zr(){return s.createElement(Mr.T,{navId:"home",layout:$r.Q.Canvas,pageNav:{text:"Page not found"}},s.createElement(hd.j,{entity:"Page"}))}var Ba=e(56811),Xu=e(28298),Za=e(75923),vn=e(42342),Oi=e(40137);const Qs="dddd YYYY-MM-DD HH:mm zz",qu="/admin/authentication/ldap";class em extends s.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:V,user:j}=this.props,ye=V&&V.nextSync?(0,Oi.dq)(V.nextSync,{format:Qs}):"",Se=`${qu}?user=${j&&j.login}`,we=Za.Vt.hasPermission(vn.AccessControlAction.LDAPUsersRead),He=Za.Vt.hasPermission(vn.AccessControlAction.LDAPUsersSync);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"External sync"),s.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),s.createElement("td",null,s.createElement("span",{className:"label label-tag"},"LDAP"))),s.createElement("tr",null,V.enabled?s.createElement(s.Fragment,null,s.createElement("td",null,"Next scheduled synchronization"),s.createElement("td",{colSpan:2},ye)):s.createElement(s.Fragment,null,s.createElement("td",null,"Next scheduled synchronization"),s.createElement("td",{colSpan:2},"Not enabled")))))),s.createElement("div",{className:"gf-form-button-row"},He&&s.createElement(fe.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),we&&s.createElement(fe.Qj,{variant:"secondary",href:Se},"Debug LDAP Mapping"))))}}var nl=e(33227),Ii=e(65420),pd=e(5572),ui=e(85765),Go=e(58037),vd=e(17806),sc=e(59256),tm=e(41710);function Ws({onSelected:B,className:V,inputId:j,autoFocus:ie,excludeOrgs:ye}){(0,s.useEffect)(()=>{ie&&j&&document.getElementById(j)?.focus()},[ie,j]);const[Se,we]=(0,tm.Z)(async()=>{const Qe=(await(0,R.i)().get("/api/orgs")).map(rt=>({value:{id:rt.id,name:rt.name},label:rt.name}));if(ye){let rt=ye.map(bt=>bt.orgId);return Qe.filter(bt=>!rt.includes(bt.value.id))}else return Qe});return s.createElement(Ee.qb,{inputId:j,className:V,isLoading:Se.loading,defaultOptions:!0,isSearchable:!1,loadOptions:we,onChange:B,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var Fs=e(48334);class nm extends s.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=s.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:V,orgs:j,isExternalUser:ie,onOrgRoleChange:ye,onOrgRemove:Se,onOrgAdd:we}=this.props,{showAddOrgModal:He}=this.state,Qe=Za.Vt.hasPermission(vn.AccessControlAction.OrgUsersAdd)&&!ie;return s.createElement("div",null,s.createElement("h3",{className:"page-heading"},"Organizations"),s.createElement(Pt.K,{gap:1.5,direction:"column"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,j.map((rt,ht)=>s.createElement(sm,{key:`${rt.orgId}-${ht}`,isExternalUser:ie,user:V,org:rt,onOrgRoleChange:ye,onOrgRemove:Se})))),s.createElement("div",null,Qe&&s.createElement(fe.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),s.createElement(po,{user:V,userOrgs:j,isOpen:He,onOrgAdd:we,onDismiss:this.dismissOrgAddModal})))}}const am=(0,nl.B)(B=>({removeButton:(0,Ie.css)`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${B.v1.palette.blue95};
    `,label:(0,Ie.css)`
      font-weight: 500;
    `,disabledTooltip:(0,Ie.css)`
      display: flex;
    `,tooltipItem:(0,Ie.css)`
      margin-left: 5px;
    `,tooltipItemLink:(0,Ie.css)`
      color: ${B.v1.palette.blue95};
    `,rolePickerWrapper:(0,Ie.css)`
      display: flex;
    `,rolePicker:(0,Ie.css)`
      flex: auto;
      margin-right: ${B.spacing(1)};
    `}));class Ed extends s.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:V}=this.props;this.props.onOrgRemove(V.orgId)},this.onChangeRoleClick=()=>{const{org:V}=this.props;this.setState({isChangingRole:!0,currentRole:V.role})},this.onOrgRoleChange=V=>{this.setState({currentRole:V})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=V=>{this.props.onOrgRoleChange(this.props.org.orgId,V)}}componentDidMount(){Za.Vt.licensedAccessControlEnabled()&&Za.Vt.hasPermission(vn.AccessControlAction.ActionRolesList)&&(0,sc.ul)(this.props.org.orgId).then(V=>this.setState({roleOptions:V})).catch(V=>console.error(V))}render(){const{user:V,org:j,isExternalUser:ie,theme:ye}=this.props,Se=V?.authLabels?.length&&V?.authLabels[0],we=Se?`Synced via ${Se}`:"",{currentRole:He,isChangingRole:Qe}=this.state,rt=am(ye),ht=(0,Ie.cx)("width-16",rt.label),bt=Za.Vt.hasPermission(vn.AccessControlAction.OrgUsersWrite),Wt=Za.Vt.hasPermission(vn.AccessControlAction.OrgUsersRemove)&&!ie,Bt=ie||!bt,It=`${j.name}-input`;return s.createElement("tr",null,s.createElement("td",{className:ht},s.createElement("label",{htmlFor:It},j.name)),Za.Vt.licensedAccessControlEnabled()?s.createElement("td",null,s.createElement("div",{className:rt.rolePickerWrapper},s.createElement("div",{className:rt.rolePicker},s.createElement(vd.R,{userId:V?.id||0,orgId:j.orgId,basicRole:j.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Bt,basicRoleDisabledMessage:`This user's role is not editable because it is synchronized from your auth provider.
                    Refer to the Grafana authentication docs for details.`})),ie&&s.createElement(Ri,{lockMessage:we}))):s.createElement(s.Fragment,null,Qe?s.createElement("td",null,s.createElement(Fs.A,{inputId:It,value:He,onChange:this.onOrgRoleChange,autoFocus:!0})):s.createElement("td",{className:"width-25"},j.role),s.createElement("td",{colSpan:1},s.createElement("div",{className:"pull-right"},bt&&s.createElement(om,{lockMessage:we,isExternalUser:ie,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),s.createElement("td",{colSpan:1},s.createElement("div",{className:"pull-right"},Wt&&s.createElement(Ii.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const sm=(0,st.HE)(Ed),rm=(0,nl.B)(()=>({modal:(0,Ie.css)`
    width: 500px;
  `,buttonRow:(0,Ie.css)`
    text-align: center;
  `,modalContent:(0,Ie.css)`
    overflow: visible;
  `}));class po extends s.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:vn.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=V=>{const j=this.props.userOrgs.find(ie=>ie.orgId===V.value?.id);this.setState({selectedOrg:V.value,role:j?.role||vn.OrgRole.Viewer}),Za.Vt.licensedAccessControlEnabled()&&Za.Vt.hasPermission(vn.AccessControlAction.ActionRolesList)&&(0,sc.ul)(V.value?.id).then(ie=>this.setState({roleOptions:ie})).catch(ie=>console.error(ie))},this.onOrgRoleChange=V=>{this.setState({role:V})},this.onAddUserToOrg=async()=>{const{selectedOrg:V,role:j}=this.state;this.props.onOrgAdd(V.id,j),Za.Vt.licensedAccessControlEnabled()&&Za.Vt.hasPermission(vn.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,sc.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(V,j,ie)=>{this.setState({pendingRoles:V,pendingOrgId:ie,pendingUserId:j})}}render(){const{isOpen:V,user:j,userOrgs:ie}=this.props,{role:ye,roleOptions:Se,selectedOrg:we}=this.state,He=rm();return s.createElement(pd.u,{className:He.modal,contentClassName:He.modalContent,title:"Add to an organization",isOpen:V,onDismiss:this.onCancel},s.createElement(ui.g,{label:"Organization"},s.createElement(Ws,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:ie,autoFocus:!0})),s.createElement(ui.g,{label:"Role",disabled:we===null},s.createElement(vd.R,{userId:j?.id||0,orgId:we?.id,basicRole:ye,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Se,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles})),s.createElement(pd.u.ButtonRow,null,s.createElement(_a.Lh,{spacing:"md",justify:"center"},s.createElement(fe.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),s.createElement(fe.zx,{variant:"primary",disabled:we===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const yd=B=>({disabledTooltip:(0,Ie.css)`
    display: flex;
  `,tooltipItemLink:(0,Ie.css)`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:(0,Ie.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:(0,Ie.css)`
    line-height: 2;
  `});function om({lockMessage:B,onChangeRoleClick:V,isExternalUser:j,onOrgRoleSave:ie,onCancelClick:ye}){const Se=(0,st.wW)(yd);return s.createElement("div",{className:Se.disabledTooltip},j?s.createElement(s.Fragment,null,s.createElement("span",{className:Se.lockMessageClass},B),s.createElement(Go.u,{placement:"right-end",interactive:!0,content:s.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",s.createElement("a",{className:Se.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},s.createElement("div",{className:Se.icon},s.createElement(ka.J,{name:"question-circle"})))):s.createElement(Ii.p,{confirmText:"Save",onClick:V,onCancel:ye,onConfirm:ie,disabled:j},"Change role"))}const Ri=({lockMessage:B})=>{const V=(0,st.wW)(im);return s.createElement("div",{className:V.disabledTooltip},s.createElement("span",{className:V.lockMessageClass},B),s.createElement(Go.u,{placement:"right-end",interactive:!0,content:s.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",s.createElement("a",{className:V.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},s.createElement(ka.J,{name:"question-circle"})))},im=B=>({disabledTooltip:(0,Ie.css)`
    display: flex;
  `,tooltipItemLink:(0,Ie.css)`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:(0,Ie.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),lm=[{label:"Yes",value:!0},{label:"No",value:!1}];function cm({isGrafanaAdmin:B,isExternalUser:V,lockMessage:j,onGrafanaAdminChange:ie}){const[ye,Se]=(0,s.useState)(!1),[we,He]=(0,s.useState)(B),Qe=()=>Se(!0),rt=()=>{Se(!1),He(B)},ht=()=>ie(we),bt=Za.Vt.hasPermission(vn.AccessControlAction.UsersPermissionsUpdate)&&!V,Wt=(0,st.wW)(dm);return s.createElement("div",null,s.createElement("h3",{className:"page-heading"},"Permissions"),s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Grafana Admin"),ye?s.createElement("td",{colSpan:2},s.createElement(me.S,{options:lm,value:we,onChange:He,autoFocus:!0})):s.createElement("td",{colSpan:2},B?s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"shield"})," Yes"):s.createElement(s.Fragment,null,"No")),s.createElement("td",null,bt&&s.createElement(Ii.p,{onClick:Qe,onConfirm:ht,onCancel:rt,confirmText:"Change"},"Change"),V&&s.createElement("div",{className:Wt.lockMessageClass},s.createElement(Ri,{lockMessage:j})))))))}const dm=B=>({lockMessageClass:(0,Ie.css)`
    display: flex;
    justify-content: flex-end;
    font-style: italic;
    margin-right: ${B.spacing(.6)};
  `});var al=e(90069),rc=e(98146);function Ys({user:B,onUserUpdate:V,onUserDelete:j,onUserDisable:ie,onUserEnable:ye,onPasswordChange:Se}){const[we,He]=(0,s.useState)(!1),[Qe,rt]=(0,s.useState)(!1),ht=(0,s.useRef)(null),bt=Io=>()=>{He(Io),!Io&&ht.current&&ht.current.focus()},Wt=(0,s.useRef)(null),Bt=Io=>()=>{rt(Io),!Io&&Wt.current&&Wt.current.focus()},It=()=>j(B.id),Gt=()=>ie(B.id),mn=()=>ye(B.id),pa=Io=>{V({...B,name:Io})},Sa=Io=>{V({...B,email:Io})},da=Io=>{V({...B,login:Io})},$a=B.authLabels?.length&&B.authLabels[0],cr=$a?`Synced via ${$a}`:"",Di=B.isExternal||!Za.Vt.hasPermissionInMetadata(vn.AccessControlAction.UsersWrite,B),CD=B.isExternal||!Za.Vt.hasPermissionInMetadata(vn.AccessControlAction.UsersPasswordUpdate,B),bD=Za.Vt.hasPermissionInMetadata(vn.AccessControlAction.UsersDelete,B),PD=Za.Vt.hasPermissionInMetadata(vn.AccessControlAction.UsersDisable,B),SD=Za.Vt.hasPermissionInMetadata(vn.AccessControlAction.UsersEnable,B);return s.createElement("div",null,s.createElement("h3",{className:"page-heading"},"User information"),s.createElement(Pt.K,{direction:"column",gap:1.5},s.createElement("div",null,s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement(Ai,{label:"Name",value:B.name,locked:Di,lockMessage:cr,onChange:pa}),s.createElement(Ai,{label:"Email",value:B.email,locked:Di,lockMessage:cr,onChange:Sa}),s.createElement(Ai,{label:"Username",value:B.login,locked:Di,lockMessage:cr,onChange:da}),s.createElement(Ai,{label:"Password",value:"********",inputType:"password",locked:CD,lockMessage:cr,onChange:Se})))),s.createElement(Pt.K,{gap:2},bD&&s.createElement(s.Fragment,null,s.createElement(fe.zx,{variant:"destructive",onClick:bt(!0),ref:ht},"Delete user"),s.createElement(al.s,{isOpen:we,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:It,onDismiss:bt(!1)})),B.isDisabled&&SD&&s.createElement(fe.zx,{variant:"secondary",onClick:mn},"Enable user"),!B.isDisabled&&PD&&s.createElement(s.Fragment,null,s.createElement(fe.zx,{variant:"secondary",onClick:Bt(!0),ref:Wt},"Disable user"),s.createElement(al.s,{isOpen:Qe,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:Gt,onDismiss:Bt(!1)})))))}class Ai extends s.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=V=>{this.inputElem=V},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(V,j)=>{j!==rc.G.Invalid&&this.setState({value:V.target.value})},this.onInputBlur=(V,j)=>{j!==rc.G.Invalid&&this.setState({value:V.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:V,locked:j,lockMessage:ie,inputType:ye}=this.props,{value:Se}=this.state,we=(0,Ie.cx)("width-16",(0,Ie.css)`
        font-weight: 500;
      `);if(j)return s.createElement(um,{label:V,value:Se,lockMessage:ie});const He=`${V}-input`;return s.createElement("tr",null,s.createElement("td",{className:we},s.createElement("label",{htmlFor:He},V)),s.createElement("td",{className:"width-25",colSpan:2},this.state.editing?s.createElement(ot.I,{id:He,type:ye,defaultValue:Se,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):s.createElement("span",null,this.props.value)),s.createElement("td",null,s.createElement(Ii.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Ai.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const um=({label:B,value:V,lockMessage:j})=>{const ie=(0,Ie.css)`
    font-style: italic;
    margin-right: 0.6rem;
  `,ye=(0,Ie.cx)("width-16",(0,Ie.css)`
      font-weight: 500;
    `);return s.createElement("tr",null,s.createElement("td",{className:ye},B),s.createElement("td",{className:"width-25",colSpan:2},V),s.createElement("td",null,s.createElement("span",{className:ie},j)))};class mm extends s.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=s.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=V=>()=>{this.props.onSessionRevoke(V)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:V}=this.props,{showLogoutModal:j}=this.state,ie=Za.Vt.hasPermission(vn.AccessControlAction.UsersLogout);return s.createElement("div",null,s.createElement("h3",{className:"page-heading"},"Sessions"),s.createElement(Pt.K,{direction:"column",gap:1.5},s.createElement("div",null,s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Last seen"),s.createElement("th",null,"Logged on"),s.createElement("th",null,"IP address"),s.createElement("th",{colSpan:2},"Browser and OS"))),s.createElement("tbody",null,V&&V.map((ye,Se)=>s.createElement("tr",{key:`${ye.id}-${Se}`},s.createElement("td",null,ye.isActive?"Now":ye.seenAt),s.createElement("td",null,(0,Qa.$q)(ye.createdAt,{dateStyle:"long"})),s.createElement("td",null,ye.clientIp),s.createElement("td",null,`${ye.browser} on ${ye.os} ${ye.osVersion}`),s.createElement("td",null,s.createElement("div",{className:"pull-right"},ie&&s.createElement(Ii.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(ye.id),autoFocus:!0},"Force logout")))))))),s.createElement("div",null,ie&&V.length>0&&s.createElement(fe.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),s.createElement(al.s,{isOpen:j,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const fm=mm;var tr=e(64175);class gm extends s.PureComponent{constructor(){super(...arguments),this.onUserUpdate=V=>{this.props.updateUser(V)},this.onPasswordChange=V=>{const{user:j,setUserPassword:ie}=this.props;j&&ie(j.id,V)},this.onUserDelete=V=>{this.props.deleteUser(V)},this.onUserDisable=V=>{this.props.disableUser(V)},this.onUserEnable=V=>{this.props.enableUser(V)},this.onGrafanaAdminChange=V=>{const{user:j,updateUserPermissions:ie}=this.props;j&&ie(j.id,V)},this.onOrgRemove=V=>{const{user:j,deleteOrgUser:ie}=this.props;j&&ie(j.id,V)},this.onOrgRoleChange=(V,j)=>{const{user:ie,updateOrgUserRole:ye}=this.props;ie&&ye(ie.id,V,j)},this.onOrgAdd=(V,j)=>{const{user:ie,addOrgUser:ye}=this.props;ie&&ye(ie,V,j)},this.onSessionRevoke=V=>{const{user:j,revokeSession:ie}=this.props;j&&ie(V,j.id)},this.onAllSessionsRevoke=()=>{const{user:V,revokeAllSessions:j}=this.props;V&&j(V.id)},this.onUserSync=()=>{const{user:V,syncLdapUser:j}=this.props;V&&j(V.id)}}async componentDidMount(){const{match:V,loadAdminUserPage:j}=this.props;j(parseInt(V.params.id,10))}render(){const{user:V,orgs:j,sessions:ie,ldapSyncInfo:ye,isLoading:Se}=this.props,we=V?.isExternal&&V?.authLabels?.includes("LDAP"),He=Za.Vt.hasPermission(vn.AccessControlAction.UsersAuthTokenList),Qe=Za.Vt.hasPermission(vn.AccessControlAction.LDAPStatusRead),rt=V?.authLabels?.[0],ht=rt?`Synced via ${rt}`:"",bt={text:V?.login??"",icon:"shield",subTitle:"Manage settings for an individual user."};return s.createElement(Mr.T,{navId:"global-users",pageNav:bt},s.createElement(Mr.T.Contents,{isLoading:Se},s.createElement(Pt.K,{gap:5,direction:"column"},V&&s.createElement(s.Fragment,null,s.createElement(Ys,{user:V,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),we&&V?.isExternallySynced&&(0,Xu.v)("ldapsync")&&ye&&Qe&&s.createElement(em,{ldapSyncInfo:ye,user:V,onUserSync:this.onUserSync}),s.createElement(cm,{isGrafanaAdmin:V.isGrafanaAdmin,isExternalUser:V?.isGrafanaAdminExternallySynced,lockMessage:ht,onGrafanaAdminChange:this.onGrafanaAdminChange})),j&&s.createElement(nm,{user:V,orgs:j,isExternalUser:V?.isExternallySynced,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),ie&&He&&s.createElement(fm,{sessions:ie,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke}))))}}const Dd=B=>({user:B.userAdmin.user,sessions:B.userAdmin.sessions,orgs:B.userAdmin.orgs,ldapSyncInfo:B.ldap.syncInfo,isLoading:B.userAdmin.isLoading,error:B.userAdmin.error}),hm={loadAdminUserPage:tr.PK,updateUser:tr.Nq,setUserPassword:tr.tQ,disableUser:tr.B9,enableUser:tr.Dx,deleteUser:tr.h8,updateUserPermissions:tr.Xx,addOrgUser:tr.bN,updateOrgUserRole:tr.Jk,deleteOrgUser:tr.uV,revokeSession:tr._1,revokeAllSessions:tr.Fm,syncLdapUser:tr.CP},pm=(0,or.connect)(Dd,hm)(gm);var oc=e(17618);const vm=({ldapConnectionInfo:B})=>s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Connection"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Host"),s.createElement("th",{colSpan:2},"Port"))),s.createElement("tbody",null,B&&B.map((V,j)=>s.createElement("tr",{key:j},s.createElement("td",null,V.host),s.createElement("td",null,V.port),s.createElement("td",null,V.available?s.createElement(ka.J,{name:"check",className:"pull-right"}):s.createElement(ka.J,{name:"exclamation-triangle",className:"pull-right"}))))))),s.createElement("div",{className:"gf-form-group"},s.createElement(Lr,{ldapConnectionInfo:B})))),Lr=({ldapConnectionInfo:B})=>{if(!B.some(ye=>ye.error))return null;const j=[];B.forEach(ye=>{ye.error&&j.push(ye)});const ie=j.map((ye,Se)=>s.createElement("div",{key:Se},s.createElement("span",{style:{fontWeight:500}},ye.host,":",ye.port,s.createElement("br",null)),s.createElement("span",null,ye.error),Se!==j.length-1&&s.createElement(s.Fragment,null,s.createElement("br",null),s.createElement("br",null))));return s.createElement(Dr.b,{title:"Connection error",severity:vn.AppNotificationSeverity.Error},ie)};var Em=e(89719);const kr="dddd YYYY-MM-DD HH:mm zz";class ym extends s.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:V}=this.props,{isSyncing:j}=this.state,ie=(0,Oi.dq)(V.nextSync,{format:kr});return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",s.createElement(fe.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},s.createElement("span",{className:"btn-title"},"Bulk-sync now"),j&&s.createElement(Em.$,{inline:!0}))),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"Active synchronisation"),s.createElement("td",{colSpan:2},V.enabled?"Enabled":"Disabled")),s.createElement("tr",null,s.createElement("td",null,"Scheduled"),s.createElement("td",null,V.schedule)),s.createElement("tr",null,s.createElement("td",null,"Next scheduled synchronisation"),s.createElement("td",null,ie)))))))}}const Dm=({groups:B,showAttributeMapping:V})=>{const j=V?B:B.filter(ie=>ie.orgRole);return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,V&&s.createElement("th",null,"LDAP Group"),s.createElement("th",null,"Organization",s.createElement(Go.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},s.createElement(ka.J,{name:"info-circle"}))),s.createElement("th",null,"Role"))),s.createElement("tbody",null,j.map((ie,ye)=>s.createElement("tr",{key:`${ie.orgId}-${ye}`},V&&s.createElement("td",null,ie.groupDN),ie.orgName&&ie.orgRole?s.createElement("td",null,ie.orgName):s.createElement("td",null),ie.orgRole?s.createElement("td",null,ie.orgRole):s.createElement("td",null,s.createElement("span",{className:"text-warning"},"No match"),s.createElement(Go.u,{placement:"top",content:"No matching groups found",theme:"info"},s.createElement(ka.J,{name:"info-circle"})))))))))},Cm=({info:B,showAttributeMapping:V})=>s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{colSpan:2},"User information"),V&&s.createElement("th",null,"LDAP attribute"))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"},"First name"),s.createElement("td",null,B.name.ldapValue),V&&s.createElement("td",null,B.name.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Surname"),s.createElement("td",null,B.surname.ldapValue),V&&s.createElement("td",null,B.surname.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Username"),s.createElement("td",null,B.login.ldapValue),V&&s.createElement("td",null,B.login.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Email"),s.createElement("td",null,B.email.ldapValue),V&&s.createElement("td",null,B.email.cfgAttrValue)))))),hr=({permissions:B})=>s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{colSpan:1},"Permissions"))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"}," Grafana admin"),s.createElement("td",null,B.isGrafanaAdmin?s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"shield"})," Yes"):"No")),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Status"),s.createElement("td",null,B.isDisabled?s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"times"})," Inactive"):s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"check"})," Active"))))))),bm=({teams:B,showAttributeMapping:V})=>{const j=V?B:B.filter(ie=>ie.teamName);return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,V&&s.createElement("th",null,"LDAP Group"),s.createElement("th",null,"Organisation"),s.createElement("th",null,"Team"))),s.createElement("tbody",null,j.map((ie,ye)=>s.createElement("tr",{key:`${ie.teamName}-${ye}`},V&&s.createElement(s.Fragment,null,s.createElement("td",null,ie.groupDN),!ie.orgName&&s.createElement(s.Fragment,null,s.createElement("td",null),s.createElement("td",null,s.createElement("span",{className:"text-warning"},"No match"),s.createElement(Go.u,{placement:"top",content:"No matching teams found",theme:"info"},s.createElement(ka.J,{name:"info-circle"}))))),ie.orgName&&s.createElement(s.Fragment,null,s.createElement("td",null,ie.orgName),s.createElement("td",null,ie.teamName))))))))},Pm=({ldapUser:B,showAttributeMapping:V})=>s.createElement(s.Fragment,null,s.createElement(Cm,{info:B.info,showAttributeMapping:V}),s.createElement(hr,{permissions:B.permissions}),B.roles&&B.roles.length>0&&s.createElement(Dm,{groups:B.roles,showAttributeMapping:V}),B.teams&&B.teams.length>0?s.createElement(bm,{teams:B.teams,showAttributeMapping:V}):s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"No teams found via LDAP"))))))),ic={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"};class Sm extends s.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=V=>{V&&this.fetchUserMapping(V)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:V,queryParams:j}=this.props;await V(),await this.fetchLDAPStatus(),j.username&&await this.fetchUserMapping(j.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:V,loadLdapSyncStatus:j}=this.props;return Promise.all([V(),j()])}async fetchUserMapping(V){const{loadUserMapping:j}=this.props;return await j(V)}render(){const{ldapUser:V,userError:j,ldapError:ie,ldapSyncInfo:ye,ldapConnectionInfo:Se,queryParams:we}=this.props,{isLoading:He}=this.state,Qe=Za.Vt.hasPermission(vn.AccessControlAction.LDAPUsersRead);return s.createElement(Mr.T,{navId:"authentication",pageNav:ic},s.createElement(Mr.T.Contents,{isLoading:He},s.createElement(s.Fragment,null,ie&&ie.title&&s.createElement(Dr.b,{title:ie.title,severity:vn.AppNotificationSeverity.Error},ie.body),s.createElement(vm,{ldapConnectionInfo:Se}),(0,Xu.v)("ldapsync")&&ye&&s.createElement(ym,{ldapSyncInfo:ye}),Qe&&s.createElement(s.Fragment,null,s.createElement("h3",null,"Test user mapping"),s.createElement(oc.l,{onSubmit:rt=>this.search(rt.username)},({register:rt})=>s.createElement(_a.Lh,null,s.createElement(ui.g,{label:"Username"},s.createElement(ot.I,{...rt("username",{required:!0}),id:"username",type:"text",defaultValue:we.username})),s.createElement(fe.zx,{variant:"primary",type:"submit"},"Run"))),j&&j.title&&s.createElement(Dr.b,{title:j.title,severity:vn.AppNotificationSeverity.Error,onRemove:this.onClearUserError},j.body),V&&s.createElement(Pm,{ldapUser:V,showAttributeMapping:!0})))))}}const sl=B=>({ldapConnectionInfo:B.ldap.connectionInfo,ldapUser:B.ldap.user,ldapSyncInfo:B.ldap.syncInfo,userError:B.ldap.userError,ldapError:B.ldap.ldapError}),Mm={loadLdapState:tr.Y3,loadLdapSyncStatus:tr.j4,loadUserMapping:tr.b_,clearUserError:tr.V0,clearUserMappingInfo:tr.IS},xm=(0,or.connect)(sl,Mm)(Sm);var Mn=e(42943),Zs=e(81347);const lc=[],rl=[...lc,{path:"/alerting-legacy",component:()=>s.createElement(so,{navId:"alerting-legacy"})},{path:"/alerting-legacy/list",component:(0,Mn.Q)(()=>e.e(9921).then(e.bind(e,86523)))},{path:"/alerting-legacy/ng/list",component:(0,Mn.Q)(()=>e.e(9921).then(e.bind(e,86523)))},{path:"/alerting-legacy/notifications",roles:z.config.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:(0,Mn.Q)(()=>e.e(3002).then(e.bind(e,11836)))},{path:"/alerting-legacy/notifications/templates/new",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(3002).then(e.bind(e,11836)))},{path:"/alerting-legacy/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(3002).then(e.bind(e,11836)))},{path:"/alerting-legacy/notifications/receivers/new",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(3002).then(e.bind(e,11836)))},{path:"/alerting-legacy/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(3002).then(e.bind(e,11836)))},{path:"/alerting-legacy/notifications/global-config",roles:()=>["Admin","Editor"],component:(0,Mn.Q)(()=>e.e(3002).then(e.bind(e,11836)))},{path:"/alerting-legacy/notification/new",component:(0,Mn.Q)(()=>e.e(9398).then(e.bind(e,38596)))},{path:"/alerting-legacy/notification/:id/edit",component:(0,Mn.Q)(()=>e.e(1939).then(e.bind(e,58934)))},{path:"/alerting-legacy/upgrade",roles:()=>["Admin"],component:(0,Mn.Q)(()=>e.e(9027).then(e.bind(e,3663)))}],ol=[...lc,{path:"/alerting",component:(0,Mn.Q)(()=>e.e(6034).then(e.bind(e,81654)))},{path:"/alerting/home",exact:!1,component:(0,Mn.Q)(()=>e.e(6034).then(e.bind(e,81654)))},{path:"/alerting/list",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingRuleRead,vn.AccessControlAction.AlertingRuleExternalRead]),component:(0,Mn.Q)(()=>Promise.all([e.e(6826),e.e(4937),e.e(624),e.e(6330),e.e(2461)]).then(e.bind(e,80952)))},{path:"/alerting/routes",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsRead,vn.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Mn.Q)(()=>Promise.all([e.e(4937),e.e(518),e.e(8648)]).then(e.bind(e,37056)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsWrite,vn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(9355).then(e.bind(e,27736)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsWrite,vn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(9355).then(e.bind(e,27736)))},{path:"/alerting/silences",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingInstanceRead,vn.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Mn.Q)(()=>e.e(1783).then(e.bind(e,78615)))},{path:"/alerting/silence/new",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingInstanceCreate,vn.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Mn.Q)(()=>e.e(1783).then(e.bind(e,78615)))},{path:"/alerting/silence/:id/edit",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingInstanceUpdate,vn.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Mn.Q)(()=>e.e(1783).then(e.bind(e,78615)))},{path:"/alerting/notifications",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsRead,vn.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,60499)))},{path:"/alerting/notifications/:type/new",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsWrite,vn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,60499)))},{path:"/alerting/notifications/receivers/:id/edit",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsWrite,vn.AccessControlAction.AlertingNotificationsExternalWrite,vn.AccessControlAction.AlertingNotificationsRead,vn.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,60499)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsWrite,vn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,60499)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsWrite,vn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,60499)))},{path:"/alerting/notifications/:type",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingNotificationsWrite,vn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,60499)))},{path:"/alerting/groups/",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingInstanceRead,vn.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Mn.Q)(()=>e.e(2415).then(e.bind(e,49413)))},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingRuleCreate,vn.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Mn.Q)(()=>Promise.all([e.e(6826),e.e(4937),e.e(5394),e.e(937),e.e(763),e.e(518),e.e(4759),e.e(6330),e.e(5372)]).then(e.bind(e,11001)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingRuleUpdate,vn.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Mn.Q)(()=>Promise.all([e.e(6826),e.e(4937),e.e(5394),e.e(937),e.e(763),e.e(518),e.e(4759),e.e(6330),e.e(5372)]).then(e.bind(e,11001)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingRuleRead]),component:(0,Mn.Q)(()=>Promise.all([e.e(6826),e.e(4937),e.e(5394),e.e(937),e.e(763),e.e(518),e.e(4759),e.e(6330),e.e(5372)]).then(e.bind(e,58905)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingRuleRead,vn.AccessControlAction.AlertingRuleExternalRead]),component:(0,Mn.Q)(()=>e.e(4679).then(e.bind(e,66770)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Zs.ql)([vn.AccessControlAction.AlertingRuleRead,vn.AccessControlAction.AlertingRuleExternalRead]),component:(0,Mn.Q)(()=>e.e(7918).then(e.bind(e,51353)))},{path:"/alerting/admin",roles:()=>["Admin"],component:(0,Mn.Q)(()=>e.e(7680).then(e.bind(e,88340)))}];function Tm(B=z.config){if(B.unifiedAlertingEnabled)return ol;if(B.alertingEnabled){if(z.config.featureToggles.alertingPreviewUpgrade)return[...rl,...ol];const j=[{path:"/alerting",component:()=>s.createElement(is.l_,{to:"/alerting-legacy"})},{path:"/alerting/list",component:()=>s.createElement(is.l_,{to:"/alerting-legacy/list"})},{path:"/alerting/notifications",component:()=>s.createElement(is.l_,{to:"/alerting-legacy/notifications"})},{path:"/alerting/notification/new",component:()=>s.createElement(is.l_,{to:"/alerting-legacy/notification/new"})},{path:"/alerting/notification/:id/edit",component:ie=>s.createElement(is.l_,{to:"/alerting-legacy/notification/:id/edit".replace(":id",ie.match.params.id)})}];return[...rl,...j]}return(0,p.uniq)([...rl,...ol].map(j=>j.path)).map(j=>({path:j,component:(0,Mn.Q)(()=>e.e(1333).then(e.bind(e,49932)))}))}var mi=e(24477);const il=B=>({alertContent:(0,Ie.css)`
    display: flex;
    flex-direction: row;
    padding: 0;
    justify-content: space-between;
    align-items: center;
  `,alertParagraph:(0,Ie.css)`
    margin: 0 ${B.spacing(1)} 0 0;
    line-height: ${B.spacing(B.components.height.sm)};
  `});function Om(){const B=(0,st.wW)(il),[V,j]=(0,s.useState)(!0);return V?s.createElement(Dr.b,{severity:"info",title:"",onRemove:()=>j(!1)},s.createElement("div",{className:B.alertContent},s.createElement("p",{className:B.alertParagraph},"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."),s.createElement(fe.Qj,{"aria-label":"Link to Connections",icon:"arrow-right",href:mi.Z.DataSources,fill:"text"},"Go to connections"))):s.createElement(s.Fragment,null)}function Im(){return[{path:`/${mi.D}`,exact:!1,component:(0,Mn.Q)(()=>Promise.all([e.e(5517),e.e(9923),e.e(5981)]).then(e.bind(e,13942)))}]}var ll=e(53812),cc=e(49744);const Rm=[{path:"/plugins",navId:"plugins",roles:dc([vn.AccessControlAction.PluginsInstall,vn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:cc.cd.Home,component:(0,Mn.Q)(()=>e.e(94).then(e.bind(e,79299)))},{path:"/plugins/browse",navId:"plugins",roles:dc([vn.AccessControlAction.PluginsInstall,vn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:cc.cd.Browse,component:(0,Mn.Q)(()=>e.e(94).then(e.bind(e,79299)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:dc([vn.AccessControlAction.PluginsInstall,vn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:cc.cd.Details,component:(0,Mn.Q)(()=>Promise.all([e.e(5517),e.e(9923),e.e(2417)]).then(e.bind(e,66446)))}];function dc(B,V){return()=>B.some(j=>Za.Vt.hasPermission(j))?[]:V}function Cd(){return Rm}var Am=e(90845),bo=e(4579),bd=e(35210),cl=e(34824),fi=e(56821),Lm=e(70621),Bm=e(42474),Po=e(79999);function Hr(B){return console.error(B),gi("Exception thrown","See console for details")}function Pd(){return gi("Page not found","404 Error")}function gi(B,V){const j={text:B,subTitle:V,icon:"exclamation-triangle"};return{node:j,main:j}}var Sd=e(67253),uc=e(97068),dl=e(8913),Md=e(35997),mc=e(69386);const fc={loading:!0,loadingError:!1,pluginNav:null,plugin:null};function wm({pluginId:B,pluginNavSection:V}){const j=(0,is.$B)(),ie=(0,is.TH)(),[ye,Se]=(0,s.useReducer)(Li.reducer,fc),we=Z.config.appSubUrl+ie.pathname+ie.search,{plugin:He,loading:Qe,loadingError:rt,pluginNav:ht}=ye,bt=(0,Md.d)(V,ht,we),Wt=(0,s.useMemo)(()=>(0,M.Ox)(ie.search),[ie.search]),Bt=(0,s.useMemo)(()=>(0,mc.a)(bt),[bt]),It=(0,Po.p)();(0,s.useEffect)(()=>{Um(B,Se)},[B]);const Gt=(0,s.useCallback)(da=>Se(Li.actions.changeNav(da)),[]);if(!He||B!==He.meta.id){const da=It.chrome.state.getValue().layout;return s.createElement(Mr.T,{navModel:bt,pageNav:{text:""},layout:da},Qe&&s.createElement(Bm.Z,null),!Qe&&rt&&s.createElement(hd.j,{entity:"App"}))}if(!He.root)return s.createElement(Mr.T,{navModel:bt??gi("Plugin load error")},s.createElement("div",null,"No root app page component found"));const mn=He.root&&s.createElement(bd.b,{meta:He.meta},s.createElement(He.root,{meta:He.meta,basename:j.url,onNavChanged:Gt,query:Wt,path:ie.pathname})),pa=()=>{if(!He.meta?.includes||Za.Vt.isGrafanaAdmin||Za.Vt.user.orgRole===cl.B.Admin)return!0;const da=He.meta?.includes.find(cr=>cr.path===ie.pathname);if(!da)return!0;const $a=da?.role||"";return!$a||Za.Vt.isEditor&&$a===cl.B.Viewer?!0:Za.Vt.hasRole($a)},Sa=()=>s.createElement(Dr.b,{severity:"warning",title:"Access denied"},"You do not have permission to see this page.");return pa()?ht?s.createElement(s.Fragment,null,bt?s.createElement(Mr.T,{navModel:bt,pageNav:ht?.node},s.createElement(Mr.T.Contents,{isLoading:Qe},mn)):s.createElement(Mr.T,null,mn)):s.createElement(mc.v.Provider,{value:Bt},mn):s.createElement(Sa,null)}const Li=(0,bo.oM)({name:"prom-builder-container",initialState:fc,reducers:{setState:(B,V)=>{Object.assign(B,V.payload)},changeNav:(B,V)=>{let j=V.payload;j&&j.node.children&&(j={...j,node:{...j.main,hideFromBreadcrumbs:!0}}),B.pluginNav=j}}});async function Um(B,V){try{const j=await(0,uc.a)(B).then(ie=>{const ye=ul(ie);return ye?(Za.h$.emit(fi.SI.alertError,[ye]),V(Li.actions.setState({pluginNav:gi(ye)})),null):(0,dl.Av)(ie)});V(Li.actions.setState({plugin:j,loading:!1,loadingError:!1,pluginNav:null}))}catch(j){V(Li.actions.setState({plugin:null,loading:!1,loadingError:!0,pluginNav:Pd()}));const ie=j instanceof Error?j:new Error((0,Sd.i)(j));(0,Lm.H)(ie),console.error(ie)}}function ul(B){return B?B.type!==We.zV.app?"Plugin must be an app":B.enabled?null:"Application Not Enabled":"Unknown Plugin"}const xd=wm;var Na=e(86573);function gc(){const B=(0,Na.y0)(),{navIndex:V}=B,j=Se=>Se.startsWith("standalone-plugin-page-/"),ie=Se=>"pluginId"in Se&&"id"in Se;return[...Object.values(V).filter(ie).map(Se=>{const we=(0,Am.vw)(Se),He=`/a/${Se.pluginId}`,Qe=j(Se.id)&&Se.url||He,rt=j(Se.id)&&!Se.url?.startsWith("/a/");return{path:Qe,exact:!1,sensitive:rt,component:()=>s.createElement(xd,{pluginId:Se.pluginId,pluginNavSection:we})}}),{path:"/a/:pluginId",exact:!1,component:({match:Se})=>s.createElement(xd,{pluginId:Se.params.pluginId,pluginNavSection:V.home})}]}const hc=[{path:"/profile",component:(0,Mn.Q)(()=>e.e(7323).then(e.bind(e,98484)))},{path:"/profile/password",component:(0,Mn.Q)(()=>e.e(9289).then(e.bind(e,79289)))},{path:"/profile/select-org",component:(0,Mn.Q)(()=>e.e(1456).then(e.bind(e,7238)))},{path:"/profile/notifications",component:(0,Mn.Q)(()=>e.e(743).then(e.bind(e,13729)))}];function Nm(B=z.config){return B.profileEnabled?hc:(0,p.uniq)(hc.map(j=>j.path)).map(j=>({path:j,component:(0,Mn.Q)(()=>e.e(3395).then(e.bind(e,57476)))}))}const Wm=()=>!z.config.publicDashboardsEnabled||!z.config.featureToggles.publicDashboards?[]:[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:vn.DashboardRoutes.Public,component:(0,Mn.Q)(()=>e.e(1344).then(e.bind(e,72067)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:vn.DashboardRoutes.Public,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(9122),e.e(3832),e.e(8651),e.e(2613)]).then(e.bind(e,54226)))}],Fm=[];function Td(){return[...gc(),{path:"/",pageClass:"page-dashboard",routeName:vn.DashboardRoutes.Home,component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(9122),e.e(3832),e.e(8651),e.e(3232),e.e(624),e.e(8443)]).then(e.bind(e,23890)))},{path:"/d/:uid/panel-edit/:panelId",component:(0,Mn.Q)(()=>e.e(207).then(e.bind(e,22756)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:vn.DashboardRoutes.Normal,component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(9122),e.e(3832),e.e(8651),e.e(3232),e.e(624),e.e(8443)]).then(e.bind(e,23890)))},{path:"/dashboard/new",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:vn.DashboardRoutes.New,component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(9122),e.e(3832),e.e(8651),e.e(3232),e.e(624),e.e(8443),e.e(5296)]).then(e.bind(e,23890)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.DashboardsCreate]),component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(9122),e.e(3832),e.e(8651),e.e(3232),e.e(624),e.e(8443),e.e(5296)]).then(e.bind(e,57133)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:vn.DashboardRoutes.Normal,component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(9122),e.e(3832),e.e(8651),e.e(3232),e.e(624),e.e(8443),e.e(5296)]).then(e.bind(e,23890)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:vn.DashboardRoutes.Normal,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(3832),e.e(1034)]).then(e.bind(e,63385)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:vn.DashboardRoutes.Normal,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(3832),e.e(1034)]).then(e.bind(e,63385)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:vn.DashboardRoutes.Normal,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(3832),e.e(1034)]).then(e.bind(e,63385)))},{path:"/dashboard/import",component:(0,Mn.Q)(()=>e.e(8808).then(e.bind(e,50532)))},{path:ll.n.List,component:()=>s.createElement(is.l_,{to:mi.Z.DataSources})},{path:ll.n.Edit,component:B=>s.createElement(is.l_,{to:mi.Z.DataSourcesEdit.replace(":uid",B.match.params.uid)})},{path:ll.n.Dashboards,component:B=>s.createElement(is.l_,{to:mi.Z.DataSourcesDashboards.replace(":uid",B.match.params.uid)})},{path:ll.n.New,component:()=>s.createElement(is.l_,{to:mi.Z.DataSourcesNew})},{path:"/datasources/correlations",component:(0,Mn.Q)(()=>z.default.featureToggles.correlations?e.e(413).then(e.bind(e,6756)):e.e(2093).then(e.bind(e,40057)))},{path:"/dashboards",component:(0,Mn.Q)(()=>Promise.all([e.e(5517),e.e(4074)]).then(e.bind(e,91573)))},{path:"/dashboards/f/:uid/:slug",component:(0,Mn.Q)(()=>Promise.all([e.e(5517),e.e(4074)]).then(e.bind(e,91573)))},{path:"/dashboards/f/:uid",component:(0,Mn.Q)(()=>Promise.all([e.e(5517),e.e(4074)]).then(e.bind(e,91573)))},{path:"/explore",pageClass:"page-explore",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.DataSourcesExplore]),component:(0,Mn.Q)(()=>z.default.exploreEnabled?Promise.all([e.e(6826),e.e(937),e.e(3232),e.e(9782)]).then(e.bind(e,3564)):e.e(172).then(e.bind(e,31772)))},{path:"/apps",component:()=>s.createElement(so,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>s.createElement(so,{navId:"alerts-and-incidents"})},{path:"/testing-and-synthetics",component:()=>s.createElement(so,{navId:"testing-and-synthetics"})},{path:"/monitoring",component:()=>s.createElement(so,{navId:"monitoring"})},{path:"/infrastructure",component:()=>s.createElement(so,{navId:"infrastructure"})},{path:"/frontend",component:()=>s.createElement(so,{navId:"frontend"})},{path:"/admin/general",component:()=>s.createElement(so,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>s.createElement(so,{navId:"cfg/plugins"})},{path:"/admin/access",component:()=>s.createElement(so,{navId:"cfg/access"})},{path:"/org",component:(0,Mn.Q)(()=>e.e(529).then(e.bind(e,63162)))},{path:"/org/new",component:(0,Mn.Q)(()=>e.e(950).then(e.bind(e,74753)))},{path:"/org/users",component:(0,Mn.Q)(()=>e.e(8039).then(e.bind(e,73716)))},{path:"/org/users/invite",component:(0,Mn.Q)(()=>e.e(7707).then(e.bind(e,644)))},{path:"/org/apikeys",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.ActionAPIKeysRead]),component:(0,Mn.Q)(()=>e.e(3082).then(e.bind(e,30335)))},{path:"/org/serviceaccounts",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.ServiceAccountsRead,vn.AccessControlAction.ServiceAccountsCreate]),component:(0,Mn.Q)(()=>e.e(1337).then(e.bind(e,10500)))},{path:"/org/serviceaccounts/create",component:(0,Mn.Q)(()=>e.e(9738).then(e.bind(e,79816)))},{path:"/org/serviceaccounts/:id",component:(0,Mn.Q)(()=>e.e(687).then(e.bind(e,91369)))},{path:"/org/teams",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.ActionTeamsRead,vn.AccessControlAction.ActionTeamsCreate]),component:(0,Mn.Q)(()=>e.e(9671).then(e.bind(e,37489)))},{path:"/org/teams/new",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.ActionTeamsCreate]),component:(0,Mn.Q)(()=>e.e(8715).then(e.bind(e,67541)))},{path:"/org/teams/edit/:id/:page?",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.ActionTeamsRead,vn.AccessControlAction.ActionTeamsCreate]),component:(0,Mn.Q)(()=>e.e(8612).then(e.bind(e,24345)))},{path:"/admin",component:()=>s.createElement(so,{navId:"cfg",header:s.createElement(Om,null)})},{path:"/admin/authentication",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.SettingsWrite]),component:z.default.licenseInfo.enabledFeatures?.saml||z.default.ldapEnabled||z.default.featureToggles.ssoSettingsApi?(0,Mn.Q)(()=>e.e(8741).then(e.bind(e,38738))):()=>s.createElement(is.l_,{to:"/admin"})},{path:"/admin/authentication/advanced/:provider",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.SettingsWrite]),component:z.default.featureToggles.ssoSettingsApi?(0,Mn.Q)(()=>e.e(8741).then(e.bind(e,44403))):()=>s.createElement(is.l_,{to:"/admin"})},{path:"/admin/settings",component:(0,Mn.Q)(()=>e.e(9603).then(e.bind(e,51205)))},{path:"/admin/upgrading",component:(0,Mn.Q)(()=>e.e(8197).then(e.bind(e,8197)))},{path:"/admin/users",component:(0,Mn.Q)(()=>e.e(7497).then(e.bind(e,14124)))},{path:"/admin/users/create",component:(0,Mn.Q)(()=>e.e(2508).then(e.bind(e,22004)))},{path:"/admin/users/edit/:id",component:pm},{path:"/admin/orgs",component:(0,Mn.Q)(()=>e.e(3798).then(e.bind(e,47513)))},{path:"/admin/orgs/edit/:id",component:(0,Mn.Q)(()=>e.e(2721).then(e.bind(e,42233)))},{path:"/admin/featuretoggles",component:z.default.featureToggles.featureToggleAdminPage?(0,Mn.Q)(()=>e.e(7129).then(e.bind(e,81819))):()=>s.createElement(is.l_,{to:"/admin"})},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:(0,Mn.Q)(()=>e.e(7675).then(e.bind(e,71230)))},{path:"/admin/stats",component:(0,Mn.Q)(()=>e.e(7641).then(e.bind(e,68150)))},{path:"/admin/authentication/ldap",component:xm},{path:"/login",component:Uo,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:(0,Mn.Q)(()=>e.e(7429).then(e.bind(e,34683))),chromeless:!0},{path:"/verify",component:z.default.verifyEmailEnabled?(0,Mn.Q)(()=>e.e(6941).then(e.bind(e,63090))):()=>s.createElement(is.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:z.default.disableUserSignUp?()=>s.createElement(is.l_,{to:"/login"}):(0,Mn.Q)(()=>e.e(7252).then(e.bind(e,7252))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:(0,Mn.Q)(()=>e.e(133).then(e.bind(e,24404)))},{path:"/user/password/reset",component:(0,Mn.Q)(()=>e.e(6848).then(e.bind(e,87605))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:(0,Mn.Q)(()=>e.e(5295).then(e.bind(e,18861)))},{path:"/playlists",component:(0,Mn.Q)(()=>e.e(9218).then(e.bind(e,51495)))},{path:"/playlists/play/:uid",component:(0,Mn.Q)(()=>e.e(3090).then(e.bind(e,85597)))},{path:"/playlists/new",component:(0,Mn.Q)(()=>e.e(9975).then(e.bind(e,32543)))},{path:"/playlists/edit/:uid",component:(0,Mn.Q)(()=>e.e(2341).then(e.bind(e,79092)))},{path:"/sandbox/benchmarks",component:(0,Mn.Q)(()=>e.e(4908).then(e.bind(e,86785)))},{path:"/sandbox/test",component:(0,Mn.Q)(()=>e.e(8595).then(e.bind(e,52825)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(3778)]).then(e.bind(e,10441)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Ba.contextSrv.evaluatePermission([vn.AccessControlAction.AlertingRuleRead]),component:(0,Mn.Q)(()=>e.e(1324).then(e.bind(e,57591)))},{path:"/library-panels",component:(0,Mn.Q)(()=>Promise.all([e.e(7566),e.e(7878)]).then(e.bind(e,90683)))},{path:"/notifications",component:(0,Mn.Q)(()=>e.e(743).then(e.bind(e,13729)))},{path:"/data-trails",chromeless:!1,exact:!1,component:(0,Mn.Q)(()=>e.e(1108).then(e.bind(e,55886)))},...Cd(),...Od(),...Tm(),...Nm(),...Fm,...Wm(),...Im(),{path:"/*",component:zr}].filter(er.fQ)}function Od(B=z.default){return B.supportBundlesEnabled?[{path:"/support-bundles",component:(0,Mn.Q)(()=>e.e(9939).then(e.bind(e,33515)))},{path:"/support-bundles/create",component:(0,Mn.Q)(()=>e.e(539).then(e.bind(e,61479)))}]:[]}const ml=s.forwardRef((B,V)=>s.createElement("div",{id:"ngRoot",ref:V,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));ml.displayName="AngularRoot";var No=e(74687),pc=e(80091),Wo=e(28109),jo=e(89660),fl=e(8239),Id=e(95639);async function Km(){if(Z.config.angularSupportEnabled){const{AngularApp:B}=await Promise.all([e.e(5888),e.e(6490),e.e(7628),e.e(4704)]).then(e.bind(e,97628)),V=new B;V.init(),V.bootstrap()}else(0,pc.W)({load:(B,V,j)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,Wo.t)({get:B=>{switch(B){case"backendSrv":return(0,No.d)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,R.i)();case"contextSrv":return(0,No.d)("getLegacyAngularInjector","contextSrv"),Za.Vt;case"dashboardSrv":return(0,No.d)("getLegacyAngularInjector","getDashboardSrv"),(0,d.h4)();case"datasourceSrv":return(0,No.d)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,U.F)();case"linkSrv":return(0,No.d)("getLegacyAngularInjector","linkSrv"),(0,Id.Bq)();case"validationSrv":return(0,No.d)("getLegacyAngularInjector","validationSrv"),fl.t;case"timeSrv":return(0,No.d)("getLegacyAngularInjector","timeSrv"),(0,jo.$t)();case"templateSrv":return(0,No.d)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,ke.J)()}throw"Angular is disabled.  Unable to expose: "+B}})}var Vm=e(52083),Rd=e.n(Vm);function hi({breakpoint:B,onChange:V}){(0,s.useEffect)(()=>{const j=window.matchMedia(`(min-width: ${B}px)`),ie=ye=>V(ye);return j.addEventListener("change",ie),()=>j.removeEventListener("change",ie)},[B,V])}var So=e(39357),Jr=e(16749),vc=e(57353),Bi=e(68420),_m=e(13069),wi=e(81276),gl=e(37789);const hl=0,$m=B=>{const V=s.useRef(null),j=s.useRef(null),ie=s.useRef(B.items);ie.current=B.items;const ye=(0,gl.useVirtual)({size:ie.current.length,parentRef:j}),{query:Se,search:we,currentRootActionId:He,activeIndex:Qe,options:rt}=(0,qs.useKBar)(Bt=>({search:Bt.searchQuery,currentRootActionId:Bt.currentRootActionId,activeIndex:Bt.activeIndex}));s.useEffect(()=>{const Bt=It=>{It.key==="ArrowUp"||It.ctrlKey&&It.key==="p"?(It.preventDefault(),Se.setActiveIndex(Gt=>{let mn=Gt>hl?Gt-1:Gt;if(typeof ie.current[mn]=="string"){if(mn===0)return Gt;mn-=1}return mn})):It.key==="ArrowDown"||It.ctrlKey&&It.key==="n"?(It.preventDefault(),Se.setActiveIndex(Gt=>{let mn=Gt<ie.current.length-1?Gt+1:Gt;if(typeof ie.current[mn]=="string"){if(mn===ie.current.length-1)return Gt;mn+=1}return mn})):It.key==="Enter"&&(It.preventDefault(),V.current?.click())};return window.addEventListener("keydown",Bt),()=>window.removeEventListener("keydown",Bt)},[Se]);const{scrollToIndex:ht}=ye;s.useEffect(()=>{ht(Qe,{align:Qe<=1?"end":"auto"})},[Qe,ht]),s.useEffect(()=>{Se.setActiveIndex(typeof B.items[hl]=="string"?hl+1:hl)},[we,He,B.items,Se]);const bt=s.useCallback((Bt,It)=>{if(typeof It=="string")return;const Gt=It.url;It.command?(It.command.perform(It),Se.toggle()):Gt?Bt.ctrlKey||Bt.metaKey||Bt.shiftKey||Se.toggle():(Se.setSearch(""),Se.setCurrentRootAction(It.id)),rt.callbacks?.onSelectAction?.(It)},[Se,rt]),Wt=(0,wi.usePointerMovedSinceMount)();return s.createElement("div",{ref:j,style:{maxHeight:B.maxHeight||400,position:"relative",overflow:"auto"}},s.createElement("div",{role:"listbox",id:qs.KBAR_LISTBOX,style:{height:`${ye.totalSize}px`,width:"100%"}},ye.virtualItems.map(Bt=>{const It=ie.current[Bt.index],{target:Gt,url:mn}=It,pa=typeof It!="string"&&{onPointerMove:()=>Wt&&Qe!==Bt.index&&Se.setActiveIndex(Bt.index),onPointerDown:()=>Se.setActiveIndex(Bt.index),onClick:cr=>bt(cr,It)},Sa=Bt.index===Qe,da={id:(0,qs.getListboxItemId)(Bt.index),role:"option","aria-selected":Sa,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Bt.start}px)`},...pa},$a=s.cloneElement(B.onRender({item:It,active:Sa}),{ref:Bt.measureRef});return mn?s.createElement("a",{key:Bt.index,href:mn,target:Gt,ref:Sa?V:null,...da},$a):s.createElement("div",{key:Bt.index,ref:Sa?V:null,...da},$a)})))},Ad=s.forwardRef(({action:B,active:V,currentRootActionId:j},ie)=>{const ye=s.useMemo(()=>{if(!j)return B.ancestors;const Qe=B.ancestors.findIndex(rt=>rt.id===j);return B.ancestors.slice(Qe+1)},[B.ancestors,j]),Se=(0,st.wW)(Ec);let we=B.name;const He=Qe=>!!(Qe.command?.perform||Qe.url);return B.children.length&&!He(B)&&!we.endsWith("...")&&(we+="..."),s.createElement("div",{ref:ie,className:(0,Ie.cx)(Se.row,V&&Se.activeRow)},s.createElement("div",{className:Se.actionContainer},B.icon,s.createElement("div",{className:Se.textContainer},ye.map(Qe=>s.createElement(s.Fragment,{key:Qe.id},!He(Qe)&&s.createElement(s.Fragment,null,s.createElement("span",{className:Se.breadcrumbAncestor},Qe.name),s.createElement("span",{className:Se.breadcrumbSeparator},"\u203A")))),s.createElement("span",null,we)),B.subtitle&&s.createElement("span",{className:Se.subtitleText},B.subtitle)))});Ad.displayName="ResultItem";const Ec=B=>({row:(0,Ie.css)({padding:B.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:B.shape.radius.default,margin:B.spacing(0,1)}),activeRow:(0,Ie.css)({color:B.colors.text.maxContrast,background:B.colors.emphasize(B.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),actionContainer:(0,Ie.css)({display:"flex",gap:B.spacing(1),alignItems:"baseline",fontSize:B.typography.fontSize,width:"100%"}),textContainer:(0,Ie.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,Ie.css)({color:B.colors.text.secondary}),breadcrumbSeparator:(0,Ie.css)({color:B.colors.text.secondary,marginLeft:B.spacing(1),marginRight:B.spacing(1)}),subtitleText:(0,Ie.css)({...B.typography.bodySmall,color:B.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var zm=e(8806),km=e.n(zm),Hm=e(69514),Ld=e(4502);const Gm=6,Bd=5,jm=4,yc=3,wd=2,Qm=1,Ym=100,Ud=5,Zm=km()(Xm,200);async function Jm(){if(!Ba.contextSrv.user.isSignedIn)return[];const B=(await Hm.Z.getDashboardOpened()).slice(0,Ud),j=(await(0,Ld.getGrafanaSearcher)().search({kind:["dashboard"],limit:Ud,uid:B})).view.toArray();return j.sort((ye,Se)=>{const we=B.indexOf(ye.uid),He=B.indexOf(Se.uid);return we-He}),j.map(ye=>{const{url:Se,name:we}=ye;return{id:`recent-dashboards${Se}`,name:`${we}`,section:(0,Qa.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Gm,url:Se}})}async function Xm(B){if(B.length===0||!Ba.contextSrv.user.isSignedIn&&!Z.config.bootData.settings.anonymousEnabled)return[];const V=await(0,Ld.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:B,limit:Ym});return V.view.map(ie=>{const{url:ye,name:Se,kind:we,location:He}=ie;return{id:`go/${we}${ye}`,name:`${Se}`,section:we==="dashboard"?(0,Qa.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,Qa.t)("command-palette.section.folder-search-results","Folders"),priority:Qm,url:ye,subtitle:V.view.dataFrame.meta?.custom?.locationInfo[He]?.name}})}function Dc(B,V){const[j,ie]=(0,s.useState)([]),[ye,Se]=(0,s.useState)(!1),we=(0,s.useRef)(0);return(0,s.useEffect)(()=>{const He=Date.now();V&&B.length>0?(Se(!0),Zm(B).then(Qe=>{He>we.current&&(ie(Qe),Se(!1),we.current=He)})):(ie([]),Se(!1),we.current=He)},[V,B]),{searchResults:j,isFetchingSearchResults:ye}}var Br=e(74642),nr=e(83599),qm=e(81382),Nd=e(96190);const Wd=B=>{let V=B.children||[];if(B.id==="help"){const j=()=>{nr.Z.publish(new Br.Dn({component:Nd.B}))};B.children=[...V,...(0,qm.dP)(),...Pc(),{id:"keyboard-shortcuts",text:(0,Qa.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:j}]}return B},Cc=(B,V)=>{const j=B.onClick;return B.onClick=()=>{(0,ir.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,state:V?"expanded":"collapsed"}),j?.()},B.children&&(B.children=B.children.map(ie=>Cc(ie,V))),B},ef=(B,V)=>!!(B===V||pl(B,V)),pl=(B,V)=>!!B.children?.some(j=>j===V?!0:pl(j,V)),vl=B=>B?.split("?")[0]??"",Fd=(B,V)=>{const j=vl(V?.url),ie=vl(B.url);return ie&&ie.length>j?.length},bc=(B,V,j)=>{const ie="/dashboards";for(const ye of B){const Se=vl(ye.url),we=O.u.stripBaseFromUrl(Se);if(we&&ye.id!=="starred")if(we===V){j=ye;break}else if(we!=="/"&&V.startsWith(we))Fd(ye,j)&&(j=ye);else if(we==="/alerting/list"&&V.startsWith("/alerting/notification/")){j=ye;break}else we===ie&&V.startsWith("/d/")&&Fd(ye,j)&&(j=ye);if(ye.children&&(j=bc(ye.children,V,j)),vl(j?.url)===V)return j}return j};function Pc(){const{buildInfo:B,licenseInfo:V}=Z.config,j=V.stateInfo?` (${V.stateInfo})`:"",ie=[];return ie.push({target:"_blank",id:"version",text:`${B.edition}${j}`,url:V.licenseUrl,icon:"external-link-alt"}),B.hasUpdate&&ie.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),ie}var El=e(85649),Qo=e(90384);function tf(){const B={},{extensions:V}=(0,N.dj)({extensionPointId:Qo.y.CommandPalette,context:B,limitPerPlugin:3});return V.map(j=>({section:j.category??"Extensions",priority:wd,id:j.id,name:j.title,target:j.path,perform:()=>j.onClick&&j.onClick()}))}function Kd(B){return"navModel."+B.id}function Vd(B,V=[]){const j=[];for(let ie of B){ie.id==="help"&&(ie=Wd({...ie}),delete ie.url);const{url:ye,target:Se,text:we,isCreateAction:He,children:Qe,onClick:rt}=ie,ht=!!Qe?.length;if(!(ye||rt||ht))continue;const bt=He?(0,Qa.t)("command-palette.section.actions","Actions"):(0,Qa.t)("command-palette.section.pages","Pages"),Wt=He?Bd:jm,Bt=V.map(Gt=>Gt.text).join(" > "),It={id:Kd(ie),name:we,section:bt,url:ye,target:Se,parent:V.length>0&&!He?Kd(V[V.length-1]):void 0,perform:rt,priority:Wt,subtitle:He?void 0:Bt};if(j.push(It),Qe?.length){const Gt=Vd(Qe,[...V,ie]);j.push(...Gt)}}return j}const nf=B=>{const V=[{id:"preferences/theme",name:(0,Qa.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,Qa.t)("command-palette.section.preferences","Preferences"),priority:yc},{id:"preferences/dark-theme",name:(0,Qa.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,El.L)("dark"),parent:"preferences/theme",priority:yc},{id:"preferences/light-theme",name:(0,Qa.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,El.L)("light"),parent:"preferences/theme",priority:yc}],j=tf(),ie=Vd(B);return[...V,...j,...ie]};function Mo(B){const[V,j]=(0,s.useState)([]),[ie,ye]=(0,s.useState)([]),Se=(0,vn.useSelector)(we=>we.navBarTree);return(0,s.useEffect)(()=>{const we=nf(Se);j(we)},[Se]),(0,s.useEffect)(()=>{B||Jm().then(we=>ye(we)).catch(we=>{console.error("Error loading recent dashboard actions",we)})},[B]),B?V:[...ie,...V]}var Xr=e(20670);const xo={name:"none",priority:qs.Priority.NORMAL};function _d(B,V){return V.priority-B.priority}function dp(){const{search:B,actions:V,rootActionId:j}=(0,qs.useKBar)(ht=>({search:ht.searchQuery,actions:ht.actions,rootActionId:ht.currentRootActionId})),ie=s.useMemo(()=>Object.keys(V).reduce((ht,bt)=>{const Wt=V[bt];if(!Wt.parent&&!j&&ht.push(Wt),Wt.id===j)for(let Bt=0;Bt<Wt.children.length;Bt++)ht.push(Wt.children[Bt]);return ht},[]).sort(_d),[V,j]),ye=s.useCallback(ht=>{let bt=[];for(let Wt=0;Wt<ht.length;Wt++)bt.push(ht[Wt]);return function Wt(Bt,It=bt){for(let Gt=0;Gt<Bt.length;Gt++)if(Bt[Gt].children.length>0){let mn=Bt[Gt].children;for(let pa=0;pa<mn.length;pa++)It.push(mn[pa]);Wt(Bt[Gt].children,It)}return It}(ht)},[]),Se=!B,we=s.useMemo(()=>Se?ie:ye(ie),[ye,ie,Se]),He=$d(we,B),Qe=s.useMemo(()=>{let ht={},bt=[],Wt=[];for(let It=0;It<He.length;It++){const Gt=He[It],mn=Gt.action,pa=Gt.score||qs.Priority.NORMAL,Sa={name:typeof mn.section=="string"?mn.section:mn.section?.name||xo.name,priority:typeof mn.section=="string"?pa:mn.section?.priority||0+pa};ht[Sa.name]||(ht[Sa.name]=[],bt.push(Sa)),ht[Sa.name].push({priority:mn.priority+pa,action:mn})}Wt=bt.sort(_d).map(It=>({name:It.name,actions:ht[It.name].sort(_d).map(Gt=>Gt.action)}));let Bt=[];for(let It=0;It<Wt.length;It++){let Gt=Wt[It];Gt.name!==xo.name&&Bt.push(Gt.name);for(let mn=0;mn<Gt.actions.length;mn++)Bt.push(Gt.actions[mn])}return Bt},[He]),rt=s.useMemo(()=>j,[Qe]);return s.useMemo(()=>({results:Qe,rootActionId:rt}),[rt,Qe])}function $d(B,V){const j=af(),ie=s.useMemo(()=>({filtered:B,search:V}),[B,V]),{filtered:ye,search:Se}=(0,wi.useThrottledValue)(ie);return s.useMemo(()=>{if(Se.trim()==="")return ye.map(Qe=>({score:0,action:Qe}));const we=ye.map(({name:Qe,keywords:rt})=>`${Qe} ${rt??""}`.toLowerCase()),He=[];if(Se.length>zd){const Qe=Se.toLowerCase();for(let rt=0;rt<we.length;rt++){const bt=we[rt].indexOf(Qe);if(bt>-1){const Wt=bt*-1,Bt=ye[rt];He.push({score:Wt,action:Bt})}}}else{const Qe=j.split(Se).length,rt=1/0,ht=Qe<5?4:0,[,bt,Wt]=j.search(we,Se,ht,rt);if(bt&&Wt)for(let Bt=0;Bt<Wt.length;Bt++){const It=Wt[Bt],Gt=Wt.length-Bt,mn=ye[bt.idx[It]];He.push({score:Gt,action:mn})}}return He},[ye,Se,j])}const zd=25;function af(){const B=s.useRef();return B.current||(B.current=new Xr.Z({intraMode:0,intraIns:0})),B.current}function kd(){const B=(0,st.wW)(Hd),{query:V,showing:j,searchQuery:ie}=(0,qs.useKBar)(ht=>({showing:ht.visualState===qs.VisualState.showing,searchQuery:ht.searchQuery})),ye=Mo(ie);(0,qs.useRegisterActions)(ye,[ye]);const{searchResults:Se,isFetchingSearchResults:we}=Dc(ie,j),He=(0,s.useRef)(null),{overlayProps:Qe}=(0,Bi.Ir)({isOpen:j,onClose:()=>V.setVisualState(qs.VisualState.animatingOut)},He),{dialogProps:rt}=(0,Jr.R)({},He);return(0,s.useEffect)(()=>{j&&(0,ir.ff)("command_palette_opened")},[j]),ye.length>0?s.createElement(qs.KBarPortal,null,s.createElement(qs.KBarPositioner,{className:B.positioner},s.createElement(qs.KBarAnimator,{className:B.animator},s.createElement(vc.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},s.createElement("div",{...Qe,...rt},s.createElement("div",{className:B.searchContainer},s.createElement(ka.J,{name:"search",size:"md"}),s.createElement(qs.KBarSearch,{defaultPlaceholder:(0,Qa.t)("command-palette.search-box.placeholder","Search or jump to..."),className:B.search}),s.createElement("div",{className:B.loadingBarContainer},we&&s.createElement(_m.F,{width:500,delay:0}))),s.createElement("div",{className:B.resultsContainer},s.createElement(sf,{searchResults:Se}))))))):null}const sf=({searchResults:B})=>{const{results:V,rootActionId:j}=dp(),ie=(0,st.wW)(Hd),ye=(0,Qa.t)("command-palette.section.dashboard-search-results","Dashboards"),Se=(0,Qa.t)("command-palette.section.folder-search-results","Folders"),we=(0,s.useMemo)(()=>B.filter(rt=>rt.id.startsWith("go/dashboard")).map(rt=>new qs.ActionImpl(rt,{store:{}})),[B]),He=(0,s.useMemo)(()=>B.filter(rt=>rt.id.startsWith("go/folder")).map(rt=>new qs.ActionImpl(rt,{store:{}})),[B]),Qe=(0,s.useMemo)(()=>{const rt=[...V];return He.length>0&&(rt.push(Se),rt.push(...He)),we.length>0&&(rt.push(ye),rt.push(...we)),rt},[V,ye,we,Se,He]);return s.createElement($m,{items:Qe,maxHeight:650,onRender:({item:rt,active:ht})=>{const bt=Qe[0]===rt;return typeof rt=="string"?s.createElement("div",{className:(0,Ie.cx)(ie.sectionHeader,bt&&ie.sectionHeaderFirst)},rt):s.createElement(Ad,{action:rt,active:ht,currentRootActionId:j})}})},Hd=B=>({positioner:(0,Ie.css)({zIndex:B.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:B.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,Ie.css)({maxWidth:B.breakpoints.values.md,width:"100%",background:B.colors.background.primary,color:B.colors.text.primary,borderRadius:B.shape.radius.default,border:`1px solid ${B.colors.border.weak}`,overflow:"hidden",boxShadow:B.shadows.z3}),loadingBarContainer:(0,Ie.css)({position:"absolute",left:0,right:0,bottom:0}),searchContainer:(0,Ie.css)({alignItems:"center",background:B.components.input.background,borderBottom:`1px solid ${B.colors.border.weak}`,display:"flex",gap:B.spacing(1),padding:B.spacing(1,2),position:"relative"}),search:(0,Ie.css)({fontSize:B.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:B.components.input.text}),spinner:(0,Ie.css)({height:"22px"}),resultsContainer:(0,Ie.css)({paddingBottom:B.spacing(1)}),sectionHeader:(0,Ie.css)({padding:B.spacing(1.5,2,2,2),fontSize:B.typography.bodySmall.fontSize,fontWeight:B.typography.fontWeightMedium,color:B.colors.text.secondary,borderTop:`1px solid ${B.colors.border.weak}`,marginTop:B.spacing(1)}),sectionHeaderFirst:(0,Ie.css)({paddingBottom:B.spacing(1),borderTop:"none",marginTop:0})});var yl=e(54756),Sc=e(37758),Mc=e(50370),rf=e(7820),Dl=e(36717),Gd=e(15130);const jd=({children:B})=>{const V=(0,st.wW)(xc);return s.createElement(s.Fragment,null,B,s.createElement("span",{className:V.highlight}))},xc=B=>({highlight:(0,Ie.css)({backgroundColor:B.colors.success.main,borderRadius:B.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var Qd=e(34037);function Yd({children:B,isActive:V,onClick:j,target:ie,url:ye}){const Se=(0,st.l4)(),we=of(Se,V),He=!ie&&ye.startsWith("/")?Qd.r:"a",Qe=s.createElement("div",{className:we.linkContent},B,ie==="_blank"&&s.createElement(ka.J,{"data-testid":"external-link-icon",name:"external-link-alt"}));return s.createElement(He,{"data-testid":Ds.wl.components.NavMenu.item,className:(0,Ie.cx)(we.container,{[we.containerActive]:V}),href:ye,target:ie,onClick:j},Qe)}Yd.displayName="MegaMenuItemText";const of=(B,V)=>({container:(0,Ie.css)({alignItems:"center",color:V?B.colors.text.primary:B.colors.text.secondary,height:"100%",position:"relative",width:"100%","&:hover, &:focus-visible":{color:B.colors.text.primary,textDecoration:"underline"},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),containerActive:(0,Ie.css)({backgroundColor:B.colors.background.secondary,borderTopRightRadius:B.shape.radius.default,borderBottomRightRadius:B.shape.radius.default,position:"relative","&::before":{backgroundImage:B.colors.gradients.brandVertical,borderRadius:B.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:B.spacing(.5)}}),linkContent:(0,Ie.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"})}),up=B=>{let V=B.children||[];if(B.id==="help"){const j=()=>{appEvents.publish(new ShowModalReactEvent({component:HelpModal}))};B.children=[...V,...getFooterLinks(),...Xd(),{id:"keyboard-shortcuts",text:t("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:j}]}return B},Zd=(B,V)=>{const j={...B},ie=j.onClick;return j.onClick=()=>{(0,ir.ff)("grafana_navigation_item_clicked",{path:j.url??j.id,menuIsDocked:V}),ie?.()},j.children&&(j.children=j.children.map(ye=>Zd(ye,V))),j},mp=(B,V)=>!!(B===V||Tc(B,V)),Tc=(B,V)=>!!B.children?.some(j=>j===V?!0:Tc(j,V)),Cl=B=>B?.split("?")[0]??"",Jd=(B,V)=>{const j=Cl(V?.url),ie=Cl(B.url);return ie&&ie.length>j?.length},Oc=(B,V,j)=>{const ie="/dashboards";for(const ye of B){const Se=Cl(ye.url),we=O.u.stripBaseFromUrl(Se);if(we&&ye.id!=="starred")if(we===V){j=ye;break}else if(we!=="/"&&V.startsWith(we))Jd(ye,j)&&(j=ye);else if(we==="/alerting/list"&&V.startsWith("/alerting/notification/")){j=ye;break}else we===ie&&V.startsWith("/d/")&&Jd(ye,j)&&(j=ye);if(ye.children&&(j=Oc(ye.children,V,j)),Cl(j?.url)===V)return j}return j};function Xd(){const{buildInfo:B,licenseInfo:V}=config,j=V.stateInfo?` (${V.stateInfo})`:"",ie=[];return ie.push({target:"_blank",id:"version",text:`${B.edition}${j}`,url:V.licenseUrl,icon:"external-link-alt"}),B.hasUpdate&&ie.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),ie}const Ui=2;function Ic({link:B,activeItem:V,level:j=0,onClick:ie}){const{chrome:ye}=(0,Po.p)(),we=ye.useState().megaMenuDocked,He=(0,is.TH)(),Qe=B.highlightText?jd:s.Fragment,rt=Tc(B,V),ht=B===V||j===Ui&&rt,[bt,Wt]=(0,Mc.Z)(`grafana.navigation.expanded[${B.text}]`,!!rt),Bt=j<Ui&&!!(qd(B)||B.emptyMessage),It=(0,s.useRef)(null),Gt=(0,st.wW)(lf);return(0,s.useEffect)(()=>{rt&&Wt(!0)},[rt,He,we,Wt]),(0,s.useEffect)(()=>{we&&ht&&It.current&&bl(It.current)&&It.current.scrollIntoView({block:"center"})},[ht,we]),B.url?s.createElement("li",{ref:It,className:Gt.listItem},s.createElement("div",{className:(0,Ie.cx)(Gt.menuItem,{[Gt.menuItemWithIcon]:!!(j===0&&B.icon)})},j!==0&&s.createElement(Gd.A,{level:j===Ui?j-1:j,spacing:3}),j===Ui&&s.createElement("div",{className:Gt.itemConnector}),s.createElement("div",{className:Gt.collapseButtonWrapper},Bt&&s.createElement(Vs.h,{"aria-label":`${bt?"Collapse":"Expand"} section ${B.text}`,className:Gt.collapseButton,onClick:()=>Wt(!bt),name:bt?"angle-down":"angle-right",size:"md",variant:"secondary"})),s.createElement("div",{className:Gt.collapsibleSectionWrapper},s.createElement(Yd,{isActive:ht,onClick:()=>{B.onClick?.(),ie?.()},target:B.target,url:B.url},s.createElement("div",{className:(0,Ie.cx)(Gt.labelWrapper,{[Gt.hasActiveChild]:rt,[Gt.labelWrapperWithIcon]:!!(j===0&&B.icon)})},j===0&&B.icon&&s.createElement(Qe,null,s.createElement(ka.J,{className:Gt.icon,name:(0,rf.iJ)(B.icon)??"link",size:"lg"})),s.createElement(Dl.x,{truncate:!0},B.text))))),Bt&&bt&&s.createElement("ul",{className:Gt.children},qd(B)?B.children.filter(mn=>!mn.isCreateAction).map(mn=>s.createElement(Ic,{key:`${B.text}-${mn.text}`,link:mn,activeItem:V,onClick:ie,level:j+1})):s.createElement("div",{className:Gt.emptyMessage},B.emptyMessage))):null}const lf=B=>({icon:(0,Ie.css)({width:B.spacing(3)}),listItem:(0,Ie.css)({flex:1,maxWidth:"100%"}),menuItem:(0,Ie.css)({display:"flex",alignItems:"center",gap:B.spacing(1),height:B.spacing(4),paddingLeft:B.spacing(.5),position:"relative"}),menuItemWithIcon:(0,Ie.css)({paddingLeft:B.spacing(0)}),collapseButtonWrapper:(0,Ie.css)({display:"flex",justifyContent:"center",width:B.spacing(3),flexShrink:0}),itemConnector:(0,Ie.css)({position:"relative",height:"100%",width:B.spacing(1.5),"&::before":{borderLeft:`1px solid ${B.colors.border.medium}`,content:'""',height:"100%",right:0,position:"absolute",transform:"translateX(50%)"}}),collapseButton:(0,Ie.css)({margin:0}),collapsibleSectionWrapper:(0,Ie.css)({alignItems:"center",display:"flex",flex:1,height:"100%",minWidth:0}),labelWrapper:(0,Ie.css)({display:"flex",alignItems:"center",gap:B.spacing(2),minWidth:0,paddingLeft:B.spacing(1)}),labelWrapperWithIcon:(0,Ie.css)({paddingLeft:B.spacing(.5)}),hasActiveChild:(0,Ie.css)({color:B.colors.text.primary}),children:(0,Ie.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),emptyMessage:(0,Ie.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5,1,7)})});function qd(B){return!!(B.children&&B.children.length>0)}function bl(B){const V=B.getBoundingClientRect();return V.bottom<0||V.top>=window.innerHeight}const eu="300px",Pl=s.memo((0,s.forwardRef)(({onClose:B,...V},j)=>{const ie=(0,vn.useSelector)(bt=>bt.navBarTree),ye=(0,st.wW)(cf),Se=(0,is.TH)(),{chrome:we}=(0,Po.p)(),He=we.useState(),Qe=ie.filter(bt=>bt.id!=="profile"&&bt.id!=="help").map(bt=>Zd(bt,He.megaMenuDocked)),rt=Oc(Qe,Se.pathname),ht=()=>{we.setMegaMenuDocked(!He.megaMenuDocked),He.megaMenuDocked&&we.setMegaMenuOpen(!1),setTimeout(()=>{document.getElementById(He.megaMenuDocked?"mega-menu-toggle":"dock-menu-button")?.focus()})};return s.createElement("div",{"data-testid":Ds.wl.components.NavMenu.Menu,ref:j,...V},s.createElement("div",{className:ye.mobileHeader},s.createElement(ka.J,{name:"bars",size:"xl"}),s.createElement(Vs.h,{tooltip:(0,Qa.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:B,size:"xl",variant:"secondary"})),s.createElement("nav",{className:ye.content},s.createElement(Sc.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},s.createElement("ul",{className:ye.itemList},Qe.map((bt,Wt)=>s.createElement(Pt.K,{key:bt.text,direction:Wt===0?"row-reverse":"row",alignItems:"center"},Wt===0&&s.createElement(Vs.h,{id:"dock-menu-button",className:ye.dockMenuButton,tooltip:He.megaMenuDocked?(0,Qa.t)("navigation.megamenu.undock","Undock menu"):(0,Qa.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:ht,variant:"secondary"}),s.createElement(Ic,{link:bt,onClick:He.megaMenuDocked?void 0:B,activeItem:rt})))))))}));Pl.displayName="MegaMenu";const cf=B=>({content:(0,Ie.css)({display:"flex",flexDirection:"column",height:"100%",minHeight:0,position:"relative"}),mobileHeader:(0,Ie.css)({display:"flex",justifyContent:"space-between",padding:B.spacing(1,1,1,2),borderBottom:`1px solid ${B.colors.border.weak}`,[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,Ie.css)({boxSizing:"border-box",display:"flex",flexDirection:"column",listStyleType:"none",padding:B.spacing(1),[B.breakpoints.up("md")]:{width:eu}}),dockMenuButton:(0,Ie.css)({display:"none",[B.breakpoints.up("xl")]:{display:"inline-flex"}})});var Yo=e(71081),Fo=e(73351),Rc=e(18917);function df({href:B,isCurrent:V,text:j,index:ie,flexGrow:ye}){const Se=(0,st.wW)(tu),we=()=>{(0,ir.ff)("grafana_breadcrumb_clicked",{url:B})};return s.createElement("li",{className:Se.breadcrumbWrapper,style:{flexGrow:ye}},V?s.createElement("span",{"data-testid":Yo.z.Breadcrumbs.breadcrumb(j),className:Se.breadcrumb,"aria-current":"page",title:j},j):s.createElement(s.Fragment,null,s.createElement("a",{onClick:we,"data-testid":Yo.z.Breadcrumbs.breadcrumb(j),className:(0,Ie.cx)(Se.breadcrumb,Se.breadcrumbLink),title:j,href:B},j),s.createElement("div",{className:Se.separator,"aria-hidden":!0},s.createElement(ka.J,{name:"angle-right"}))))}const tu=B=>({breadcrumb:(0,Ie.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:B.spacing(0,.5),whiteSpace:"nowrap",color:B.colors.text.secondary}),breadcrumbLink:(0,Ie.css)({color:B.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,Ie.css)({alignItems:"center",color:B.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[B.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,Ie.css)({color:B.colors.text.secondary})});function Ac({breadcrumbs:B,className:V}){const j=(0,st.wW)(mf);return s.createElement("nav",{"aria-label":"Breadcrumbs",className:V},s.createElement("ol",{className:j.breadcrumbs},B.map((ie,ye)=>s.createElement(df,{...ie,isCurrent:ye===B.length-1,key:ye,index:ye,flexGrow:uf(ye,B.length)}))))}function uf(B,V){return V<5&&B>0&&B<V-2||V>6&&B>1&&B<V-3?4:10}const mf=B=>({breadcrumbs:(0,Ie.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var nu=e(92582),qr=e(74612),ff=e(97521);const Lc="mega-menu-toggle";function gf({actions:B,searchBarHidden:V,sectionNav:j,pageNav:ie,onToggleMegaMenu:ye,onToggleSearchBar:Se,onToggleKioskMode:we}){const{chrome:He}=(0,Po.p)(),Qe=He.useState(),rt=(0,vn.useSelector)(Wt=>Wt.navIndex)[Rc.Qz],ht=(0,st.wW)(hf),bt=(0,nu.t)(j,ie,rt);return s.createElement("div",{"data-testid":Yo.z.NavToolbar.container,className:ht.pageToolbar},s.createElement("div",{className:ht.menuButton},s.createElement(Vs.h,{id:Lc,name:"bars",tooltip:Qe.megaMenuOpen?(0,Qa.t)("navigation.toolbar.close-menu","Close menu"):(0,Qa.t)("navigation.toolbar.open-menu","Open menu"),tooltipPlacement:"bottom",size:"xl",onClick:ye,"data-testid":Yo.z.NavBar.Toggle.button})),s.createElement(Ac,{breadcrumbs:bt,className:ht.breadcrumbsWrapper}),s.createElement("div",{className:ht.actions},B,B&&s.createElement(ff.M,null),V&&s.createElement(Fo.h,{onClick:we,narrow:!0,title:(0,Qa.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),s.createElement(Fo.h,{onClick:Se,narrow:!0,title:(0,Qa.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},s.createElement(ka.J,{name:V?"angle-down":"angle-up",size:"xl"}))))}const hf=B=>({breadcrumbsWrapper:(0,Ie.css)({display:"flex",overflow:"hidden",[B.breakpoints.down("sm")]:{minWidth:"50%"}}),pageToolbar:(0,Ie.css)({height:qr.$,display:"flex",padding:B.spacing(0,1,0,2),alignItems:"center"}),menuButton:(0,Ie.css)({display:"flex",alignItems:"center",marginRight:B.spacing(1)}),actions:(0,Ie.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:B.spacing(1),flexGrow:1,gap:B.spacing(.5),minWidth:0,".body-drawer-open &":{display:"none"}})});function pf({}){const B=(0,st.l4)(),{chrome:V}=(0,Po.p)(),j=V.useState(),ie=j.searchBarHidden||j.kioskMode===vn.KioskMode.TV,ye=(0,s.useRef)(null),Se=(0,s.useRef)(null),we=B.transitions.duration.shortest,He=(0,st.wW)(vf,we),Qe=j.megaMenuOpen&&!j.megaMenuDocked,rt=()=>V.setMegaMenuOpen(!1),{overlayProps:ht,underlayProps:bt}=(0,Bi.Ir)({isDismissable:!0,isOpen:!0,onClose:rt,shouldCloseOnInteractOutside:It=>!document.getElementById(Lc)?.contains(It)},ye),{dialogProps:Wt}=(0,Jr.R)({},ye),Bt=(0,st.wW)(Ni,ie);return s.createElement("div",{className:Bt.wrapper},s.createElement(Bi.Xj,null,s.createElement(yl.Z,{nodeRef:ye,in:Qe,unmountOnExit:!0,classNames:He.overlay,timeout:{enter:we,exit:0}},s.createElement(vc.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},s.createElement(Pl,{className:Bt.menu,onClose:rt,ref:ye,...ht,...Wt}))),s.createElement(yl.Z,{nodeRef:Se,in:Qe,unmountOnExit:!0,classNames:He.backdrop,timeout:{enter:we,exit:0}},s.createElement("div",{ref:Se,className:Bt.backdrop,...bt}))))}const Ni=(B,V)=>{const j=(V?qr.$:qr.$*2)+1;return{backdrop:(0,Ie.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:V?0:qr.$,zIndex:B.zIndex.modalBackdrop,[B.breakpoints.up("md")]:{top:j}}),menu:(0,Ie.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:B.zIndex.modal,position:"fixed",top:V?0:qr.$,backgroundColor:B.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[B.breakpoints.up("md")]:{right:"unset",borderRight:`1px solid ${B.colors.border.weak}`,top:j}}),wrapper:(0,Ie.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu})}},vf=(B,V)=>{const j={transitionDuration:`${V}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},ie={...j,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ye={...j,transitionProperty:"opacity"},Se={width:"100%",[B.breakpoints.up("md")]:{boxShadow:B.shadows.z3,width:eu}},we={boxShadow:"none",width:0},He={opacity:1},Qe={opacity:0};return{backdrop:{enter:(0,Ie.css)(Qe),enterActive:(0,Ie.css)(ye,He),enterDone:(0,Ie.css)(He)},overlay:{enter:(0,Ie.css)(we),enterActive:(0,Ie.css)(ie,Se),enterDone:(0,Ie.css)(Se)}}};var Ef=e(38605),yf=e(11356);function Df(B,V){if(B===V)return!0;if(!(B instanceof Object)||!(V instanceof Object))return!1;const j=Object.keys(B),ie=j.length;for(let ye=0;ye<ie;ye++)if(!(j[ye]in V))return!1;for(let ye=0;ye<ie;ye++)if(B[j[ye]]!==V[j[ye]])return!1;return ie===Object.keys(V).length}const Bc="grafana.navigation.docked",wc="grafana.navigation.open";class Cf{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.megaMenuDocked=!!(Z.config.featureToggles.dockedMegaMenu&&So.Z.getBool(Bc,!!(Z.config.featureToggles.dockedMegaMenu&&window.innerWidth>=Z.config.theme2.breakpoints.values.xxl))),this.state=new yf.X({chromeless:!0,sectionNav:{node:{text:(0,Qa.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:So.Z.getBool(this.searchBarStorageKey,!1),megaMenuOpen:this.megaMenuDocked&&So.Z.getBool(wc,!0),megaMenuDocked:this.megaMenuDocked,kioskMode:null,layout:$r.Q.Canvas}),this.setMegaMenuOpen=V=>{const{megaMenuDocked:j}=this.state.getValue();Z.config.featureToggles.dockedMegaMenu?(j&&So.Z.set(wc,V),(0,ir.ff)("grafana_mega_menu_open",{state:V})):(0,ir.ff)("grafana_toggle_menu_clicked",{action:V?"open":"close"}),this.update({megaMenuOpen:V})},this.setMegaMenuDocked=(V,j=!0)=>{j&&So.Z.set(Bc,V),(0,ir.ff)("grafana_mega_menu_docked",{state:V}),this.update({megaMenuDocked:V})},this.onToggleSearchBar=()=>{const{searchBarHidden:V,kioskMode:j}=this.state.getValue(),ie=!V;So.Z.set(this.searchBarStorageKey,ie),j&&M.E1.partial({kiosk:null}),this.update({searchBarHidden:ie,kioskMode:null})},this.onToggleKioskMode=()=>{const V=this.getNextKioskMode();this.update({kioskMode:V}),M.E1.partial({kiosk:this.getKioskUrlValue(V)})}}setMatchedRoute(V){this.currentRoute!==V&&(this.currentRoute=V,this.routeChangeHandled=!1)}update(V){const j=this.state.getValue(),ie={...j};this.routeChangeHandled||(ie.actions=void 0,ie.pageNav=void 0,ie.sectionNav={node:{text:(0,Qa.t)("nav.home.title","Home")},main:{text:""}},ie.chromeless=this.currentRoute?.chromeless,ie.layout=$r.Q.Standard,this.routeChangeHandled=!0),Object.assign(ie,V),ie.chromeless=ie.kioskMode===vn.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(ie,j)||this.state.next(ie)}ignoreStateUpdate(V,j){return!!(Df(V,j)||(V.sectionNav!==j.sectionNav||V.pageNav!==j.pageNav)&&V.actions===j.actions&&V.layout===j.layout&&Uc(V.sectionNav.node,j.sectionNav.node)&&Uc(V.pageNav,j.pageNav))}useState(){return(0,Ef.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),M.E1.partial({kiosk:null})}setKioskModeFromUrl(V){switch(V){case"tv":this.update({kioskMode:vn.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:vn.KioskMode.Full})}}getKioskUrlValue(V){switch(V){case vn.KioskMode.TV:return"tv";case vn.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:V,searchBarHidden:j}=this.state.getValue();return j||V===vn.KioskMode.TV?(nr.Z.emit(fi.SI.alertSuccess,[(0,Qa.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),vn.KioskMode.Full):V?null:vn.KioskMode.TV}}function Uc(B,V){if(B===V)return!0;const j=B?.children?.find(ye=>ye.active),ie=V?.children?.find(ye=>ye.active);return B?.text===V?.text&&B?.url===V?.url&&j?.url===ie?.url&&Uc(B?.parentItem,V?.parentItem)}function Sl({children:B,icon:V,isActive:j,isChild:ie,onClick:ye,target:Se,url:we}){const He=(0,st.l4)(),Qe=bf(He,j,ie),rt=s.createElement("div",{className:Qe.linkContent},V&&s.createElement(ka.J,{"data-testid":"dropdown-child-icon",name:V}),s.createElement("div",{className:Qe.linkText},B),Se==="_blank"&&s.createElement(ka.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:Qe.externalLinkIcon}));let ht=s.createElement("button",{"data-testid":Ds.wl.components.NavMenu.item,className:(0,Ie.cx)(Qe.button,Qe.element),onClick:ye},rt);return we&&(ht=!Se&&we.startsWith("/")?s.createElement(Qd.r,{"data-testid":Ds.wl.components.NavMenu.item,className:Qe.element,href:we,target:Se,onClick:ye},rt):s.createElement("a",{"data-testid":Ds.wl.components.NavMenu.item,href:we,target:Se,className:Qe.element,onClick:ye},rt)),s.createElement("li",{className:Qe.listItem},ht)}Sl.displayName="NavBarMenuItem";const bf=(B,V,j)=>({button:(0,Ie.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,Ie.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,Ie.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,Ie.css)({color:B.colors.text.secondary}),element:(0,Ie.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:V?B.colors.text.primary:B.colors.text.secondary,padding:B.spacing(1,1,1,j?5:0),...j&&{borderRadius:B.shape.radius.default},width:"100%","&:hover, &:focus-visible":{...j&&{background:B.colors.emphasize(B.colors.background.primary,.03)},textDecoration:"underline",color:B.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:V?"block":"none",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),listItem:(0,Ie.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...j&&{padding:B.spacing(0,2)}})});var Pf=e(48018);function Sf({link:B}){const V=(0,st.l4)(),j=Mf(V);if(B.icon==="grafana")return s.createElement(ec.c.MenuLogo,{className:j.img});if(B.icon){const ie=(0,Pf.toIconName)(B.icon);return s.createElement(ka.J,{name:ie??"link",size:"xl"})}else return s.createElement("img",{className:(0,Ie.cx)(j.img,B.roundIcon&&j.round),src:B.img,alt:""})}function Mf(B){return{img:(0,Ie.css)({height:B.spacing(3),width:B.spacing(3)}),round:(0,Ie.css)({borderRadius:B.shape.radius.circle})}}const xf=({children:B})=>{const V=(0,st.wW)(au);return s.createElement("div",null,B,s.createElement("span",{className:V.highlight}))},au=B=>({highlight:(0,Ie.css)({backgroundColor:B.colors.success.main,borderRadius:B.shape.radius.circle,width:"6px",height:"6px",display:"inline-block",position:"absolute",top:"50%",transform:"translateY(-50%)"})});function Nc({link:B,activeItem:V,children:j,className:ie,onClose:ye}){const Se=(0,st.wW)(Tf),we=B.highlightText?xf:s.Fragment,He=B===V,Qe=pl(B,V),[rt,ht]=(0,Mc.Z)(`grafana.navigation.expanded[${B.text}]`,!1)??!!Qe;return s.createElement(s.Fragment,null,s.createElement("div",{className:(0,Ie.cx)(Se.collapsibleSectionWrapper,ie)},s.createElement(Sl,{isActive:B===V,onClick:()=>{B.onClick?.(),ye?.()},target:B.target,url:B.url},s.createElement("div",{className:(0,Ie.cx)(Se.labelWrapper,{[Se.isActive]:He,[Se.hasActiveChild]:Qe})},s.createElement(we,null,s.createElement(Sf,{link:B})),B.text)),j&&s.createElement(fe.zx,{"aria-label":`${rt?"Collapse":"Expand"} section ${B.text}`,variant:"secondary",fill:"text",className:Se.collapseButton,onClick:()=>ht(!rt)},s.createElement(ka.J,{name:rt?"angle-up":"angle-down",size:"xl"}))),rt&&j)}const Tf=B=>({collapsibleSectionWrapper:(0,Ie.css)({alignItems:"center",display:"flex"}),collapseButton:(0,Ie.css)({color:B.colors.text.disabled,padding:B.spacing(0,.5),marginRight:B.spacing(1)}),collapseWrapperActive:(0,Ie.css)({backgroundColor:B.colors.action.disabledBackground}),collapseContent:(0,Ie.css)({padding:0}),labelWrapper:(0,Ie.css)({display:"grid",fontSize:B.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,placeItems:"center",fontWeight:B.typography.fontWeightMedium}),isActive:(0,Ie.css)({color:B.colors.text.primary,"&::before":{display:"block",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),hasActiveChild:(0,Ie.css)({color:B.colors.text.primary})});function Ml({link:B,activeItem:V,onClose:j}){const ie=(0,st.wW)(Of);return B.emptyMessage&&!Wi(B)?s.createElement(Nc,{onClose:j,link:B,activeItem:V},s.createElement("ul",{className:ie.children},s.createElement("div",{className:ie.emptyMessage},B.emptyMessage))):s.createElement(Nc,{onClose:j,link:B,activeItem:V},Wi(B)&&s.createElement("ul",{className:ie.children},B.children.map(ye=>!ye.isCreateAction&&s.createElement(Sl,{key:`${B.text}-${ye.text}`,isActive:ef(ye,V),isChild:!0,onClick:()=>{ye.onClick?.(),j()},target:ye.target,url:ye.url},ye.text))))}const Of=B=>({children:(0,Ie.css)({display:"flex",flexDirection:"column"}),flex:(0,Ie.css)({display:"flex"}),itemWithoutMenu:(0,Ie.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,Ie.css)({height:"100%",width:"100%"}),iconContainer:(0,Ie.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,Ie.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,Ie.css)({fontSize:B.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,Ie.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5,1,7)})});function Wi(B){return!!(B.children&&B.children.length>0)}const xl="350px";function su({activeItem:B,navItems:V,searchBarHidden:j,onClose:ie}){const ye=(0,st.l4)(),Se=If(ye,j),we=ye.transitions.duration.shortest,He=Rf(ye,we),{chrome:Qe}=(0,Po.p)(),rt=Qe.useState(),ht=(0,s.useRef)(null),bt=(0,s.useRef)(null),{dialogProps:Wt}=(0,Jr.R)({},ht),[Bt,It]=(0,s.useState)(!1),Gt=()=>It(!1),{overlayProps:mn,underlayProps:pa}=(0,Bi.Ir)({isDismissable:!0,isOpen:!0,onClose:Gt},ht);return(0,s.useEffect)(()=>{rt.megaMenuOpen&&It(!0)},[rt.megaMenuOpen]),s.createElement(Bi.Xj,null,s.createElement(yl.Z,{nodeRef:ht,in:Bt,unmountOnExit:!0,classNames:He.overlay,timeout:{enter:we,exit:0},onExited:ie},s.createElement(vc.MT,{contain:!0,autoFocus:!0},s.createElement("div",{"data-testid":Ds.wl.components.NavMenu.Menu,ref:ht,...mn,...Wt,className:Se.container},s.createElement("div",{className:Se.mobileHeader},s.createElement(ka.J,{name:"bars",size:"xl"}),s.createElement(Vs.h,{"aria-label":"Close navigation menu",tooltip:"Close menu",name:"times",onClick:Gt,size:"xl",variant:"secondary"})),s.createElement("nav",{className:Se.content},s.createElement(Sc.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},s.createElement("ul",{className:Se.itemList},V.map(Sa=>s.createElement(Ml,{link:Sa,onClose:Gt,activeItem:B,key:Sa.text})))))))),s.createElement(yl.Z,{nodeRef:bt,in:Bt,unmountOnExit:!0,classNames:He.backdrop,timeout:{enter:we,exit:0}},s.createElement("div",{ref:bt,className:Se.backdrop,...pa})))}su.displayName="NavBarMenu";const If=(B,V)=>{const j=(V?qr.$:qr.$*2)+1;return{backdrop:(0,Ie.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:V?0:qr.$,zIndex:B.zIndex.modalBackdrop,[B.breakpoints.up("md")]:{top:j}}),container:(0,Ie.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:B.spacing(1.5),right:0,zIndex:B.zIndex.modal,position:"fixed",top:V?0:qr.$,backgroundColor:B.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[B.breakpoints.up("md")]:{borderRight:`1px solid ${B.colors.border.weak}`,right:"unset",top:j}}),content:(0,Ie.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,Ie.css)({display:"flex",justifyContent:"space-between",padding:B.spacing(1,1,1,2),borderBottom:`1px solid ${B.colors.border.weak}`,[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,Ie.css)({display:"grid",gridAutoRows:`minmax(${B.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${xl}, auto)`,minWidth:xl})}},Rf=(B,V)=>{const j={transitionDuration:`${V}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},ie={...j,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ye={...j,transitionProperty:"opacity"},Se={width:"100%",[B.breakpoints.up("md")]:{boxShadow:B.shadows.z3,width:xl}},we={boxShadow:"none",width:0},He={opacity:1},Qe={opacity:0};return{backdrop:{enter:(0,Ie.css)(Qe),enterActive:(0,Ie.css)(ye,He),enterDone:(0,Ie.css)(He)},overlay:{enter:(0,Ie.css)(we),enterActive:(0,Ie.css)(ie,Se),enterDone:(0,Ie.css)(Se)}}},ru=s.memo(({onClose:B,searchBarHidden:V})=>{const j=(0,vn.useSelector)(rt=>rt.navBarTree),ie=(0,st.l4)(),ye=pr(ie),Se=(0,is.TH)(),He=(0,p.cloneDeep)(j).filter(rt=>rt.id!=="profile"&&rt.id!=="help").map(rt=>Cc(rt,!0)),Qe=bc(He,Se.pathname);return s.createElement("div",{className:ye.menuWrapper},s.createElement(su,{activeItem:Qe,navItems:He,onClose:B,searchBarHidden:V}))});ru.displayName="MegaMenu";const pr=B=>({menuWrapper:(0,Ie.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu})}),Tl=2;function Af({item:B,isSectionRoot:V=!1,level:j=0}){const ie=(0,st.wW)(Fi),ye=B.children?.filter(ht=>!ht.hideFromTabs),Se=B.children&&bc(B.children,location.pathname),we=V&&!!B.children[0].children?.length,He=(0,Ie.cx)({[ie.link]:!0,[ie.activeStyle]:B.active||j===Tl&&pl(B,Se),[ie.isSection]:j<Tl&&(!!ye?.length||B.isSection),[ie.isSectionRoot]:V,[ie.noRootMargin]:we});let Qe=null;B.img?Qe=s.createElement("img",{"data-testid":"section-image",className:ie.sectionImg,src:B.img,alt:""}):B.icon&&(Qe=s.createElement(ka.J,{"data-testid":"section-icon",className:ie.sectionImg,name:B.icon}));const rt=()=>{(0,ir.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,sectionNav:!0})};return s.createElement(s.Fragment,null,s.createElement("a",{onClick:rt,href:B.url,className:He,"aria-label":Ds.wl.components.Tab.title(B.text),role:"tab","aria-selected":B.active},V&&Qe,B.text,B.tabSuffix&&s.createElement(B.tabSuffix,{className:ie.suffix})),j<Tl&&ye?.map((ht,bt)=>s.createElement(Af,{item:ht,key:bt,level:j+1})))}const Fi=B=>({link:(0,Ie.css)`
      padding: ${B.spacing(1,0,1,1.5)};
      display: flex;
      align-items: flex-start;
      border-radius: ${B.shape.radius.default};
      gap: ${B.spacing(1)};
      height: 100%;
      position: relative;
      color: ${B.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:(0,Ie.css)`
      label: activeTabStyle;
      color: ${B.colors.text.primary};
      font-weight: ${B.typography.fontWeightMedium};
      background: ${B.colors.emphasize(B.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${B.shape.radius.default};
        background-image: ${B.colors.gradients.brandVertical};
      }
    `,suffix:(0,Ie.css)`
      margin-left: ${B.spacing(1)};
    `,sectionImg:(0,Ie.css)({margin:"6px 0",width:B.spacing(2)}),isSectionRoot:(0,Ie.css)({fontSize:B.typography.h4.fontSize,marginTop:0,marginBottom:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),isSection:(0,Ie.css)({color:B.colors.text.primary,fontSize:B.typography.h5.fontSize,marginTop:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),noRootMargin:(0,Ie.css)({marginBottom:0})}),Wc=({isExpanded:B,onClick:V})=>{const j=(0,st.l4)(),ie=Lf(j);return s.createElement(fe.zx,{title:"Toggle section navigation","aria-label":B?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:Rd()(ie.icon,{[ie.iconExpanded]:B}),variant:"secondary",fill:"text",size:"md",onClick:V})};Wc.displayName="SectionNavToggle";const Lf=B=>({icon:(0,Ie.css)({alignSelf:"center",margin:B.spacing(1,0),transform:"rotate(90deg)",transition:B.transitions.create("opacity"),color:B.colors.text.secondary,zIndex:1,[B.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:B.spacing(0,0,0,1),top:B.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,Ie.css)({rotate:"180deg",[B.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function ou({model:B}){const V=(0,st.wW)(wf),{isExpanded:j,onToggleSectionNav:ie}=Bf();return B.main?.children?.length?s.createElement("div",{className:V.navContainer},s.createElement("nav",{className:(0,Ie.cx)(V.nav,{[V.navExpanded]:j})},s.createElement(Sc.$,{showScrollIndicators:!0},s.createElement("div",{className:V.items,role:"tablist"},s.createElement(Af,{item:B.main,isSectionRoot:!0})))),s.createElement(Wc,{isExpanded:j,onClick:ie})):null}function Bf(){const B=(0,st.l4)(),V=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`).matches,[j,ie]=(0,Mc.Z)("grafana.sectionNav.expanded",!V),[ye,Se]=(0,s.useState)(!V&&j);return(0,s.useEffect)(()=>{const He=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`),Qe=rt=>Se(rt.matches?!1:j);return He.addEventListener("change",Qe),()=>He.removeEventListener("change",Qe)},[j,B.breakpoints.values.lg]),{isExpanded:ye,onToggleSectionNav:()=>{ie(!ye),Se(!ye)}}}const wf=B=>({navContainer:(0,Ie.css)({display:"flex",flexDirection:"column",position:"relative",[B.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,Ie.css)({display:"flex",flexDirection:"column",background:B.colors.background.canvas,flexShrink:0,transition:B.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[B.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,Ie.css)({maxHeight:"50vh",visibility:"visible",[B.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,Ie.css)({display:"flex",flexDirection:"column",padding:B.spacing(2,1,2,2),minWidth:"250px",[B.breakpoints.up("md")]:{padding:B.spacing(4.5,1,2,2)}})});var Fc=e(98827),Kc=e(67669),Uf=e(83870),Nf=e(59899),Wf=e(33501),Ff=e(92666),Zo=e(72279),Kf=e(86160);function Vf({feedUrl:B}){const V=(0,st.wW)(_f),{state:j,getNews:ie}=(0,Kf.j)(B),[ye,Se]=(0,Ff.Z)();return(0,s.useEffect)(()=>{ie()},[ie]),j.error?s.createElement("div",{className:V.innerWrapper},j.error&&j.error.message):s.createElement("div",{ref:ye},j.loading?s.createElement(s.Fragment,null,s.createElement(Zo.S.Skeleton,{showImage:!0,width:Se.width}),s.createElement(Zo.S.Skeleton,{showImage:!0,width:Se.width}),s.createElement(Zo.S.Skeleton,{showImage:!0,width:Se.width}),s.createElement(Zo.S.Skeleton,{showImage:!0,width:Se.width}),s.createElement(Zo.S.Skeleton,{showImage:!0,width:Se.width})):s.createElement(s.Fragment,null,Se.width>0&&j.value?.map((we,He)=>s.createElement(Zo.S,{key:He,index:He,showImage:!0,width:Se.width,data:j.value}))),s.createElement("div",{className:V.grot},s.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},s.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"}))))}const _f=B=>({innerWrapper:(0,Ie.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,Ie.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(5,0),img:{width:"186px",height:"186px"}})});function $f({className:B}){const[V,j]=(0,Uf.Z)(!1),ie=(0,st.wW)(Vc);return s.createElement(s.Fragment,null,s.createElement(Fo.h,{className:B,onClick:j,iconOnly:!0,icon:"rss","aria-label":"News"}),V&&s.createElement(Nf.d,{title:s.createElement("div",{className:ie.title},s.createElement(Dl.x,{element:"h3"},(0,Qa.t)("news.title","Latest from the blog")),s.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:ie.grot},s.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),s.createElement("div",{className:ie.actions},s.createElement(Vs.h,{name:"times",variant:"secondary",onClick:j,"data-testid":Ds.wl.components.Drawer.General.close,tooltip:(0,Qa.t)("news.drawer.close","Close Drawer")}))),onClose:j,size:"md"},s.createElement(Vf,{feedUrl:Wf.k})))}const Vc=B=>({title:(0,Ie.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:B.spacing(2),borderBottom:`1px solid ${B.colors.border.weak}`}),grot:(0,Ie.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,Ie.css)({position:"absolute",right:B.spacing(1),top:B.spacing(2)})});var iu=e(18645);function zf({orgs:B,onSelectChange:V}){const j=(0,st.wW)(kf);return s.createElement(ri.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:j.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:B.map(ie=>({label:ie.name,description:ie.role,value:ie})),onChange:V,icon:"building"})}const kf=B=>({buttonCss:(0,Ie.css)({color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary}})});function Hf({orgs:B,onSelectChange:V}){const j=(0,st.wW)(Gf),{orgName:ie,orgId:ye,orgRole:Se}=Ba.contextSrv.user,[we,He]=(0,s.useState)(()=>({label:ie,value:{role:Se,orgId:ye,name:ie},description:Se})),Qe=rt=>{He(rt),V(rt)};return s.createElement(Ee.Ph,{"aria-label":"Change organization",width:"auto",value:we,prefix:s.createElement(ka.J,{className:"prefix-icon",name:"building"}),className:j.select,options:B.map(rt=>({label:rt.name,description:rt.role,value:rt})),onChange:Qe})}const Gf=B=>({select:(0,Ie.css)({border:"none",background:"none",color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary,"& .prefix-icon":(0,Ie.css)({color:B.colors.text.primary})}})});function jf(){const B=(0,st.l4)(),V=(0,vn.useDispatch)(),j=(0,vn.useSelector)(Qe=>Qe.organization.userOrgs),ie=Qe=>{Qe.value&&((0,iu.Q$)(Qe.value.orgId),M.E1.push(`/?orgId=${Qe.value.orgId}`),window.location.reload())};(0,s.useEffect)(()=>{Ba.contextSrv.isSignedIn&&V((0,iu.JE)())},[V]);const ye=B.breakpoints.values.sm,[Se,we]=(0,s.useState)(!window.matchMedia(`(min-width: ${ye}px)`).matches);if(hi({breakpoint:ye,onChange:Qe=>{we(!Qe.matches)}}),j?.length<=1)return null;const He=Se?zf:Hf;return s.createElement(He,{orgs:j,onSelectChange:ie})}var Ki=e(63424);function lu(B){const V=[];for(const j of B)j.isCreateAction&&V.push(j),j.children&&V.push(...lu(j.children));return V}const Qf=({})=>{const B=(0,st.wW)(_c),V=(0,st.l4)(),j=(0,vn.useSelector)(ht=>ht.navBarTree),ie=V.breakpoints.values.sm,[ye,Se]=(0,s.useState)(!1),[we,He]=(0,s.useState)(!window.matchMedia(`(min-width: ${ie}px)`).matches),Qe=(0,s.useMemo)(()=>lu(j),[j]);hi({breakpoint:ie,onChange:ht=>{He(!ht.matches)}});const rt=()=>s.createElement(Ki.v,null,Qe.map((ht,bt)=>s.createElement(Ki.v.Item,{key:bt,url:ht.url,label:ht.text,onClick:()=>(0,ir.ff)("grafana_menu_item_clicked",{url:ht.url,from:"quickadd"})})));return Qe.length>0?s.createElement(s.Fragment,null,s.createElement(Kc.L,{overlay:rt,placement:"bottom-end",onVisibleChange:Se},s.createElement(Fo.h,{iconOnly:!0,icon:we?"plus-circle":"plus",isOpen:we?void 0:ye,"aria-label":"New"})),s.createElement(ff.M,{className:B.separator})):null},_c=B=>({buttonContent:(0,Ie.css)({alignItems:"center",display:"flex"}),buttonText:(0,Ie.css)({[B.breakpoints.down("md")]:{display:"none"}}),separator:(0,Ie.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function cu(){const B=(0,is.TH)(),V=(0,st.wW)(Yf),j=Fc.QX.sanitizeUrl(O.u.getUrlForPartial(B,{forceLogin:"true"}));return s.createElement("a",{className:V.link,href:j,target:"_self"},"Sign in")}const Yf=B=>({link:(0,Ie.css)({paddingRight:B.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Ol=e(46213);function du({node:B}){const V=(0,st.wW)(Zf),j=Cc((0,p.cloneDeep)(B),!1);return j?s.createElement(Ki.v,{header:s.createElement("div",{onClick:ie=>ie.stopPropagation(),className:V.header},s.createElement("div",null,j.text),j.subTitle&&s.createElement("div",{className:V.subTitle},j.subTitle))},j.children?.map(ie=>ie.url?s.createElement(Ol.s,{url:ie.url,label:ie.text,icon:ie.icon,target:ie.target,key:ie.id}):s.createElement(Ol.s,{icon:ie.icon,onClick:ie.onClick,label:ie.text,key:ie.id}))):null}const Zf=B=>({header:(0,Ie.css)({fontSize:B.typography.h5.fontSize,fontWeight:B.typography.h5.fontWeight,padding:B.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,Ie.css)({color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize})});var uu=e(83998),Jf=e(20154);function Xf(){const B=(0,st.l4)(),{query:V}=(0,qs.useKBar)(we=>({kbarSearchQuery:we.searchQuery,kbarIsOpen:we.visualState===qs.VisualState.showing})),j=B.breakpoints.values.sm,[ie,ye]=(0,s.useState)(!window.matchMedia(`(min-width: ${j}px)`).matches);hi({breakpoint:j,onChange:we=>{ye(!we.matches)}});const Se=()=>{V.toggle()};return ie?s.createElement(Fo.h,{iconOnly:!0,icon:"search","aria-label":(0,Qa.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:Se}):s.createElement(qf,{onClick:Se})}function qf({onClick:B}){const V=(0,st.wW)(eg),j=(0,s.useMemo)(()=>(0,Jf.vl)(),[]);return s.createElement("div",{className:V.wrapper},s.createElement("div",{className:V.inputWrapper},s.createElement("div",{className:V.prefix},s.createElement(ka.J,{name:"search"})),s.createElement("button",{className:V.fakeInput,onClick:B},(0,Qa.t)("nav.search.placeholderCommandPalette","Search or jump to...")),s.createElement("div",{className:V.suffix},s.createElement(ka.J,{name:"keyboard"}),s.createElement("span",{className:V.shortcut},j,"+k"))))}const eg=B=>{const V=(0,ot.H)({theme:B});return{wrapper:V.wrapper,inputWrapper:V.inputWrapper,prefix:V.prefix,suffix:(0,Ie.css)([V.suffix,{display:"flex",gap:B.spacing(.5)}]),shortcut:(0,Ie.css)({fontSize:B.typography.bodySmall.fontSize}),fakeInput:(0,Ie.css)([V.input,{textAlign:"left",paddingLeft:28,color:B.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,Ie.css)`
          ${(0,uu.focusCss)(B)}
        `}]),button:(0,Ie.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function $c({children:B,align:V="left"}){const j=(0,st.wW)(mu),ye=(0,st.l4)().breakpoints.values.sm,[Se,we]=(0,s.useState)(!window.matchMedia(`(min-width: ${ye}px)`).matches);return hi({breakpoint:ye,onChange:He=>{we(!He.matches)}}),Se?s.createElement(s.Fragment,null,B):s.createElement("div",{"data-testid":"wrapper",className:(0,Ie.cx)(j.wrapper,{[j[V]]:V==="right"})},B)}const mu=B=>({wrapper:(0,Ie.css)({display:"flex",gap:B.spacing(.5),alignItems:"center"}),right:(0,Ie.css)({justifyContent:"flex-end"}),left:(0,Ie.css)({}),center:(0,Ie.css)({})}),tg=s.memo(function(){const V=(0,st.wW)(ng),j=(0,vn.useSelector)(Qe=>Qe.navIndex),ie=(0,is.TH)(),ye=(0,p.cloneDeep)(j.help),Se=ye?Wd(ye):void 0,we=j.profile;let He=z.config.appSubUrl||"/";return!z.config.bootData.user.isSignedIn&&!z.config.anonymousEnabled&&(He=Fc.QX.sanitizeUrl(O.u.getUrlForPartial(ie,{forceLogin:"true"}))),s.createElement("div",{className:V.layout},s.createElement($c,null,s.createElement("a",{className:V.logo,href:He,title:"Go to home"},s.createElement(ec.c.MenuLogo,{className:V.img})),s.createElement(jf,null)),s.createElement($c,null,s.createElement(Xf,null)),s.createElement($c,{align:"right"},s.createElement(Qf,null),Se&&s.createElement(Kc.L,{overlay:()=>s.createElement(du,{node:Se}),placement:"bottom-end"},s.createElement(Fo.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),z.config.newsFeedEnabled&&s.createElement($f,null),!Za.Vt.user.isSignedIn&&s.createElement(cu,null),we&&s.createElement(Kc.L,{overlay:()=>s.createElement(du,{node:we}),placement:"bottom-end"},s.createElement(Fo.h,{className:V.profileButton,imgSrc:Za.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),ng=B=>({layout:(0,Ie.css)({height:qr.$,display:"flex",gap:B.spacing(1),alignItems:"center",padding:B.spacing(0,1,0,2),borderBottom:`1px solid ${B.colors.border.weak}`,justifyContent:"space-between",[B.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,Ie.css)({height:B.spacing(3),width:B.spacing(3)}),logo:(0,Ie.css)({display:"flex"}),profileButton:(0,Ie.css)({padding:B.spacing(0,.25),img:{borderRadius:B.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});function ag({children:B}){const{chrome:V}=(0,Po.p)(),j=V.useState(),ie=j.searchBarHidden||j.kioskMode===vn.KioskMode.TV,ye=(0,st.l4)(),Se=(0,st.wW)(sg),we=ye.breakpoints.values.xl,He=So.Z.getBool(Bc,!0);hi({breakpoint:we,onChange:ht=>{z.default.featureToggles.dockedMegaMenu&&He&&(V.setMegaMenuDocked(ht.matches,!1),V.setMegaMenuOpen(ht.matches?So.Z.getBool(wc,j.megaMenuOpen):!1))}});const Qe=(0,Ie.cx)({[Se.content]:!0,[Se.contentNoSearchBar]:ie,[Se.contentChromeless]:j.chromeless}),rt=()=>{V.setMegaMenuOpen(!j.megaMenuOpen)};return s.createElement("div",{className:Rd()("main-view",{"main-view--search-bar-hidden":ie&&!j.chromeless,"main-view--chrome-hidden":j.chromeless})},!j.chromeless&&s.createElement(s.Fragment,null,s.createElement(fe.Qj,{className:Se.skipLink,href:"#pageContent"},"Skip to main content"),s.createElement("div",{className:(0,Ie.cx)(Se.topNav)},!ie&&s.createElement(tg,null),s.createElement(gf,{searchBarHidden:ie,sectionNav:j.sectionNav.node,pageNav:j.pageNav,actions:j.actions,onToggleSearchBar:V.onToggleSearchBar,onToggleMegaMenu:rt,onToggleKioskMode:V.onToggleKioskMode}))),s.createElement("main",{className:Qe},s.createElement("div",{className:Se.panes},j.layout===$r.Q.Standard&&j.sectionNav&&!z.default.featureToggles.dockedMegaMenu&&s.createElement(ou,{model:j.sectionNav}),z.default.featureToggles.dockedMegaMenu&&!j.chromeless&&j.megaMenuDocked&&j.megaMenuOpen&&s.createElement(Pl,{className:Se.dockedMegaMenu,onClose:()=>V.setMegaMenuOpen(!1)}),s.createElement("div",{className:Se.pageContainer,id:"pageContent"},B))),!j.chromeless&&!j.megaMenuDocked&&s.createElement(s.Fragment,null,z.default.featureToggles.dockedMegaMenu?s.createElement(pf,null):s.createElement(ru,{searchBarHidden:ie,onClose:()=>V.setMegaMenuOpen(!1)})),!j.chromeless&&s.createElement(kd,null))}const sg=B=>{const V=B.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 4px 8px rgb(0 0 0 / 4%)";return{content:(0,Ie.css)({display:"flex",flexDirection:"column",paddingTop:qr.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,Ie.css)({paddingTop:qr.$}),contentChromeless:(0,Ie.css)({paddingTop:0}),dockedMegaMenu:(0,Ie.css)({background:B.colors.background.primary,borderRight:`1px solid ${B.colors.border.weak}`,borderTop:`1px solid ${B.colors.border.weak}`,display:"none",zIndex:B.zIndex.navbarFixed,[B.breakpoints.up("xl")]:{display:"block"}}),topNav:(0,Ie.css)({display:"flex",position:"fixed",zIndex:B.zIndex.navbarFixed,left:0,right:0,boxShadow:z.default.featureToggles.dockedMegaMenu?void 0:V,background:B.colors.background.primary,flexDirection:"column",borderBottom:`1px solid ${B.colors.border.weak}`}),panes:(0,Ie.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[B.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,Ie.css)({label:"page-container",flexGrow:1,minHeight:0,minWidth:0,overflow:"auto"}),skipLink:(0,Ie.css)({position:"absolute",top:-1e3,":focus":{left:B.spacing(1),top:B.spacing(1),zIndex:B.zIndex.portal}})}};var Il=e(7939),fu=e(43025),zc=e(42876),rg=e(26124);function og({appNotification:B,onClearNotification:V}){const j=(0,st.wW)(ig);(0,rg.Z)(()=>{setTimeout(()=>{V(B.id)},vn.timeoutMap[B.severity])});const ie=B.component||B.text||B.traceId;return s.createElement(Dr.b,{severity:B.severity,title:B.title,onRemove:()=>V(B.id),elevated:!0},ie&&s.createElement("div",{className:j.wrapper},s.createElement("span",null,B.component||B.text),B.traceId&&s.createElement("span",{className:j.trace},"Trace ID: ",B.traceId)))}function ig(B){return{wrapper:(0,Ie.css)({display:"flex",flexDirection:"column"}),trace:(0,Ie.css)({fontSize:B.typography.pxToRem(10)})}}function lg(){const B=(0,vn.useSelector)(ye=>(0,fu.vo)(ye.appNotifications)),V=(0,vn.useDispatch)(),j=(0,st.wW)(cg);(0,s.useEffect)(()=>{nr.Z.on(fi.SI.alertWarning,ye=>V((0,Il.$l)((0,zc.ZR)(...ye)))),nr.Z.on(fi.SI.alertSuccess,ye=>V((0,Il.$l)((0,zc.AT)(...ye)))),nr.Z.on(fi.SI.alertError,ye=>V((0,Il.$l)((0,zc.t_)(...ye))))},[V]);const ie=ye=>{V((0,Il.ad)(ye))};return s.createElement("div",{className:j.wrapper},s.createElement(_a.wc,null,B.map((ye,Se)=>s.createElement(og,{key:`${ye.id}-${Se}`,appNotification:ye,onClearNotification:ie}))))}function cg(B){return{wrapper:(0,Ie.css)({label:"app-notifications-list",zIndex:B.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var Rl=e(38294),dg=e.n(Rl),kc=e(28069);function ug({error:B,errorInfo:V}){const j=(0,is.TH)(),ie=B?.name==="ChunkLoadError",ye=(0,st.wW)(mg);return(0,s.useEffect)(()=>{ie&&j.search.indexOf("chunkNotFound")===-1&&(window.location.href=O.u.getUrlForPartial(j,{chunkNotFound:!0}))},[j,ie]),s.createElement(Mr.T,{navId:"error",layout:$r.Q.Canvas},s.createElement("div",{className:ye.container},ie&&s.createElement("div",null,s.createElement("h2",null,"Unable to find application file"),s.createElement("br",null),s.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),s.createElement("br",null),s.createElement(fe.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload"),s.createElement(kc.X,{title:"Error details",error:B,errorInfo:V})),!ie&&s.createElement(kc.X,{title:"An unexpected error happened",error:B,errorInfo:V})))}const mg=B=>({container:(0,Ie.css)({width:"500px",margin:B.spacing(8,"auto")})});function fg(){const B=(0,st.wW)(Hc);return s.createElement("div",{className:B.container,"aria-live":"polite",role:"status","aria-label":(0,Qa.t)("bouncing-loader.label","Loading")},s.createElement("div",{className:B.bounce},s.createElement("img",{alt:"",src:"public/img/grafana_icon.svg",className:B.logo})))}const gg=(0,Ie.keyframes)({"0%":{opacity:0,animationTimingFunction:"cubic-bezier(0, 0, 0.5, 1)"},"100%":{opacity:1}}),gu=(0,Ie.keyframes)({"from, to":{transform:"translateY(0px)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"50%":{transform:"translateY(-50px)",animationTimingFunction:"cubic-bezier(0.9, 0, 0.7, 1)"}}),hg=(0,Ie.keyframes)({"0%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"15%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 0.75)"},"55%":{transform:"scaleX(1.05) scaleY(0.95)",animationTimingFunction:"cubic-bezier(0.9, 0, 1, 1)"},"95%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0, 1)"},"100%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 1)"}}),Hc=B=>({container:(0,Ie.css)({opacity:0,animationName:gg,animationIterationCount:1,animationDuration:"0.9s",animationDelay:"0.5s",animationFillMode:"forwards"}),bounce:(0,Ie.css)({textAlign:"center",animationName:gu,animationDuration:"0.9s",animationIterationCount:"infinite"}),logo:(0,Ie.css)({display:"inline-block",animationName:hg,animationDuration:"0.9s",animationIterationCount:"infinite",width:"60px",height:"60px"})});function To(){const B=(0,st.wW)(fp);return s.createElement("div",{className:(0,Ie.cx)(B.loadingPage,{[B.loadingPageDockedNav]:Z.config.featureToggles.dockedMegaMenu})},s.createElement(fg,null))}const fp=B=>({loadingPage:(0,Ie.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"}),loadingPageDockedNav:(0,Ie.css)({backgroundColor:B.colors.background.primary})});function Gc(B){const{chrome:V,keybindings:j}=(0,Po.p)();return V.setMatchedRoute(B.route),(0,s.useLayoutEffect)(()=>{j.clearAndInitGlobalBindings(B.route)},[j,B.route]),(0,s.useEffect)(()=>(hu(B.route),pu(),(0,M.GQ)("GrafanaRoute",!1,"Mounted",B.match),()=>{(0,M.GQ)("GrafanaRoute",!1,"Unmounted",B.route),hu(B.route,!0)}),[]),(0,s.useEffect)(()=>{pu(),(0,ir.sm)(),(0,M.GQ)("GrafanaRoute",!1,"Updated",B)}),(0,M.GQ)("GrafanaRoute",!1,"Rendered",B.route),s.createElement(el.SV,null,({error:ie,errorInfo:ye})=>ie?s.createElement(ug,{error:ie,errorInfo:ye}):s.createElement(s.Suspense,{fallback:s.createElement(To,null)},s.createElement(B.route.component,{...B,queryParams:(0,M.Ox)(B.location.search)})))}function gp(B){return B.pageClass?B.pageClass.split(" "):[]}function hu(B,V=!1){for(const j of gp(B))V?document.body.classList.remove(j):document.body.classList.add(j)}function pu(){document.body.classList.remove("sidemenu-open--xs");const B=document.getElementById("tooltip");B?.parentElement?.removeChild(B);const V=document.querySelectorAll(".tooltip");for(let j=0;j<V.length;j++){const ie=V[j];ie.parentElement?.removeChild(ie)}for(const j of dg().drops)j.destroy()}var Al=e(13771),jc=e(24035);class Qc extends s.PureComponent{constructor(){super(...arguments),this.styles=pg(Z.config.theme2),this.state={},this.initListener=()=>{const V=(0,jc.gj)();V&&(this.subscription=V.getConnectionState().subscribe({next:j=>{this.setState({show:!j})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:V}=this.state;return V?!Ba.contextSrv.isSignedIn||!Z.config.liveEnabled||Ba.contextSrv.user.orgRole===cl.B.None?null:s.createElement("div",{className:this.styles.foot},s.createElement(Dr.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const pg=(0,nl.B)(B=>({foot:(0,Ie.css)`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:(0,Ie.css)`
      max-width: 400px;
      margin: auto;
    `}));let Ll=[],vu=[];function hp(B){Ll.push(B)}function vg(B){vu.push(B)}class Eu extends s.Component{constructor(V){super(V),this.renderRoute=j=>{const ie=j.roles?j.roles():[];return s.createElement(ud.CompatRoute,{exact:j.exact===void 0?!0:j.exact,sensitive:j.sensitive===void 0?!1:j.sensitive,path:j.path,key:j.path,render:ye=>ie?.length&&!ie.some(Se=>Ba.contextSrv.hasRole(Se))?s.createElement(is.l_,{to:"/"}):s.createElement(Gc,{...ye,route:j})})},this.state={}}async componentDidMount(){await Km(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return s.createElement(is.rs,null,Td().map(V=>this.renderRoute(V)))}render(){const{app:V}=this.props,{ready:j}=this.state;(0,M.GQ)("AppWrapper",!1,"rendering");const ie=ye=>{(0,ir.ff)("command_palette_action_selected",{actionId:ye.id,actionName:ye.name})};return s.createElement(or.Provider,{store:Na.h},s.createElement(el.z4,{style:"page"},s.createElement(Po.h.Provider,{value:V.context},s.createElement(Al.f,{value:Z.config.theme2},s.createElement(qs.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:ie}}},s.createElement(tl.$i,null,s.createElement($u.n,null),s.createElement("div",{className:"grafana-app"},s.createElement(is.F0,{history:M.E1.getHistory()},s.createElement(ud.CompatRouter,null,s.createElement(ag,null,vu.map((ye,Se)=>s.createElement(ye,{key:Se.toString()})),s.createElement(ml,null),s.createElement(lg,null),j&&this.renderRoutes(),Ll.map((ye,Se)=>s.createElement(ye,{key:Se.toString()})))))),s.createElement(Qc,null),s.createElement(tl.Y0,null),s.createElement(zu.lO,null)))))))}}var yu=e(12555);function Eg({actions:B,children:V,info:j,pageNav:ie,layout:ye,renderTitle:Se,subTitle:we}){const He=(0,s.useContext)(mc.v);return s.createElement(Mr.T,{navModel:He.sectionNav,pageNav:ie,layout:ye,actions:B,renderTitle:Se,info:j,subTitle:we},s.createElement(Mr.T.Contents,null,V))}var Du=e(55793),yg=e(72707),Dg=e(32511),Cu=e(25716),Cg=e(43095),bg=e(55728),bu=e(14716),Pg=e(51575),Sg=e(53330),pp=e(84863),vp=e(39126),Ep=e(46661),yp=e(41895),Dp=e(63684),Cp=e(4392),bp=e(64807),Pp=e(20261),Sp=e(21969),Mp=e(28308),xp=e(76895),Tp=e(17231),Op=e(939),Ip=e(64058),Rp=e(87805),Ap=e(18095),Lp=e(59983),Bp=e(84010),wp=e(13147),Up=e(23629),Np=e(58258),Wp=e(23198),Fp=e(72295),Kp=e(99064),Vp=e(1476),_p=e(40447),$p=e(96338),zp=e(86285),Mg=e(39064),Yc=e(12069),xg=e(88619),Tg=e(3125),Og=e(24121),Ig=e(84679),Rg=e(87001),Ag=e(40942),Lg=e(85823),Bg=e(99437),Pu=e(67401),wg=e(2692),Ug=e(26782),Ng=e(95687),Wg=e(35727),Fg=e(94431),Kg=e(57692),Vg=e(60807),_g=e(38273),$g=e(97982),zg=e(69326),Su=e(24653),kp=e(50579),Hp=e(64282),Gp=e(38839),jp=e(28760),Qp=e(65572),Yp=e(51210),Zp=e(25281),Jp=e(35873),Xp=e(46026),kg=e(93086),Hg=e(6656),Gg=e(56962),jg=e(36196),Mu=e(40665),Qg=e(99834),Yg=e(72432),Zg=e(40140),Vi=e(91190),Jg=e(13214),Xg=e(63180),_i=e(75763),Bl=e(71306),$i=e(70734),qg=e(83916),eh=e(11317),th=e(73603),nh=e(39222),ah=e(20538),sh=e(38811),rh=e(40599),xu=e(16767),Tu=e(56245),oh=e(83650),ih=e(89368),lh=e(73677),Ou=e(57573),ch=e(46597),Ko=e(21102),Iu=e(77734),wl=e(59263),Zc=e(92392),Jc=e(78747),dh=e(24548),qp=e(88136),uh=e(46978),ro=e(10066),zi=e(82585),Ru=e(53120),mh=e(54623),fh=e(93517),Xc=e(43352),wr=e(28589),vo=e(8808),Au=e(45980),gh=e(3873),Ul=e(27704),hh=e(65418),ph=e(20984),vh=e(5663),Eh=e(17497),yh=e(61888),Dh=e(21381),Ch=e(76755),bh=e(49898),Ph=e(17642),Lu=e(93141),Sh=e(19496),Mh=e(37407),pi=e(59403),Bu=e(47078),xh=e(27457),Th=e(87899),Oh=e(4627),Ih=e(3895),Rh=e(89899),Ah=e(82246),eo=e(38814),ev=e(62639),wu=e(17762),Lh=e(33324),Bh=e(13476),wh=e(70774),Uh=e(76248),ki=e(44006),qc=e(60706),Uu=e(173),Nh=e(11744),Wh=e(97418),Fh=e(64223),Kh=e(74662),Jo=e(2293),Vh=e(51134),_h=e(48937),ed=e(61746),$h=e(61387),zh=e(59011),F=e(34235),ee=e(58690),ue=e(48764),Ce=e(55563),xe=e(17486),Be=e(18754),Ke=e(20570),Xe=e(6887),dt=e(1750),gt=e(68843),vt=e(67888),Et=e(85592),Nt=e(11863),Dt=e(49071),Lt=e(49665),Ht=e(37347),Rt=e(20863),Ot=e(18747);let Vt=!1;function pt(B,V){Du.cacheStore[V]={content:B,status:"loaded"}}function _t(){let B="public/img/icons/";const V=typeof window<"u"&&window.__grafana_public_path__;return V&&(B=V+"img/icons/"),j=>B+j}function fn(){if(Vt)return;Vt=!0;const B=_t();pt(yg,B("unicons/at.svg")),pt(Dg,B("unicons/adjust-circle.svg")),pt(Cu,B("unicons/align-left.svg")),pt(Cg,B("unicons/align-right.svg")),pt(bg,B("unicons/angle-double-down.svg")),pt(bu,B("unicons/angle-double-right.svg")),pt(Pg,B("unicons/angle-down.svg")),pt(Sg,B("unicons/angle-left.svg")),pt(pp,B("unicons/angle-right.svg")),pt(vp,B("unicons/angle-up.svg")),pt(Ep,B("unicons/apps.svg")),pt(yp,B("unicons/arrow.svg")),pt(Dp,B("unicons/arrow-down.svg")),pt(Cp,B("unicons/arrow-from-right.svg")),pt(bp,B("unicons/arrow-left.svg")),pt(Pp,B("unicons/arrow-random.svg")),pt(Sp,B("unicons/arrow-right.svg")),pt(Mp,B("unicons/arrow-to-right.svg")),pt(xp,B("unicons/arrow-up.svg")),pt(Tp,B("unicons/arrows-h.svg")),pt(Op,B("unicons/backward.svg")),pt(Ip,B("unicons/bars.svg")),pt(Rp,B("unicons/bell.svg")),pt(Ap,B("unicons/bell-slash.svg")),pt(Lp,B("unicons/bolt.svg")),pt(Bp,B("unicons/book.svg")),pt(wp,B("unicons/book-open.svg")),pt(Up,B("unicons/brackets-curly.svg")),pt(Np,B("unicons/bug.svg")),pt(Wp,B("unicons/building.svg")),pt(Fp,B("unicons/calculator-alt.svg")),pt(Kp,B("unicons/calendar-alt.svg")),pt(Vp,B("unicons/calendar-slash.svg")),pt(_p,B("unicons/camera.svg")),pt($p,B("unicons/channel-add.svg")),pt(zp,B("unicons/chart-line.svg")),pt(Mg,B("unicons/check.svg")),pt(Yc,B("unicons/check-circle.svg")),pt(xg,B("unicons/circle.svg")),pt(Tg,B("unicons/clipboard-alt.svg")),pt(Og,B("unicons/clock-nine.svg")),pt(Ig,B("unicons/cloud.svg")),pt(Rg,B("unicons/cloud-download.svg")),pt(Ag,B("unicons/code-branch.svg")),pt(Lg,B("unicons/cog.svg")),pt(Bg,B("unicons/columns.svg")),pt(Pu,B("unicons/comment-alt.svg")),pt(wg,B("unicons/comment-alt-share.svg")),pt(Ug,B("unicons/comments-alt.svg")),pt(Ng,B("unicons/compass.svg")),pt(Wg,B("unicons/copy.svg")),pt(Fg,B("unicons/corner-down-right-alt.svg")),pt(Kg,B("unicons/cube.svg")),pt(Vg,B("unicons/dashboard.svg")),pt(_g,B("unicons/database.svg")),pt($g,B("unicons/document-info.svg")),pt(zg,B("unicons/download-alt.svg")),pt(Su,B("unicons/draggabledots.svg")),pt(kp,B("unicons/edit.svg")),pt(Hp,B("unicons/ellipsis-v.svg")),pt(Gp,B("unicons/ellipsis-h.svg")),pt(jp,B("unicons/envelope.svg")),pt(Qp,B("unicons/exchange-alt.svg")),pt(Yp,B("unicons/exclamation-circle.svg")),pt(Zp,B("unicons/exclamation-triangle.svg")),pt(Jp,B("unicons/external-link-alt.svg")),pt(Xp,B("unicons/eye.svg")),pt(kg,B("unicons/eye-slash.svg")),pt(Hg,B("unicons/file-alt.svg")),pt(Gg,B("unicons/file-blank.svg")),pt(jg,B("unicons/filter.svg")),pt(Mu,B("unicons/folder.svg")),pt(Qg,B("unicons/folder-open.svg")),pt(Yg,B("unicons/folder-plus.svg")),pt(Zg,B("unicons/folder-upload.svg")),pt(Vi,B("unicons/forward.svg")),pt(Jg,B("unicons/graph-bar.svg")),pt(Xg,B("unicons/history.svg")),pt(_i,B("unicons/history-alt.svg")),pt(Bl,B("unicons/home-alt.svg")),pt($i,B("unicons/import.svg")),pt(qg,B("unicons/info.svg")),pt(eh,B("unicons/info-circle.svg")),pt(th,B("unicons/k6.svg")),pt(nh,B("unicons/key-skeleton-alt.svg")),pt(ah,B("unicons/keyboard.svg")),pt(sh,B("unicons/link.svg")),pt(rh,B("unicons/list-ul.svg")),pt(xu,B("unicons/lock.svg")),pt(Tu,B("unicons/minus.svg")),pt(oh,B("unicons/minus-circle.svg")),pt(ih,B("unicons/mobile-android.svg")),pt(lh,B("unicons/monitor.svg")),pt(Ou,B("unicons/pause.svg")),pt(ch,B("unicons/pen.svg")),pt(Ko,B("unicons/play.svg")),pt(Iu,B("unicons/plug.svg")),pt(wl,B("unicons/plus.svg")),pt(Zc,B("unicons/plus-circle.svg")),pt(Jc,B("unicons/power.svg")),pt(dh,B("unicons/presentation-play.svg")),pt(qp,B("unicons/process.svg")),pt(uh,B("unicons/question-circle.svg")),pt(ro,B("unicons/repeat.svg")),pt(zi,B("unicons/rocket.svg")),pt(Ru,B("unicons/rss.svg")),pt(mh,B("unicons/save.svg")),pt(fh,B("unicons/search.svg")),pt(Xc,B("unicons/search-minus.svg")),pt(wr,B("unicons/search-plus.svg")),pt(vo,B("unicons/share-alt.svg")),pt(Au,B("unicons/shield.svg")),pt(gh,B("unicons/signal.svg")),pt(Ul,B("unicons/signin.svg")),pt(hh,B("unicons/signout.svg")),pt(ph,B("unicons/sitemap.svg")),pt(vh,B("unicons/slack.svg")),pt(Eh,B("unicons/sliders-v-alt.svg")),pt(yh,B("unicons/sort-amount-down.svg")),pt(Dh,B("unicons/sort-amount-up.svg")),pt(Ch,B("unicons/square-shape.svg")),pt(bh,B("unicons/star.svg")),pt(Ph,B("unicons/step-backward.svg")),pt(Lu,B("unicons/sync.svg")),pt(Sh,B("unicons/stopwatch.svg")),pt(Mh,B("unicons/table.svg")),pt(pi,B("unicons/tag-alt.svg")),pt(Bu,B("unicons/times.svg")),pt(xh,B("unicons/trash-alt.svg")),pt(Th,B("unicons/unlock.svg")),pt(Oh,B("unicons/upload.svg")),pt(Ih,B("unicons/user.svg")),pt(Rh,B("unicons/users-alt.svg")),pt(Ah,B("unicons/wrap-text.svg")),pt(eo,B("unicons/cloud-upload.svg")),pt(ev,B("unicons/credit-card.svg")),pt(wu,B("unicons/file-copy-alt.svg")),pt(Lh,B("unicons/fire.svg")),pt(Bh,B("unicons/hourglass.svg")),pt(wh,B("unicons/layer-group.svg")),pt(Uh,B("unicons/layers-alt.svg")),pt(ki,B("unicons/line-alt.svg")),pt(qc,B("unicons/list-ui-alt.svg")),pt(Uu,B("unicons/message.svg")),pt(Nh,B("unicons/palette.svg")),pt(Wh,B("unicons/percentage.svg")),pt(Fh,B("unicons/shield-exclamation.svg")),pt(Kh,B("unicons/plus-square.svg")),pt(Jo,B("unicons/x.svg")),pt(Vh,B("unicons/capture.svg")),pt(_h,B("custom/gf-grid.svg")),pt(ed,B("custom/gf-landscape.svg")),pt($h,B("custom/gf-layout-simple.svg")),pt(zh,B("custom/gf-portrait.svg")),pt(F,B("custom/gf-show-context.svg")),pt(ee,B("custom/gf-bar-alignment-after.svg")),pt(ue,B("custom/gf-bar-alignment-before.svg")),pt(Ce,B("custom/gf-bar-alignment-center.svg")),pt(xe,B("custom/gf-interpolation-linear.svg")),pt(Be,B("custom/gf-interpolation-smooth.svg")),pt(Ke,B("custom/gf-interpolation-step-after.svg")),pt(Xe,B("custom/gf-interpolation-step-before.svg")),pt(dt,B("custom/gf-logs.svg")),pt(gt,B("custom/gf-movepane-left.svg")),pt(vt,B("custom/gf-movepane-right.svg")),pt(Et,B("mono/favorite.svg")),pt(Nt,B("mono/grafana.svg")),pt(Dt,B("mono/heart.svg")),pt(Lt,B("mono/heart-break.svg")),pt(Ht,B("mono/panel-add.svg")),pt(Rt,B("mono/library-panel.svg")),pt(Ot,B("unicons/record-audio.svg"))}var Yt=e(91977);function un(B){const V=B.target instanceof Element&&rn(B.target);if(!(B.ctrlKey||B.metaKey||B.defaultPrevented)&&V){let j=V.getAttribute("href");const ie=V.getAttribute("target");if(j&&!ie){const ye=Yt.Cj.parseKeyValue(j.split("?")[1]),Se=ye.orgId&&Number(ye.orgId)!==z.config.bootData.user.orgId;if((0,M.GQ)("utils",!1,"intercepting link click",B),B.preventDefault(),j=O.u.stripBaseFromUrl(j),j[0]!=="/"||Se)if(j.indexOf("://")>0||j.indexOf("mailto:")===0||Se){window.location.href=j;return}else if(j.indexOf("#")===0){window.location.hash=j;return}else j=`/${j}`;M.E1.push(j)}}}function rn(B){for(;B!==null&&B.tagName;){if(B.tagName.toUpperCase()==="A")return B;B=B.parentElement}return null}var Zt=e(90172);function pn(B,...V){const j=(0,or.connect)(...V)(B);return ie=>s.createElement(j,{...ie,store:Na.h})}function nn(B,...V){const j=(0,or.connect)(...V)(B);return ie=>s.createElement(or.Provider,{store:Na.h},s.createElement(j,{...ie,store:Na.h}))}const bn=nn(B=>s.createElement(s.Fragment,null,s.createElement(tl.$i,{...B},s.createElement(tl.Y0,null))));class qn{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,y.s)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){nr.Z.subscribe(Br.VJ,V=>this.showConfirmModal(V.payload)),nr.Z.subscribe(Br.Dn,V=>this.showModalReact(V.payload)),nr.Z.subscribe(x.EK,V=>(0,Zt.bY)(V.payload))}showModalReact(V){const{component:j,props:ie}=V,ye={component:j,props:{...ie,isOpen:!0,onDismiss:this.onReactModalDismiss}},Se=s.createElement((0,Al.E)(bn,Z.config.theme2),ye);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Se)}showConfirmModal(V){const{confirmText:j,onConfirm:ie=()=>{},onDismiss:ye,text2:Se,altActionText:we,onAltAction:He,noText:Qe,text:rt,text2htmlBind:ht,yesText:bt="Yes",icon:Wt,title:Bt="Confirm",yesButtonVariant:It}=V,Gt={confirmText:bt,confirmButtonVariant:It,confirmationText:j,icon:Wt,title:Bt,body:rt,description:Se&&ht?Fc.QX.sanitize(Se):Se,isOpen:!0,dismissText:Qe,onConfirm:()=>{ie(),this.onReactModalDismiss()},onDismiss:()=>{ye?.(),this.onReactModalDismiss()},onAlternative:He?()=>{He(),this.onReactModalDismiss()}:void 0,alternativeText:we},mn={component:al.s,props:Gt},pa=s.createElement((0,Al.E)(bn,Z.config.theme2),mn);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(pa)}}class Qn{constructor(V){this.hasUpdates=!1,this.checked=Date.now(),this.prevLocationPath="",this.interval=V??1e3*60*5}start(){const V=(0,jc.gj)();V&&V.getConnectionState().subscribe(j=>{j&&this._checkForUpdates()}),M.E1.getHistory().listen(this.locationUpdated.bind(this)),this.prevLocationPath=M.E1.getLocation().pathname}locationUpdated(V){if(this.prevLocationPath===V.pathname)return;const j=V.pathname.split("/");j[1]==="/"&&this.prevLocationPath!=="/"?this.reloadIfUpdateDetected():j[1]==="d"?this.reloadIfUpdateDetected():this.hasUpdates&&(0,ir.ff)("new_frontend_assets_reload_ignored",{newLocation:V.pathname,prevLocation:this.prevLocationPath}),this.prevLocationPath=V.pathname}async _checkForUpdates(){if(this.hasUpdates||Date.now()-this.checked<this.interval)return;this.checked=Date.now();const V=this.previous,j=await(0,R.i)().get("/api/frontend/assets");V&&!(0,p.isEqual)(V,j)&&(this.hasUpdates=!0,(0,ir.ff)("new_frontend_assets_detected",{assets:V.assets!==j.assets,plugins:V.plugins!==j.plugins,version:V.version!==j.version,flags:V.flags!==j.flags})),this.previous=j}reloadIfUpdateDetected(){this.hasUpdates&&((0,ir.ff)("new_frontend_assets_reload",{}),window.location.reload()),this._checkForUpdates()}}var Rn=e(41327),Hn=e(56634),Ca=e(56586);function na(B,V=!1){return new Promise(j=>{const ie=document.createElement("script");ie.onload=j,ie.src=B,ie.async=V,document.head.appendChild(ie)})}const Ua=(0,Hn.h)("EchoSrv"),Ma=Ua.logger;(0,Ca.x)("echo",void 0,Ua);class wa{constructor(V){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const j of this.backends)j.flush()},this.addBackend=j=>{Ma("Adding backend",!1,j),this.backends.push(j)},this.addEvent=(j,ie)=>{const ye=this.getMeta(),Se={...j,meta:{...ye,...ie}};for(const we of this.backends)(we.supportedEvents.length===0||we.supportedEvents.indexOf(Se.type)>-1)&&we.addEvent(Se);Ma(`${j.type} event`,!1,{...j.payload,meta:Se.meta})},this.getMeta=()=>({sessionId:"",userId:Ba.contextSrv.user.id,userLogin:Ba.contextSrv.user.login,userSignedIn:Ba.contextSrv.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...V},setInterval(this.flush,this.config.flushInterval)}}const ea=(B,V)=>{(0,w.RP)().addEvent({type:w.ee.Performance,payload:{name:B,value:V}})},Cn=B=>faro?.api?.pushError(B);class Yn{constructor(V){this.options=V,this.buffer=[],this.supportedEvents=[w.ee.Performance],this.addEvent=j=>{this.buffer.push(j.payload)},this.flush=()=>{this.buffer.length!==0&&(Rn.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var ca=e(21057);class Jn{constructor(V){this.options=V,this.supportedEvents=[w.ee.Pageview,w.ee.Interaction],this.addEvent=ye=>{window.applicationInsights&&((0,ca.Si)(ye)&&window.applicationInsights.trackPageView?.(),(0,ca.fV)(ye)&&window.applicationInsights.trackEvent?.({name:ye.payload.interactionName,properties:ye.payload.properties}))},this.flush=()=>{};const j={config:{connectionString:V.connectionString,endpointUrl:V.endpointUrl}};na("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const ye=new window.Microsoft.ApplicationInsights.ApplicationInsights(j);window.applicationInsights=ye.loadAppInsights()})}}class Pa{constructor(V){this.options=V,this.supportedEvents=[w.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=ye=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:ye.payload.page})},this.flush=()=>{};const j=`https://www.googletagmanager.com/gtag/js?id=${V.googleAnalyticsId}`;na(j,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const ie={page_path:window.location.pathname};V.user&&(ie.user_id=V.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=V.googleAnalytics4SendManualPageViews,window.gtag("config",V.googleAnalyticsId,ie)}}class Ia{constructor(V){this.options=V,this.supportedEvents=[w.ee.Pageview],this.trackedUserId=null,this.addEvent=ye=>{if(!window.ga)return;window.ga("set",{page:ye.payload.page}),window.ga("send","pageview");const{userSignedIn:Se,userId:we}=ye.meta;Se&&we!==this.trackedUserId&&(this.trackedUserId=we,window.ga("set","userId",we))},this.flush=()=>{};const j=`https://www.google-analytics.com/analytics${V.debug?"_debug":""}.js`;na(j);const ie=window.ga=window.ga||function(){(ie.q=ie.q||[]).push(arguments)};ie.l=+new Date,ie("create",V.googleAnalyticsId,"auto"),ie("set","anonymizeIp",!0)}}class xa{constructor(V){this.options=V,this.supportedEvents=[w.ee.Pageview,w.ee.Interaction,w.ee.ExperimentView],this.addEvent=Se=>{window.rudderanalytics&&((0,ca.Si)(Se)&&window.rudderanalytics.page?.(),(0,ca.fV)(Se)&&window.rudderanalytics.track?.(Se.payload.interactionName,Se.payload.properties),(0,ca.mR)(Se)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:Se.payload.experimentId,experiment_group:Se.payload.experimentGroup,experiment_variant:Se.payload.experimentVariant}))},this.flush=()=>{};const j=V.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";na(j);const ie=window.rudderanalytics=[],ye=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let Se=0;Se<ye.length;Se++){const we=ye[Se];ie[we]=function(He){return function(){ie.push([He].concat(Array.prototype.slice.call(arguments)))}}(we)}if(window.rudderanalytics?.load?.(V.writeKey,V.dataPlaneUrl,{configUrl:V.configUrl,destSDKBaseURL:V.integrationsUrl}),V.user){const{identifier:Se,intercomIdentifier:we}=V.user.analytics,He={};we&&(He.Intercom={user_hash:we}),window.rudderanalytics?.identify?.(Se,{email:V.user.email,orgId:V.user.orgId,language:V.user.language,version:V.buildInfo.version,edition:V.buildInfo.edition},He)}}}var yn=e(56782),Fn=e(3067),Kn=e(81426),ya=e(98177),ba=e(18676),Ra=e(45925),Wa=e(68101);class Bs extends Wa.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=Z.config.buildInfo.version}send(V){(0,w.RP)().addEvent({type:w.ee.GrafanaJavascriptAgent,payload:V})}isBatched(){return!0}getIgnoreUrls(){return[]}}class gs{constructor(V){this.options=V,this.supportedEvents=[w.ee.GrafanaJavascriptAgent],this.addEvent=Se=>{},this.flush=()=>{};const j=[],ie=[new Bs];V.customEndpoint&&ie.push(new yn.V({url:V.customEndpoint,apiKey:V.apiKey})),V.errorInstrumentalizationEnabled&&j.push(new Fn.w),V.consoleInstrumentalizationEnabled&&j.push(new Kn.J),V.webVitalsInstrumentalizationEnabled&&j.push(new ya.P),j.push(new ba.p);const ye={globalObjectKey:V.globalObjectKey||"faro",preventGlobalExposure:V.preventGlobalExposure||!1,app:{version:V.buildInfo.version,environment:V.buildInfo.env},instrumentations:j,transports:ie,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],sessionTracking:{persistent:!0},batching:{sendTimeout:1e3}};this.faroInstance=(0,Ra.p)(ye),V.user&&this.faroInstance.api.setUser({id:V.user.id,attributes:{orgId:String(V.user.orgId)||""}})}}var ar=e(48542),Ks=e.n(ar),Vo=e(34645),Xo=e(92245),vi=e(82866),Ur=e(69760),to=e(64878);function lr(B){return()=>{const V=document.querySelectorAll(":hover");for(let j=V.length-1;j>0;j--){const ie=V[j];ie instanceof HTMLElement&&ie.dataset?.panelid&&B(parseInt(ie.dataset?.panelid,10))}}}class Ps{constructor(V,j){this.locationService=V,this.chromeService=j}clearAndInitGlobalBindings(V){Ks().reset(),V.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,El.X)(!1)),this.bind("c r",()=>(0,El.X)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const j=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(j&&j instanceof HTMLElement&&(j.nodeName==="INPUT"||j.nodeName==="TEXTAREA"||j.hasAttribute("data-slate-editor"))){j.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){nr.Z.publish(new Br.Dn({component:Nd.B}))}exit(){const V=this.locationService.getSearchObject();if(V.editview){this.locationService.partial({editview:null,editIndex:null});return}if(V.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(V.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(V.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:j}=this.chromeService.state.getValue();j&&this.chromeService.exitKioskMode(),V.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(V,j){Ks().bind(V,ie=>{ie.preventDefault(),ie.stopPropagation(),ie.returnValue=!1,j.call(this)},"keydown")}bindGlobal(V,j){Ks().bindGlobal(V,ie=>{ie.preventDefault(),ie.stopPropagation(),ie.returnValue=!1,j.call(this)},"keydown")}unbind(V,j){Ks().unbind(V,j)}bindWithPanelId(V,j){this.bind(V,lr(j))}setupTimeRangeBindings(V=!0){this.bind("t a",()=>{nr.Z.publish(new Br.QI({updateUrl:V}))}),this.bind("t z",()=>{nr.Z.publish(new Br.p8({scale:2,updateUrl:V}))}),this.bind("ctrl+z",()=>{nr.Z.publish(new Br.p8({scale:2,updateUrl:V}))}),this.bind("t left",()=>{nr.Z.publish(new Br.Qt({direction:Br.Im.Left,updateUrl:V}))}),this.bind("t right",()=>{nr.Z.publish(new Br.Qt({direction:Br.Im.Right,updateUrl:V}))})}setupDashboardBindings(V){this.bind("mod+o",()=>{V.graphTooltip=(V.graphTooltip+1)%3,V.events.publish(new fi.oi),V.startRefresh()}),this.bind("mod+s",()=>{V.meta.canSave&&nr.Z.publish(new Br.Dn({component:Ur.d,props:{dashboard:V}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",j=>{if(V.canEditPanelById(j)){const ie=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:ie?null:j})}}),this.bindWithPanelId("v",j=>{const ie=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:ie?null:j})}),this.bindWithPanelId("p l",j=>{const ie=V.getPanelById(j),ye={...ie.options};ye.legend.showLegend?ye.legend.showLegend=!1:ye.legend.showLegend=!0,ie.updateOptions(ye)}),this.bindWithPanelId("i",j=>{this.locationService.partial({inspect:j})}),Za.Vt.hasAccessToExplore()&&this.bindWithPanelId("p x",async j=>{const ie=V.getPanelById(j),ye=await(0,vi.H6)({queries:ie.targets,dsRef:ie.datasource,scopedVars:ie.scopedVars,timeRange:(0,jo.$t)().timeRange()});if(ye){const Se=O.u.stripBaseFromUrl(ye);Se&&this.locationService.push(Se)}}),this.bindWithPanelId("p r",j=>{V.canEditPanelById(j)&&!(V.panelInView||V.panelInEdit)&&nr.Z.publish(new Br.Eb(j))}),this.bindWithPanelId("p d",j=>{if(V.canEditPanelById(j)){const ie=V.getPanelInfoById(j).index;V.duplicatePanel(V.panels[ie])}}),this.bindWithPanelId("p s",j=>{const ie=V.getPanelInfoById(j);nr.Z.publish(new Br.Dn({component:to.ShareModal,props:{dashboard:V,panel:ie?.panel}}))}),this.bind("d l",()=>{V.toggleLegendsForAll()}),this.bind("d x",()=>{V.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{V.collapseRows()}),this.bind("d shift+e",()=>{V.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{V.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const ie=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+ie})}}function oo(B){if(performance)try{performance.mark(`${B}_started`)}catch(V){console.error(`[Metrics] Failed to startMeasure ${B}`,V)}}function no(B){if(performance)try{const V=`${B}_started`,j=`${B}_completed`,ie=`${B}_measured`;performance.mark(j);const ye=performance.measure(ie,V,j);ea(`${B}_ms`,ye.duration),performance.clearMarks(V),performance.clearMarks(j),performance.clearMeasures(ie)}catch(V){console.error(`[Metrics] Failed to stopMeasure ${B}`,V)}}async function td(){if(window.location.search.indexOf("why-render")!==-1){const{default:B}=await e.e(3338).then(e.t.bind(e,83338,23));B(React,{trackAllPureComponents:!0})}}var Nl=e(65824),Kv=e(73293),Vv=e(75759),_v=e(35389),MD=e(930),nd=e(18748),$v=e(86687),zv=e(84024),kv=e(67034);const Hv=()=>new kv.q(new URL(e.p+e.u(9601),e.b));var Gv=e(71156),tv=e(51517);const jv=B=>new Gv.y(V=>{const j=B.subscribe(nd.sj(ie=>{V.next(ie)}),nd.sj(ie=>{V.error(ie)}),nd.sj(()=>{V.complete()}));return{unsubscribe:()=>{j.then(ie=>ie.unsubscribe())}}}),kh=B=>(0,Yr.D)(B).pipe((0,tv.w)(V=>jv(V)));class Qv{constructor(V){this.getConnectionState=()=>kh(this.centrifugeWorker.getConnectionState()),this.getDataStream=j=>kh(this.centrifugeWorker.getDataStream(j)).pipe((0,$v.Q)(zv.z)),this.getQueryData=async j=>{const ie=JSON.parse(JSON.stringify(j));return this.centrifugeWorker.getQueryData(ie)},this.getPresence=j=>this.centrifugeWorker.getPresence(j),this.getStream=j=>kh(this.centrifugeWorker.getStream(j)),this.centrifugeWorker=nd.Ud(Hv()),this.centrifugeWorker.initialize(V,nd.sj(V.dataStreamSubscriberReadiness))}}var nv=e(55739),Yv=e(4230),Zv=e(67609),av=e(65821),Nu=e(5573);class Jv{constructor(V){this.deps=V,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=j=>{let ie;const ye=Se=>{const we=Se.data[0];if(!ie&&!(0,Nu.A1)(we,Nu.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${we?.type}`);return}switch(we.type){case Nu.g0.FullFrame:{ie=nv.Av.deserialize(we.frame);return}case Nu.g0.NewValuesSameSchema:{ie.pushNewValues(we.values);return}}};return this.deps.centrifugeSrv.getDataStream(j).pipe((0,hn.U)(Se=>(ye(Se),{...Se,data:[ie??nv.Av.empty()]})))},this.getStream=j=>this.deps.centrifugeSrv.getStream(j),this.getQueryData=j=>(0,Yr.D)(this.deps.centrifugeSrv.getQueryData(j)).pipe((0,tv.w)(ie=>{const ye=(0,Zv.z1)(ie,j.request.targets);return ye.data?.length&&ye.data.find(we=>we.meta?.channel)?(0,av.B9)(ye,j.request,av.PI):(0,sa.of)(ye)})),this.publish=async(j,ie)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,Yv.Aj)(j),data:ie}),this.getPresence=j=>this.deps.centrifugeSrv.getPresence(j)}}function Xv(){const B={appUrl:`${window.location.origin}${Z.config.appSubUrl}`,orgId:Ba.contextSrv.user.orgId,orgRole:Ba.contextSrv.user.orgRole,liveEnabled:Z.config.liveEnabled,dataStreamSubscriberReadiness:Kv.A.ok.asObservable(),grafanaAuthToken:(0,Vv.v)()},V=Z.config.featureToggles["live-service-web-worker"]?new Qv(B):new _v.R(B);(0,jc.cA)(new Jv({centrifugeSrv:V,backendSrv:(0,R.i)()}))}function xD(){return getGrafanaLiveSrv()}var qv=e(76757),e0=e(66883),Js=e(89154);function TD(B,V="extension is not a link extension"){if(!isPluginExtensionLink(B))throw new Error(V)}function OD(B,V="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(B))throw new Error(V)}function sv(B,V){if(!s0(B,V))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${B}/" (currently: "${V}"). Skipping the extension.`)}function rv(B){if(!c0(B))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function t0(B){if(!r0(B))throw new Error(`Invalid extension "${B.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${B.extensionPointId}"). Skipping the extension.`)}function n0(B){if(!o0(B))throw new Error(`Invalid extension "${B.title}". The "configure" property must be a function. Skipping the extension.`)}function ov(B,V){for(const j of V)if(!i0(B[j]))throw new Error(`Invalid extension "${B.title}". Property "${j}" must be a string and cannot be empty. Skipping the extension.`)}function a0(B,V="The provided value is a Promise."){if(iv(B))throw new Error(V)}function s0(B,V){return!!(typeof V=="string"&&V.length>0&&V.startsWith(`/a/${B}/`))}function r0(B){return!!(B.extensionPointId?.startsWith("grafana/")||B.extensionPointId?.startsWith("plugins/"))}function o0(B){return B.configure?typeof B.configure=="function":!0}function i0(B){return typeof B=="string"&&B.length>0}function l0(B,V){try{if(ov(V,["title","description","extensionPointId"]),t0(V),(0,Js.IX)(V)){if(n0(V),!V.path&&!V.onClick)return(0,Js.KE)(`Invalid extension "${V.title}". Either "path" or "onClick" is required.`),!1;V.path&&sv(B,V.path)}return(0,Js.eP)(V)&&rv(V.component),!0}catch(j){return j instanceof Error&&(0,Js.KE)(j.message),!1}}function iv(B){return B instanceof Promise||typeof B=="object"&&B!==null&&"then"in B&&"catch"in B}function c0(B){const V=ie=>typeof ie=="object"&&ie!==null&&"$$typeof"in ie;return typeof B=="function"||(ie=>V(ie)&&ie.$$typeof===Symbol.for("react.memo"))(B)}function d0(B){const V={};for(const{pluginId:j,extensionConfigs:ie,error:ye}of B){if(ye){(0,Js.KE)(`"${j}" plugin failed to load, skip registering its extensions.`);continue}for(const Se of ie){const{extensionPointId:we}=Se;if(!Se||!l0(j,Se))continue;let He={config:Se,pluginId:j};Array.isArray(V[we])?V[we].push(He):V[we]=[He]}}return(0,Js._A)(V)}var lv=e(15359),u0=e(93372),m0=e(42593),f0=e(50020);function g0(){try{return[(0,Js.CR)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",extensionPointId:Qo.y.ExploreToolbarAction,icon:"apps",category:"Dashboards",configure:()=>{if(Za.Vt.hasPermission(vn.AccessControlAction.DashboardsCreate)||Za.Vt.hasPermission(vn.AccessControlAction.DashboardsWrite))return{}},onClick:(B,{context:V,openModal:j})=>{j({title:(0,f0.k)(),body:({onDismiss:ie})=>s.createElement(m0.U,{onClose:ie,exploreId:V?.exploreId})})}}),(0,Js.CR)({title:"Add correlation",description:"Create a correlation from this query",extensionPointId:Qo.y.ExploreToolbarAction,icon:"link",configure:B=>B?.shouldShowAddCorrelation?{}:void 0,onClick:(B,{context:V})=>{(0,Na.WI)((0,lv.Hg)({editorMode:!0})),(0,Na.WI)((0,u0.aA)({exploreId:V.exploreId}))}})]}catch(B){return(0,Js.KE)(`Could not configure extensions for Explore due to: "${B}"`),[]}}function h0(){return[...g0()]}const p0=({context:B,extensionPointId:V,limitPerPlugin:j,registry:ie})=>{const ye=B?(0,Js.fD)(B):{},Se=ie[V]??[],we=[],He={};for(const Qe of Se)try{const rt=Qe.config,{pluginId:ht}=Qe;if(j&&He[ht]>=j)continue;if(He[ht]===void 0&&(He[ht]=0),(0,Js.IX)(rt)){const bt=v0(ht,rt,ye);if(rt.configure&&bt===void 0)continue;const Wt=bt?.path||rt.path,Bt={id:(0,Js.lu)(ht,rt),type:Qo.D.link,pluginId:ht,onClick:E0(ht,rt,ye),icon:bt?.icon||rt.icon,title:bt?.title||rt.title,description:bt?.description||rt.description,path:(0,p.isString)(Wt)?y0(ht,Wt,rt):void 0,category:bt?.category||rt.category};we.push(Bt),He[ht]+=1}if((0,Js.eP)(rt)){rv(rt.component);const bt={id:(0,Js.lu)(Qe.pluginId,rt),type:Qo.D.component,pluginId:Qe.pluginId,title:rt.title,description:rt.description,component:(0,Js.DQ)(ht,rt.component)};we.push(bt),He[ht]+=1}}catch(rt){rt instanceof Error&&(0,Js.KE)(rt.message)}return{extensions:we}};function v0(B,V,j){try{const ie=V.configure?.(j);if(ie===void 0)return;let{title:ye=V.title,description:Se=V.description,path:we=V.path,icon:He=V.icon,category:Qe=V.category,...rt}=ie;return a0(ie,`The configure() function for "${V.title}" returned a promise, skipping updates.`),we&&sv(B,we),ov({title:ye,description:Se},["title","description"]),Object.keys(rt).length>0&&(0,Js.KE)(`Extension "${V.title}", is trying to override restricted properties: ${Object.keys(rt).join(", ")} which will be ignored.`),{title:ye,description:Se,path:we,icon:He,category:Qe}}catch(ie){ie instanceof Error&&(0,Js.KE)(ie.message);return}}function E0(B,V,j){const{onClick:ie}=V;if(ie)return function(Se){try{(0,ir.ff)("ui_extension_link_clicked",{pluginId:B,extensionPointId:V.extensionPointId,title:V.title,category:V.category});const we=ie(Se,(0,Js.Ch)(B,j));iv(we)&&we.catch(He=>{He instanceof Error&&(0,Js.KE)(He.message)})}catch(we){we instanceof Error&&(0,Js.KE)(we.message)}}}function y0(B,V,j){return Yt.Cj.appendQueryToUrl(V,Yt.Cj.toUrlParams({uel_pid:B,uel_epid:j.extensionPointId}))}var cv=e(33521);async function D0(B={}){oo("frontend_plugins_preload");const V=Object.values(B).filter(ie=>ie.preload),j=await Promise.all(V.map(C0));return no("frontend_plugins_preload"),j}async function C0(B){const{path:V,version:j,id:ie}=B;try{oo(`frontend_plugin_preload_${ie}`);const{plugin:ye}=await dl.N$({path:V,version:j,isAngular:B.angular.detected,pluginId:ie}),{extensionConfigs:Se=[]}=ye;return(0,uc.a)(ie),{pluginId:ie,extensionConfigs:Se}}catch(ye){return console.error(`[Plugins] Failed to preload plugin: ${V} (version: ${j})`,ye),{pluginId:ie,extensionConfigs:[],error:ye}}finally{no(`frontend_plugin_preload_${ie}`)}}var b0=e(37153),P0=e(4681),dv=e(44343),uv=e(17201),S0=e(64879),M0=e(83019),Hh=e(60630);class x0{constructor(){this.subject=new b0.t(1)}get(){return this.subject.asObservable()}run(V){const{queries:j,timezone:ie,datasource:ye,panelId:Se,app:we,dashboardUID:He,timeRange:Qe,timeInfo:rt,cacheTimeout:ht,queryCachingTTL:bt,maxDataPoints:Wt,scopedVars:Bt,minInterval:It}=V;this.subscription&&this.subscription.unsubscribe();const Gt={app:we??dv.zj.Unknown,requestId:(0,S0.t)(),timezone:ie,panelId:Se,dashboardUID:He,range:Qe,timeInfo:rt,interval:"",intervalMs:0,targets:(0,p.cloneDeep)(j),maxDataPoints:Wt,scopedVars:Bt||{},cacheTimeout:ht,queryCachingTTL:bt,startTime:Date.now()};Gt.rangeRaw=Qe.raw,(0,Yr.D)(T0(ye,Gt.scopedVars)).pipe((0,P0.P)()).subscribe({next:mn=>{Gt.targets=Gt.targets.map(da=>(da.datasource||(da.datasource=mn.getRef()),da));const pa=It?(0,ke.J)().replace(It,Gt.scopedVars):mn.interval,Sa=uv.calculateInterval(Qe,Wt,pa);Gt.scopedVars=Object.assign({},Gt.scopedVars,{__interval:{text:Sa.interval,value:Sa.interval},__interval_ms:{text:Sa.intervalMs.toString(),value:Sa.intervalMs}}),Gt.interval=Sa.interval,Gt.intervalMs=Sa.intervalMs,this.subscription=(0,Hh.v7)(mn,Gt).subscribe({next:da=>{const $a=(0,yr.zR)(da,this.lastResult);this.lastResult=(0,M0.C)($a,this.lastResult),this.subject.next(this.lastResult)}})},error:mn=>console.error("PanelQueryRunner Error",mn)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===er.Gu.Loading&&this.subject.next({...this.lastResult,state:er.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function T0(B,V){return B&&"query"in B?B:(0,c.ak)().get(B,V)}function O0(){window.grafanaRuntime={getDashboardSaveModel:()=>{const B=(0,d.h4)().getCurrent();if(B)return B.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const B=(0,jo.$t)().timeRange();return{from:B.from.valueOf(),to:B.to.valueOf(),raw:B.raw}},getPanelData:()=>{const B=(0,d.h4)().getCurrent();if(B)return B.panels.reduce((V,j)=>(V[j.id]=j.getQueryRunner().getLastResult(),V),{})}}}var I0=e(84265),ad=e(73731),fa=e(77378),mv=e(44992),fv=e(79228),_o=e(66426),qo=e(6832);function gv(B){return B.extended&&"infoText"in B.extended?B.extended:null}function hv(B){return B.extended&&"dataSourceTypes"in B.extended?B.extended:null}function Gh(B){return B.extended&&"dataSource"in B.extended?B.extended:null}var es=e(99282),sd=e(97285);const R0=(B,V)=>{const{rootStateKey:j}=V.variable;if(!j)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:gv(qo.PF)};const{editor:ie}=(0,es.AE)(j,B);return{extended:gv(ie)}},A0={changeVariableDatasource:sd.Z$},L0=(0,or.connect)(R0,A0);class B0 extends s.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=V=>{this.props.changeVariableDatasource((0,fa.yQ)(this.props.variable),(0,mv.iU)(V))}}componentDidMount(){const{rootStateKey:V}=this.props.variable;if(!V){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:V,extended:j}=this.props,ie=j?.infoText??null;return s.createElement(s.Fragment,null,s.createElement(_o.e,null,"Ad-hoc options"),s.createElement(ui.g,{label:"Data source",htmlFor:"data-source-picker"},s.createElement(fv.q,{current:V.datasource,onChange:this.onDatasourceChanged,width:30,variables:!0,noDefault:!0})),ie?s.createElement(Dr.b,{title:ie,severity:"info"}):null)}}const w0=L0(B0);var U0=e(70666);const N0={addFilter:sd.KJ,removeFilter:sd.ku,changeFilter:sd.M6},W0=(0,or.connect)(null,N0);class F0 extends s.PureComponent{constructor(){super(...arguments),this.addFilter=V=>{this.props.addFilter((0,fa.yQ)(this.props.variable),V)},this.removeFilter=V=>{this.props.removeFilter((0,fa.yQ)(this.props.variable),V)},this.changeFilter=(V,j)=>{this.props.changeFilter((0,fa.yQ)(this.props.variable),{index:V,filter:j})}}render(){const{filters:V,datasource:j,baseFilters:ie}=this.props.variable;return s.createElement(U0.F,{datasource:j,filters:V,baseFilters:ie,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const pv=W0(F0);pv.displayName="AdHocPicker";var vv=e(30017);const K0=B=>B.map(V=>z0(V).map(_0).join("|")),V0=B=>{if((0,p.isArray)(B))return B.map(Ev).filter(k0);const V=Ev(B);return V===null?[]:[V]};function _0(B){return B==null?"":/\|/g[Symbol.replace](B,"__gfp__")}function $0(B){return B==null?"":/__gfp__/g[Symbol.replace](B,"|")}function z0(B){return[B.key,B.operator,B.value]}function Ev(B){if(!(0,p.isString)(B)||B.length===0)return null;const V=B.split("|").map($0);return{key:V[0],operator:V[1],value:V[2]}}function k0(B){return B!==null&&(0,p.isString)(B.value)}const yv=async()=>{},H0=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:vv.Js,reducer:vv.jo,picker:pv,editor:w0,dependsOn:()=>!1,setValue:yv,setValueFromUrl:async(B,V)=>{const j=V0(V);await(0,Na.WI)((0,sd.Ue)((0,fa.yQ)(B),j))},updateOptions:yv,getSaveModel:B=>{const{index:V,id:j,state:ie,global:ye,rootStateKey:Se,...we}=(0,p.cloneDeep)(B);return we},getValueForUrl:B=>{const V=B?.filters??[];return K0(V)}});var Dv=e(51158),G0=e(11550),xr=e(46769),Us=e(36138),jh=e(94557),Cv=e(27005),j0=e(26722),Wu=e(74534),Q0=e(60711),Y0=e(50014),Z0=e(56183),J0=e(30914),X0=e(79117),Xs=e(43773),hs=e(51099),rd=e(3374),zs=e(7257);const q0={...zs.Eg,type:"query",datasource:null,query:"",regex:"",sort:zs.$U.disabled,refresh:zs.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},eE=(B,V)=>{if(V===zs.$U.disabled)return B;const j=Math.ceil(V/2),ie=V%2===0;return j===1?B=(0,p.sortBy)(B,"text"):j===2?B=(0,p.sortBy)(B,ye=>{if(!ye.text)return-1;const Se=ye.text.match(/.*?(\d+).*/);return!Se||Se.length<2?-1:parseInt(Se[1],10)}):j===3?B=(0,p.sortBy)(B,ye=>(0,p.toLower)(ye.text)):j===4&&B.sort((ye,Se)=>ye.text?Se.text?ye.text.localeCompare(Se.text,void 0,{numeric:!0}):1:-1),ie&&(B=B.reverse()),B},tE=(B,V)=>{const j=[];let ie=null;V.lastIndex=0;do ie=V.exec(B),ie&&j.push(ie);while(V.global&&ie&&ie[0]!==""&&ie[0]!==void 0);return j},nE=(B,V,j)=>{let ie,ye=[];B&&(ie=(0,Ka.jO)(B));for(let Se=0;Se<j.length;Se++){const we=j[Se];let He=we.text===void 0||we.text===null?we.value:we.text,Qe=we.value===void 0||we.value===null?we.text:we.value;if((0,p.isNumber)(Qe)&&(Qe=Qe.toString()),(0,p.isNumber)(He)&&(He=He.toString()),ie){const rt=tE(Qe,ie);if(!rt.length)continue;const ht=rt.find(It=>It.groups&&It.groups.value),bt=rt.find(It=>It.groups&&It.groups.text),Wt=rt.find(It=>It.length>1),Bt=rt.length>1&&Wt;if(ht||bt)Qe=ht?.groups?.value??bt?.groups?.text,He=bt?.groups?.text??ht?.groups?.value;else if(Bt){for(let It=0;It<rt.length;It++){const Gt=rt[It];ye.push({text:Gt[1],value:Gt[1],selected:!1})}continue}else Wt&&(He=Wt[1],Qe=Wt[1])}ye.push({text:He,value:Qe,selected:!1})}return ye=(0,p.uniqBy)(ye,"value"),eE(ye,V)},bv=(0,bo.oM)({name:"templating/query",initialState:rd.s,reducers:{updateVariableOptions:(B,V)=>{const{results:j,templatedRegex:ie}=V.payload.data,ye=(0,es.ir)(B,V.payload.id);if(ye.type!=="query")return;const{includeAll:Se,sort:we}=ye,He=nE(ie,we,j);Se&&He.unshift({text:xr.xk,value:xr.r2,selected:!1}),He.length||He.push({text:xr.BH,value:xr.QX,isNone:!0,selected:!1}),ye.options=He}}}),aE=bv.reducer,{updateVariableOptions:sE}=bv.actions;function rE(){return B=>B.pipe((0,hn.U)(oE))}function oE(B){const V=B.series;if(!V||!V.length)return[];if(cE(V))return V;const j=(0,yr.F9)(V),ie=[];let ye=-1,Se=-1,we=-1,He=-1;for(const Qe of j)for(let rt=0;rt<Qe.fields.length;rt++){const ht=Qe.fields[rt],bt=(0,ne.CZ)(ht,Qe,V).toLowerCase();ht.type===H.fS.string&&we===-1&&(we=rt),bt==="text"&&ht.type===H.fS.string&&Se===-1&&(Se=rt),bt==="value"&&ht.type===H.fS.string&&ye===-1&&(ye=rt),bt==="expandable"&&(ht.type===H.fS.boolean||ht.type===H.fS.number)&&He===-1&&(He=rt)}if(we===-1)throw new Error("Couldn't find any field of type string in the results.");for(const Qe of j)for(let rt=0;rt<Qe.length;rt++){const ht=He!==-1?Qe.fields[He].values[rt]:void 0,bt=Qe.fields[we].values[rt],Wt=Se!==-1?Qe.fields[Se].values[rt]:null,Bt=ye!==-1?Qe.fields[ye].values[rt]:null;if(ye===-1&&Se===-1){ie.push({text:bt,value:bt,expandable:ht});continue}if(ye===-1&&Se!==-1){ie.push({text:Wt,value:Wt,expandable:ht});continue}if(ye!==-1&&Se===-1){ie.push({text:Bt,value:Bt,expandable:ht});continue}ie.push({text:Wt,value:Bt,expandable:ht})}return ie}function iE(B){return V=>V.pipe((0,hn.U)(j=>{const{variable:ie,dispatch:ye,getTemplatedRegexFunc:Se}=B;if(!ie.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const we=Se(ie),He=(0,fa.Y6)(ie,{results:j,templatedRegex:we});ye((0,hs.mb)(ie.rootStateKey,sE(He)))}))}function lE(B){return V=>V.pipe((0,Cr.z)(()=>{const{dispatch:j,variable:ie,searchFilter:ye}=B;return ye?(0,sa.of)():(0,Yr.D)(j((0,Xs.xQ)((0,fa.yQ)(ie))))}))}function cE(B){if(!B)return!1;if(!B.length)return!0;const V=B[0];if((0,yr.aY)(V))return!1;for(const j in V){if(!V.hasOwnProperty(j)||V[j]!==null&&typeof V[j]!="string"&&typeof V[j]!="number")continue;const ie=j.toLowerCase();if(ie==="text"||ie==="value")return!0}return!1}var Fu=e(90927),dE=e(5333);class uE{constructor(){this.runners=[new mE,new fE,new gE,new pE]}getRunnerForDatasource(V){const j=this.runners.find(ie=>ie.canRun(V));if(j)return j;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class mE{constructor(){this.type=Fu.j2.Legacy}canRun(V){return(0,Us.R)(V)}getTarget({datasource:V,variable:j}){if((0,Us.R)(V))return j.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:V,variable:j,searchFilter:ie,timeSrv:ye},Se){if(!(0,Us.R)(V))return od();const we=(0,fa.AQ)(j,ie,ye,Se.scopedVars);return(0,Yr.D)(V.metricFindQuery(j.query,we)).pipe((0,Cr.z)(He=>{if(!He||!He.length)return od();const Qe=He;return(0,sa.of)({series:Qe,state:er.Gu.Done,timeRange:we.range})}))}}class fE{constructor(){this.type=Fu.j2.Standard}canRun(V){return(0,Us.Ju)(V)}getTarget({datasource:V,variable:j}){if((0,Us.Ju)(V))return V.variables.toDataQuery(j.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:V,runRequest:j},ie){return(0,Us.Ju)(V)?V.variables.query?j(V,ie,V.variables.query.bind(V.variables)):j(V,ie):od()}}class gE{constructor(){this.type=Fu.j2.Custom}canRun(V){return(0,Us.d7)(V)}getTarget({datasource:V,variable:j}){if((0,Us.d7)(V))return j.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:V,runRequest:j},ie){return(0,Us.d7)(V)?j(V,ie,V.variables.query.bind(V.variables)):od()}}const hE="variable-query";class pE{constructor(){this.type=Fu.j2.Datasource}canRun(V){return(0,Us.X7)(V)}getTarget({datasource:V,variable:j}){if((0,Us.X7)(V))return{...j.query,refId:j.query.refId??hE};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:V,runRequest:j},ie){return(0,Us.X7)(V)?j(V,ie):od()}}function od(){return(0,sa.of)({state:er.Gu.Done,series:[],timeRange:(0,dE.JK)()})}class vE{constructor(V={dispatch:Na.WI,getState:Na.y0,getVariable:es.E0,getTemplatedRegex:fa.gR,getTimeSrv:jo.$t,queryRunners:new uE,runRequest:Hh.v7}){this.dependencies=V,this.updateOptionsRequests=new jh.x,this.updateOptionsResults=new jh.x,this.cancelRequests=new jh.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(V){this.updateOptionsRequests.next(V)}getResponse(V){return this.updateOptionsResults.asObservable().pipe((0,Wu.h)(j=>j.identifier===V))}cancelRequest(V){this.cancelRequests.next({identifier:V})}destroy(){this.subscription.unsubscribe()}onNewRequest(V){const{datasource:j,identifier:ie,searchFilter:ye}=V;try{const{dispatch:Se,runRequest:we,getTemplatedRegex:He,getVariable:Qe,queryRunners:rt,getTimeSrv:ht,getState:bt}=this.dependencies,Wt=(0,es.S_)(bt());this.updateOptionsResults.next({identifier:ie,state:er.Gu.Loading});const Bt=Qe(ie,bt());if(Bt.type!=="query")return;const It=ht(),Gt={variable:Bt,datasource:j,searchFilter:ye,timeSrv:It,runRequest:we},mn=rt.getRunnerForDatasource(j),pa=mn.getTarget({datasource:j,variable:Bt}),Sa=this.getRequest(Bt,V,pa);mn.runRequest(Gt,Sa).pipe((0,Wu.h)(()=>{const da=(0,es.S_)(bt());return Wt===da}),(0,Wu.h)(da=>da.state===er.Gu.Done||da.state===er.Gu.Error),(0,Q0.q)(1),(0,Cr.z)(da=>da.state===er.Gu.Error?(0,Cv._)(()=>da.error):(0,sa.of)(da)),rE(),iE({variable:Bt,dispatch:Se,getTemplatedRegexFunc:He}),lE({variable:Bt,dispatch:Se,searchFilter:ye}),(0,Y0.R)((0,j0.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,Wu.h)(da=>{let $a=!1;return da.identifier.id===ie.id&&($a=!0,this.updateOptionsResults.next({identifier:ie,state:er.Gu.Loading,cancelled:$a})),$a}))),(0,Z0.K)(da=>da.cancelled?(0,sa.of)({}):(this.updateOptionsResults.next({identifier:ie,state:er.Gu.Error,error:da}),(0,Cv._)(()=>da))),(0,J0.x)(()=>{this.updateOptionsResults.next({identifier:ie,state:er.Gu.Done})})).subscribe()}catch(Se){this.updateOptionsResults.next({identifier:ie,state:er.Gu.Error,error:Se})}}getRequest(V,j,ie){const{searchFilter:ye}=j,Se={variable:{text:V.current.text,value:V.current.value}},Qe={...ye?{searchFilter:{text:ye,value:ye}}:{},...Se},rt=this.dependencies.getTimeSrv().timeRange();return{app:dv.zj.Dashboard,requestId:(0,X0.Z)(),timezone:"",range:rt,interval:"",intervalMs:0,targets:[ie],scopedVars:Qe,startTime:Date.now()}}}let Pv;function EE(B){Pv=B}function Qh(){return Pv}const yE=B=>{if(!DE(B))return B.name;const{current:V}=B;return Array.isArray(V.text)?V.text.join(" + "):V.text},DE=B=>Array.isArray(B?.options)||typeof B?.current=="object";var Ei=(B=>(B[B.moveUp=38]="moveUp",B[B.moveDown=40]="moveDown",B[B.select=32]="select",B[B.cancel=27]="cancel",B[B.selectAndClose=13]="selectAndClose",B))(Ei||{});class CE extends s.PureComponent{constructor(){super(...arguments),this.onKeyDown=V=>{if(Ei[V.keyCode]&&V.keyCode!==Ei.select){const j=V.ctrlKey||V.metaKey||V.shiftKey;this.props.onNavigate(V.keyCode,j),V.preventDefault()}},this.onChange=V=>{this.props.onChange(V.target.value)}}render(){const{value:V,id:j,onNavigate:ie,...ye}=this.props;return s.createElement("input",{...ye,ref:Se=>{Se&&(Se.focus(),Se.setAttribute("style",`width:${Math.max(Se.width,150)}px`))},type:"text",className:"gf-form-input",value:V??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Qa.t)("variable.dropdown.placeholder","Enter variable value")})}}const bE=({loading:B,disabled:V,onClick:j,text:ie,onCancel:ye,id:Se})=>{const we=(0,st.wW)(Mv),He=(0,s.useCallback)(Qe=>{Qe.stopPropagation(),Qe.preventDefault(),j()},[j]);return B?s.createElement("div",{className:we.container,"data-testid":Ds.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ie}`),title:ie,id:Se},s.createElement(Sv,{text:ie}),s.createElement(PE,{onCancel:ye})):s.createElement("button",{onClick:He,className:we.container,"data-testid":Ds.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ie}`),"aria-expanded":!1,"aria-controls":`options-${Se}`,id:Se,title:ie,disabled:V},s.createElement(Sv,{text:ie}),s.createElement(ka.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},Sv=({text:B})=>{const V=(0,st.wW)(Mv);return s.createElement("span",{className:V.textAndTags},B===xr.xk?(0,Qa.t)("variable.picker.link-all","All"):B)},PE=({onCancel:B})=>{const V=(0,s.useCallback)(j=>{j.preventDefault(),B()},[B]);return s.createElement(Go.u,{content:"Cancel query"},s.createElement(ka.J,{className:"spin-clockwise",name:"sync",size:"sm",onClick:V,"aria-label":Ds.wl.components.LoadingIndicator.icon}))},Mv=B=>({container:(0,Ie.css)`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${B.spacing(1)};
    background-color: ${B.components.input.background};
    border: 1px solid ${B.components.input.borderColor};
    border-radius: ${B.shape.radius.default};
    display: flex;
    align-items: center;
    color: ${B.colors.text};
    height: ${B.spacing(B.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${B.colors.action.disabledBackground};
      color: ${B.colors.action.disabledText};
      border: 1px solid ${B.colors.action.disabledBackground};
    }
  `,textAndTags:(0,Ie.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${B.spacing(.25)};
    user-select: none;
  `});class SE extends s.PureComponent{constructor(){super(...arguments),this.onToggle=V=>j=>{const ie=j.shiftKey||j.ctrlKey||j.metaKey;this.handleEvent(j),this.props.onToggle(V,ie)},this.onToggleAll=V=>{this.handleEvent(V),this.props.onToggleAll()}}handleEvent(V){V.preventDefault(),V.stopPropagation()}render(){const{multi:V,values:j,highlightIndex:ie,selectedValues:ye,onToggle:Se,onToggleAll:we,theme:He,...Qe}=this.props,rt=Yh(He);return s.createElement("div",{className:rt.variableValueDropdown},s.createElement("div",{className:rt.variableOptionsWrapper},s.createElement("ul",{className:rt.variableOptionsColumn,"aria-label":Ds.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Qe},this.renderMultiToggle(),j.map((ht,bt)=>this.renderOption(ht,bt)))))}renderOption(V,j){const{highlightIndex:ie,multi:ye,theme:Se}=this.props,we=Yh(Se),He=V.value===xr.r2;return s.createElement("li",{key:`${V.value}`},s.createElement("button",{"data-testid":Ds.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":V.selected,className:(0,Ie.cx)((0,fe.gN)(Se),we.variableOption,{[we.highlighted]:j===ie,[we.variableAllOption]:He},we.noStyledButton),onClick:this.onToggle(V)},s.createElement("span",{className:(0,Ie.cx)(we.variableOptionIcon,{[we.variableOptionIconSelected]:V.selected,[we.hideVariableOptionIcon]:!ye})}),s.createElement("span",{"data-testid":Ds.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${V.text}`)},He?(0,Qa.t)("variable.picker.option-all","All"):V.text)))}renderMultiToggle(){const{multi:V,selectedValues:j,theme:ie,values:ye}=this.props,Se=Yh(ie),we=ye.some(Qe=>Qe.value===xr.r2);if(!V)return null;const He=()=>s.createElement(Qa.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return s.createElement(Go.u,{content:He,placement:"top"},s.createElement("button",{className:(0,Ie.cx)((0,fe.gN)(ie),Se.variableOption,Se.variableOptionColumnHeader,Se.noStyledButton,{[Se.noPaddingBotton]:we}),role:"checkbox","aria-checked":j.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},s.createElement("span",{className:(0,Ie.cx)(Se.variableOptionIcon,{[Se.variableOptionIconManySelected]:j.length>1})}),s.createElement(Qa.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",j.length,")"))}}const Yh=(0,nl.B)(B=>{const V=B.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,Ie.css)({display:"none"}),highlighted:(0,Ie.css)({backgroundColor:B.colors.action.hover}),noStyledButton:(0,Ie.css)({width:"100%",textAlign:"left"}),variableOption:(0,Ie.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:B.colors.action.hover}}),variableOptionColumnHeader:(0,Ie.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,Ie.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${V}) left top no-repeat`}),variableOptionIconManySelected:(0,Ie.css)({background:`url(${V}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,Ie.css)({background:`url(${V}) 0px -18px no-repeat`}),variableValueDropdown:(0,Ie.css)({backgroundColor:B.colors.background.primary,border:`1px solid ${B.colors.border.weak}`,borderRadius:B.shape.borderRadius(2),boxShadow:B.shadows.z2,position:"absolute",top:B.spacing(B.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:B.zIndex.typeahead}),variableOptionsColumn:(0,Ie.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,Ie.css)({display:"table",width:"100%"}),variableAllOption:(0,Ie.css)({borderBottom:`1px solid ${B.colors.border.weak}`,paddingBottom:B.spacing(1)}),noPaddingBotton:(0,Ie.css)({paddingBottom:0})}}),ME=(0,st.HE)(SE);var xE=e(49689),xv=e(32147),yi=e(63033),Oo=e(14668);const TE=(B,V,j)=>async(ie,ye)=>{if(V===Ei.cancel)return await ie(Ku(B));if(V===Ei.select)return ie(Zh(B,j));if(V===Ei.selectAndClose)return(0,es.AE)(B,ye()).optionsPicker.multi?ie(Zh(B,j)):(ie(Zh(B,j,!0)),ie(Ku(B)));if(V===Ei.moveDown)return ie((0,hs.mb)(B,(0,Oo.Ew)(1)));if(V===Ei.moveUp)return ie((0,hs.mb)(B,(0,Oo.Ew)(-1)))},OE=(B,V="")=>async(j,ie)=>{const{rootStateKey:ye}=B,{id:Se,queryValue:we}=(0,es.AE)(ye,ie()).optionsPicker,He={id:Se,rootStateKey:ye,type:"query"},Qe=(0,es.E0)(He,ie());if(!("options"in Qe)||(j((0,hs.mb)(ye,(0,Oo.Ug)(V))),(0,p.trim)(we)===(0,p.trim)(V)))return;const{query:rt,options:ht}=Qe,bt=typeof rt=="string"?rt:rt.target;return(0,xE.b)(bt)?LE(j,ie,V,ye):j((0,hs.mb)(ye,(0,Oo.ss)(ht)))},IE=async B=>{if((0,xv.Q)(B.current))return;await ad.z.get(B.type).setValue(B,B.current,!0)},Ku=(B,V)=>async(j,ie)=>{const ye=(0,es.AE)(B,ie()).optionsPicker,Se={id:ye.id,rootStateKey:B,type:"query"},we=(0,es.E0)(Se,ie());if(!(0,Us.eL)(we))return;const He={option:BE(ye)},Qe={propName:"queryValue",propValue:ye.queryValue};j((0,hs.mb)(B,(0,yi.Q8)((0,fa.Y6)(we,He)))),j((0,hs.mb)(B,(0,yi.Pl)((0,fa.Y6)(we,Qe))));const rt=(0,es.E0)(Se,ie());if((0,Us.eL)(rt)&&(j((0,hs.mb)(B,(0,Oo.nn)())),(0,fa.N9)(we)!==(0,fa.N9)(rt)))return V?V(rt):await IE(rt)},RE=(B,V)=>async(j,ie)=>{const{id:ye,rootStateKey:Se}=B,we=(0,es.AE)(Se,ie()).optionsPicker;we.id&&we.id!==ye&&await j(Ku(Se,V));const He=(0,es.E0)(B,ie());(0,Us.eL)(He)&&j((0,hs.mb)(Se,(0,Oo.aN)(He)))},Zh=(B,V,j=!1)=>(ie,ye)=>{const{highlightIndex:Se,options:we}=(0,es.AE)(B,ye()).optionsPicker,He=we[Se];ie((0,hs.mb)(B,(0,Oo._M)({option:He,forceSelect:j,clearOthers:V})))},AE=async(B,V,j,ie)=>{try{const{id:ye}=(0,es.AE)(ie,V()).optionsPicker,Se={id:ye,rootStateKey:ie,type:"query"},we=(0,es.E0)(Se,V());if(!(0,Us.eL)(we))return;await ad.z.get(we.type).updateOptions(we,j);const Qe=(0,es.E0)(Se,V());if(!(0,Us.eL)(Qe))return;B((0,hs.mb)(ie,(0,Oo.wF)(Qe.options)))}catch(ye){console.error(ye)}},LE=(0,p.debounce)(AE,500);function BE(B){const{options:V,selectedValues:j,queryValue:ie,multi:ye}=B;if(V.length===0&&ie&&ie.length>0)return{text:ie,value:ie,selected:!1};if(!ye)return j.find(He=>He.selected);const Se=[],we=[];for(const He of j)He.selected&&(Se.push(He.text.toString()),we.push(He.value.toString()));return{value:we,text:Se,selected:!0}}const id=()=>{const B=Se=>({...(0,Dv.bindActionCreators)({openOptions:RE,commitChangesToVariable:Ku,navigateOptions:TE},Se),filterOrSearchOptions:(we,He="")=>{Se(OE(we,He))},toggleAllOptions:we=>Se((0,hs.mb)(we.rootStateKey,(0,Oo.iQ)())),toggleOption:(we,He,Qe,rt)=>Se((0,hs.mb)(we.rootStateKey,(0,Oo._M)({option:He,clearOthers:Qe,forceSelect:rt})))}),V=(Se,we)=>{const{rootStateKey:He}=we.variable;return He?{picker:(0,es.AE)(He,Se).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Oo.yy})},j=(0,or.connect)(V,B);class ie extends s.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,fa.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(we,He)=>{((0,Us.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(we,He)},this.onToggleSingleValueVariable=(we,He)=>{this.props.toggleOption((0,fa.yQ)(this.props.variable),we,He,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(we,He)=>{this.props.toggleOption((0,fa.yQ)(this.props.variable),we,He,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,fa.yQ)(this.props.variable))},this.onFilterOrSearchOptions=we=>{this.props.filterOrSearchOptions((0,fa.yQ)(this.props.variable),we)},this.onNavigate=(we,He)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,we,He)},this.onCancel=()=>{Qh().cancelRequest((0,fa.yQ)(this.props.variable))}}render(){const{variable:we,picker:He}=this.props,Qe=He.id===we.id;return s.createElement("div",{className:"variable-link-wrapper"},Qe?this.renderOptions(He):this.renderLink(we))}renderLink(we){const He=yE(we),Qe=we.state===er.Gu.Loading;return s.createElement(bE,{id:xr.IG+we.id,text:He,onClick:this.onShowOptions,loading:Qe,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(we){const{id:He}=this.props.variable;return s.createElement(G0.L,{onClick:this.onHideOptions},s.createElement(CE,{id:xr.IG+He,value:we.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${He}`}),s.createElement(ME,{values:we.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:we.highlightIndex,multi:we.multi,selectedValues:we.selectedValues,id:`options-${He}`}))}}const ye=j(ie);return ye.displayName="OptionsPicker",ye};var Wl=e(6998);class wE extends s.PureComponent{constructor(){super(...arguments),this.onChange=V=>{this.props.onPropChange({propName:"query",propValue:V.currentTarget.value})},this.onBlur=V=>{this.props.onPropChange({propName:"query",propValue:V.currentTarget.value,updateOptions:!0})}}render(){return s.createElement(s.Fragment,null,s.createElement(_o.e,null,"Constant options"),s.createElement(Wl.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const UE={...zs.Eg,type:"constant",hide:zs.bU.hideVariable,query:"",current:{},options:[]},Tv=(0,bo.oM)({name:"templating/constant",initialState:rd.s,reducers:{createConstantOptionsFromQuery:(B,V)=>{const j=(0,es.ir)(B,V.payload.id);j.type==="constant"&&(j.options=[{text:j.query.trim(),value:j.query.trim(),selected:!1}])}}}),NE=Tv.reducer,{createConstantOptionsFromQuery:WE}=Tv.actions,FE=B=>async V=>{const{rootStateKey:j}=B;await V((0,hs.mb)(j,WE((0,fa.Y6)(B)))),await V((0,Xs.xQ)(B))},KE=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:UE,reducer:NE,picker:id(),editor:wE,dependsOn:()=>!1,setValue:async(B,V,j=!1)=>{await(0,Na.WI)((0,Xs.Fz)((0,fa.yQ)(B),V,j))},setValueFromUrl:async(B,V)=>{await(0,Na.WI)((0,Xs.Ci)((0,fa.yQ)(B),V))},updateOptions:async B=>{await(0,Na.WI)(FE((0,fa.yQ)(B)))},getSaveModel:B=>{const{index:V,id:j,state:ie,global:ye,current:Se,options:we,rootStateKey:He,...Qe}=(0,p.cloneDeep)(B);return Qe},getValueForUrl:B=>B.current.value,beforeAdding:B=>{const{current:V,options:j,query:ie,...ye}=(0,p.cloneDeep)(B),Se={selected:!0,text:ie,value:ie};return{...ye,current:Se,options:[Se],query:ie}}});var VE=e(14633),_E=e(36356);function Jh({value:B,name:V,description:j,onChange:ie,ariaLabel:ye}){const Se=(0,VE.Me)();return s.createElement(_E.X,{id:Se,label:V,description:j,value:B,onChange:ie,"aria-label":ye})}const Vu=({onMultiChanged:B,onPropChange:V,variable:j})=>{const ie=(0,s.useCallback)(we=>{B((0,fa.yQ)(j),we.target.checked)},[B,j]),ye=(0,s.useCallback)(we=>{V({propName:"includeAll",propValue:we.target.checked})},[V]),Se=(0,s.useCallback)(we=>{V({propName:"allValue",propValue:we.currentTarget.value})},[V]);return s.createElement(_a.wc,{spacing:"md",height:"inherit"},s.createElement(Jh,{value:j.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:ie}),s.createElement(Jh,{value:j.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:ye}),j.includeAll&&s.createElement(Wl.V,{value:j.allValue??"",onChange:Se,name:"Custom all value",placeholder:"blank = auto",testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};Vu.displayName="SelectionOptionsEditor";var Ov=e(58387);class $E extends s.PureComponent{constructor(){super(...arguments),this.onChange=V=>{this.props.onPropChange({propName:"query",propValue:V.currentTarget.value})},this.onSelectionOptionsChange=async({propName:V,propValue:j})=>{this.props.onPropChange({propName:V,propValue:j,updateOptions:!0})},this.onBlur=V=>{this.props.onPropChange({propName:"query",propValue:V.currentTarget.value,updateOptions:!0})}}render(){return s.createElement(s.Fragment,null,s.createElement(_o.e,null,"Custom options"),s.createElement(Ov.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),s.createElement(_o.e,null,"Selection options"),s.createElement(Vu,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const zE=(B,V)=>({}),kE={changeVariableMultiValue:Xs.Z7},HE=pn($E,zE,kE),GE={...zs.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},Iv=(0,bo.oM)({name:"templating/custom",initialState:rd.s,reducers:{createCustomOptionsFromQuery:(B,V)=>{const j=(0,es.ir)(B,V.payload.id);if(j.type!=="custom")return;const{includeAll:ie}=j,we=(V.payload.data.match(/(?:\\,|[^,])+/g)??[]).map(He=>{He=He.replace(/\\,/g,",");const Qe=/^(.+)\s:\s(.+)$/g.exec(He)??[];if(Qe.length===3){const[,rt,ht]=Qe;return{text:rt.trim(),value:ht.trim(),selected:!1}}else return{text:He.trim(),value:He.trim(),selected:!1}});ie&&we.unshift({text:xr.xk,value:xr.r2,selected:!1}),j.options=we}}}),jE=Iv.reducer,{createCustomOptionsFromQuery:QE}=Iv.actions,YE=B=>async(V,j)=>{const{rootStateKey:ie}=B,ye=(0,es.E0)(B,j());if(ye.type!=="custom")return;const Se=(0,ke.J)().replace(ye.query);await V((0,hs.mb)(ie,QE((0,fa.Y6)(B,Se)))),await V((0,Xs.xQ)(B))},ZE=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:GE,reducer:jE,picker:id(),editor:HE,dependsOn:(B,V)=>(0,fa.QI)(B.query,V.name),setValue:async(B,V,j=!1)=>{await(0,Na.WI)((0,Xs.Fz)((0,fa.yQ)(B),V,j))},setValueFromUrl:async(B,V)=>{await(0,Na.WI)((0,Xs.Ci)((0,fa.yQ)(B),V))},updateOptions:async B=>{await(0,Na.WI)(YE((0,fa.yQ)(B)))},getSaveModel:B=>{const{index:V,id:j,state:ie,global:ye,rootStateKey:Se,...we}=(0,p.cloneDeep)(B);return we},getValueForUrl:B=>(0,fa.HY)(B)?xr.xk:B.current.value});var Xh=e(13413),JE=e(42139);const XE={...zs.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:zs.Bd.onDashboardLoad},Rv=(0,bo.oM)({name:"templating/datasource",initialState:rd.s,reducers:{createDataSourceOptions:(B,V)=>{const{sources:j,regex:ie}=V.payload.data,ye=[],Se=(0,es.ir)(B,V.payload.id);if(Se.type==="datasource"){for(let we=0;we<j.length;we++){const He=j[we];(0,JE.S)(Se.query,He.meta)&&(qE(He,ie)&&ye.push({text:He.name,value:He.uid,selected:!1}),ey(He,ie)&&ye.push({text:"default",value:"default",selected:!1}))}ye.length===0&&ye.push({text:"No data sources found",value:"",selected:!1}),Se.includeAll&&ye.unshift({text:xr.xk,value:xr.r2,selected:!1}),Se.options=ye}}}});function qE(B,V){return V?V.exec(B.name):!0}function ey(B,V){return B.isDefault?V?V.exec("default"):!0:!1}const ty=Rv.reducer,{createDataSourceOptions:ny}=Rv.actions,ay=(B,V={getDatasourceSrv:c.ak})=>async(j,ie)=>{const{rootStateKey:ye}=B,Se=V.getDatasourceSrv().getList({metrics:!0,variables:!1}),we=(0,es.E0)(B,ie());if(we.type!=="datasource")return;let He;we.regex&&(He=(0,ke.J)().replace(we.regex,void 0,"regex"),He=(0,Ka.jO)(He)),j((0,hs.mb)(ye,ny((0,fa.Y6)(B,{sources:Se,regex:He})))),await j((0,Xs.xQ)(B))},sy=(B,V={getDatasourceSrv:c.ak})=>j=>{const ie=V.getDatasourceSrv().getList({metrics:!0,variables:!0}),ye=(0,p.chain)(ie).uniqBy("meta.id").map(Se=>({text:Se.meta.name,value:Se.meta.id})).value();ye.unshift({text:"",value:""}),j((0,hs.mb)(B,(0,qo.z7)({dataSourceTypes:ye})))},ry=(B,V)=>{const{variable:{rootStateKey:j}}=V;if(!j)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:hv(qo.PF)};const{editor:ie}=(0,es.AE)(j,B);return{extended:hv(ie)}},oy={initDataSourceVariableEditor:sy,changeVariableMultiValue:Xs.Z7},iy=(0,or.connect)(ry,oy);class ly extends s.PureComponent{constructor(){super(...arguments),this.onRegExChange=V=>{this.props.onPropChange({propName:"regex",propValue:V.currentTarget.value})},this.onRegExBlur=V=>{this.props.onPropChange({propName:"regex",propValue:V.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:V,propName:j})=>{this.props.onPropChange({propName:j,propValue:V,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:V}=this.props;if(!V?.dataSourceTypes.length)return"";const j=V.dataSourceTypes.find(ye=>ye.value===this.props.variable.query);return(j?j.value:V.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=V=>{this.props.onPropChange({propName:"query",propValue:V.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:V}=this.props.variable;if(!V){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(V)}render(){const{variable:V,extended:j,changeVariableMultiValue:ie}=this.props,ye=j?.dataSourceTypes?.length?j.dataSourceTypes?.map(we=>({value:we.value??"",label:we.text})):[],Se=ye.find(we=>we.value===V.query)??ye[0];return s.createElement(s.Fragment,null,s.createElement(_o.e,null,"Data source options"),s.createElement(Xh.u,{name:"Type",value:Se,options:ye,onChange:this.onDataSourceTypeChanged,testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),s.createElement(Wl.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:s.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",s.createElement("br",null),s.createElement("br",null),"Example: ",s.createElement("code",null,"/^prod/"))}),s.createElement(_o.e,null,"Selection options"),s.createElement(Vu,{variable:V,onPropChange:this.onSelectionOptionsChange,onMultiChanged:ie}))}}const cy=iy(ly),dy=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:XE,reducer:ty,picker:id(),editor:cy,dependsOn:(B,V)=>B.regex?(0,fa.QI)(B.regex,V.name):!1,setValue:async(B,V,j=!1)=>{await(0,Na.WI)((0,Xs.Fz)((0,fa.yQ)(B),V,j))},setValueFromUrl:async(B,V)=>{await(0,Na.WI)((0,Xs.Ci)((0,fa.yQ)(B),V))},updateOptions:async B=>{await(0,Na.WI)(ay((0,fa.yQ)(B)))},getSaveModel:B=>{const{index:V,id:j,state:ie,global:ye,rootStateKey:Se,...we}=(0,p.cloneDeep)(B);return{...we,options:[]}},getValueForUrl:B=>(0,fa.HY)(B)?xr.xk:B.current.value});var uy=e(58655);const qh=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(B=>({label:`${B}`,value:B})),Av=s.memo(({onPropChange:B,variable:V})=>{const j=rt=>{B({propName:"auto",propValue:rt.target.checked,updateOptions:!0})},ie=rt=>{B({propName:"query",propValue:rt.currentTarget.value})},ye=rt=>{B({propName:"query",propValue:rt.currentTarget.value,updateOptions:!0})},Se=rt=>{B({propName:"auto_count",propValue:rt.value,updateOptions:!0})},we=rt=>{B({propName:"auto_min",propValue:rt.currentTarget.value,updateOptions:!0})},He=qh.find(rt=>rt.value===V.auto_count)??qh[0],Qe=(0,st.wW)(my);return s.createElement(s.Fragment,null,s.createElement(_o.e,null,"Interval options"),s.createElement(Wl.V,{value:V.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:ie,onBlur:ye,testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),s.createElement(Jh,{value:V.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:j}),V.auto&&s.createElement("div",{className:Qe.autoFields},s.createElement(Xh.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:He,options:qh,onChange:Se,width:9}),s.createElement(Wl.V,{value:V.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:we,width:11})))});Av.displayName="IntervalVariableEditor";function my(B){return{autoFields:(0,Ie.css)({marginTop:B.spacing(2),display:"flex",flexDirection:"column"})}}var fy=e(4419),ep=e(7652);const gy=B=>async V=>{const{rootStateKey:j}=B;await V((0,hs.mb)(j,(0,ep.kv)((0,fa.Y6)(B)))),await V(tp(B)),await V((0,Xs.xQ)(B))},tp=(B,V={calculateInterval:uv.calculateInterval,getTimeSrv:jo.$t,templateSrv:(0,fy.J)()})=>(j,ie)=>{const ye=(0,es.E0)(B,ie());if(ye.type==="interval"&&ye.auto){const Se=V.calculateInterval(V.getTimeSrv().timeRange(),ye.auto_count,ye.auto_min);V.templateSrv.setGrafanaVariable("$__auto_interval_"+ye.name,Se.interval),V.templateSrv.setGrafanaVariable("$__auto_interval",Se.interval)}},hy=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:ep.T6,reducer:ep.vH,picker:id(),editor:Av,dependsOn:()=>!1,setValue:async(B,V,j=!1)=>{await(0,Na.WI)(tp((0,fa.yQ)(B))),await(0,Na.WI)((0,Xs.Fz)((0,fa.yQ)(B),V,j))},setValueFromUrl:async(B,V)=>{await(0,Na.WI)(tp((0,fa.yQ)(B))),await(0,Na.WI)((0,Xs.Ci)((0,fa.yQ)(B),V))},updateOptions:async B=>{await(0,Na.WI)(gy((0,fa.yQ)(B)))},getSaveModel:B=>{const{index:V,id:j,state:ie,global:ye,rootStateKey:Se,...we}=(0,p.cloneDeep)(B);return we},getValueForUrl:B=>B.current.value});var Lv=e(59970);const np=[{label:"On dashboard load",value:Lv.Bd.onDashboardLoad},{label:"On time range change",value:Lv.Bd.onTimeRangeChanged}];function py({onChange:B,refresh:V}){const j=(0,st.l4)(),[ie,ye]=(0,s.useState)(!1);hi({breakpoint:j.breakpoints.values.sm,onChange:we=>{ye(!we.matches)}});const Se=(0,s.useMemo)(()=>np.find(we=>we.value===V)?.value??np[0].value,[V]);return s.createElement(ui.g,{label:"Refresh",description:"When to update the values of this variable"},s.createElement(me.S,{options:np,onChange:B,value:Se,size:ie?"sm":"md"}))}const ap=[{label:"Disabled",value:zs.$U.disabled},{label:"Alphabetical (asc)",value:zs.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:zs.$U.alphabeticalDesc},{label:"Numerical (asc)",value:zs.$U.numericalAsc},{label:"Numerical (desc)",value:zs.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:zs.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:zs.$U.alphabeticalCaseInsensitiveDesc},{label:"Natural (asc)",value:zs.$U.naturalAsc},{label:"Natural (desc)",value:zs.$U.naturalDesc}];function vy({onChange:B,sort:V}){const j=(0,s.useMemo)(()=>ap.find(ie=>ie.value===V)??ap[0],[V]);return s.createElement(Xh.u,{name:"Sort",description:"How to sort the values of this variable",value:j,options:ap,onChange:B,testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Ey=e(40510),yy=e(54291),Bv=e(95373);async function Dy(B,V=dl.nL){if((0,Us.d7)(B))return B.variables.editor;if((0,Us.X7)(B)){const j=await V(B.meta);if(!j.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return j.components.QueryEditor??null}return(0,Us.Ju)(B)?Cy:(0,Us.R)(B)?(await V(B.meta)).components.VariableQueryEditor??Bv.R:null}function Cy({datasource:B,query:V,onChange:j}){const ie=(0,s.useCallback)(ye=>{j({refId:"StandardVariableQuery",query:ye})},[j]);return s.createElement(Bv.R,{query:V.query,onChange:ie,datasource:B,templateSrv:(0,ke.J)()})}function by(B,V,j){return{next:ye=>{if(ye.state===er.Gu.Error){j.unsubscribe(),V(ye.error);return}if(ye.state===er.Gu.Done){j.unsubscribe(),B();return}},error:ye=>{j.unsubscribe(),V(ye)},complete:()=>{j.unsubscribe(),B()}}}const Py=(B,V)=>async(j,ie)=>{try{const{rootStateKey:ye}=B;if(!(0,fa.A3)(ye,ie()))return;const Se=(0,es.E0)(B,ie());if(Se.type!=="query")return;(0,es.AE)(ye,ie()).editor.id===Se.id&&j((0,hs.mb)(ye,(0,qo.PV)({errorProp:"update"})));const we=await(0,U.F)().get(Se.datasource??"");await new Promise((He,Qe)=>{const rt=new Ey.w0,ht=by(He,Qe,rt),bt=Qh().getResponse(B).subscribe(ht);rt.add(bt),Qh().queueRequest({identifier:B,datasource:we,searchFilter:V})})}catch(ye){if(ye instanceof Error){const Se=(0,yy.P)(ye),{rootStateKey:we}=B;throw(0,es.AE)(we,ie()).editor.id===B.id&&j((0,hs.mb)(we,(0,qo.Sg)({errorProp:"update",errorText:Se.message}))),Se}}},Sy=B=>async(V,j)=>{const ie=(0,es.E0)(B,j());ie.type==="query"&&await V(wv((0,fa.yQ)(ie),ie.datasource))},wv=(B,V)=>async(j,ie)=>{try{const{rootStateKey:ye}=B,{editor:Se}=(0,es.AE)(ye,ie()),He=Gh(Se)?.dataSource,Qe=await(0,U.F)().get(V??"");He&&He.type!==Qe?.type&&j((0,hs.mb)(ye,(0,yi.Pl)((0,fa.Y6)(B,{propName:"query",propValue:""}))));const rt=await Dy(Qe);j((0,hs.mb)(ye,(0,qo.z7)({dataSource:Qe,VariableQueryEditor:rt})))}catch(ye){console.error(ye)}},My=(B,V,j)=>async(ie,ye)=>{const{rootStateKey:Se}=B,we=(0,es.E0)(B,ye());if(we.type==="query"){if(xy(we.name,V)){const He="Query cannot contain a reference to itself. Variable: $"+we.name;ie((0,hs.mb)(Se,(0,qo.Sg)({errorProp:"query",errorText:He})));return}ie((0,hs.mb)(Se,(0,qo.PV)({errorProp:"query"}))),ie((0,hs.mb)(Se,(0,yi.Pl)((0,fa.Y6)(B,{propName:"query",propValue:V})))),j!==void 0?ie((0,hs.mb)(Se,(0,yi.Pl)((0,fa.Y6)(B,{propName:"definition",propValue:j})))):typeof V=="string"&&ie((0,hs.mb)(Se,(0,yi.Pl)((0,fa.Y6)(B,{propName:"definition",propValue:V})))),await ie((0,Xs.Rk)(B))}};function xy(B,V){if(typeof V=="string"&&V.match(new RegExp("\\$"+B+"(/| |$)")))return!0;const j=Uv(V);for(let ie in j)if(j.hasOwnProperty(ie)){const ye=j[ie];if(typeof ye=="string"&&ye.match(new RegExp("\\$"+B+"(/| |$)")))return!0}return!1}function Uv(B){return typeof B!="object"||B===null?{query:B}:Object.keys(B).reduce((ie,ye)=>{const Se=B[ye];if(typeof Se!="object"||Se===null)return ie[ye]=Se,ie;const we=Uv(Se);for(let He in we)we.hasOwnProperty(He)&&(ie[`${ye}_${He}`]=we[He]);return ie},{})}const Ty=(B,V)=>{const{rootStateKey:j}=V.variable;if(!j)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Gh(qo.PF)};const{editor:ie}=(0,es.AE)(j,B);return{extended:Gh(ie)}},Oy={initQueryVariableEditor:Sy,changeQueryVariableDataSource:wv,changeQueryVariableQuery:My,changeVariableMultiValue:Xs.Z7},Iy=(0,or.connect)(Ty,Oy);class Ry extends s.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=V=>{this.props.onPropChange({propName:"datasource",propValue:V.isDefault?null:(0,mv.iU)(V)})},this.onLegacyQueryChange=async(V,j)=>{this.props.variable.query!==V&&this.props.changeQueryVariableQuery((0,fa.yQ)(this.props.variable),V,j)},this.onQueryChange=async V=>{if(this.props.variable.query!==V){let j="";V&&V.hasOwnProperty("query")&&typeof V.query=="string"&&(j=V.query),this.props.changeQueryVariableQuery((0,fa.yQ)(this.props.variable),V,j)}},this.onRegExChange=V=>{this.setState({regex:V.currentTarget.value})},this.onRegExBlur=async V=>{const j=V.currentTarget.value;this.props.variable.regex!==j&&this.props.onPropChange({propName:"regex",propValue:j,updateOptions:!0})},this.onRefreshChange=V=>{this.props.onPropChange({propName:"refresh",propValue:V})},this.onSortChange=async V=>{this.props.onPropChange({propName:"sort",propValue:V.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:V,propName:j})=>{this.props.onPropChange({propName:j,propValue:V,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:V,variable:j}=this.props;if(!V||!V.dataSource||!V.VariableQueryEditor)return null;const ie=V.dataSource,ye=V.VariableQueryEditor;let Se=j.query;if(typeof Se=="string"?Se=Se||(ie.variables?.getDefaultQuery?.()??""):Se={...ie.variables?.getDefaultQuery?.(),...j.query},(0,Us.NX)(ye,ie))return s.createElement(oe.x,{marginBottom:2},s.createElement(Dl.x,{element:"h4"},"Query"),s.createElement(oe.x,{marginTop:1},s.createElement(ye,{key:ie.uid,datasource:ie,query:Se,templateSrv:(0,ke.J)(),onChange:this.onLegacyQueryChange})));const we=(0,jo.$t)().timeRange();return(0,Us.$7)(ye,ie)?s.createElement(oe.x,{marginBottom:2},s.createElement(Dl.x,{element:"h4"},"Query"),s.createElement(oe.x,{marginTop:1},s.createElement(ye,{key:ie.uid,datasource:ie,query:Se,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:er.Gu.Done,timeRange:we},range:we,onBlur:()=>{},history:[]}))):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,fa.yQ)(this.props.variable))}componentDidUpdate(V){V.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,fa.yQ)(this.props.variable),this.props.variable.datasource)}render(){return s.createElement(s.Fragment,null,s.createElement(_o.e,null,"Query options"),s.createElement(ui.g,{label:"Data source",htmlFor:"data-source-picker"},s.createElement(fv.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),s.createElement(Ov.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:s.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",s.createElement("br",null),"Named capture groups can be used to separate the display text and value (",s.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),s.createElement(vy,{onChange:this.onSortChange,sort:this.props.variable.sort}),s.createElement(py,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),s.createElement(_o.e,null,"Selection options"),s.createElement(Vu,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Ay=Iy(Ry),Ly=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:q0,reducer:aE,picker:id(),editor:Ay,dependsOn:(B,V)=>(0,fa.QI)(B.query,B.datasource?.uid,B.regex,V.name),setValue:async(B,V,j=!1)=>{await(0,Na.WI)((0,Xs.Fz)((0,fa.yQ)(B),V,j))},setValueFromUrl:async(B,V)=>{await(0,Na.WI)((0,Xs.Ci)((0,fa.yQ)(B),V))},updateOptions:async(B,V)=>{await(0,Na.WI)(Py((0,fa.yQ)(B),V))},getSaveModel:B=>{const{index:V,id:j,state:ie,global:ye,queryValue:Se,rootStateKey:we,...He}=(0,p.cloneDeep)(B);return B.refresh!==zs.Bd.never?{...He,options:[]}:He},getValueForUrl:B=>(0,fa.HY)(B)?xr.xk:B.current.value}),By=()=>({id:"system",description:"",name:"system",initialState:{...zs.Eg,type:"system",hide:zs.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:er.Gu.Done},reducer:B=>B,picker:null,editor:null,dependsOn:()=>!1,setValue:async(B,V,j=!1)=>{},setValueFromUrl:async(B,V)=>{},updateOptions:async B=>{},getSaveModel:B=>({}),getValueForUrl:B=>""});function wy({onPropChange:B,variable:{query:V}}){const j=(0,s.useCallback)((Se,we)=>{Se.preventDefault(),B({propName:"originalQuery",propValue:Se.currentTarget.value,updateOptions:!1}),B({propName:"query",propValue:Se.currentTarget.value,updateOptions:we})},[B]),ie=(0,s.useCallback)(Se=>j(Se,!1),[j]),ye=(0,s.useCallback)(Se=>j(Se,!0),[j]);return s.createElement(s.Fragment,null,s.createElement(_o.e,null,"Text options"),s.createElement(Wl.V,{value:V,name:"Default value",placeholder:"default value, if any",onChange:ie,onBlur:ye,width:30,testId:Ds.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function Uy({variable:B,onVariableChange:V,readOnly:j}){const ie=(0,vn.useDispatch)(),[ye,Se]=(0,s.useState)(B.current.value);(0,s.useEffect)(()=>{Se(B.current.value)},[B]);const we=(0,s.useCallback)(()=>{if(!B.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(B.current.value!==ye){if(ie((0,hs.mb)(B.rootStateKey,(0,yi.Pl)((0,fa.Y6)({id:B.id,type:B.type},{propName:"query",propValue:ye})))),V){V({...B,current:(0,xv.Q)(B.current)?{}:{...B.current,value:ye}});return}ad.z.get(B.type).updateOptions(B)}},[B,ye,ie,V]),He=(0,s.useCallback)(ht=>Se(ht.target.value),[Se]),Qe=ht=>we(),rt=ht=>{ht.keyCode===13&&(ht.preventDefault(),we())};return s.createElement(ot.I,{type:"text",value:ye,onChange:He,onBlur:Qe,disabled:j,onKeyDown:rt,placeholder:(0,Qa.t)("variable.textbox.placeholder","Enter variable value"),id:xr.IG+B.id})}const Ny={...zs.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},Nv=(0,bo.oM)({name:"templating/textbox",initialState:rd.s,reducers:{createTextBoxOptions:(B,V)=>{const j=(0,es.ir)(B,V.payload.id);if(j.type!=="textbox")return;const ie={text:j.query.trim(),value:j.query.trim(),selected:!1};j.options=[ie],j.current=ie}}}),Wy=Nv.reducer,{createTextBoxOptions:Fy}=Nv.actions,Ky=B=>async(V,j)=>{const{rootStateKey:ie,type:ye}=B;V((0,hs.mb)(ie,Fy((0,fa.Y6)(B))));const Se=(0,es.E0)(B,j());Se.type==="textbox"&&await ad.z.get(ye).setValue(Se,Se.options[0],!0)},Vy=(B,V)=>async(j,ie)=>{const{rootStateKey:ye}=B,Se=(0,es.E0)(B,ie());if(Se.type!=="textbox")return;const we=(0,fa.Hi)(V);j((0,hs.mb)(ye,(0,yi.Pl)((0,fa.Y6)(Se,{propName:"query",propValue:we})))),await j((0,Xs.Ci)((0,fa.yQ)(Se),we))},_y=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Ny,reducer:Wy,picker:Uy,editor:wy,dependsOn:(B,V)=>!1,setValue:async(B,V,j=!1)=>{await(0,Na.WI)((0,Xs.Fz)((0,fa.yQ)(B),V,j))},setValueFromUrl:async(B,V)=>{await(0,Na.WI)(Vy((0,fa.yQ)(B),V))},updateOptions:async B=>{await(0,Na.WI)(Ky((0,fa.yQ)(B)))},getSaveModel:(B,V)=>{const{index:j,id:ie,state:ye,global:Se,originalQuery:we,rootStateKey:He,...Qe}=(0,p.cloneDeep)(B);if(B.query!==we&&!V){const rt=we??"",ht={selected:!1,text:rt,value:rt};return{...Qe,query:rt,current:ht,options:[ht]}}return Qe},getValueForUrl:B=>B.current.value,beforeAdding:B=>({...(0,p.cloneDeep)(B),originalQuery:B.query})});var $y=e(62442),sp=e(13250),rp=e(52368),op=e(86561),zy=e(9133);const ky={navBarTree:zy.V4,navIndex:Rc.G4,appNotifications:fu.VW};var Hy=e(88761),Gy=e(88599),jy=e(14479),Qy=e(82412),Yy=e(59143),Zy=e(90300),Jy=e(50051),Xy=e(72975),qy=e(17878),eD=e(33497),tD=e(4554),nD=e(27276),aD=e(27524),sD=e(70943),rD=e(58838),oD=e(45413),iD=e(3237),lD=e(44730),cD=e(79850),ip=e(68568),dD=e(92089);const uD={...ky,...Gy.ZP,...lD.ZP,...jy.ZP,...qy.ZP,...Jy.ZP,...lv.ZP,...Xy.ZP,...cD.ZP,...oD.ZP,...rD.ZP,...eD.ZP,...nD.ZP,...Yy.ZP,...Hy.ZP,...tD.ZP,...Zy.ZP,...aD.ZP,...hs.ZP,...iD.ZP,...Qy.ZP,plugins:sD.I6,[ip.C.reducerPath]:ip.C.reducer,[op.Rh.reducerPath]:op.Rh.reducer,[rp.Zi.reducerPath]:rp.Zi.reducer,[sp.ep.reducerPath]:sp.ep.reducer},Wv={},ID=B=>{Object.assign(Wv,B)},mD=()=>{const B=(0,Dv.combineReducers)({...uD,...Wv});return(V,j)=>{if(j.type!==dD.e.type)return B(V,j);const{cleanupAction:ie}=j.payload;return ie(V),B(V,j)}};function RD(B){addReducer(B)}const fD=(0,bo.e)();function gD(B){const V=(0,bo.xC)({reducer:mD(),middleware:j=>j({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(fD.middleware,ip.C.middleware,op.Rh.middleware,rp.Zi.middleware,sp.ep.middleware),devTools:!1,preloadedState:{navIndex:(0,Rc.Cu)(),...B}});return(0,$y.sj)(V.dispatch),(0,Na.PQ)(V),V}h().move=W.R;const Fv=e(72866),_u=Fv.keys().map(B=>Fv(B));class hD{async init(){try{parent.postMessage("GrafanaAppInit","*");const V=(0,Qa.uC)(z.default.bootData.user.language);(0,R.jW)(Rn.ae),ED(),fn(),oo("frontend_app_init"),yD(),(0,D.i_)(z.default.bootData.user.locale),(0,D.Ls)(z.default.bootData.user.weekStart),(0,_.L)(e0.$),(0,K.t)(Eg),(0,G.$)(qv.Z),(0,I.x)(M.E1),(0,C.K)(()=>z.default.bootData.user.timezone),Xv(),(0,Nl.initAuthConfig)(),(0,x.Xw)(nr.Z),await V,pD(),gD(),vD(),P.S.setInit(yu.u),P.N.setInit(yu.l),b.Z.setInit(qi),ad.z.setInit(()=>[Ly(),ZE(),_y(),KE(),dy(),hy(),H0(),By()]),T.F.setInit(ql),(0,L.pD)(()=>new x0),EE(new vE),(0,L.Iw)(Hh.v7),(0,S.Qf)({importPanelPlugin:cv.Ub,getPanelPluginFromCache:cv.q1}),O.u.initialize({config:z.default,getTimeRangeForUrl:(0,jo.$t)().timeRangeForUrl,getVariablesUrlParams:uy.c}),document.addEventListener("click",un);const j=new c.ND;j.init(z.default.datasources,z.default.defaultDatasource),(0,U.w)(j),O0(),new qn().init();let ye=[];Ba.contextSrv.user.orgRole!==""&&(ye=await D0(z.default.apps));const Se=d0([{pluginId:"grafana",extensionConfigs:h0()},...ye]),we=Wt=>p0({...Wt,registry:Se});(0,N.oI)(we);const He=M.E1.getSearchObject(),Qe=new Cf,rt=new Ps(M.E1,Qe),ht=new Qn;ht.start(),Qe.setKioskModeFromUrl(He.kiosk);try{(0,I0.rb)()}catch(Wt){console.warn("Failed to clean up old expanded folders",Wt)}this.context={backend:Rn.ae,location:M.E1,chrome:Qe,keybindings:rt,newAssetsChecker:ht,config:z.default},(0,y.s)(document.getElementById("reactRoot")).render(s.createElement(Eu,{app:this}))}catch(V){console.error("Failed to start Grafana",V),window.__grafana_load_failed()}finally{no("frontend_app_init")}}}function pD(){_u.length>0&&_u[0].addExtensionReducers()}function vD(){_u.length>0&&_u[0].init()}function ED(){(0,w.tz)(new wa({debug:!1})),window.addEventListener("load",B=>{const V="frontend_boot_load_time_seconds",j="frontend_boot_js_done_time_seconds",ie="frontend_boot_css_time_seconds";performance&&(performance.mark(V),ld("first-paint","frontend_boot_","_time_seconds"),ld("first-contentful-paint","frontend_boot_","_time_seconds"),ld(V),ld(j),ld(ie))}),Ba.contextSrv.user.orgRole!==""&&(0,w.e6)(new Yn({})),z.default.grafanaJavascriptAgent.enabled&&(0,w.e6)(new gs({...z.default.grafanaJavascriptAgent,app:{version:z.default.buildInfo.version,environment:z.default.buildInfo.env},buildInfo:z.default.buildInfo,user:{id:String(z.default.bootData.user?.id),email:z.default.bootData.user?.email}})),z.default.googleAnalyticsId&&(0,w.e6)(new Ia({googleAnalyticsId:z.default.googleAnalyticsId})),z.default.googleAnalytics4Id&&(0,w.e6)(new Pa({googleAnalyticsId:z.default.googleAnalytics4Id,googleAnalytics4SendManualPageViews:z.default.googleAnalytics4SendManualPageViews})),z.default.rudderstackWriteKey&&z.default.rudderstackDataPlaneUrl&&(0,w.e6)(new xa({writeKey:z.default.rudderstackWriteKey,dataPlaneUrl:z.default.rudderstackDataPlaneUrl,user:z.default.bootData.user,sdkUrl:z.default.rudderstackSdkUrl,configUrl:z.default.rudderstackConfigUrl,integrationsUrl:z.default.rudderstackIntegrationsUrl,buildInfo:z.default.buildInfo})),z.default.applicationInsightsConnectionString&&(0,w.e6)(new Jn({connectionString:z.default.applicationInsightsConnectionString,endpointUrl:z.default.applicationInsightsEndpointUrl}))}function yD(){(0,k.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function ld(B,V="",j=""){const ie=h().first(performance.getEntriesByName(B));if(ie){const ye=ie.name.replace(/-/g,"_");ea(`${V}${ye}${j}`,Math.round(ie.startTime)/1e3)}}const DD=new hD;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,DD.init()},43764:(Q,A,e)=>{"use strict";e.d(A,{As:()=>n,TE:()=>r,Z9:()=>a,_M:()=>i,sK:()=>o});var n=(g=>(g.Active="active",g.Expired="expired",g.Pending="pending",g))(n||{}),a=(g=>(g.Unprocessed="unprocessed",g.Active="active",g.Suppressed="suppressed",g))(a||{}),i=(g=>(g.equal="=",g.notEqual="!=",g.regex="=~",g.notRegex="!~",g))(i||{}),r=(g=>(g.Internal="internal",g.External="external",g.All="all",g))(r||{}),o=(g=>(g.cortex="cortex",g.mimir="mimir",g.prometheus="prometheus",g))(o||{})},51884:(Q,A,e)=>{"use strict";e.d(A,{$5:()=>a,MQ:()=>i,Rv:()=>g,az:()=>o});const n={statistics:[]};var a=(c=>(c[c.Query=1]="Query",c[c.Search=0]="Search",c))(a||{}),i=(c=>(c[c.Builder=0]="Builder",c[c.Code=1]="Code",c))(i||{});const r={parameters:[]};var o=(c=>(c.And="and",c.Function="function",c.FunctionParameter="functionParameter",c.GroupBy="groupBy",c.Operator="operator",c.Or="or",c.Property="property",c))(o||{}),g=(c=>(c.String="string",c))(g||{});const u={logGroupNames:[],logGroups:[],statsGroups:[]}},2602:(Q,A,e)=>{"use strict";e.d(A,{$5:()=>n.$5,KB:()=>a,MQ:()=>n.MQ,wf:()=>i});var n=e(51884),a=(r=>(r.Scheduled="Scheduled",r.Running="Running",r.Complete="Complete",r.Failed="Failed",r.Cancelled="Cancelled",r.Timeout="Timeout",r))(a||{}),i=(r=>(r.Regions="regions",r.Namespaces="namespaces",r.Metrics="metrics",r.DimensionKeys="dimensionKeys",r.DimensionValues="dimensionValues",r.EBSVolumeIDs="ebsVolumeIDs",r.EC2InstanceAttributes="ec2InstanceAttributes",r.ResourceArns="resourceARNs",r.Statistics="statistics",r.LogGroups="logGroups",r.Accounts="accounts",r))(i||{})},7307:(Q,A,e)=>{"use strict";e.d(A,{hD:()=>U,oe:()=>u.o,yl:()=>c,AK:()=>l});var n=e(71156),a=e(71199),i=e(20298),r=e(5333),o=e(60490),g=e(25353),u=e(64287);function c(w){return w?typeof w=="string"?w===u.o:"meta"in w&&w.meta.name===u.o||w.uid===u.o:!1}function l(w,G){return new n.y(_=>{const K=(0,o.h4)().getCurrent(),k=d(w.queries);if(!k){_.next(f("Missing panel reference ID"));return}let z=K?.getPanelById(k,!0);if(z instanceof g.r||(z=new g.r(z)),!z){_.next(f("Unknown Panel: "+k));return}const W=z.getQueryRunner(),Z=W.getData({withTransforms:!!G?.withTransforms,withFieldConfig:!1}).subscribe({next:H=>{G?.topic===a.w5.Annotations&&(H={...H,series:H.annotations??[],annotations:void 0}),_.next(H)}});if(!z.isInView&&z.refreshWhenInView||K?.otherPanelInFullscreen(z)){const{datasource:H,targets:X}=z,Y={...w,datasource:H,panelId:k,queries:X};z.refreshWhenInView=!1,W.run(Y)}return()=>{Z.unsubscribe()}})}function d(w){if(!(!w||!w.length))return w[0].panelId}function f(w){return{state:i.Gu.Error,series:[],request:{},error:{message:w},timeRange:(0,r.JK)()}}var m=e(76932),v=e(14633),E=e(86504),p=e.n(E),h=e(31733),s=e(59326),y=e(76067),D=e(85765),C=e(38834),P=e(79106),b=e(96856),T=e(76772),O=e(89719),R=e(96305),I=e(83811),M=e(97001),x=e(47999);function L(w){return JSON.stringify(w)}const S=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function U({panelData:w,queries:G,onChange:_,onRunQueries:K}){const{value:k}=(0,s.Z)(()=>(0,M.ak)().get()),z=G[0],W=(0,h.useMemo)(()=>(0,o.h4)().getCurrent()?.getPanelById(z.panelId??-124134),[z.panelId]),{value:Z,loading:H}=(0,s.Z)(async()=>{if(!W)return[];const pe=await(0,M.ak)().get(W.datasource);return Promise.all(W.targets.map(async Me=>{const Pe=Me.datasource?await(0,M.ak)().get(Me.datasource):pe,Ee=Pe.getQueryDisplayText||L,he=(0,x.t)(w,Me.refId)??w;return{refId:Me.refId,query:Ee(Me),name:Pe.name,img:Pe.meta.info.logos.small,data:he.series,error:he.error}}))},[w,W]),X=(0,h.useCallback)(pe=>{_([pe]),K()},[_,K]),Y=(0,h.useCallback)(pe=>{X({...z,panelId:pe})},[z,X]),ne=(0,h.useCallback)(()=>{X({...z,withTransforms:!z.withTransforms})},[z,X]),se=(0,h.useCallback)(pe=>{X({...z,topic:pe?a.w5.Annotations:void 0})},[z,X]),re=(0,h.useCallback)(pe=>{const Me=pe.datasource??k,Pe=(0,M.ak)().getInstanceSettings(Me)?.name,Ee=pe.targets.length;return`${Ee} ${p()("query",Ee)} to ${Pe}`},[k]),ge=(0,o.h4)().getCurrent(),q=!!(z.withTransforms||W?.transformations?.length),me=(0,h.useMemo)(()=>ge?.panels.filter(pe=>I.default.panels[pe.type]&&pe.targets&&pe.id!==ge.panelInEdit?.id&&pe.datasource?.uid!==u.o).map(pe=>({value:pe.id,label:pe.title??"Panel "+pe.id,description:re(pe),imgUrl:I.default.panels[pe.type].info.logos.small}))??[],[ge,re]),oe=(0,y.wW)(N),fe=(0,v.Me)();if(!ge)return null;if(me.length<1)return h.createElement("p",{className:oe.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const ve=me.find(pe=>pe.value===z.panelId);return h.createElement(h.Fragment,null,h.createElement(D.g,{label:"Source",description:"Use the same results as panel"},h.createElement(C.Ph,{inputId:fe,placeholder:"Choose panel",isSearchable:!0,options:me,value:ve,onChange:pe=>Y(pe.value)})),h.createElement(P.Lh,{height:"auto",wrap:!0,align:"flex-start"},h.createElement(D.g,{label:"Data Source",description:"Use data or annotations from the panel",className:oe.horizontalField},h.createElement(b.S,{options:S,value:z.topic===a.w5.Annotations,onChange:se})),q&&h.createElement(D.g,{label:"Transform",description:"Apply panel transformations from the source panel"},h.createElement(T.r,{value:!!z.withTransforms,onChange:ne}))),H?h.createElement(O.$,null):h.createElement(h.Fragment,null,Z&&!!Z.length&&h.createElement(D.g,{label:"Queries from panel"},h.createElement(P.wc,{spacing:"sm"},Z.map((pe,Me)=>h.createElement(R.Z,{key:`DashboardQueryRow-${Me}`},h.createElement(R.Z.Heading,null,pe.refId),h.createElement(R.Z.Figure,null,h.createElement("img",{src:pe.img,alt:pe.name,title:pe.name,width:40})),h.createElement(R.Z.Meta,null,pe.query)))))))}function N(w){return{horizontalField:(0,m.css)({marginRight:w.spacing(2)}),noQueriesText:(0,m.css)({padding:w.spacing(1.25)})}}},64287:(Q,A,e)=>{"use strict";e.d(A,{W:()=>a,o:()=>n});const n="-- Dashboard --",a="dashboard"},90540:(Q,A,e)=>{"use strict";e.d(A,{E:()=>o,o:()=>i});var n=e(31733),a=e(3166);function i(g){const u=r(g.profileTypes);return n.createElement(a.v,{placeholder:g.placeholder,separator:"-",displayAllSelectedLevels:!0,initialValue:g.initialProfileTypeId,allowCustomValue:!0,onSelect:g.onChange,options:u,changeOnSelect:!1,width:g.width??26})}function r(g){return(0,n.useMemo)(()=>{if(!g)return[];let u=new Map;for(let c of g){let l=[];c.id.indexOf(":")>-1&&(l=c.id.split(":"));const[d,f]=l;u.has(d)||u.set(d,{label:d,value:d,items:[]}),u.get(d)?.items.push({label:f,value:c.id})}return Array.from(u.values())},[g])}function o(g,u){const[c,l]=(0,n.useState)(),d={to:Math.ceil((u?.to.valueOf()||0)/6e4)*6e4,from:Math.floor((u?.from.valueOf()||0)/6e4)*6e4};return(0,n.useEffect)(()=>{(async()=>{const f=await g.getProfileTypes(d.from.valueOf(),d.to.valueOf());l(f)})()},[g,d.from,d.to]),c}},87580:(Q,A,e)=>{"use strict";e.d(A,{tF:()=>O,Up:()=>I});var n=e(72470),a=e.n(n),i=e(86457),r=e(44343),o=e(65821),g=e(61129),u=e(78114),c=e(57298),l=e(4558),d=e(90927),f=e(89660),m=e(31733),v=e(47701),E=e(41164),p=e(38834),h=e(61375),s=e(90540);function y(x){return m.createElement(m.Fragment,null,m.createElement(v.Z,null,m.createElement(E._,{label:"Query type",labelWidth:20,tooltip:m.createElement("div",null,"The Pyroscope data source plugin provides the following query types for template variables")},m.createElement(p.Ph,{placeholder:"Select query type","aria-label":"Query type",width:25,options:[{label:"Profile type",value:"profileType"},{label:"Label",value:"label"},{label:"Label value",value:"labelValue"}],onChange:L=>{L.value==="profileType"&&x.onChange({...x.query,type:L.value}),L.value==="label"&&x.onChange({...x.query,type:L.value,profileTypeId:""}),L.value==="labelValue"&&x.onChange({...x.query,type:L.value,profileTypeId:"",labelName:""})},value:x.query.type}))),(x.query.type==="labelValue"||x.query.type==="label")&&m.createElement(C,{datasource:x.datasource,initialValue:x.query.profileTypeId,onChange:L=>{(x.query.type==="label"||x.query.type==="labelValue")&&x.onChange({...x.query,profileTypeId:L})},range:x.range}),x.query.type==="labelValue"&&m.createElement(D,{value:x.query.labelName,datasource:x.datasource,profileTypeId:x.query.profileTypeId,onChange:L=>{x.query.type==="labelValue"&&x.onChange({...x.query,labelName:L})},from:x.range?.from.valueOf()||Date.now().valueOf()-1e3*60*60*24,to:x.range?.to.valueOf()||Date.now().valueOf()}))}function D(x){const[L,S]=(0,m.useState)();(0,m.useEffect)(()=>{(async()=>S(await x.datasource.getLabelNames((x.profileTypeId||"")+"{}",x.from,x.to)))()},[x.datasource,x.profileTypeId,x.to,x.from]);const U=L?L.map(N=>({label:N,value:N})):[];return L&&x.value&&!L.find(N=>N===x.value)&&U.push({value:x.value,label:x.value}),m.createElement(v.Z,null,m.createElement(E._,{label:"Label",labelWidth:20,tooltip:m.createElement("div",null,"Select label for which to retrieve available values")},m.createElement(p.Ph,{allowCustomValue:!0,placeholder:"Select label","aria-label":"Select label",width:25,options:U,onChange:N=>x.onChange(N.value),value:x.value})))}function C(x){const L=(0,s.E)(x.datasource,x.range);return m.createElement(v.Z,null,m.createElement(E._,{label:"Profile type","aria-label":"Profile type",labelWidth:20,tooltip:m.createElement("div",null,"Select profile type for which to retrieve available labels")},L?m.createElement(s.o,{onChange:x.onChange,profileTypes:L,initialProfileTypeId:x.initialValue}):m.createElement(h.u,{text:"Loading"})))}class P extends d.Mg{constructor(L,S=(0,f.$t)()){super(),this.dataAPI=L,this.timeSrv=S,this.editor=y}query(L){return L.targets[0].type==="profileType"?(0,c.D)(this.dataAPI.getProfileTypes(this.timeSrv.timeRange().from.valueOf(),this.timeSrv.timeRange().to.valueOf())).pipe((0,l.U)(S=>({data:S.map(U=>({text:U.label,value:U.id}))}))):L.targets[0].type==="label"?L.targets[0].profileTypeId?(0,c.D)(this.dataAPI.getLabelNames(L.targets[0].profileTypeId+"{}",this.timeSrv.timeRange().from.valueOf(),this.timeSrv.timeRange().to.valueOf())).pipe((0,l.U)(S=>({data:S.map(U=>({text:U}))}))):(0,i.of)({data:[]}):L.targets[0].type==="labelValue"?!L.targets[0].labelName||!L.targets[0].profileTypeId?(0,i.of)({data:[]}):(0,c.D)(this.dataAPI.getLabelValues(L.targets[0].profileTypeId+"{}",L.targets[0].labelName,this.timeSrv.timeRange().from.valueOf(),this.timeSrv.timeRange().to.valueOf())).pipe((0,l.U)(S=>({data:S.map(U=>({text:U}))}))):(0,i.of)({data:[]})}}const b="both",T={groupBy:[],labelSelector:"{}",spanSelector:[]};class O extends o.CK{constructor(L,S=(0,g.J)()){super(L),this.templateSrv=S,this.variables=new P(this)}query(L){const S=L.targets.filter(U=>U.profileTypeId).map(U=>U.labelSelector===""?{...U,labelSelector:"{}"}:I(U,L.app));return S.length?super.query({...L,targets:S}):(0,i.of)({data:[]})}async getProfileTypes(L,S){return await this.getResource("profileTypes",{start:L,end:S})}async getAllProfileTypes(){return await this.getResource("profileTypes")}async getLabelNames(L,S,U){return await this.getResource("labelNames",{query:this.templateSrv.replace(L),start:S,end:U})}async getLabelValues(L,S,U,N){return await this.getResource("labelValues",{label:this.templateSrv.replace(S),query:this.templateSrv.replace(L),start:U,end:N})}applyTemplateVariables(L,S){return{...L,labelSelector:this.templateSrv.replace(L.labelSelector??"",S),profileTypeId:this.templateSrv.replace(L.profileTypeId??"",S)}}async importFromAbstractQueries(L){return L.map(S=>this.importFromAbstractQuery(S))}importFromAbstractQuery(L){return{refId:L.refId,labelSelector:(0,u.PL)(L),queryType:"both",profileTypeId:"",groupBy:[]}}async exportToAbstractQueries(L){return L.map(S=>this.exportToAbstractQuery(S))}exportToAbstractQuery(L){const S=L.labelSelector;if(!S||S.length===0)return{refId:L.refId,labelMatchers:[]};const U=a().tokenize(S,M);return{refId:L.refId,labelMatchers:(0,u.UO)(U)}}getDefaultQuery(L){return R}}const R={...T,queryType:b};function I(x,L){let S={...R,...x};return L!==r.zj.Explore&&S.queryType==="both"&&(S.queryType="profile"),S}const M={"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},punctuation:/[{}(),.]/}},40268:(Q,A,e)=>{"use strict";e.d(A,{k:()=>ke,e:()=>ot});var n=e(69781),a=e(57298),i=e(86457),r=e(26722),o=e(4558),g=e(20498),u=e(20298),c=e(4230),l=e(47862),d=e(46901),f=e(98147),m=e(65821),v=e(61129),E=e(24035),p=e(69391),h=e(66261),s=e(29630),y=e(60490),D=e(76932),C=e(31733),P=e(76067),b=e(97216),T=e(85765),O=e(38834),R=e(76772),I=e(41374),M=e(90642),x=e(71667),L=e(25086),S=e.n(L),U=e(10020),N=e(60100),w=e(51343),G=e(79106),_=e(87512),K=e(88971),k=e(94590),z=e(49311),W=e(90119),Z=e(83998);const H="time-of-day-picker-panel",X=({minuteStep:it=1,showHour:ce=!0,showSeconds:le=!1,onChange:Re,value:Ae,size:Oe="auto",disabled:$e,disabledHours:Ye,disabledMinutes:Ne,disabledSeconds:je,placeholder:ut,format:Fe="HH:mm",defaultValue:Te=void 0,allowEmpty:Ve=!1,width:tt})=>{const ae=(0,P.wW)(ne),J=()=>tt?(0,D.css)`
        width: ${tt}px;
      `:(0,W.ht)()[Oe];return C.createElement(k.Z,{value:Ae,defaultValue:Te,onChange:te=>Re(te),showHour:ce,showSecond:le,format:Fe,allowEmpty:Ve,className:(0,D.cx)(J(),ae.input),popupClassName:(0,D.cx)(ae.picker,H),minuteStep:it,inputIcon:C.createElement(Y,{wrapperStyle:ae.caretWrapper}),disabled:$e,disabledHours:Ye,disabledMinutes:Ne,disabledSeconds:je,placeholder:ut})},Y=({wrapperStyle:it=""})=>C.createElement("div",{className:it},C.createElement(z.J,{name:"angle-down"})),ne=it=>{const ce=it.components.input.background,le=it.v1.palette.black,Re=it.colors.background.secondary,Ae=it.shape.radius.default,Oe=it.components.input.borderColor;return{caretWrapper:(0,D.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${it.colors.text.secondary};
    `,picker:(0,D.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${ce};
        border-color: ${Oe};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${it.v1.palette.orange};
            border-radius: ${Ae};
          }

          &:hover {
            background: ${Re};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${it.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${le};
        background-color: ${ce};
        border-color: ${Oe};
        border-radius: ${Ae};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${ce};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,D.css)`
      .rc-time-picker-input {
        background-color: ${ce};
        border-radius: ${Ae};
        border-color: ${Oe};
        height: ${it.spacing(4)};

        &:focus {
          ${(0,Z.focusCss)(it)}
        }

        &:disabled {
          background-color: ${it.colors.action.disabledBackground};
          color: ${it.colors.action.disabledText};
          border: 1px solid ${it.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${it.colors.text.secondary};
      }
    `}},se=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((it,ce)=>({label:it,value:ce+1})),re=({value:it,onChange:ce})=>{const le=(0,P.wW)(ge),Re=Date.now(),Ae=(0,U.Pr)(it.timezone??"utc",Re),Oe=(0,y.h4)().getCurrent()?.getTimezone()===it.timezone,[$e,Ye]=(0,C.useState)(!1),Ne=()=>{Ye(!$e)},je=te=>{if(!te)return;const de=S()();if(te){const be=te.split(":");de.set("hour",parseInt(be[0],10)),de.set("minute",parseInt(be[1],10))}return de},ut=()=>{let te="Everyday";return it.fromDayOfWeek&&!it.toDayOfWeek&&(te=se[it.fromDayOfWeek-1].label),te},Fe=()=>{const te=C.createElement(C.Fragment,null,C.createElement(K.d,{title:Ae?.name}),C.createElement(_.v,{timeZone:it.timezone,timestamp:Re}));return Oe?C.createElement(C.Fragment,null,"Dashboard timezone (",te,")"):te},Te=(te,de)=>{const be=te?te.format("HH:mm"):void 0;ce(de==="from"?{...it,from:be}:{...it,to:be})},Ve=te=>{ce({...it,timezone:te})},tt=te=>{const de=te?te.value:void 0,be=te?it.toDayOfWeek:void 0;ce({...it,fromDayOfWeek:de,toDayOfWeek:be})},ae=te=>{ce({...it,toDayOfWeek:te?te.value:void 0})},J=()=>$e?C.createElement(N.O,{value:it.timezone,includeInternal:!0,onChange:te=>Ve(te),onBlur:()=>Ye(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):C.createElement("div",{className:le.timezoneContainer},C.createElement("div",{className:le.timezone},Fe()),C.createElement(w.zx,{variant:"secondary",onClick:Ne,size:"sm"},"Change timezone"));return C.createElement(b.C,{className:le.wrapper},C.createElement(T.g,{label:"From"},C.createElement(G.Lh,{spacing:"xs"},C.createElement(O.Ph,{options:se,isClearable:!0,placeholder:"Everyday",value:it.fromDayOfWeek??null,onChange:te=>tt(te),width:20}),C.createElement(X,{value:je(it.from),onChange:te=>Te(te,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),C.createElement(T.g,{label:"To"},C.createElement(G.Lh,{spacing:"xs"},(it.fromDayOfWeek||it.toDayOfWeek)&&C.createElement(O.Ph,{options:se,isClearable:!0,placeholder:ut(),value:it.toDayOfWeek??null,onChange:te=>ae(te),width:20}),C.createElement(X,{value:je(it.to),onChange:te=>Te(te,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),C.createElement(T.g,{label:"Timezone"},J()))},ge=it=>({wrapper:(0,D.css)({maxWidth:it.spacing(60),marginBottom:it.spacing(2)}),timezoneContainer:(0,D.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,D.css)`
      margin-right: 5px;
    `}),q="Enabling this returns annotations that match any of the tags specified below",me=C.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),oe=[{label:"Dashboard",value:x._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:x._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],fe=[{label:"Annotations & Alerts",value:x.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:x.hR.TimeRegions,description:"Configure a repeating time region"}],ve=[10,50,100,200,300,500,1e3,2e3].map(it=>({label:String(it),value:it}));function pe({query:it,onChange:ce}){const le=it,{limit:Re,matchAny:Ae,tags:Oe,type:$e,queryType:Ye}=le;let Ne=Ye??x.hR.Annotations;const je=(0,C.useMemo)(()=>(0,y.h4)().dashboard?.getTimezone(),[]),ut=(0,P.wW)(Me),Fe=te=>ce({...le,type:te.value}),Te=te=>ce({...le,limit:te.value}),Ve=te=>ce({...le,matchAny:te.target.checked}),tt=te=>ce({...le,tags:te}),ae=te=>{const de={...le,queryType:te.value};de.queryType===x.hR.TimeRegions?de.timeRegion||(de.timeRegion={timezone:je}):delete de.timeRegion,ce(de)},J=te=>{ce({...le,timeRegion:te})};return C.createElement(b.C,{className:ut.container},C.createElement(T.g,{label:"Query type"},C.createElement(O.Ph,{inputId:"grafana-annotations__query-type",options:fe,value:Ne,onChange:ae})),Ne===x.hR.Annotations&&C.createElement(C.Fragment,null,C.createElement(T.g,{label:"Filter by"},C.createElement(O.Ph,{inputId:"grafana-annotations__filter-by",options:oe,value:$e,onChange:Fe})),C.createElement(T.g,{label:"Max limit"},C.createElement(O.Ph,{inputId:"grafana-annotations__limit",width:16,options:ve,value:Re,onChange:Te})),$e===x._$.Tags&&C.createElement(C.Fragment,null,C.createElement(T.g,{label:"Match any",description:q},C.createElement(R.r,{id:"grafana-annotations__match-any",value:Ae,onChange:Ve})),C.createElement(T.g,{label:"Tags",description:me},C.createElement(I.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:tt,tagOptions:M.lK,tags:Oe??[]})))),Ne===x.hR.TimeRegions&&le.timeRegion&&C.createElement(re,{value:le.timeRegion,onChange:J}))}const Me=it=>({container:(0,D.css)({maxWidth:it.spacing(60),marginBottom:it.spacing(2)})});var Pe=e(85666),Ee=e(71510);function he(it,ce,le,Re){if(!ce)return;const Ae=(0,Ee.q7)(ce,le);if(!Ae.length)return;const Oe=[],$e=[],Ye=[],Ne=ce.timezone??Re;for(const je of Ae){let ut=je.from,Fe=je.to;const Te=(0,U.Pr)(Ne,ut);if(Te){const Ve=Te.offsetInMins*60*1e3;ut+=Ve,Fe+=Ve}Oe.push(ut),$e.push(Fe),Ye.push(it)}return{fields:[{name:"time",type:Pe.fS.time,values:Oe,config:{}},{name:"timeEnd",type:Pe.fS.time,values:$e,config:{}},{name:"text",type:Pe.fS.string,values:Ye,config:{}}],length:Oe.length}}let Le=100;class ke extends m.CK{constructor(ce){super(ce),this.annotations={QueryEditor:pe,prepareAnnotation(le){return le.target=le.target??{type:le.type??x._$.Dashboard,limit:le.limit??100,tags:le.tags??[],matchAny:le.matchAny??!1},le},prepareQuery(le){let Re;if((0,n.isString)(le.datasource)){const $e=(0,s.pR)(le.datasource,{returnDefaultAsNull:!1});$e&&(Re=$e)}else Re=le.datasource;const{filter:Ae,...Oe}=le;return{...Oe,refId:le.name,queryType:x.hR.Annotations,datasource:Re}}}}getDefaultQuery(){return{queryType:x.hR.RandomWalk}}query(ce){const le=[],Re=[],Ae=(0,v.J)();for(const Oe of ce.targets){if(Oe.queryType===x.hR.Annotations)return(0,a.D)(this.getAnnotations({range:ce.range,rangeRaw:ce.range.raw,annotation:Oe,dashboard:(0,y.h4)().getCurrent()}));if(!Oe.hide){if(Oe.queryType===x.hR.Snapshot){le.push((0,i.of)({data:(Oe.snapshot??[]).map($e=>(0,g.vP)($e)),state:u.Gu.Done}));continue}if(Oe.queryType===x.hR.TimeRegions){const $e=he("",Oe.timeRegion,ce.range,ce.timezone);le.push((0,i.of)({data:$e?[$e]:[],state:u.Gu.Done}));continue}if(Oe.queryType===x.hR.LiveMeasurements){let $e=Ae.replace(Oe.channel,ce.scopedVars);const{filter:Ye}=Oe,Ne=(0,c.H7)($e);if(!(0,c.nU)(Ne))continue;const je={maxLength:ce.maxDataPoints??500};Oe.buffer?(je.maxDelta=Oe.buffer,je.maxLength=je.maxLength*2):ce.rangeRaw?.to==="now"&&(je.maxDelta=ce.range.to.valueOf()-ce.range.from.valueOf()),le.push((0,E.gj)().getDataStream({key:`${ce.requestId}.${Le++}`,addr:Ne,filter:Ye,buffer:je}))}else Oe.queryType||(Oe.queryType=x.hR.RandomWalk),Re.push(Oe)}}return Re.length&&le.push(super.query({...ce,targets:Re})),le.length?le.length===1?le[0]:(0,r.T)(...le):(0,i.of)()}listFiles(ce,le){return this.query({targets:[{refId:"A",queryType:x.hR.List,path:ce}],maxDataPoints:le}).pipe((0,o.U)(Re=>{const Ae=Re.data[0]??new l.v;return new d.U(Ae)}))}metricFindQuery(){return Promise.resolve([])}async getAnnotations(ce){const le=ce.annotation.target;if(le?.queryType===x.hR.TimeRegions){const Ye=he(ce.annotation.name,le.timeRegion,ce.range,(0,y.h4)().getCurrent()?.timezone);return Promise.resolve({data:Ye?[Ye]:[]})}const Re=ce.annotation,Ae=Re.target,Oe={from:ce.range.from.valueOf(),to:ce.range.to.valueOf(),limit:Ae.limit,tags:Ae.tags,matchAny:Ae.matchAny};if(Ae.type===x._$.Dashboard){if(!ce.dashboard.uid)return Promise.resolve({data:[]});Oe.dashboardUID=ce.dashboard.uid,delete Oe.tags}else{if(!Array.isArray(Ae.tags)||Ae.tags.length===0)return Promise.resolve({data:[]});const Ye=(0,v.J)(),Ne="__delimiter__",je=[];for(const ut of Oe.tags){const Fe=Ye.replace(ut,{},Te=>typeof Te=="string"?Te:Te.join(Ne));for(const Te of Fe.split(Ne))je.push(Te)}Oe.tags=je}const $e=await(0,p.i)().get("/api/annotations",Oe,`grafana-data-source-annotations-${Re.name}-${ce.dashboard?.uid}`);return{data:[(0,f.g0)($e)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function ot(){return await(0,h.F)().get("-- Grafana --")}},71667:(Q,A,e)=>{"use strict";e.d(A,{_$:()=>r,hR:()=>n,ip:()=>i,wi:()=>a});var n=(o=>(o.LiveMeasurements="measurements",o.Annotations="annotations",o.Snapshot="snapshot",o.TimeRegions="timeRegions",o.RandomWalk="randomWalk",o.List="list",o.Read="read",o.Search="search",o))(n||{});const a={refId:"A",queryType:"randomWalk"},i={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var r=(o=>(o.Dashboard="dashboard",o.Tags="tags",o))(r||{})},24111:(Q,A,e)=>{"use strict";e.d(A,{F:()=>u,k:()=>l});var n=e(20498),a=e(83599),i=e(67451),r=e(30253),o=e(74642),g=e(71667);function u(d,f){return new Promise(m=>{if(d.datasource?.uid===i.JY){c(f,d),m(!0);return}a.Z.publish(new o.VJ({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{c(f,d),m(!0)},onDismiss:()=>{m(!1)}}))})}function c(d,f){const m=d.map(E=>(0,n.Y)(E)),v={refId:"A",queryType:g.hR.Snapshot,snapshot:m,datasource:{uid:i.JY}};f.updateQueries({dataSource:{uid:i.JY},queries:[v]}),f.refresh()}function l(d){return(f,m,v)=>{r.eM(f).subscribe(async E=>{const p=[];E.dataFrames.forEach(h=>{const s=(0,n.Y)(h);p.push(s)}),d({...g.ip,snapshot:p,file:E.file},m)})}}},49973:(Q,A,e)=>{"use strict";e.d(A,{Wp:()=>g,c6:()=>c,xM:()=>r});var n=e(47862),a=e(85666),i=e(12179);function r(l){const d=l.spans.map(m=>o(m,l.processes)),f=new n.v({fields:[{name:"traceID",type:a.fS.string},{name:"spanID",type:a.fS.string},{name:"parentSpanID",type:a.fS.string},{name:"operationName",type:a.fS.string},{name:"serviceName",type:a.fS.string},{name:"serviceTags",type:a.fS.other},{name:"startTime",type:a.fS.number},{name:"duration",type:a.fS.number},{name:"logs",type:a.fS.other},{name:"tags",type:a.fS.other},{name:"warnings",type:a.fS.other},{name:"stackTraces",type:a.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const m of d)f.add(m);return f}function o(l,d){return{spanID:l.spanID,traceID:l.traceID,parentSpanID:l.references?.find(f=>f.refType==="CHILD_OF")?.spanID,operationName:l.operationName,startTime:l.startTime/1e3,duration:l.duration/1e3,logs:l.logs.map(f=>({...f,timestamp:f.timestamp/1e3})),tags:l.tags,warnings:l.warnings??void 0,stackTraces:l.stackTraces,serviceName:d[l.processID].serviceName,serviceTags:d[l.processID].tags}}function g(l,d){const f=new n.v({fields:[{name:"traceID",type:a.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:d.uid,datasourceName:d.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:a.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:a.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:a.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),m=l.map(u).sort((v,E)=>E?.startTime-v?.startTime);for(const v of m)f.add(v);return f}function u(l){const d=(0,i.transformTraceData)(l);if(d)return{traceID:d.traceID,startTime:d.startTime/1e3,duration:d.duration,traceName:d.traceName}}function c(l){let d={traceID:"",spans:[],processes:{},warnings:null},f=[];for(let m=0;m<l.length;m++){const v=l.get(m);d.traceID||(d.traceID=v.traceID),f.find(E=>E===v.serviceName)||(f.push(v.serviceName),d.processes[`p${f.length}`]={serviceName:v.serviceName,tags:v.serviceTags}),d.spans.push({traceID:v.traceID,spanID:v.spanID,duration:v.duration*1e3,references:v.parentSpanID?[{refType:"CHILD_OF",spanID:v.parentSpanID,traceID:v.traceID}]:[],flags:0,logs:v.logs.map(E=>({...E,timestamp:E.timestamp*1e3})),operationName:v.operationName,processID:Object.keys(d.processes).find(E=>d.processes[E].serviceName===v.serviceName)||"",startTime:v.startTime*1e3,tags:v.tags,warnings:v.warnings?v.warnings:null})}return{data:[d],total:0,limit:0,offset:0,errors:null}}},74823:(Q,A,e)=>{"use strict";e.d(A,{$5:()=>n,EH:()=>r,ZP:()=>c,md:()=>o,r8:()=>g,xY:()=>u});const n=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],a=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],i=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],r=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],o=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],g=[...n,...r,...o],u={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...a,...i].map(l=>l.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${g.map(l=>l.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},c=u},24608:(Q,A,e)=>{"use strict";e.d(A,{D:()=>h,w:()=>s});var n=e(69781),a=e.n(n),i=e(86457),r=e(57298),o=e(44130),g=e(89582),u=e(4558),c=e(96413),l=e(56183),d=e(29739),f=e(60400),m=e(51023),v=e(20298),E=e(66261),p=e(54291);const h="-- Mixed --";class s extends m.MF{constructor(C){super(C)}query(C){const P=C.targets.filter(O=>O.datasource?.uid!==h);if(!P.length)return(0,i.of)({data:[]});const b=(0,n.groupBy)(P,"datasource.uid"),T=[];for(const O in b){const R=b[O];T.push({datasource:(0,E.F)().get(R[0].datasource,C.scopedVars),targets:R})}return T.length?this.batchQueries(T,C):(0,i.of)({data:[]})}batchQueries(C,P){const b=C.filter(this.isQueryable).map((T,O)=>(0,r.D)(T.datasource).pipe((0,g.z)(R=>{const I=(0,n.cloneDeep)(P);return I.requestId=`mixed-${O}-${I.requestId||""}`,I.targets=T.targets,(0,r.D)(R.query(I)).pipe((0,u.U)(M=>({...M,data:M.data||[],state:v.Gu.Loading,key:`mixed-${O}-${M.key||""}`})),(0,c.q)(),(0,l.K)(M=>(M=(0,p.P)(M),M.message=`${R.name}: ${M.message}`,(0,i.of)([{data:[],state:v.Gu.Error,error:M,key:`mixed-${O}-${I.requestId||""}`}]))))})));return(0,o.D)(b).pipe(y(),(0,u.U)(this.finalizeResponses),(0,d.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(C){return C&&Array.isArray(C.targets)&&C.targets.length>0}finalizeResponses(C){const{length:P}=C;if(P===0)return C;const b=C.find(T=>T.state===v.Gu.Error);return b?C.push(b):C[P-1].state=v.Gu.Done,C}}function y(){return(0,f.u)((D,C)=>C.reduce((P,b)=>(P.push.apply(P,b),P),D),[])}},35933:(Q,A,e)=>{"use strict";e.d(A,{F:()=>r});var n=e(97336),a=e(75150),i=e(11137);function r(l,d,f,m="="){if(!d||!f)throw new Error("Need label to add to query.");const v=o(l);if(!v.length)return l;const E=g(d,f,m);return u(l,v,E)}function o(l){const d=n.E2.parse(l),f=[];return d.iterate({enter:({to:m,from:v,type:E})=>{if(E.id===n.m6){const p=(0,i._)(l.substring(v,m));return f.push({query:p.query,from:v,to:m}),!1}}}),f}function g(l,d,f){const m=d===1/0?"+Inf":d.toString();return{label:l,op:f,value:m}}function u(l,d,f){const m=new a.K;let v="",E=0;for(let p=0;p<d.length;p++){const h=d[p],s=p===d.length-1,y=l.substring(E,h.from),D=s?l.substring(h.to):"";c(h.query.labels,f)||h.query.labels.push(f);const C=m.renderQuery(h.query);v+=y+C+D,E=h.to}return v}function c(l,d){return l.find(f=>f.label===d.label&&f.value===d.value)}},26959:(Q,A,e)=>{"use strict";e.d(A,{Z:()=>w});var n=e(76932),a=e(31733),i=e(98147),r=e(64704),o=e(49311),g=e(51343),u=e(76067),c=e(85853);function l(G){return typeof G=="object"&&G!==null&&"isCanceled"in G}const d=G=>{let _=!1;return{promise:new Promise((k,z)=>{const W={isCanceled:!0};G.then(Z=>_?z(W):k(Z)),G.catch(Z=>z(_?W:Z))}),cancel(){_=!0}}};var f=e(78114),m=e(61231),v=e(33227),E=e(61375),p=e(79106),h=e(36667),s=e(64516),y=e(43794);const D="{}",C="__name__",P=25;function b(G){let _="";const K=[];for(const k of G)if((k.name===C||k.selected)&&k.values&&k.values.length>0){const z=k.values.filter(W=>W.selected).map(W=>W.name);z.length>1?K.push(`${k.name}=~"${z.map(f.tU).join("|")}"`):z.length===1&&(k.name===C?_=z[0]:K.push(`${k.name}="${(0,f.U9)(z[0])}"`))}return[_,"{",K.join(","),"}"].join("")}function T(G,_,K){return G.map(k=>{const z=_[k.name];if(z){let W;if(k.name===K&&k.values)W=k.values;else{const Z=new Set(k.values?.filter(H=>H.selected).map(H=>H.name)||[]);W=z.map(H=>({name:H,selected:Z.has(H)}))}return{...k,loading:!1,values:W,hidden:!z,facets:W.length}}return{...k,loading:!1,hidden:!z,values:void 0,facets:0}})}const O=(0,v.B)(G=>({wrapper:(0,n.css)`
    background-color: ${G.colors.background.secondary};
    padding: ${G.spacing(1)};
    width: 100%;
  `,list:(0,n.css)`
    margin-top: ${G.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,n.css)`
    & + & {
      margin: ${G.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,n.css)`
    font-family: ${G.typography.fontFamilyMonospace};
    margin-bottom: ${G.spacing(1)};
  `,status:(0,n.css)`
    padding: ${G.spacing(.5)};
    color: ${G.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,n.css)`
    opacity: 1;
  `,error:(0,n.css)`
    color: ${G.colors.error.main};
  `,valueList:(0,n.css)`
    margin-right: ${G.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,n.css)`
    border-left: 1px solid ${G.colors.border.medium};
    margin: ${G.spacing(1)} 0;
    padding: ${G.spacing(1)} 0 ${G.spacing(1)} ${G.spacing(1)};
  `,valueListArea:(0,n.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${G.spacing(1)};
  `,valueTitle:(0,n.css)`
    margin-left: -${G.spacing(.5)};
    margin-bottom: ${G.spacing(1)};
  `,validationStatus:(0,n.css)`
    padding: ${G.spacing(.5)};
    margin-bottom: ${G.spacing(1)};
    color: ${G.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class R extends a.Component{constructor(){super(...arguments),this.valueListsRef=a.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=_=>{this.setState({labelSearchTerm:_.target.value})},this.onChangeMetricSearch=_=>{this.setState({metricSearchTerm:_.target.value})},this.onChangeValueSearch=_=>{this.setState({valueSearchTerm:_.target.value})},this.onClickRunQuery=()=>{const _=b(this.state.labels);this.props.onChange(_)},this.onClickRunRateQuery=()=>{const K=`rate(${b(this.state.labels)}[$__rate_interval])`;this.props.onChange(K)},this.onClickClear=()=>{this.setState(_=>({labels:_.labels.map(k=>({...k,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(C,D)},this.onClickLabel=(_,K,k)=>{const z=this.state.labels.find(H=>H.name===_);if(!z)return;const W=!z.selected;let Z={selected:W};if(z.values&&!W){const H=z.values.map(X=>({...X,selected:!1}));Z={...Z,facets:0,values:H}}this.setState({labelSearchTerm:""}),this.updateLabelState(_,Z,"",()=>this.doFacettingForLabel(_))},this.onClickValue=(_,K,k)=>{const z=this.state.labels.find(Z=>Z.name===_);if(!z||!z.values)return;this.setState({labelSearchTerm:""});const W=z.values.map(Z=>({...Z,selected:Z.name===K?!Z.selected:Z.selected}));this.updateLabelState(_,{values:W},"",()=>this.doFacetting(_))},this.onClickMetric=(_,K,k)=>{const z=this.state.labels.find(H=>H.name===_);if(!z||!z.values)return;this.setState({metricSearchTerm:""});const W=z.values.map(H=>({...H,selected:H.name===K||H.selected?!H.selected:H.selected})),Z=W.some(H=>H.selected);this.updateLabelState(_,{selected:Z,values:W},"",()=>this.doFacetting(_))},this.onClickValidate=()=>{const _=b(this.state.labels);this.validateSelector(_)},this.doFacetting=_=>{const K=b(this.state.labels);if(K===D){const k=this.state.labels.map(z=>({...z,facets:0,values:void 0,hidden:!1}));this.setState({labels:k},()=>{this.state.labels.forEach(z=>(z.selected||z.name===C)&&this.fetchValues(z.name,K))})}else this.fetchSeries(K,_)}}updateLabelState(_,K,k="",z){this.setState(W=>{const Z=W.labels.map(X=>X.name===_?{...X,...K}:X),H=k?"":W.error;return{labels:Z,status:k,error:H,validationStatus:""}},z)}componentDidMount(){const{languageProvider:_,lastUsedLabels:K}=this.props;if(_){const k=K;_.start(this.props.timeRange).then(()=>{let z=_.getLabelKeys();this.fetchValues(C,D);const W=z.map((Z,H,X)=>({name:Z,selected:k.includes(Z),loading:!1}));this.setState({labels:W},()=>{this.state.labels.forEach(Z=>{Z.selected&&this.fetchValues(Z.name,D)})})})}}doFacettingForLabel(_){const K=this.state.labels.find(z=>z.name===_);if(!K)return;const k=this.state.labels.filter(z=>z.selected).map(z=>z.name);this.props.storeLastUsedLabels(k),K.selected?K.values||this.fetchValues(_,b(this.state.labels)):this.doFacetting()}async fetchValues(_,K){const{languageProvider:k}=this.props;this.updateLabelState(_,{loading:!0},`Fetching values for ${_}`);try{let z=await k.getLabelValues(_);if(K!==b(this.state.labels)){this.updateLabelState(_,{loading:!1});return}const W=[],{metricsMetadata:Z}=k;for(const H of z){const X={name:H};if(_===C&&Z){const Y=Z[H];Y&&(X.details=`(${Y.type}) ${Y.help}`)}W.push(X)}this.updateLabelState(_,{values:W,loading:!1})}catch(z){console.error(z)}}async fetchSeries(_,K){const{languageProvider:k}=this.props;K&&this.updateLabelState(K,{loading:!0},`Facetting labels for ${_}`);try{const z=await k.fetchSeriesLabels(_,!0);if(_!==b(this.state.labels)){K&&this.updateLabelState(K,{loading:!1});return}if(Object.keys(z).length===0){this.setState({error:`Empty results, no matching label for ${_}`});return}const W=T(this.state.labels,z,K);this.setState({labels:W,error:""}),K&&this.updateLabelState(K,{loading:!1})}catch(z){console.error(z)}}async validateSelector(_){const{languageProvider:K}=this.props;this.setState({validationStatus:`Validating selector ${_}`,error:""});const k=await K.fetchSeries(_);this.setState({validationStatus:`Selector is valid (${k.length} series found)`})}render(){const{theme:_}=this.props,{labels:K,labelSearchTerm:k,metricSearchTerm:z,status:W,error:Z,validationStatus:H,valueSearchTerm:X}=this.state,Y=O(_);if(K.length===0)return a.createElement("div",{className:Y.wrapper},a.createElement(E.u,{text:"Loading labels..."}));let ne=K.find(oe=>oe.name===C);ne&&z&&(ne={...ne,values:ne.values?.filter(oe=>oe.selected||oe.name.includes(z))});let se=K.filter(oe=>!oe.hidden&&oe.name!==C);k&&(se=se.filter(oe=>oe.selected||oe.name.includes(k)));let re=se.filter(oe=>oe.selected&&oe.values);X&&(re=re.map(oe=>({...oe,values:oe.values?.filter(fe=>fe.selected||fe.name.includes(X))})));const ge=b(this.state.labels),q=ge===D,me=ne?.values?.length||0;return a.createElement("div",{className:Y.wrapper},a.createElement(p.Lh,{align:"flex-start",spacing:"lg"},a.createElement("div",null,a.createElement("div",{className:Y.section},a.createElement(h._,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),a.createElement("div",null,a.createElement(s.I,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:z})),a.createElement("div",{role:"list",className:Y.valueListWrapper},a.createElement(m.t7,{height:Math.min(450,me*P),itemCount:me,itemSize:P,itemKey:oe=>ne.values[oe].name,width:300,className:Y.valueList},({index:oe,style:fe})=>{const ve=ne?.values?.[oe];return ve?a.createElement("div",{style:fe},a.createElement(y._,{name:ne.name,value:ve?.name,title:ve.details,active:ve?.selected,onClick:this.onClickMetric,searchTerm:z})):null})))),a.createElement("div",null,a.createElement("div",{className:Y.section},a.createElement(h._,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),a.createElement("div",null,a.createElement(s.I,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:k})),a.createElement("div",{className:Y.list,style:{height:120}},se.map(oe=>a.createElement(y._,{key:oe.name,name:oe.name,loading:oe.loading,active:oe.selected,hidden:oe.hidden,facets:oe.facets,onClick:this.onClickLabel,searchTerm:k})))),a.createElement("div",{className:Y.section},a.createElement(h._,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),a.createElement("div",null,a.createElement(s.I,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:X})),a.createElement("div",{className:Y.valueListArea,ref:this.valueListsRef},re.map(oe=>a.createElement("div",{role:"list",key:oe.name,"aria-label":`Values for ${oe.name}`,className:Y.valueListWrapper},a.createElement("div",{className:Y.valueTitle},a.createElement(y._,{name:oe.name,loading:oe.loading,active:oe.selected,hidden:oe.hidden,facets:oe.facets||oe.values?.length,onClick:this.onClickLabel})),a.createElement(m.t7,{height:Math.min(200,P*(oe.values?.length||0)),itemCount:oe.values?.length||0,itemSize:28,itemKey:fe=>oe.values[fe].name,width:200,className:Y.valueList},({index:fe,style:ve})=>{const pe=oe.values?.[fe];return pe?a.createElement("div",{style:ve},a.createElement(y._,{name:oe.name,value:pe?.name,active:pe?.selected,onClick:this.onClickValue,searchTerm:X})):null}))))))),a.createElement("div",{className:Y.section},a.createElement(h._,null,"4. Resulting selector"),a.createElement("div",{"aria-label":"selector",className:Y.selector},ge),H&&a.createElement("div",{className:Y.validationStatus},H),a.createElement(p.Lh,null,a.createElement(g.zx,{"aria-label":"Use selector for query button",disabled:q,onClick:this.onClickRunQuery},"Use query"),a.createElement(g.zx,{"aria-label":"Use selector as metrics button",variant:"secondary",disabled:q,onClick:this.onClickRunRateQuery},"Use as rate query"),a.createElement(g.zx,{"aria-label":"Validate submit button",variant:"secondary",disabled:q,onClick:this.onClickValidate},"Validate selector"),a.createElement(g.zx,{"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),a.createElement("div",{className:(0,n.cx)(Y.status,(W||Z)&&Y.statusShowing)},a.createElement("span",{className:Z?Y.error:""},Z||W)))))}}const I=(0,u.HE)(R),M=a.lazy(()=>e.e(6031).then(e.bind(e,32578))),x=G=>a.createElement(a.Suspense,{fallback:null},a.createElement(M,{...G})),L=G=>{const _=(0,a.useRef)(null),{onRunQuery:K,onChange:k,...z}=G,W=X=>{_.current=X,k(X),K()},Z=X=>{k(X)},H=X=>{k(X)};return a.createElement(x,{onChange:H,onRunQuery:W,onBlur:Z,...z})},S="grafana.datasources.prometheus.browser.labels";function U(G,_,K){return G?"(Disabled)":_?K?"Metrics browser":"(No metrics found)":"Loading metrics..."}class N extends a.PureComponent{constructor(_){super(_),this.refreshHint=()=>{const{datasource:K,query:k,data:z}=this.props,W=K.getInitHints(),Z=W.length>0?W[0]:null;if(!z||z.series.length===0){this.setState({hint:Z});return}const H=(0,i.aY)(z.series[0])?z.series.map(i.Zr):z.series,X=K.getQueryHints(k,H);let Y=X.length>0?X[0]:null;this.setState({hint:Y??Z})},this.refreshMetrics=async()=>{const{range:K,datasource:{languageProvider:k}}=this.props;this.languageProviderInitializationPromise=d(k.start(K));try{const z=await this.languageProviderInitializationPromise.promise;await Promise.all(z),this.onUpdateLanguage()}catch(z){if(!(l(z)&&z.isCanceled))throw z}},this.onChangeLabelBrowser=K=>{this.onChangeQuery(K,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(K,k)=>{const{query:z,onChange:W,onRunQuery:Z}=this.props;if(W){const H={...z,expr:K};W(H),k&&Z&&Z()}},this.onClickChooserButton=()=>{this.setState(K=>({labelBrowserVisible:!K.labelBrowserVisible})),(0,r.ff)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:K,query:k,onChange:z,onRunQuery:W}=this.props,{hint:Z}=this.state;Z?.fix?.action&&z(K.modifyQuery(k,Z.fix.action)),W()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:K}}=this.props,{metrics:k}=K;k&&this.setState({syntaxLoaded:!0})},this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(_){const{data:K,datasource:{languageProvider:k},range:z}=this.props;k!==_.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const W=this.rangeChangedToRefresh(z,_.range);(k!==_.datasource.languageProvider||W)&&this.refreshMetrics(),K&&_.data&&_.data.series!==K.series&&this.refreshHint()}rangeChangedToRefresh(_,K){if(_&&K){const k=(0,f.o8)(_.from.valueOf())===(0,f.o8)(K.from.valueOf()),z=(0,f.o8)(_.to.valueOf())===(0,f.o8)(K.to.valueOf());return!(k&&z)}return!1}render(){const{datasource:_,datasource:{languageProvider:K},query:k,ExtraFieldElement:z,history:W=[],theme:Z}=this.props,{labelBrowserVisible:H,syntaxLoaded:X,hint:Y}=this.state,ne=K.metrics.length>0,se=U(_.lookupsDisabled,X,ne),re=!(X&&ne);return a.createElement(c.G,{storageKey:S,defaultValue:[]},(ge,q,me)=>a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},a.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:re,type:"button"},se,a.createElement(o.J,{name:H?"angle-down":"angle-right"})),a.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},a.createElement(L,{languageProvider:K,history:W,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:k.expr??"",placeholder:"Enter a PromQL query\u2026",datasource:_}))),H&&a.createElement("div",{className:"gf-form"},a.createElement(I,{languageProvider:K,onChange:this.onChangeLabelBrowser,lastUsedLabels:ge||[],storeLastUsedLabels:q,deleteLastUsedLabels:me,timeRange:this.props.range})),z,Y?a.createElement("div",{className:"query-row-break"},a.createElement("div",{className:"prom-query-field-info text-warning"},Y.label," ",Y.fix?a.createElement("button",{type:"button",className:(0,n.cx)((0,g.gN)(Z),"text-link","muted"),onClick:this.onClickHintFix},Y.fix.label):null)):null))}}const w=(0,u.HE)(N)},71807:(Q,A,e)=>{"use strict";e.d(A,{Z5:()=>Fe,Fu:()=>ut,Zg:()=>Te,lj:()=>tt,b0:()=>Ve});var n=e(76932),a=e(31733),i=e(43051),r=e(85510),o=e(83717),g=e(76067),u=e(25111),c=e(69671),l=e(65008),d=e(83811),f=e(98463),m=e(85498),v=e(41164),E=e(76772);function p({options:ae,onOptionsChange:J}){const te=(0,g.l4)(),de=tt(te),be=m.config.featureToggles.prometheusConfigOverhaulAuth;return a.createElement(f._,{title:"Alerting",className:(0,n.cx)(de.container,{[de.alertingTop]:be})},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(v._,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:ae.readOnly,tooltip:a.createElement(a.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",Te()),interactive:!0,className:de.switchField},a.createElement(E.r,{value:ae.jsonData.manageAlerts!==!1,onChange:De=>J({...ae,jsonData:{...ae.jsonData,manageAlerts:De.currentTarget.checked}})}))))))}var h=e(47701),s=e(64516),y=(ae=>(ae.Public="AzureCloud",ae.China="AzureChinaCloud",ae.USGovernment="AzureUSGovernment",ae.None="",ae))(y||{});const D=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function C(ae){switch(ae.authType){case"msi":case"workloadidentity":return!0;case"clientsecret":return!!(ae.azureCloud&&ae.tenantId&&ae.clientId&&ae.clientSecret)}}const P=Symbol("Concealed client secret");function b(){return m.config.azure.cloud||y.Public}function T(ae){if(ae.secureJsonFields.azureClientSecret)return P;{const J=ae.secureJsonData?.azureClientSecret;return typeof J=="string"&&J.length>0?J:void 0}}function O(ae){return!!ae.jsonData.azureCredentials}function R(){return m.config.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:b()}}function I(ae){const J=ae.jsonData.azureCredentials;if(!J)return R();switch(J.authType){case"msi":case"workloadidentity":return J.authType==="msi"&&m.config.azure.managedIdentityEnabled||J.authType==="workloadidentity"&&m.config.azure.workloadIdentityEnabled?{authType:J.authType}:{authType:"clientsecret",azureCloud:b()};case"clientsecret":return{authType:"clientsecret",azureCloud:J.azureCloud||b(),tenantId:J.tenantId,clientId:J.clientId,clientSecret:T(ae)}}}function M(ae,J){switch(J.authType){case"msi":case"workloadidentity":if(J.authType==="msi"&&!m.config.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");if(J.authType==="workloadidentity"&&!m.config.azure.workloadIdentityEnabled)throw new Error("Workload Identity authentication is not enabled in Grafana config.");return ae={...ae,jsonData:{...ae.jsonData,azureAuthType:J.authType,azureCredentials:{authType:J.authType}}},ae;case"clientsecret":return ae={...ae,jsonData:{...ae.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:J.azureCloud||b(),tenantId:J.tenantId,clientId:J.clientId}},secureJsonData:{...ae.secureJsonData,azureClientSecret:typeof J.clientSecret=="string"&&J.clientSecret.length>0?J.clientSecret:void 0},secureJsonFields:{...ae.secureJsonFields,azureClientSecret:typeof J.clientSecret=="symbol"}},ae}}function x(ae){return{jsonData:{...ae.jsonData,azureCredentials:R()}}}function L(ae){return{jsonData:{...ae.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}var S=e(71918),U=e(38834),N=e(51343);const w=ae=>{const{credentials:J,azureCloudOptions:te,onCredentialsChange:de,getSubscriptions:be,disabled:De,managedIdentityEnabled:Ue,workloadIdentityEnabled:We}=ae,et=C(J),[ze,_e]=(0,a.useState)([]),[qe,at]=(0,a.useReducer)(nt=>nt+1,0),lt=(0,a.useMemo)(()=>{let nt=[{value:"clientsecret",label:"App Registration"}];return Ue&&nt.push({value:"msi",label:"Managed Identity"}),We&&nt.push({value:"workloadidentity",label:"Workload Identity"}),nt},[Ue,We]);(0,a.useEffect)(()=>{if(!be||!et){ft([]);return}let nt=!1;return be().then(Ct=>{nt||ft(Ct,qe)}),()=>{nt=!0}},[qe]);const ft=(nt,Ct=!1)=>{_e(nt),be&&(Ct&&!J.defaultSubscriptionId&&nt.length>0?Mt(nt[0]):J.defaultSubscriptionId&&(nt.find(Jt=>Jt.value===J.defaultSubscriptionId)||Mt(void 0)))},yt=nt=>{_e([]);const Ct=Ue?"msi":We?"workloadidentity":"clientsecret",kt={...J,authType:nt.value||Ct,defaultSubscriptionId:void 0};de(kt)},wt=nt=>{if(J.authType==="clientsecret"){_e([]);const Ct={...J,azureCloud:nt.value,defaultSubscriptionId:void 0};de(Ct)}},zt=nt=>{if(J.authType==="clientsecret"){_e([]);const Ct={...J,tenantId:nt.target.value,defaultSubscriptionId:void 0};de(Ct)}},$t=nt=>{if(J.authType==="clientsecret"){_e([]);const Ct={...J,clientId:nt.target.value,defaultSubscriptionId:void 0};de(Ct)}},Ie=nt=>{if(J.authType==="clientsecret"){_e([]);const Ct={...J,clientSecret:nt.target.value,defaultSubscriptionId:void 0};de(Ct)}},st=()=>{if(J.authType==="clientsecret"){_e([]);const nt={...J,clientSecret:"",defaultSubscriptionId:void 0};de(nt)}},Mt=nt=>{const Ct={...J,defaultSubscriptionId:nt?.value};de(Ct)},ct=m.config.featureToggles.prometheusConfigOverhaulAuth;return a.createElement("div",{className:"gf-form-group"},lt.length>1&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(S.c,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),a.createElement(U.Ph,{className:"width-15",value:lt.find(nt=>nt.value===J.authType),options:lt,onChange:yt,isDisabled:De}))),J.authType==="clientsecret"&&a.createElement(a.Fragment,null,te&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(S.c,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),a.createElement(U.Ph,{className:"width-15",value:te.find(nt=>nt.value===J.azureCloud),options:te,onChange:wt,isDisabled:De}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(S.c,{className:"width-12"},"Directory (tenant) ID"),a.createElement("div",{className:"width-15"},a.createElement(s.I,{className:(0,n.cx)(ct?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:J.tenantId||"",onChange:zt,disabled:De})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(S.c,{className:"width-12"},"Application (client) ID"),a.createElement("div",{className:"width-15"},a.createElement(s.I,{className:(0,n.cx)(ct?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:J.clientId||"",onChange:$t,disabled:De})))),typeof J.clientSecret=="symbol"?a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(S.c,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),a.createElement(s.I,{id:"azure-client-secret",className:(0,n.cx)(ct?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!De&&a.createElement("div",{className:"gf-form"},a.createElement("div",{className:(0,n.cx)(ct?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},a.createElement(N.zx,{variant:"secondary",type:"button",onClick:st},"reset")))):a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(S.c,{className:"width-12"},"Client Secret"),a.createElement("div",{className:"width-15"},a.createElement(s.I,{className:(0,n.cx)(ct?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:J.clientSecret||"",onChange:Ie,disabled:De}))))),be&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(S.c,{className:"width-12"},"Default Subscription"),a.createElement("div",{className:(0,n.cx)(ct?"width-20":"width-25")},a.createElement(U.Ph,{value:J.defaultSubscriptionId?ze.find(nt=>nt.value===J.defaultSubscriptionId):void 0,options:ze,onChange:Mt,isDisabled:De})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"max-width-30 gf-form-inline"},a.createElement(N.zx,{variant:"secondary",size:"sm",type:"button",onClick:at,disabled:!et},"Load Subscriptions"))))))},G=null,_=ae=>{const{dataSourceConfig:J,onChange:te}=ae,[de,be]=(0,a.useState)(!!J.jsonData.azureEndpointResourceId),De=(0,a.useMemo)(()=>I(J),[J]),Ue=qe=>{te(M(J,qe))},We=qe=>{be(qe.currentTarget.checked),qe.currentTarget.checked||te({...J,jsonData:{...J.jsonData,azureEndpointResourceId:void 0}})},et=qe=>{de&&te({...J,jsonData:{...J.jsonData,azureEndpointResourceId:qe.currentTarget.value}})},ze=m.config.featureToggles.prometheusConfigOverhaulAuth,_e=ze?24:26;return a.createElement(a.Fragment,null,a.createElement("h6",null,"Azure authentication"),a.createElement(w,{managedIdentityEnabled:m.config.azure.managedIdentityEnabled,workloadIdentityEnabled:m.config.azure.workloadIdentityEnabled,credentials:De,azureCloudOptions:D,onCredentialsChange:Ue,disabled:J.readOnly}),a.createElement("h6",null,"Azure configuration"),a.createElement("div",{className:"gf-form-group"},a.createElement(h.Z,null,a.createElement(v._,{labelWidth:_e,label:"Override AAD audience",disabled:J.readOnly},a.createElement(E.x,{value:de,onChange:We}))),de&&a.createElement(h.Z,null,a.createElement(v._,{labelWidth:_e,label:"Resource ID",disabled:J.readOnly},a.createElement(s.I,{className:(0,n.cx)(ze?"width-20":"width-30"),value:J.jsonData.azureEndpointResourceId||"",onChange:et})))))},K=null;var k=e(31388),z=e(60466),W=e(49875),Z=e(83378),H=e(41854);const X=ae=>{const{options:J,onOptionsChange:te,azureAuthSettings:de,sigV4AuthToggleEnabled:be,renderSigV4Editor:De,secureSocksDSProxyEnabled:Ue}=ae,We=(0,k.T2)({config:J,onChange:te}),et=(0,g.l4)(),ze=tt(et);let _e=[];const[qe,at]=(0,a.useState)(J.jsonData.sigV4Auth||!1),lt="custom-sigV4Id",ft={id:lt,label:"SigV4 auth",description:"This is SigV4 auth description",component:a.createElement(a.Fragment,null,De)};be&&_e.push(ft);const yt=de?.azureAuthSupported&&de.getAzureAuthEnabled(J)||!1,[wt,zt]=(0,a.useState)(yt),$t="custom-azureAuthId",Ie={id:$t,label:"Azure auth",description:"This is Azure auth description",component:a.createElement(a.Fragment,null,de.azureSettingsUI&&a.createElement(de.azureSettingsUI,{dataSourceConfig:J,onChange:te}))};de?.azureAuthSupported&&_e.push(Ie);function st(){return qe?lt:wt?$t:We.selectedMethod}let Mt;switch(J.access){case"direct":Mt=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",Te());break;case"proxy":Mt=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",Te());break;default:Mt=a.createElement(a.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",Te())}return a.createElement(a.Fragment,null,a.createElement(z.f,{urlPlaceholder:"http://localhost:9090",config:J,onChange:te,urlLabel:"Prometheus server URL",urlTooltip:Mt}),a.createElement("hr",{className:`${ze.hrTopSpace} ${ze.hrBottomSpace}`}),a.createElement(W.g,{...We,customMethods:_e,onAuthMethodSelect:ct=>{be&&at(ct===lt),de?.azureAuthSupported&&(zt(ct===$t),de.setAzureAuthEnabled(J,ct===$t)),te({...J,basicAuth:ct===Z.H.BasicAuth,withCredentials:ct===Z.H.CrossSiteCredentials,jsonData:{...J.jsonData,sigV4Auth:ct===lt,oauthPassThru:ct===Z.H.OAuthForward}})},selectedMethod:st()}),a.createElement("div",{className:ze.sectionBottomPadding}),Ue&&a.createElement(a.Fragment,null,a.createElement(H.i,{options:J,onOptionsChange:te}),a.createElement("div",{className:ze.sectionBottomPadding})))};var Y=e(17065),ne=e.n(Y),se=e(44992),re=e(69391),ge=e(13341),q=e(28015),me=e(83439),oe=e(91794),fe=e(21568),ve=e(79228);function pe({value:ae,onChange:J,onDelete:te,disabled:de}){const[be,De]=(0,a.useState)(!!ae.datasourceUid),Ue=(0,g.l4)(),We=tt(Ue);return a.createElement("div",{className:"gf-form-group"},a.createElement(v._,{label:"Internal link",labelWidth:ut,disabled:de,tooltip:a.createElement(a.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",Te()),interactive:!0,className:We.switchField},a.createElement(a.Fragment,null,a.createElement(E.r,{value:be,"data-testid":fe.wl.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:et=>De(et.currentTarget.checked)}))),be?a.createElement(v._,{label:"Data source",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"The data source the exemplar is going to navigate to. ",Te()),disabled:de,interactive:!0},a.createElement(ve.q,{tracing:!0,current:ae.datasourceUid,noDefault:!0,width:40,onChange:et=>J({...ae,datasourceUid:et.uid,url:void 0})})):a.createElement(v._,{label:"URL",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",Te()),disabled:de,interactive:!0},a.createElement(s.I,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:ae.url,onChange:et=>J({...ae,datasourceUid:void 0,url:et.currentTarget.value})})),a.createElement(v._,{label:"URL Label",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Use to override the button label on the exemplar traceID field. ",Te()),disabled:de,interactive:!0},a.createElement(s.I,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:ae.urlDisplayLabel,onChange:et=>J({...ae,urlDisplayLabel:et.currentTarget.value})})),a.createElement(v._,{label:"Label name",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",Te()),disabled:de,interactive:!0},a.createElement(s.I,{placeholder:"traceID",spellCheck:!1,width:40,value:ae.name,onChange:et=>J({...ae,name:et.currentTarget.value})})),!de&&a.createElement(v._,{label:"Remove exemplar link",labelWidth:ut,disabled:de},a.createElement(N.zx,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:et=>{et.preventDefault(),te()}})))}function Me({options:ae,onChange:J,disabled:te}){const de=(0,g.l4)(),be=tt(de);return a.createElement("div",{className:be.sectionBottomPadding},a.createElement(f._,{title:"Exemplars",className:be.container},ae&&ae.map((De,Ue)=>a.createElement(pe,{key:Ue,value:De,onChange:We=>{const et=[...ae];et.splice(Ue,1,We),J(et)},onDelete:()=>{const We=[...ae];We.splice(Ue,1),J(We)},disabled:te})),!te&&a.createElement(N.zx,{variant:"secondary","data-testid":fe.wl.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,n.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:De=>{De.preventDefault();const Ue=[...ae||[],{name:"traceID"}];J(Ue)}},"Add"),te&&!ae&&a.createElement("i",null,"No exemplars configurations")))}const Pe={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},Ee=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],he=[{value:q.c.Builder,label:"Builder"},{value:q.c.Code,label:"Code"}],Le=[{value:oe.x3.Low,label:"Low"},{value:oe.x3.Medium,label:"Medium"},{value:oe.x3.High,label:"High"},{value:oe.x3.None,label:"None"}],ke=[{value:oe.T8.Prometheus,label:oe.T8.Prometheus},{value:oe.T8.Cortex,label:oe.T8.Cortex},{value:oe.T8.Mimir,label:oe.T8.Mimir},{value:oe.T8.Thanos,label:oe.T8.Thanos}],ot=/^$|^\d+(ms|[Mwdhmsy])$/,it=/(\d+)(.+)/,ce="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",le=(ae,J)=>{if(!J||!Pe[J])return;const de=Pe[J]?.filter(De=>!!De.value&&ne().lte(De.value,ae)).map(De=>De.value),be=de[de.length-1];if(be){const De=ne().diff(be,ae);if(["patch","prepatch","prerelease",null].includes(De))return be}},Re=ae=>{console.warn("Error fetching version from buildinfo API, must manually select version!",ae)},Ae=(ae,J,te)=>{te(ae).then(de=>{(0,re.i)().get(`/api/datasources/uid/${de.uid}/resources/version-detect`).then(be=>{const De=be.data?.version??"";if(De&&ne().valid(De)){const Ue=le(De,de.jsonData.prometheusType);Ue&&te({...de,jsonData:{...de.jsonData,prometheusVersion:Ue}}).then(We=>{J(We)})}else Re()})}).catch(de=>{Re(de)})},Oe=ae=>{const{options:J,onOptionsChange:te}=ae,de=(0,ge.qj)();J.jsonData.httpMethod||(J.jsonData.httpMethod="POST");const be=(0,g.l4)(),De=tt(be),[Ue,We]=(0,a.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return a.createElement(a.Fragment,null,a.createElement(f._,{title:"Interval behaviour",className:De.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(v._,{label:"Scrape interval",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",Te()),interactive:!0,disabled:J.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{className:"width-20",value:J.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:Ye("timeInterval",J,te),onBlur:et=>We({...Ue,timeInterval:et.currentTarget.value})}),Ve(Ue.timeInterval,ot,ce))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(v._,{label:"Query timeout",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Set the Prometheus query timeout. ",Te()),interactive:!0,disabled:J.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{className:"width-20",value:J.jsonData.queryTimeout,onChange:Ye("queryTimeout",J,te),spellCheck:!1,placeholder:"60s",onBlur:et=>We({...Ue,queryTimeout:et.currentTarget.value})}),Ve(Ue.queryTimeout,ot,ce))))))),a.createElement(f._,{title:"Query editor",className:De.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(v._,{label:"Default editor",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Set default editor option for all users of this data source. ",Te()),interactive:!0,disabled:J.readOnly},a.createElement(U.Ph,{"aria-label":"Default Editor (Code or Builder)",options:he,value:he.find(et=>et.value===J.jsonData.defaultEditor)??he.find(et=>et.value===q.c.Builder),onChange:Ye("defaultEditor",J,te),width:40}))),a.createElement("div",{className:"gf-form"},a.createElement(v._,{labelWidth:ut,label:"Disable metrics lookup",tooltip:a.createElement(a.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",Te()),interactive:!0,disabled:J.readOnly,className:De.switchField},a.createElement(E.r,{value:J.jsonData.disableMetricsLookup??!1,onChange:(0,se.hz)(ae,"disableMetricsLookup")}))))),a.createElement(f._,{title:"Performance",className:De.container},!J.jsonData.prometheusType&&!J.jsonData.prometheusVersion&&J.readOnly&&a.createElement("div",{className:De.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",a.createElement("a",{className:De.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(v._,{label:"Prometheus type",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus supports or does not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",Te()),interactive:!0,disabled:J.readOnly},a.createElement(U.Ph,{"aria-label":"Prometheus type",options:ke,value:ke.find(et=>et.value===J.jsonData.prometheusType),onChange:Ye("prometheusType",{...J,jsonData:{...J.jsonData,prometheusVersion:void 0}},et=>(Ae(et,te,de),te({...et,jsonData:{...et.jsonData,prometheusVersion:void 0}}))),width:40})))),a.createElement("div",{className:"gf-form-inline"},J.jsonData.prometheusType&&a.createElement("div",{className:"gf-form"},a.createElement(v._,{label:`${J.jsonData.prometheusType} version`,labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Use this to set the version of your ",J.jsonData.prometheusType," instance if it is not automatically configured. ",Te()),interactive:!0,disabled:J.readOnly},a.createElement(U.Ph,{"aria-label":`${J.jsonData.prometheusType} type`,options:Pe[J.jsonData.prometheusType],value:Pe[J.jsonData.prometheusType]?.find(et=>et.value===J.jsonData.prometheusVersion),onChange:Ye("prometheusVersion",J,te),width:40})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(v._,{label:"Cache level",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:J.readOnly},a.createElement(U.Ph,{width:40,onChange:Ye("cacheLevel",J,te),options:Le,value:Le.find(et=>et.value===J.jsonData.cacheLevel)??oe.x3.Low})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(v._,{label:"Incremental querying (beta)",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:De.switchField,disabled:J.readOnly},a.createElement(E.r,{value:J.jsonData.incrementalQuerying??!1,onChange:(0,se.hz)(ae,"incrementalQuerying")})))),a.createElement("div",{className:"gf-form-inline"},J.jsonData.incrementalQuerying&&a.createElement(v._,{label:"Query overlap window",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:J.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{onBlur:et=>We({...Ue,incrementalQueryOverlapWindow:et.currentTarget.value}),className:"width-20",value:J.jsonData.incrementalQueryOverlapWindow??me.Ji,onChange:Ye("incrementalQueryOverlapWindow",J,te),spellCheck:!1}),Ve(Ue.incrementalQueryOverlapWindow,it,ce)))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(v._,{label:"Disable recording rules (beta)",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"This feature will disable recording rules. Turn this on to improve dashboard performance"),interactive:!0,className:De.switchField,disabled:J.readOnly},a.createElement(E.r,{value:J.jsonData.disableRecordingRules??!1,onChange:(0,se.hz)(ae,"disableRecordingRules")})))))),a.createElement(f._,{title:"Other",className:De.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(v._,{label:"Custom query parameters",labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",Te()),interactive:!0,disabled:J.readOnly},a.createElement(s.I,{className:"width-20",value:J.jsonData.customQueryParameters,onChange:Ye("customQueryParameters",J,te),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10"})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(v._,{labelWidth:ut,tooltip:a.createElement(a.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",Te()),interactive:!0,label:"HTTP method",disabled:J.readOnly},a.createElement(U.Ph,{width:40,"aria-label":"Select HTTP method",options:Ee,value:Ee.find(et=>et.value===J.jsonData.httpMethod),onChange:Ye("httpMethod",J,te)})))))),a.createElement(Me,{options:J.jsonData.exemplarTraceIdDestinations,onChange:et=>(0,se.tp)({onOptionsChange:te,options:J},"exemplarTraceIdDestinations",et),disabled:J.readOnly}))},$e=ae=>ae?"currentTarget"in ae?ae.currentTarget.value:ae.value:"",Ye=(ae,J,te)=>de=>{te({...J,jsonData:{...J.jsonData,[ae]:$e(de)}})};var Ne=e(98572);const je=({config:ae,onChange:J,className:te})=>{const de=Ue=>{J({...ae,jsonData:{...ae.jsonData,keepCookies:Ue}})},be=Ue=>{J({...ae,jsonData:{...ae.jsonData,timeout:parseInt(Ue.currentTarget.value,10)}})},De={container:(0,n.css)({maxWidth:578})};return a.createElement(a.Fragment,null,a.createElement(f._,{title:"Advanced HTTP settings",className:(0,n.cx)(De.container,te)},a.createElement(v._,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:ut,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:ae.readOnly,grow:!0},a.createElement(Ne.B,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:ae.jsonData.keepCookies,onChange:de})),a.createElement(v._,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:ut,tooltip:"HTTP request timeout in seconds",disabled:ae.readOnly,grow:!0},a.createElement(s.I,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:ae.jsonData.timeout,onChange:be}))))},ut=30,Fe=ae=>{const{options:J,onOptionsChange:te}=ae,de=d.config.featureToggles.prometheusConfigOverhaulAuth,be=(0,a.useRef)(ae.options.access==="direct"),De={azureAuthSupported:d.config.azureAuthEnabled,getAzureAuthEnabled:et=>O(et),setAzureAuthEnabled:(et,ze)=>ze?x(et):L(et),azureSettingsUI:_},Ue=(0,g.l4)(),We=tt(Ue);return a.createElement(a.Fragment,null,J.access==="direct"&&a.createElement(u.b,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),de?a.createElement(a.Fragment,null,a.createElement(r.j,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),a.createElement("hr",{className:`${We.hrTopSpace} ${We.hrBottomSpace}`}),a.createElement(X,{options:J,onOptionsChange:te,azureAuthSettings:De,sigV4AuthToggleEnabled:d.config.sigV4AuthEnabled,renderSigV4Editor:a.createElement(i.IW,{inExperimentalAuthComponent:!0,...ae}),secureSocksDSProxyEnabled:d.config.secureSocksDSProxyEnabled})):a.createElement(c.E,{defaultUrl:"http://localhost:9090",dataSourceConfig:J,showAccessOptions:be.current,onChange:te,sigV4AuthToggleEnabled:d.config.sigV4AuthEnabled,azureAuthSettings:De,renderSigV4Editor:a.createElement(i.IW,{...ae}),secureSocksDSProxyEnabled:d.config.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:Te()}),de?a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(o.K,{className:We.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},a.createElement(je,{className:We.advancedHTTPSettingsMargin,config:J,onChange:te}),a.createElement(p,{options:J,onOptionsChange:te}),a.createElement(Oe,{options:J,onOptionsChange:te}))):a.createElement(a.Fragment,null,a.createElement("hr",{className:We.hrTopSpace}),a.createElement("h3",{className:We.sectionHeaderPadding},"Additional settings"),a.createElement("p",{className:`${We.secondaryGrey} ${We.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),a.createElement(p,{options:J,onOptionsChange:te}),a.createElement(Oe,{options:J,onOptionsChange:te})))};function Te(ae){const J="https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source";return a.createElement("a",{href:ae||J,target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const Ve=(ae,J,te)=>{const de="Value is not valid";return ae&&!ae.match(J)?a.createElement(l.S,null,te||de):!0};function tt(ae){return{additionalSettings:(0,n.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,n.css)`
      color: ${ae.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,n.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,n.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,n.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,n.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,n.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,n.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,n.css)`
      margin-top: 50px;
    `,textUnderline:(0,n.css)`
      text-decoration: underline;
    `,versionMargin:(0,n.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,n.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,n.css)`
      padding-top: 32px;
    `,alertingTop:(0,n.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,n.css)`
      font-weight: 400;
    `,container:(0,n.css)`
      maxwidth: 578;
    `}}},99474:(Q,A,e)=>{"use strict";e.d(A,{QG:()=>Oe,vQ:()=>$e});var n=e(69781),a=e(27005),i=e(71892),r=e(4558),o=e(89852),g=e(17065),u=e.n(g),c=e(17201),l=e(78601),d=e(5333),f=e(74011),m=e(44343),v=e(65821),E=e(61129),p=e(67609),h=e(69391),s=e(35933),y=e(31733),D=e(39836),C=e(70605),P=e(73375),b=e(51925),T=e(64502),O=e(1537),R=e(64516),I=e(10976);function M(Fe){const Te=Fe.annotation,Ve=Fe.onAnnotationChange,tt={expr:Te.expr,refId:Te.name,interval:Te.step};return y.createElement(y.Fragment,null,y.createElement(D._,null,y.createElement(I.j,{...Fe,query:tt,showExplain:!1,onChange:ae=>{Ve({...Te,expr:ae.expr})}}),y.createElement(C.p,null,y.createElement(P.S,{label:"Min step",tooltip:y.createElement(y.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",y.createElement("code",null,"$__interval")," and ",y.createElement("code",null,"$__rate_interval")," variables.")},y.createElement(O.H,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:ae=>{Ve({...Te,step:ae.currentTarget.value})},defaultValue:tt.interval})))),y.createElement(b.T,{v:.5}),y.createElement(C.p,null,y.createElement(P.S,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},y.createElement(R.I,{type:"text",placeholder:"{{alertname}}",value:Te.titleFormat,onChange:ae=>{Ve({...Te,titleFormat:ae.currentTarget.value})}})),y.createElement(P.S,{label:"Tags"},y.createElement(R.I,{type:"text",placeholder:"label1,label2",value:Te.tagKeys,onChange:ae=>{Ve({...Te,tagKeys:ae.currentTarget.value})}})),y.createElement(P.S,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},y.createElement(R.I,{type:"text",placeholder:"{{instance}}",value:Te.textFormat,onChange:ae=>{Ve({...Te,textFormat:ae.currentTarget.value})}})),y.createElement(P.S,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},y.createElement(T.r,{value:Te.useValueForTime,onChange:ae=>{Ve({...Te,useValueForTime:ae.currentTarget.value})}}))))}var x=e(87661),L=e(78114),S=e(75150),U=e(11137),N=e(91794);const w=/^label_names\(\)\s*$/,G=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,_=/^metrics\((.+)\)\s*$/,K=/^query_result\((.+)\)\s*$/,k=/^label_names\((.+)\)\s*$/;function z(Fe){if(typeof Fe!="string")return Fe;const Te={refId:"PrometheusDatasource-VariableQuery",qryType:N.jo.LabelNames},Ve=Fe.match(k);if(Ve)return{...Te,qryType:N.jo.LabelNames,match:Ve[1]};const tt=Fe.match(w);if(tt)return{...Te,qryType:N.jo.LabelNames};const ae=Fe.match(/^label_values\(/);if(ae){const de=Fe.match(G),be=de?de[2]:"",De=de?de[1]:"";if(De){const Ue=(0,U._)(De);return{...Te,qryType:N.jo.LabelValues,label:be,metric:Ue.query.metric,labelFilters:Ue.query.labels}}else return{...Te,qryType:N.jo.LabelValues,label:be}}const J=Fe.match(/^metrics\(/);if(J){const de=Fe.match(_),be=de?de[1]:"";return{...Te,qryType:N.jo.MetricNames,metric:be}}const te=Fe.match(/^query_result\(/);if(te){const de=Fe.match(K),be=de?de[1]:"";return{...Te,qryType:N.jo.VarQueryResult,varQuery:be}}return!tt&&!ae&&!J&&!te?{...Te,qryType:N.jo.SeriesQuery,seriesQuery:Fe}:Te}function W(Fe){switch(Fe.qryType){case N.jo.LabelNames:return Fe.match?`label_names(${Fe.match})`:"label_names()";case N.jo.LabelValues:if(Fe.metric||Fe.labelFilters&&Fe.labelFilters.length!==0){const Ve={metric:Fe.metric,labels:Fe.labelFilters??[],operations:[]};return`label_values(${S.Z.renderQuery(Ve)},${Fe.label})`}else return`label_values(${Fe.label})`;case N.jo.MetricNames:return`metrics(${Fe.metric})`;case N.jo.VarQueryResult:return`query_result(${Z(Fe.varQuery)})`;case N.jo.SeriesQuery:return Fe.seriesQuery??"";case N.jo.ClassicQuery:return Fe.classicQuery??""}return""}function Z(Fe){return Fe?Fe.replace(/[\r\n]+/gm,""):""}class H{constructor(Te,Ve){this.datasource=Te,this.query=Ve,this.datasource=Te,this.query=Ve,this.range=(0,d.JK)()}process(Te){this.range=Te;const Ve=w,tt=k,ae=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,J=_,te=K,de=this.query.match(Ve),be=this.query.match(tt);if(be){const ze=`{__name__=~".*${be[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(ze,[]).then(_e=>_e.map(qe=>({text:qe})))}if(de)return this.datasource.getTagKeys({filters:[],timeRange:Te});const De=this.query.match(ae);if(De){const ze=De[1],_e=De[2];return X(ze)?this.labelValuesQuery(_e,ze):this.labelValuesQuery(_e)}const Ue=this.query.match(J);if(Ue)return this.metricNameQuery(Ue[1]);const We=this.query.match(te);return We?this.queryResultQuery(We[1]):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(Te,Ve){const tt=(0,L.jj)(this.range.from,!1),ae=(0,L.jj)(this.range.to,!0),J={...Ve&&{"match[]":Ve},start:tt.toString(),end:ae.toString()};if(!Ve||this.datasource.hasLabelsMatchAPISupport()){const te=`/api/v1/label/${Te}/values`;return this.datasource.metadataRequest(te,J).then(de=>(0,n.map)(de.data.data,be=>({text:be})))}else{const te="/api/v1/series";return this.datasource.metadataRequest(te,J).then(de=>{const be=(0,n.map)(de.data.data,De=>De[Te]||"").filter(De=>De!=="");return(0,n.uniq)(be).map(De=>({text:De,expandable:!0}))})}}metricNameQuery(Te){const Ve=(0,L.jj)(this.range.from,!1),tt=(0,L.jj)(this.range.to,!0),ae={start:Ve.toString(),end:tt.toString()},J="/api/v1/label/__name__/values";return this.datasource.metadataRequest(J,ae).then(te=>(0,n.chain)(te.data.data).filter(de=>new RegExp(Te).test(de)).map(de=>({text:de,expandable:!0})).value())}queryResultQuery(Te){const Ve="/api/v1/query",tt={query:Te,time:(0,L.jj)(this.range.to,!0).toString()};return this.datasource.metadataRequest(Ve,tt).then(ae=>{switch(ae.data.data.resultType){case"scalar":case"string":return[{text:ae.data.data.result[1]||"",expandable:!1}];case"vector":return(0,n.map)(ae.data.data.result,J=>{let te=J.metric.__name__||"";return delete J.metric.__name__,te+="{"+(0,n.map)(J.metric,(de,be)=>be+'="'+de+'"').join(",")+"}",te+=" "+J.value[1]+" "+J.value[0]*1e3,{text:te,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${ae.data.data.resultType}]`)}})}metricNameAndLabelsQuery(Te){const Ve=(0,L.jj)(this.range.from,!1),tt=(0,L.jj)(this.range.to,!0),ae={"match[]":Te,start:Ve.toString(),end:tt.toString()},J="/api/v1/series",te=this;return this.datasource.metadataRequest(J,ae).then(de=>(0,n.map)(de.data.data,be=>({text:te.datasource.getOriginalMetricName(be),expandable:!0})))}}function X(Fe){return Fe&&Fe.split(" ").join("")!=="{}"}const Y=20;function ne(Fe,Te,Ve){const tt=[];if(Fe.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)){const J="Selected metric has buckets.";tt.push({type:"HISTOGRAM_QUANTILE",label:J,fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:Fe}}})}if(Fe.indexOf("rate(")===-1&&Fe.indexOf("increase(")===-1){const J=Fe.match(new RegExp("\\b((?<!:)\\w+_(total|sum|count)(?!:))\\b"));let te=J?J[1]:"";const de=Ve?.languageProvider?.metricsMetadata;let be=!1;if(de&&(te=Array.from(Fe.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([Ue])=>Ue).filter(Ue=>!Ue.startsWith("$")).flatMap(Ue=>Ue.split(":")).find(Ue=>{const We=de[Ue];return We&&We.type.toLowerCase()==="counter"?(be=!0,!0):!1})??""),te){const De=Fe.trim().match(/^\w+$|^\w+{.*}$/);let We=`Selected metric ${be?"is":"looks like"} a counter.`,et;De?et={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:Fe}}:We=`${We} Consider calculating rate of counter by adding rate().`,tt.push({type:"APPLY_RATE",label:We,fix:et})}}if(Ve&&Ve.ruleMappings){const J=Ve.ruleMappings,te=Object.keys(J).reduce((de,be)=>Fe.search(be)>-1?{...de,[be]:J[be]}:de,{});if((0,n.size)(te)>0){const de="Query contains recording rules.";tt.push({type:"EXPAND_RULES",label:de,fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:Fe,options:te}}})}}return Te&&Te.length>=Y&&Fe.trim().match(/^\w+$/)&&tt.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:Fe,preventSubmit:!0}}}),tt}function se(Fe){const Te=[];return Fe.lookupsDisabled&&Te.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),Te}var re=e(83439),ge=e(60174),q=e(64704),me=e(85498);function oe(Fe,Te,Ve){const{app:tt,targets:ae}=Te;if(!(tt===m.zj.Dashboard||tt===m.zj.PanelViewer))for(const J of ae)(0,q.ff)("grafana_prometheus_query_executed",{app:tt,grafana_version:me.config.buildInfo.version,has_data:Fe.data.some(te=>te.length>0),has_error:Fe.error!==void 0,expr:J.expr,format:J.format,instant:J.instant,range:J.range,exemplar:J.exemplar,hinting:J.hinting,interval:J.interval,intervalFactor:J.intervalFactor,utcOffsetSec:J.utcOffsetSec,legend:J.legendFormat,valueWithRefId:J.valueWithRefId,requestId:Te.requestId,showingGraph:J.showingGraph,showingTable:J.showingTable,editor_mode:J.editorMode,simultaneously_sent_query_count:ae.length,time_range_from:Te?.range?.from?.toISOString(),time_range_to:Te?.range?.to?.toISOString(),time_taken:Date.now()-Ve.getTime()})}var fe=e(86457),ve=e(57298),pe=e(90927),Me=e(47701),Pe=e(41164),Ee=e(38834),he=e(28718),Le=e(12706);const ke=[{label:"Label names",value:N.jo.LabelNames},{label:"Label values",value:N.jo.LabelValues},{label:"Metrics",value:N.jo.MetricNames},{label:"Query result",value:N.jo.VarQueryResult},{label:"Series query",value:N.jo.SeriesQuery},{label:"Classic query",value:N.jo.ClassicQuery}],ot="PrometheusVariableQueryEditor-VariableQuery",it=({onChange:Fe,query:Te,datasource:Ve,range:tt})=>{const[ae,J]=(0,y.useState)(void 0),[te,de]=(0,y.useState)(""),[be,De]=(0,y.useState)(""),[Ue,We]=(0,y.useState)(""),[et,ze]=(0,y.useState)(""),[_e,qe]=(0,y.useState)(""),[at,lt]=(0,y.useState)(""),[ft,yt]=(0,y.useState)([]),[wt,zt]=(0,y.useState)([]);(0,y.useEffect)(()=>{Ve.languageProvider.start(tt)},[]),(0,y.useEffect)(()=>{if(Te)if(Te.qryType===N.jo.ClassicQuery)J(Te.qryType),lt(Te.query??"");else{const Kt=ce(Te);De(Kt.match??""),J(Kt.qryType),de(Kt.label??""),We(Kt.metric??""),zt(Kt.labelFilters??[]),ze(Kt.varQuery??""),qe(Kt.seriesQuery??""),lt(Kt.classicQuery??"")}},[Te]),(0,y.useEffect)(()=>{if(ae!==N.jo.LabelValues)return;const Kt=Ve.getVariables().map(cn=>({label:cn,value:cn}));if(!Ue)Ve.getTagKeys({filters:[]}).then(cn=>{const dn=cn.map(({text:Sn})=>({label:Sn,value:Sn}));yt([...Kt,...dn])});else{const cn=[{label:"__name__",op:"=",value:Ue}],dn=S.Z.renderLabels(cn);Ve.hasLabelsMatchAPISupport()?Ve.languageProvider.fetchSeriesLabelsMatch(dn).then(Sn=>{const _n=Object.keys(Sn).map(Ut=>({label:Ut,value:Ut}));yt([...Kt,..._n])}):Ve.languageProvider.fetchSeriesLabels(dn).then(Sn=>{const _n=Object.keys(Sn).map(Ut=>({label:Ut,value:Ut}));yt([...Kt,..._n])})}},[Ve,ae,Ue]);const $t=(Kt,cn)=>{const Zn={...{qryType:ae,label:te,metric:Ue,match:be,varQuery:et,seriesQuery:_e,classicQuery:at,refId:"PrometheusVariableQueryEditor-VariableQuery"},...Kt,...cn?{labelFilters:cn}:{labelFilters:wt}},_n=W(Zn);Fe({query:_n,qryType:Zn.qryType,refId:ot})},Ie=Kt=>{J(Kt.value),Kt.value!==N.jo.SeriesQuery&&$t({qryType:Kt.value??0})},st=Kt=>{const cn=Kt&&Kt.value?Kt.value:"";de(cn),ae===N.jo.LabelValues&&cn&&$t({label:cn})},Mt=Kt=>{We(Kt.metric),zt(Kt.labels);const cn=Kt.metric,dn=Kt.labels??[];ae===N.jo.LabelValues&&te&&(cn||dn)&&$t({qryType:ae,metric:cn},dn)},ct=Kt=>{ae===N.jo.LabelNames&&$t({qryType:ae,match:Kt})},nt=Kt=>{ae===N.jo.MetricNames&&Kt&&$t({metric:Kt})},Ct=Kt=>{ze(Kt.currentTarget.value)},kt=Kt=>{qe(Kt.currentTarget.value)},Jt=Kt=>{lt(Kt.currentTarget.value)},tn=(0,y.useCallback)(()=>({metric:Ue,labels:wt,operations:[]}),[Ue,wt]);return y.createElement(y.Fragment,null,y.createElement(Me.Z,null,y.createElement(Pe._,{label:"Query type",labelWidth:20,tooltip:y.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},y.createElement(Ee.Ph,{placeholder:"Select query type","aria-label":"Query type",onChange:Ie,value:ae,options:ke,width:25}))),ae===N.jo.LabelValues&&y.createElement(y.Fragment,null,y.createElement(Me.Z,null,y.createElement(Pe._,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:y.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},y.createElement(Ee.Ph,{"aria-label":"label-select",onChange:st,value:te,options:ft,width:25,allowCustomValue:!0,isClearable:!0}))),y.createElement(Le.U,{query:tn(),datasource:Ve,onChange:Mt,variableEditor:!0})),ae===N.jo.LabelNames&&y.createElement(Me.Z,null,y.createElement(Pe._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:y.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},y.createElement(R.I,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:be,onBlur:Kt=>{De(Kt.currentTarget.value),ct(Kt.currentTarget.value)},onChange:Kt=>{De(Kt.currentTarget.value)},width:25}))),ae===N.jo.MetricNames&&y.createElement(Me.Z,null,y.createElement(Pe._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:y.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},y.createElement(R.I,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:Ue,onChange:Kt=>{We(Kt.currentTarget.value)},onBlur:Kt=>{We(Kt.currentTarget.value),nt(Kt.currentTarget.value)},width:25}))),ae===N.jo.VarQueryResult&&y.createElement(Me.Z,null,y.createElement(Pe._,{label:"Query",labelWidth:20,tooltip:y.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},y.createElement(he.K,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:et,onChange:Ct,onBlur:()=>{ae===N.jo.VarQueryResult&&et&&$t({qryType:ae})},cols:100}))),ae===N.jo.SeriesQuery&&y.createElement(Me.Z,null,y.createElement(Pe._,{label:"Series Query",labelWidth:20,tooltip:y.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},y.createElement(R.I,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:_e,onChange:kt,onBlur:()=>{ae===N.jo.SeriesQuery&&_e&&$t({qryType:ae})},width:100}))),ae===N.jo.ClassicQuery&&y.createElement(Me.Z,null,y.createElement(Pe._,{label:"Classic Query",labelWidth:20,tooltip:y.createElement("div",null,"The original implemetation of the Prometheus variable query editor. Enter a string with the correct query type and parameters as described in these docs. For example, label_values(label, metric).")},y.createElement(R.I,{type:"text","aria-label":"Classic Query",placeholder:"Classic Query",value:at,onChange:Jt,onBlur:()=>{ae===N.jo.ClassicQuery&&at&&$t({qryType:ae})},width:100}))))};function ce(Fe){return typeof Fe=="string"?z(Fe):Fe.query?z(Fe.query):Fe}class le extends pe.Mg{constructor(Te,Ve=(0,E.J)()){super(),this.datasource=Te,this.templateSrv=Ve,this.editor=it}query(Te){let Ve;if(typeof Te.targets[0]=="string"?Ve=Te.targets[0]:Ve=Te.targets[0].query,!Ve)return(0,fe.of)({data:[]});const tt={...Te.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:c.intervalToMs(this.datasource.interval),value:c.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(Te.range)},ae=this.templateSrv.replace(Ve,tt,this.datasource.interpolateQueryExpr),J=new H(this.datasource,ae);return(0,ve.D)(J.process(Te.range)).pipe((0,r.U)(de=>({data:de})))}}const Re="60s",Ae=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],Oe="-Instant";class $e extends v.CK{constructor(Te,Ve=(0,E.J)(),tt){super(Te),this.templateSrv=Ve,this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.processAnnotationResponse=(ae,J)=>{const te=(0,p.z1)({data:J}).data;if(!te||!te.length)return[];const de=ae.annotation,{tagKeys:be="",titleFormat:De="",textFormat:Ue=""}=de,We=c.intervalToSeconds(de.step||Re)*1e3,et=be.split(","),ze=[];for(const _e of te){if(_e.fields.length===0)continue;const qe=_e.fields[0],at=_e.fields[1],lt=at?.labels||{},ft=Object.keys(lt).filter(st=>et.includes(st)).map(st=>lt[st]),yt=[];let wt=0;at.values.forEach(st=>{let Mt,ct;const nt=qe.values[wt];ae.annotation.useValueForTime?(Mt=Math.floor(parseFloat(st)),ct=1):(Mt=Math.floor(parseFloat(nt)),ct=parseFloat(st)),wt++,yt.push([Mt,ct])});const $t=yt.filter(st=>st[1]>0).map(st=>st[0]);let Ie=null;for(const st of $t){if(Ie&&(Ie.timeEnd??0)+We>=st){Ie.timeEnd=st;continue}Ie&&ze.push(Ie),Ie={time:st,timeEnd:st,annotation:de,title:(0,l.W)(De,lt),tags:ft,text:(0,l.W)(Ue,lt)}}Ie&&(Ie.timeEnd=$t[$t.length-1],ze.push(Ie))}return ze},this.type="prometheus",this.id=Te.id,this.url=Te.url,this.access=Te.access,this.basicAuth=Te.basicAuth,this.withCredentials=Te.withCredentials,this.interval=Te.jsonData.timeInterval||"15s",this.queryTimeout=Te.jsonData.queryTimeout,this.httpMethod=Te.jsonData.httpMethod||"GET",this.exemplarTraceIdDestinations=Te.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=Te.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=tt??new x.ZP(this),this.lookupsDisabled=Te.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(Te.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=Te.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=Te.jsonData.prometheusVersion,this.defaultEditor=Te.jsonData.defaultEditor,this.disableRecordingRules=Te.jsonData.disableRecordingRules??!1,this.variables=new le(this,this.templateSrv),this.exemplarsAvailable=!0,this.cacheLevel=Te.jsonData.cacheLevel??N.x3.Low,this.cache=new re.tQ({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:Te.jsonData.incrementalQueryOverlapWindow??re.Ji,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:M}}getQueryDisplayText(Te){return Te.expr}getPrometheusProfileData(Te,Ve){return{interval:Ve.interval??Te.interval,expr:this.interpolateString(Ve.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(Te,Ve){return`${this.interpolateString(Ve.expr)}|${Ve.interval??Te.interval}|${JSON.stringify(Te.rangeRaw??"")}|${Ve.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",N.T8.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",N.T8.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",N.T8.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",N.T8.Thanos)}_isDatasourceVersionGreaterOrEqualTo(Te,Ve){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor||Ve!==this.datasourceConfigurationPrometheusFlavor?!1:u().gte(this.datasourceConfigurationPrometheusVersion,Te)}_addTracingHeaders(Te,Ve){Te.headers={},this.access==="proxy"&&(Te.headers["X-Dashboard-UID"]=Ve.dashboardUID,Te.headers["X-Panel-Id"]=Ve.panelId)}directAccessError(){return(0,a._)(()=>new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode."))}_request(Te,Ve,tt={}){if(this.access==="direct")return this.directAccessError();Ve=Ve||{};for(const[te,de]of this.customQueryParameters)Ve[te]==null&&(Ve[te]=de);let ae=this.url+Te;Te.startsWith(`/api/datasources/uid/${this.uid}`)&&(ae=Te);const J=(0,n.defaults)(tt,{url:ae,method:this.httpMethod,headers:{}});return J.method==="GET"?Ve&&Object.keys(Ve).length&&(J.url=J.url+(J.url.search(/\?/)>=0?"&":"?")+Object.entries(Ve).map(([te,de])=>`${encodeURIComponent(te)}=${encodeURIComponent(de)}`).join("&")):(J.headers["Content-Type"]="application/x-www-form-urlencoded",J.data=Ve),(this.basicAuth||this.withCredentials)&&(J.withCredentials=!0),this.basicAuth&&(J.headers.Authorization=this.basicAuth),(0,h.i)().fetch(J)}async importFromAbstractQueries(Te){return Te.map(Ve=>this.languageProvider.importFromAbstractQuery(Ve))}async exportToAbstractQueries(Te){return Te.map(Ve=>this.languageProvider.exportToAbstractQuery(Ve))}async metadataRequest(Te,Ve={},tt){if(Ae.some(ae=>Te.includes(ae)))try{return await(0,i.n)(this._request(`/api/datasources/uid/${this.uid}/resources${Te}`,Ve,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...tt}))}catch(ae){if(this.httpMethod==="POST"&&(0,h.kW)(ae)&&(ae.status===405||ae.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw ae}return await(0,i.n)(this._request(`/api/datasources/uid/${this.uid}/resources${Te}`,Ve,{method:"GET",hideFromInspector:!0,...tt}))}interpolateQueryExpr(Te=[],Ve){if(!Ve.multi&&!Ve.includeAll)return je(Te);if(typeof Te=="string")return ut(Te);const tt=Te.map(ae=>ut(ae));return tt.length===1?tt[0]:"("+tt.join("|")+")"}targetContainsTemplate(Te){return this.templateSrv.containsTemplate(Te.expr)}shouldRunExemplarQuery(Te,Ve){if(Te.exemplar){const tt=this.languageProvider.histogramMetrics.find(te=>Te.expr.includes(te)),ae=Ve.targets.findIndex(te=>te.refId===Te.refId),J=Ve.targets.slice(0,ae).filter(te=>!te.hide);return!!(!tt||tt&&!J.some(te=>te.expr.includes(tt)))}return!1}processTargetV2(Te,Ve){const tt=[],ae={...Te,exemplar:this.shouldRunExemplarQuery(Te,Ve),requestId:Ve.panelId+Te.refId,utcOffsetSec:Ve.range.to.utcOffset()*60};return Te.instant&&Te.range?tt.push({...ae,refId:ae.refId,instant:!1},{...ae,refId:ae.refId+Oe,range:!1}):tt.push(ae),tt}query(Te){if(this.access==="direct")return this.directAccessError();let Ve,tt;const ae=Te.targets.some(de=>de.instant);this.hasIncrementalQuery&&!ae?(tt=this.cache.requestInfo(Te),Ve=tt.requests[0]):Ve=Te;const J=Ve.targets.map(de=>this.processTargetV2(de,Ve)),te=new Date;return super.query({...Ve,targets:J.flat()}).pipe((0,r.U)(de=>{const be={...de,data:this.cache.procFrames(Te,tt,de.data)};return(0,ge.n)(be,Te,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,o.b)(de=>{oe(de,Te,te)}))}createQuery(Te,Ve,tt,ae){const J={hinting:Te.hinting,instant:Te.instant,exemplar:Te.exemplar,step:0,expr:"",refId:Te.refId,start:0,end:0},te=Math.ceil(ae-tt);let de=c.intervalToSeconds(Ve.interval);const be=c.intervalToSeconds(this.templateSrv.replace(Te.interval||Ve.interval,Ve.scopedVars)),De=Te.interval?c.intervalToSeconds(this.templateSrv.replace(Te.interval,Ve.scopedVars)):c.intervalToSeconds(this.interval),Ue=Te.intervalFactor||1,We=this.adjustInterval(de,be,te,Ue);let et={...Ve.scopedVars,...this.getRangeScopedVars(Ve.range),...this.getRateIntervalScopedVariable(We,De)};de!==We&&(de=We,et=Object.assign({},Ve.scopedVars,{__interval:{text:de+"s",value:de+"s"},__interval_ms:{text:de*1e3,value:de*1e3},...this.getRateIntervalScopedVariable(de,De),...this.getRangeScopedVars(Ve.range)})),J.step=de;let ze=Te.expr;ze=this.enhanceExprWithAdHocFilters(Ve.filters,ze),J.expr=this.templateSrv.replace(ze,et,this.interpolateQueryExpr);const _e=Ye(tt,ae,J.step,Ve.range.to.utcOffset()*60);return J.start=_e.start,J.end=_e.end,this._addTracingHeaders(J,Ve),J}getRateIntervalScopedVariable(Te,Ve){Ve===0&&(Ve=15);const tt=Math.max(Te+Ve,4*Ve);return{__rate_interval:{text:tt+"s",value:tt+"s"}}}adjustInterval(Te,Ve,tt,ae){let J=tt/11e3;return J>1&&(J=Math.ceil(J)),Math.max(Te*ae,Ve,J)}metricFindQuery(Te,Ve){if(!Te)return Promise.resolve([]);const tt={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:c.intervalToMs(this.interval),value:c.intervalToMs(this.interval)},...this.getRangeScopedVars(Ve?.range??(0,d.JK)())},ae=this.templateSrv.replace(Te,tt,this.interpolateQueryExpr);return new H(this,ae).process(Ve?.range??(0,d.JK)())}getRangeScopedVars(Te){const Ve=Te.to.diff(Te.from),tt=Math.round(Ve/1e3);return{__range_ms:{text:Ve,value:Ve},__range_s:{text:tt,value:tt},__range:{text:tt+"s",value:tt+"s"}}}async annotationQuery(Te){if(this.access==="direct"){const te=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(te)}const Ve=Te.annotation,{expr:tt=""}=Ve;if(!tt)return Promise.resolve([]);const ae=Te.annotation.step||Re,J={expr:tt,range:!0,instant:!1,exemplar:!1,interval:ae,refId:"X",datasource:this.getRef()};return await(0,i.n)((0,h.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,L.jj)(Te.range.from,!1)*1e3).toString(),to:((0,L.jj)(Te.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(J,{})]},requestId:`prom-query-${Ve.name}`}).pipe((0,r.U)(te=>this.processAnnotationResponse(Te,te.data))))}async getTagKeys(Te){if(!Te||Te.filters.length===0)return await this.languageProvider.fetchLabels(Te.timeRange),this.languageProvider.getLabelKeys().map(J=>({value:J,text:J}));const Ve=Te.filters.map(J=>({label:J.key,value:J.value,op:J.operator})),tt=S.Z.renderLabels(Ve);let ae;return this.hasLabelsMatchAPISupport()?ae=await this.languageProvider.fetchSeriesLabelsMatch(tt):ae=await this.languageProvider.fetchSeriesLabels(tt),Object.keys(ae).filter(J=>!Te.filters.find(te=>te.key===J)).map(J=>({value:J,text:J}))}async getTagValues(Te){const Ve=Te.filters.map(te=>({label:te.key,value:te.value,op:te.operator})),tt=S.Z.renderLabels(Ve);if(this.hasLabelsMatchAPISupport())return(await this.languageProvider.fetchSeriesValuesWithMatch(Te.key,tt)).map(te=>({value:te,text:te}));const ae=this.getTimeRangeParams(Te.timeRange??(0,d.JK)());return(await this.metadataRequest(`/api/v1/label/${Te.key}/values`,ae))?.data?.data?.map(te=>({text:te}))??[]}interpolateVariablesInQueries(Te,Ve,tt){let ae=Te;return Te&&Te.length&&(ae=Te.map(J=>{const te=this.templateSrv.replace(J.expr,Ve,this.interpolateQueryExpr),de=this.enhanceExprWithAdHocFilters(tt,te);return{...J,datasource:this.getRef(),expr:de,interval:this.templateSrv.replace(J.interval,Ve)}})),ae}getQueryHints(Te,Ve){return ne(Te.expr??"",Ve,this)}getInitHints(){return se(this)}async loadRules(){try{const Ve=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;Ve&&(this.ruleMappings=Ne(Ve))}catch(Te){console.log("Rules API is experimental. Ignore next error."),console.error(Te)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,f.CQ)().subtract(30,"minutes").valueOf().toString(),end:(0,f.CQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(Te,Ve){let tt=Te.expr??"";switch(Ve.type){case"ADD_FILTER":{const{key:ae,value:J}=Ve.options??{};ae&&J&&(tt=(0,s.F)(tt,ae,J));break}case"ADD_FILTER_OUT":{const{key:ae,value:J}=Ve.options??{};ae&&J&&(tt=(0,s.F)(tt,ae,J,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{tt=`histogram_quantile(0.95, sum(rate(${tt}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{tt=`rate(${tt}[$__rate_interval])`;break}case"ADD_SUM":{tt=`sum(${tt.trim()}) by ($1)`;break}case"EXPAND_RULES":{Ve.options&&(tt=(0,L.ll)(tt,Ve.options));break}default:break}return{...Te,expr:tt}}getAdjustedInterval(Te){return(0,L.wY)(this.cacheLevel,Te)}getTimeRangeParams(Te){return{start:(0,L.jj)(Te.from,!1).toString(),end:(0,L.jj)(Te.to,!0).toString()}}getOriginalMetricName(Te){return(0,ge.nM)(Te)}enhanceExprWithAdHocFilters(Te,Ve){return!Te||Te.length===0?Ve:Te.reduce((ae,J)=>{const{key:te,operator:de}=J;let{value:be}=J;return(de==="=~"||de==="!~")&&(be=je(be)),(0,s.F)(ae,te,be,de)},Ve)}filterQuery(Te){return!(Te.hide||!Te.expr)}applyTemplateVariables(Te,Ve,tt){const ae=(0,n.cloneDeep)(Ve);ae.__interval={value:"$__interval"},ae.__interval_ms={value:"$__interval_ms"};const J=this.templateSrv.replace(Te.expr,ae,this.interpolateQueryExpr),te=this.enhanceExprWithAdHocFilters(tt,J);return{...Te,expr:te,interval:this.templateSrv.replace(Te.interval,ae),legendFormat:this.templateSrv.replace(Te.legendFormat,ae)}}getVariables(){return this.templateSrv.getVariables().map(Te=>`$${Te.name}`)}interpolateString(Te,Ve){return this.templateSrv.replace(Te,Ve,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case N.x3.Medium:return 600;case N.x3.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case N.x3.Medium:return 7;case N.x3.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,L.l3)(this.cacheLevel)}getDefaultQuery(Te){const Ve={refId:"A",expr:"",range:!0,instant:!1};return Te===m.zj.UnifiedAlerting?{...Ve,instant:!0,range:!1}:Te===m.zj.Explore?{...Ve,instant:!0,range:!0}:Ve}}function Ye(Fe,Te,Ve,tt){const ae=Math.floor((Te+tt)/Ve)*Ve-tt,J=Math.floor((Fe+tt)/Ve)*Ve-tt;return{end:ae,start:J}}function Ne(Fe){return Fe.reduce((Te,Ve)=>Ve.rules.filter(tt=>tt.type==="recording").reduce((tt,ae)=>({...tt,[ae.name]:ae.query}),Te),{})}function je(Fe){return typeof Fe=="string"?Fe.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):Fe}function ut(Fe){return typeof Fe=="string"?Fe.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):Fe}},87661:(Q,A,e)=>{"use strict";e.d(A,{UQ:()=>p,ZK:()=>v,ZP:()=>C,nW:()=>s,ws:()=>h});var n=e(69781),a=e.n(n),i=e(72470),r=e.n(i),o=e(51023),g=e(5333),u=e(1181),c=e(78114),l=e(58465),d=e(91794);const f=["job","instance"],m="{}",v=1e4,E=b=>({headers:{"X-Grafana-Cache":`private, max-age=${b}`}});function p(b,T){if(!T[b])return;const{type:O,help:R}=T[b];return`${O.toUpperCase()}: ${R}`}function h(b,T){if(T[b])return T[b].help}function s(b,T){if(T[b])return T[b].type}const y=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,D=86400;class C extends o.iL{constructor(T,O){super(),this.labelKeys=[],this.request=async(R,I,M={},x)=>{try{return(await this.datasource.metadataRequest(R,M,x)).data.data}catch(L){console.error(L)}return I},this.start=async R=>(this.timeRange=R??(0,g.JK)(),this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,c.NO)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()]))),this.fetchLabelValues=async R=>{const I=this.datasource.getAdjustedInterval(this.timeRange),x=`/api/v1/label/${this.datasource.interpolateString(R)}/values`;return await this.request(x,[],I,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(R,I)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(R,I):(await this.getSeries(I))[R]??[],this.fetchSeriesValuesWithMatch=async(R,I)=>{const M=R?this.datasource.interpolateString(R):null,x=I?this.datasource.interpolateString(I):null,S={...this.datasource.getAdjustedInterval(this.timeRange),...x&&{"match[]":x}};return await this.request(`/api/v1/label/${M}/values`,[],S,this.getDefaultCacheHeaders())??[]},this.getSeriesLabels=async(R,I)=>{let M,x;this.datasource.hasLabelsMatchAPISupport()?(I.push({name:"__name__",value:"",op:"!="}),x=await this.fetchSeriesLabelsMatch(R),M=Object.keys(x)):(x=await this.getSeries(R),M=Object.keys(x));const L=new Set(I.map(S=>S.name));return M.filter(S=>!L.has(S))},this.fetchSeriesLabels=async(R,I)=>{const M=this.datasource.interpolateString(R),L={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":M},S="/api/v1/series",U=await this.request(S,[],L,this.getDefaultCacheHeaders()),{values:N}=(0,c.DY)(U,I);return N},this.fetchSeriesLabelsMatch=async(R,I)=>{const M=this.datasource.interpolateString(R),L={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":M},S="/api/v1/labels";return(await this.request(S,[],L,this.getDefaultCacheHeaders())).reduce((N,w)=>({...N,[w]:""}),{})},this.fetchSeries=async R=>{const I="/api/v1/series",x={...this.datasource.getTimeRangeParams(this.timeRange),"match[]":R};return await this.request(I,{},x,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,n.once)(async()=>{const R=await Promise.all(f.map(I=>this.fetchLabelValues(I)));return f.reduce((I,M,x)=>({...I,[M]:R[x]}),{})}),this.datasource=T,this.histogramMetrics=[],this.timeRange=(0,g.JK)(),this.metrics=[],Object.assign(this,O)}getDefaultCacheHeaders(){if(this.datasource.cacheLevel!==d.x3.None)return E(this.datasource.getCacheDurationInMinutes()*60)}cleanText(T){return T.split(y).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return l.ZP}async loadMetricsMetadata(){const T=E(this.datasource.getDaysToCacheMetadata()*D);this.metricsMetadata=(0,c.I4)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...T}))}getLabelKeys(){return this.labelKeys}importFromAbstractQuery(T){return(0,c.e5)(T)}exportToAbstractQuery(T){const O=T.expr;if(!O||O.length===0)return{refId:T.refId,labelMatchers:[]};const R=r().tokenize(O,l.ZP),I=(0,c.UO)(R),M=P(O,R);return M&&M.length>0&&I.push({name:"__name__",operator:u.K2.Equal,value:M}),{refId:T.refId,labelMatchers:I}}async getSeries(T,O){if(this.datasource.lookupsDisabled)return{};try{return T===m?await this.fetchDefaultSeries():await this.fetchSeriesLabels(T,O)}catch(R){return console.error(R),{}}}async getLabelValues(T){return await this.fetchLabelValues(T)}async fetchLabels(T){T&&(this.timeRange=T);const O="/api/v1/labels",R=this.datasource.getAdjustedInterval(this.timeRange);this.labelFetchTs=Date.now().valueOf();const I=await this.request(O,[],R,this.getDefaultCacheHeaders());return Array.isArray(I)&&(this.labelKeys=I.slice().sort()),[]}}function P(b,T){let O="";for(const R of T)if(typeof R=="string"){O=R;break}return O}},78114:(Q,A,e)=>{"use strict";e.d(A,{DY:()=>v,I4:()=>D,My:()=>z,NO:()=>m,PL:()=>U,U9:()=>M,UO:()=>G,e5:()=>N,jj:()=>k,l3:()=>K,ll:()=>s,o8:()=>C,tU:()=>x,wY:()=>_});var n=e(69781),a=e.n(n),i=e(72470),r=e.n(i),o=e(1181),g=e(48493),u=e(89026),c=e(35933),l=e(87661),d=e(72519),f=e(91794);const m=W=>{const Z=new Set,H=new RegExp("_bucket($|:)");for(let X=0;X<W.length;X++){const Y=W[X];H.test(Y)&&Z.add(Y)}return[...Z]};function v(W,Z=!1){const H={};W.forEach(Y=>{const{__name__:ne,...se}=Y;Z&&(H.__name__=H.__name__||new Set,H.__name__.has(ne)||H.__name__.add(ne)),Object.keys(se).forEach(re=>{H[re]||(H[re]=new Set),H[re].has(se[re])||H[re].add(se[re])})});const X={};return T(Object.keys(H)).forEach(Y=>{X[Y]=T(Array.from(H[Y]))}),{values:X,keys:Object.keys(X)}}const E=/\{[^}]*?(\}|$)/,p=/\b(\w+)(!?=~?)("[^"\n]*?")/g;function h(W,Z=1){if(!W.match(E)){if(W.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${W}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+W)}const H=W.slice(0,Z),X=H.lastIndexOf("{"),Y=H.lastIndexOf("}");if(X===-1)throw new Error("Not inside selector, missing open brace: "+H);if(Y>-1&&Y>X)throw new Error("Not inside selector, previous selector already closed: "+H);const ne=W.slice(Z),re=ne.indexOf("}")+Z,ge=ne.indexOf("{"),q=ge+Z;if(re===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+ne);if(ge>-1&&q<re)throw new Error("Not inside selector, next selector opens before this one closed: "+ne);const me=W.slice(X,re),oe={};me.replace(p,(Ee,he,Le,ke)=>{const ot=W.indexOf(Ee),it=ot+he.length+Le.length+1,ce=ot+he.length+Le.length+ke.length-1;return(Z<it||Z>ce)&&(oe[he]={value:ke,operator:Le}),""});const ve=W.slice(0,X).match(/[A-Za-z:][\w:]*$/);ve&&(oe.__name__={value:`"${ve[0]}"`,operator:"="});const pe=Object.keys(oe).sort(),Pe=["{",pe.map(Ee=>`${Ee}${oe[Ee].operator}${oe[Ee].value}`).join(","),"}"].join("");return{labelKeys:pe,selector:Pe}}function s(W,Z){const H=Object.keys(Z),X=new RegExp(`(\\s|^)(${H.join("|")})(\\s|$|\\(|\\[|\\{)`,"ig"),ne=W.replace(X,(ge,q,me,oe)=>`${q}${Z[me]}${oe}`).split(/(\+|\-|\*|\/|\%|\^)/),se=/(\)\{|\}\{|\]\{)/;return ne.map(ge=>y(ge,se)).join("")}function y(W,Z){const H=W.match(Z);if(!H)return W;const X=H.index??0,Y=W.slice(0,X+1),ne=W.slice(X+1),se=[];ne.replace(p,(ge,q,me,oe)=>(se.push({key:q,operator:me,value:oe}),""));let re=Y;return se.filter(Boolean).forEach(ge=>{const q=ge.value.slice(1,-1);re=(0,c.F)(re,ge.key,q,ge.operator)}),re}function D(W){if(!W)return W;const Z={},H={};for(const Y in W){const ne=W[Y][0];Z[Y]=ne,ne.type==="histogram"&&(H[`${Y}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${ne.help})`},H[`${Y}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${ne.help})`},H[`${Y}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${ne.help})`}),ne.type==="summary"&&(H[`${Y}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${ne.help})`},H[`${Y}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${ne.help})`})}const X={};return X.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...Z,...H,...X}}function C(W){return P(W/1e3)}function P(W){return Math.floor(W/60)}function b(W,Z=1){return Math.ceil(W/60)-Math.ceil(W/60)%Z}function T(W){return W.slice(0,l.ZK)}function O(W){return W&&W.length>=SUGGESTIONS_LIMIT?`, limited to the first ${SUGGESTIONS_LIMIT} received items`:""}const R=/[*+?()|\\.\[\]{}^$]/g;function I(W){return W.replace(R,"\\$&")}function M(W){return W.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function x(W){return M(I(W))}const L={"=":o.K2.Equal,"!=":o.K2.NotEqual,"=~":o.K2.EqualRegEx,"!~":o.K2.NotEqualRegEx},S=(0,n.invert)(L);function U(W){const Z=W.labelMatchers.map(H=>{const X=S[H.operator];return X?`${H.name}${X}"${H.value}"`:""}).filter(H=>H!=="").join(", ");return Z?`{${Z}}`:""}function N(W){return{refId:W.refId,expr:U(W),range:!0}}function w(W){return typeof W.content=="string"?W.content:""}function G(W){const Z=[];for(const H of W)if(H instanceof i.Token&&H.type==="context-labels"){let X="",Y="",ne="";const se=Array.isArray(H.content)?H.content:[H.content];for(let re of se)if(typeof re=="string"){let ge;ge=re,(ge==="="||ge==="!="||ge==="=~"||ge==="!~")&&(ne=ge)}else if(re instanceof i.Token)switch(re.type){case"label-key":X=w(re);break;case"label-value":Y=w(re),Y=Y.substring(1,Y.length-1);const ge=L[ne];ge&&Z.push({name:X,operator:ge,value:Y});break}}return Z}function _(W,Z){if(W===f.x3.None)return{start:k(Z.from,!1).toString(),end:k(Z.to,!0).toString()};const H=k(Z.from,!1),X=(0,g.mB)(H,K(W)*60),Y=k(Z.to,!0),ne=b(Y,K(W))*60;if(X===ne){const ge=ne+K(W)*60;return{start:X.toString(),end:ge.toString()}}const se=X.toString(),re=ne.toString();return{start:se,end:re}}function K(W){switch(W){case f.x3.Medium:return 10;case f.x3.High:return 60;default:return 1}}function k(W,Z){return typeof W=="string"&&(W=u.parse(W,Z)),Math.ceil(W.valueOf()/1e3)}function z(W,Z){return Z===void 0&&(Z=d.A5),W.length=Math.min(W.length,Z),W}},58465:(Q,A,e)=>{"use strict";e.d(A,{ZP:()=>l,r8:()=>g});const n=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],a=["by","group_left","group_right","ignoring","on","offset","without"],i=null,r=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],g=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...r,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],u=g.map(d=>d.label),l={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${g.map(d=>d.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${a.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},75150:(Q,A,e)=>{"use strict";e.d(A,{K:()=>D,Z:()=>C});var n=e(58465),a=e(58239),i=e(50325),r=e(47118),o=e(13499);function g(){return[{id:o.G3.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.CM.Functions,renderer:a.pS,addOperationHandler:a.PP},{id:o.G3.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.CM.Functions,defaultParams:["","$1","","(.*)"],renderer:a.zJ,addOperationHandler:a.PP},{id:o.G3.Ln,name:"Ln",params:[],defaultParams:[],category:o.CM.Functions,renderer:a.pS,addOperationHandler:a.PP},c(o.G3.Changes),c(o.G3.Rate,!0),c(o.G3.Irate),c(o.G3.Increase,!0),c(o.G3.Idelta),c(o.G3.Delta),u({id:o.G3.HoltWinters,params:[(0,a.kq)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.CM.RangeFunctions,renderer:a.e8,addOperationHandler:f,changeTypeHandler:l}),u({id:o.G3.PredictLinear,params:[(0,a.kq)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.CM.RangeFunctions,renderer:a.e8,addOperationHandler:f,changeTypeHandler:l}),u({id:o.G3.QuantileOverTime,params:[(0,a.kq)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.CM.RangeFunctions,renderer:a.NZ,addOperationHandler:f,changeTypeHandler:l}),...i.EX,{id:o.G3.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.CM.BinaryOps,renderer:(b,T,O)=>O,addOperationHandler:m},u({id:o.G3.Abs}),u({id:o.G3.Absent}),u({id:o.G3.Acos,category:o.CM.Trigonometric}),u({id:o.G3.Acosh,category:o.CM.Trigonometric}),u({id:o.G3.Asin,category:o.CM.Trigonometric}),u({id:o.G3.Asinh,category:o.CM.Trigonometric}),u({id:o.G3.Atan,category:o.CM.Trigonometric}),u({id:o.G3.Atanh,category:o.CM.Trigonometric}),u({id:o.G3.Ceil}),u({id:o.G3.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),u({id:o.G3.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),u({id:o.G3.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),u({id:o.G3.Cos,category:o.CM.Trigonometric}),u({id:o.G3.Cosh,category:o.CM.Trigonometric}),u({id:o.G3.DayOfMonth,category:o.CM.Time}),u({id:o.G3.DayOfWeek,category:o.CM.Time}),u({id:o.G3.DayOfYear,category:o.CM.Time}),u({id:o.G3.DaysInMonth,category:o.CM.Time}),u({id:o.G3.Deg}),c(o.G3.Deriv),u({id:o.G3.Exp}),u({id:o.G3.Floor}),u({id:o.G3.Group}),u({id:o.G3.Hour}),u({id:o.G3.LabelJoin,params:[{name:"Destination Label",type:"string",editor:r.g},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:r.g}],defaultParams:["",",",""],renderer:v,addOperationHandler:E}),u({id:o.G3.Log10}),u({id:o.G3.Log2}),u({id:o.G3.Minute}),u({id:o.G3.Month}),u({id:o.G3.Pi,renderer:b=>`${b.id}()`}),u({id:o.G3.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:a.pS}),u({id:o.G3.Rad}),c(o.G3.Resets),u({id:o.G3.Round,category:o.CM.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),u({id:o.G3.Scalar}),u({id:o.G3.Sgn}),u({id:o.G3.Sin,category:o.CM.Trigonometric}),u({id:o.G3.Sinh,category:o.CM.Trigonometric}),u({id:o.G3.Sort}),u({id:o.G3.SortDesc}),u({id:o.G3.Sqrt}),u({id:o.G3.Stddev}),u({id:o.G3.Tan,category:o.CM.Trigonometric}),u({id:o.G3.Tanh,category:o.CM.Trigonometric}),u({id:o.G3.Time,renderer:b=>`${b.id}()`}),u({id:o.G3.Timestamp}),u({id:o.G3.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:b=>`${b.id}(${b.params[0]})`}),u({id:o.G3.Year})]}function u(P){return{...P,id:P.id,name:P.name??(0,a.du)(P.id),params:P.params??[],defaultParams:P.defaultParams??[],category:P.category??o.CM.Functions,renderer:P.renderer??(P.params?a.zJ:a.pS),addOperationHandler:P.addOperationHandler??a.PP}}function c(P,b=!1){return{id:P,name:(0,a.du)(P),params:[(0,a.kq)(b)],defaultParams:[b?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.CM.RangeFunctions,renderer:d,addOperationHandler:f,changeTypeHandler:l}}function l(P,b){return(P.params[0]==="$__rate_interval"&&b.defaultParams[0]!=="$__rate_interval"||P.params[0]==="$__interval"&&b.defaultParams[0]!=="$__interval")&&(P.params=b.defaultParams),P}function d(P,b,T){let O=(P.params??[])[0]??"5m";return`${b.id}(${T}[${O}])`}function f(P,b,T){const O={id:P.id,params:P.defaultParams};return b.operations.length>0&&T.getOperationDef(b.operations[0].id).addOperationHandler===f?{...b,operations:[O,...b.operations.slice(1)]}:{...b,operations:[O,...b.operations]}}function m(P,b){return{...b,binaryQueries:[...b.binaryQueries??[],{operator:"/",query:b}]}}function v(P,b,T){if(typeof P.params[1]!="string")throw"The separator must be a string";const O=`"${P.params[1]}"`;return`${P.id}(${T}, "${P.params[0]}", ${O}, "${P.params.slice(2).join(O)}")`}function E(P,b){const T={id:P.id,params:P.defaultParams};return{...b,operations:[...b.operations,T]}}function p(){return[...(0,a.IT)(o.G3.Sum),...(0,a.IT)(o.G3.Avg),...(0,a.IT)(o.G3.Min),...(0,a.IT)(o.G3.Max),...(0,a.IT)(o.G3.Count),...(0,a.Z3)(o.G3.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.Z3)(o.G3.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.Z3)(o.G3.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),h(o.G3.SumOverTime),h(o.G3.AvgOverTime),h(o.G3.MinOverTime),h(o.G3.MaxOverTime),h(o.G3.CountOverTime),h(o.G3.LastOverTime),h(o.G3.PresentOverTime),h(o.G3.AbsentOverTime),h(o.G3.StddevOverTime)]}function h(P){return{id:P,name:(0,a.du)(P),params:[(0,a.kq)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.CM.RangeFunctions,renderer:s,addOperationHandler:f}}function s(P,b,T){let O=(P.params??[])[0]??"$__interval";return`${b.id}(${T}[${O}])`}var y=e(13034);class D extends y.x{constructor(){super(()=>{const b=[...g(),...p()];for(const T of b){const O=n.r8.find(R=>R.insertText===T.id);O&&(T.documentation=O.documentation)}return b}),this.setOperationCategories([o.CM.Aggregations,o.CM.RangeFunctions,o.CM.Functions,o.CM.BinaryOps,o.CM.Trigonometric,o.CM.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:o.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:o.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:o.Fz.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:o.Fz.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:o.Fz.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const C=new D},50325:(Q,A,e)=>{"use strict";e.d(A,{EX:()=>o,PX:()=>r,iQ:()=>i});var n=e(58239),a=e(13499);const i=[{id:a.G3.Addition,name:"Add scalar",sign:"+"},{id:a.G3.Subtraction,name:"Subtract scalar",sign:"-"},{id:a.G3.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:a.G3.DivideBy,name:"Divide by scalar",sign:"/"},{id:a.G3.Modulo,name:"Modulo by scalar",sign:"%"},{id:a.G3.Exponent,name:"Exponent",sign:"^"},{id:a.G3.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:a.G3.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:a.G3.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:a.G3.LessThan,name:"Less than",sign:"<",comparison:!0},{id:a.G3.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:a.G3.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],r=i.reduce((u,c)=>(u[c.sign]={id:c.id,comparison:c.comparison},u),{}),o=i.map(u=>{const c=[{name:"Value",type:"number"}],l=[2];return u.comparison&&(c.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),l.push(!1)),{id:u.id,name:u.name,params:c,defaultParams:l,alternativesKey:"binary scalar operations",category:a.CM.BinaryOps,renderer:g(u.sign),addOperationHandler:n.PP}});function g(u){return function(l,d,f){let m=l.params[0],v="";return l.params.length===2&&(v=l.params[1]?" bool":""),`${f} ${u}${v} ${m}`}}},47118:(Q,A,e)=>{"use strict";e.d(A,{g:()=>g});var n=e(31733),a=e(84275),i=e(38834),r=e(75150),o=e(58239);function g({onChange:c,index:l,operationId:d,value:f,query:m,datasource:v}){const[E,p]=(0,n.useState)({});return n.createElement(i.Ph,{inputId:(0,o.i1)(d,l),autoFocus:f===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{p({isLoading:!0});const h=await u(m,v);p({options:h,isLoading:void 0})},isLoading:E.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:E.options,value:(0,a.E)(f),onChange:h=>c(l,h.value)})}async function u(c,l){let d=c.labels;l.type==="prometheus"&&(d=[{label:"__name__",op:"=",value:c.metric},...c.labels]);const f=r.Z.renderLabels(d),m=await l.languageProvider.fetchSeriesLabels(f);return Object.keys(m).map(v=>({label:v,value:v}))}},72519:(Q,A,e)=>{"use strict";e.d(A,{kU:()=>J,A5:()=>ae});var n=e(76932),a=e(8806),i=e.n(a),r=e(31733),o=e(82732),g=e.n(o),u=e(84275),c=e(35844),l=e(73375),d=e(85498),f=e(76067),m=e(51343),v=e(49311),E=e(33789),p=e(37758),h=e(38834),s=e(47701),y=e(41164),D=e(23491),C=e(78114),P=e(92012),b=e(5572),T=e(64516),O=e(89719),R=e(65930),I=e(5460),M=e(47808),x=e(76772),L=e(58037),S=e(64704),U=e(87661),N=e(48446);const{setFilteredMetricCount:w}=N.stateSlice.actions;async function G(De,Ue,We){let et=!0;const ze=De.languageProvider.metricsMetadata;ze&&Object.keys(ze).length===0&&(et=!1);let _e={},qe={},at;return at=We?.map(lt=>{const ft=_(lt,De),yt=`${lt}\xA6${ft.description}`;return _e[lt]=ft,qe[yt]=ft,ft}),{isLoading:!1,hasMetadata:et,metrics:at??[],metaHaystackDictionary:qe,nameHaystackDictionary:_e,totalMetricCount:at?.length??0,filteredMetricCount:at?.length??0}}function _(De,Ue){let We=(0,U.nW)(De,Ue.languageProvider.metricsMetadata);const et=(0,U.ws)(De,Ue.languageProvider.metricsMetadata);return["histogram","summary"].forEach(_e=>{et?.toLowerCase().includes(_e)&&We!==_e&&(We+=` (${_e})`)}),{value:De,type:We,description:et}}function K(De,Ue){const We=k(De);return!De.isLoading&&De.filteredMetricCount!==We.length&&Ue(w(We.length)),W(We,De.pageNum,De.resultsPerPage)}function k(De){let Ue=De.metrics;return De.fuzzySearchQuery&&!De.useBackend&&(De.fullMetaSearch?Ue=De.metaHaystackOrder.map(We=>De.metaHaystackDictionary[We]):Ue=De.nameHaystackOrder.map(We=>De.nameHaystackDictionary[We])),De.selectedTypes.length>0&&(Ue=Ue.filter((We,et)=>De.selectedTypes.some(_e=>We.type&&_e.value?We.type.includes(_e.value):!We.type&&_e.value==="no type"))),De.includeNullMetadata||(Ue=Ue.filter(We=>We.type!==void 0&&We.description!==void 0)),Ue}function z(De){if(!De.metrics.length)return[];const Ue=De.resultsPerPage===0?1:De.resultsPerPage,We=Math.floor(k(De).length/Ue)+1;return[...Array(We).keys()].map(et=>et+1)}function W(De,Ue,We){const et=We===0?1:We,ze=Ue===1?0:(Ue-1)*et,_e=ze+et;return De.slice(ze,_e)}const Z=(De,Ue,We)=>De<1?1:De>We?We:De??Ue;async function H(De,Ue,We){const et=(0,P.Vl)(De),ze=Ue.map(at=>`,${at.label}="${at.value}"`),_e=`label_values({__name__=~".*${et}"${Ue?ze.join():""}},__name__)`;return await We.metricFindQuery(_e).then(at=>at.map(lt=>_(lt.text,We)))}function X(De,Ue,We,et){switch(De){case"grafana_prom_metric_encycopedia_tracking":(0,S.ff)(De,{metric:We,hasMetadata:Ue?.hasMetadata,totalMetricCount:Ue?.totalMetricCount,fuzzySearchQuery:Ue?.fuzzySearchQuery,fullMetaSearch:Ue?.fullMetaSearch,selectedTypes:Ue?.selectedTypes,useRegexSearch:Ue?.useBackend,includeResultsWithoutMetadata:Ue?.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,S.ff)(De,{disableTextWrap:Ue?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,S.ff)(De,{query:et})}}const Y=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],ne={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function se(De){const{state:Ue,onChangeFullMetaSearch:We,onChangeIncludeNullMetadata:et,onChangeDisableTextWrap:ze,onChangeUseBackend:_e}=De,qe=(0,f.l4)(),at=re(qe);return r.createElement(r.Fragment,null,r.createElement("div",{className:at.selectItem},r.createElement(x.r,{"data-testid":Ve.searchWithMetadata,value:Ue.fullMetaSearch,disabled:Ue.useBackend||!Ue.hasMetadata,onChange:()=>We()}),r.createElement("div",{className:at.selectItemLabel},ne.metadataSearchSwitch)),r.createElement("div",{className:at.selectItem},r.createElement(x.r,{value:Ue.includeNullMetadata,disabled:!Ue.hasMetadata,onChange:()=>et()}),r.createElement("div",{className:at.selectItemLabel},ne.includeNullMetadata)),r.createElement("div",{className:at.selectItem},r.createElement(x.r,{value:Ue.disableTextWrap,onChange:()=>ze()}),r.createElement("div",{className:at.selectItemLabel},"Disable text wrap")),r.createElement("div",{className:at.selectItem},r.createElement(x.r,{"data-testid":Ve.setUseBackend,value:Ue.useBackend,onChange:()=>_e()}),r.createElement("div",{className:at.selectItemLabel},ne.setUseBackend,"\xA0"),r.createElement(L.u,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},r.createElement(v.J,{name:"info-circle",size:"xs",className:at.settingsIcon}))))}function re(De){return{settingsIcon:(0,n.css)`
      color: ${De.colors.text.secondary};
    `,selectItem:(0,n.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,n.css)`
      margin: 0 0 0 ${De.spacing(1)};
      align-self: center;
      color: ${De.colors.text.secondary};
      font-size: 12px;
    `}}var ge=e(37739);function q({feedbackUrl:De}){const Ue=(0,f.wW)(me);return r.createElement(ge.K,null,r.createElement("a",{href:De,className:Ue.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},r.createElement(v.J,{name:"comment-alt-message"})," Give feedback"))}function me(De){return{link:(0,n.css)({color:De.colors.text.secondary,fontSize:De.typography.bodySmall.fontSize,":hover":{color:De.colors.text.link},margin:"-25px 0 30px 0"})}}var oe=e(71807);function fe(De){const{metrics:Ue,onChange:We,onClose:et,query:ze,state:_e,disableTextWrap:qe}=De,at=(0,f.l4)(),lt=ve(at,qe);function ft(st){st.value&&(We({...ze,metric:st.value}),X("grafana_prom_metric_encycopedia_tracking",_e,st.value),et())}function yt(st){return _e.fullMetaSearch&&st?r.createElement(r.Fragment,null,r.createElement("td",null,zt(st.type??"")),r.createElement("td",null,r.createElement(g(),{textToHighlight:st.description??"",searchWords:_e.metaHaystackMatches,autoEscape:!0,highlightClassName:lt.matchHighLight}))):r.createElement(r.Fragment,null,r.createElement("td",null,zt(st.type??"")),r.createElement("td",null,st.description??""))}function wt(st,Mt,ct){return r.createElement(r.Fragment,null,st,r.createElement("span",{className:lt.tooltipSpace},r.createElement(L.u,{content:r.createElement(r.Fragment,null,"When creating a ",Mt,", Prometheus exposes multiple series with the type counter."," ",(0,oe.Zg)(ct)),placement:"bottom-start",interactive:!0},r.createElement(v.J,{name:"info-circle",size:"xs"}))))}function zt(st){return st?st.includes("(summary)")?wt(st,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):st.includes("(histogram)")?wt(st,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):st:""}function $t(){let st;return _e.fuzzySearchQuery||(st="There are no metrics found in the data source."),ze.labels.length>0&&(st="There are no metrics found. Try to expand your label filters."),(_e.fuzzySearchQuery||_e.selectedTypes.length>0)&&(st="There are no metrics found. Try to expand your search and filters."),r.createElement("tr",{className:lt.noResults},r.createElement("td",{colSpan:3},st))}function Ie(st){return st.useBackend?[st.fuzzySearchQuery]:st.fullMetaSearch?st.metaHaystackMatches:st.nameHaystackMatches}return r.createElement("table",{className:lt.table},r.createElement("thead",{className:lt.stickyHeader},r.createElement("tr",null,r.createElement("th",{className:`${lt.nameWidth} ${lt.tableHeaderPadding}`},"Name"),_e.hasMetadata&&r.createElement(r.Fragment,null,r.createElement("th",{className:`${lt.typeWidth} ${lt.tableHeaderPadding}`},"Type"),r.createElement("th",{className:`${lt.descriptionWidth} ${lt.tableHeaderPadding}`},"Description")),r.createElement("th",{className:lt.selectButtonWidth}," "))),r.createElement("tbody",null,r.createElement(r.Fragment,null,Ue.length>0&&Ue.map((st,Mt)=>r.createElement("tr",{key:st?.value??Mt,className:lt.row},r.createElement("td",{className:lt.nameOverflow},r.createElement(g(),{textToHighlight:st?.value??"",searchWords:Ie(_e),autoEscape:!0,highlightClassName:lt.matchHighLight})),_e.hasMetadata&&yt(st),r.createElement("td",null,r.createElement(m.zx,{size:"md",variant:"secondary",onClick:()=>ft(st),className:lt.centerButton},"Select")))),Ue.length===0&&!_e.isLoading&&$t())))}const ve=(De,Ue)=>({table:(0,n.css)`
      ${Ue?"":"table-layout: fixed;"}
      border-radius: ${De.shape.radius.default};
      width: 100%;
      white-space: ${Ue?"nowrap":"normal"};
      td {
        padding: ${De.spacing(1)};
      }

      td,
      th {
        min-width: ${De.spacing(3)};
        border-bottom: 1px solid ${De.colors.border.weak};
      }
    `,row:(0,n.css)`
      label: row;
      border-bottom: 1px solid ${De.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,n.css)`
      padding: 8px;
    `,matchHighLight:(0,n.css)`
      background: inherit;
      color: ${De.components.textHighlight.text};
      background-color: ${De.components.textHighlight.background};
    `,nameWidth:(0,n.css)`
      ${Ue?"":"width: 37.5%;"}
    `,nameOverflow:(0,n.css)`
      ${Ue?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,n.css)`
      ${Ue?"":"width: 15%;"}
    `,descriptionWidth:(0,n.css)`
      ${Ue?"":"width: 35%;"}
    `,selectButtonWidth:(0,n.css)`
      ${Ue?"":"width: 12.5%;"}
    `,stickyHeader:(0,n.css)`
      position: sticky;
      top: 0;
      background-color: ${De.colors.background.primary};
    `,noResults:(0,n.css)`
      text-align: center;
      color: ${De.colors.text.secondary};
    `,tooltipSpace:(0,n.css)`
      margin-left: 4px;
    `,centerButton:(0,n.css)`
      display: block;
      margin: auto;
      border: none;
    `}),pe=(De,Ue)=>({modal:(0,n.css)`
      width: 85vw;
      ${De.breakpoints.down("md")} {
        width: 100%;
      }
      ${De.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,n.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,n.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${De.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,n.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${De.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,n.css)`
      margin-bottom: ${De.spacing(1)};
    `,resultsAmount:(0,n.css)`
      color: ${De.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,n.css)`
      margin: 4px 0 ${De.spacing(2)} 0;
    `,resultsDataCount:(0,n.css)`
      margin: 0;
    `,resultsDataFiltered:(0,n.css)`
      color: ${De.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,n.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,n.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,n.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,n.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,n.css)`
      visibility: hidden;
    `,visible:(0,n.css)`
      visibility: visible;
    `,settingsBtn:(0,n.css)`
      float: right;
    `,noBorder:(0,n.css)`
      border: none;
    `,resultsPerPageLabel:(0,n.css)`
      color: ${De.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,n.css)`
      display: flex;
    `});var Me=e(20670),Pe=e(69781);const Ee=new Me.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function he(De,Ue,We){const[et,ze,_e]=Ee.search(De,Ue,0,1e5);let qe=[],at=new Set;if(et&&_e){const lt=(ft,yt)=>{yt&&at.add(ft)};for(let ft=0;ft<_e.length;ft++){let yt=_e[ft];Me.Z.highlight(De[ze.idx[yt]],ze.ranges[yt],lt),qe.push(De[ze.idx[yt]])}We([qe,[...at]])}else Ue||We([[],[]])}const Le=(0,Pe.debounce)(he,300),{setIsLoading:ke,buildMetrics:ot,filterMetricsBackend:it,setResultsPerPage:ce,setPageNum:le,setFuzzySearchQuery:Re,setNameHaystack:Ae,setMetaHaystack:Oe,setFullMetaSearch:$e,setIncludeNullMetadata:Ye,setSelectedTypes:Ne,setUseBackend:je,setDisableTextWrap:ut,showAdditionalSettings:Fe}=N.stateSlice.actions,Te=De=>{const{datasource:Ue,isOpen:We,onClose:et,onChange:ze,query:_e,initialMetrics:qe}=De,[at,lt]=(0,r.useReducer)(N.stateSlice.reducer,(0,N.E3)(_e)),ft=(0,f.l4)(),yt=pe(ft,at.disableTextWrap),wt=(0,r.useCallback)(async()=>{lt(ke(!0));const nt=await G(Ue,_e,qe);lt(ot({isLoading:!1,hasMetadata:nt.hasMetadata,metrics:nt.metrics,metaHaystackDictionary:nt.metaHaystackDictionary,nameHaystackDictionary:nt.nameHaystackDictionary,totalMetricCount:nt.metrics.length,filteredMetricCount:nt.metrics.length}))},[_e,Ue,qe]);(0,r.useEffect)(()=>{wt()},[wt]);const zt=Y.map(nt=>({value:nt.value,label:nt.value,description:nt.description})),$t=(0,r.useMemo)(()=>i()(async nt=>{lt(ke(!0));const Ct=await H(nt,_e.labels,Ue);lt(it({metrics:Ct,filteredMetricCount:Ct.length,isLoading:!1}))},Ue.getDebounceTimeInMilliseconds()),[Ue,_e]);function Ie(nt){lt(Ae(nt))}function st(nt){lt(Oe(nt))}function Mt(nt,Ct){at.useBackend&&nt===""?wt():at.useBackend?$t(nt):Ct?Le(Object.keys(at.metaHaystackDictionary),nt,st):Le(Object.keys(at.nameHaystackDictionary),nt,Ie)}const ct=r.createElement(se,{state:at,onChangeFullMetaSearch:()=>{const nt=!at.fullMetaSearch;lt($e(nt)),ze({..._e,fullMetaSearch:nt}),Mt(at.fuzzySearchQuery,nt)},onChangeIncludeNullMetadata:()=>{lt(Ye(!at.includeNullMetadata)),ze({..._e,includeNullMetadata:!at.includeNullMetadata})},onChangeDisableTextWrap:()=>{lt(ut()),ze({..._e,disableTextWrap:!at.disableTextWrap}),X("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",at,"")},onChangeUseBackend:()=>{const nt=!at.useBackend;lt(je(nt)),ze({..._e,useBackend:nt}),nt===!1?wt():at.fuzzySearchQuery!==""&&$t(at.fuzzySearchQuery)}});return r.createElement(b.u,{"data-testid":Ve.metricModal,isOpen:We,title:"Metrics explorer",onDismiss:et,"aria-label":"Browse metrics",className:yt.modal},r.createElement(q,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),r.createElement("div",{className:yt.inputWrapper},r.createElement("div",{className:(0,n.cx)(yt.inputItem,yt.inputItemFirst)},r.createElement(T.I,{autoFocus:!0,"data-testid":Ve.searchMetric,placeholder:ne.browse,value:at.fuzzySearchQuery,onInput:nt=>{const Ct=nt.currentTarget.value??"";lt(Re(Ct)),Mt(Ct,at.fullMetaSearch)}})),at.hasMetadata&&r.createElement("div",{className:yt.inputItem},r.createElement(h.NU,{"data-testid":Ve.selectType,inputId:"my-select",options:zt,value:at.selectedTypes,placeholder:ne.type,onChange:nt=>lt(Ne(nt))})),r.createElement("div",null,r.createElement(O.$,{className:`${yt.loadingSpinner} ${at.isLoading?yt.visible:""}`})),r.createElement("div",{className:yt.inputItem},r.createElement(R.P,{"aria-label":"Additional settings",content:ct,placement:"bottom-end",closeButton:!1},r.createElement(I.h,{className:yt.settingsBtn},r.createElement(m.zx,{variant:"secondary",size:"md",onClick:()=>lt(Fe()),"data-testid":Ve.showAdditionalSettings,className:yt.noBorder},"Additional Settings"),r.createElement(m.zx,{className:yt.noBorder,variant:"secondary",icon:at.showAdditionalSettings?"angle-up":"angle-down"}))))),r.createElement("div",{className:yt.resultsData},_e.metric&&r.createElement("i",{className:yt.currentlySelected},"Currently selected: ",_e.metric),_e.labels.length>0&&r.createElement("div",{className:yt.resultsDataFiltered},r.createElement(v.J,{name:"info-circle",size:"sm"}),r.createElement("div",{className:yt.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),r.createElement("div",{className:yt.results},at.metrics&&r.createElement(fe,{metrics:K(at,lt),onChange:ze,onClose:et,query:_e,state:at,disableTextWrap:at.disableTextWrap})),r.createElement("div",{className:yt.resultsFooter},r.createElement("div",{className:yt.resultsAmount},"Showing ",at.filteredMetricCount," of ",at.totalMetricCount," results"),r.createElement(M.t,{currentPage:at.pageNum??1,numberOfPages:z(at).length,onNavigate:nt=>{lt(le(nt??1))}}),r.createElement("div",{className:yt.resultsPerPageWrapper},r.createElement("p",{className:yt.resultsPerPageLabel},"# Results per page\xA0"),r.createElement(T.I,{"data-testid":Ve.resultsPerPage,value:Z(at.resultsPerPage,N.Xc,N.s6),placeholder:"results per page",width:10,title:"The maximum results per page is "+N.s6,type:"number",onInput:nt=>{const Ct=+nt.currentTarget.value;isNaN(Ct)||Ct>=N.s6||lt(ce(Ct))}}))))},Ve={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},tt=" ",ae=1e3;function J({datasource:De,query:Ue,onChange:We,onGetMetrics:et,labelsFilters:ze,metricLookupDisabled:_e,onBlur:qe,variableEditor:at}){const lt=(0,f.wW)(te),[ft,yt]=(0,r.useState)({}),wt=d.config.featureToggles.prometheusMetricEncyclopedia,zt=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],$t=(0,r.useCallback)((tn,Kt)=>{const cn=tn.label??tn.value;return cn?cn.toLowerCase?Kt.split(tt).reduce((Sn,Zn)=>{const _n=cn.toLowerCase().includes(Zn.toLowerCase());let Ut=!1;return wt&&(Ut=cn==="Metrics explorer"),Sn&&(_n||Ut)},!0):!0:!1},[wt]),Ie=(0,r.useCallback)((tn,Kt)=>tn.__isNew__?tn.label:r.createElement(g(),{searchWords:Kt.inputValue.split(tt),textToHighlight:tn.label??"",highlightClassName:lt.highlight}),[lt.highlight]),st=(tn,Kt)=>{const cn=(0,P.Vl)(tn);return de(cn,Kt)},Mt=tn=>De.metricFindQuery(st(tn,ze)).then(cn=>{const dn=cn.length;(0,C.My)(cn),dn>cn.length?yt({...ft,resultsTruncated:!0}):yt({...ft,resultsTruncated:!1});const Sn=cn.map(Zn=>({label:Zn.text,value:Zn.text}));return wt?[...zt,...Sn]:Sn}),ct=()=>Promise.resolve([]),nt=i()(tn=>Mt(tn),De.getDebounceTimeInMilliseconds()),Ct=tn=>{const Kt=tn.data;if(Kt.value==="BrowseMetrics"){const cn=tn.isFocused?lt.focus:"";return r.createElement("div",{...tn.innerProps,ref:tn.innerRef,className:`${lt.customOptionWidth} metric-encyclopedia-open`,onKeyDown:dn=>{dn.code==="Enter"&&yt({...ft,metricsModalOpen:!0})}},r.createElement("div",{className:`${lt.customOption} ${cn} metric-encyclopedia-open`},r.createElement("div",null,r.createElement("div",{className:"metric-encyclopedia-open"},Kt.label),r.createElement("div",{className:`${lt.customOptionDesc} metric-encyclopedia-open`},Kt.description)),r.createElement(m.zx,{fill:"text",size:"sm",variant:"secondary",onClick:()=>yt({...ft,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",r.createElement(v.J,{name:"arrow-right"}))))}return(0,D.Qn)(tn)},kt=({children:tn,maxHeight:Kt,innerRef:cn,innerProps:dn})=>{const Sn=(0,f.l4)(),Zn=(0,E.D)(Sn),_n=!r.isValidElement(tn)&&ft.resultsTruncated;return r.createElement("div",{...dn,className:`${Zn.menu} ${lt.customMenuContainer}`,style:{maxHeight:Kt},"aria-label":"Select options menu"},r.createElement(p.$,{scrollRefCallback:cn,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},tn),_n&&r.createElement("div",{className:lt.customMenuFooter},r.createElement("div",null,"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics.")))},Jt=()=>r.createElement(h.qb,{isClearable:!!at,inputId:"prometheus-metric-select",className:lt.select,value:Ue.metric?(0,u.E)(Ue.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:Ie,filterOption:$t,onOpenMenu:async()=>{if(_e)return;yt({isLoading:!0});const tn=await et(),Kt=tn.map(dn=>dn.value),cn=tn.length;tn.length>ae&&(0,C.My)(tn),yt(wt?{metrics:[...zt,...tn],isLoading:void 0,initialMetrics:Kt,resultsTruncated:cn>tn.length}:{metrics:tn,isLoading:void 0,resultsTruncated:cn>tn.length})},loadOptions:_e?ct:nt,isLoading:ft.isLoading,defaultOptions:ft.metrics,onChange:tn=>{const Kt=tn?.value;Kt?wt&&Kt==="BrowseMetrics"?(X("grafana_prometheus_metric_encyclopedia_open",null,"",Ue),yt({...ft,metricsModalOpen:!0})):We({...Ue,metric:Kt}):We({...Ue,metric:""})},components:wt?{Option:Ct,MenuList:kt}:{MenuList:kt},onBlur:qe||(()=>{})});return r.createElement(r.Fragment,null,wt&&!De.lookupsDisabled&&ft.metricsModalOpen&&r.createElement(Te,{datasource:De,isOpen:ft.metricsModalOpen,onClose:()=>yt({...ft,metricsModalOpen:!1}),query:Ue,onChange:We,initialMetrics:ft.initialMetrics??[]}),at?r.createElement(s.Z,null,r.createElement(y._,{label:"Metric",labelWidth:20,tooltip:r.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},Jt())):r.createElement(c.s,null,r.createElement(l.S,{label:"Metric"},Jt())))}const te=De=>({select:(0,n.css)`
    min-width: 125px;
  `,highlight:(0,n.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${De.colors.warning.contrastText};
    background-color: ${De.colors.warning.main};
  `,customOption:(0,n.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${De.colors.emphasize(De.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,n.css)`
    color: ${De.colors.text.primary};
  `,customOptionDesc:(0,n.css)`
    color: ${De.colors.text.secondary};
    font-size: ${De.typography.size.xs};
    opacity: 50%;
  `,focus:(0,n.css)`
    background-color: ${De.colors.emphasize(De.colors.background.primary,.1)};
  `,customOptionWidth:(0,n.css)`
    min-width: 400px;
  `,customMenuFooter:(0,n.css)`
    flex: 0;
    display: flex;
    justify-content: space-between;
    padding: ${De.spacing(1.5)};
    border-top: 1px solid ${De.colors.border.weak};
    color: ${De.colors.text.secondary};
  `,customMenuContainer:(0,n.css)`
    display: flex;
    flex-direction: column;
    background: ${De.colors.background.primary};
    box-shadow: ${De.shadows.z3};
  `}),de=(De,Ue)=>{const We=Ue?be(Ue):[];return`label_values({__name__=~".*${De}"${We?We.join(""):""}},__name__)`},be=De=>De.map(Ue=>`,${Ue.label}="${Ue.value}"`)},12706:(Q,A,e)=>{"use strict";e.d(A,{U:()=>R});var n=e(31733),a=e(87661),i=e(78114),r=e(75150),o=e(92012),g=e(76932),u=e(69781),c=e(92651),l=e(35844),d=e(73375),f=e(47701),m=e(20888),v=e(8806),E=e.n(v),p=e(84275),h=e(21568),s=e(61262),y=e(30019),D=e(38834);function C({item:M,defaultOp:x,onChange:L,onDelete:S,onGetLabelNames:U,onGetLabelValues:N,invalidLabel:w,invalidValue:G,getLabelValuesAutofillSuggestions:_,debounceDuration:K}){const[k,z]=(0,n.useState)({}),[W,Z]=(0,n.useState)(!1),[H,X]=(0,n.useState)(!1),Y=(ge=M.op)=>P.find(q=>q.label===ge)?.isMultiValue,ne=ge=>{if(ge){const q=/\(([^)]+)\)/,me=ge?.match(q);return me&&me[0].indexOf("|")>0?[ge]:ge.indexOf("|")>0?ge.split("|"):[ge]}return[]},se=E()(ge=>_(ge,M.label),K),re=M?.value??"";return n.createElement("div",{key:re,"data-testid":"prometheus-dimensions-filter-item"},n.createElement(s.B,null,n.createElement(D.Ph,{placeholder:"Select label","data-testid":h.wl.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:M.label?(0,p.E)(M.label):null,allowCustomValue:!0,onOpenMenu:async()=>{z({isLoadingLabelNames:!0});const ge=await U(M);Z(!0),z({labelNames:ge,isLoadingLabelNames:void 0})},onCloseMenu:()=>{Z(!1)},isOpen:W,isLoading:k.isLoadingLabelNames??!1,options:k.labelNames,onChange:ge=>{ge.label&&L({...M,op:M.op??x,label:ge.label})},invalid:w}),n.createElement(D.Ph,{"data-testid":h.wl.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,p.E)(M.op??x),options:P,width:"auto",onChange:ge=>{ge.value!=null&&L({...M,op:ge.value,value:Y(ge.value)?M.value:ne(M?.value)[0]})}}),n.createElement(D.qb,{placeholder:"Select value","data-testid":h.wl.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:Y()?ne(re).map(p.E):ne(re).map(p.E)[0],allowCustomValue:!0,onOpenMenu:async()=>{z({isLoadingLabelValues:!0});const ge=await N(M);(0,i.My)(ge),X(!0),z({...k,labelValues:ge,isLoadingLabelValues:void 0})},onCloseMenu:()=>{X(!1)},isOpen:H,defaultOptions:k.labelValues,isMulti:Y(),isLoading:k.isLoadingLabelValues,loadOptions:se,onChange:ge=>{if(ge.value)L({...M,value:ge.value,op:M.op??x});else{const q=ge.map(me=>me.label).join("|");L({...M,value:q,op:M.op??x})}},invalid:G}),n.createElement(y._,{"aria-label":`remove-${M.label}`,icon:"times",variant:"secondary",onClick:S})))}const P=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"<",value:"<",isMultiValue:!1},{label:">",value:">",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],b="Select at least 1 label filter (label and value)";function T({labelsFilters:M,onChange:x,onGetLabelNames:L,onGetLabelValues:S,labelFilterRequired:U,getLabelValuesAutofillSuggestions:N,debounceDuration:w,variableEditor:G}){const _="=",[K,k]=(0,n.useState)([{op:_}]);(0,n.useEffect)(()=>{M.length>0?k(M):k([{op:_}])},[M]);const z=H=>{k(H);const X=H.filter(Y=>Y.label!=null&&Y.value!=null);(0,u.isEqual)(X,M)||x(X)},W=K.some(H=>H.label&&H.value),Z=()=>n.createElement(c.k,{items:K,onChange:z,renderItem:(H,X,Y)=>n.createElement(C,{debounceDuration:w,item:H,defaultOp:_,onChange:X,onDelete:Y,onGetLabelNames:L,onGetLabelValues:S,invalidLabel:U&&!H.label,invalidValue:U&&!H.value,getLabelValuesAutofillSuggestions:N})});return n.createElement(n.Fragment,null,G?n.createElement(f.Z,null,n.createElement("div",{className:(0,g.cx)((0,g.css)`
              display: flex;
            `)},n.createElement(m.W,{width:20,tooltip:n.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),Z())):n.createElement(l.s,null,n.createElement(d.S,{label:"Label filters",error:b,invalid:U&&!W},Z())))}var O=e(72519);function R({datasource:M,query:x,onChange:L,onBlur:S,variableEditor:U}){const N=Z=>{L({...x,labels:Z})},w=(0,n.useCallback)(async Z=>{const H=M.getVariables(),X=await Z;return[...H.map(Y=>({label:Y,value:Y})),...X.map(Y=>({label:Y.value,value:Y.value,title:Y.description}))]},[M]),G=async Z=>{if(!x.metric)return await M.languageProvider.fetchLabels(),M.languageProvider.getLabelKeys().map(ne=>({value:ne}));const H=x.labels.filter(ne=>ne!==Z);H.push({label:"__name__",op:"=",value:x.metric});const X=r.Z.renderLabels(H);let Y;return M.hasLabelsMatchAPISupport()?Y=await M.languageProvider.fetchSeriesLabelsMatch(X):Y=await M.languageProvider.fetchSeriesLabels(X),Object.keys(Y).filter(ne=>!H.find(se=>se.label===ne)).map(ne=>({value:ne}))},_=(Z,H)=>{const X={label:H??"__name__",op:"=~",value:(0,o.Vl)(`.*${Z}`)},Y=x.labels.filter(ge=>ge.label!==X.label);Y.push(X),x.metric&&Y.push({label:"__name__",op:"=",value:x.metric});const ne=Y.map(ge=>({...ge,label:M.interpolateString(ge.label),value:M.interpolateString(ge.value)})),se=r.Z.renderLabels(ne);let re;return M.hasLabelsMatchAPISupport()?re=k(X,se):re=K(X,se),re.then(ge=>((0,i.My)(ge),ge))},K=(Z,H)=>{if(!Z.label)return Promise.resolve([]);const X=M.languageProvider.fetchSeries(H),Y=M.interpolateString(Z.label);return X.then(ne=>{const se=new Set;return ne.forEach(re=>{const ge=re[Y];se.add(ge)}),Array.from(se).map(re=>({label:re,value:re}))})},k=(Z,H)=>Z.label?M.languageProvider.fetchSeriesValuesWithMatch(Z.label,H).then(X=>X.map(Y=>({value:Y,label:Y}))):Promise.resolve([]),z=async Z=>{if(!Z.label)return[];if(!x.metric)return(await M.languageProvider.getLabelValues(Z.label)).map(ne=>({value:ne}));const H=x.labels.filter(ne=>ne!==Z);H.push({label:"__name__",op:"=",value:x.metric});const X=H.map(ne=>({...ne,label:M.interpolateString(ne.label),value:M.interpolateString(ne.value)})),Y=r.Z.renderLabels(X);return M.hasLabelsMatchAPISupport()?k(Z,Y):K(Z,Y)},W=(0,n.useCallback)(()=>w(I(M,x)),[M,x,w]);return n.createElement(n.Fragment,null,n.createElement(O.kU,{query:x,onChange:L,onGetMetrics:W,datasource:M,labelsFilters:x.labels,metricLookupDisabled:M.lookupsDisabled,onBlur:S||(()=>{}),variableEditor:U}),n.createElement(T,{debounceDuration:M.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:_,labelsFilters:x.labels,onChange:N,onGetLabelNames:Z=>w(G(Z)),onGetLabelValues:Z=>w(z(Z)),variableEditor:U}))}async function I(M,x){M.languageProvider.metricsMetadata||await M.languageProvider.loadMetricsMetadata(),M.languageProvider.metricsMetadata||(M.languageProvider.metricsMetadata={});let L;if(x.labels.length>0){const S=r.Z.renderLabels(x.labels);L=(await M.languageProvider.getSeries(S,!0)).__name__??[]}else L=await M.languageProvider.getLabelValues("__name__")??[];return L.map(S=>({value:S,description:(0,a.UQ)(S,M.languageProvider.metricsMetadata)}))}},27363:(Q,A,e)=>{"use strict";e.d(A,{A:()=>l,n:()=>d});var n=e(31733),a=e(37739),i=e(58465),r=e(75150),o=e(11137),g=e(4631),u=e(16975),c=e(97523);const l="Fetch all series matching metric name and label filters.",d=n.memo(({query:f})=>{const m=(0,o._)(f||"").query,v={grammar:i.ZP,name:"promql"};return n.createElement(a.K,{gap:.5,direction:"column"},n.createElement(g.B,{stepNumber:1,title:n.createElement(c.U,{query:`${m.metric} ${r.Z.renderLabels(m.labels)}`,lang:v})},l),n.createElement(u.V,{stepNumber:2,queryModeller:r.Z,query:m,lang:v}))});d.displayName="PromQueryBuilderExplained"},10976:(Q,A,e)=>{"use strict";e.d(A,{j:()=>g});var n=e(76932),a=e(31733),i=e(76067),r=e(26959),o=e(27363);function g(c){const{query:l,datasource:d,range:f,onRunQuery:m,onChange:v,data:E,app:p,showExplain:h}=c,s=(0,i.wW)(u);return a.createElement("div",{className:s.wrapper},a.createElement(r.Z,{datasource:d,query:l,range:f,onRunQuery:m,onChange:v,history:[],data:E,app:p}),h&&a.createElement(o.n,{query:l.expr}))}const u=c=>({wrapper:(0,n.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},48446:(Q,A,e)=>{"use strict";e.d(A,{E3:()=>o,Gw:()=>g,Xc:()=>a,s6:()=>i,stateSlice:()=>r});var n=e(4579);const a=100,i=1e3,r=(0,n.oM)({name:"metrics-modal-state",initialState:o(),reducers:{filterMetricsBackend:(u,c)=>{u.metrics=c.payload.metrics,u.filteredMetricCount=c.payload.filteredMetricCount,u.isLoading=c.payload.isLoading},buildMetrics:(u,c)=>{u.isLoading=c.payload.isLoading,u.metrics=c.payload.metrics,u.hasMetadata=c.payload.hasMetadata,u.metaHaystackDictionary=c.payload.metaHaystackDictionary,u.nameHaystackDictionary=c.payload.nameHaystackDictionary,u.totalMetricCount=c.payload.totalMetricCount,u.filteredMetricCount=c.payload.filteredMetricCount},setIsLoading:(u,c)=>{u.isLoading=c.payload},setFilteredMetricCount:(u,c)=>{u.filteredMetricCount=c.payload},setResultsPerPage:(u,c)=>{u.resultsPerPage=c.payload},setPageNum:(u,c)=>{u.pageNum=c.payload},setFuzzySearchQuery:(u,c)=>{u.fuzzySearchQuery=c.payload,u.pageNum=1},setNameHaystack:(u,c)=>{u.nameHaystackOrder=c.payload[0],u.nameHaystackMatches=c.payload[1]},setMetaHaystack:(u,c)=>{u.metaHaystackOrder=c.payload[0],u.metaHaystackMatches=c.payload[1]},setFullMetaSearch:(u,c)=>{u.fullMetaSearch=c.payload,u.pageNum=1},setIncludeNullMetadata:(u,c)=>{u.includeNullMetadata=c.payload,u.pageNum=1},setSelectedTypes:(u,c)=>{u.selectedTypes=c.payload,u.pageNum=1},setUseBackend:(u,c)=>{u.useBackend=c.payload,u.fullMetaSearch=!1,u.pageNum=1},setDisableTextWrap:u=>{u.disableTextWrap=!u.disableTextWrap},showAdditionalSettings:u=>{u.showAdditionalSettings=!u.showAdditionalSettings}}});function o(u){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:a,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:u?.fullMetaSearch??!1,includeNullMetadata:u?.includeNullMetadata??!0,selectedTypes:[],useBackend:u?.useBackend??!1,disableTextWrap:u?.disableTextWrap??!1,showAdditionalSettings:!1}}function g(u){return{useBackend:u?.useBackend??!1,disableTextWrap:u?.disableTextWrap??!1,fullMetaSearch:u?.fullMetaSearch??!1,includeNullMetadata:u.includeNullMetadata??!1}}},58239:(Q,A,e)=>{"use strict";e.d(A,{IT:()=>s,NZ:()=>f,PP:()=>v,Z3:()=>y,Zc:()=>R,du:()=>E,e8:()=>d,i1:()=>p,kq:()=>h,pS:()=>u,zJ:()=>c});var n=e(69781),a=e.n(n),i=e(86504),r=e.n(i),o=e(47118),g=e(13499);function u(I,M,x){const L=m(I,M,x),S=I.id+"(";return x&&L.push(x),S+L.join(", ")+")"}function c(I,M,x){const L=m(I,M,x),S=I.id+"(";return x&&L.unshift(x),S+L.join(", ")+")"}function l(I,M,x,L){if(M.params.length<2)throw`Cannot render a function with params of length [${M.params.length}]`;let S=(I.params??[])[0]??"5m";const U=m({...I,params:I.params.slice(1)},{...M,params:M.params.slice(1),defaultParams:M.defaultParams.slice(1)},x),N=I.id+"(";return x&&(L?U.push(`${x}[${S}]`):U.unshift(`${x}[${S}]`)),N+U.join(", ")+")"}function d(I,M,x){return l(I,M,x,!1)}function f(I,M,x){return l(I,M,x,!0)}function m(I,M,x){return(I.params??[]).map((L,S)=>M.params[S].type==="string"?'"'+L+'"':L)}function v(I,M){const x={id:I.id,params:I.defaultParams};return{...M,operations:[...M.operations,x]}}function E(I){return(0,n.capitalize)(I.replace(/_/g," "))}function p(I,M){return`operations.${I}.param.${M}`}function h(I=!1){const M={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return I&&M.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),M}function s(I,M={}){return[{id:I,name:E(I),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:g.CM.Aggregations,renderer:u,paramChangedHandler:O(`__${I}_by`),explainHandler:P(I,""),addOperationHandler:v,...M},{id:`__${I}_by`,name:`${E(I)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.g}],defaultParams:[""],alternativesKey:"aggregations by",category:g.CM.Aggregations,renderer:D(I),paramChangedHandler:T(I),explainHandler:P(I,"by"),addOperationHandler:v,hideFromList:!0,...M},{id:`__${I}_without`,name:`${E(I)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.g}],defaultParams:[""],alternativesKey:"aggregations by",category:g.CM.Aggregations,renderer:C(I),paramChangedHandler:T(I),explainHandler:P(I,"without"),addOperationHandler:v,hideFromList:!0,...M}]}function y(I,M,x={}){const L=s(I,x);return L[0].params.unshift(...M.params),L[1].params.unshift(...M.params),L[2].params.unshift(...M.params),L[0].defaultParams=M.defaultParams,L[1].defaultParams=[...M.defaultParams,""],L[2].defaultParams=[...M.defaultParams,""],L[1].renderer=b(I),L[2].renderer=b(I),L}function D(I){return function(x,L,S){return`${I} by(${x.params.join(", ")}) (${S})`}}function C(I){return function(x,L,S){return`${I} without(${x.params.join(", ")}) (${S})`}}function P(I,M){return function(L){const S=L.params.map(N=>`\`${N}\``).join(" and "),U=r()("label",L.params.length);switch(M){case"by":return`Calculates ${I} over dimensions while preserving ${U} ${S}.`;case"without":return`Calculates ${I} over the dimensions ${S}. All other labels are preserved.`;default:return`Calculates ${I} over the dimensions.`}}}function b(I){return function(x,L,S){const U=L.params.findIndex(G=>G.restParam),N=x.params.slice(0,U),w=x.params.slice(U);return`${I} by(${w.join(", ")}) (${N.map((G,_)=>L.params[_].type==="string"?`"${G}"`:G).join(", ")}, ${S})`}}function T(I){return function(x,L,S){return L.params.length<S.params.length?{...L,id:I}:L}}function O(I){return function(x,L,S){return L.params.length===S.params.length?{...L,id:I}:L}}function R(I,M){if(!I.label||!I.op||!I.value||M.length<2)return!1;const x=I.op.toString().startsWith("!");return M.filter(U=>U.label===I.label&&U.value===I.value&&U.op!==I.op).some(U=>!!(x&&U?.op?.toString().startsWith("!")===!1||x===!1&&U?.op?.toString().startsWith("!")))}},11137:(Q,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(97336),a=e(50325),i=e(92012);function r(h){const s=(0,i.bU)(h),D=n.E2.parse(s).topNode,P={query:{metric:"",labels:[],operations:[]},errors:[]};try{g(s,D,P)}catch(b){console.error(b),b instanceof Error&&P.errors.push({text:b.message})}return p(P.query)&&(P.errors=[]),o(h)&&(P.errors=[]),P}function o(h){const s={query:{metric:"",labels:[],operations:[]},errors:[]};h=h.replace(/\$__interval/g,"1s"),h=h.replace(/\$__interval_ms/g,"1000"),h=h.replace(/\$__rate_interval/g,"1s"),h=h.replace(/\$__range_ms/g,"1000"),h=h.replace(/\$__range_s/g,"1"),h=h.replace(/\$__range/g,"1s");const D=n.E2.parse(h).topNode;try{g(h,D,s)}catch{return!1}return s.errors.length===0}function g(h,s,y){const D=y.query;switch(s.type.id){case n.tz:{D.metric=(0,i.KF)(h,s);break}case n.Zm:{D.labels.push(c(h,s));const C=s.getChild(i._A);C&&y.errors.push((0,i.wf)(h,C));break}case n.lX:{d(h,s,y);break}case n.aZ:{f(h,s,y);break}case n.vU:{v(h,s,y);break}case i._A:{if(u(s))break;y.errors.push((0,i.wf)(h,s));break}default:{s.type.id===n.Om&&y.errors.push((0,i.wf)(h,s));let C=s.firstChild;for(;C;)g(h,C,y),C=C.nextSibling}}}function u(h){return h.prevSibling?.type.id===n.wi&&h.prevSibling?.firstChild?.type.id===n.m6}function c(h,s){const y=(0,i.KF)(h,s.getChild(n.m0)),D=(0,i.KF)(h,s.getChild(n.e8)),C=(0,i.KF)(h,s.getChild(n.nv)).replace(/"/g,"");return{label:y,op:D,value:C}}const l=["changes","rate","irate","increase","delta"];function d(h,s,y){const D=y.query,C=s.getChild(n.hT),P=(0,i.KF)(h,C),T=s.getChild(n.yY).getChild(n.mW),O=[];let R="";if(l.includes(P)||P.endsWith("_over_time")){let M=(0,i.KF)(h,s).match(/\[(.+)\]/);M?.[1]&&(R=M[1],O.push(M[1]))}const I={id:P,params:O};if(D.operations.unshift(I),T){if((0,i.KF)(h,T)===R+"]")return;m(h,T,y,I)}}function f(h,s,y){const D=y.query,C=s.getChild(n.Ki);let P=(0,i.KF)(h,C);const b=s.getChild(n.Ip),T=[];b&&(b.getChild("By")&&P&&(P=`__${P}_by`),b.getChild(n.yN)&&(P=`__${P}_without`),T.push(...(0,i.ff)(h,b,n.Tm)));const R=s.getChild(n.yY).getChild(n.mW),M=R?.getChild(n.wi)?.getChild(n.vU);M&&y.errors.push({text:"Query parsing is ambiguous.",from:M.from,to:M.to});const x={id:P,params:[]};D.operations.unshift(x),m(h,R,y,x),x.params.push(...T)}function m(h,s,y,D){if(s)switch(s.type.id){case n.wi:case n.mW:{let C=s.firstChild;for(;C;){const b=C.getChild(n.wi)?.getChild(n.vU);b&&y.errors.push({text:"Query parsing is ambiguous.",from:b.from,to:b.to}),m(h,C,y,D),C=C.nextSibling}break}case n.iy:{D.params.push(parseFloat((0,i.KF)(h,s)));break}case n.nv:{D.params.push((0,i.KF)(h,s).replace(/"/g,""));break}default:g(h,s,y)}}function v(h,s,y){const D=y.query,C=s.firstChild,P=(0,i.KF)(h,C.nextSibling),b=E(h,s.getChild(n.v3)),T=s.lastChild,O=a.PX[P],R=C.getChild(n.iy),I=T.getChild(n.iy),M=T.getChild(n.vU);if(R||g(h,C,y),I)D.operations.push((0,i.Es)(O,h,T,!!b?.isBool));else if(M){const x=(0,i.ge)(T);x?.type.id===n.iy&&D.operations.push((0,i.Es)(O,h,x,!!b?.isBool)),g(h,T,y)}else{D.binaryQueries=D.binaryQueries||[];const x={operator:P,query:{metric:"",labels:[],operations:[]}};b?.isMatcher&&(x.vectorMatchesType=b.matchType,x.vectorMatches=b.matches),D.binaryQueries.push(x),g(h,T,{query:x.query,errors:y.errors})}}function E(h,s){if(s){if(s.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const y=s.getChild(n.Wc);return y?{isMatcher:!0,isBool:!1,matches:(0,i.KF)(h,y.getChild(n.XT)?.getChild(n.pQ)),matchType:y.getChild(n.On)?"on":"ignoring"}:void 0}}}function p(h){return h.labels.length===0&&h.operations.length===0&&!h.metric}},92012:(Q,A,e)=>{"use strict";e.d(A,{Es:()=>l,KF:()=>c,Vl:()=>f,_A:()=>n,bU:()=>o,ff:()=>d,ge:()=>a,wf:()=>i});const n=0;function a(m){return m.firstChild?a(m.firstChild):m}function i(m,v){return{text:c(m,v),from:v.from,to:v.to,parentType:v.parent?.name}}const r=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(m){return m.replace(r,(v,E,p,h,s,y,D)=>{const C=h||D;let P=E,b="0";return p&&(P=p,b="1"),s&&(P=s,b="2"),`__V_${b}__`+P+"__V__"+(C?"__F__"+C+"__F__":"")})}const g=[(m,v)=>`$${m}`,(m,v)=>`[[${m}${v?`:${v}`:""}]]`,(m,v)=>`\${${m}${v?`:${v}`:""}}`];function u(m){return m.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(v,E,p,h)=>g[parseInt(E,10)](p,h))}function c(m,v){return v?u(m.substring(v.from,v.to)):""}function l(m,v,E,p){const h=[parseFloat(c(v,E))];return m.comparison&&h.push(p),{id:m.id,params:h}}function d(m,v,E){if(v.type.id===E||v.name===E)return[c(m,v)];const p=[];let h=0,s=v.childAfter(h);for(;s;)p.push(...d(m,s,E)),h=s.to,s=v.childAfter(h);return p}const f=m=>m.split(" ").map(E=>`${E}.*`).join("")},13034:(Q,A,e)=>{"use strict";e.d(A,{x:()=>i});var n=e(18662),a=e(13499);class i{constructor(o){this.categories=[],this.operationsRegistry=new n.B(o)}setOperationCategories(o){this.categories=o}getOperationsForCategory(o){return this.operationsRegistry.list().filter(g=>g.category===o&&!g.hideFromList)}getAlternativeOperations(o){return this.operationsRegistry.list().filter(g=>g.alternativesKey&&g.alternativesKey===o)}getCategories(){return this.categories}getOperationDef(o){return this.operationsRegistry.getIfExists(o)}renderOperations(o,g){for(const u of g){const c=this.operationsRegistry.getIfExists(u.id);if(!c)throw new Error(`Could not find operation ${u.id} in the registry`);o=c.renderer(u,c,o)}return o}renderBinaryQueries(o,g){if(g)for(const u of g)o=`${this.renderBinaryQuery(o,u)}`;return o}renderBinaryQuery(o,g){let u=o+` ${g.operator} `;return g.vectorMatches&&(u+=`${g.vectorMatchesType}(${g.vectorMatches}) `),u+this.renderQuery(g.query,!0)}renderLabels(o){if(o.length===0)return"";let g="{";for(const u of o)g!=="{"&&(g+=", "),g+=`${u.label}${u.op}"${u.value}"`;return g+"}"}renderQuery(o,g){let u=`${o.metric??""}${this.renderLabels(o.labels)}`;return u=this.renderOperations(u,o.operations),!g&&this.hasBinaryOp(o)&&o.binaryQueries?.length&&(u=`(${u})`),u=this.renderBinaryQueries(u,o.binaryQueries),g&&(this.hasBinaryOp(o)||o.binaryQueries?.length)&&(u=`(${u})`),u}hasBinaryOp(o){return o.operations.find(g=>this.getOperationDef(g.id)?.category===a.CM.BinaryOps)!==void 0}}},4631:(Q,A,e)=>{"use strict";e.d(A,{B:()=>o});var n=e(76932),a=e(31733),i=e(51133),r=e(76067);function o({title:u,stepNumber:c,markdown:l,children:d}){const f=(0,r.wW)(g);return a.createElement("div",{className:f.box},c!==void 0&&a.createElement("div",{className:f.stepNumber},c),a.createElement("div",{className:f.boxInner},u&&a.createElement("div",{className:f.header},a.createElement("span",null,u)),a.createElement("div",{className:f.body},l&&a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,i.a)(l)}}),d)))}const g=u=>({box:(0,n.css)({background:u.colors.background.secondary,padding:u.spacing(1),borderRadius:u.shape.radius.default,position:"relative"}),boxInner:(0,n.css)({marginLeft:u.spacing(4)}),stepNumber:(0,n.css)({fontWeight:u.typography.fontWeightMedium,background:u.colors.secondary.main,width:"20px",height:"20px",borderRadius:u.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:u.typography.bodySmall.fontSize}),header:(0,n.css)({paddingBottom:u.spacing(.5),display:"flex",alignItems:"center",fontFamily:u.typography.fontFamilyMonospace}),body:(0,n.css)({color:u.colors.text.secondary,"p:last-child":{margin:0},a:{color:u.colors.text.link,textDecoration:"underline"}})})},16975:(Q,A,e)=>{"use strict";e.d(A,{V:()=>r});var n=e(31733),a=e(4631),i=e(97523);function r({query:o,queryModeller:g,stepNumber:u,lang:c,onMouseEnter:l,onMouseLeave:d}){return n.createElement(n.Fragment,null,o.operations.map((f,m)=>{const v=g.getOperationDef(f.id);if(!v)return`Operation ${f.id} not found`;const E=v.renderer(f,v,"<expr>"),p=v.explainHandler?v.explainHandler(f,v):v.documentation??"no docs";return n.createElement("div",{key:m,onMouseEnter:()=>l?.(f,m),onMouseLeave:()=>d?.(f,m)},n.createElement(a.B,{stepNumber:m+u,title:n.createElement(i.U,{query:E,lang:c}),markdown:p}))}))}},97523:(Q,A,e)=>{"use strict";e.d(A,{U:()=>g});var n=e(76932),a=e(72470),i=e.n(a),r=e(31733),o=e(76067);function g({query:c,lang:l,className:d}){const f=(0,o.l4)(),m=u(f),v=i().highlight(c,l.grammar,l.name);return r.createElement("div",{className:(0,n.cx)(m.editorField,"prism-syntax-highlight",d),"aria-label":"selector",dangerouslySetInnerHTML:{__html:v}})}const u=c=>({editorField:(0,n.css)({fontFamily:c.typography.fontFamilyMonospace,fontSize:c.typography.bodySmall.fontSize})})},28015:(Q,A,e)=>{"use strict";e.d(A,{c:()=>n});var n=(a=>(a.Code="code",a.Builder="builder",a))(n||{})},13499:(Q,A,e)=>{"use strict";e.d(A,{CM:()=>n,Fz:()=>i,G3:()=>a});var n=(r=>(r.Aggregations="Aggregations",r.RangeFunctions="Range functions",r.Functions="Functions",r.BinaryOps="Binary operations",r.Trigonometric="Trigonometric",r.Time="Time Functions",r))(n||{}),a=(r=>(r.Abs="abs",r.Absent="absent",r.AbsentOverTime="absent_over_time",r.Acos="acos",r.Acosh="acosh",r.Asin="asin",r.Asinh="asinh",r.Atan="atan",r.Atanh="atanh",r.Avg="avg",r.AvgOverTime="avg_over_time",r.BottomK="bottomk",r.Ceil="ceil",r.Changes="changes",r.Clamp="clamp",r.ClampMax="clamp_max",r.ClampMin="clamp_min",r.Cos="cos",r.Cosh="cosh",r.Count="count",r.CountOverTime="count_over_time",r.CountScalar="count_scalar",r.CountValues="count_values",r.DayOfMonth="day_of_month",r.DayOfWeek="day_of_week",r.DayOfYear="day_of_year",r.DaysInMonth="days_in_month",r.Deg="deg",r.Delta="delta",r.Deriv="deriv",r.DropCommonLabels="drop_common_labels",r.Exp="exp",r.Floor="floor",r.Group="group",r.HistogramQuantile="histogram_quantile",r.HoltWinters="holt_winters",r.Hour="hour",r.Idelta="idelta",r.Increase="increase",r.Irate="irate",r.LabelJoin="label_join",r.LabelReplace="label_replace",r.Last="last",r.LastOverTime="last_over_time",r.Ln="ln",r.Log10="log10",r.Log2="log2",r.Max="max",r.MaxOverTime="max_over_time",r.Min="min",r.MinOverTime="min_over_time",r.Minute="minute",r.Month="month",r.Pi="pi",r.PredictLinear="predict_linear",r.Present="present",r.PresentOverTime="present_over_time",r.Quantile="quantile",r.QuantileOverTime="quantile_over_time",r.Rad="rad",r.Rate="rate",r.Resets="resets",r.Round="round",r.Scalar="scalar",r.Sgn="sgn",r.Sin="sin",r.Sinh="sinh",r.Sort="sort",r.SortDesc="sort_desc",r.Sqrt="sqrt",r.Stddev="stddev",r.StddevOverTime="stddev_over_time",r.Sum="sum",r.SumOverTime="sum_over_time",r.Tan="tan",r.Tanh="tanh",r.Time="time",r.Timestamp="timestamp",r.TopK="topk",r.Vector="vector",r.Year="year",r.Addition="__addition",r.Subtraction="__subtraction",r.MultiplyBy="__multiply_by",r.DivideBy="__divide_by",r.Modulo="__modulo",r.Exponent="__exponent",r.NestedQuery="__nested_query",r.EqualTo="__equal_to",r.NotEqualTo="__not_equal_to",r.GreaterThan="__greater_than",r.LessThan="__less_than",r.GreaterOrEqual="__greater_or_equal",r.LessOrEqual="__less_or_equal",r))(a||{}),i=(r=>(r.Rate="rate",r.Histogram="histogram",r.Binary="binary",r))(i||{})},83439:(Q,A,e)=>{"use strict";e.d(A,{tQ:()=>m,Ji:()=>d});var n=e(16528),a=e(74011),i=e(48493),r=e(47121),o=e(85498),g=e(64704),u=e(55739);function c(v,E){let[p]=v,[h]=E,s=p.length,y=p[0],D=p[s-1],C=h.length,P=h[0],b=h[C-1],T;if(s)if(C){if(P>D)T=v.map((O,R)=>v[R].concat(E[R]));else if(b<y)T=E.map((O,R)=>E[R].concat(v[R]));else if(P<=y&&b>=D)T=E;else if(!(P>y&&b<D)){if(P>=y){let O=(0,u.Ko)(P,p);O=p[O]<P?O-1:O,T=v.map((R,I)=>v[I].slice(0,O).concat(E[I]))}else if(b>=y){let O=(0,u.Ko)(b,p);O=p[O]<b?O:O+1,T=E.map((R,I)=>E[I].concat(v[I].slice(O)))}}}else T=v;else C?T=E:T=[[]];return T}function l(v,E,p){let[h,...s]=v,y,D;return h[0]<E&&(y=(0,u.Ko)(E,h),h[y]<E&&y++),h[h.length-1]>p&&(D=(0,u.Ko)(p,h),h[D]>p&&D--),(y!=null||D!=null)&&(h=h.slice(y??0,D),s=s.map(C=>C.slice(y??0,D))),[h,...s]}const d="10m",f=v=>`${v.type}|${v.name}|${JSON.stringify(v.labels??"")}`;class m{constructor(E){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const h=this.pendingAccumulatedEvents.entries();for(let[s,y]of h)if(!y.sent){const D={datasource:y.datasource.toString(),requestCount:y.requestCount.toString(),savedBytesTotal:y.savedBytesTotal.toString(),initialRequestSize:y.initialRequestSize.toString(),lastRequestSize:y.lastRequestSize.toString(),panelId:y.panelId.toString(),dashId:y.dashId.toString(),expr:y.expr.toString(),refreshIntervalMs:y.refreshIntervalMs.toString(),from:y.from.toString(),queryRangeSeconds:y.queryRangeSeconds.toString()};o.config.featureToggles.prometheusIncrementalQueryInstrumentation?(0,g.ff)("grafana_incremental_queries_profile",D):r.s.api.pushEvent&&r.s.api.pushEvent("incremental query response size",D,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(s,{...y,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const p=E.overlapString;if((0,n.jO)(p)){const h=(0,n.RA)(p);this.overlapWindowMs=(0,n.iX)(h)}else{const h=(0,n.RA)(d);this.overlapWindowMs=(0,n.iX)(h)}(o.config.grafanaJavascriptAgent.enabled||o.config.featureToggles?.prometheusIncrementalQueryInstrumentation)&&E.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=E.profileFunction,this.getTargetSignature=E.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(E=>{E.getEntries().forEach(p=>{const h=p,s=typeof h?.transferSize=="number";if(h?.initiatorType==="fetch"&&s){let y=h.name;if(y.includes("/api/ds/query")){let D=y.match(/requestId=([a-z\d]+)/i);if(D){let C=D[1];const P=Math.round(h.transferSize),b=this.pendingRequestIdsToTargSigs.get(C);if(b){const T=this.pendingRequestIdsToTargSigs.entries();for(let[,O]of T)if(O.identity===b.identity&&O.bytes!==null){const R=this.pendingAccumulatedEvents.get(O.identity),I=O.bytes-P;this.pendingAccumulatedEvents.set(O.identity,{datasource:O.datasource??"N/A",requestCount:(R?.requestCount??0)+1,savedBytesTotal:(R?.savedBytesTotal??0)+I,initialRequestSize:O.bytes,lastRequestSize:P,panelId:b.panelId?.toString()??"",dashId:b.dashboardUID??"",expr:b.expr??"",refreshIntervalMs:b.refreshIntervalMs??0,sent:!1,from:b.from??"",queryRangeSeconds:b.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(C);return}this.pendingRequestIdsToTargSigs.set(C,{...b,bytes:P})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(E){const p=E.range.from.valueOf(),h=E.range.to.valueOf(),s=E.rangeRaw?.to?.toString()==="now";let y=s,D;const C=E.intervalMs,P=new Map;E.targets.forEach(b=>{let T=`${E.dashboardUID}|${E.panelId}|${b.refId}`,O=this.getTargetSignature(E,b);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(E.requestId,{...this.getProfileData(E,b),identity:T+"|"+O,bytes:null,panelId:E.panelId,dashboardUID:E.dashboardUID??"",from:E.rangeRaw?.from.toString()??"",queryRangeSeconds:E.range.to.diff(E.range.from,"seconds")??"",refreshIntervalMs:C??0}),P.set(T,O)});for(const[b,T]of P){let O=this.cache.get(b);if(O?.sig!==T?y=!1:(D=O?.prevTo??1/0,y=h>D&&p<=D),!y)break}if(y&&D){let b=Math.max(D-this.overlapWindowMs,p);const T=(0,a.CQ)(h),O=(0,a.CQ)((0,i.mB)(b,E.intervalMs));E={...E,range:{...E.range,from:O,to:T}}}else P.forEach((b,T)=>{this.cache.delete(T)});return{requests:[E],targSigs:P,shouldCache:s}}procFrames(E,p,h){if(p?.shouldCache){const s=E.range.from.valueOf(),y=E.range.to.valueOf(),D=new Map;h.forEach(P=>{let b=`${E.dashboardUID}|${E.panelId}|${P.refId}`,T=D.get(b);T||(T=[],D.set(b,T)),T.push(P)});let C=[];D.forEach((P,b)=>{let T=(b?this.cache.get(b)?.frames:null)??[];P.forEach(R=>{if(R.length===0||R.fields.length===0)return;let I=f(R.fields[1]),M=T.find(x=>f(x.fields[1])===I);if(!M)T.push(R);else{let x=M.fields.map(U=>U.values),L=R.fields.map(U=>U.values),S=c(x,L);if(S){for(let U=0;U<S.length;U++)M.fields[U].values=S[U];M.length=M.fields[0].values.length}}});let O=[];T.forEach(R=>{let I=R.fields.map(x=>x.values),M=l(I,s,y);if(M[0].length>0){for(let x=0;x<M.length;x++)R.fields[x].values=M[x];O.push(R)}}),this.cache.set(b,{sig:p.targSigs.get(b),frames:O,prevTo:y}),C.push(...O)}),h=C.map(P=>({...P,fields:P.fields.map(b=>({...b,config:{...b.config},values:b.values.slice()}))}))}return h}}},60174:(Q,A,e)=>{"use strict";e.d(A,{Ky:()=>I,n:()=>E,nM:()=>b,nf:()=>R});var n=e(69781),a=e.n(n),i=e(44343),r=e(86347),o=e(85666),g=e(27957),u=e(71199),c=e(28073),l=e(85498),d=e(66261);const f=/^[+-]?inf(?:inity)?$/i,m=(M,x)=>x.app===i.zj.Explore&&(M.meta?.custom?.resultType==="vector"||M.meta?.custom?.resultType==="scalar")?!0:x.targets.find(S=>S.refId===M.refId)?.format==="table",v=(M,x)=>M.meta?.type===r.P.HeatmapCells?!1:x.targets.find(S=>S.refId===M.refId)?.format==="heatmap";function E(M,x,L){l.config.featureToggles.prometheusDataplane&&M.data.forEach(Y=>{const ne=x.targets.find(se=>se.refId===Y.refId);ne&&ne.legendFormat==="__auto"&&Y.fields.forEach(se=>{if(se.labels?.__name__&&se.labels?.__name__===se.name){const re={...se,name:o.M5};se.config.displayNameFromDS=(0,g.CZ)(re,Y,M.data)}})});const[S,U]=(0,n.partition)(M.data,Y=>m(Y,x)),N=h(S),[w,G]=(0,n.partition)(U,Y=>Y.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:_}=L,K=w.map(Y=>{if(_?.length)for(const ne of _){const se=Y.fields.find(re=>re.name===ne.name);if(se){const re=y(ne);se.config.links=se.config.links?.length?[...se.config.links,...re]:re}}return{...Y,meta:{...Y.meta,dataTopic:u.w5.Annotations}}}),[k,z]=(0,n.partition)(G,Y=>v(Y,x));k.forEach(Y=>{if(Y.name==null){let ne=Y.fields.find(se=>se.type===o.fS.number);if(ne){let se=ne.labels?.le;se&&(Y.name=se,ne.config.displayNameFromDS=se)}}});const W=(0,n.groupBy)(k,Y=>Y.refId);let Z=[];for(const Y in W){const ne=W[Y],se=(0,n.groupBy)(ne,re=>{const ge=re.fields.find(q=>q.type===o.fS.number);if(ge?.labels&&p in ge.labels){const{le:q,...me}=ge?.labels;return Object.values(me).join()}return Object.values(ge?.labels??[]).join()});(0,n.forOwn)(se,(re,ge)=>{const q=re.sort(R);Z.push(T(O(q)))})}const H=z.map(Y=>({...Y,meta:{...Y.meta,preferredVisualisationType:"graph"}})),X=(0,n.flatten)(Z);return{...M,data:[...H,...N,...X,...K]}}const p="le";function h(M){if(M.length===0||M.length===1&&M[0].length===0)return M;const x=(0,n.groupBy)(M,"refId"),L=Object.keys(x);return L.map(U=>{const N=s(L.length,U),w=P({data:[],valueName:N}),G=C([]),_=[];x[U].forEach(k=>{const W=k.fields[1]?.labels??{};Object.keys(W).sort().forEach(Z=>{if(!_.some(H=>H.name===Z)){const H=Z===p;_.push({name:Z,config:{filterable:!0},type:H?o.fS.number:o.fS.string,values:[]})}})}),x[U].forEach(k=>{const z=k.fields[0]?.values??[],W=k.fields[1]?.values??[];z.forEach(Z=>G.values.push(Z)),W.forEach(Z=>{w.values.push(I(Z));const H=k.fields[1].labels??{};_.forEach(X=>X.values.push(D(H,X.name)))})});const K=[G,..._,w];return{refId:U,fields:K,meta:{...x[U][0].meta,preferredVisualisationType:"rawPrometheus"},length:G.values.length}})}function s(M,x=""){return M>1?`Value #${x}`:"Value"}function y(M){const x=[];if(M.datasourceUid){const S=(0,d.F)().getInstanceSettings(M.datasourceUid);S&&x.push({title:M.urlDisplayLabel||`Query with ${S?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:M.datasourceUid,datasourceName:S?.name??"Data source not found"}})}return M.url&&x.push({title:M.urlDisplayLabel||`Go to ${M.url}`,url:M.url,targetBlank:!0}),x}function D(M,x){return M.hasOwnProperty(x)?x===p?I(M[x]):M[x]:""}function C(M,x=!1){return{name:o.Ls,type:o.fS.time,config:{},values:M.map(L=>x?L[0]:L[0]*1e3)}}function P({data:M,valueName:x=o.M5,parseValue:L=!0,labels:S,displayNameFromDS:U}){return{name:x,type:o.fS.number,display:(0,c.U)(),config:{displayNameFromDS:U},labels:S,values:M.map(N=>L?I(N[1]):N[1])}}function b(M){const x=M.__name__||"";delete M.__name__;const L=Object.entries(M).map(S=>`${S[0]}="${S[1]}"`).join(",");return`${x}{${L}}`}function T(M){if(M.length===0||M.length===1&&M[0].length===0)return[];const x=M[0].fields.find(S=>S.type===o.fS.time),L=M.map(S=>{let U=S.fields.find(N=>N.type===o.fS.number);return{...U,name:U.config.displayNameFromDS}});return[{...M[0],meta:{...M[0].meta,type:r.P.HeatmapRows},fields:[x,...L]}]}function O(M){for(let x=M.length-1;x>0;x--){const L=M[x].fields.find(U=>U.type===o.fS.number),S=M[x-1].fields.find(U=>U.type===o.fS.number);if(!L||!S)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let U=0;U<L.values.length;U++){const N=S.values[U]||[0];L.values[U]-=N}}return M}function R(M,x){let L,S;try{L=I(M.fields[1].state?.displayName??M.name??M.fields[1].name),S=I(x.fields[1].state?.displayName??x.name??x.fields[1].name)}catch(U){return console.error(U),0}return L>S?1:L<S?-1:0}function I(M){return f.test(M)?M[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(M)}},91794:(Q,A,e)=>{"use strict";e.d(A,{T8:()=>a,jo:()=>r,pD:()=>i,x3:()=>n});var n=(o=>(o.Low="Low",o.Medium="Medium",o.High="High",o.None="None",o))(n||{}),a=(o=>(o.Cortex="Cortex",o.Mimir="Mimir",o.Prometheus="Prometheus",o.Thanos="Thanos",o))(a||{}),i=(o=>(o.Auto="__auto",o.Verbose="__verbose",o.Custom="__custom",o))(i||{}),r=(o=>(o[o.LabelNames=0]="LabelNames",o[o.LabelValues=1]="LabelValues",o[o.MetricNames=2]="MetricNames",o[o.VarQueryResult=3]="VarQueryResult",o[o.SeriesQuery=4]="SeriesQuery",o[o.ClassicQuery=5]="ClassicQuery",o))(r||{})},3236:(Q,A,e)=>{"use strict";e.d(A,{Mt:()=>i,NM:()=>r,sY:()=>a});const n={filters:[],groupBy:[]};var a=(o=>(o.Done="done",o.Error="error",o.Pending="pending",o.Streaming="streaming",o))(a||{}),i=(o=>(o.Spans="spans",o.Traces="traces",o))(i||{}),r=(o=>(o.Intrinsic="intrinsic",o.Resource="resource",o.Span="span",o.Unscoped="unscoped",o))(r||{})},19536:(Q,A,e)=>{"use strict";e.d(A,{$C:()=>h,BC:()=>C,M7:()=>c,NZ:()=>E,T1:()=>y,Yt:()=>m,rB:()=>p,t3:()=>D,vO:()=>s,yf:()=>v});var n=e(46901),a=e(56790),i=e(47862),r=e(85666),o=e(91507),g=e(98147),u=e(60226);function c(I){const{nodes:M,edges:x}=l(I),[L,S]=(0,u.np)();for(const U of M)L.add(U);for(const U of x)S.add(U);return[L,S]}function l(I){const M=[],x=[],L=new n.U(I),S=d(L),U=(0,u.nO)(N=>{if(N>=I.length)return;const w=L.get(N);return{span:{...w},id:w.spanID,parentIds:w.parentSpanID?[w.parentSpanID]:[]}});for(let N=0;N<L.length;N++){const w=L.get(N),G=U[w.spanID].children.map(z=>{const W=U[z].span;return[W.startTime,W.startTime+W.duration]}),_=(0,u.et)(G),K=w.duration-_,k=(0,u.fy)(w.duration,S,K);M.push({[a.z.id]:w.spanID,[a.z.title]:w.serviceName??"",[a.z.subTitle]:w.operationName,[a.z.mainStat]:k.main,[a.z.secondaryStat]:k.secondary,[a.z.color]:K/S}),w.parentSpanID&&U[w.parentSpanID].span&&x.push({[a.z.id]:w.parentSpanID+"--"+w.spanID,[a.z.target]:w.spanID,[a.z.source]:w.parentSpanID})}return{nodes:M,edges:x}}function d(I){let M=0,x=1/0;for(let L=0;L<I.length;L++){const S=I.get(L);S.startTime<x&&(x=S.startTime),S.startTime+S.duration>M&&(M=S.startTime+S.duration)}return M-x}const f="traces_service_graph_request_server_seconds_sum",m="traces_service_graph_request_total",v="traces_service_graph_request_failed_total",E="traces_service_graph_request_server_seconds_bucket",p={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},h={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},s={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},y='span_kind="SPAN_KIND_SERVER"',D=[f,m,v,E];function C(I,M){const x=b(I),L={},S={};return O(x[m],"total",m,L,S),O(x[f],"seconds",f,L,S),O(x[v],"failed",v,L,S),R(L,S,M)}function P(){function I(L,S){return new i.v({name:L,fields:S,meta:{preferredVisualisationType:"nodeGraph"}})}const M=I("Nodes",[{name:a.z.id,type:r.fS.string,values:[]},{name:a.z.title,type:r.fS.string,config:{displayName:"Service name"},values:[]},{name:a.z.subTitle,type:r.fS.string,config:{displayName:"Service namespace"},values:[]},{name:a.z.mainStat,type:r.fS.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:a.z.secondaryStat,type:r.fS.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]},{name:a.z.arc+"success",type:r.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:o.S.Fixed}},values:[]},{name:a.z.arc+"failed",type:r.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:o.S.Fixed}},values:[]}]),x=I("Edges",[{name:a.z.id,type:r.fS.string,values:[]},{name:a.z.source,type:r.fS.string,values:[]},{name:"sourceName",type:r.fS.string,values:[]},{name:"sourceNamespace",type:r.fS.string,values:[]},{name:a.z.target,type:r.fS.string,values:[]},{name:"targetName",type:r.fS.string,values:[]},{name:"targetNamespace",type:r.fS.string,values:[]},{name:a.z.mainStat,type:r.fS.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:a.z.secondaryStat,type:r.fS.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]}]);return[M,x]}function b(I){return(I[0]?.data||[]).reduce((M,x)=>{const L=(0,g.g0)(x);return M[L.refId??"A"]=new n.U(L),M},{})}var T=(I=>(I.sourceName="sourceName",I.sourceNamespace="sourceNamespace",I.targetName="targetName",I.targetNamespace="targetNamespace",I))(T||{});function O(I,M,x,L,S){if(!I)return;const U=`Value #${x}`;for(let N=0;N<I.length;N++){const w=I.get(N),G=w.server_service_namespace?`${w.server_service_namespace}/${w.server}`:w.server,_=w.client_service_namespace?`${w.client_service_namespace}/${w.client}`:w.client,K=`${_}_${G}`;S[K]?S[K][M]=(S[K][M]||0)+w[U]:S[K]={target:G,targetName:w.server,targetNamespace:w.server_service_namespace,source:_,sourceName:w.client,sourceNamespace:w.client_service_namespace,[M]:w[U]},L[G]?L[G][M]=(L[G][M]||0)+w[U]:L[G]={name:w.server,namespace:w.server_service_namespace,[M]:w[U]},L[_]||(L[_]={name:w.client,namespace:w.client_service_namespace,[M]:0})}}function R(I,M,x){const[L,S]=P();for(const U of Object.keys(I)){const N=I[U];L.add({[a.z.id]:U,[a.z.title]:N.name,[a.z.subTitle]:N.namespace,[a.z.mainStat]:N.total?N.seconds/N.total*1e3:Number.NaN,[a.z.secondaryStat]:N.total?Math.round(N.total*100)/100:Number.NaN,[a.z.arc+"success"]:N.total?(N.total-Math.min(N.failed||0,N.total))/N.total:1,[a.z.arc+"failed"]:N.total?Math.min(N.failed||0,N.total)/N.total:0})}for(const U of Object.keys(M)){const N=M[U];S.add({[a.z.id]:U,[a.z.source]:N.source,sourceName:N.sourceName,sourceNamespace:N.sourceNamespace,[a.z.target]:N.target,targetName:N.targetName,targetNamespace:N.targetNamespace,[a.z.mainStat]:N.total?N.seconds/N.total*1e3:Number.NaN,[a.z.secondaryStat]:N.total?Math.round(N.total*100)/100:Number.NaN})}return{nodes:L,edges:S}}},45563:(Q,A,e)=>{"use strict";e.d(A,{IM:()=>C,Jk:()=>L,KZ:()=>N,RY:()=>v,g9:()=>P,n4:()=>S,vM:()=>x});var n=e(85178),a=e(47862),i=e(85666),r=e(63908),o=e(98147),g=e(58492),u=e(28073),c=e(85498),l=e(97001),d=e(3236),f=e(19536);function m(W,Z,H,X){const Y=new a.v({fields:[{name:"Time",type:i.fS.time,config:{custom:{width:200}},values:[]},{name:"traceID",type:i.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:Z,datasourceName:H,query:{query:"${__value.raw}"}}}]},values:[]},{name:"Message",type:i.fS.string,values:[]}],meta:{preferredVisualisationType:"table"}});if(!W||X.length===0)return Y;const ne=W.fields.find(se=>se.type===i.fS.time);for(let se of W.fields){let re=!1;if(se.type===i.fS.string){const ge=se.values;for(let q=0;q<ge.length;q++){const me=ge[q];if(me)for(let oe of X){const fe=me.match(oe);if(fe){const ve=fe[1],pe=ne?ne.values[q]:null;Y.fields[0].values.push(pe),Y.fields[1].values.push(ve),Y.fields[2].values.push(me),re=!0}}}}if(re)break}return Y}function v(W,Z,H,X){return W.data.forEach((Y,ne)=>{const se=m(Y,Z,H,X);W.data[ne]=se}),W}function E(W){if(W.stringValue)return W.stringValue;if(W.boolValue!==void 0)return!!W.boolValue;if(W.intValue!==void 0)return Number.parseInt(W.intValue,10);if(W.doubleValue)return Number.parseFloat(W.doubleValue);if(W.arrayValue){const Z=[];for(const H of W.arrayValue.values)Z.push(E(H));return Z}return""}function p(W){const Z=[];let H="OTLPResourceNoServiceName";if(!W)return{serviceName:H,serviceTags:Z};for(const X of W.attributes)X.key===n.R9.SERVICE_NAME&&(H=X.value.stringValue||H),Z.push({key:X.key,value:E(X.value)});return{serviceName:H,serviceTags:Z}}function h(W){const Z=[];if(W.attributes)for(const H of W.attributes)Z.push({key:H.key,value:E(H.value)});return Z}function s(W){let Z;if(W.kind){const H=W.kind.toString().toLowerCase().split("_");Z=H.length?H[H.length-1]:W.kind.toString()}return Z}function y(W){const Z=[];if(W.links)for(const H of W.links){const{traceId:X,spanId:Y}=H,ne=[];if(H.attributes)for(const se of H.attributes)ne.push({key:se.key,value:E(se.value)});Z.push({traceID:X,spanID:Y,tags:ne})}return Z}function D(W){const Z=[];if(W.events)for(const H of W.events){const X=[];if(H.attributes)for(const Y of H.attributes)X.push({key:Y.key,value:E(Y.value)});Z.push({fields:X,timestamp:H.timeUnixNano/1e6})}return Z}function C(W,Z=!1){const H=new a.v({fields:[{name:"traceID",type:i.fS.string,values:[]},{name:"spanID",type:i.fS.string,values:[]},{name:"parentSpanID",type:i.fS.string,values:[]},{name:"operationName",type:i.fS.string,values:[]},{name:"serviceName",type:i.fS.string,values:[]},{name:"kind",type:i.fS.string,values:[]},{name:"statusCode",type:i.fS.number,values:[]},{name:"statusMessage",type:i.fS.string,values:[]},{name:"instrumentationLibraryName",type:i.fS.string,values:[]},{name:"instrumentationLibraryVersion",type:i.fS.string,values:[]},{name:"traceState",type:i.fS.string,values:[]},{name:"serviceTags",type:i.fS.other,values:[]},{name:"startTime",type:i.fS.number,values:[]},{name:"duration",type:i.fS.number,values:[]},{name:"logs",type:i.fS.other,values:[]},{name:"references",type:i.fS.other,values:[]},{name:"tags",type:i.fS.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const Y of W){const{serviceName:ne,serviceTags:se}=p(Y.resource);for(const re of Y.instrumentationLibrarySpans)for(const ge of re.spans)H.add({traceID:ge.traceId.length>16?ge.traceId.slice(16):ge.traceId,spanID:ge.spanId,parentSpanID:ge.parentSpanId||"",operationName:ge.name||"",serviceName:ne,kind:s(ge),statusCode:ge.status?.code,statusMessage:ge.status?.message,instrumentationLibraryName:re.instrumentationLibrary?.name,instrumentationLibraryVersion:re.instrumentationLibrary?.version,traceState:ge.traceState,serviceTags:se,startTime:ge.startTimeUnixNano/1e6,duration:(ge.endTimeUnixNano-ge.startTimeUnixNano)/1e6,tags:h(ge),logs:D(ge),references:y(ge)})}}catch(Y){return console.error(Y),{error:{message:"JSON is not valid OpenTelemetry format: "+Y},data:[]}}let X=[H];return Z&&X.push(...(0,f.M7)(H)),{data:X}}function P(W){let Z={batches:[]},H={};for(let X=0;X<W.length;X++){const Y=W.get(X);H[Y.serviceName]||(H[Y.serviceName]=Z.batches.length,Z.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let ne=H[Y.serviceName];Z.batches[ne].resource.attributes.length===0&&(Z.batches[ne].resource.attributes=T(Y.serviceTags)),Z.batches[ne].instrumentationLibrarySpans[0].instrumentationLibrary||Y.instrumentationLibraryName&&(Z.batches[ne].instrumentationLibrarySpans[0].instrumentationLibrary={name:Y.instrumentationLibraryName,version:Y.instrumentationLibraryVersion?Y.instrumentationLibraryVersion:""}),Z.batches[ne].instrumentationLibrarySpans[0].spans.push({traceId:Y.traceID.padStart(32,"0"),spanId:Y.spanID,parentSpanId:Y.parentSpanID||"",traceState:Y.traceState||"",name:Y.operationName,kind:b(Y.kind),startTimeUnixNano:Y.startTime*1e6,endTimeUnixNano:(Y.startTime+Y.duration)*1e6,attributes:Y.tags?T(Y.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:R(Y),events:I(Y.logs),links:M(Y.references)})}return Z}function b(W){let Z;if(W)switch(W){case"server":Z="SPAN_KIND_SERVER";break;case"client":Z="SPAN_KIND_CLIENT";break;case"producer":Z="SPAN_KIND_PRODUCER";break;case"consumer":Z="SPAN_KIND_CONSUMER";break;case"internal":Z="SPAN_KIND_INTERNAL";break}return Z}function T(W){return W.reduce((Z,H)=>[...Z,{key:H.key,value:O(H)}],[])}function O(W){if(typeof W.value=="string")return{stringValue:W.value};if(typeof W.value=="boolean")return{boolValue:W.value};if(typeof W.value=="number")return W.value%1===0?{intValue:W.value}:{doubleValue:W.value};if(typeof W.value=="object"&&Array.isArray(W.value)){const Z=[];for(const H of W.value)Z.push(O(H));return{arrayValue:{values:Z}}}return{stringValue:W.value}}function R(W){let Z;return W.statusCode!==void 0&&(Z={code:W.statusCode,message:W.statusMessage?W.statusMessage:""}),Z}function I(W){if(!W||!W.length)return;let Z=[];for(const H of W){let X={timeUnixNano:H.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const Y of H.fields)X.attributes.push({key:Y.key,value:O(Y)});Z.push(X)}return Z}function M(W){if(!W||!W.length)return;let Z=[];for(const H of W){let X={traceId:H.traceID,spanId:H.spanID,attributes:[],droppedAttributesCount:0};if(H.tags?.length)for(const Y of H.tags)X.attributes?.push({key:Y.key,value:O(Y)});Z.push(X)}return Z}const x="Related profiles";function L(W,Z,H=!1){const X=W.data[0];if(!X)return z;if(c.config.featureToggles.traceToProfiles){const se=Z?.jsonData?.tracesToProfiles;let re;if(se?.datasourceUid&&(re=(0,l.ak)().getInstanceSettings(se.datasourceUid)),se&&re){const ge=se.customQuery?se.query:void 0,q={title:x,url:"",internal:{datasourceUid:re.uid,datasourceName:re.name,query:{labelSelector:ge||"{${__tags}}",groupBy:[],profileTypeId:se.profileTypeId??"",queryType:"profile",spanSelector:['${__span.tags["pyroscope.profile.id"]}'],refId:"profile"}},origin:r.n1.Datasource};X.fields.forEach(me=>{me.name==="tags"&&(me.config.links=[q])})}}let Y=[...W.data];return H&&Y.push(...(0,f.M7)((0,o.g0)(X))),{...W,data:Y}}function S(W,Z){const H=new a.v({name:"Traces",refId:"traces",fields:[{name:"traceID",type:i.fS.string,values:[],config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:Z.uid,datasourceName:Z.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceService",type:i.fS.string,config:{displayNameFromDS:"Trace service"},values:[]},{name:"traceName",type:i.fS.string,config:{displayNameFromDS:"Trace name"},values:[]},{name:"startTime",type:i.fS.time,config:{displayNameFromDS:"Start time"},values:[]},{name:"traceDuration",type:i.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"},values:[]}],meta:{preferredVisualisationType:"table"}});if(!W?.length)return H;const X=W.sort((Y,ne)=>parseInt(ne?.startTimeUnixNano,10)/1e6-parseInt(Y?.startTimeUnixNano,10)/1e6).map(U);for(const Y of X)H.add(Y);return H}function U(W){return{traceID:W.traceID,startTime:parseInt(W.startTimeUnixNano,10)/1e6,traceDuration:W.durationMs,traceService:W.rootServiceName||"",traceName:W.rootTraceName||""}}function N(W,Z,H){return H===d.Mt.Spans?G(W,Z):w(W,Z)}function w(W,Z){const H=(0,o.at)({name:"Traces",refId:"traces",fields:[{name:"traceID",type:i.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:Z.uid,datasourceName:Z.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:i.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:i.fS.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:i.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:i.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:i.fS.nestedFrames}],meta:{preferredVisualisationType:"table"}});return W?.length?(H.length=W.length,W.sort((X,Y)=>parseInt(Y?.startTimeUnixNano,10)/1e6-parseInt(X?.startTimeUnixNano,10)/1e6).forEach(X=>{const Y=U(X);H.fields[0].values.push(Y.traceID),H.fields[1].values.push(Y.startTime),H.fields[2].values.push(Y.traceService),H.fields[3].values.push(Y.traceName),H.fields[4].values.push(Y.traceDuration),X.spanSets?H.fields[5].values.push(X.spanSets.map(ne=>K(X,ne,Z))):X.spanSet&&H.fields[5].values.push([K(X,X.spanSet,Z)])}),[H]):[H]}function G(W,Z){const H={};let X=!1;const Y=new a.v({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:i.fS.string,config:{custom:{hidden:!0}}},{name:"traceService",type:i.fS.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:i.fS.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:i.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:Z.uid,datasourceName:Z.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:i.fS.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:i.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!X}}},...Object.values(H).sort((ne,se)=>ne.name.localeCompare(se.name)),{name:"duration",type:i.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return W==null?(console.error(`Unexpected ${W} value for \`data\``),[Y]):W.length?(W.forEach(ne=>_(ne).forEach(se=>{se.attributes?.forEach(re=>{H[re.key]={name:re.key,type:i.fS.string,config:{displayNameFromDS:re.key}}}),se.spans.forEach(re=>{re.name&&(X=!0),re.attributes?.forEach(ge=>{H[ge.key]={name:ge.key,type:i.fS.string,config:{displayNameFromDS:ge.key}}})})})),W.sort((ne,se)=>parseInt(se?.startTimeUnixNano,10)/1e6-parseInt(ne?.startTimeUnixNano,10)/1e6).forEach(ne=>{_(ne).forEach(se=>{se.spans.forEach(re=>{Y.add(k(re,se,ne))})})}),[Y]):[Y]}const _=W=>(W.spanSets&&W.spanSet&&console.warn("Both `spanSets` and `spanSet` are set. `spanSet` will be ignored"),W.spanSets||(W.spanSet?[W.spanSet]:[])),K=(W,Z,H)=>{const X={};let Y=!1;Z.attributes?.map(re=>{X[re.key]={name:re.key,type:i.fS.string,config:{displayNameFromDS:re.key},values:[]}}),Z.spans.forEach(re=>{re.name&&(Y=!0),re.attributes?.forEach(ge=>{X[ge.key]={name:ge.key,type:i.fS.string,config:{displayNameFromDS:ge.key},values:[]}})});const ne=new a.v({fields:[{name:"traceIdHidden",type:i.fS.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:i.fS.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:H.uid,datasourceName:H.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:i.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:i.fS.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!Y}}},...Object.values(X).sort((re,ge)=>re.name.localeCompare(ge.name)),{name:"duration",type:i.fS.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),se=(0,g.j)();for(const re of ne.fields)re.display=(0,u.U)({field:re,theme:se});return Z.spans.forEach(re=>{ne.add(k(re,Z,W))}),ne};function k(W,Z,H){const X=parseInt(W.startTimeUnixNano,10)/1e6,Y={traceIdHidden:H.traceID,traceService:H.rootServiceName||"",traceName:H.rootTraceName||"",spanID:W.spanID,time:X,duration:parseInt(W.durationNanos,10),name:W.name};let ne=[];return Z.attributes&&(ne=ne.concat(Z.attributes)),W.attributes&&(ne=ne.concat(W.attributes)),ne.forEach(se=>{(se.value.boolValue||se.value.Value?.bool_value)&&(Y[se.key]=se.value.boolValue||se.value.Value?.bool_value),(se.value.doubleValue||se.value.Value?.double_value)&&(Y[se.key]=se.value.doubleValue||se.value.Value?.double_value),(se.value.intValue||se.value.Value?.int_value)&&(Y[se.key]=se.value.intValue||se.value.Value?.int_value),(se.value.stringValue||se.value.Value?.string_value)&&(Y[se.key]=se.value.stringValue||se.value.Value?.string_value)}),Y}const z={data:[new a.v({fields:[{name:"trace",type:i.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},67547:(Q,A,e)=>{"use strict";e.d(A,{H:()=>c,m:()=>i});var n=e(47862),a=e(85666);function i(d){const f=d.map(r),m=new n.v({fields:[{name:"traceID",type:a.fS.string,values:[]},{name:"spanID",type:a.fS.string,values:[]},{name:"parentSpanID",type:a.fS.string,values:[]},{name:"operationName",type:a.fS.string,values:[]},{name:"serviceName",type:a.fS.string,values:[]},{name:"serviceTags",type:a.fS.other,values:[]},{name:"startTime",type:a.fS.number,values:[]},{name:"duration",type:a.fS.number,values:[]},{name:"logs",type:a.fS.other,values:[]},{name:"tags",type:a.fS.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const v of f)m.add(v);return m}function r(d){const f={traceID:d.traceId,spanID:d.id,parentSpanID:d.parentId,operationName:d.name,serviceName:d.localEndpoint?.serviceName||d.remoteEndpoint?.serviceName||"unknown",serviceTags:g(d),startTime:d.timestamp/1e3,duration:d.duration/1e3,logs:d.annotations?.map(o)??[],tags:Object.keys(d.tags||{}).reduce((m,v)=>v==="error"?(m.push({key:"error",value:!0}),m.push({key:"errorValue",value:d.tags.error}),m):(m.push({key:v,value:d.tags[v]}),m),[])};return d.kind&&(f.tags=[{key:"kind",value:d.kind},...f.tags??[]]),d.shared&&(f.tags=[{key:"shared",value:d.shared},...f.tags??[]]),f}function o(d){return{timestamp:d.timestamp,fields:[{key:"annotation",value:d.value}]}}function g(d){const f=d.localEndpoint||d.remoteEndpoint;return f?[u("ipv4",f.ipv4),u("ipv6",f.ipv6),u("port",f.port),u("endpointType",d.localEndpoint?"local":"remote")].filter(m=>!!m):[]}function u(d,f){if(f)return{key:d,value:f}}const c=d=>{let f=[];for(let m=0;m<d.length;m++){const v=d.get(m);f.push({traceId:v.traceID,parentId:v.parentSpanID,name:v.operationName,id:v.spanID,timestamp:v.startTime*1e3,duration:v.duration*1e3,...l(v),annotations:v.logs.length?v.logs.map(E=>({timestamp:E.timestamp,value:E.fields[0].value})):void 0,tags:v.tags.length?v.tags.filter(E=>E.key!=="kind"&&E.key!=="endpointType"&&E.key!=="shared").reduce((E,p)=>p.key==="error"?{...E,[p.key]:v.tags.find(h=>h.key==="errorValue").value||""}:{...E,[p.key]:p.value},{}):void 0,kind:v.tags.find(E=>E.key==="kind")?.value,shared:v.tags.find(E=>E.key==="shared")?.value})}return f},l=d=>{const f=d.serviceTags.find(m=>m.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return d.serviceName!=="unknown"?{[f]:{serviceName:d.serviceName,ipv4:d.serviceTags.find(m=>m.key==="ipv4")?.value,ipv6:d.serviceTags.find(m=>m.key==="ipv6")?.value,port:d.serviceTags.find(m=>m.key==="port")?.value}}:void 0}},2754:(Q,A,e)=>{"use strict";e.d(A,{As:()=>n,LM:()=>i,kx:()=>a,wO:()=>r});var n=(o=>(o[o.AlphaAsc=1]="AlphaAsc",o[o.AlphaDesc=2]="AlphaDesc",o[o.Importance=3]="Importance",o[o.TimeAsc=4]="TimeAsc",o[o.TimeDesc=5]="TimeDesc",o))(n||{}),a=(o=>(o.Current="current",o.RecentChanges="changes",o))(a||{}),i=(o=>(o.Default="default",o.Custom="custom",o))(i||{}),r=(o=>(o.List="list",o.Stat="stat",o))(r||{})},1383:(Q,A,e)=>{"use strict";e.d(A,{Gj:()=>a,Qm:()=>g});var n=e(73899);const a=1,i=2,r=3,o=(u,c,l,d)=>(0,n.O)(c+u*(l+d),6);function g(u,c,l,d,f){let m=1-c,v=l===a?m/(u-1):l===i?m/u:l===r?m/(u+1):0;(isNaN(v)||v===1/0)&&(v=0);let E=l===a?0:l===i?v/2:l===r?v:0,p=c/u,h=(0,n.O)(p,6);if(d==null)for(let s=0;s<u;s++)f(s,o(s,E,p,v),h);else f(d,o(d,E,p,v),h)}},17473:(Q,A,e)=>{"use strict";e.d(A,{Pn:()=>i,kK:()=>o,lW:()=>g});const n=10,a=4;function i(u,c,l,d,f,m){return u>=l&&u<=f&&c>=d&&c<=m}function r(u,c,l){let d;if(u.o.length&&(d=u.o.find(f=>f.sidx===c&&f.didx===l)),d==null&&u.q)for(let f=0;f<u.q.length&&(d=r(u.q[f],c,l),!d);f++);return d}function o(u,c){return u.x<=c.x+c.w&&u.x+u.w>=c.x&&u.y+u.h>=c.y&&u.y<=c.y+c.h}class g{constructor(c,l,d,f,m=0){this.x=c,this.y=l,this.w=d,this.h=f,this.l=m,this.o=[],this.q=null}split(){let c=this,l=c.x,d=c.y,f=c.w/2,m=c.h/2,v=c.l+1;c.q=[new g(l+f,d,f,m,v),new g(l,d,f,m,v),new g(l,d+m,f,m,v),new g(l+f,d+m,f,m,v)]}quads(c,l,d,f,m){let v=this,E=v.q,p=v.x+v.w/2,h=v.y+v.h/2,s=l<h,y=c<p,D=c+d>p,C=l+f>h;s&&D&&m(E[0]),y&&s&&m(E[1]),y&&C&&m(E[2]),D&&C&&m(E[3])}add(c){let l=this;if(l.q!=null)l.quads(c.x,c.y,c.w,c.h,d=>{d.add(c)});else{let d=l.o;if(d.push(c),d.length>n&&l.l<a){l.split();for(let f=0;f<d.length;f++){let m=d[f];l.quads(m.x,m.y,m.w,m.h,v=>{v.add(m)})}l.o.length=0}}}get(c,l,d,f,m){let v=this,E=v.o;for(let p=0;p<E.length;p++)m(E[p]);v.q!=null&&v.quads(c,l,d,f,p=>{p.get(c,l,d,f,m)})}clear(){this.o.length=0,this.q=null}}},44028:(Q,A,e)=>{"use strict";e.d(A,{M:()=>m,l:()=>v});var n=e(69781),a=e.n(n),i=e(31733),r=e(55632),o=e(76236),g=e(71199),u=e(42023),c=e(60470),l=e(44203),d=e(83811),f=e(45127);class m extends i.PureComponent{constructor(){super(...arguments),this.renderComponent=(p,h)=>{const{options:s,fieldConfig:y}=this.props,{value:D,alignmentFactors:C,orientation:P,width:b,height:T,count:O}=p,{field:R,display:I,view:M,colIndex:x}=D,{openMenu:L,targetClassName:S}=h;let U;return M&&(0,n.isNumber)(x)&&(U=M.getFieldDisplayProcessor(x)),i.createElement(u.xf,{value:v(O,y.defaults,I),width:b,height:T,orientation:P,field:R,text:s.text,display:U,theme:d.config.theme2,itemSpacing:this.getItemSpacing(),displayMode:s.displayMode,onClick:L,className:S,alignmentFactors:O>1?C:void 0,showUnfilled:s.showUnfilled,valueDisplayMode:s.valueMode,namePlacement:s.namePlacement})},this.renderValue=p=>{const{value:h,orientation:s}=p,{hasLinks:y,getLinks:D}=h;return y&&D?i.createElement("div",{style:{width:"100%",display:s===r.wm.Vertical?"flex":"initial"}},i.createElement(c.V,{style:{height:"100%"},links:D},C=>this.renderComponent(p,C))):this.renderComponent(p,{})},this.getValues=()=>{const{data:p,options:h,replaceVariables:s,fieldConfig:y,timeZone:D}=this.props;return(0,o.nG)({fieldConfig:y,reduceOptions:h.reduceOptions,replaceVariables:s,theme:d.config.theme2,data:p.series,timeZone:D})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}getOrientation(){const{options:p,width:h,height:s}=this.props,{orientation:y}=p;return y===r.wm.Auto?h>s?r.wm.Vertical:r.wm.Horizontal:y}calcBarSize(){const{options:p}=this.props,h=this.getOrientation(),s=p.sizing===g.o.Manual,y=h===r.wm.Vertical,D=h===r.wm.Horizontal,C=s&&y?p.minVizWidth:f.v.minVizWidth,P=s&&D?p.minVizHeight:f.v.minVizHeight,b=s&&D?p.maxVizHeight:f.v.maxVizHeight;return{minVizWidth:C,minVizHeight:P,maxVizHeight:b}}render(){const{height:p,width:h,options:s,data:y,renderCounter:D}=this.props,{minVizWidth:C,minVizHeight:P,maxVizHeight:b}=this.calcBarSize();return i.createElement(l.Q,{source:y,getAlignmentFactors:o.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:D,width:h,height:p,maxVizHeight:b,minVizWidth:C,minVizHeight:P,itemSpacing:this.getItemSpacing(),orientation:s.orientation})}}function v(E,p,h){return E===1&&!p.displayName?{...h,title:void 0}:h}},45127:(Q,A,e)=>{"use strict";e.d(A,{v:()=>a});var n=e(71199);const a={displayMode:n.QH.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:n.L3.Auto,showUnfilled:!0,sizing:n.o.Auto,valueMode:n.M8.Color}},21628:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>P});var n=e(42439),a=e(71199),i=e(68489),r=e(74934),o=e(95070);const g=b=>(0,o.rD)(b),u=(b,T,O)=>{const R=(0,o.ZH)(b,T,O);if(T==="singlestat"&&O.angular){const I=O.angular.gauge;I&&(R.showThresholdMarkers=I.thresholdMarkers,R.showThresholdLabels=I.thresholdLabels)}return R};var c=e(31733),l=e(28073),d=e(76236),f=e(78688),m=e(60470),v=e(44203),E=e(83811),p=e(44028);const h={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:a.o.Auto};class s extends c.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,O)=>{const{options:R,fieldConfig:I}=this.props,{width:M,height:x,count:L,value:S}=T,{field:U,display:N}=S,{openMenu:w,targetClassName:G}=O;return c.createElement(f.a,{value:(0,p.l)(L,I.defaults,N),width:M,height:x,field:U,text:R.text,showThresholdLabels:R.showThresholdLabels,showThresholdMarkers:R.showThresholdMarkers,theme:E.config.theme2,onClick:w,className:G,orientation:R.orientation})},this.renderValue=T=>{const{value:O}=T,{getLinks:R,hasLinks:I}=O;return I&&R?c.createElement(m.V,{links:R,style:{flexGrow:1}},M=>this.renderComponent(T,M)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:O,replaceVariables:R,fieldConfig:I,timeZone:M}=this.props;for(let x of T.series)for(let L of x.fields)if(L.config.unit==="percent"||L.config.unit==="percentunit"){const S=L.config.min??0,U=L.config.max??(L.config.unit==="percent"?100:1);L.state=L.state??{},L.state.range={min:S,max:U,delta:U-S},L.display=(0,l.U)({field:L,theme:E.config.theme2})}return(0,d.nG)({fieldConfig:I,reduceOptions:O.reduceOptions,replaceVariables:R,theme:E.config.theme2,data:T.series,timeZone:M})},this.calculateGaugeSize=()=>{const{options:T}=this.props,O=T.orientation,R=T.sizing===a.o.Manual,I=O===a.wm.Vertical,M=O===a.wm.Horizontal,x=R&&I?T.minVizWidth:h.minVizWidth,L=R&&M?T.minVizHeight:h.minVizHeight;return{minVizWidth:x,minVizHeight:L}}}render(){const{height:T,width:O,data:R,renderCounter:I,options:M}=this.props,{minVizHeight:x,minVizWidth:L}=this.calculateGaugeSize();return c.createElement(v.Q,{getValues:this.getValues,renderValue:this.renderValue,width:O,height:T,source:R,autoGrid:!0,renderCounter:I,orientation:M.orientation,minVizHeight:x,minVizWidth:L})}}var y=e(47423),D=e(51437);class C{getSuggestionsForData(T){const{dataSummary:O}=T;if(!O.hasData||!O.hasNumberField||O.numberFieldCount>=50)return;const R=T.getListAppender({name:D.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:y.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:I=>{I.options.reduceOptions.values&&(I.options.reduceOptions.limit=2)}}});O.hasStringField&&O.frameCount===1&&O.rowCountTotal<10?(R.append({name:D.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),R.append({name:D.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(R.append({name:D.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),R.append({name:D.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const P=new n.c(s).useFieldConfig({useCustomConfig:b=>{b.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(b=>{(0,r.j)(b),(0,r.h)(b),b.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:h.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:h.showThresholdMarkers}).addRadio({path:"sizing",name:"Gauge size",settings:{options:[{value:a.o.Auto,label:"Auto"},{value:a.o.Manual,label:"Manual"}]},defaultValue:h.sizing,showIf:T=>T.orientation!==a.wm.Auto}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:h.minVizWidth,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===a.o.Manual&&T.orientation===a.wm.Vertical}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:h.minVizHeight,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===a.o.Manual&&T.orientation===a.wm.Horizontal}),i.Z(b)}).setPanelChangeHandler(u).setSuggestionsSupplier(new C).setMigrationHandler(g)},49479:(Q,A,e)=>{"use strict";e.d(A,{Cg:()=>i,EQ:()=>o,Er:()=>c,H:()=>r,Kq:()=>g,bD:()=>a,g$:()=>u});var n=e(71199),a=(l=>(l.Point="point",l.Line="line",l.Polygon="polygon",l.Any="*any*",l))(a||{});const i=5;var r=(l=>(l.Left="left",l.Center="center",l.Right="right",l))(r||{}),o=(l=>(l.Top="top",l.Middle="middle",l.Bottom="bottom",l))(o||{}),g=(l=>(l.Left="left",l.Center="center",l.Right="right",l))(g||{}),u=(l=>(l.Top="top",l.Center="center",l.Bottom="bottom",l))(u||{});const c=Object.freeze({size:{fixed:i,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:n.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},symbolAlign:{horizontal:"center",vertical:"center"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:n.eK.Mod,min:-360,max:360}})},26250:(Q,A,e)=>{"use strict";e.d(A,{Q:()=>r});var n=e(76932),a=e(31733),i=e(15605);const r=o=>(0,i.CB)(o)?a.createElement("a",{href:o,target:"_blank",className:(0,n.cx)("external-link"),rel:"noreferrer"},o):o},15605:(Q,A,e)=>{"use strict";e.d(A,{B1:()=>c,CB:()=>p,FB:()=>v,gE:()=>m,n_:()=>d,sA:()=>f,uH:()=>E,vV:()=>g});var n=e(98881),a=e(41861),i=e(24353),r=e(40268),o=e(49479);function g(h,s,y,D){const C={};return D&&Object.keys(D).length?(C.color=(0,i.getColorDimension)(h,D.color??o.Er.color,y),C.size=(0,i.getScaledDimension)(h,D.size??o.Er.size),C.rotation=(0,i.getScalarDimension)(h,D.rotation??o.Er.rotation),D.text&&(D.text.field||D.text.fixed)&&(C.text=(0,i.getTextDimension)(h,D.text))):s.fields&&(s.fields.color&&(C.color=(0,i.getColorDimension)(h,s.config.color??o.Er.color,y)),s.fields.size&&(C.size=(0,i.getScaledDimension)(h,s.config.size??o.Er.size)),s.fields.text&&(C.text=(0,i.getTextDimension)(h,s.config.text)),s.fields.rotation&&(C.rotation=(0,i.getScalarDimension)(h,s.config.rotation??o.Er.rotation))),C}let u;function c(){return u||(u=[],l()),u}async function l(){const h=await(0,r.e)();for(let s of["maps","gazetteer"])h.listFiles(s).subscribe({next:y=>{y.forEach(D=>{if(D.name.endsWith(".geojson")){const C=`public/${s}/${D.name}`;u.push({value:C,label:C})}})}})}const d=(h,s,y)=>{const D=h.initMapView(s.view);return h.map=new n.Z({view:D,pixelRatio:1,layers:[],controls:[],target:y,interactions:(0,a.c)({mouseWheelZoom:!1})})},f=(h,s)=>{h.initControls(s.controls),h.forceUpdate()},m=(h,s,y)=>{h.panelContext&&h.panelContext.onInstanceStateChange&&h.panelContext.onInstanceStateChange({map:h.map,layers:s,selected:y,actions:h.actions})},v=h=>{let s=h.layers.length;for(;s<100;){const y=`Layer ${s++}`;if(!h.byName.has(y))return y}return`Layer ${Date.now()}`};function E(h,s,y,D){const C=h.getPixelFromCoordinate(y),P=h.getPixelFromCoordinate(D),b=Math.abs(C[0]-P[0]),T=Math.abs(C[1]-P[1]);return b>s||T>s}const p=h=>{try{return new URL(h).protocol.includes("http")}catch{return!1}}},74322:(Q,A,e)=>{"use strict";e.d(A,{o:()=>i});var n=e(31733),a=e(23420);function i(r){const o={position:"relative",top:"auto",right:"auto",marginRight:0};return n.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},n.createElement(a.P,{onClick:r.onClick,style:r.style??o}))}},49417:(Q,A,e)=>{"use strict";e.d(A,{S_:()=>a,YG:()=>i,vC:()=>o});var n=e(71199),a=(g=>(g.Opacity="opacity",g.Scheme="scheme",g))(a||{}),i=(g=>(g.Exponential="exponential",g.Linear="linear",g))(i||{});const r={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:n.Jp.Auto,tooltip:{mode:n.f3.Single,yHistogram:!1,showColorScale:!1}},o={...r,color:{...r.color,mode:a.Scheme,scale:i.Exponential},yAxis:{...r.yAxis,axisPlacement:n.LB.Left},rowsFrame:{...r.rowsFrame,layout:n.kv.auto}}},72279:(Q,A,e)=>{"use strict";e.d(A,{S:()=>d});var n=e(76932),a=e(31733),i=e(49876),r=e(98827),o=e(40137),g=e(76067),u=e(95885);function c({width:m,showImage:v,data:E,index:p}){const h=(0,g.wW)(f),s=m>600,y=E.get(p);return a.createElement("article",{className:(0,n.cx)(h.item,s&&h.itemWide)},v&&y.ogImage&&a.createElement("a",{tabIndex:-1,href:r.QX.sanitizeUrl(y.link),target:"_blank",rel:"noopener noreferrer",className:(0,n.cx)(h.socialImage,s&&h.socialImageWide),"aria-hidden":!0},a.createElement("img",{src:y.ogImage,alt:y.title})),a.createElement("div",{className:h.body},a.createElement("time",{className:h.date,dateTime:(0,o.dq)(y.date,{format:"MMM DD"})},(0,o.dq)(y.date,{format:"MMM DD"})," "),a.createElement("a",{className:h.link,href:r.QX.sanitizeUrl(y.link),target:"_blank",rel:"noopener noreferrer"},a.createElement("h3",{className:h.title},y.title)),a.createElement("div",{className:h.content,dangerouslySetInnerHTML:{__html:r.QX.sanitize(y.content)}})))}const l=({width:m,showImage:v,rootProps:E})=>{const p=(0,g.wW)(f),h=m>600;return a.createElement("div",{className:(0,n.cx)(p.item,h&&p.itemWide),...E},v&&a.createElement(i.Z,{containerClassName:(0,n.cx)(p.socialImage,h&&p.socialImageWide),width:h?"250px":"100%",height:h?"150px":m*.5}),a.createElement("div",{className:p.body},a.createElement(i.Z,{containerClassName:p.date,width:60}),a.createElement(i.Z,{containerClassName:p.title,width:250}),a.createElement(i.Z,{containerClassName:p.content,width:"100%",count:6})))},d=(0,u.y)(c,l),f=m=>({container:(0,n.css)({height:"100%"}),item:(0,n.css)({display:"flex",padding:m.spacing(1),position:"relative",marginBottom:m.spacing(.5),marginRight:m.spacing(1),borderBottom:`2px solid ${m.colors.border.weak}`,background:m.colors.background.primary,flexDirection:"column",flexShrink:0}),itemWide:(0,n.css)({flexDirection:"row"}),body:(0,n.css)({display:"flex",flexDirection:"column",flex:1}),socialImage:(0,n.css)({display:"flex",alignItems:"center",marginBottom:m.spacing(1),"> img":{width:"100%",borderRadius:`${m.shape.radius.default} ${m.shape.radius.default} 0 0`}}),socialImageWide:(0,n.css)({marginRight:m.spacing(2),marginBottom:0,"> img":{width:"250px",borderRadius:m.shape.radius.default}}),link:(0,n.css)({color:m.colors.text.link,display:"inline-block","&:hover":{color:m.colors.text.link,textDecoration:"underline"}}),title:(0,n.css)({fontSize:"16px",marginBottom:m.spacing(.5)}),content:(0,n.css)({p:{marginBottom:m.spacing(.5),color:m.colors.text.primary}}),date:(0,n.css)({marginBottom:m.spacing(.5),fontWeight:500,borderRadius:`0 0 0 ${m.shape.radius.default}`,color:m.colors.text.secondary})})},33501:(Q,A,e)=>{"use strict";e.d(A,{k:()=>n});const n="https://grafana.com/blog/news.xml"},86160:(Q,A,e)=>{"use strict";e.d(A,{j:()=>m});var n=e(41710),a=e(46901);function i(v){const p=new DOMParser().parseFromString(v,"text/xml");return{items:Array.from(p.querySelectorAll("entry")).map(s=>({title:u(s,"title"),link:s.querySelector("link")?.getAttribute("href")??"",content:u(s,"content"),pubDate:u(s,"published"),ogImage:s.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function r(v){const p=new DOMParser().parseFromString(v,"text/xml");return{items:Array.from(p.querySelectorAll("item")).map(s=>({title:u(s,"title"),link:u(s,"link"),content:u(s,"description"),pubDate:u(s,"pubDate"),ogImage:s.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function o(v){return await(await fetch(v)).text()}function g(v){return new DOMParser().parseFromString(v,"text/xml").querySelector("feed")!==null}function u(v,E){return v.querySelector(E)?.textContent??""}async function c(v){const E=await o(v);return g(E)?i(E):r(E)}var l=e(74011),d=e(85666);function f(v){const E=[],p=[],h=[],s=[],y=[];for(const D of v.items){const C=(0,l.CQ)(D.pubDate);try{if(E.push(C.valueOf()),p.push(D.title),h.push(D.link),y.push(D.ogImage),D.content){const P=D.content.replace(/<\/?[^>]+(>|$)/g,"");s.push(P)}}catch(P){console.warn("Error reading news item:",P,D)}}return{fields:[{name:"date",type:d.fS.time,config:{displayName:"Date"},values:E},{name:"title",type:d.fS.string,config:{},values:p},{name:"link",type:d.fS.string,config:{},values:h},{name:"content",type:d.fS.string,config:{},values:s},{name:"ogImage",type:d.fS.string,config:{},values:y}],length:E.length}}function m(v){const[E,p]=(0,n.Z)(async()=>{const h=await c(v),s=f(h);return new a.U(s)},[v],{loading:!0});return{state:E,getNews:p}}},7542:(Q,A,e)=>{"use strict";e.d(A,{NB:()=>E,UN:()=>d,r6:()=>v});var n=e(76932),a=e(52083),i=e.n(a),r=e(31733),o=e(37479),g=e(99326),u=e(76067),c=e(49311),l=e(42618);const d=40,f="#a00",m=(D,C)=>({mainGroup:(0,n.css)`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${C==="inactive"?.5:1};
  `,mainCircle:(0,n.css)`
    fill: ${D.components.panel.background};
  `,filledCircle:(0,n.css)`
    fill: ${f};
  `,hoverCircle:(0,n.css)`
    opacity: 0.5;
    fill: transparent;
    stroke: ${D.colors.primary.text};
  `,text:(0,n.css)`
    fill: ${D.colors.text.primary};
    pointer-events: none;
  `,titleText:(0,n.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,o.Z)(D.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 140px;
  `,statsText:(0,n.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:(0,n.css)`
    width: 200px;
    & span {
      background-color: ${(0,o.Z)(D.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:(0,n.css)`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),v=D=>Math.ceil(D*.075),E=(0,r.memo)(function(C){const{node:P,onMouseEnter:b,onMouseLeave:T,onClick:O,hovering:R}=C,I=(0,u.l4)(),M=m(I,R),x=R==="active",L=P.nodeRadius?.values[P.dataFrameRowIndex]||d,S=v(L);return P.x!==void 0&&P.y!==void 0?r.createElement("g",{"data-node-id":P.id,className:M.mainGroup,"aria-label":`Node: ${P.title}`},r.createElement("circle",{"data-testid":`node-circle-${P.id}`,className:P.highlighted?M.filledCircle:M.mainCircle,r:L,cx:P.x,cy:P.y}),x&&r.createElement("circle",{className:M.hoverCircle,r:L-3,cx:P.x,cy:P.y,strokeWidth:S}),r.createElement(h,{node:P}),r.createElement("g",{className:M.text,style:{pointerEvents:"none"}},r.createElement(p,{node:P,hovering:R}),r.createElement("foreignObject",{x:P.x-(x?100:70),y:P.y+L+5,width:x?"200":"140",height:"40"},r.createElement("div",{className:i()(M.titleText,x&&M.textHovering)},r.createElement("span",null,P.title),r.createElement("br",null),r.createElement("span",null,P.subTitle)))),r.createElement("rect",{"data-testid":`node-click-rect-${P.id}`,onMouseEnter:()=>{b(P.id)},onMouseLeave:()=>{T(P.id)},onClick:U=>{O(U,P)},className:M.clickTarget,x:P.x-L-5,y:P.y-L-5,width:L*2+10,height:L*2+50})):null});function p({node:D,hovering:C}){const P=(0,u.l4)(),b=m(P,C),T=C==="active";return D.x!==void 0&&D.y!==void 0?D.icon?r.createElement("foreignObject",{x:D.x-35,y:D.y-20,width:"70",height:"40"},r.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},r.createElement(c.J,{"data-testid":`node-icon-${D.icon}`,name:D.icon,size:"xxxl"}))):r.createElement("foreignObject",{x:D.x-(T?100:35),y:D.y-15,width:T?"200":"70",height:"40"},r.createElement("div",{className:i()(b.statsText,T&&b.textHovering)},r.createElement("span",null,D.mainStat&&(0,l.Ew)(D.mainStat.config,D.mainStat.values[D.dataFrameRowIndex])),r.createElement("br",null),r.createElement("span",null,D.secondaryStat&&(0,l.Ew)(D.secondaryStat.config,D.secondaryStat.values[D.dataFrameRowIndex])))):null}function h(D){const{node:C}=D,P=C.arcSections.find(M=>M.values[C.dataFrameRowIndex]>=1),b=(0,u.l4)(),T=C.nodeRadius?.values[C.dataFrameRowIndex]||d,O=v(T);if(P)return r.createElement("circle",{fill:"none",stroke:b.visualization.getColorByName(P.config.color?.fixedColor||""),strokeWidth:O,r:T,cx:C.x,cy:C.y});const R=C.arcSections.filter(M=>M.values[C.dataFrameRowIndex]!==0);if(R.length===0)return r.createElement("circle",{fill:"none",stroke:C.color?y(C.color,C.dataFrameRowIndex,b):"gray",strokeWidth:O,r:T,cx:C.x,cy:C.y});const{elements:I}=R.reduce((M,x,L)=>{const S=x.config.color?.fixedColor||"",U=x.values[C.dataFrameRowIndex],N=r.createElement(s,{key:L,r:T,x:C.x,y:C.y,startPercent:M.percent,percent:U+M.percent>1?1-M.percent:U,color:b.visualization.getColorByName(S),strokeWidth:O});return M.elements.push(N),M.percent=M.percent+U,M},{elements:[],percent:0});return r.createElement(r.Fragment,null,I)}function s({r:D,x:C,y:P,startPercent:b,percent:T,color:O,strokeWidth:R=2}){const I=b+T,M=C+Math.sin(2*Math.PI*b)*D,x=P-Math.cos(2*Math.PI*b)*D,L=C+Math.sin(2*Math.PI*I)*D,S=P-Math.cos(2*Math.PI*I)*D,U=T>.5?"1":"0";return r.createElement("path",{fill:"none",d:`M ${M} ${x} A ${D} ${D} 0 ${U} 1 ${L} ${S}`,stroke:O,strokeWidth:R})}function y(D,C,P){return D.config.color?(0,g.fD)(D).getCalculator(D,P)(0,D.values[C]):D.values[C]}},77266:(Q,A,e)=>{"use strict";e.d(A,{E:()=>Ne});var n=e(76932),a=e(52083),i=e.n(a),r=e(31733),o=e(35013),g=e(76067),u=e(89719),c=e(49311);function l({id:ae="triangle",fill:J=v,headHeight:te=10}){return r.createElement("defs",null,r.createElement("marker",{id:ae,viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:te,markerHeight:te,orient:"auto"},r.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:J})))}var d=e(7542),f=e(42618);const m="#a00",v="#999",E=(0,r.memo)(function(J){const{edge:te,onClick:de,onMouseEnter:be,onMouseLeave:De,hovering:Ue}=J,{source:We,target:et,sourceNodeRadius:ze,targetNodeRadius:_e}=te,qe=10+te.thickness*2,at=(0,f.dM)({x1:We.x,y1:We.y,x2:et.x,y2:et.y},ze+(0,d.r6)(ze)/2||d.UN,_e+(0,d.r6)(_e)/2||d.UN,qe),lt=`triangle-${te.id}`,ft=`triangle-colored-${te.id}`;return r.createElement(r.Fragment,null,r.createElement(l,{id:lt,headHeight:qe}),r.createElement(l,{id:ft,fill:m,headHeight:qe}),r.createElement("g",{onClick:yt=>de(yt,te),style:{cursor:"pointer"},"aria-label":`Edge from: ${We.id} to: ${et.id}`},r.createElement("line",{strokeWidth:(Ue?1:0)+(te.highlighted?1:0)+te.thickness,stroke:te.highlighted?m:v,x1:at.x1,y1:at.y1,x2:at.x2,y2:at.y2,markerEnd:`url(#${te.highlighted?ft:lt})`}),r.createElement("line",{stroke:"transparent",x1:at.x1,y1:at.y1,x2:at.x2,y2:at.y2,strokeWidth:20,onMouseEnter:()=>{be(te.id)},onMouseLeave:()=>{De(te.id)}})))}),p=ae=>({mainGroup:(0,n.css)`
      pointer-events: none;
      font-size: 8px;
    `,background:(0,n.css)`
      fill: ${ae.components.tooltip.background};
    `,text:(0,n.css)`
      fill: ${ae.components.tooltip.text};
    `}),h=(0,r.memo)(function(J){const{edge:te}=J,{source:de,target:be,sourceNodeRadius:De,targetNodeRadius:Ue}=te,We=(0,f.dM)({x1:de.x,y1:de.y,x2:be.x,y2:be.y},De||d.UN,Ue||d.UN),et={x:We.x1+(We.x2-We.x1)/2,y:We.y1+(We.y2-We.y1)/2},ze=(0,g.wW)(p),_e=[te.mainStat,te.secondaryStat].filter(yt=>yt),qe=_e.length>1?"30":"15",at=_e.length>1?15:7.5;let lt=_e.length>1?-5:2.5;const ft=[];return _e.forEach((yt,wt)=>{ft.push(r.createElement("text",{key:wt,className:ze.text,x:et.x,y:et.y+lt,textAnchor:"middle"},yt)),lt+=15}),r.createElement("g",{className:ze.mainGroup},r.createElement("rect",{className:ze.background,x:et.x-40,y:et.y-at,width:"80",height:qe,rx:"5"}),ft)});var s=e(91507),y=e(71199),D=e(34588),C=e(27229);function P(){return{item:(0,n.css)`
      label: LegendItem;
      flex-grow: 0;
    `,legend:(0,n.css)`
      label: Legend;
      pointer-events: all;
    `}}const b=function(J){const{nodes:te,onSort:de,sort:be,sortable:De}=J,Ue=(0,g.l4)(),We=(0,g.wW)(P),et=T(te,Ue),ze=(0,r.useCallback)(_e=>{de({field:_e.data.field,ascending:_e.data.field===be?.field?!be?.ascending:!1})},[be,de]);return r.createElement(D.l,{className:We.legend,displayMode:y.jK.List,placement:"bottom",items:et,itemRenderer:_e=>r.createElement(r.Fragment,null,r.createElement(C.e,{item:_e,className:We.item,onLabelClick:De?ze:void 0}),De&&(be?.field===_e.data.field?r.createElement(c.J,{name:be.ascending?"arrow-up":"arrow-down"}):""))})};function T(ae,J){if(!ae.length)return[];const te=[ae[0].mainStat,ae[0].secondaryStat].filter(be=>!!be),de=ae.find(be=>be.arcSections.length>0);return de&&de.arcSections[0].config?.color?.mode===s.S.Fixed&&te.push(...new Set(ae.map(be=>be.arcSections).flat())),ae[0].color&&te.push(ae[0].color),te.map(be=>{const De={label:be.config.displayName||be.name,yAxis:0,data:{field:be}};return be.config.color?.mode===s.S.Fixed&&be.config.color?.fixedColor?De.color=J.visualization.getColorByName(be.config.color?.fixedColor||""):be.config.color?.mode&&(De.gradient=be.config.color?.mode),De.color||De.gradient||(De.color=J.visualization.getColorByName("")),De})}const O=40,R=ae=>({mainGroup:(0,n.css)`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:(0,n.css)`
    fill: ${ae.components.panel.background};
    stroke: ${ae.colors.border.strong};
  `,text:(0,n.css)`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),I=(0,r.memo)(function(J){const{marker:te,onClick:de}=J,{node:be}=te,De=(0,g.wW)(R);return be.x!==void 0&&be.y!==void 0?r.createElement("g",{"data-node-id":be.id,className:De.mainGroup,onClick:Ue=>{de?.(Ue,te)},"aria-label":`Hidden nodes marker: ${be.id}`},r.createElement("circle",{className:De.mainCircle,r:O,cx:be.x,cy:be.y}),r.createElement("g",null,r.createElement("foreignObject",{x:be.x-25,y:be.y-25,width:"50",height:"50"},r.createElement("div",{className:De.text},r.createElement("span",null,te.count>100?">100":te.count," nodes"))))):null});var M=e(79106),x=e(51343);function L(){return{wrapper:(0,n.css)`
      label: wrapper;
      pointer-events: all;
    `}}function S(ae){const{config:J,onConfigChange:te,onPlus:de,onMinus:be,disableZoomOut:De,disableZoomIn:Ue}=ae,[We,et]=(0,r.useState)(!1),ze=!1,_e=(0,g.wW)(L);return r.createElement("div",{className:_e.wrapper},r.createElement(M.wc,{spacing:"sm"},r.createElement(M.Lh,{spacing:"xs"},r.createElement(x.zx,{icon:"plus-circle",onClick:de,size:"md",title:"Zoom in",variant:"secondary",disabled:Ue}),r.createElement(x.zx,{icon:"minus-circle",onClick:be,size:"md",title:"Zoom out",variant:"secondary",disabled:De})),r.createElement(M.Lh,{spacing:"xs"},r.createElement(x.zx,{icon:"code-branch",onClick:()=>te({...J,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!J.gridLayout}),r.createElement(x.zx,{icon:"apps",onClick:()=>te({...J,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:J.gridLayout}))),ze&&r.createElement(x.zx,{size:"xs",fill:"text",onClick:()=>et(qe=>!qe)},We?"Hide config":"Show config"),ze&&We&&Object.keys(J).filter(qe=>qe!=="show").map(qe=>r.createElement("div",{key:qe},qe,r.createElement("input",{style:{width:50},type:"number",value:J[qe],onChange:at=>{te({...J,[qe]:parseFloat(at.target.value)})}}))))}var U=e(19367),N=e(56143),w=e(67034);const G=()=>new w.q(new URL(e.p+e.u(782),e.b));var _=e(69781);function K(ae,J,te,de,be){const[De,Ue]=(0,r.useMemo)(()=>{if(!(ae.length&&J.length))return[{},{}];const We=J.reduce((ze,_e)=>(ze[_e.source.id]=[...ze[_e.source.id]??[],_e],ze[_e.target.id]=[...ze[_e.target.id]??[],_e],ze),{}),et=ae.reduce((ze,_e)=>(ze[_e.id]=_e,ze),{});return[We,et]},[J,ae]);return(0,r.useMemo)(()=>ae.length<=te?{nodes:ae,edges:J}:de.gridLayout?z(ae,te,be):k(ae,J,Ue,De,te,be),[J,De,te,ae,Ue,be,de.gridLayout])}function k(ae,J,te,de,be,De){let Ue;De?Ue=[te[De]]:(Ue=ae.filter(at=>at.incoming===0),Ue.length||(Ue=[ae[0]]));const{visibleNodes:We,markers:et}=W(be,Ue,te,de),ze=Z(et,We,te,de),_e=(0,_.fromPairs)(ze.map(at=>[at.node.id,at]));for(const at of ze)at.count===1&&(delete _e[at.node.id],We[at.node.id]=at.node);const qe=J.filter(at=>(We[at.source.id]||_e[at.source.id])&&(We[at.target.id]||_e[at.target.id]));return{nodes:Object.values(We),edges:qe,markers:Object.values(_e)}}function z(ae,J,te){let de=0,be=J,De=[];if(te){const Ue=ae.findIndex(ze=>ze.id===te),We=Math.floor(J/2);let et=We;de=Ue-We,de<0&&(et+=Math.abs(de),de=0),be=Ue+et+1,be>ae.length&&(de>0&&(de=Math.max(0,de-(be-ae.length))),be=ae.length),de>1&&De.push({node:ae[de-1],count:de}),ae.length-be>1&&De.push({node:ae[be],count:ae.length-be})}else ae.length-J>1&&(De=[{node:ae[J],count:ae.length-J}]);return{nodes:ae.slice(de,be),edges:[],markers:De}}function W(ae,J,te,de){const be={};let De=[...J];for(;Object.keys(be).length<ae&&De.length>0;){let We=De.shift();if(be[We.id])continue;be[We.id]=We;const ze=(de[We.id]||[]).map(_e=>{const qe=_e.source.id===We.id?_e.target.id:_e.source.id;return te[qe]});De=De.concat(ze)}const Ue=(0,_.uniq)(De.filter(We=>!be[We.id]));return{visibleNodes:be,markers:Ue}}function Z(ae,J,te,de){return ae.map(be=>{const De={};let Ue=0,We=[be];for(;We.length>0&&Ue<=101;){let et=We.shift();if(J[et.id]||De[et.id])continue;De[et.id]||Ue++,De[et.id]=et;const _e=(de[et.id]||[]).map(qe=>{const at=qe.source.id===et.id?qe.target.id:qe.source.id;return te[at]});We=We.concat(_e)}return{node:be,count:Ue}})}const H={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function X(ae,J,te=H,de,be,De){const[Ue,We]=(0,r.useState)([]),[et,ze]=(0,r.useState)([]),[_e,qe]=(0,r.useState)(!1),at=(0,N.default)(),lt=(0,r.useRef)();(0,U.Z)(()=>{lt.current&&lt.current()}),(0,r.useEffect)(()=>{if(ae.length===0){We([]),ze([]),qe(!1);return}qe(!0);const st=Y(ae,J,({nodes:Mt,edges:ct})=>{at()&&(We(Mt),ze(ct),qe(!1))});return lt.current=st,st},[ae,J,at]);const[ft,yt]=(0,r.useMemo)(()=>{if(ae.length===0)return[[],[]];const st=ae.map(ct=>({...ct})),Mt=J.map(ct=>({...ct}));return ne(st,be,te.sort),[st,Mt]},[te.sort,ae,J,be]),{nodes:wt,edges:zt,markers:$t}=K(te.gridLayout?ft:Ue,te.gridLayout?yt:et,de,te,De),Ie=(0,r.useMemo)(()=>(0,f.Tz)([...wt,...($t||[]).map(st=>st.node)]),[wt,$t]);return{nodes:wt,edges:zt,markers:$t,bounds:Ie,hiddenNodesCount:ae.length-wt.length,loading:_e}}function Y(ae,J,te){const de=G();return de.onmessage=be=>{for(let De=0;De<ae.length;De++)be.data.nodes[De]={...ae[De],...be.data.nodes[De]};te(be.data)},de.postMessage({nodes:ae.map(be=>({id:be.id,incoming:be.incoming})),edges:J,config:H}),()=>{de.terminate()}}function ne(ae,J,te){const Ue=Math.min(Math.floor((J-120)/140),ae.length),We=Math.floor((Ue-1)*120/2);te&&ae.sort((et,ze)=>{const _e=te.field.values[et.dataFrameRowIndex],qe=te.field.values[ze.dataFrameRowIndex];return te.ascending?_e-qe:qe-_e});for(const[et,ze]of ae.entries()){const _e=Math.floor(et/Ue),qe=et%Ue;ze.x=qe*120-We,ze.y=-60+_e*140}}var se=e(63804),re=e(45502),ge=e(85115),q=e(46213);function me(ae,J,te,de,be,De){const[Ue,We]=(0,r.useState)(void 0),et=(0,r.useCallback)((_e,qe)=>{const[at,lt]=de.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],ft=[{label:at,onClick:zt=>{De(zt.id),be({...de,gridLayout:lt}),We(void 0)}}],yt=J?ae(J,qe.dataFrameRowIndex):[],wt=fe(yt,qe,ft);We(oe(r.createElement(Ee,{node:qe,nodes:J}),_e,We,wt))},[de,J,ae,We,be,De]);return{onEdgeOpen:(0,r.useCallback)((_e,qe)=>{if(!te)return;const at=ae(te,qe.dataFrameRowIndex),lt=fe(at,qe);We(oe(r.createElement(he,{edge:qe,edges:te}),_e,We,lt))},[te,ae,We]),onNodeOpen:et,MenuComponent:Ue}}function oe(ae,J,te,de){return r.createElement(re.x,{renderHeader:()=>ae,renderMenuItems:de,onClose:()=>te(void 0),x:J.pageX,y:J.pageY})}function fe(ae,J,te){if(!(ae.length||te?.length))return;const de=pe(ae);return()=>{let be=de?.map((De,Ue)=>r.createElement(ge.k,{key:`${De.label}${Ue}`,label:De.label},(De.items||[]).map(ve(J))));return te&&(be=[...te.map(ve(J)),...be]),be}}function ve(ae){return function(te){return r.createElement(q.s,{key:te.label,url:te.url,label:te.label,ariaLabel:te.ariaLabel,onClick:te.onClick?de=>{de?.ctrlKey||de?.metaKey||de?.shiftKey||(de?.preventDefault(),de?.stopPropagation(),te.onClick?.(ae))}:void 0,target:"_self"})}}function pe(ae){const J="Open in Explore",te=ae.reduce((de,be)=>{let De,Ue;return be.title.indexOf("/")!==-1?(De=be.title.split("/")[0],Ue=be.title.split("/")[1],de[De]=de[De]||[],de[De].push({l:be,newTitle:Ue})):(de[J]=de[J]||[],de[J].push({l:be})),de},{});return Object.keys(te).map(de=>({label:de,ariaLabel:de,items:te[de].map(be=>({label:be.newTitle||be.l.title,ariaLabel:be.newTitle||be.l.title,url:be.l.href,onClick:be.l.onClick}))}))}function Me({field:ae,index:J}){return r.createElement(Pe,{label:ae.config?.displayName||ae.name,value:(0,f.Ew)(ae.config,ae.values[J]||"")})}function Pe({label:ae,value:J}){const te=(0,g.wW)(Le);return r.createElement("tr",null,r.createElement("td",{className:te.label},ae,": "),r.createElement("td",{className:te.value},J))}function Ee({node:ae,nodes:J}){const te=[];if(J){const de=(0,f.F)(J);for(const be of[de.title,de.subTitle,de.mainStat,de.secondaryStat,...de.details])be&&be.values[ae.dataFrameRowIndex]&&te.push(r.createElement(Me,{key:be.name,field:be,index:ae.dataFrameRowIndex}))}else ae.title&&te.push(r.createElement(Pe,{key:"title",label:"Title",value:ae.title})),ae.subTitle&&te.push(r.createElement(Pe,{key:"subtitle",label:"Subtitle",value:ae.subTitle}));return r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,te))}function he(ae){const J=ae.edge.dataFrameRowIndex,te=(0,f.lr)(ae.edges),de=te.source?.values[J]||"",be=te.target?.values[J]||"",De=[];de&&be&&De.push(r.createElement(Pe,{key:"header-row",label:"Source \u2192 Target",value:`${de} \u2192 ${be}`}));for(const Ue of[te.mainStat,te.secondaryStat,...te.details])Ue&&Ue.values[J]&&De.push(r.createElement(Me,{key:`field-row-${J}`,field:Ue,index:J}));return r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,De))}const Le=ae=>({label:(0,n.css)`
      label: Label;
      line-height: 1.25;
      color: ${ae.colors.text.disabled};
      font-size: ${ae.typography.size.sm};
      font-weight: ${ae.typography.fontWeightMedium};
      padding-right: ${ae.spacing(1)};
    `,value:(0,n.css)`
      label: Value;
      font-size: ${ae.typography.size.sm};
      font-weight: ${ae.typography.fontWeightMedium};
      color: ${ae.colors.text.primary};
    `});var ke=e(41258);function ot(ae,J,te){const de=(0,ke.Z)(ae.gridLayout);let be;if(de===!0&&!ae.gridLayout&&te){const De=J.find(Ue=>Ue.id===te);De&&(be={x:-De.x,y:-De.y})}return be}function it(ae){const[J,te]=(0,r.useState)(),de=(0,N.default)();return(0,r.useEffect)(()=>{ae&&(te(ae),setTimeout(()=>{de()&&te(void 0)},500))},[ae,de]),J}function ce({scale:ae=1,bounds:J,focus:te}={}){const de=(0,N.default)(),be=(0,r.useRef)(!1),De=(0,r.useRef)(0),Ue=(0,r.useRef)(null),We={x:0,y:0},et=(0,r.useMemo)(()=>({right:J?-J.left:1/0,left:J?-J.right:-1/0,bottom:J?-J.top:-1/0,top:J?-J.bottom:1/0}),[J]),ze=(0,r.useRef)(We),_e=(0,r.useRef)(We),qe=(0,r.useRef)(We),[at,lt]=(0,r.useState)({isPanning:!1,position:We});(0,r.useEffect)(()=>{const wt=nt=>{!be.current&&de()&&(be.current=!0,ze.current=Re(nt),_e.current={...qe.current},lt(Ct=>({...Ct,isPanning:!0})),Ie())},zt=()=>{be.current&&de()&&(be.current=!1,lt(nt=>({...nt,isPanning:!1})),st())},$t=nt=>{wt(nt),Mt(nt)},Ie=()=>{document.addEventListener("mousemove",Mt),document.addEventListener("mouseup",zt),document.addEventListener("touchmove",Mt),document.addEventListener("touchend",zt)},st=()=>{document.removeEventListener("mousemove",Mt),document.removeEventListener("mouseup",zt),document.removeEventListener("touchmove",Mt),document.removeEventListener("touchend",zt)},Mt=nt=>{cancelAnimationFrame(De.current);const Ct=Re(nt);De.current=requestAnimationFrame(()=>{if(de()&&Ue.current){let kt=Ct.x-ze.current.x,Jt=Ct.y-ze.current.y;qe.current={x:le(_e.current.x+kt/ae,et.left,et.right),y:le(_e.current.y+Jt/ae,et.top,et.bottom)},lt(tn=>({...tn,position:{...qe.current}}))}})},ct=Ue.current;return ct&&(ct.addEventListener("mousedown",$t),ct.addEventListener("touchstart",$t)),()=>{ct&&(ct.removeEventListener("mousedown",$t),ct.removeEventListener("touchstart",$t))}},[ae,et,de]);const ft=(0,ke.Z)(te);(0,r.useEffect)(()=>{if(te&&ft?.x!==te.x&&ft?.y!==te.y){const wt={x:le(te.x,et.left,et.right),y:le(te.y,et.top,et.bottom)};lt({position:wt,isPanning:!1}),qe.current=wt,_e.current=wt}},[te,ft,et,qe,_e]);let yt=at.position;return te&&ft?.x!==te.x&&ft?.y!==te.y&&(yt=te),{state:{...at,position:{x:le(yt.x,et.left,et.right),y:le(yt.y,et.top,et.bottom)}},ref:Ue}}function le(ae,J,te){return Math.min(Math.max(ae,J??-1/0),te??1/0)}function Re(ae){return ae.changedTouches&&ae instanceof TouchEvent?{x:ae.changedTouches[0].clientX,y:ae.changedTouches[0].clientY}:ae instanceof MouseEvent?{x:ae.clientX,y:ae.clientY}:{x:0,y:0}}const Ae={stepDown:ae=>ae/1.5,stepUp:ae=>ae*1.5,min:.13,max:2.25};function Oe({stepUp:ae,stepDown:J,min:te,max:de}=Ae){const be=(0,r.useRef)(null),[De,Ue]=(0,r.useState)(1),We=(0,r.useCallback)(()=>{De<(de??1/0)&&Ue(ae(De))},[De,ae,de]),et=(0,r.useCallback)(()=>{De>(te??-1/0)&&Ue(J(De))},[De,J,te]),ze=(0,r.useCallback)(function(_e){if(_e.ctrlKey||_e.metaKey){if(_e.preventDefault(),Ue(Math.min(Math.max(te??-1/0,De+Math.min(_e.deltaY,2)*-.01),de??1/0)),_e.deltaY<0){const qe=De+Math.max(_e.deltaY,-4)*-.015;Ue(Math.max(te??-1/0,qe))}else if(_e.deltaY>0){const qe=De+Math.min(_e.deltaY,4)*-.015;Ue(Math.min(de??1/0,qe))}}},[te,de,De]);return(0,r.useEffect)(()=>{if(!be.current)return;const _e=be.current;return _e.addEventListener("wheel",ze,{passive:!1}),()=>{_e&&_e.removeEventListener("wheel",ze)}},[ze]),{onStepUp:We,onStepDown:et,scale:Math.max(Math.min(De,de??1/0),te??-1/0),isMax:De>=(de??1/0),isMin:De<=(te??-1/0),ref:be}}const $e=ae=>({wrapper:(0,n.css)`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:(0,n.css)`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:(0,n.css)`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:(0,n.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${ae.typography.h4.fontSize};
    color: ${ae.colors.text.secondary};
  `,mainGroup:(0,n.css)`
    label: mainGroup;
    will-change: transform;
  `,viewControls:(0,n.css)`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:(0,n.css)`
    label: legend;
    background: ${ae.colors.background.secondary};
    box-shadow: ${ae.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:(0,n.css)`
    margin-left: auto;
  `,alert:(0,n.css)`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${ae.shape.radius.default};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${ae.colors.warning.main};
    color: ${ae.colors.warning.contrastText};
  `,loadingWrapper:(0,n.css)`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),Ye=200;function Ne({getLinks:ae,dataFrames:J,nodeLimit:te}){const de=te||Ye,{edges:be,nodes:De}=(0,se.Y)(J),[Ue,{width:We,height:et}]=(0,o.Z)(),[ze,_e]=(0,r.useState)(H),qe=De[0],at=be[0],lt=(0,r.useMemo)(()=>(0,f.HB)(qe,at),[at,qe]),{nodeHover:ft,setNodeHover:yt,clearNodeHover:wt,edgeHover:zt,setEdgeHover:$t,clearEdgeHover:Ie}=tt(),[st,Mt]=(0,r.useState)([]);(0,r.useEffect)(()=>{let Pn=[];ft?Pn=(0,f.uX)(lt.nodes,lt.edges,ft):zt&&(Pn=(0,f.MP)(lt.nodes,lt.edges,zt)),Mt(Pn)},[ft,zt,lt]);const[ct,nt]=(0,r.useState)(),Ct=(0,r.useCallback)((Pn,sa)=>nt(sa.node.id),[nt]),{nodes:kt,edges:Jt,markers:tn,bounds:Kt,hiddenNodesCount:cn,loading:dn}=X(lt.nodes,lt.edges,ze,de,We,ct),Sn=ot(ze,kt,ct),{panRef:Zn,zoomRef:_n,onStepUp:Ut,onStepDown:Xt,isPanning:en,position:gn,scale:ln,isMaxZoom:xn,isMinZoom:Dn}=Ve(Kt,Sn),{onEdgeOpen:Ln,onNodeOpen:hn,MenuComponent:Gn}=me(ae,qe,at,ze,_e,nt),Vn=(0,g.wW)($e),$n=(0,r.useCallback)(Pn=>{Ue(Pn),_n.current=Pn},[Ue,_n]),Wn=it(ct);return r.createElement("div",{ref:$n,className:Vn.wrapper},dn?r.createElement("div",{className:Vn.loadingWrapper},"Computing layout\xA0",r.createElement(u.$,null)):null,J.length&&lt.nodes.length?r.createElement("svg",{ref:Zn,viewBox:`${-(We/2)} ${-(et/2)} ${We} ${et}`,className:i()(Vn.svg,en&&Vn.svgPanning)},r.createElement("g",{className:Vn.mainGroup,style:{transform:`scale(${ln}) translate(${Math.floor(gn.x)}px, ${Math.floor(gn.y)}px)`}},!ze.gridLayout&&r.createElement(Fe,{edges:Jt,nodeHoveringId:ft,edgeHoveringId:zt,onClick:Ln,onMouseEnter:$t,onMouseLeave:Ie}),r.createElement(je,{nodes:kt,onMouseEnter:yt,onMouseLeave:wt,onClick:hn,hoveringIds:st||[Wn]}),r.createElement(ut,{markers:tn||[],onClick:Ct}),!ze.gridLayout&&r.createElement(Te,{edges:Jt,nodeHoveringId:ft,edgeHoveringId:zt}))):r.createElement("div",{className:Vn.noDataMsg},"No data"),r.createElement("div",{className:Vn.viewControls},kt.length?r.createElement("div",{className:Vn.legend},r.createElement(b,{sortable:ze.gridLayout,nodes:kt,sort:ze.sort,onSort:Pn=>{_e({...ze,sort:Pn})}})):null,r.createElement("div",{className:Vn.viewControlsWrapper},r.createElement(S,{config:ze,onConfigChange:Pn=>{Pn.gridLayout!==ze.gridLayout&&nt(void 0),_e(Pn)},onMinus:Xt,onPlus:Ut,scale:ln,disableZoomIn:xn,disableZoomOut:Dn}))),cn>0&&r.createElement("div",{className:Vn.alert,"aria-label":"Nodes hidden warning"},r.createElement(c.J,{size:"sm",name:"info-circle"})," ",cn," nodes are hidden for performance reasons."),Gn)}const je=(0,r.memo)(function(J){return r.createElement(r.Fragment,null,J.nodes.map(te=>r.createElement(d.NB,{key:te.id,node:te,onMouseEnter:J.onMouseEnter,onMouseLeave:J.onMouseLeave,onClick:J.onClick,hovering:!J.hoveringIds||J.hoveringIds.length===0?"default":J.hoveringIds?.includes(te.id)?"active":"inactive"})))}),ut=(0,r.memo)(function(J){return r.createElement(r.Fragment,null,J.markers.map(te=>r.createElement(I,{key:"marker-"+te.node.id,marker:te,onClick:J.onClick})))}),Fe=(0,r.memo)(function(J){return r.createElement(r.Fragment,null,J.edges.map(te=>r.createElement(E,{key:te.id,edge:te,hovering:te.source.id===J.nodeHoveringId||te.target.id===J.nodeHoveringId||J.edgeHoveringId===te.id,onClick:J.onClick,onMouseEnter:J.onMouseEnter,onMouseLeave:J.onMouseLeave})))}),Te=(0,r.memo)(function(J){return r.createElement(r.Fragment,null,J.edges.map((te,de)=>{const be=te.source.id===J.nodeHoveringId||te.target.id===J.nodeHoveringId||J.edgeHoveringId===te.id,De=te.mainStat||te.secondaryStat;return be&&De&&r.createElement(h,{key:te.id,edge:te})}))});function Ve(ae,J){const{scale:te,onStepDown:de,onStepUp:be,ref:De,isMax:Ue,isMin:We}=Oe(),{state:et,ref:ze}=ce({scale:te,bounds:ae,focus:J}),{position:_e,isPanning:qe}=et;return{zoomRef:De,panRef:ze,position:_e,isPanning:qe,scale:te,onStepDown:de,onStepUp:be,isMaxZoom:Ue,isMinZoom:We}}function tt(){const[ae,J]=(0,r.useState)(void 0),te=(0,r.useCallback)(()=>J(void 0),[J]),[de,be]=(0,r.useState)(void 0),De=(0,r.useCallback)(()=>be(void 0),[be]);return{nodeHover:ae,setNodeHover:J,clearNodeHover:te,edgeHover:de,setEdgeHover:be,clearEdgeHover:De}}},63804:(Q,A,e)=>{"use strict";e.d(A,{Y:()=>i});var n=e(31733),a=e(42618);function i(r){return(0,n.useMemo)(()=>(0,a.E_)(r),[r])}},42618:(Q,A,e)=>{"use strict";e.d(A,{E_:()=>x,Ee:()=>O,Ew:()=>s,F:()=>u,HB:()=>d,MP:()=>I,Tz:()=>T,dM:()=>g,lr:()=>c,uX:()=>M});var n=e(47023),a=e(56790),i=e(85666),r=e(91507),o=e(7542);function g(L,S,U,N=1){const w=L.x2-L.x1,G=L.y2-L.y1,_=Math.sqrt(w*w+G*G),K=(L.x2-L.x1)/_,k=(L.y2-L.y1)/_,z=N-N/10;return{x1:L.x1+K*(S+5),y1:L.y1+k*(S+5),x2:L.x2-K*(U+3+z),y2:L.y2-k*(U+3+z)}}function u(L){const S={...L,fields:L.fields.map(N=>({...N,name:N.name.toLowerCase()}))},U=new n.N(S);return{id:U.getFieldByName(a.z.id.toLowerCase()),title:U.getFieldByName(a.z.title.toLowerCase()),subTitle:U.getFieldByName(a.z.subTitle.toLowerCase()),mainStat:U.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(a.z.secondaryStat.toLowerCase()),arc:l(L,a.z.arc),details:l(L,a.z.detail),color:U.getFieldByName(a.z.color),icon:U.getFieldByName(a.z.icon),nodeRadius:U.getFieldByName(a.z.nodeRadius.toLowerCase()),highlighted:U.getFieldByName(a.z.highlighted.toLowerCase())}}function c(L){const S={...L,fields:L.fields.map(N=>({...N,name:N.name.toLowerCase()}))},U=new n.N(S);return{id:U.getFieldByName(a.z.id.toLowerCase()),source:U.getFieldByName(a.z.source.toLowerCase()),target:U.getFieldByName(a.z.target.toLowerCase()),mainStat:U.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(a.z.secondaryStat.toLowerCase()),details:l(L,a.z.detail.toLowerCase()),highlighted:U.getFieldByName(a.z.highlighted.toLowerCase()),thickness:U.getFieldByName(a.z.thickness.toLowerCase())}}function l(L,S){return L.fields.filter(U=>U.name.match(new RegExp("^"+S)))}function d(L,S){if(!(S||L))return{nodes:[],edges:[]};if(L){const U=u(L);if(!U.id)throw new Error("id field is required for nodes data frame.");const N={};for(let G=0;G<U.id.values.length;G++){const _=U.id.values[G];N[_]=h(_,U,G)}let w=S?f(S,c(S),N):[];for(const G of w)N[G.target].incoming++;return{nodes:Object.values(N),edges:w,legend:U.arc.map(G=>({color:G.config.color?.fixedColor??"",name:G.config.displayName||G.name}))}}else{S=S;const U={},N=c(S);for(let _=0;_<S.length;_++){const{source:K,target:k}=E(N,_);U[k.id]=U[k.id]||k,U[K.id]=U[K.id]||K,m(N.mainStat)&&(U[k.id].mainStatNumeric=(U[k.id].mainStatNumeric??0)+N.mainStat.values[_]),m(N.secondaryStat)&&(U[k.id].secondaryStatNumeric=(U[k.id].secondaryStatNumeric??0)+N.secondaryStat.values[_]),U[k.id].incoming++}let w=f(S,N,U);return{nodes:v(U,N),edges:w}}}function f(L,S,U){if(!S.id)throw new Error("id field is required for edges data frame.");return S.id.values.map((N,w)=>{const G=S.target?.values[w],_=S.source?.values[w],K=U[_],k=U[G];return{id:N,dataFrameRowIndex:w,source:_,target:G,sourceNodeRadius:K.nodeRadius?K.nodeRadius.values[K.dataFrameRowIndex]:o.UN,targetNodeRadius:k.nodeRadius?k.nodeRadius.values[k.dataFrameRowIndex]:o.UN,mainStat:S.mainStat?s(S.mainStat.config,S.mainStat.values[w]):"",secondaryStat:S.secondaryStat?s(S.secondaryStat.config,S.secondaryStat.values[w]):"",highlighted:S.highlighted?.values[w]||!1,thickness:S.thickness?.values[w]||1}})}function m(L){return L&&L.type===i.fS.number}function v(L,S){const U=[],N=[],w=m(S.secondaryStat)?{...S.secondaryStat,values:U}:void 0,G=m(S.mainStat)?{...S.mainStat,values:N}:void 0;return Object.values(L).map((_,K)=>{if(G||w){const k={..._};return G&&(k.mainStat=G,N.push(_.mainStatNumeric),k.dataFrameRowIndex=K),w&&(k.secondaryStat=w,U.push(_.secondaryStatNumeric),k.dataFrameRowIndex=K),k}return _})}function E(L,S){const U=L.target?.values[S],N=L.source?.values[S];return{target:p(U,S),source:p(N,S)}}function p(L,S){return{id:L,title:L,subTitle:"",dataFrameRowIndex:S,incoming:0,arcSections:[],highlighted:!1}}function h(L,S,U){return{id:L,title:S.title?.values[U]||"",subTitle:S.subTitle?.values[U]||"",dataFrameRowIndex:U,incoming:0,mainStat:S.mainStat,secondaryStat:S.secondaryStat,arcSections:S.arc,color:S.color,icon:S.icon?.values[U]||"",nodeRadius:S.nodeRadius,highlighted:S.highlighted?.values[U]||!1}}function s(L,S){if(typeof S=="string")return S;{const U=L.decimals||2;return Number.isFinite(S)?S.toFixed(U)+(L.unit?" "+L.unit:""):""}}function y(L){const S=C();for(let U=0;U<L;U++)S.add(D(U));return S}function D(L){return{id:L.toString(),title:`service:${L}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database",noderadius:40}}function C(){const L={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.nodeRadius]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"nodes",fields:Object.keys(L).map(S=>({...L[S],name:S}))})}function P(L){const S=b();for(const U of L)S.add({id:U.source+"--"+U.target,...U});return S}function b(){const L={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(L).map(S=>({...L[S],name:S}))})}function T(L){if(L.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const S=L.reduce((w,G)=>(G.x>w.right&&(w.right=G.x),G.x<w.left&&(w.left=G.x),G.y>w.bottom&&(w.bottom=G.y),G.y<w.top&&(w.top=G.y),w),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),U=S.top+(S.bottom-S.top)/2,N=S.left+(S.right-S.left)/2;return{...S,center:{x:N,y:U}}}function O(L,S){let U=L.filter(N=>!!(N.meta?.preferredVisualisationType==="nodeGraph"||N.name==="nodes"||N.name==="edges"||N.refId==="nodes"||N.refId==="edges"||new n.N(N).getFieldByName(a.z.id)));return S&&(U=R(U,S)),U}const R=(L,S)=>L.map(U=>{if(new n.N(U).getFieldByName(a.z.source.toLowerCase())){if(S?.edges?.mainStatUnit){const w=U.fields.find(G=>G.name.toLowerCase()===a.z.mainStat);w&&(w.config={...w.config,unit:S.edges.mainStatUnit})}if(S?.edges?.secondaryStatUnit){const w=U.fields.find(G=>G.name.toLowerCase()===a.z.secondaryStat);w&&(w.config={...w.config,unit:S.edges.secondaryStatUnit})}}else{if(S?.nodes?.mainStatUnit){const w=U.fields.find(G=>G.name.toLowerCase()===a.z.mainStat);w&&(w.config={...w.config,unit:S.nodes.mainStatUnit})}if(S?.nodes?.secondaryStatUnit){const w=U.fields.find(G=>G.name.toLowerCase()===a.z.secondaryStat);w&&(w.config={...w.config,unit:S.nodes.secondaryStatUnit})}if(S?.nodes?.arcs?.length)for(const w of S.nodes.arcs){const G=U.fields.find(_=>_.name.toLowerCase()===w.field);G&&w.color&&(G.config={...G.config,color:{fixedColor:w.color,mode:r.S.Fixed}})}}return U}),I=(L,S,U)=>{const N=S.find(w=>w.id===U);return N?[...new Set(L.filter(w=>N.source===w.id||N.target===w.id).map(w=>w.id))]:[]},M=(L,S,U)=>{const N=L.find(w=>w.id===U);if(N){const w=S.filter(G=>G.source===N.id||G.target===N.id);return[...new Set(w.flatMap(G=>L.filter(_=>G.source===_.id||G.target===_.id).map(_=>_.id)))]}return[]},x=L=>L.reduce((S,U)=>{const N=U.fields.filter(w=>w.name==="source");return U.name==="edges"||N.length?S.edges.push(U):S.nodes.push(U),S},{edges:[],nodes:[]})},74934:(Q,A,e)=>{"use strict";e.d(A,{h:()=>u,j:()=>g});var n=e(61411),a=e(66542),i=e(27957),r=e(84834),o=e(71199);function g(c,l=!0){const d=["Value options"];c.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:d,defaultValue:!1}),c.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:d,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:f=>f.reduceOptions.values===!0}),c.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:d,editor:n.S.get("stats-picker").editor,defaultValue:[a.gz.lastNotNull],showIf:f=>f.reduceOptions.values===!1}),l&&c.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:d,settings:{allowCustomValue:!0,options:[],getOptions:async f=>{const m=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(f&&f.data)for(const v of f.data)for(const E of v.fields){const p=(0,i.CZ)(E,v,f.data),h=`/^${(0,r.GE)(p)}$/`;m.push({value:h,label:p})}return Promise.resolve(m)}},defaultValue:""})}function u(c,l){c.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:l,settings:{options:[{value:o.wm.Auto,label:"Auto"},{value:o.wm.Horizontal,label:"Horizontal"},{value:o.wm.Vertical,label:"Vertical"}]},defaultValue:o.wm.Auto})}},87990:(Q,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>P});var n=e(42439),a=e(71199),i=e(68489),r=e(95070),o=e(91507);const g=(b,T,O)=>{const R=(0,r.ZH)(b,T,O);if(O.angular&&(T==="singlestat"||T==="grafana-singlestat-panel")){const I=O.angular;if(R.graphMode=a.IG.None,I.sparkline&&I.sparkline.show&&(R.graphMode=a.IG.Area),I.colorBackground)R.colorMode=a.pc.Background;else if(I.colorValue)R.colorMode=a.pc.Value;else if(R.colorMode=a.pc.None,I.sparkline?.lineColor&&R.graphMode===a.IG.Area){const M=b.fieldConfig??{};M.defaults.color={mode:o.S.Fixed,fixedColor:I.sparkline.lineColor},b.fieldConfig=M}I.valueName==="name"&&(R.textMode=a.jG.Name)}return R};var u=e(69781),c=e(31733),l=e(85666),d=e(76236),f=e(19596),m=e(39543),v=e(60470),E=e(44203),p=e(83811);class h extends c.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,O)=>{const{timeRange:R,options:I}=this.props,{value:M,alignmentFactors:x,width:L,height:S,count:U}=T,{openMenu:N,targetClassName:w}=O;let G=M.sparkline;return G&&(G.timeRange=R),c.createElement(m.w6,{value:M.display,count:U,sparkline:G,colorMode:I.colorMode,graphMode:I.graphMode,justifyMode:I.justifyMode,textMode:this.getTextMode(),alignmentFactors:x,text:I.text,width:L,height:S,theme:p.config.theme2,onClick:N,className:w,disableWideLayout:!I.wideLayout})},this.renderValue=T=>{const{value:O}=T,{getLinks:R,hasLinks:I}=O;return I&&R?c.createElement(v.V,{links:R},M=>this.renderComponent(T,M)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:O,replaceVariables:R,fieldConfig:I,timeZone:M}=this.props;let x;for(let L of T.series)for(let S of L.fields){let{config:U}=S;if(S.type===l.fS.number){if(S.state?.range)continue;!x&&(!(0,u.isNumber)(U.min)||!(0,u.isNumber)(U.max))&&(x=(0,f.Xu)(T.series));const N=U.min??x.min,w=U.max??x.max;S.state=S.state??{},S.state.range={min:N,max:w,delta:w-N}}}return(0,d.nG)({fieldConfig:I,reduceOptions:O.reduceOptions,replaceVariables:R,theme:p.config.theme2,data:T.series,sparkline:O.graphMode!==a.IG.None,percentChange:O.showPercentChange,timeZone:M})}}getTextMode(){const{options:T,fieldConfig:O,title:R}=this.props;return T.textMode===a.jG.Auto&&(O.defaults.displayName||!R)?a.jG.ValueAndName:T.textMode}render(){const{height:T,options:O,width:R,data:I,renderCounter:M}=this.props;return c.createElement(E.Q,{getValues:this.getValues,getAlignmentFactors:d.sg,renderValue:this.renderValue,width:R,height:T,source:I,itemSpacing:3,renderCounter:M,autoGrid:!0,orientation:O.orientation})}}var s=e(74934);const y={colorMode:a.pc.Value,graphMode:a.IG.Area,justifyMode:a.ap.Auto,showPercentChange:!1,textMode:a.jG.Auto,wideLayout:!0};var D=e(51437);class C{getSuggestionsForData(T){const{dataSummary:O}=T;if(!O.hasData)return;const R=T.getListAppender({name:D.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:I=>{I.options.reduceOptions.values&&(I.options.reduceOptions.limit=1)}}});O.hasStringField&&O.hasNumberField&&O.frameCount===1&&O.rowCountTotal<10&&(R.append({name:D.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),R.append({name:D.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.Background}})),O.stringFieldCount===1&&O.frameCount===1&&O.rowCountTotal<10&&O.fieldCount===1&&R.append({name:D.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.None}}),O.hasNumberField&&O.hasTimeField&&(R.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),R.append({name:D.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:a.IG.None,colorMode:a.pc.Background}}))}}const P=new n.c(h).useFieldConfig().setPanelOptions(b=>{const T=["Stat styles"];(0,s.j)(b),(0,s.h)(b,T),i.Z(b),b.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:T,settings:{options:[{value:a.jG.Auto,label:"Auto"},{value:a.jG.Value,label:"Value"},{value:a.jG.ValueAndName,label:"Value and name"},{value:a.jG.Name,label:"Name"},{value:a.jG.None,label:"None"}]},defaultValue:y.textMode}).addRadio({path:"wideLayout",name:"Wide layout",category:T,settings:{options:[{value:!0,label:"On"},{value:!1,label:"Off"}]},defaultValue:y.wideLayout,showIf:O=>O.textMode===a.jG.ValueAndName}),b.addSelect({path:"colorMode",name:"Color mode",defaultValue:a.pc.Value,category:T,settings:{options:[{value:a.pc.None,label:"None"},{value:a.pc.Value,label:"Value"},{value:a.pc.Background,label:"Background Gradient"},{value:a.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:T,defaultValue:y.graphMode,settings:{options:[{value:a.IG.None,label:"None"},{value:a.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:y.justifyMode,category:T,settings:{options:[{value:a.ap.Auto,label:"Auto"},{value:a.ap.Center,label:"Center"}]}}).addBooleanSwitch({path:"showPercentChange",name:"Show percent change",defaultValue:y.showPercentChange,category:T,showIf:O=>!O.reduceOptions.values})}).setNoPadding().setPanelChangeHandler(g).setSuggestionsSupplier(new C).setMigrationHandler(r.rD)},66735:(Q,A,e)=>{"use strict";e.d(A,{Bc:()=>h,I0:()=>E,OF:()=>g,yR:()=>s});var n=e(69781),a=e.n(n),i=e(18198),r=e(47423),o=e(85666);const g=y=>(!y.pluginVersion&&"columns"in y&&console.log("Was angular table",y),y.options),u={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},c={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},l={cell:"color-background",row:"color-background",value:"color-text"},d=(y,D)=>[-1/0,...y].map((C,P)=>({color:D[P],value:(0,n.isNumber)(C)?C:parseInt(C,10)})),f=(y,D)=>{const C=y.transformations??[];if(Object.keys(u).includes(D.transform)){const P={reducers:[]};D.transform==="timeseries_aggregations"&&(P.includeTimeField=!1,P.reducers=D.columns.map(b=>c[b.value])),C.push({id:u[D.transform],options:P})}return C},m=y=>{const C={matcher:{id:/^\/.*\/$/.test(y.pattern)?i.mi.byRegexp:i.mi.byName,options:y.pattern},properties:[]};return y.alias&&C.properties.push({id:"displayName",value:y.alias}),y.unit&&C.properties.push({id:"unit",value:y.unit}),y.decimals&&C.properties.push({id:"decimals",value:y.decimals}),y.type==="date"&&C.properties.push({id:"unit",value:`time: ${y.dateFormat}`}),y.link&&C.properties.push({id:"links",value:[{title:(0,n.defaultTo)(y.linkTooltip,""),url:(0,n.defaultTo)(y.linkUrl,""),targetBlank:(0,n.defaultTo)(y.linkTargetBlank,!1)}]}),y.colorMode&&C.properties.push({id:"custom.cellOptions",value:{type:l[y.colorMode]}}),y.align&&C.properties.push({id:"custom.align",value:y.align==="auto"?null:y.align}),y.thresholds?.length&&C.properties.push({id:"thresholds",value:{mode:r.H.Absolute,steps:d(y.thresholds,y.colors)}}),C},v=y=>{let D={custom:{}};if(y){if(D=(0,n.omitBy)({unit:y.unit,decimals:y.decimals,displayName:y.alias,custom:{align:y.align==="auto"?null:y.align}},n.isNil),y.thresholds.length){const C={mode:r.H.Absolute,steps:d(y.thresholds,y.colors)};D.thresholds=C}y.colorMode&&(D.custom.cellOptions={type:l[y.colorMode]})}return D},E=(y,D,C)=>{if(D==="table-old"&&C.angular){const P=C.angular,b=f(y,P),T=P.styles.find(I=>I.pattern==="/.*/"),O=v(T),R=P.styles.filter(I=>I.pattern!=="/.*/").map(m);y.transformations=b,y.fieldConfig={defaults:O,overrides:R}}return{}},p=y=>y?.filter(D=>D.meta?.custom?.parentRowIndex===void 0)||[y?.[0]],h=y=>{const D=[];return p(y).filter(P=>!!P&&P.length!==0)?.forEach(P=>{const b=y?.filter(I=>P.refId===I.refId&&I.meta?.custom?.parentRowIndex!==void 0),T=(0,n.groupBy)(b,I=>I.meta?.custom?.parentRowIndex),O=Object.keys(T).map(I=>T[I]),R={...P};b&&b.length>0&&R.fields.push({name:"nested",type:o.fS.nestedFrames,config:{},values:O}),D.push(R)}),D},s=y=>y?.some(D=>D.meta?.custom?.parentRowIndex!==void 0)},96631:(Q,A,e)=>{"use strict";e.d(A,{M:()=>g});var n=e(31733),a=e(79106),i=e(96856),r=e(12572);const o=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],g=({value:u,onChange:c,item:l})=>{const d=typeof u=="number";return o[1].value=d?u:36e5,n.createElement(a.Lh,null,n.createElement(i.S,{value:u,options:o,onChange:c}),d&&n.createElement(r.C,{value:u,onChange:c,inputPrefix:r.Z.GreaterThan,isTime:l.settings?.isTime??!1}))}},41099:(Q,A,e)=>{"use strict";e.d(A,{j:()=>l});var n=e(31733),a=e(79106),i=e(96856),r=e(38834),o=e(41354);const g=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],u=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(f=>({label:f,value:f})),c=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(f=>({label:f,value:f})),l=({value:f,onChange:m})=>{const v=(0,n.useMemo)(()=>f?.fill==="dash"?u:c,[f]),E=(0,n.useMemo)(()=>{if(!f?.dash?.length)return v[0];const p=f.dash?.join(", "),h=v.find(s=>s.value===p);return h||{label:p,value:p}},[f,v]);return n.createElement(a.Lh,null,n.createElement(i.S,{value:f?.fill||"solid",options:g,onChange:p=>{let h;p==="dot"?h=d(c[0].value):p==="dash"&&(h=d(u[0].value)),m({...f,fill:p,dash:h})}}),f?.fill&&f?.fill!=="solid"&&n.createElement(n.Fragment,null,n.createElement(r.Ph,{allowCustomValue:!0,options:v,value:E,width:20,onChange:p=>{m({...f,dash:d(p.value??"")})},formatCreateLabel:p=>`Segments: ${d(p).join(", ")}`}),n.createElement("div",null,"\xA0",n.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},n.createElement(o.h,{name:"question-circle",tooltip:"Help"})))))};function d(f){const m=[];for(const v of f.split(/(?:,| )+/)){const E=Number.parseInt(v,10);isNaN(E)||m.push(E)}return m}},12572:(Q,A,e)=>{"use strict";e.d(A,{C:()=>o,Z:()=>r});var n=e(31733),a=e(17201),i=e(64516),r=(g=>(g.LessThan="lessthan",g.GreaterThan="greaterthan",g))(r||{});const o=({value:g,onChange:u,inputPrefix:c,isTime:l})=>{let d=a.secondsToHms(g/1e3);l||(d="10");const f=p=>{let h=!1;if(p)try{l&&a.isValidTimeSpan(p)?h=a.intervalToMs(p):h=Number(p)}catch(s){console.warn("ERROR",s)}u(h)},m=p=>{p.key==="Enter"&&f(p.currentTarget.value)},v=p=>{f(p.currentTarget.value)},E=c==="greaterthan"?n.createElement("div",null,">"):c==="lessthan"?n.createElement("div",null,"<"):null;return n.createElement(i.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:d,onKeyDown:m,onBlur:v,prefix:E,spellCheck:!1})}},82288:(Q,A,e)=>{"use strict";e.d(A,{c:()=>g});var n=e(31733),a=e(79106),i=e(96856),r=e(12572);const o=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],g=({value:u,onChange:c,item:l})=>{const d=typeof u=="number";return o[2].value=d?u:36e5,n.createElement(a.Lh,null,n.createElement(i.S,{value:u,options:o,onChange:c}),d&&n.createElement(r.C,{value:u,onChange:c,inputPrefix:r.Z.LessThan,isTime:l.settings?.isTime??!1}))}},39987:(Q,A,e)=>{"use strict";e.d(A,{F:()=>i});var n=e(31733),a=e(38834);const i=({item:r,value:o,onChange:g,id:u})=>{const c=(0,n.useCallback)(l=>{g({mode:l.value})},[g]);return n.createElement(a.Ph,{inputId:u,value:o.mode,options:r.settings?.options??[],onChange:c})}},33926:(Q,A,e)=>{"use strict";e.d(A,{F:()=>h,r:()=>E});var n=e(68235),a=e(91507),i=e(85666),r=e(15476),o=e(71199),g=e(31180),u=e(75353),c=e(39076),l=e(93443),d=e(96631),f=e(41099),m=e(82288),v=e(39987);const E={drawStyle:o.l8.Line,lineInterpolation:o.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:o.FI.None,barAlignment:o.pu.Center,stacking:{mode:o.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1},p=["Graph styles"];function h(s,y=!0){return{standardOptions:{[n.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.S.PaletteClassic}}},useCustomConfig:D=>{D.addRadio({path:"drawStyle",name:"Style",category:p,defaultValue:s.drawStyle,settings:{options:g.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:p,defaultValue:s.lineInterpolation,settings:{options:g.q.lineInterpolation},showIf:C=>C.drawStyle===o.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:p,defaultValue:s.barAlignment,settings:{options:g.q.barAlignment},showIf:C=>C.drawStyle===o.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:p,defaultValue:s.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:C=>C.drawStyle!==o.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:p,defaultValue:s.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:C=>C.drawStyle!==o.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:p,defaultValue:g.q.fillGradient[0].value,settings:{options:g.q.fillGradient},showIf:C=>C.drawStyle!==o.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:p,hideFromDefaults:!0,settings:{filter:C=>C.type===i.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:p,showIf:C=>C.drawStyle===o.l8.Line,editor:f.j,override:f.j,process:r.kG,shouldApply:C=>C.type===i.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:p,defaultValue:!1,editor:m.c,override:m.c,showIf:C=>C.drawStyle===o.l8.Line,shouldApply:C=>C.type!==i.fS.time,process:r.kG,settings:{isTime:y}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:p,defaultValue:!1,editor:d.M,override:d.M,showIf:C=>C.drawStyle===o.l8.Line,shouldApply:C=>C.type!==i.fS.time,process:r.kG,settings:{isTime:y}}).addRadio({path:"showPoints",name:"Show points",category:p,defaultValue:g.q.showPoints[0].value,settings:{options:g.q.showPoints},showIf:C=>C.drawStyle!==o.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:p,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:C=>C.showPoints!==o.Jp.Never||C.drawStyle===o.l8.Points}),u.V(D,s.stacking,p),D.addSelect({category:p,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:o.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:o.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),c.r(D,s),l.B(D),D.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:o.i3.Off},settings:{options:g.q.thresholdsDisplayModes},editor:v.F,override:v.F,process:r.kG,shouldApply:()=>!0})}}}},80193:(Q,A,e)=>{"use strict";e.d(A,{_:()=>M});var n=e(31733),a=e(46901),i=e(77081),r=e(76067),o=e(24402),g=e(76932),u=e(48947),c=e(40137),l=e(74337),d=e(21568),f=e(43348),m=e(25108),v=e(83998),E=e(73342),p=e(59582),h=e(98827),s=e(41354),y=e(79106),D=e(14496),C=e(74201);const P=({annotation:x,timeFormatter:L,canEdit:S,canDelete:U,onEdit:N,onDelete:w})=>{const G=(0,r.wW)(b),_=L(x.time),K=L(x.timeEnd);let k=x.text;const z=x.tags;let W="",Z,H,X=null;const Y=n.createElement("span",{className:G.time},x.isRegion?`${_} - ${K}`:_);if(x.login&&x.avatarUrl&&(Z=n.createElement("img",{className:G.avatar,alt:"Annotation avatar",src:x.avatarUrl})),x.alertId!==void 0&&x.newState){const ne=C.Z.getStateDisplayModel(x.newState);X=n.createElement("div",{className:G.alertState},n.createElement("i",{className:ne.stateClass},ne.text)),W=C.Z.getAlertAnnotationInfo(x)}else x.title&&(k=x.title+"<br />"+(typeof k=="string"?k:""));return(S||U)&&(H=n.createElement("div",{className:G.editControls},S&&n.createElement(s.h,{name:"pen",size:"sm",onClick:N,tooltip:"Edit"}),U&&n.createElement(s.h,{name:"trash-alt",size:"sm",onClick:w,tooltip:"Delete"}))),n.createElement("div",{className:G.wrapper},n.createElement("div",{className:G.header},n.createElement(y.Lh,{justify:"space-between",align:"center",spacing:"md"},n.createElement("div",{className:G.meta},n.createElement("span",null,Z,X),Y),H)),n.createElement("div",{className:G.body},k&&n.createElement("div",{dangerouslySetInnerHTML:{__html:h.QX.sanitize(k)}}),W,n.createElement(n.Fragment,null,n.createElement(y.Lh,{spacing:"xs",wrap:!0},z?.map((ne,se)=>n.createElement(D.V,{name:ne,key:`${ne}-${se}`}))))))};P.displayName="AnnotationTooltip";const b=x=>({wrapper:(0,g.css)`
      max-width: 400px;
    `,commentWrapper:(0,g.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,g.css)`
      padding: ${x.spacing(.5,1)};
      border-bottom: 1px solid ${x.colors.border.weak};
      font-size: ${x.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,g.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,g.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,g.css)`
      border-radius: ${x.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${x.spacing(1)};
    `,alertState:(0,g.css)`
      padding-right: ${x.spacing(1)};
      font-weight: ${x.typography.fontWeightMedium};
    `,time:(0,g.css)`
      color: ${x.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,g.css)`
      padding: ${x.spacing(1)};

      a {
        color: ${x.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),T=6,O={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function R({annotation:x,timeZone:L,width:S}){const{canEditAnnotations:U,canDeleteAnnotations:N,...w}=(0,f.R9)(),G=(0,r.wW)(E.t),_=(0,r.wW)(I),[K,k]=(0,n.useState)(!1),[z,W]=(0,n.useState)(!1),[Z,H]=(0,n.useState)(null),[X,Y]=(0,n.useState)(null),[ne,se]=(0,n.useState)(null),re=(0,n.useRef)(),ge=(0,u.D)(Z,X,O),q=(0,u.D)(Z,ne,O),me=(0,n.useCallback)(()=>{W(!0),k(!1)},[W,k]),oe=(0,n.useCallback)(()=>{w.onAnnotationDelete&&w.onAnnotationDelete(x.id)},[x,w]),fe=(0,n.useCallback)(()=>{re.current&&clearTimeout(re.current),k(!0)},[k]),ve=(0,n.useCallback)(()=>{re.current&&clearTimeout(re.current)},[]),pe=(0,n.useCallback)(()=>{re.current=setTimeout(()=>{k(!1)},100)},[k]),Me=(0,n.useCallback)(ke=>(0,c.dq)(ke,{format:l.U6.fullDate,timeZone:L}),[L]),Pe=(0,n.useCallback)(()=>n.createElement(P,{annotation:x,timeFormatter:Me,onEdit:me,onDelete:oe,canEdit:U?U(x.dashboardUID):!1,canDelete:N?N(x.dashboardUID):!1}),[U,N,oe,me,Me,x]),Ee=!!x.isRegion&&S>T;let he=`${S/2}px`,Le=n.createElement("div",{className:G(x).markerTriangle,style:{left:he,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Ee&&(Le=n.createElement("div",{className:G(x).markerBar,style:{width:`${S}px`,transform:"translate3d(0,-50%, 0)"}})),n.createElement(n.Fragment,null,n.createElement("div",{ref:H,onMouseEnter:fe,onMouseLeave:pe,className:Ee?void 0:_.markerWrapper,"data-testid":d.wl.pages.Dashboard.Annotations.marker},Le),K&&n.createElement(m.h_,null,n.createElement("div",{ref:Y,style:ge.styles.popper,...ge.attributes.popper,className:_.tooltip,onMouseEnter:ve,onMouseLeave:pe},Pe())),z&&n.createElement(m.h_,null,n.createElement(p.C,{onDismiss:()=>W(!1),onSave:()=>W(!1),timeFormatter:Me,annotation:x,ref:se,style:q.styles.popper,...q.attributes.popper})))}const I=x=>({markerWrapper:(0,g.css)`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:(0,g.css)`
      max-width: 400px;
    `,tooltip:(0,g.css)`
      ${(0,v.getTooltipContainerStyles)(x)};
      padding: 0;
    `}),M=({annotations:x,timeZone:L,config:S,disableCanvasRendering:U=!1})=>{const N=(0,r.l4)(),w=(0,n.useRef)(),G=(0,n.useRef)();(0,n.useEffect)(()=>{const k=[];for(const z of x)k.push(new a.U(z));return G.current=k,()=>{G.current=[]}},[x]),(0,n.useLayoutEffect)(()=>{S.addHook("init",k=>{w.current=k}),S.addHook("draw",k=>{if(!G.current)return null;const z=k.ctx;if(!z)return;z.save(),z.beginPath(),z.rect(k.bbox.left,k.bbox.top,k.bbox.width,k.bbox.height),z.clip();const W=(Z,H)=>{z.beginPath(),z.lineWidth=2,z.strokeStyle=H,z.setLineDash([5,5]),z.moveTo(Z,k.bbox.top),z.lineTo(Z,k.bbox.top+k.bbox.height),z.stroke(),z.closePath()};if(!U)for(let Z=0;Z<G.current.length;Z++){const H=G.current[Z];for(let X=0;X<H.length;X++){const Y=H.get(X);if(!Y.time)continue;let ne=k.valToPos(Y.time,"x",!0);const se=N.visualization.getColorByName(Y.color);if(W(ne,se),Y.isRegion&&Y.timeEnd){let re=k.valToPos(Y.timeEnd,"x",!0);W(re,se),z.fillStyle=i.alpha(se,.1),z.rect(ne,k.bbox.top,re-ne,k.bbox.height),z.fill()}}}z.restore()})},[S,N,U]);const _=(0,n.useCallback)((k,z)=>{const Z=new a.U(k).get(z.fieldIndex);if(!Z.time||!w.current)return;let H=w.current.valToPos(Z.time,"x");return H<0&&(H=0),{x:H,y:w.current.bbox.height/window.devicePixelRatio+4}},[]),K=(0,n.useCallback)((k,z)=>{let W=0;const H=new a.U(k).get(z.fieldIndex);if(!!H.isRegion&&w.current){let Y=w.current.valToPos(H.time,"x"),ne=w.current.valToPos(H.timeEnd,"x");Y<0&&(Y=0),ne>w.current.bbox.width/window.devicePixelRatio&&(ne=w.current.bbox.width/window.devicePixelRatio),W=ne-Y}return n.createElement(R,{annotation:H,timeZone:L,width:W})},[L]);return n.createElement(o.T,{id:"annotations",config:S,events:x,renderEventMarker:K,mapEventToXYCoords:_})}},59582:(Q,A,e)=>{"use strict";e.d(A,{C:()=>p});var n=e(76932),a=e(31733),i=e(74282),r=e(89782),o=e(76067),g=e(43348),u=e(79106),c=e(17618),l=e(85765),d=e(28718),f=e(32901),m=e(51343),v=e(41374),E=e(90642);const p=a.forwardRef(({annotation:s,onSave:y,onDismiss:D,timeFormatter:C,className:P,...b},T)=>{const O=(0,o.wW)(h),R=(0,g.R9)(),I=(0,a.useRef)(null);(0,r.Z)(I,()=>{D()});const[M,x]=(0,i.default)(async z=>{const W=await R.onAnnotationCreate(z);return y&&y(),W}),[L,S]=(0,i.default)(async z=>{const W=await R.onAnnotationUpdate(z);return y&&y(),W}),U=s.id!==void 0,N=s.time!==s.timeEnd,w=U?S:x,G=U?L:M,_=N?`${C(s.time)} - ${C(s.timeEnd)}`:C(s.time),K=({tags:z,description:W})=>{w({id:s.id,tags:z,description:W,from:Math.round(s.time),to:Math.round(s.timeEnd)})},k=a.createElement("div",{ref:T,className:(0,n.cx)(O.editor,P),...b},a.createElement("div",{className:O.header},a.createElement(u.Lh,{justify:"space-between",align:"center"},a.createElement("div",{className:O.title},"Add annotation"),a.createElement("div",{className:O.ts},_))),a.createElement("div",{className:O.editorForm},a.createElement(c.l,{onSubmit:K,defaultValues:{description:s?.text,tags:s?.tags||[]}},({register:z,errors:W,control:Z})=>a.createElement(a.Fragment,null,a.createElement(l.g,{label:"Description",invalid:!!W.description,error:W?.description?.message},a.createElement(d.K,{...z("description",{required:"Annotation description is required"})})),a.createElement(l.g,{label:"Tags"},a.createElement(f.g,{control:Z,name:"tags",render:({field:{ref:H,onChange:X,...Y}})=>a.createElement(v.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:X,tagOptions:E.lK,tags:Y.value})})),a.createElement(u.Lh,{justify:"flex-end"},a.createElement(m.zx,{size:"sm",variant:"secondary",onClick:D,fill:"outline"},"Cancel"),a.createElement(m.zx,{size:"sm",type:"submit",disabled:G?.loading},G?.loading?"Saving":"Save"))))));return a.createElement(a.Fragment,null,a.createElement("div",{className:O.backdrop}),a.createElement("div",{ref:I},k))});p.displayName="AnnotationEditorForm";const h=s=>({backdrop:(0,n.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${s.zIndex.navbarFixed};
    `,editorContainer:(0,n.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,n.css)`
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      z-index: ${s.zIndex.dropdown};
      border: 1px solid ${s.colors.border.weak};
      border-radius: ${s.shape.radius.default};
      width: 460px;
    `,editorForm:(0,n.css)`
      padding: ${s.spacing(1)};
    `,header:(0,n.css)`
      border-bottom: 1px solid ${s.colors.border.weak};
      padding: ${s.spacing(1.5,1)};
    `,title:(0,n.css)`
      font-weight: ${s.typography.fontWeightMedium};
    `,ts:(0,n.css)`
      font-size: ${s.typography.bodySmall.fontSize};
      color: ${s.colors.text.secondary};
    `})},73342:(Q,A,e)=>{"use strict";e.d(A,{t:()=>i});var n=e(76932),a=e(63956);const i=r=>o=>{const g=r.visualization.getColorByName(o?.color||a.Jx);return{markerTriangle:(0,n.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${g};
      `,markerBar:(0,n.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${g};
      `}}},86573:(Q,A,e)=>{"use strict";e.d(A,{PQ:()=>i,WI:()=>o,h:()=>a,y0:()=>r});var n=e(51099);let a;function i(g){a=g}function r(){return!a||!a.getState?{templating:{...n.qM,lastKey:"key"}}:a.getState()}function o(g){if(!(!a||!a.getState))return a.dispatch(g)}},75665:(Q,A,e)=>{"use strict";e.d(A,{B5:()=>n.B,bf:()=>i,hw:()=>a,n8:()=>r});var n=e(34824),a=(o=>(o[o.Admin=4]="Admin",o[o.Editor=2]="Editor",o[o.Member=0]="Member",o[o.Viewer=1]="Viewer",o))(a||{}),i=(o=>(o.View="View",o.Edit="Edit",o.Admin="Admin",o))(i||{}),r=(o=>(o.Folder="dash-folder",o.Dashboard="dash-db",o.AlertFolder="dash-folder-alerting",o))(r||{})},86115:()=>{"use strict"},38169:()=>{"use strict"},74192:()=>{"use strict"},27589:()=>{"use strict"},74642:(Q,A,e)=>{"use strict";e.d(A,{Dn:()=>b,Eb:()=>D,GL:()=>u,GT:()=>v,Im:()=>h,Jd:()=>O,OW:()=>T,QI:()=>y,Qt:()=>s,RB:()=>I,VJ:()=>P,Wj:()=>d,Xw:()=>l,Yr:()=>x,_B:()=>f,_z:()=>E,hS:()=>m,le:()=>C,nq:()=>o,p8:()=>p,pO:()=>c,xF:()=>M,xt:()=>g,z:()=>R});var n=e(89380),a=e(63121);const i=(0,n.X)("ds-request-response"),r=(0,n.X)("ds-request-error"),o=(0,n.X)("template-variable-value-updated"),g=(0,n.X)("graph-click"),u=(0,n.X)("threshold-changed");class c extends a.m{}c.type="panel-queries-changed";class l extends a.m{}l.type="panel-transformations-changed";class d extends a.m{}d.type="panels-options-changed";class f extends a.m{}f.type="dashboard-panels-changed";class m extends a.m{}m.type="dashboard-meta-changed";class v extends a.m{}v.type="panel-directive-ready";class E extends a.m{}E.type="render";class p extends a.R{}p.type="zoom-out";var h=(L=>(L[L.Left=-1]="Left",L[L.Right=1]="Right",L))(h||{});class s extends a.R{}s.type="shift-time";class y extends a.R{}y.type="absolute-time";class D extends a.R{}D.type="remove-panel";class C extends a.R{}C.type="show-modal";class P extends a.R{}P.type="show-confirm-modal";class b extends a.R{}b.type="show-react-modal";class T extends a.m{}T.type="hide-modal";class O extends a.m{}O.type="dashboard-saved";class R extends a.R{}R.type="annotation-query-started";class I extends a.R{}I.type="annotation-query-finished";class M extends a.R{}M.type="panel-edit-started";class x extends a.R{}x.type="panel-edit-finished"},56277:(Q,A,e)=>{"use strict";e.d(A,{f0:()=>a,iJ:()=>n,zN:()=>r,zQ:()=>i});var n=(o=>(o[o.CLOSE_PANE=0]="CLOSE_PANE",o[o.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",o[o.CLOSE_EDITOR=2]="CLOSE_EDITOR",o))(n||{});const a=["lines","bars","points","stacked_lines","stacked_bars"];var i=(o=>(o.table="table",o.raw="raw",o))(i||{});const r=["table","raw"]},84388:()=>{"use strict"},42342:(Q,A,e)=>{"use strict";e.d(A,{AccessControlAction:()=>b,AppNotificationSeverity:()=>E,AppNotificationTimeout:()=>p,CORRELATION_EDITOR_POST_CONFIRM_ACTION:()=>s.iJ,CoreEvents:()=>T,DashboardInitPhase:()=>o,DashboardRoutes:()=>r,EXPLORE_GRAPH_STYLES:()=>s.f0,KioskMode:()=>g,OrgRole:()=>u.B5,PermissionLevelString:()=>u.bf,SearchQueryType:()=>u.n8,ServiceAccountStateFilter:()=>d,TABLE_RESULTS_STYLE:()=>s.zQ,TeamPermissionLevel:()=>u.hw,addListener:()=>y.NH,createAsyncThunk:()=>y.hg,timeoutMap:()=>h,useDispatch:()=>y.I0,useSelector:()=>y.v9});var n=e(86115),a=e(75362),i=e(84388),r=(O=>(O.Home="home-dashboard",O.New="new-dashboard",O.Normal="normal-dashboard",O.Path="path-dashboard",O.Scripted="scripted-dashboard",O.Public="public-dashboard",O.Embedded="embedded-dashboard",O))(r||{}),o=(O=>(O.NotStarted="Not started",O.Fetching="Fetching",O.Services="Services",O.Failed="Failed",O.Completed="Completed",O))(o||{}),g=(O=>(O.TV="tv",O.Full="full",O))(g||{}),u=e(75665),c=e(38169),l=e(32346),d=(O=>(O.All="All",O.WithExpiredTokens="WithExpiredTokens",O.External="External",O.Disabled="Disabled",O))(d||{}),f=e(27589),m=e(68058),v=e(13959),E=(O=>(O.Success="success",O.Warning="warning",O.Error="error",O.Info="info",O))(E||{}),p=(O=>(O[O.Success=3e3]="Success",O[O.Warning=5e3]="Warning",O[O.Error=7e3]="Error",O))(p||{});const h={success:3e3,warning:5e3,error:7e3,info:3e3};var s=e(56277),y=e(54359),D=e(99227),C=e(74192),P=e(47937),b=(O=>(O.UsersRead="users:read",O.UsersWrite="users:write",O.UsersAuthTokenList="users.authtoken:read",O.UsersAuthTokenUpdate="users.authtoken:write",O.UsersPasswordUpdate="users.password:write",O.UsersDelete="users:delete",O.UsersCreate="users:create",O.UsersEnable="users:enable",O.UsersDisable="users:disable",O.UsersPermissionsUpdate="users.permissions:write",O.UsersLogout="users:logout",O.UsersQuotasList="users.quotas:read",O.UsersQuotasUpdate="users.quotas:write",O.ServiceAccountsRead="serviceaccounts:read",O.ServiceAccountsCreate="serviceaccounts:create",O.ServiceAccountsWrite="serviceaccounts:write",O.ServiceAccountsDelete="serviceaccounts:delete",O.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",O.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",O.OrgsRead="orgs:read",O.OrgsPreferencesRead="orgs.preferences:read",O.OrgsWrite="orgs:write",O.OrgsPreferencesWrite="orgs.preferences:write",O.OrgsCreate="orgs:create",O.OrgsDelete="orgs:delete",O.OrgUsersRead="org.users:read",O.OrgUsersAdd="org.users:add",O.OrgUsersRemove="org.users:remove",O.OrgUsersWrite="org.users:write",O.LDAPUsersRead="ldap.user:read",O.LDAPUsersSync="ldap.user:sync",O.LDAPStatusRead="ldap.status:read",O.DataSourcesExplore="datasources:explore",O.DataSourcesRead="datasources:read",O.DataSourcesCreate="datasources:create",O.DataSourcesWrite="datasources:write",O.DataSourcesDelete="datasources:delete",O.DataSourcesPermissionsRead="datasources.permissions:read",O.DataSourcesCachingRead="datasources.caching:read",O.DataSourcesInsightsRead="datasources.insights:read",O.ActionServerStatsRead="server.stats:read",O.ActionTeamsCreate="teams:create",O.ActionTeamsDelete="teams:delete",O.ActionTeamsRead="teams:read",O.ActionTeamsWrite="teams:write",O.ActionTeamsPermissionsRead="teams.permissions:read",O.ActionTeamsPermissionsWrite="teams.permissions:write",O.ActionRolesList="roles:read",O.ActionTeamsRolesList="teams.roles:read",O.ActionTeamsRolesAdd="teams.roles:add",O.ActionTeamsRolesRemove="teams.roles:remove",O.ActionUserRolesList="users.roles:read",O.ActionUserRolesAdd="users.roles:add",O.ActionUserRolesRemove="users.roles:remove",O.DashboardsRead="dashboards:read",O.DashboardsWrite="dashboards:write",O.DashboardsDelete="dashboards:delete",O.DashboardsCreate="dashboards:create",O.DashboardsPermissionsRead="dashboards.permissions:read",O.DashboardsPermissionsWrite="dashboards.permissions:write",O.DashboardsPublicWrite="dashboards.public:write",O.FoldersRead="folders:read",O.FoldersWrite="folders:write",O.FoldersDelete="folders:delete",O.FoldersCreate="folders:create",O.FoldersPermissionsRead="folders.permissions:read",O.FoldersPermissionsWrite="folders.permissions:write",O.ActionSupportBundlesCreate="support.bundles:create",O.ActionSupportBundlesRead="support.bundles:read",O.ActionSupportBundlesDelete="support.bundles:delete",O.AlertingRuleCreate="alert.rules:create",O.AlertingRuleRead="alert.rules:read",O.AlertingRuleUpdate="alert.rules:write",O.AlertingRuleDelete="alert.rules:delete",O.AlertingInstanceCreate="alert.instances:create",O.AlertingInstanceUpdate="alert.instances:write",O.AlertingInstanceRead="alert.instances:read",O.AlertingNotificationsRead="alert.notifications:read",O.AlertingNotificationsWrite="alert.notifications:write",O.AlertingRuleExternalWrite="alert.rules.external:write",O.AlertingRuleExternalRead="alert.rules.external:read",O.AlertingInstancesExternalWrite="alert.instances.external:write",O.AlertingInstancesExternalRead="alert.instances.external:read",O.AlertingNotificationsExternalWrite="alert.notifications.external:write",O.AlertingNotificationsExternalRead="alert.notifications.external:read",O.AlertingProvisioningReadSecrets="alert.provisioning.secrets:read",O.AlertingProvisioningRead="alert.provisioning:read",O.AlertingProvisioningWrite="alert.provisioning:write",O.ActionAPIKeysRead="apikeys:read",O.ActionAPIKeysCreate="apikeys:create",O.ActionAPIKeysDelete="apikeys:delete",O.PluginsInstall="plugins:install",O.PluginsWrite="plugins:write",O.SettingsRead="settings:read",O.SettingsWrite="settings:write",O))(b||{}),T=e(74642)},99227:()=>{"use strict"},75362:()=>{"use strict"},13959:()=>{"use strict"},68058:()=>{"use strict"},47937:()=>{"use strict"},54359:(Q,A,e)=>{"use strict";e.d(A,{I0:()=>i,NH:()=>g,hg:()=>o,v9:()=>r});var n=e(4579),a=e(55024);const i=a.useDispatch,r=a.useSelector,o=(u,c,l)=>(0,n.hg)(u,c,l),g=n.NH},51437:(Q,A,e)=>{"use strict";e.d(A,{y:()=>n});var n=(a=>(a.LineChart="Line chart",a.LineChartSmooth="Line chart smooth",a.LineChartGradientColorScheme="Line chart with gradient color scheme",a.AreaChart="Area chart",a.AreaChartStacked="Area chart stacked",a.AreaChartStackedPercent="Area chart 100% stacked",a.BarChart="Bar chart",a.BarChartGradientColorScheme="Bar chart with gradient color scheme",a.BarChartStacked="Bar chart stacked",a.BarChartStackedPercent="Bar chart 100% stacked",a.BarChartHorizontal="Bar chart horizontal",a.BarChartHorizontalStacked="Bar chart horizontal stacked",a.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",a.Candlestick="Candlestick",a.PieChart="Pie chart",a.PieChartDonut="Pie chart donut",a.Stat="Stat",a.StatColoredBackground="Stat colored background",a.Gauge="Gauge",a.GaugeNoThresholds="Gauge no thresholds",a.BarGaugeBasic="Bar gauge basic",a.BarGaugeLCD="Bar gauge LCD",a.Table="Table",a.StateTimeline="State timeline",a.StatusHistory="Status history",a.TextPanel="Text",a.DashboardList="Dashboard list",a.Logs="Logs",a.FlameGraph="Flame graph",a))(n||{})},58126:(Q,A,e)=>{"use strict";e.d(A,{ED:()=>g,I9:()=>i,T8:()=>c,Yb:()=>r,bj:()=>a,g0:()=>l,pz:()=>u,x_:()=>n});var n=(d=>(d.Firing="firing",d.Inactive="inactive",d.Pending="pending",d))(n||{}),a=(d=>(d.Normal="Normal",d.Alerting="Alerting",d.Pending="Pending",d.NoData="NoData",d.Error="Error",d))(a||{});function i(d){return Object.values(n).includes(d)}function r(d){return Object.values(a).some(f=>f===d)}function o(d){const f=Object.values(n);return d!=null&&!f.includes(d)}function g(d){return o(d)?d.split(" ")[0]:d}var u=(d=>(d.Alerting="alerting",d.Recording="recording",d))(u||{}),c=(d=>(d.Cortex="Cortex",d.Mimir="Mimir",d.Prometheus="Prometheus",d.Thanos="Thanos",d))(c||{}),l=(d=>(d.Alerting="Alerting",d.NoData="NoData",d.KeepLastState="KeepLastState",d.OK="OK",d.Error="Error",d))(l||{})},50266:(Q,A,e)=>{"use strict";e.d(A,{P:()=>r,j:()=>a});var n=e(58126);function a(o,g){return(0,n.ED)(o.state)===g}var i=(o=>(o.Firing="firing",o))(i||{}),r=(o=>(o.Alerting="alerting",o.Pending="pending",o.Normal="inactive",o.NoData="nodata",o.Error="error",o))(r||{})},32346:()=>{"use strict"},23932:Q=>{const A="    ";function e(r){let o="";return r&&Object.keys(r).forEach(function(g){o+=g+":"+r[g]+";"}),o}function n(r){function o(u){return'class="'+u+'"'}function g(u){return'style="'+e(r["."+u])+'"'}return r?g:o}function a(r){return r===null?"null":Array.isArray(r)?"array":typeof r=="string"&&/^https?:/.test(r)?"link":typeof r=="object"&&typeof r.toISOString=="function"?"date":typeof r}function i(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Q.exports=function(r,o){let g="";const u=n(o);let c=function(d,f,m,v){if(!d.length)return f+" "+m;let E=f+`
`;return g+=A,d.forEach(function(p,h){E+=g+v(p)+(h<d.length-1?",":"")+`
`}),g=g.slice(0,-A.length),E+g+m};function l(d){if(d===void 0)return"";switch(a(d)){case"boolean":return"<span "+u("json-markup-bool")+">"+d+"</span>";case"number":return"<span "+u("json-markup-number")+">"+d+"</span>";case"date":return'<span class="json-markup-string">"'+i(d.toISOString())+'"</span>';case"null":return"<span "+u("json-markup-null")+">null</span>";case"string":return"<span "+u("json-markup-string")+'>"'+i(d.replace(/\n/g,`
`+g))+'"</span>';case"link":return"<span "+u("json-markup-string")+'>"<a href="'+encodeURI(d)+'">'+i(d)+'</a>"</span>';case"array":return c(d,"[","]",l);case"object":const f=Object.keys(d).filter(function(m){return d[m]!==void 0});return c(f,"{","}",function(m){return"<span "+u("json-markup-key")+'>"'+i(m)+'":</span> '+l(d[m])})}return""}return"<div "+u("json-markup")+">"+l(r)+"</div>"}},526:()=>{(function(Q){"use strict";Q(function(){Q.support.transition=function(){var A=function(){var e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},a;for(a in n)if(e.style[a]!==void 0)return n[a]}();return A&&{end:A}}()})})(window.jQuery),function(Q){"use strict";var A="[data-toggle=dropdown]",e=function(r){var o=Q(r).on("click.dropdown.data-api",this.toggle);Q("html").on("click.dropdown.data-api",function(){o.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(r){var o=Q(this),g,u;if(!o.is(".disabled, :disabled"))return g=a(o),u=g.hasClass("open"),n(),u||("ontouchstart"in document.documentElement&&Q('<div class="dropdown-backdrop"/>').insertBefore(Q(this)).on("click",n),g.toggleClass("open")),o.focus(),!1},keydown:function(r){var o,g,u,c,l,d;if(/(38|40|27)/.test(r.keyCode)&&(o=Q(this),r.preventDefault(),r.stopPropagation(),!o.is(".disabled, :disabled"))){if(c=a(o),l=c.hasClass("open"),!l||l&&r.keyCode==27)return r.which==27&&c.find(A).focus(),o.click();g=Q("[role=menu] li:not(.divider):visible a",c),g.length&&(d=g.index(g.filter(":focus")),r.keyCode==38&&d>0&&d--,r.keyCode==40&&d<g.length-1&&d++,~d||(d=0),g.eq(d).focus())}}};function n(){Q(".dropdown-backdrop").remove(),Q(A).each(function(){a(Q(this)).removeClass("open")})}function a(r){var o=r.attr("data-target"),g;return o||(o=r.attr("href"),o=o&&/#[A-Za-z]/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,"")),g=o&&Q.find(o),(!g||!g.length)&&(g=r.parent()),g}var i=Q.fn.dropdown;Q.fn.dropdown=function(r){return this.each(function(){var o=Q(this),g=o.data("dropdown");g||o.data("dropdown",g=new e(this)),typeof r=="string"&&g[r].call(o)})},Q.fn.dropdown.Constructor=e,Q.fn.dropdown.noConflict=function(){return Q.fn.dropdown=i,this},Q(document).on("click.dropdown.data-api",n).on("click.dropdown.data-api",".dropdown form",function(r){r.stopPropagation()}).on("click.dropdown.data-api",A,e.prototype.toggle).on("keydown.dropdown.data-api",A+", [role=menu]",e.prototype.keydown)}(window.jQuery),function(Q){"use strict";var A=function(n,a){this.options=a,this.$element=Q(n).delegate('[data-dismiss="modal"]',"click.dismiss.modal",Q.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};A.prototype={constructor:A,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var n=this,a=Q.Event("show");this.$element.trigger(a),!(this.isShown||a.isDefaultPrevented())&&(this.isShown=!0,this.escape(),this.backdrop(function(){var i=Q.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus(),i?n.$element.one(Q.support.transition.end,function(){n.$element.focus().trigger("shown")}):n.$element.focus().trigger("shown")}))},hide:function(n){n&&n.preventDefault();var a=this;n=Q.Event("hide"),this.$element.trigger(n),!(!this.isShown||n.isDefaultPrevented())&&(this.isShown=!1,this.escape(),Q(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),Q.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var n=this;Q(document).on("focusin.modal",function(a){n.$element[0]!==a.target&&!n.$element.has(a.target).length&&n.$element.focus()})},escape:function(){var n=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(a){a.which==27&&n.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var n=this,a=setTimeout(function(){n.$element.off(Q.support.transition.end),n.hideModal()},500);this.$element.one(Q.support.transition.end,function(){clearTimeout(a),n.hideModal()})},hideModal:function(){var n=this;this.$element.hide(),this.backdrop(function(){n.removeBackdrop(),n.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(n){var a=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=Q.support.transition&&i;if(this.$backdrop=Q('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?Q.proxy(this.$element[0].focus,this.$element[0]):Q.proxy(this.hide,this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;r?this.$backdrop.one(Q.support.transition.end,n):n()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),Q.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(Q.support.transition.end,n):n()):n&&n()}};var e=Q.fn.modal;Q.fn.modal=function(n){return this.each(function(){var a=Q(this),i=a.data("modal"),r=Q.extend({},Q.fn.modal.defaults,a.data(),typeof n=="object"&&n);i||a.data("modal",i=new A(this,r)),typeof n=="string"?i[n]():r.show&&i.show()})},Q.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},Q.fn.modal.Constructor=A,Q.fn.modal.noConflict=function(){return Q.fn.modal=e,this},Q(document).on("click.modal.data-api",'[data-toggle="modal"]',function(n){var a=Q(this),i=a.attr("href"),r=Q.find(a.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":Q.extend({remote:!/#/.test(i)&&i},r.data(),a.data());n.preventDefault(),r.modal(o).one("hide",function(){a.focus()})})}(window.jQuery),function(Q){"use strict";var A=function(n,a){this.init("tooltip",n,a)};A.prototype={constructor:A,init:function(n,a,i){var r,o,g,u,c;for(this.type=n,this.$element=Q(a),this.options=this.getOptions(i),this.enabled=!0,g=this.options.trigger.split(" "),c=g.length;c--;)u=g[c],u=="click"?this.$element.on("click."+this.type,this.options.selector,Q.proxy(this.toggle,this)):u!="manual"&&(r=u=="hover"?"mouseenter":"focus",o=u=="hover"?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,Q.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,Q.proxy(this.leave,this)));this.options.selector?this._options=Q.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(n){return n=Q.extend({},Q.fn[this.type].defaults,this.$element.data(),n),n.delay&&typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),n},enter:function(n){var a=Q.fn[this.type].defaults,i={},r;if(this._options&&Q.each(this._options,function(o,g){a[o]!=g&&(i[o]=g)},this),r=Q(n.currentTarget)[this.type](i).data(this.type),!r.options.delay||!r.options.delay.show)return r.show();clearTimeout(this.timeout),r.hoverState="in",this.timeout=setTimeout(function(){r.hoverState=="in"&&r.show()},r.options.delay.show)},leave:function(n){var a=Q(n.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!a.options.delay||!a.options.delay.hide)return a.hide();a.hoverState="out",this.timeout=setTimeout(function(){a.hoverState=="out"&&a.hide()},a.options.delay.hide)},show:function(){var n,a,i,r,o,g,u=Q.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(u),u.isDefaultPrevented())return;switch(n=this.tip(),this.setContent(),this.options.animation&&n.addClass("fade"),o=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,n.detach().css({top:0,left:0,display:"block"}),this.options.container?n.appendTo(Q.find(this.options.container)):n.insertAfter(this.$element),a=this.getPosition(),i=n[0].offsetWidth,r=n[0].offsetHeight,o){case"bottom":g={top:a.top+a.height,left:a.left+a.width/2-i/2};break;case"top":g={top:a.top-r,left:a.left+a.width/2-i/2};break;case"left":g={top:a.top+a.height/2-r/2,left:a.left-i};break;case"right":g={top:a.top+a.height/2-r/2,left:a.left+a.width};break;case"topLeft":g={top:a.top-r,left:a.left+a.width/2-i*.1};break;case"topRight":g={top:a.top-r,left:a.left+a.width/2-i*.9};break;case"rightTop":g={top:a.top+a.height/2-r*.1,left:a.left+a.width};break;case"rightBottom":g={top:a.top+a.height/2-r*.9,left:a.left+a.width};break;case"bottomLeft":g={top:a.top+a.height,left:a.left+a.width/2-i*.1};break;case"bottomRight":g={top:a.top+a.height,left:a.left+a.width/2-i*.9};break;case"leftTop":g={top:a.top+a.height/2-r*.1,left:a.left-i};break;case"leftBottom":g={top:a.top+a.height/2-r*.9,left:a.left-i};break}this.applyPlacement(g,o),this.$element.trigger("shown")}},applyPlacement:function(n,a){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,g,u,c,l;i.offset(n).addClass(a).addClass("in"),g=i[0].offsetWidth,u=i[0].offsetHeight,a=="top"&&u!=o&&(n.top=n.top+o-u,l=!0),a=="bottom"||a=="top"?(c=0,n.left<0&&(c=n.left*-2,n.left=0,i.offset(n),g=i[0].offsetWidth,u=i[0].offsetHeight),this.replaceArrow(c-r+g,g,"left")):this.replaceArrow(u-o,u,"top"),l&&i.offset(n)},replaceArrow:function(n,a,i){this.arrow().css(i,n?50*(1-n/a)+"%":"")},setContent:function(){var n=this.tip(),a=this.getTitle();n.find(".tooltip-inner").text(a),n.removeClass("fade in top bottom left right")},hide:function(){var n=this,a=this.tip(),i=Q.Event("hide");if(this.$element.trigger(i),i.isDefaultPrevented())return;a.removeClass("in");function r(){var o=setTimeout(function(){a.off(Q.support.transition.end).detach()},500);a.one(Q.support.transition.end,function(){clearTimeout(o),a.detach()})}return Q.support.transition&&this.$tip.hasClass("fade")?r():a.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var n=this.$element[0];return Q.extend({},typeof n.getBoundingClientRect=="function"?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},this.$element.offset())},getTitle:function(){var n,a=this.$element,i=this.options;return n=a.attr("data-original-title")||(typeof i.title=="function"?i.title.call(a[0]):i.title),n},tip:function(){return this.$tip=this.$tip||Q(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(n){var a=n?Q(n.currentTarget)[this.type](this._options).data(this.type):this;a.tip().hasClass("in")?a.hide():a.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=Q.fn.tooltip;Q.fn.tooltip=function(n){return this.each(function(){var a=Q(this),i=a.data("tooltip"),r=typeof n=="object"&&n;i||a.data("tooltip",i=new A(this,r)),typeof n=="string"&&i[n]()})},Q.fn.tooltip.Constructor=A,Q.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Q.fn.tooltip.noConflict=function(){return Q.fn.tooltip=e,this}}(window.jQuery),function(Q){"use strict";var A=function(n){this.element=Q(n)};A.prototype={constructor:A,show:function(){var n=this.element,a=n.closest("ul:not(.dropdown-menu)"),i=n.attr("data-target"),r,o,g;i||(i=n.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!n.parent("li").hasClass("active")&&(r=a.find(".active:last a")[0],g=Q.Event("show",{relatedTarget:r}),n.trigger(g),!g.isDefaultPrevented()&&(o=Q.find(i),this.activate(n.parent("li"),a),this.activate(o,o.parent(),function(){n.trigger({type:"shown",relatedTarget:r})})))},activate:function(n,a,i){var r=a.find("> .active"),o=i&&Q.support.transition&&r.hasClass("fade");function g(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),n.addClass("active"),o?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu")&&n.closest("li.dropdown").addClass("active"),i&&i()}o?r.one(Q.support.transition.end,g):g(),r.removeClass("in")}};var e=Q.fn.tab;Q.fn.tab=function(n){return this.each(function(){var a=Q(this),i=a.data("tab");i||a.data("tab",i=new A(this)),typeof n=="string"&&i[n]()})},Q.fn.tab.Constructor=A,Q.fn.tab.noConflict=function(){return Q.fn.tab=e,this},Q(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),Q(this).tab("show")})}(window.jQuery),function(Q){"use strict";var A=function(n,a){this.$element=Q(n),this.options=Q.extend({},Q.fn.typeahead.defaults,a),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=Q(this.options.menu),this.shown=!1,this.listen()};A.prototype={constructor:A,select:function(){var n=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(n)).change(),this.hide()},updater:function(n){return n},show:function(){var n=Q.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:n.top+n.height,left:n.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(n){var a;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(a=Q.isFunction(this.source)?this.source(this.query,Q.proxy(this.process,this)):this.source,a?this.process(a):this)},process:function(n){var a=this;return n=Q.grep(n,function(i){return a.matcher(i)}),n=this.sorter(n),n.length?this.render(n.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var a=[],i=[],r=[],o;o=n.shift();)o.toLowerCase().indexOf(this.query.toLowerCase())?~o.indexOf(this.query)?i.push(o):r.push(o):a.push(o);return a.concat(i,r)},highlighter:function(n){var a=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a?n.replace(new RegExp("("+a+")","ig"),function(i,r){return"<strong>"+r+"</strong>"}):n},render:function(n){var a=this;return n=Q(n).map(function(i,r){return i=Q(a.options.item).attr("data-value",r),i.find("a").html(a.highlighter(r)),i[0]}),this.$menu.html(n),this},next:function(n){var a=this.$menu.find(".active").removeClass("active"),i=a.next();i.length||(i=Q(this.$menu.find("li")[0])),i.addClass("active")},prev:function(n){var a=this.$menu.find(".active").removeClass("active"),i=a.prev();i.length||(i=this.$menu.find("li").last()),i.addClass("active")},listen:function(){this.$element.on("focus",Q.proxy(this.focus,this)).on("blur",Q.proxy(this.blur,this)).on("keypress",Q.proxy(this.keypress,this)).on("keyup",Q.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",Q.proxy(this.keydown,this)),this.$menu.on("click",Q.proxy(this.click,this)).on("mouseenter","li",Q.proxy(this.mouseenter,this)).on("mouseleave","li",Q.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(n){var a=n in this.$element;return a||(this.$element.setAttribute(n,"return;"),a=typeof this.$element[n]=="function"),a},move:function(n){if(this.shown&&!(n.shiftKey&&n.keyCode===40)){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault(),this.prev();break;case 40:n.preventDefault(),this.next();break}n.stopPropagation()}},keydown:function(n){this.suppressKeyPressRepeat=~Q.inArray(n.keyCode,[40,38,9,13,27,57]),this.move(n)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.keyCode===13&&typeof this.$menu.find(".active").attr("data-value")>"u"?this.$element.submit():(n.stopPropagation(),n.preventDefault())},focus:function(n){this.focused=!0},blur:function(n){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(n){n.stopPropagation(),n.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(n){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),Q(n.currentTarget).addClass("active")},mouseleave:function(n){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=Q.fn.typeahead;Q.fn.typeahead=function(n){return this.each(function(){var a=Q(this),i=a.data("typeahead"),r=typeof n=="object"&&n;i||a.data("typeahead",i=new A(this,r)),typeof n=="string"&&i[n]()})},Q.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},Q.fn.typeahead.Constructor=A,Q.fn.typeahead.noConflict=function(){return Q.fn.typeahead=e,this},Q(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(n){var a=Q(this);a.data("typeahead")||a.typeahead(a.data())})}(window.jQuery),function(Q){"use strict";var A=function(n,a){this.options=Q.extend({},Q.fn.affix.defaults,a),this.$window=Q(window).on("scroll.affix.data-api",Q.proxy(this.checkPosition,this)).on("click.affix.data-api",Q.proxy(function(){setTimeout(Q.proxy(this.checkPosition,this),1)},this)),this.$element=Q(n),this.checkPosition()};A.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=Q(document).height(),a=this.$window.scrollTop(),i=this.$element.offset(),r=this.options.offset,o=r.bottom,g=r.top,u="affix affix-top affix-bottom",c;typeof r!="object"&&(o=g=r),typeof g=="function"&&(g=r.top()),typeof o=="function"&&(o=r.bottom()),c=this.unpin!=null&&a+this.unpin<=i.top?!1:o!=null&&i.top+this.$element.height()>=n-o?"bottom":g!=null&&a<=g?"top":!1,this.affixed!==c&&(this.affixed=c,this.unpin=c=="bottom"?i.top-a:null,this.$element.removeClass(u).addClass("affix"+(c?"-"+c:"")))}};var e=Q.fn.affix;Q.fn.affix=function(n){return this.each(function(){var a=Q(this),i=a.data("affix"),r=typeof n=="object"&&n;i||a.data("affix",i=new A(this,r)),typeof n=="string"&&i[n]()})},Q.fn.affix.Constructor=A,Q.fn.affix.defaults={offset:0},Q.fn.affix.noConflict=function(){return Q.fn.affix=e,this},Q(window).on("load",function(){Q('[data-spy="affix"]').each(function(){var n=Q(this),a=n.data();a.offset=a.offset||{},a.offsetBottom&&(a.offset.bottom=a.offsetBottom),a.offsetTop&&(a.offset.top=a.offsetTop),n.affix(a)})})}(window.jQuery)},26189:()=>{(function(Q){var A={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(n){var a={x:-1,y:-1,locked:!1};n.setCrosshair=function(g){if(!g)a.x=-1;else{var u=n.p2c(g);a.x=Math.max(0,Math.min(u.left,n.width())),a.y=Math.max(0,Math.min(u.top,n.height()))}n.triggerRedrawOverlay()},n.clearCrosshair=n.setCrosshair,n.lockCrosshair=function(g){g&&n.setCrosshair(g),a.locked=!0},n.unlockCrosshair=function(){a.locked=!1};function i(o){a.locked||a.x!=-1&&(a.x=-1,n.triggerRedrawOverlay())}function r(o){if(!a.locked){if(n.getSelection&&n.getSelection()){a.x=-1;return}var g=n.offset();a.x=Math.max(0,Math.min(o.pageX-g.left,n.width())),a.y=Math.max(0,Math.min(o.pageY-g.top,n.height())),n.triggerRedrawOverlay()}}n.hooks.bindEvents.push(function(o,g){o.getOptions().crosshair.mode&&(g.mouseout(i),g.mousemove(r))}),n.hooks.drawOverlay.push(function(o,g){var u=o.getOptions().crosshair;if(u.mode){var c=o.getPlotOffset();if(g.save(),g.translate(c.left,c.top),a.x!=-1){var l=o.getOptions().crosshair.lineWidth%2?.5:0;if(g.strokeStyle=u.color,g.lineWidth=u.lineWidth,g.lineJoin="round",g.beginPath(),u.mode.indexOf("x")!=-1){var d=Math.floor(a.x)+l;g.moveTo(d,0),g.lineTo(d,o.height())}if(u.mode.indexOf("y")!=-1){var f=Math.floor(a.y)+l;g.moveTo(0,f),g.lineTo(o.width(),f)}g.stroke()}g.restore()}}),n.hooks.shutdown.push(function(o,g){g.unbind("mouseout",i),g.unbind("mousemove",r)})}Q.plot.plugins.push({init:e,options:A,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(Q){function A(e){e.hooks.processDatapoints.push(function(n,a,i){a.dashes.show&&n.hooks.draw.push(function(r,o){var g=r.getPlotOffset(),u=a.xaxis,c=a.yaxis;function l(v,E){var p=i.points,h=i.pointsize,s=null,y=null,D=0,C=!0,P,b;a.dashes.dashLength[0]?(P=a.dashes.dashLength[0],a.dashes.dashLength[1]?b=a.dashes.dashLength[1]:b=P):b=P=a.dashes.dashLength,o.beginPath();for(var T=h;T<p.length;T+=h){let G=function(_){var K=Math.sqrt(Math.pow(S-x,2)+Math.pow(U-L,2));if(K<=_)return{deltaX:S-x,deltaY:U-L,distance:K,remainder:_-K};var k=S>x?1:-1,z=U>L?1:-1;return{deltaX:k*Math.sqrt(Math.pow(_,2)/(1+Math.pow((U-L)/(S-x),2))),deltaY:z*Math.sqrt(Math.pow(_,2)-Math.pow(_,2)/(1+Math.pow((U-L)/(S-x),2))),distance:_,remainder:0}};var w=G,O=p[T-h],R=p[T-h+1],I=p[T],M=p[T+1];if(!(O==null||I==null)){if(R<=M&&R<c.min){if(M<c.min)continue;O=(c.min-R)/(M-R)*(I-O)+O,R=c.min}else if(M<=R&&M<c.min){if(R<c.min)continue;I=(c.min-R)/(M-R)*(I-O)+O,M=c.min}if(R>=M&&R>c.max){if(M>c.max)continue;O=(c.max-R)/(M-R)*(I-O)+O,R=c.max}else if(M>=R&&M>c.max){if(R>c.max)continue;I=(c.max-R)/(M-R)*(I-O)+O,M=c.max}if(O<=I&&O<u.min){if(I<u.min)continue;R=(u.min-O)/(I-O)*(M-R)+R,O=u.min}else if(I<=O&&I<u.min){if(O<u.min)continue;M=(u.min-O)/(I-O)*(M-R)+R,I=u.min}if(O>=I&&O>u.max){if(I>u.max)continue;R=(u.max-O)/(I-O)*(M-R)+R,O=u.max}else if(I>=O&&I>u.max){if(O>u.max)continue;M=(u.max-O)/(I-O)*(M-R)+R,I=u.max}(O!=s||R!=y)&&o.moveTo(u.p2c(O)+v,c.p2c(R)+E);var x=u.p2c(O)+v,L=c.p2c(R)+E,S=u.p2c(I)+v,U=c.p2c(M)+E,N;do N=G(D>0?D:C?P:b),(N.deltaX!=0||N.deltaY!=0)&&(C?o.lineTo(x+N.deltaX,L+N.deltaY):o.moveTo(x+N.deltaX,L+N.deltaY)),C=!C,D=N.remainder,x+=N.deltaX,L+=N.deltaY;while(N.distance>0);s=I,y=M}}o.stroke()}o.save(),o.translate(g.left,g.top),o.lineJoin="round";var d=a.dashes.lineWidth,f=a.shadowSize;if(d>0&&f>0){o.lineWidth=f,o.strokeStyle="rgba(0,0,0,0.1)";var m=Math.PI/18;l(Math.sin(m)*(d/2+f/2),Math.cos(m)*(d/2+f/2)),o.lineWidth=f/2,l(Math.sin(m)*(d/2+f/4),Math.cos(m)*(d/2+f/4))}o.lineWidth=d,o.strokeStyle=a.color,d>0&&l(0,0),o.restore()})})}Q.plot.plugins.push({init:A,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(Q){"use strict";var A={series:{fillBelowTo:null}};function e(n){function a(o,g){var u;for(u=0;u<g.length;++u)if(g[u].id===o.fillBelowTo)return g[u];return null}function i(o,g,u,c,l,d,f,m){var v,E,p,h,s,y;return v=u-o,E=c-g,p=f-l,h=m-d,s=(-E*(o-l)+v*(g-d))/(-p*E+v*h),y=(p*(g-d)-h*(o-l))/(-p*E+v*h),s>=0&&s<=1&&y>=0&&y<=1?[o+y*v,g+y*E]:null}function r(o,g,u){if(u.fillBelowTo===null)return;var c,l,d,f,m,v,E;function p(b,T){g.beginPath(),g.moveTo(u.xaxis.p2c(b)+v.left,u.yaxis.p2c(T)+v.top)}function h(){g.closePath(),g.fill()}function s(){if(d.length/l!==m.length/f)return console.error("Refusing to graph inconsistent number of points"),!1;var b;for(b=0;b<d.length/l;b++)if(d[b*l]!==null&&m[b*f]!==null&&d[b*l]!==m[b*f])return console.error("Refusing to graph points without matching value"),!1;return!0}function y(b,T){console.assert(T>b,"expects the end index to be greater than the start index");var O=b===0||d[b-1]===null||m[b-1]===null,R=!1,I,M;for(I=b;I<T;I++)if(d[I*l+1]===null||m[I*l+1]===null)R=!1,O=!0;else if(d[I*l+1]===m[I*f+1])R=!0,O=!1;else if(d[I*l+1]>m[I*f+1]){O?p(d[I*l],d[I*l+1]):R?p(d[(I-1)*l],d[(I-1)*l+1]):(M=D(I),p(M[0],M[1])),P(I,T);return}else O=!1,R=!1}function D(b){console.assert(b>0,"expects the second point in the series line segment");var T,O;for(T=1;T<m.length/f;T++)if(O=i(d[(b-1)*l],d[(b-1)*l+1],d[b*l],d[b*l+1],m[(T-1)*f],m[(T-1)*f+1],m[T*f],m[T*f+1]),O!==null)return O;console.error("intersectionPoint() should only be called when an intersection happens")}function C(b,T){console.assert(b>=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var O;for(O=b;O>=T;O--)g.lineTo(c.xaxis.p2c(m[O*f])+v.left,c.yaxis.p2c(m[O*f+1])+v.top);h()}function P(b,T){console.assert(b<=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var O,R;for(O=b;O<T;O++)if(d[O*l+1]===null&&O>b){C(O-1,b),y(O,T);return}else if(d[O*l+1]===m[O*f+1]){C(O,b),y(O,T);return}else if(d[O*l+1]<m[O*f+1]){R=D(O),g.lineTo(u.xaxis.p2c(R[0])+v.left,u.yaxis.p2c(R[1])+v.top),C(O,b),y(O,T);return}else g.lineTo(u.xaxis.p2c(d[O*l])+v.left,u.yaxis.p2c(d[O*l+1])+v.top);C(T,b)}c=a(u,o.getData()),c&&(l=u.datapoints.pointsize,d=u.datapoints.points,f=c.datapoints.pointsize,m=c.datapoints.points,v=o.getPlotOffset(),s()&&(E=Q.color.parse(u.color),E.a=.4,E.normalize(),g.fillStyle=E.toString(),y(0,d.length/l)))}n.hooks.drawSeries.push(r)}Q.plot.plugins.push({init:e,options:A,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Q){var A=function(){var u,c,l,d,f,m,v=function(b,T){u=T,c=b.getPlaceholder(),l=b.getOptions(),d=l.series.gauges,f=b.getData(),m=e(d.debug)};v.prototype.calculateLayout=function(){var b=c.width(),T=c.height(),O=Math.min(f.length,d.layout.columns),R=Math.ceil(f.length/O),I=d.layout.margin,M=d.layout.hMargin,x=d.layout.vMargin,L=(b-I*2-M*(O-1))/O,S=(T-I*2-x*(R-1))/R;if(d.layout.square){var U=Math.min(L,S);L=U,S=U}E(d,L);var N=d.cell.margin,w=0,G=0;d.label.show&&(w=d.label.margin,G=d.label.font.size);var _=0,K=0;d.value.show&&(_=d.value.margin,K=d.value.font.size);var k=0;d.threshold.show&&(k=d.threshold.width);var z=0,W=0;d.threshold.label.show&&(z=d.threshold.label.margin,W=d.threshold.label.font.size);for(var Z=L/2-N-k-z*2-W,H=d.gauge.startAngle,X=d.gauge.endAngle,Y=(X-H)/100,ne=-1,se=H;se<X;se+=Y)ne=Math.max(ne,Math.sin(i(se)));ne=Math.max(ne,Math.sin(i(X)));var re=(S-N*2-w*2-G)/(1+ne);re*ne<_+K/2&&(re=S-N*2-w*2-G-_-K/2);var ge=re-z*2-W-k,q=Math.min(Z,ge),me=d.gauge.width;me>=q&&(me=Math.max(3,q/3));var oe=z*2+W+k+q,fe=Math.max(oe*(1+ne),oe+_+K/2);return{canvasWidth:b,canvasHeight:T,margin:I,hMargin:M,vMargin:x,columns:O,rows:R,cellWidth:L,cellHeight:S,cellMargin:N,labelMargin:w,labelFontSize:G,valueMargin:_,valueFontSize:K,width:me,radius:q,thresholdWidth:k,thresholdLabelMargin:z,thresholdLabelFontSize:W,gaugeOuterHeight:fe}};function E(b,T){b.gauge.width==="auto"&&(b.gauge.width=Math.max(5,T/8)),b.label.margin==="auto"&&(b.label.margin=Math.max(1,T/20)),b.label.font.size==="auto"&&(b.label.font.size=Math.max(5,T/8)),b.value.margin==="auto"&&(b.value.margin=Math.max(1,T/30)),b.value.font.size==="auto"&&(b.value.font.size=Math.max(5,T/9)),b.threshold.width==="auto"&&(b.threshold.width=Math.max(3,T/100)),b.threshold.label.margin==="auto"&&(b.threshold.label.margin=Math.max(3,T/40)),b.threshold.label.font.size==="auto"&&(b.threshold.label.font.size=Math.max(5,T/15))}v.prototype.calculateAutoValues=E,v.prototype.calculateCellLayout=function(b,T,O){var R=n(T.columns,O),I=a(T.columns,O),M=T.margin+(T.cellWidth+T.hMargin)*R,x=T.margin+(T.cellHeight+T.vMargin)*I,L=M+T.cellWidth/2,S=x+T.cellMargin+T.labelMargin*2+T.labelFontSize+T.thresholdWidth+T.thresholdLabelFontSize+T.thresholdLabelMargin*2+T.radius,U=T.cellHeight-T.cellMargin*2-T.labelMargin*2-T.labelFontSize-T.gaugeOuterHeight,N=0;return b.cell.vAlign==="middle"?N=U/2:b.cell.vAlign==="bottom"&&(N=U),S+=N,{col:R,row:I,x:M,y:x,offsetY:N,cellWidth:T.cellWidth,cellHeight:T.cellHeight,cellMargin:T.cellMargin,cx:L,cy:S}},v.prototype.drawBackground=function(b){d.frame.show&&(u.save(),u.strokeStyle=l.grid.borderColor,u.lineWidth=l.grid.borderWidth,u.strokeRect(0,0,b.canvasWidth,b.canvasHeight),l.grid.backgroundColor&&(u.fillStyle=l.grid.backgroundColor,u.fillRect(0,0,b.canvasWidth,b.canvasHeight)),u.restore())},v.prototype.drawCellBackground=function(b,T){u.save(),b.cell.border&&b.cell.border.show&&b.cell.border.color&&b.cell.border.width&&(u.strokeStyle=b.cell.border.color,u.lineWidth=b.cell.border.width,u.strokeRect(T.x,T.y,T.cellWidth,T.cellHeight)),b.cell.background&&b.cell.background.color&&(u.fillStyle=b.cell.background.color,u.fillRect(T.x,T.y,T.cellWidth,T.cellHeight)),u.restore()},v.prototype.drawGauge=function(b,T,O,R,I){var M=b.gauge.shadow.show?b.gauge.shadow.blur:0,x=s(b,I),L=p(b,T,I);D(O.cx,O.cy,T.radius,T.width,i(b.gauge.startAngle),i(b.gauge.endAngle),b.gauge.border.color,b.gauge.border.width,b.gauge.background.color,M),D(O.cx,O.cy,T.radius-1,T.width-2,i(L.a1),i(L.a2),x,1,x,M),b.gauge.neutralValue!=null&&h(b,T,O,x)};function p(b,T,O){let R={};var I=b.gauge.neutralValue;return I!=null?O<I?(R.a1=y(b,T,O),R.a2=y(b,T,I)):(R.a1=y(b,T,I),R.a2=y(b,T,O)):(R.a1=b.gauge.startAngle,R.a2=y(b,T,O)),R}function h(b,T,O,R){var I=(b.gauge.max-b.gauge.min)/600;r(u,O.cx,O.cy,T.radius-2,T.width-4,i(y(b,T,b.gauge.neutralValue-I)),i(y(b,T,b.gauge.neutralValue+I)),R,2,b.gauge.background.color)}function s(b,T){for(var O,R=0;R<b.threshold.values.length;R++){var I=b.threshold.values[R];if(O=I.color,T<I.value)break}return O}function y(b,T,O){var R=b.gauge.startAngle+(b.gauge.endAngle-b.gauge.startAngle)*((O-b.gauge.min)/(b.gauge.max-b.gauge.min));return R<b.gauge.startAngle?R=b.gauge.startAngle:R>b.gauge.endAngle&&(R=b.gauge.endAngle),R}v.prototype.drawThreshold=function(b,T,O){for(var R=b.gauge.startAngle,I=0;I<b.threshold.values.length;I++){var M=b.threshold.values[I];c1=M.color,a2=y(b,T,M.value),r(u,O.cx,O.cy,T.radius+T.thresholdWidth,T.thresholdWidth-2,i(R),i(a2),c1,1,c1),R=a2}};function D(b,T,O,R,I,M,x,L,S,U){I!==M&&(u.save(),r(u,b,T,O,R,I,M,x,L,S),U&&(r(u,b,T,O,R,I,M),u.clip(),u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowBlur=10,u.shadowColor="gray",r(u,b,T,O+1,R+2,I,M,x,1)),u.restore())}v.prototype.drawLable=function(b,T,O,R,I){P(O.cx,O.y+O.cellMargin+T.labelMargin+O.offsetY,"flotGaugeLabel"+R,b.label.formatter?b.label.formatter(I.label,I.data[0][1]):text,b.label)},v.prototype.drawValue=function(b,T,O,R,I){P(O.cx,O.cy-b.value.font.size/2,"flotGaugeValue"+R,b.value.formatter?b.value.formatter(I.label,I.data[0][1]):text,b.value)},v.prototype.drawThresholdValues=function(b,T,O,R){C(b,T,O,"Min"+R,b.gauge.min,b.gauge.startAngle),C(b,T,O,"Max"+R,b.gauge.max,b.gauge.endAngle);for(var I=0;I<b.threshold.values.length;I++){var M=b.threshold.values[I];if(M.value>b.gauge.min&&M.value<b.gauge.max){var x=y(b,T,M.value);C(b,T,O,R+"_"+I,M.value,x)}}var L=b.gauge.neutralValue;L!=null&&L>b.gauge.min&&L<b.gauge.max&&C(b,T,O,"Neutral"+R,L,y(b,T,L))};function C(b,T,O,R,I,M){P(O.cx+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.cos(i(M)),O.cy+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.sin(i(M)),"flotGaugeThresholdValue"+R,b.threshold.label.formatter?b.threshold.label.formatter(I):I,b.threshold.label,M)}function P(b,T,O,R,I,M){var x=Q(c).find("#"+O),L=x.length;L||(x=Q("<span></span>"),x.attr("id",O),x.attr("class","flot-temp-elem"),c.append(x)),x.css("position","absolute"),x.css("top",T+"px"),x.css("white-space","nowrap"),I.font.size&&x.css("font-size",I.font.size+"px"),I.font.family&&x.css("font-family",I.font.family),I.color&&x.css("color",I.color),I.background.color&&x.css("background-color",I.background.color),I.background.opacity&&x.css("opacity",I.background.opacity),x.text(R),x.css("left",b+"px"),x.css("left",parseInt(x.css("left"))-x.width()/2+"px"),!L&&M&&(x.css("top",parseInt(x.css("top"))-x.height()/2+"px"),x.css("transform","rotate("+(180*M+90)+"deg)"))}return v}();function e(u){return typeof Logger<"u"?new Logger(u):null}function n(u,c){return c%u}function a(u,c){return Math.floor(c/u)}function i(u){return u*Math.PI}function r(u,c,l,d,f,m,v,E,p,h){if(m!==v){var s=!1;u.save(),u.beginPath(),u.arc(c,l,d,m,v,s),u.lineTo(c+(d-f)*Math.cos(v),l+(d-f)*Math.sin(v)),u.arc(c,l,d-f,v,m,!s),u.closePath(),p&&(u.lineWidth=p),E&&(u.strokeStyle=E,u.stroke()),h&&(u.fillStyle=h,u.fill()),u.restore()}}function o(u){u.hooks.processOptions.push(function(c,l){var d=e(l.series.gauges.debug);l.series.gauges.show&&(l.grid.show=!1,l.legend.show=!1);var f=l.series.gauges.threshold.values;f.sort(function(m,v){return m.value<v.value?-1:m.value>v.value?1:0})}),u.hooks.draw.push(function(c,l){var d=c.getOptions(),f=d.series.gauges,m=e(f.debug);if(f.show){var v=c.getData();if(!(!v||!v.length)){var E=new A(c,l),p=E.calculateLayout();f.debug.layout,E.drawBackground(p);for(var h=0;h<v.length;h++){var s=v[h],y=Q.extend({},f,s.gauges);s.gauges&&E.calculateAutoValues(y,p.cellWidth);var D=E.calculateCellLayout(y,p,h);E.drawCellBackground(y,D),y.debug.layout,y.label.show&&E.drawLable(y,p,D,h,s),E.drawGauge(y,p,D,s.label,s.data[0][1]),y.threshold.show&&E.drawThreshold(y,p,D),y.threshold.label.show&&E.drawThresholdValues(y,p,D,h),y.value.show&&E.drawValue(y,p,D,h,s)}}}})}var g={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,c){return u}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,c){return parseInt(c)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(u){return u}},values:[]}}}};Q.plot.plugins.push({init:o,options:g,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(Q){Q.color={},Q.color.make=function(e,n,a,i){var r={};return r.r=e||0,r.g=n||0,r.b=a||0,r.a=i??1,r.add=function(o,g){for(var u=0;u<o.length;++u)r[o.charAt(u)]+=g;return r.normalize()},r.scale=function(o,g){for(var u=0;u<o.length;++u)r[o.charAt(u)]*=g;return r.normalize()},r.toString=function(){return r.a>=1?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function o(g,u,c){return u<g?g:u>c?c:u}return r.r=o(0,parseInt(r.r),255),r.g=o(0,parseInt(r.g),255),r.b=o(0,parseInt(r.b),255),r.a=o(0,r.a,1),r},r.clone=function(){return Q.color.make(r.r,r.b,r.g,r.a)},r.normalize()},Q.color.extract=function(e,n){var a;do{if(a=e.css(n).toLowerCase(),a!=""&&a!="transparent")break;e=e.parent()}while(e.length&&!Q.nodeName(e.get(0),"body"));return a=="rgba(0, 0, 0, 0)"&&(a="transparent"),Q.color.parse(a)},Q.color.parse=function(e){var n,a=Q.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55);if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55,parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return a(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return a(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var i=Q.trim(e).toLowerCase();return i=="transparent"?a(255,255,255,0):(n=A[i]||[0,0,0],a(n[0],n[1],n[2]))};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Q){var A=Object.prototype.hasOwnProperty;Q.fn.detach||(Q.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(i,r){var o=r.children("."+i)[0];if(o==null&&(o=document.createElement("canvas"),o.className=i,Q(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(r),!o.getContext))if(window.G_vmlCanvasManager)o=window.G_vmlCanvasManager.initElement(o);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=o;var g=this.context=o.getContext("2d"),u=window.devicePixelRatio||1,c=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;this.pixelRatio=u/c,this.resize(r.width(),r.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(i,r){if(i<=0||r<=0)throw new Error("Invalid dimensions for plot, width = "+i+", height = "+r);var o=this.element,g=this.context,u=this.pixelRatio;this.width!=i&&(o.width=i*u,o.style.width=i+"px",this.width=i),this.height!=r&&(o.height=r*u,o.style.height=r+"px",this.height=r),g.restore(),g.save(),g.scale(u,u)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var i=this._textCache;for(var r in i)if(A.call(i,r)){var o=this.getTextLayer(r),g=i[r];o.hide();for(var u in g)if(A.call(g,u)){var c=g[u];for(var l in c)if(A.call(c,l)){for(var d=c[l].positions,f=0,m;m=d[f];f++)m.active?m.rendered||(o.append(m.element),m.rendered=!0):(d.splice(f--,1),m.rendered&&m.element.detach());d.length==0&&delete c[l]}}o.show()}},e.prototype.getTextLayer=function(i){var r=this.text[i];return r==null&&(this.textContainer==null&&(this.textContainer=Q("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),r=this.text[i]=Q("<div></div>").addClass(i).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),r},e.prototype.getTextInfo=function(i,r,o,g,u){var c,l,d,f;if(r=""+r,typeof o=="object"?c=o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:c=o,l=this._textCache[i],l==null&&(l=this._textCache[i]={}),d=l[c],d==null&&(d=l[c]={}),f=d[r],f==null){var m=Q("<div></div>").html(r).css({position:"absolute","max-width":u,top:-9999}).appendTo(this.getTextLayer(i));typeof o=="object"?m.css({font:c,color:o.color}):typeof o=="string"&&m.addClass(o),f=d[r]={element:m,positions:[]};var v=this._textSizeCache[r];v?(f.width=v.width,f.height=v.height):(f.width=m.outerWidth(!0),f.height=m.outerHeight(!0),this._textSizeCache[r]={width:f.width,height:f.height}),m.detach()}return f},e.prototype.addText=function(i,r,o,g,u,c,l,d,f){var m=this.getTextInfo(i,g,u,c,l),v=m.positions;d=="center"?r-=m.width/2:d=="right"&&(r-=m.width),f=="middle"?o-=m.height/2:f=="bottom"&&(o-=m.height);for(var E=0,p;p=v[E];E++)if(p.x==r&&p.y==o){p.active=!0;return}p={active:!0,rendered:!1,element:v.length?m.element.clone():m.element,x:r,y:o},v.push(p),p.element.css({top:Math.round(o),left:Math.round(r),"text-align":d})},e.prototype.removeText=function(i,r,o,g,u,c){if(g==null){var l=this._textCache[i];if(l!=null){for(var d in l)if(A.call(l,d)){var f=l[d];for(var m in f)if(A.call(f,m))for(var v=f[m].positions,E=0,p;p=v[E];E++)p.active=!1}}}else for(var v=this.getTextInfo(i,g,u,c).positions,E=0,p;p=v[E];E++)p.x==r&&p.y==o&&(p.active=!1)};function n(i,r,o,g){var u=[],c={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},l=null,d=null,f=null,m=null,v=null,E=[],p=[],h={left:0,right:0,top:0,bottom:0},s=0,y=0,D={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},C=this;C.setData=O,C.setupGrid=H,C.draw=ge,C.getPlaceholder=function(){return i},C.getCanvas=function(){return l.element},C.getPlotOffset=function(){return h},C.width=function(){return s},C.height=function(){return y},C.offset=function(){var J=f.offset();return J.left+=h.left,J.top+=h.top,J},C.getData=function(){return u},C.getAxes=function(){var J={},te;return Q.each(E.concat(p),function(de,be){be&&(J[be.direction+(be.n!=1?be.n:"")+"axis"]=be)}),J},C.getXAxes=function(){return E},C.getYAxes=function(){return p},C.c2p=x,C.p2c=L,C.getOptions=function(){return c},C.highlight=ut,C.unhighlight=Fe,C.triggerRedrawOverlay=Ne,C.pointOffset=function(J){return{left:parseInt(E[I(J,"x")-1].p2c(+J.x)+h.left,10),top:parseInt(p[I(J,"y")-1].p2c(+J.y)+h.top,10)}},C.shutdown=_,C.destroy=function(){_(),i.removeData("plot").empty(),u=[],c=null,l=null,d=null,f=null,m=null,v=null,E=[],p=[],D=null,ot=[],C=null},C.resize=function(){var J=i.width(),te=i.height();l.resize(J,te),d.resize(J,te)},C.hooks=D,b(C),T(o),w(),O(r),H(),ge(),G();function P(J,te){te=[C].concat(te);for(var de=0;de<J.length;++de)J[de].apply(this,te)}function b(){for(var J={Canvas:e},te=0;te<g.length;++te){var de=g[te];de.init(C,J),de.options&&Q.extend(!0,c,de.options)}}function T(J){Q.extend(!0,c,J),J&&J.colors&&(c.colors=J.colors),c.xaxis.color==null&&(c.xaxis.color=Q.color.parse(c.grid.color).scale("a",.22).toString()),c.yaxis.color==null&&(c.yaxis.color=Q.color.parse(c.grid.color).scale("a",.22).toString()),c.xaxis.tickColor==null&&(c.xaxis.tickColor=c.grid.tickColor||c.xaxis.color),c.yaxis.tickColor==null&&(c.yaxis.tickColor=c.grid.tickColor||c.yaxis.color),c.grid.borderColor==null&&(c.grid.borderColor=c.grid.color),c.grid.tickColor==null&&(c.grid.tickColor=Q.color.parse(c.grid.color).scale("a",.22).toString());var te,de,be,De=i.css("font-size"),Ue=De?+De.replace("px",""):13,We={style:i.css("font-style"),size:Math.round(.8*Ue),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(be=c.xaxes.length||1,te=0;te<be;++te)de=c.xaxes[te],de&&!de.tickColor&&(de.tickColor=de.color),de=Q.extend(!0,{},c.xaxis,de),c.xaxes[te]=de,de.font&&(de.font=Q.extend({},We,de.font),de.font.color||(de.font.color=de.color),de.font.lineHeight||(de.font.lineHeight=Math.round(de.font.size*1.15)));for(be=c.yaxes.length||1,te=0;te<be;++te)de=c.yaxes[te],de&&!de.tickColor&&(de.tickColor=de.color),de=Q.extend(!0,{},c.yaxis,de),c.yaxes[te]=de,de.font&&(de.font=Q.extend({},We,de.font),de.font.color||(de.font.color=de.color),de.font.lineHeight||(de.font.lineHeight=Math.round(de.font.size*1.15)));for(c.xaxis.noTicks&&c.xaxis.ticks==null&&(c.xaxis.ticks=c.xaxis.noTicks),c.yaxis.noTicks&&c.yaxis.ticks==null&&(c.yaxis.ticks=c.yaxis.noTicks),c.x2axis&&(c.xaxes[1]=Q.extend(!0,{},c.xaxis,c.x2axis),c.xaxes[1].position="top",c.x2axis.min==null&&(c.xaxes[1].min=null),c.x2axis.max==null&&(c.xaxes[1].max=null)),c.y2axis&&(c.yaxes[1]=Q.extend(!0,{},c.yaxis,c.y2axis),c.yaxes[1].position="right",c.y2axis.min==null&&(c.yaxes[1].min=null),c.y2axis.max==null&&(c.yaxes[1].max=null)),c.grid.coloredAreas&&(c.grid.markings=c.grid.coloredAreas),c.grid.coloredAreasColor&&(c.grid.markingsColor=c.grid.coloredAreasColor),c.lines&&Q.extend(!0,c.series.lines,c.lines),c.points&&Q.extend(!0,c.series.points,c.points),c.bars&&Q.extend(!0,c.series.bars,c.bars),c.shadowSize!=null&&(c.series.shadowSize=c.shadowSize),c.highlightColor!=null&&(c.series.highlightColor=c.highlightColor),te=0;te<c.xaxes.length;++te)S(E,te+1).options=c.xaxes[te];for(te=0;te<c.yaxes.length;++te)S(p,te+1).options=c.yaxes[te];for(var et in D)c.hooks[et]&&c.hooks[et].length&&(D[et]=D[et].concat(c.hooks[et]));P(D.processOptions,[c])}function O(J){u=R(J),U(),N()}function R(J){for(var te=[],de=0;de<J.length;++de){var be=Q.extend(!0,{},c.series);J[de].data!=null?(be.data=J[de].data,delete J[de].data,Q.extend(!0,be,J[de]),J[de].data=be.data):be.data=J[de],te.push(be)}return te}function I(J,te){var de=J[te+"axis"];return typeof de=="object"&&(de=de.n),typeof de!="number"&&(de=1),de}function M(){return Q.grep(E.concat(p),function(J){return J})}function x(J){var te={},de,be;for(de=0;de<E.length;++de)be=E[de],be&&(te["x"+be.n]=be.c2p(J.left));for(de=0;de<p.length;++de)be=p[de],be&&(te["y"+be.n]=be.c2p(J.top));return te.x1!==void 0&&(te.x=te.x1),te.y1!==void 0&&(te.y=te.y1),te}function L(J){var te={},de,be,De;for(de=0;de<E.length;++de)if(be=E[de],be&&be.used&&(De="x"+be.n,J[De]==null&&be.n==1&&(De="x"),J[De]!=null)){te.left=be.p2c(J[De]);break}for(de=0;de<p.length;++de)if(be=p[de],be&&be.used&&(De="y"+be.n,J[De]==null&&be.n==1&&(De="y"),J[De]!=null)){te.top=be.p2c(J[De]);break}return te}function S(J,te){return J[te-1]||(J[te-1]={n:te,direction:J==E?"x":"y",options:Q.extend(!0,{},J==E?c.xaxis:c.yaxis)}),J[te-1]}function U(){var J=u.length,te=-1,de;for(de=0;de<u.length;++de){var be=u[de].color;be!=null&&(J--,typeof be=="number"&&be>te&&(te=be))}J<=te&&(J=te+1);var De,Ue=[],We=c.colors,et=We.length,ze=0;for(de=0;de<J;de++)De=Q.color.parse(We[de%et]||"#666"),de%et==0&&de&&(ze>=0?ze<.5?ze=-ze-.2:ze=0:ze=-ze),Ue[de]=De.scale("rgb",1+ze);var _e=0,qe;for(de=0;de<u.length;++de){if(qe=u[de],qe.color==null?(qe.color=Ue[_e].toString(),++_e):typeof qe.color=="number"&&(qe.color=Ue[qe.color].toString()),qe.lines.show==null){var at,lt=!0;for(at in qe)if(qe[at]&&qe[at].show){lt=!1;break}lt&&(qe.lines.show=!0)}qe.lines.zero==null&&(qe.lines.zero=!!qe.lines.fill),qe.xaxis=S(E,I(qe,"x")),qe.yaxis=S(p,I(qe,"y"))}}function N(){var J=Number.POSITIVE_INFINITY,te=Number.NEGATIVE_INFINITY,de=Number.MAX_VALUE,be,De,Ue,We,et,ze,_e,qe,at,lt,ft,yt,wt,zt,$t,Ie;function st(cn,dn,Sn){dn<cn.datamin&&dn!=-de&&(cn.datamin=dn),Sn>cn.datamax&&Sn!=de&&(cn.datamax=Sn)}for(Q.each(M(),function(cn,dn){dn.datamin=J,dn.datamax=te,dn.used=!1}),be=0;be<u.length;++be)ze=u[be],ze.datapoints={points:[]},P(D.processRawData,[ze,ze.data,ze.datapoints]);for(be=0;be<u.length;++be){if(ze=u[be],$t=ze.data,Ie=ze.datapoints.format,!Ie){if(Ie=[],Ie.push({x:!0,number:!0,required:!0}),Ie.push({y:!0,number:!0,required:!0}),ze.stack||ze.bars.show||ze.lines.show&&ze.lines.fill){var Mt=!!(ze.bars.show&&ze.bars.zero||ze.lines.show&&ze.lines.zero);Ie.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Mt}),ze.bars.horizontal&&(delete Ie[Ie.length-1].y,Ie[Ie.length-1].x=!0)}ze.datapoints.format=Ie}if(ze.datapoints.pointsize==null){ze.datapoints.pointsize=Ie.length,qe=ze.datapoints.pointsize,_e=ze.datapoints.points;var ct=ze.lines.show&&ze.lines.steps;for(ze.xaxis.used=ze.yaxis.used=!0,De=Ue=0;De<$t.length;++De,Ue+=qe){zt=$t[De];var nt=zt==null;if(!nt)for(We=0;We<qe;++We)yt=zt[We],wt=Ie[We],wt&&(wt.number&&yt!=null&&(yt=+yt,isNaN(yt)?yt=null:yt==1/0?yt=de:yt==-1/0&&(yt=-de)),yt==null&&(wt.required&&(nt=!0),wt.defaultValue!=null&&(yt=wt.defaultValue))),_e[Ue+We]=yt;if(nt)for(We=0;We<qe;++We)yt=_e[Ue+We],yt!=null&&(wt=Ie[We],wt.autoscale!==!1&&(wt.x&&st(ze.xaxis,yt,yt),wt.y&&st(ze.yaxis,yt,yt))),_e[Ue+We]=null;if(ct&&Ue>0&&(!nt||_e[Ue-qe]!=null)){for(We=0;We<qe;++We)_e[Ue+qe+We]=_e[Ue+We];_e[Ue+1]=_e[Ue-qe+1]||0,nt&&(_e[Ue]=zt[0]),Ue+=qe}}}}for(be=0;be<u.length;++be){if(ze=u[be],_e=ze.datapoints.points,qe=ze.datapoints.pointsize,ze.transform==="negative-Y")for(De=0;De<_e.length;De+=qe)_e[De]!=null&&(yt=_e[De+1],_e[De+1]=-yt);P(D.processDatapoints,[ze,ze.datapoints])}for(be=0;be<u.length;++be){ze=u[be],_e=ze.datapoints.points,qe=ze.datapoints.pointsize,Ie=ze.datapoints.format;var Ct=J,kt=J,Jt=te,tn=te;for(De=0;De<_e.length;De+=qe)if(_e[De]!=null)for(We=0;We<qe;++We)yt=_e[De+We],wt=Ie[We],!(!wt||wt.autoscale===!1||yt==de||yt==-de)&&(wt.x&&(yt<Ct&&(Ct=yt),yt>Jt&&(Jt=yt)),wt.y&&(yt<kt&&(kt=yt),yt>tn&&(tn=yt)));if(ze.bars.show){var Kt;switch(ze.bars.align){case"left":Kt=0;break;case"right":Kt=-ze.bars.barWidth;break;default:Kt=-ze.bars.barWidth/2}ze.bars.horizontal?(kt+=Kt,tn+=Kt+ze.bars.barWidth):(Ct+=Kt,Jt+=Kt+ze.bars.barWidth)}st(ze.xaxis,Ct,Jt),st(ze.yaxis,kt,tn)}Q.each(M(),function(cn,dn){dn.datamin==J&&(dn.datamin=null),dn.datamax==te&&(dn.datamax=null)})}function w(){i.find(".flot-temp-elem").remove(),i.css("position")=="static"&&i.css("position","relative"),l=new e("flot-base",i),d=new e("flot-overlay",i),m=l.context,v=d.context,f=Q(d.element).unbind();var J=i.data("plot");J&&(J.shutdown(),d.clear()),i.data("plot",C)}function G(){c.grid.hoverable&&(f.mousemove(le),f.bind("mouseleave",Re),Q(document).bind("touchend",Oe)),c.grid.clickable&&f.click(Ae),P(D.bindEvents,[f])}function _(){it&&clearTimeout(it),f.unbind("mousemove",le),f.unbind("mouseleave",Re),f.unbind("click",Ae),Q(document).unbind("touchend",Oe),P(D.shutdown,[f])}function K(J){function te(We){return We}var de,be,De=J.options.transform||te,Ue=J.options.inverseTransform;J.direction=="x"?(de=J.scale=s/Math.abs(De(J.max)-De(J.min)),be=Math.min(De(J.max),De(J.min))):(de=J.scale=y/Math.abs(De(J.max)-De(J.min)),de=-de,be=Math.max(De(J.max),De(J.min))),De==te?J.p2c=function(We){return(We-be)*de}:J.p2c=function(We){return(De(We)-be)*de},Ue?J.c2p=function(We){return Ue(be+We/de)}:J.c2p=function(We){return be+We/de}}function k(J){for(var te=J.options,de=J.ticks||[],be=te.labelWidth||0,De=te.labelHeight||0,Ue=be||(J.direction=="x"?Math.floor(l.width/(de.length||1)):null),We=J.direction+"Axis "+J.direction+J.n+"Axis",et="flot-"+J.direction+"-axis flot-"+J.direction+J.n+"-axis "+We,ze=te.font||"flot-tick-label tickLabel",_e=0;_e<de.length;++_e){var qe=de[_e];if(qe.label){var at=l.getTextInfo(et,qe.label,ze,null,Ue);be=Math.max(be,at.width+1),De=Math.max(De,at.height)}}J.labelWidth=te.labelWidth||be,J.labelHeight=te.labelHeight||De}function z(J){var te=J.labelWidth,de=J.labelHeight,be=J.options.position,De=J.direction==="x",Ue=J.options.tickLength,We=c.grid.axisMargin,et=c.grid.labelMargin,ze=c.grid.eventSectionHeight,_e=!0,qe=!0,at=!0,lt=!1;Q.each(De?E:p,function(ft,yt){yt&&(yt.show||yt.reserveSpace)&&(yt===J?lt=!0:yt.options.position===be&&(lt?qe=!1:_e=!1),lt||(at=!1))}),qe&&(We=0),Ue==null&&(Ue=at?"full":5),isNaN(+Ue)||(et+=+Ue),De?(de+=et,de+=ze,be=="bottom"?(h.bottom+=de+We,J.box={top:l.height-h.bottom,height:de}):(J.box={top:h.top+We,height:de},h.top+=de+We)):(te+=et,be=="left"?(J.box={left:h.left+We,width:te},h.left+=te+We):(h.right+=te+We,J.box={left:l.width-h.right,width:te})),J.position=be,J.tickLength=Ue,J.box.padding=et,J.box.eventSectionPadding=ze,J.innermost=_e}function W(J){J.direction=="x"?(J.box.left=h.left-J.labelWidth/2,J.box.width=l.width-h.left-h.right+J.labelWidth):(J.box.top=h.top-J.labelHeight/2,J.box.height=l.height-h.bottom-h.top+J.labelHeight)}function Z(){var J=c.grid.minBorderMargin,te,de;if(J==null)for(J=0,de=0;de<u.length;++de)J=Math.max(J,2*(u[de].points.radius+u[de].points.lineWidth/2));var be={left:J,right:J,top:J,bottom:J};Q.each(M(),function(De,Ue){Ue.reserveSpace&&Ue.ticks&&Ue.ticks.length&&(Ue.direction==="x"?(be.left=Math.max(be.left,Ue.labelWidth/2),be.right=Math.max(be.right,Ue.labelWidth/2)):(be.bottom=Math.max(be.bottom,Ue.labelHeight/2),be.top=Math.max(be.top,Ue.labelHeight/2)))}),h.left=Math.ceil(Math.max(be.left,h.left)),h.right=Math.ceil(Math.max(be.right,h.right)),h.top=Math.ceil(Math.max(be.top,h.top)),h.bottom=Math.ceil(Math.max(be.bottom,h.bottom))}function H(){var J,te=M(),de=c.grid.show;for(var be in h){var De=c.grid.margin||0;h[be]=typeof De=="number"?De:De[be]||0}P(D.processOffset,[h]);for(var be in h)typeof c.grid.borderWidth=="object"?h[be]+=de?c.grid.borderWidth[be]:0:h[be]+=de?c.grid.borderWidth:0;if(Q.each(te,function(et,ze){var _e=ze.options;ze.show=_e.show==null?ze.used:_e.show,ze.reserveSpace=_e.reserveSpace==null?ze.show:_e.reserveSpace,X(ze)}),P(D.processRange,[]),de){for(var Ue=Q.grep(te,function(et){return et.show||et.reserveSpace}),We=!1,J=0;J<2&&(Q.each(Ue,function(ze,_e){ne(_e),se(_e),We=re(_e,_e.ticks)||We,k(_e)}),We&&D.processRange.length>0);J++)P(D.processRange,[]),We=!1;for(J=Ue.length-1;J>=0;--J)z(Ue[J]);Z(),Q.each(Ue,function(et,ze){W(ze)})}s=l.width-h.left-h.right,y=l.height-h.bottom-h.top,Q.each(te,function(et,ze){K(ze)}),de&&fe(),ke()}function X(J){var te=J.options,de=+(te.min!=null?te.min:J.datamin),be=+(te.max!=null?te.max:J.datamax),De=be-de;if(De==0){var Ue=.25,We=Math.abs(be==0?1:be*Ue);te.min==null&&(de-=We),(te.max==null||te.min!=null)&&(be+=We)}else{var et=te.autoscaleMargin;et!=null&&(te.min==null&&(de-=De*et,de<0&&J.datamin!=null&&J.datamin>=0&&(de=0)),te.max==null&&(be+=De*et,be>0&&J.datamax!=null&&J.datamax<=0&&(be=0)))}J.min=de,J.max=be}function Y(J){if(J=Math.abs(String(J).replace(".","")),J==0)return 0;for(;J!=0&&J%10==0;)J/=10;return Math.floor(Math.log(J)/Math.LN10)+1}function ne(J){var te=J.options,de;typeof te.ticks=="number"&&te.ticks>0?de=te.ticks:de=.3*Math.sqrt(J.direction=="x"?l.width:l.height);var be=(J.max-J.min)/de,De=-Math.floor(Math.log(be)/Math.LN10),Ue=te.tickDecimals;Ue!=null&&De>Ue&&(De=Ue);var We=Math.pow(10,-De),et=be/We,ze;if(et<1.5?ze=1:et<3?(ze=2,et>2.25&&(Ue==null||De+1<=Ue)&&(ze=2.5,++De)):et<7.5?ze=5:ze=10,ze*=We,te.minTickSize!=null&&ze<te.minTickSize&&(ze=te.minTickSize),J.delta=be,J.tickDecimals=Math.max(0,Ue??De),J.tickSize=te.tickSize||ze,te.mode=="time"&&!J.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(J.tickGenerator||(J.tickGenerator=function(ft){var yt=[],wt=a(ft.min,ft.tickSize),zt=0,$t=Number.NaN,Ie;do Ie=$t,$t=wt+zt*ft.tickSize,yt.push($t),++zt;while($t<ft.max&&$t!=Ie);return yt},J.tickFormatter=function(ft,yt){var wt=yt.tickDecimals?Math.pow(10,yt.tickDecimals):1,zt=""+Math.round(ft*wt)/wt;if(yt.tickDecimals!=null){var $t=zt.indexOf("."),Ie=$t==-1?0:zt.length-$t-1;if(Ie<yt.tickDecimals)return(Ie?zt:zt+".")+(""+wt).substr(1,yt.tickDecimals-Ie)}return zt}),Q.isFunction(te.tickFormatter)&&(J.tickFormatter=function(ft,yt){return""+te.tickFormatter(ft,yt)}),te.alignTicksWithAxis!=null){var _e=(J.direction=="x"?E:p)[te.alignTicksWithAxis-1];if(_e&&_e.used&&_e!=J){var qe=J.tickGenerator(J);if(qe.length>0&&(te.min==null&&(J.min=Math.min(J.min,qe[0])),te.max==null&&qe.length>1&&(J.max=Math.max(J.max,qe[qe.length-1]))),J.tickGenerator=function(ft){var yt=[],wt,zt;for(zt=0;zt<_e.ticks.length;++zt)wt=(_e.ticks[zt].v-_e.min)/(_e.max-_e.min),wt=ft.min+wt*(ft.max-ft.min),yt.push(wt);return yt},!J.mode&&te.tickDecimals==null){var at=Math.max(0,-Math.floor(Math.log(J.delta)/Math.LN10)+1),lt=J.tickGenerator(J);lt.length>1&&/\..*0$/.test((lt[1]-lt[0]).toFixed(at))||(J.tickDecimals=at)}}}}function se(J){var te=J.options.ticks,de=[];te==null||typeof te=="number"&&te>0?de=J.tickGenerator(J):te&&(Q.isFunction(te)?de=te(J):de=te);var be,De;for(J.ticks=[],be=0;be<de.length;++be){var Ue=null,We=de[be];typeof We=="object"?(De=+We[0],We.length>1&&(Ue=We[1])):De=+We,Ue==null&&(Ue=J.tickFormatter(De,J)),isNaN(De)||J.ticks.push({v:De,label:Ue})}}function re(J,te){var de=!1;return J.options.autoscaleMargin&&te.length>0&&(J.options.min==null&&(J.min=Math.min(J.min,te[0].v),de=!0),J.options.max==null&&te.length>1&&(J.max=Math.max(J.max,te[te.length-1].v),de=!0)),de}function ge(){l.clear(),P(D.drawBackground,[m]);var J=c.grid;J.show&&J.backgroundColor&&me(),J.show&&!J.aboveData&&oe();for(var te=0;te<u.length;++te)P(D.drawSeries,[m,u[te]]),pe(u[te]);P(D.draw,[m]),J.show&&J.aboveData&&oe(),l.render(),Ne()}function q(J,te){for(var de,be,De,Ue,We=M(),et=0;et<We.length;++et)if(de=We[et],de.direction==te&&(Ue=te+de.n+"axis",!J[Ue]&&de.n==1&&(Ue=te+"axis"),J[Ue])){be=J[Ue].from,De=J[Ue].to;break}if(J[Ue]||(de=te=="x"?E[0]:p[0],be=J[te+"1"],De=J[te+"2"]),be!=null&&De!=null&&be>De){var ze=be;be=De,De=ze}return{from:be,to:De,axis:de}}function me(){m.save(),m.translate(h.left,h.top),m.fillStyle=ae(c.grid.backgroundColor,y,0,"rgba(255, 255, 255, 0)"),m.fillRect(0,0,s,y),m.restore()}function oe(){var J,te,de,be;m.save(),m.translate(h.left,h.top);var De=c.grid.markings;if(De)for(Q.isFunction(De)&&(te=C.getAxes(),te.xmin=te.xaxis.min,te.xmax=te.xaxis.max,te.ymin=te.yaxis.min,te.ymax=te.yaxis.max,De=De(te)),J=0;J<De.length;++J){var Ue=De[J],We=q(Ue,"x"),et=q(Ue,"y");if(We.from==null&&(We.from=We.axis.min),We.to==null&&(We.to=We.axis.max),et.from==null&&(et.from=et.axis.min),et.to==null&&(et.to=et.axis.max),!(We.to<We.axis.min||We.from>We.axis.max||et.to<et.axis.min||et.from>et.axis.max)){We.from=Math.max(We.from,We.axis.min),We.to=Math.min(We.to,We.axis.max),et.from=Math.max(et.from,et.axis.min),et.to=Math.min(et.to,et.axis.max);var ze=We.from===We.to,_e=et.from===et.to;if(!(ze&&_e))if(We.from=Math.floor(We.axis.p2c(We.from)),We.to=Math.floor(We.axis.p2c(We.to)),et.from=Math.floor(et.axis.p2c(et.from)),et.to=Math.floor(et.axis.p2c(et.to)),ze||_e){var qe=Ue.lineWidth||c.grid.markingsLineWidth,at=qe%2?.5:0;m.beginPath(),m.strokeStyle=Ue.color||c.grid.markingsColor,m.lineWidth=qe,ze?(m.moveTo(We.to+at,et.from),m.lineTo(We.to+at,et.to)):(m.moveTo(We.from,et.to+at),m.lineTo(We.to,et.to+at)),m.stroke()}else m.fillStyle=Ue.color||c.grid.markingsColor,m.fillRect(We.from,et.to,We.to-We.from,et.from-et.to)}}te=M(),de=c.grid.borderWidth;for(var lt=0;lt<te.length;++lt){var ft=te[lt],yt=ft.box,wt=ft.tickLength,zt,$t,Ie,st;if(!(!ft.show||ft.ticks.length==0)){for(m.lineWidth=1,ft.direction=="x"?(zt=0,wt=="full"?$t=ft.position=="top"?0:y:$t=yt.top-h.top+(ft.position=="top"?yt.height:0)):($t=0,wt=="full"?zt=ft.position=="left"?0:s:zt=yt.left-h.left+(ft.position=="left"?yt.width:0)),ft.innermost||(m.strokeStyle=ft.options.color,m.beginPath(),Ie=st=0,ft.direction=="x"?Ie=s+1:st=y+1,m.lineWidth==1&&(ft.direction=="x"?$t=Math.floor($t)+.5:zt=Math.floor(zt)+.5),m.moveTo(zt,$t),m.lineTo(zt+Ie,$t+st),m.stroke()),m.strokeStyle=ft.options.tickColor,m.beginPath(),J=0;J<ft.ticks.length;++J){var Mt=ft.ticks[J].v;Ie=st=0,!(isNaN(Mt)||Mt<ft.min||Mt>ft.max||wt=="full"&&(typeof de=="object"&&de[ft.position]>0||de>0)&&(Mt==ft.min||Mt==ft.max))&&(ft.direction=="x"?(zt=ft.p2c(Mt),st=wt=="full"?-y:wt,ft.position=="top"&&(st=-st)):($t=ft.p2c(Mt),Ie=wt=="full"?-s:wt,ft.position=="left"&&(Ie=-Ie)),m.lineWidth==1&&(ft.direction=="x"?zt=Math.floor(zt)+.5:$t=Math.floor($t)+.5),m.moveTo(zt,$t),m.lineTo(zt+Ie,$t+st))}m.stroke()}}de&&(be=c.grid.borderColor,typeof de=="object"||typeof be=="object"?(typeof de!="object"&&(de={top:de,right:de,bottom:de,left:de}),typeof be!="object"&&(be={top:be,right:be,bottom:be,left:be}),de.top>0&&(m.strokeStyle=be.top,m.lineWidth=de.top,m.beginPath(),m.moveTo(0-de.left,0-de.top/2),m.lineTo(s,0-de.top/2),m.stroke()),de.right>0&&(m.strokeStyle=be.right,m.lineWidth=de.right,m.beginPath(),m.moveTo(s+de.right/2,0-de.top),m.lineTo(s+de.right/2,y),m.stroke()),de.bottom>0&&(m.strokeStyle=be.bottom,m.lineWidth=de.bottom,m.beginPath(),m.moveTo(s+de.right,y+de.bottom/2),m.lineTo(0,y+de.bottom/2),m.stroke()),de.left>0&&(m.strokeStyle=be.left,m.lineWidth=de.left,m.beginPath(),m.moveTo(0-de.left/2,y+de.bottom),m.lineTo(0-de.left/2,0),m.stroke())):(m.lineWidth=de,m.strokeStyle=c.grid.borderColor,m.strokeRect(-de/2,-de/2,s+de,y+de))),m.restore()}function fe(){Q.each(M(),function(J,te){var de=te.box,be=te.direction+"Axis "+te.direction+te.n+"Axis",De="flot-"+te.direction+"-axis flot-"+te.direction+te.n+"-axis "+be,Ue=te.options.font||"flot-tick-label tickLabel",We,et,ze,_e,qe;if(l.removeText(De),!(!te.show||te.ticks.length==0))for(var at=0;at<te.ticks.length;++at)We=te.ticks[at],!(!We.label||We.v<te.min||We.v>te.max)&&(te.direction=="x"?(_e="center",et=h.left+te.p2c(We.v),te.position=="bottom"?ze=de.top+de.padding+de.eventSectionPadding:(ze=de.top+de.height-de.padding,qe="bottom")):(qe="middle",ze=h.top+te.p2c(We.v),te.position=="left"?(et=de.left+de.width-de.padding,_e="right"):et=de.left+de.padding),l.addText(De,et,ze,We.label,Ue,null,null,_e,qe))})}function ve(J){for(var te=[],de=null,be=null,De=J.datapoints,Ue=[],We=0;We<De.pointsize-2;We++)Ue.push(0);for(var et=0;et<De.points.length;et+=De.pointsize){var ze=De.points[et],_e=De.points[et+1];et===De.points.length-De.pointsize?be=null:be=De.points[et+De.pointsize],ze!==null&&_e!==null&&de===null&&be===null&&(te.push(ze),te.push(_e),te.push.apply(te,Ue)),de=ze}var qe=De.points;De.points=te,J.points.radius=J.lines.lineWidth/2,Pe(J),De.points=qe}function pe(J){J.lines.show&&(Me(J),!J.points.show&&!J.bars.show&&ve(J)),J.bars.show&&he(J),J.points.show&&Pe(J)}function Me(J){function te(et,ze,_e,qe,at){var lt=et.points,ft=et.pointsize,yt=null,wt=null;m.beginPath();for(var zt=ft;zt<lt.length;zt+=ft){var $t=lt[zt-ft],Ie=lt[zt-ft+1],st=lt[zt],Mt=lt[zt+1];if(!($t==null||st==null)){if(Ie<=Mt&&Ie<at.min){if(Mt<at.min)continue;$t=(at.min-Ie)/(Mt-Ie)*(st-$t)+$t,Ie=at.min}else if(Mt<=Ie&&Mt<at.min){if(Ie<at.min)continue;st=(at.min-Ie)/(Mt-Ie)*(st-$t)+$t,Mt=at.min}if(Ie>=Mt&&Ie>at.max){if(Mt>at.max)continue;$t=(at.max-Ie)/(Mt-Ie)*(st-$t)+$t,Ie=at.max}else if(Mt>=Ie&&Mt>at.max){if(Ie>at.max)continue;st=(at.max-Ie)/(Mt-Ie)*(st-$t)+$t,Mt=at.max}if($t<=st&&$t<qe.min){if(st<qe.min)continue;Ie=(qe.min-$t)/(st-$t)*(Mt-Ie)+Ie,$t=qe.min}else if(st<=$t&&st<qe.min){if($t<qe.min)continue;Mt=(qe.min-$t)/(st-$t)*(Mt-Ie)+Ie,st=qe.min}if($t>=st&&$t>qe.max){if(st>qe.max)continue;Ie=(qe.max-$t)/(st-$t)*(Mt-Ie)+Ie,$t=qe.max}else if(st>=$t&&st>qe.max){if($t>qe.max)continue;Mt=(qe.max-$t)/(st-$t)*(Mt-Ie)+Ie,st=qe.max}($t!=yt||Ie!=wt)&&m.moveTo(qe.p2c($t)+ze,at.p2c(Ie)+_e),yt=st,wt=Mt,m.lineTo(qe.p2c(st)+ze,at.p2c(Mt)+_e)}}m.stroke()}function de(et,ze,_e){for(var qe=et.points,at=et.pointsize,lt=Math.min(Math.max(0,_e.min),_e.max),ft=0,yt,wt=!1,zt=1,$t=0,Ie=0;!(at>0&&ft>qe.length+at);){ft+=at;var st=qe[ft-at],Mt=qe[ft-at+zt],ct=qe[ft],nt=qe[ft+zt];if(wt){if(at>0&&st!=null&&ct==null){Ie=ft,at=-at,zt=2;continue}if(at<0&&ft==$t+at){m.fill(),wt=!1,at=-at,zt=1,ft=$t=Ie+at;continue}}if(!(st==null||ct==null)){if(st<=ct&&st<ze.min){if(ct<ze.min)continue;Mt=(ze.min-st)/(ct-st)*(nt-Mt)+Mt,st=ze.min}else if(ct<=st&&ct<ze.min){if(st<ze.min)continue;nt=(ze.min-st)/(ct-st)*(nt-Mt)+Mt,ct=ze.min}if(st>=ct&&st>ze.max){if(ct>ze.max)continue;Mt=(ze.max-st)/(ct-st)*(nt-Mt)+Mt,st=ze.max}else if(ct>=st&&ct>ze.max){if(st>ze.max)continue;nt=(ze.max-st)/(ct-st)*(nt-Mt)+Mt,ct=ze.max}if(wt||(m.beginPath(),m.moveTo(ze.p2c(st),_e.p2c(lt)),wt=!0),Mt>=_e.max&&nt>=_e.max){m.lineTo(ze.p2c(st),_e.p2c(_e.max)),m.lineTo(ze.p2c(ct),_e.p2c(_e.max));continue}else if(Mt<=_e.min&&nt<=_e.min){m.lineTo(ze.p2c(st),_e.p2c(_e.min)),m.lineTo(ze.p2c(ct),_e.p2c(_e.min));continue}var Ct=st,kt=ct;Mt<=nt&&Mt<_e.min&&nt>=_e.min?(st=(_e.min-Mt)/(nt-Mt)*(ct-st)+st,Mt=_e.min):nt<=Mt&&nt<_e.min&&Mt>=_e.min&&(ct=(_e.min-Mt)/(nt-Mt)*(ct-st)+st,nt=_e.min),Mt>=nt&&Mt>_e.max&&nt<=_e.max?(st=(_e.max-Mt)/(nt-Mt)*(ct-st)+st,Mt=_e.max):nt>=Mt&&nt>_e.max&&Mt<=_e.max&&(ct=(_e.max-Mt)/(nt-Mt)*(ct-st)+st,nt=_e.max),st!=Ct&&m.lineTo(ze.p2c(Ct),_e.p2c(Mt)),m.lineTo(ze.p2c(st),_e.p2c(Mt)),m.lineTo(ze.p2c(ct),_e.p2c(nt)),ct!=kt&&(m.lineTo(ze.p2c(ct),_e.p2c(nt)),m.lineTo(ze.p2c(kt),_e.p2c(nt)))}}}m.save(),m.translate(h.left,h.top),m.lineJoin="round";var be=J.lines.lineWidth,De=J.shadowSize;if(be>0&&De>0){m.lineWidth=De,m.strokeStyle="rgba(0,0,0,0.1)";var Ue=Math.PI/18;te(J.datapoints,Math.sin(Ue)*(be/2+De/2),Math.cos(Ue)*(be/2+De/2),J.xaxis,J.yaxis),m.lineWidth=De/2,te(J.datapoints,Math.sin(Ue)*(be/2+De/4),Math.cos(Ue)*(be/2+De/4),J.xaxis,J.yaxis)}m.lineWidth=be,m.strokeStyle=J.color;var We=Le(J.lines,J.color,0,y);We&&(m.fillStyle=We,de(J.datapoints,J.xaxis,J.yaxis)),be>0&&te(J.datapoints,0,0,J.xaxis,J.yaxis),m.restore()}function Pe(J){function te(et,ze,_e,qe,at,lt,ft,yt){for(var wt=et.points,zt=et.pointsize,$t=0;$t<wt.length;$t+=zt){var Ie=wt[$t],st=wt[$t+1];Ie==null||Ie<lt.min||Ie>lt.max||st<ft.min||st>ft.max||(m.beginPath(),Ie=lt.p2c(Ie),st=ft.p2c(st)+qe,yt=="circle"?m.arc(Ie,st,ze,0,at?Math.PI:Math.PI*2,!1):yt(m,Ie,st,ze,at),m.closePath(),_e&&(m.fillStyle=_e,m.fill()),m.stroke())}}m.save(),m.translate(h.left,h.top);var de=J.points.lineWidth,be=J.shadowSize,De=J.points.radius,Ue=J.points.symbol;if(de==0&&(de=1e-4),de>0&&be>0){var We=be/2;m.lineWidth=We,m.strokeStyle="rgba(0,0,0,0.1)",te(J.datapoints,De,null,We+We/2,!0,J.xaxis,J.yaxis,Ue),m.strokeStyle="rgba(0,0,0,0.2)",te(J.datapoints,De,null,We/2,!0,J.xaxis,J.yaxis,Ue)}m.lineWidth=de,m.strokeStyle=J.color,te(J.datapoints,De,Le(J.points,J.color),0,!1,J.xaxis,J.yaxis,Ue),m.restore()}function Ee(J,te,de,be,De,Ue,We,et,ze,_e,qe){var at,lt,ft,yt,wt,zt,$t,Ie,st;_e?(Ie=zt=$t=!0,wt=!1,at=de,lt=J,yt=te+be,ft=te+De,lt<at&&(st=lt,lt=at,at=st,wt=!0,zt=!1)):(wt=zt=$t=!0,Ie=!1,at=J+be,lt=J+De,ft=de,yt=te,yt<ft&&(st=yt,yt=ft,ft=st,Ie=!0,$t=!1)),!(lt<We.min||at>We.max||yt<et.min||ft>et.max)&&(at<We.min&&(at=We.min,wt=!1),lt>We.max&&(lt=We.max,zt=!1),ft<et.min&&(ft=et.min,Ie=!1),yt>et.max&&(yt=et.max,$t=!1),at=We.p2c(at),ft=et.p2c(ft),lt=We.p2c(lt),yt=et.p2c(yt),Ue&&(ze.fillStyle=Ue(ft,yt),ze.fillRect(at,yt,lt-at,ft-yt)),qe>0&&(wt||zt||$t||Ie)&&(ze.beginPath(),ze.moveTo(at,ft),wt?ze.lineTo(at,yt):ze.moveTo(at,yt),$t?ze.lineTo(lt,yt):ze.moveTo(lt,yt),zt?ze.lineTo(lt,ft):ze.moveTo(lt,ft),Ie?ze.lineTo(at,ft):ze.moveTo(at,ft),ze.stroke()))}function he(J){function te(De,Ue,We,et,ze,_e){for(var qe=De.points,at=De.pointsize,lt=0;lt<qe.length;lt+=at)qe[lt]!=null&&Ee(qe[lt],qe[lt+1],qe[lt+2],Ue,We,et,ze,_e,m,J.bars.horizontal,J.bars.lineWidth)}m.save(),m.translate(h.left,h.top),m.lineWidth=J.bars.lineWidth,m.strokeStyle=J.color;var de;switch(J.bars.align){case"left":de=0;break;case"right":de=-J.bars.barWidth;break;default:de=-J.bars.barWidth/2}var be=J.bars.fill?function(De,Ue){return Le(J.bars,J.color,De,Ue)}:null;te(J.datapoints,de,de+J.bars.barWidth,be,J.xaxis,J.yaxis),m.restore()}function Le(J,te,de,be){var De=J.fill;if(!De)return null;if(J.fillColor)return ae(J.fillColor,de,be,te);var Ue=Q.color.parse(te);return Ue.a=typeof De=="number"?De:.4,Ue.normalize(),Ue.toString()}function ke(){if(c.legend.container!=null?Q.find(c.legend.container).html(""):i.find(".legend").remove(),!!c.legend.show){for(var J=[],te=[],de=!1,be=c.legend.labelFormatter,De,Ue,We=0;We<u.length;++We)De=u[We],De.label&&(Ue=be?be(De.label,De):De.label,Ue&&te.push({label:Ue,color:De.color}));if(c.legend.sorted)if(Q.isFunction(c.legend.sorted))te.sort(c.legend.sorted);else if(c.legend.sorted=="reverse")te.reverse();else{var et=c.legend.sorted!="descending";te.sort(function(zt,$t){return zt.label==$t.label?0:zt.label<$t.label!=et?1:-1})}for(var We=0;We<te.length;++We){var ze=te[We];We%c.legend.noColumns==0&&(de&&J.push("</tr>"),J.push("<tr>"),de=!0),J.push('<td class="legendColorBox"><div style="border:1px solid '+c.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+ze.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+ze.label+"</td>")}if(de&&J.push("</tr>"),J.length!=0){var _e='<table style="font-size:smaller;color:'+c.grid.color+'">'+J.join("")+"</table>";if(c.legend.container!=null)Q(c.legend.container).html(_e);else{var qe="",at=c.legend.position,lt=c.legend.margin;lt[0]==null&&(lt=[lt,lt]),at.charAt(0)=="n"?qe+="top:"+(lt[1]+h.top)+"px;":at.charAt(0)=="s"&&(qe+="bottom:"+(lt[1]+h.bottom)+"px;"),at.charAt(1)=="e"?qe+="right:"+(lt[0]+h.right)+"px;":at.charAt(1)=="w"&&(qe+="left:"+(lt[0]+h.left)+"px;");var ft=Q('<div class="legend">'+_e.replace('style="','style="position:absolute;'+qe+";")+"</div>").appendTo(i);if(c.legend.backgroundOpacity!=0){var yt=c.legend.backgroundColor;yt==null&&(yt=c.grid.backgroundColor,yt&&typeof yt=="string"?yt=Q.color.parse(yt):yt=Q.color.extract(ft,"background-color"),yt.a=1,yt=yt.toString());var wt=ft.children();Q('<div style="position:absolute;width:'+wt.width()+"px;height:"+wt.height()+"px;"+qe+"background-color:"+yt+';"> </div>').prependTo(ft).css("opacity",c.legend.backgroundOpacity)}}}}}var ot=[],it=null;function ce(J,te,de){var be=c.grid.mouseActiveRadius,De=be*be+1,Ue=null,We=!1,et,ze,_e;for(et=u.length-1;et>=0;--et)if(de(u[et])){var qe=u[et],at=qe.xaxis,lt=qe.yaxis,ft=qe.datapoints.points,yt=at.c2p(J),wt=lt.c2p(te),zt=be/at.scale,$t=be/lt.scale;if(_e=qe.datapoints.pointsize,at.options.inverseTransform&&(zt=Number.MAX_VALUE),lt.options.inverseTransform&&($t=Number.MAX_VALUE),qe.lines.show||qe.points.show)for(ze=0;ze<ft.length;ze+=_e){var Ie=ft[ze],st=ft[ze+1];if(Ie!=null&&!(Ie-yt>zt||Ie-yt<-zt||st-wt>$t||st-wt<-$t)){var Mt=Math.abs(at.p2c(Ie)-J),ct=Math.abs(lt.p2c(st)-te),nt=Mt*Mt+ct*ct;nt<De&&(De=nt,Ue=[et,ze/_e])}}if(qe.bars.show&&!Ue){var Ct,kt;switch(qe.bars.align){case"left":Ct=0;break;case"right":Ct=-qe.bars.barWidth;break;default:Ct=-qe.bars.barWidth/2}for(kt=Ct+qe.bars.barWidth,ze=0;ze<ft.length;ze+=_e){var Ie=ft[ze],st=ft[ze+1],Jt=ft[ze+2];Ie!=null&&(u[et].bars.horizontal?yt<=Math.max(Jt,Ie)&&yt>=Math.min(Jt,Ie)&&wt>=st+Ct&&wt<=st+kt:yt>=Ie+Ct&&yt<=Ie+kt&&wt>=Math.min(Jt,st)&&wt<=Math.max(Jt,st))&&(Ue=[et,ze/_e])}}}return Ue?(et=Ue[0],ze=Ue[1],_e=u[et].datapoints.pointsize,{datapoint:u[et].datapoints.points.slice(ze*_e,(ze+1)*_e),dataIndex:ze,series:u[et],seriesIndex:et}):null}function le(J){c.grid.hoverable&&Ye("plothover",J,function(te){return te.hoverable!=!1})}function Re(J){c.grid.hoverable&&Ye("plothover",J,function(te){return!1})}function Ae(J){C.isSelecting||Ye("plotclick",J,function(te){return te.clickable!=!1})}function Oe(J){if(J.cancelable){if(!f.is(J.target)&&f.has(J.target).length===0){Ye("plotleave",J,function(te){});return}le($e(J)),J.preventDefault()}}function $e(J){if(!J||!J.originalEvent||J.pageX&&J.pageY)return J;var te=J.originalEvent;if(te.changedTouches.length===0)return J;var de=te.changedTouches[0];return J.pageX=de.pageX,J.pageY=de.pageY,J}function Ye(J,te,de){var be=f.offset(),De=te.pageX-be.left-h.left,Ue=te.pageY-be.top-h.top,We=x({left:De,top:Ue});We.pageX=te.pageX,We.pageY=te.pageY,We.ctrlKey=te.ctrlKey,We.metaKey=te.metaKey;var et=ce(De,Ue,de);if(et&&(et.pageX=parseInt(et.series.xaxis.p2c(et.datapoint[0])+be.left+h.left,10),et.pageY=parseInt(et.series.yaxis.p2c(et.datapoint[1])+be.top+h.top,10)),c.grid.autoHighlight){for(var ze=0;ze<ot.length;++ze){var _e=ot[ze];_e.auto==J&&!(et&&_e.series==et.series&&_e.point[0]==et.datapoint[0]&&_e.point[1]==et.datapoint[1])&&Fe(_e.series,_e.point)}et&&ut(et.series,et.datapoint,J)}i.trigger(J,[We,et])}function Ne(){var J=c.interaction.redrawOverlayInterval;if(J==-1){je();return}it||(it=setTimeout(je,J))}function je(){it=null,v.save(),d.clear(),v.translate(h.left,h.top);var J,te;for(J=0;J<ot.length;++J)te=ot[J],te.series.bars.show?tt(te.series,te.point):Ve(te.series,te.point);v.restore(),P(D.drawOverlay,[v])}function ut(J,te,de){if(typeof J=="number"&&(J=u[J]),typeof te=="number"){var be=J.datapoints.pointsize;te=J.datapoints.points.slice(be*te,be*(te+1))}var De=Te(J,te);De==-1?(ot.push({series:J,point:te,auto:de}),Ne()):de||(ot[De].auto=!1)}function Fe(J,te){if(J==null&&te==null){ot=[],Ne();return}if(typeof J=="number"&&(J=u[J]),typeof te=="number"){var de=J.datapoints.pointsize;te=J.datapoints.points.slice(de*te,de*(te+1))}var be=Te(J,te);be!=-1&&(ot.splice(be,1),Ne())}function Te(J,te){for(var de=0;de<ot.length;++de){var be=ot[de];if(be.series==J&&be.point[0]==te[0]&&be.point[1]==te[1])return de}return-1}function Ve(J,te){var de=te[0],be=te[1],De=J.xaxis,Ue=J.yaxis,We=typeof J.highlightColor=="string"?J.highlightColor:Q.color.parse(J.color).scale("a",.5).toString();if(!(de<De.min||de>De.max||be<Ue.min||be>Ue.max)){var et=J.points.radius+J.points.lineWidth/2;v.lineWidth=et,v.strokeStyle=We;var ze=1.5*et;de=De.p2c(de),be=Ue.p2c(be),v.beginPath(),J.points.symbol=="circle"?v.arc(de,be,ze,0,2*Math.PI,!1):J.points.symbol(v,de,be,ze,!1),v.closePath(),v.stroke()}}function tt(J,te){var de=typeof J.highlightColor=="string"?J.highlightColor:Q.color.parse(J.color).scale("a",.5).toString(),be=de,De;switch(J.bars.align){case"left":De=0;break;case"right":De=-J.bars.barWidth;break;default:De=-J.bars.barWidth/2}v.lineWidth=J.bars.lineWidth,v.strokeStyle=de,Ee(te[0],te[1],te[2]||0,De,De+J.bars.barWidth,function(){return be},J.xaxis,J.yaxis,v,J.bars.horizontal,J.bars.lineWidth)}function ae(J,te,de,be){if(typeof J=="string")return J;for(var De=m.createLinearGradient(0,de,0,te),Ue=0,We=J.colors.length;Ue<We;++Ue){var et=J.colors[Ue];if(typeof et!="string"){var ze=Q.color.parse(be);et.brightness!=null&&(ze=ze.scale("rgb",et.brightness)),et.opacity!=null&&(ze.a*=et.opacity),et=ze.toString()}De.addColorStop(Ue/(We-1),et)}return De}}Q.plot=function(i,r,o){var g=new n(Q(i),r,o,Q.plot.plugins);return g},Q.plot.version="0.8.3",Q.plot.plugins=[],Q.fn.plot=function(i,r){return this.each(function(){Q.plot(this,i,r)})};function a(i,r){return r*Math.floor(i/r)}}(jQuery)},4027:()=>{(function(Q){function A(e){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},i=null;function r(h){n.active&&(f(h),e.getPlaceholder().trigger("plotselecting",[u()]))}function o(h){h.which==1&&(document.body.focus(),document.onselectstart!==void 0&&a.onselectstart==null&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&a.ondrag==null&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),d(n.first,h),n.active=!0,i=function(s){g(s)},Q(document).one("mouseup",i))}function g(h){return i=null,document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag),n.active=!1,f(h),p()?c(h):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function u(){if(!p()||!n.show)return null;var h={},s=n.first,y=n.second,D=e.getAxes(),C=!0;return Q.each(D,function(P,b){b.used&&(anyUsed=!1)}),Q.each(D,function(P,b){if(b.used||C){var T=b.c2p(s[b.direction]),O=b.c2p(y[b.direction]);h[P]={from:Math.min(T,O),to:Math.max(T,O)}}}),h}function c(h){var s=u();s.ctrlKey=h.ctrlKey,s.metaKey=h.metaKey,e.getPlaceholder().trigger("plotselected",[s]),s.xaxis&&s.yaxis&&e.getPlaceholder().trigger("selected",[{x1:s.xaxis.from,y1:s.yaxis.from,x2:s.xaxis.to,y2:s.yaxis.to}])}function l(h,s,y){return s<h?h:s>y?y:s}function d(h,s){var y=e.getOptions(),D=e.getPlaceholder().offset(),C=e.getPlotOffset();h.x=l(0,s.pageX-D.left-C.left,e.width()),h.y=l(0,s.pageY-D.top-C.top,e.height()),y.selection.mode=="y"&&(h.x=h==n.first?0:e.width()),y.selection.mode=="x"&&(h.y=h==n.first?0:e.height())}function f(h){h.pageX!=null&&(d(n.second,h),p()?(e.isSelecting=!0,n.show=!0,e.triggerRedrawOverlay()):m(!0))}function m(h){n.show&&(n.show=!1,e.triggerRedrawOverlay(),h||e.getPlaceholder().trigger("plotunselected",[]))}function v(h,s){var y,D,C,P,b=e.getAxes();for(var T in b)if(y=b[T],y.direction==s&&(P=s+y.n+"axis",!h[P]&&y.n==1&&(P=s+"axis"),h[P])){D=h[P].from,C=h[P].to;break}if(h[P]||(y=s=="x"?e.getXAxes()[0]:e.getYAxes()[0],D=h[s+"1"],C=h[s+"2"]),D!=null&&C!=null&&D>C){var O=D;D=C,C=O}return{from:D,to:C,axis:y}}function E(h,s){var y,D,C=e.getOptions();C.selection.mode=="y"?(n.first.x=0,n.second.x=e.width()):(D=v(h,"x"),n.first.x=D.axis.p2c(D.from),n.second.x=D.axis.p2c(D.to)),C.selection.mode=="x"?(n.first.y=0,n.second.y=e.height()):(D=v(h,"y"),n.first.y=D.axis.p2c(D.from),n.second.y=D.axis.p2c(D.to)),n.show=!0,e.triggerRedrawOverlay(),!s&&p()&&c()}function p(){var h=e.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=h&&Math.abs(n.second.y-n.first.y)>=h}e.clearSelection=m,e.setSelection=E,e.getSelection=u,e.hooks.bindEvents.push(function(h,s){var y=h.getOptions();y.selection.mode!=null&&(s.mousemove(r),s.mousedown(o))}),e.hooks.drawOverlay.push(function(h,s){if(n.show&&p()){var y=h.getPlotOffset(),D=h.getOptions();s.save(),s.translate(y.left,y.top);var C=Q.color.parse(D.selection.color);s.strokeStyle=C.scale("a",.8).toString(),s.lineWidth=1,s.lineJoin=D.selection.shape,s.fillStyle=C.scale("a",.4).toString();var P=Math.min(n.first.x,n.second.x)+.5,b=Math.min(n.first.y,n.second.y)+.5,T=Math.abs(n.second.x-n.first.x)-1,O=Math.abs(n.second.y-n.first.y)-1;s.fillRect(P,b,T,O),s.strokeRect(P,b,T,O),s.restore()}}),e.hooks.shutdown.push(function(h,s){s.unbind("mousemove",r),s.unbind("mousedown",o),i&&(Q(document).unbind("mouseup",i),document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag))})}Q.plot.plugins.push({init:A,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(Q){var A={series:{stack:null}};function e(n){function a(r,o){for(var g=null,u=0;u<o.length&&r!=o[u];++u)o[u].stack==r.stack&&(g=o[u]);return g}function i(r,o,g){if(!(o.stack==null||o.stack===!1)){var u=a(o,r.getData());if(u){for(var c=g.pointsize,l=g.points,d=u.datapoints.pointsize,f=u.datapoints.points,m=[],v,E,p,h,s,y,D=o.lines.show,C=o.bars.horizontal,P=c>2&&(C?g.format[2].x:g.format[2].y),b=D&&o.lines.steps,T=C?1:0,O=C?0:1,R=0,I=0,M,x;!(R>=l.length&&I>=f.length);){if(M=m.length,R<l.length&&l[R]==null){for(x=0;x<c;++x)m.push(l[R+x]);R+=c}else if(R>=l.length){for(x=0;x<c;++x)m.push(f[I+x]);P&&(m[M+2]=f[I+O]),I+=d}else if(I>=f.length){for(x=0;x<c;++x)m.push(l[R+x]);R+=c}else if(I<f.length&&f[I]==null)I+=d;else{if(v=l[R+T],E=l[R+O],h=f[I+T],s=f[I+O],y=0,v==h){for(x=0;x<c;++x)m.push(l[R+x]);m[M+O]+=s,y=s,R+=c,I+=d}else if(v>h){if(R==0){for(x=0;x<c;++x)m.push(f[I+x]);y=s}if(R>0&&l[R-c]!=null){for(p=0,m.push(h),m.push(p+s),x=2;x<c;++x)m.push(l[R+x]);y=s}I+=d}else{for(x=0;x<c;++x)m.push(l[R+x]);I>0&&f[I-d]!=null&&(y=0),m[M+O]+=y,R+=c}fromgap=!1,M!=m.length&&P&&(m[M+2]=y)}if(b&&M!=m.length&&M>0&&m[M]!=null&&m[M]!=m[M-c]&&m[M+1]!=m[M-c+1]){for(x=0;x<c;++x)m[M+c+x]=m[M+x];m[M+1]=m[M-c+1]}}g.points=m}}}n.hooks.processDatapoints.push(i)}Q.plot.plugins.push({init:e,options:A,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(Q){var A={series:{stackpercent:null}};function e(n){var a={},i=!1,r={};function o(c,l,d,f){if(i||(i=!0,r=g(c.getData())),l.stackpercent==!0){var m=d.length;l.percents=[];var v=0,E=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(v=1,E=0);for(var p=0;p<m;p++){var h=r[d[p][v]+""];h>0?l.percents.push(d[p][E]*100/h):l.percents.push(0)}}}function g(c){var l=c.length,d={};if(l>0){for(var f=0;f<l;f++)if(c[f].stackpercent){var m=0,v=1;c[f].bars&&c[f].bars.horizontal&&c[f].bars.horizontal===!0&&(m=1,v=0);for(var E=c[f].data.length,p=0;p<E;p++){var h=0;c[f].data[p][1]!=null&&(h=c[f].data[p][v]),d[c[f].data[p][m]+""]?d[c[f].data[p][m]+""]+=h:d[c[f].data[p][m]+""]=h}}}return d}function u(c,l,d){if(l.stackpercent){i||(r=g(c.getData()));var f=[],m=0,v=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(m=1,v=0);for(var E=0;E<d.points.length;E+=3)a[d.points[E+m]]||(a[d.points[E+m]]=0),f[E+m]=d.points[E+m],f[E+v]=d.points[E+v]+a[d.points[E+m]],f[E+2]=a[d.points[E+m]],a[d.points[E+m]]+=d.points[E+v],r[f[E+m]+""]>0?(f[E+v]=f[E+v]*100/r[f[E+m]+""],f[E+2]=f[E+2]*100/r[f[E+m]+""]):(f[E+v]=0,f[E+2]=0);d.points=f}}n.hooks.processRawData.push(o),n.hooks.processDatapoints.push(u)}Q.plot.plugins.push({init:e,options:A,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(Q){var A={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(l,d){return d*Math.floor(l/d)}function n(l,d,f,m){if(typeof l.strftime=="function")return l.strftime(d);var v=function(P,b){return P=""+P,b=""+(b??"0"),P.length==1?b+P:P},E=[],p=!1,h=l.getHours(),s=h<12;f==null&&(f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),m==null&&(m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var y;h>12?y=h-12:h==0?y=12:y=h;for(var D=0;D<d.length;++D){var C=d.charAt(D);if(p){switch(C){case"a":C=""+m[l.getDay()];break;case"b":C=""+f[l.getMonth()];break;case"d":C=v(l.getDate(),"");break;case"e":C=v(l.getDate()," ");break;case"h":case"H":C=v(h);break;case"I":C=v(y);break;case"l":C=v(y," ");break;case"m":C=v(l.getMonth()+1,"");break;case"M":C=v(l.getMinutes());break;case"q":C=""+(Math.floor(l.getMonth()/3)+1);break;case"S":C=v(l.getSeconds());break;case"y":C=v(l.getFullYear()%100);break;case"Y":C=""+l.getFullYear();break;case"p":C=s?"am":"pm";break;case"P":C=s?"AM":"PM";break;case"w":C=""+l.getDay();break}E.push(C),p=!1}else C=="%"?p=!0:E.push(C)}return E.join("")}function a(l){function d(E,p,h,s){E[p]=function(){return h[s].apply(h,arguments)}}var f={date:l};l.strftime!=null&&d(f,"strftime",l,"strftime"),d(f,"getTime",l,"getTime"),d(f,"setTime",l,"setTime");for(var m=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],v=0;v<m.length;v++)d(f,"get"+m[v],l,"getUTC"+m[v]),d(f,"set"+m[v],l,"setUTC"+m[v]);return f}function i(l,d){if(d.timezone=="browser")return new Date(l);if(!d.timezone||d.timezone=="utc")return a(new Date(l));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var f=new timezoneJS.Date;return f.setTimezone(d.timezone),f.setTime(l),f}else return a(new Date(l))}var r={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],g=o.concat([[3,"month"],[6,"month"],[1,"year"]]),u=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function c(l){l.hooks.processOptions.push(function(d,f){Q.each(d.getAxes(),function(m,v){var E=v.options;E.mode=="time"&&(v.tickGenerator=function(p){var h=[],s=i(p.min,E),y=0,D=E.tickSize&&E.tickSize[1]==="quarter"||E.minTickSize&&E.minTickSize[1]==="quarter"?u:g;E.minTickSize!=null&&(typeof E.tickSize=="number"?y=E.tickSize:y=E.minTickSize[0]*r[E.minTickSize[1]]);for(var C=0;C<D.length-1&&!(p.delta<(D[C][0]*r[D[C][1]]+D[C+1][0]*r[D[C+1][1]])/2&&D[C][0]*r[D[C][1]]>=y);++C);var P=D[C][0],b=D[C][1];if(b=="year"){if(E.minTickSize!=null&&E.minTickSize[1]=="year")P=Math.floor(E.minTickSize[0]);else{var T=Math.pow(10,Math.floor(Math.log(p.delta/r.year)/Math.LN10)),O=p.delta/r.year/T;O<1.5?P=1:O<3?P=2:O<7.5?P=5:P=10,P*=T}P<1&&(P=1)}p.tickSize=E.tickSize||[P,b];var R=p.tickSize[0];b=p.tickSize[1];var I=R*r[b];b=="second"?s.setSeconds(e(s.getSeconds(),R)):b=="minute"?s.setMinutes(e(s.getMinutes(),R)):b=="hour"?s.setHours(e(s.getHours(),R)):b=="month"?s.setMonth(e(s.getMonth(),R)):b=="quarter"?s.setMonth(3*e(s.getMonth()/3,R)):b=="year"&&s.setFullYear(e(s.getFullYear(),R)),s.setMilliseconds(0),I>=r.minute&&s.setSeconds(0),I>=r.hour&&s.setMinutes(0),I>=r.day&&s.setHours(0),I>=r.day*4&&s.setDate(1),I>=r.month*2&&s.setMonth(e(s.getMonth(),3)),I>=r.quarter*2&&s.setMonth(e(s.getMonth(),6)),I>=r.year&&s.setMonth(0);var M=0,x=Number.NaN,L;do if(L=x,x=s.getTime(),h.push(x),b=="month"||b=="quarter")if(R<1){s.setDate(1);var S=s.getTime();s.setMonth(s.getMonth()+(b=="quarter"?3:1));var U=s.getTime();s.setTime(x+M*r.hour+(U-S)*R),M=s.getHours(),s.setHours(0)}else s.setMonth(s.getMonth()+R*(b=="quarter"?3:1));else b=="year"?s.setFullYear(s.getFullYear()+R):s.setTime(x+I);while(x<p.max&&x!=L);return h},v.tickFormatter=function(p,h){var s=i(p,h.options);if(E.timeformat!=null)return n(s,E.timeformat,E.monthNames,E.dayNames);var y=h.options.tickSize&&h.options.tickSize[1]=="quarter"||h.options.minTickSize&&h.options.minTickSize[1]=="quarter",D=h.tickSize[0]*r[h.tickSize[1]],C=h.max-h.min,P=E.twelveHourClock?" %p":"",b=E.twelveHourClock?"%I":"%H",T;D<r.minute?T=b+":%M:%S"+P:D<r.day?C<2*r.day?T=b+":%M"+P:T="%b %d "+b+":%M"+P:D<r.month?T="%b %d":y&&D<r.quarter||!y&&D<r.year?C<r.year?T="%b":T="%b %Y":y&&D<r.year?C<r.year?T="Q%q":T="Q%q %Y":T="%Y";var O=n(s,T,E.monthNames,E.dayNames);return O})})})}Q.plot.plugins.push({init:c,options:A,name:"time",version:"1.0"}),Q.plot.formatDate=n})(jQuery)}}]);

//# sourceMappingURL=7787.b4bb44a17209127311a8.js.map