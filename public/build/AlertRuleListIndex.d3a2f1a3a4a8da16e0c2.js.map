{"version":3,"file":"AlertRuleListIndex.d3a2f1a3a4a8da16e0c2.js","mappings":"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","sources":["webpack://grafana/./public/app/core/hooks/useCleanup.ts","webpack://grafana/./public/app/features/alerting/unified/components/rules/NoRulesCTA.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleListErrors.tsx","webpack://grafana/./public/app/features/alerting/unified/components/export/GrafanaRuleFolderExporter.tsx","webpack://grafana/./public/app/features/alerting/unified/components/export/GrafanaRuleGroupExporter.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/ReorderRuleGroupModal.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RulesGroup.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/useCombinedGroupNamespace.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/CloudRules.tsx","webpack://grafana/./public/app/features/alerting/unified/components/export/GrafanaRulesExporter.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/GrafanaRules.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleListGroupView.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleListStateSection.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleListStateView.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useFilteredRules.ts","webpack://grafana/./public/app/features/alerting/unified/components/rules/MultipleDataSourcePicker.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RulesFilter.tsx","webpack://grafana/./public/app/features/alerting/unified/RuleList.tsx","webpack://grafana/./public/app/features/alerting/unified/components/Authorize.tsx","webpack://grafana/./public/app/features/alerting/unified/components/export/FileExportPreview.tsx","webpack://grafana/./public/app/features/alerting/unified/components/export/GrafanaExportDrawer.tsx","webpack://grafana/./public/app/features/alerting/unified/components/export/providers.ts","webpack://grafana/./public/app/features/alerting/unified/components/rule-editor/NeedHelpInfo.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rule-editor/RuleEditorSection.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rule-editor/RuleInspector.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/ActionIcon.tsx","webpack://grafana/./node_modules/react-use/esm/useInterval.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nimport { useDispatch } from 'app/types';\n\nimport { cleanUpAction, CleanUpAction } from '../actions/cleanUp';\n\nexport function useCleanup(cleanupAction: CleanUpAction) {\n  const dispatch = useDispatch();\n  //bit of a hack to unburden user from having to wrap stateSelcetor in a useCallback. Otherwise cleanup would happen on every render\n  const selectorRef = useRef(cleanupAction);\n  selectorRef.current = cleanupAction;\n  useEffect(() => {\n    return () => {\n      dispatch(cleanUpAction({ cleanupAction: selectorRef.current }));\n    };\n  }, [dispatch]);\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data/src/themes';\nimport { CallToActionCard, useStyles2, Stack } from '@grafana/ui';\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\n\nimport { logInfo, LogMessages } from '../../Analytics';\nimport { useRulesAccess } from '../../utils/accessControlHooks';\n\nexport const NoRulesSplash = () => {\n  const { canCreateGrafanaRules, canCreateCloudRules } = useRulesAccess();\n  const styles = useStyles2(getStyles);\n  if (canCreateGrafanaRules || canCreateCloudRules) {\n    return (\n      <div>\n        <p>{\"You haven't created any alert rules yet\"}</p>\n        <Stack gap={1}>\n          <div className={styles.newRuleCard}>\n            <EmptyListCTA\n              title=\"\"\n              buttonIcon=\"bell\"\n              buttonLink={'alerting/new/alerting'}\n              buttonTitle=\"New alert rule\"\n              proTip=\"you can also create alert rules from existing panels and queries.\"\n              proTipLink=\"https://grafana.com/docs/\"\n              proTipLinkTitle=\"Learn more\"\n              proTipTarget=\"_blank\"\n              onClick={() => logInfo(LogMessages.alertRuleFromScratch)}\n            />\n          </div>\n\n          <div className={styles.newRuleCard}>\n            <EmptyListCTA\n              title=\"\"\n              buttonIcon=\"plus\"\n              buttonLink={'alerting/new/recording'}\n              buttonTitle=\"New recording rule\"\n              onClick={() => logInfo(LogMessages.recordingRuleFromScratch)}\n            />\n          </div>\n        </Stack>\n      </div>\n    );\n  }\n  return <CallToActionCard message=\"No rules exist yet.\" callToActionElement={<div />} />;\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  newRuleCard: css`\n    width: calc(50% - ${theme.spacing(1)});\n\n    > div {\n      height: 100%;\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport { SerializedError } from '@reduxjs/toolkit';\nimport pluralize from 'pluralize';\nimport React, { useMemo, ReactElement, useState, FC } from 'react';\nimport { useLocalStorage } from 'react-use';\n\nimport { DataSourceInstanceSettings, GrafanaTheme2 } from '@grafana/data';\nimport { Alert, Button, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { getRulesDataSources, GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\nimport { makeDataSourceLink } from '../../utils/misc';\nimport { isRulerNotSupportedResponse } from '../../utils/rules';\n\nexport function RuleListErrors(): ReactElement {\n  const [expanded, setExpanded] = useState(false);\n  const [closed, setClosed] = useLocalStorage('grafana.unifiedalerting.hideErrors', false);\n  const dataSourceConfigRequests = useUnifiedAlertingSelector((state) => state.dataSources);\n  const promRuleRequests = useUnifiedAlertingSelector((state) => state.promRules);\n  const rulerRuleRequests = useUnifiedAlertingSelector((state) => state.rulerRules);\n  const styles = useStyles2(getStyles);\n\n  const errors = useMemo((): JSX.Element[] => {\n    const [dataSourceConfigErrors, promRequestErrors, rulerRequestErrors] = [\n      dataSourceConfigRequests,\n      promRuleRequests,\n      rulerRuleRequests,\n    ].map((requests) =>\n      getRulesDataSources().reduce<Array<{ error: SerializedError; dataSource: DataSourceInstanceSettings }>>(\n        (result, dataSource) => {\n          const error = requests[dataSource.name]?.error;\n          if (requests[dataSource.name] && error && !isRulerNotSupportedResponse(requests[dataSource.name])) {\n            return [...result, { dataSource, error }];\n          }\n          return result;\n        },\n        []\n      )\n    );\n    const grafanaPromError = promRuleRequests[GRAFANA_RULES_SOURCE_NAME]?.error;\n    const grafanaRulerError = rulerRuleRequests[GRAFANA_RULES_SOURCE_NAME]?.error;\n\n    const result: JSX.Element[] = [];\n\n    if (grafanaPromError) {\n      result.push(<>Failed to load Grafana rules state: {grafanaPromError.message || 'Unknown error.'}</>);\n    }\n    if (grafanaRulerError) {\n      result.push(<>Failed to load Grafana rules config: {grafanaRulerError.message || 'Unknown error.'}</>);\n    }\n\n    dataSourceConfigErrors.forEach(({ dataSource, error }) => {\n      result.push(\n        <>\n          Failed to load the data source configuration for{' '}\n          <a href={makeDataSourceLink(dataSource.uid)} className={styles.dsLink}>\n            {dataSource.name}\n          </a>\n          : {error.message || 'Unknown error.'}\n        </>\n      );\n    });\n\n    promRequestErrors.forEach(({ dataSource, error }) =>\n      result.push(\n        <>\n          Failed to load rules state from{' '}\n          <a href={makeDataSourceLink(dataSource.uid)} className={styles.dsLink}>\n            {dataSource.name}\n          </a>\n          : {error.message || 'Unknown error.'}\n        </>\n      )\n    );\n\n    rulerRequestErrors.forEach(({ dataSource, error }) =>\n      result.push(\n        <>\n          Failed to load rules config from{' '}\n          <a href={makeDataSourceLink(dataSource.uid)} className={styles.dsLink}>\n            {dataSource.name}\n          </a>\n          : {error.message || 'Unknown error.'}\n        </>\n      )\n    );\n\n    return result;\n  }, [dataSourceConfigRequests, promRuleRequests, rulerRuleRequests, styles.dsLink]);\n\n  return (\n    <>\n      {!!errors.length && closed && (\n        <ErrorSummaryButton count={errors.length} onClick={() => setClosed((closed) => !closed)} />\n      )}\n      {!!errors.length && !closed && (\n        <Alert\n          data-testid=\"cloud-rulessource-errors\"\n          title=\"Errors loading rules\"\n          severity=\"error\"\n          onRemove={() => setClosed(true)}\n        >\n          {expanded && errors.map((item, idx) => <div key={idx}>{item}</div>)}\n          {!expanded && (\n            <>\n              <div>{errors[0]}</div>\n              {errors.length >= 2 && (\n                <Button\n                  className={styles.moreButton}\n                  fill=\"text\"\n                  icon=\"angle-right\"\n                  size=\"sm\"\n                  onClick={() => setExpanded(true)}\n                >\n                  {errors.length - 1} more {pluralize('error', errors.length - 1)}\n                </Button>\n              )}\n            </>\n          )}\n        </Alert>\n      )}\n    </>\n  );\n}\n\ninterface ErrorSummaryProps {\n  count: number;\n  onClick: () => void;\n}\n\nconst ErrorSummaryButton: FC<ErrorSummaryProps> = ({ count, onClick }) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.floatRight}>\n      <Tooltip content=\"Show all errors\" placement=\"bottom\">\n        <Button fill=\"text\" variant=\"destructive\" icon=\"exclamation-triangle\" onClick={onClick}>\n          {count > 1 ? <>{count} errors</> : <>1 error</>}\n        </Button>\n      </Tooltip>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  moreButton: css`\n    padding: 0;\n  `,\n  floatRight: css`\n    display: flex;\n    justify-content: flex-end;\n  `,\n  dsLink: css`\n    font-weight: ${theme.typography.fontWeightBold};\n  `,\n});\n","import React, { useState } from 'react';\n\nimport { LoadingPlaceholder } from '@grafana/ui';\n\nimport { FolderDTO } from '../../../../../types';\nimport { alertRuleApi } from '../../api/alertRuleApi';\n\nimport { FileExportPreview } from './FileExportPreview';\nimport { GrafanaExportDrawer } from './GrafanaExportDrawer';\nimport { allGrafanaExportProviders, ExportFormats } from './providers';\n\ninterface GrafanaRuleFolderExporterProps {\n  folder: FolderDTO;\n  onClose: () => void;\n}\n\nexport function GrafanaRuleFolderExporter({ folder, onClose }: GrafanaRuleFolderExporterProps) {\n  const [activeTab, setActiveTab] = useState<ExportFormats>('yaml');\n\n  return (\n    <GrafanaExportDrawer\n      title={`Export ${folder.title} rules`}\n      activeTab={activeTab}\n      onTabChange={setActiveTab}\n      onClose={onClose}\n      formatProviders={Object.values(allGrafanaExportProviders)}\n    >\n      <GrafanaRuleFolderExportPreview folder={folder} exportFormat={activeTab} onClose={onClose} />\n    </GrafanaExportDrawer>\n  );\n}\n\ninterface GrafanaRuleFolderExportPreviewProps {\n  folder: FolderDTO;\n  exportFormat: ExportFormats;\n  onClose: () => void;\n}\n\nfunction GrafanaRuleFolderExportPreview({ folder, exportFormat, onClose }: GrafanaRuleFolderExportPreviewProps) {\n  const { currentData: exportFolderDefinition = '', isFetching } = alertRuleApi.endpoints.exportRules.useQuery({\n    folderUid: folder.uid,\n    format: exportFormat,\n  });\n\n  if (isFetching) {\n    return <LoadingPlaceholder text=\"Loading....\" />;\n  }\n\n  const downloadFileName = `${folder.title}-${folder.uid}`;\n\n  return (\n    <FileExportPreview\n      format={exportFormat}\n      textDefinition={exportFolderDefinition}\n      downloadFileName={downloadFileName}\n      onClose={onClose}\n    />\n  );\n}\n","import React, { useState } from 'react';\n\nimport { LoadingPlaceholder } from '@grafana/ui';\n\nimport { alertRuleApi } from '../../api/alertRuleApi';\n\nimport { FileExportPreview } from './FileExportPreview';\nimport { GrafanaExportDrawer } from './GrafanaExportDrawer';\nimport { allGrafanaExportProviders, ExportFormats } from './providers';\n\ninterface GrafanaRuleGroupExporterProps {\n  folderUid: string;\n  groupName: string;\n  onClose: () => void;\n}\n\nexport function GrafanaRuleGroupExporter({ folderUid, groupName, onClose }: GrafanaRuleGroupExporterProps) {\n  const [activeTab, setActiveTab] = useState<ExportFormats>('yaml');\n\n  return (\n    <GrafanaExportDrawer\n      title={`Export ${groupName} rules`}\n      activeTab={activeTab}\n      onTabChange={setActiveTab}\n      onClose={onClose}\n      formatProviders={Object.values(allGrafanaExportProviders)}\n    >\n      <GrafanaRuleGroupExportPreview\n        folderUid={folderUid}\n        groupName={groupName}\n        exportFormat={activeTab}\n        onClose={onClose}\n      />\n    </GrafanaExportDrawer>\n  );\n}\n\ninterface GrafanaRuleGroupExportPreviewProps {\n  folderUid: string;\n  groupName: string;\n  exportFormat: ExportFormats;\n  onClose: () => void;\n}\n\nfunction GrafanaRuleGroupExportPreview({\n  folderUid,\n  groupName,\n  exportFormat,\n  onClose,\n}: GrafanaRuleGroupExportPreviewProps) {\n  const { currentData: ruleGroupTextDefinition = '', isFetching } = alertRuleApi.endpoints.exportRules.useQuery({\n    folderUid,\n    group: groupName,\n    format: exportFormat,\n  });\n\n  if (isFetching) {\n    return <LoadingPlaceholder text=\"Loading....\" />;\n  }\n\n  return (\n    <FileExportPreview\n      format={exportFormat}\n      textDefinition={ruleGroupTextDefinition}\n      downloadFileName={groupName}\n      onClose={onClose}\n    />\n  );\n}\n","import { css } from '@emotion/css';\nimport cx from 'classnames';\nimport { compact } from 'lodash';\nimport React, { useCallback, useState } from 'react';\nimport {\n  DragDropContext,\n  Draggable,\n  DraggableProvided,\n  Droppable,\n  DroppableProvided,\n  DropResult,\n} from 'react-beautiful-dnd';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Badge, Icon, Modal, Tooltip, useStyles2 } from '@grafana/ui';\nimport { dispatch } from 'app/store/store';\nimport { CombinedRule, CombinedRuleGroup, CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { updateRulesOrder } from '../../state/actions';\nimport { getRulesSourceName, isCloudRulesSource } from '../../utils/datasource';\nimport { hashRulerRule } from '../../utils/rule-id';\nimport { isAlertingRule, isRecordingRule } from '../../utils/rules';\n\nimport { AlertStateTag } from './AlertStateTag';\n\ninterface ModalProps {\n  namespace: CombinedRuleNamespace;\n  group: CombinedRuleGroup;\n  onClose: () => void;\n  folderUid?: string;\n}\n\ntype CombinedRuleWithUID = { uid: string } & CombinedRule;\n\nexport const ReorderCloudGroupModal = (props: ModalProps) => {\n  const { group, namespace, onClose, folderUid } = props;\n  const [pending, setPending] = useState<boolean>(false);\n  const [rulesList, setRulesList] = useState<CombinedRule[]>(group.rules);\n\n  const styles = useStyles2(getStyles);\n\n  const onDragEnd = useCallback(\n    (result: DropResult) => {\n      // check for no-ops so we don't update the group unless we have changes\n      if (!result.destination) {\n        return;\n      }\n\n      const sameIndex = result.destination.index === result.source.index;\n      if (sameIndex) {\n        return;\n      }\n\n      const newOrderedRules = reorder(rulesList, result.source.index, result.destination.index);\n      setRulesList(newOrderedRules); // optimistically update the new rules list\n\n      const rulesSourceName = getRulesSourceName(namespace.rulesSource);\n      const rulerRules = compact(newOrderedRules.map((rule) => rule.rulerRule));\n\n      setPending(true);\n      dispatch(\n        updateRulesOrder({\n          namespaceName: namespace.name,\n          groupName: group.name,\n          rulesSourceName: rulesSourceName,\n          newRules: rulerRules,\n          folderUid: folderUid || namespace.name,\n        })\n      )\n        .unwrap()\n        .finally(() => {\n          setPending(false);\n        });\n    },\n    [group.name, namespace.name, namespace.rulesSource, rulesList, folderUid]\n  );\n\n  // assign unique but stable identifiers to each (alerting / recording) rule\n  const rulesWithUID: CombinedRuleWithUID[] = rulesList.map((rule) => ({\n    ...rule,\n    uid: String(hashRulerRule(rule.rulerRule!)), // TODO fix this coercion?\n  }));\n\n  return (\n    <Modal\n      className={styles.modal}\n      isOpen={true}\n      title={<ModalHeader namespace={namespace} group={group} />}\n      onDismiss={onClose}\n      onClickBackdrop={onClose}\n    >\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable\n          droppableId=\"alert-list\"\n          mode=\"standard\"\n          renderClone={(provided, _snapshot, rubric) => (\n            <ListItem provided={provided} rule={rulesWithUID[rubric.source.index]} isClone />\n          )}\n        >\n          {(droppableProvided: DroppableProvided) => (\n            <div\n              ref={droppableProvided.innerRef}\n              className={cx(styles.listContainer, pending && styles.disabled)}\n              {...droppableProvided.droppableProps}\n            >\n              {rulesWithUID.map((rule, index) => (\n                <Draggable key={rule.uid} draggableId={rule.uid} index={index} isDragDisabled={pending}>\n                  {(provided: DraggableProvided) => <ListItem key={rule.uid} provided={provided} rule={rule} />}\n                </Draggable>\n              ))}\n              {droppableProvided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n    </Modal>\n  );\n};\n\ninterface ListItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  provided: DraggableProvided;\n  rule: CombinedRule;\n  isClone?: boolean;\n  isDragging?: boolean;\n}\n\nconst ListItem = ({ provided, rule, isClone = false, isDragging = false }: ListItemProps) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div\n      className={cx(styles.listItem, isClone && 'isClone', isDragging && 'isDragging')}\n      ref={provided.innerRef}\n      {...provided.draggableProps}\n      {...provided.dragHandleProps}\n    >\n      {isAlertingRule(rule.promRule) && <AlertStateTag state={rule.promRule.state} />}\n      {isRecordingRule(rule.promRule) && <Badge text={'Recording'} color={'blue'} />}\n      <div className={styles.listItemName}>{rule.name}</div>\n      <Icon name={'draggabledots'} />\n    </div>\n  );\n};\n\ninterface ModalHeaderProps {\n  namespace: CombinedRuleNamespace;\n  group: CombinedRuleGroup;\n}\n\nconst ModalHeader = ({ namespace, group }: ModalHeaderProps) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.header}>\n      <Icon name=\"folder\" />\n      {isCloudRulesSource(namespace.rulesSource) && (\n        <Tooltip content={namespace.rulesSource.name} placement=\"top\">\n          <img\n            alt={namespace.rulesSource.meta.name}\n            className={styles.dataSourceIcon}\n            src={namespace.rulesSource.meta.info.logos.small}\n          />\n        </Tooltip>\n      )}\n      <span>{namespace.name}</span>\n      <Icon name=\"angle-right\" />\n      <span>{group.name}</span>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  modal: css`\n    max-width: 640px;\n    max-height: 80%;\n    overflow: hidden;\n  `,\n  listItem: css`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    gap: ${theme.spacing()};\n\n    background: ${theme.colors.background.primary};\n    color: ${theme.colors.text.secondary};\n\n    border-bottom: solid 1px ${theme.colors.border.medium};\n    padding: ${theme.spacing(1)} ${theme.spacing(2)};\n\n    &:last-child {\n      border-bottom: none;\n    }\n\n    &.isClone {\n      border: solid 1px ${theme.colors.primary.shade};\n    }\n  `,\n  listContainer: css`\n    user-select: none;\n    border: solid 1px ${theme.colors.border.medium};\n  `,\n  disabled: css`\n    opacity: 0.5;\n    pointer-events: none;\n  `,\n  listItemName: css`\n    flex: 1;\n\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  `,\n  header: css`\n    display: flex;\n    align-items: center;\n\n    gap: ${theme.spacing(1)};\n  `,\n  dataSourceIcon: css`\n    width: ${theme.spacing(2)};\n    height: ${theme.spacing(2)};\n  `,\n});\n\nexport function reorder<T>(rules: T[], startIndex: number, endIndex: number): T[] {\n  const result = Array.from(rules);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n}\n","import { css } from '@emotion/css';\nimport pluralize from 'pluralize';\nimport React, { useEffect, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Badge, ConfirmModal, HorizontalGroup, Icon, Spinner, Stack, Tooltip, useStyles2 } from '@grafana/ui';\nimport { useDispatch } from 'app/types';\nimport { CombinedRuleGroup, CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { LogMessages, logInfo } from '../../Analytics';\nimport { useFolder } from '../../hooks/useFolder';\nimport { useHasRuler } from '../../hooks/useHasRuler';\nimport { deleteRulesGroupAction } from '../../state/actions';\nimport { useRulesAccess } from '../../utils/accessControlHooks';\nimport { GRAFANA_RULES_SOURCE_NAME, isCloudRulesSource } from '../../utils/datasource';\nimport { makeFolderLink, makeFolderSettingsLink } from '../../utils/misc';\nimport { isFederatedRuleGroup, isGrafanaRulerRule } from '../../utils/rules';\nimport { CollapseToggle } from '../CollapseToggle';\nimport { RuleLocation } from '../RuleLocation';\nimport { GrafanaRuleFolderExporter } from '../export/GrafanaRuleFolderExporter';\nimport { GrafanaRuleGroupExporter } from '../export/GrafanaRuleGroupExporter';\nimport { decodeGrafanaNamespace } from '../expressions/util';\n\nimport { ActionIcon } from './ActionIcon';\nimport { EditCloudGroupModal } from './EditRuleGroupModal';\nimport { ReorderCloudGroupModal } from './ReorderRuleGroupModal';\nimport { RuleGroupStats } from './RuleStats';\nimport { RulesTable } from './RulesTable';\n\ntype ViewMode = 'grouped' | 'list';\n\ninterface Props {\n  namespace: CombinedRuleNamespace;\n  group: CombinedRuleGroup;\n  expandAll: boolean;\n  viewMode: ViewMode;\n}\n\nexport const RulesGroup = React.memo(({ group, namespace, expandAll, viewMode }: Props) => {\n  const { rulesSource } = namespace;\n  const dispatch = useDispatch();\n  const styles = useStyles2(getStyles);\n\n  const [isEditingGroup, setIsEditingGroup] = useState(false);\n  const [isDeletingGroup, setIsDeletingGroup] = useState(false);\n  const [isReorderingGroup, setIsReorderingGroup] = useState(false);\n  const [isExporting, setIsExporting] = useState<'group' | 'folder' | undefined>(undefined);\n  const [isCollapsed, setIsCollapsed] = useState(!expandAll);\n\n  const { canEditRules } = useRulesAccess();\n\n  useEffect(() => {\n    setIsCollapsed(!expandAll);\n  }, [expandAll]);\n\n  const { hasRuler, rulerRulesLoaded } = useHasRuler();\n  const rulerRule = group.rules[0]?.rulerRule;\n  const folderUID = (rulerRule && isGrafanaRulerRule(rulerRule) && rulerRule.grafana_alert.namespace_uid) || undefined;\n  const { folder } = useFolder(folderUID);\n\n  // group \"is deleting\" if rules source has ruler, but this group has no rules that are in ruler\n  const isDeleting =\n    hasRuler(rulesSource) && rulerRulesLoaded(rulesSource) && !group.rules.find((rule) => !!rule.rulerRule);\n  const isFederated = isFederatedRuleGroup(group);\n\n  // check if group has provisioned items\n  const isProvisioned = group.rules.some((rule) => {\n    return isGrafanaRulerRule(rule.rulerRule) && rule.rulerRule.grafana_alert.provenance;\n  });\n\n  // check what view mode we are in\n  const isListView = viewMode === 'list';\n  const isGroupView = viewMode === 'grouped';\n\n  const deleteGroup = () => {\n    dispatch(deleteRulesGroupAction(namespace, group));\n    setIsDeletingGroup(false);\n  };\n\n  const actionIcons: React.ReactNode[] = [];\n\n  // for grafana, link to folder views\n  if (isDeleting) {\n    actionIcons.push(\n      <HorizontalGroup key=\"is-deleting\">\n        <Spinner />\n        deleting\n      </HorizontalGroup>\n    );\n  } else if (rulesSource === GRAFANA_RULES_SOURCE_NAME) {\n    if (folderUID) {\n      const baseUrl = makeFolderLink(folderUID);\n      if (folder?.canSave) {\n        if (isGroupView && !isProvisioned) {\n          actionIcons.push(\n            <ActionIcon\n              aria-label=\"edit rule group\"\n              data-testid=\"edit-group\"\n              key=\"edit\"\n              icon=\"pen\"\n              tooltip=\"edit rule group\"\n              onClick={() => setIsEditingGroup(true)}\n            />\n          );\n          actionIcons.push(\n            <ActionIcon\n              aria-label=\"re-order rules\"\n              data-testid=\"reorder-group\"\n              key=\"reorder\"\n              icon=\"exchange-alt\"\n              tooltip=\"reorder rules\"\n              className={styles.rotate90}\n              onClick={() => setIsReorderingGroup(true)}\n            />\n          );\n        }\n        if (isListView) {\n          actionIcons.push(\n            <ActionIcon\n              aria-label=\"go to folder\"\n              key=\"goto\"\n              icon=\"folder-open\"\n              tooltip=\"go to folder\"\n              to={baseUrl}\n              target=\"__blank\"\n            />\n          );\n\n          if (folder?.canAdmin) {\n            actionIcons.push(\n              <ActionIcon\n                aria-label=\"manage permissions\"\n                key=\"manage-perms\"\n                icon=\"lock\"\n                tooltip=\"manage permissions\"\n                to={baseUrl + '/permissions'}\n                target=\"__blank\"\n              />\n            );\n          }\n        }\n      }\n      if (folder) {\n        if (isListView) {\n          actionIcons.push(\n            <ActionIcon\n              aria-label=\"export rule folder\"\n              data-testid=\"export-folder\"\n              key=\"export-folder\"\n              icon=\"download-alt\"\n              tooltip=\"Export rules folder\"\n              onClick={() => setIsExporting('folder')}\n            />\n          );\n        } else if (isGroupView) {\n          actionIcons.push(\n            <ActionIcon\n              aria-label=\"export rule group\"\n              data-testid=\"export-group\"\n              key=\"export-group\"\n              icon=\"download-alt\"\n              tooltip=\"Export rule group\"\n              onClick={() => setIsExporting('group')}\n            />\n          );\n        }\n      }\n    }\n  } else if (canEditRules(rulesSource.name) && hasRuler(rulesSource)) {\n    if (!isFederated) {\n      actionIcons.push(\n        <ActionIcon\n          aria-label=\"edit rule group\"\n          data-testid=\"edit-group\"\n          key=\"edit\"\n          icon=\"pen\"\n          tooltip=\"edit rule group\"\n          onClick={() => setIsEditingGroup(true)}\n        />\n      );\n      actionIcons.push(\n        <ActionIcon\n          aria-label=\"re-order rules\"\n          data-testid=\"reorder-group\"\n          key=\"reorder\"\n          icon=\"exchange-alt\"\n          tooltip=\"re-order rules\"\n          className={styles.rotate90}\n          onClick={() => setIsReorderingGroup(true)}\n        />\n      );\n    }\n\n    actionIcons.push(\n      <ActionIcon\n        aria-label=\"delete rule group\"\n        data-testid=\"delete-group\"\n        key=\"delete-group\"\n        icon=\"trash-alt\"\n        tooltip=\"delete rule group\"\n        onClick={() => setIsDeletingGroup(true)}\n      />\n    );\n  }\n\n  // ungrouped rules are rules that are in the \"default\" group name\n  const groupName = isListView ? (\n    <RuleLocation namespace={decodeGrafanaNamespace(namespace).name} />\n  ) : (\n    <RuleLocation namespace={decodeGrafanaNamespace(namespace).name} group={group.name} />\n  );\n\n  const closeEditModal = (saved = false) => {\n    if (!saved) {\n      logInfo(LogMessages.leavingRuleGroupEdit);\n    }\n    setIsEditingGroup(false);\n  };\n\n  return (\n    <div className={styles.wrapper} data-testid=\"rule-group\">\n      <div className={styles.header} data-testid=\"rule-group-header\">\n        <CollapseToggle\n          size=\"sm\"\n          className={styles.collapseToggle}\n          isCollapsed={isCollapsed}\n          onToggle={setIsCollapsed}\n          data-testid=\"group-collapse-toggle\"\n        />\n        <Icon name={isCollapsed ? 'folder' : 'folder-open'} />\n        {isCloudRulesSource(rulesSource) && (\n          <Tooltip content={rulesSource.name} placement=\"top\">\n            <img\n              alt={rulesSource.meta.name}\n              className={styles.dataSourceIcon}\n              src={rulesSource.meta.info.logos.small}\n            />\n          </Tooltip>\n        )}\n        {\n          // eslint-disable-next-line\n          <div className={styles.groupName} onClick={() => setIsCollapsed(!isCollapsed)}>\n            {isFederated && <Badge color=\"purple\" text=\"Federated\" />} {groupName}\n          </div>\n        }\n        <div className={styles.spacer} />\n        <div className={styles.headerStats}>\n          <RuleGroupStats group={group} />\n        </div>\n        {isProvisioned && (\n          <>\n            <div className={styles.actionsSeparator}>|</div>\n            <div className={styles.actionIcons}>\n              <Badge color=\"purple\" text=\"Provisioned\" />\n            </div>\n          </>\n        )}\n        {!!actionIcons.length && (\n          <>\n            <div className={styles.actionsSeparator}>|</div>\n            <div className={styles.actionIcons}>\n              <Stack gap={0.5}>{actionIcons}</Stack>\n            </div>\n          </>\n        )}\n      </div>\n      {!isCollapsed && (\n        <RulesTable\n          showSummaryColumn={true}\n          className={styles.rulesTable}\n          showGuidelines={true}\n          showNextEvaluationColumn={Boolean(group.interval)}\n          rules={group.rules}\n        />\n      )}\n      {isEditingGroup && (\n        <EditCloudGroupModal\n          namespace={namespace}\n          group={group}\n          onClose={() => closeEditModal()}\n          folderUrl={folder?.canEdit ? makeFolderSettingsLink(folder) : undefined}\n          folderUid={folderUID}\n        />\n      )}\n      {isReorderingGroup && (\n        <ReorderCloudGroupModal\n          group={group}\n          folderUid={folderUID}\n          namespace={namespace}\n          onClose={() => setIsReorderingGroup(false)}\n        />\n      )}\n      <ConfirmModal\n        isOpen={isDeletingGroup}\n        title=\"Delete group\"\n        body={\n          <div>\n            <p>\n              Deleting &quot;<strong>{group.name}</strong>&quot; will permanently remove the group and{' '}\n              {group.rules.length} alert {pluralize('rule', group.rules.length)} belonging to it.\n            </p>\n            <p>Are you sure you want to delete this group?</p>\n          </div>\n        }\n        onConfirm={deleteGroup}\n        onDismiss={() => setIsDeletingGroup(false)}\n        confirmText=\"Delete\"\n      />\n      {folder && isExporting === 'folder' && (\n        <GrafanaRuleFolderExporter folder={folder} onClose={() => setIsExporting(undefined)} />\n      )}\n      {folder && isExporting === 'group' && (\n        <GrafanaRuleGroupExporter\n          folderUid={folder.uid}\n          groupName={group.name}\n          onClose={() => setIsExporting(undefined)}\n        />\n      )}\n    </div>\n  );\n});\n\nRulesGroup.displayName = 'RulesGroup';\n\nexport const getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css``,\n    header: css`\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      padding: ${theme.spacing(1)} ${theme.spacing(1)} ${theme.spacing(1)} 0;\n      flex-wrap: nowrap;\n      border-bottom: 1px solid ${theme.colors.border.weak};\n\n      &:hover {\n        background-color: ${theme.components.table.rowHoverBackground};\n      }\n    `,\n    headerStats: css`\n      flex-shrink: 0;\n\n      span {\n        vertical-align: middle;\n      }\n\n      ${theme.breakpoints.down('sm')} {\n        order: 2;\n        width: 100%;\n        padding-left: ${theme.spacing(1)};\n      }\n    `,\n    groupName: css`\n      margin-left: ${theme.spacing(1)};\n      margin-bottom: 0;\n      cursor: pointer;\n\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    `,\n    spacer: css`\n      flex: 1;\n    `,\n    collapseToggle: css`\n      background: none;\n      border: none;\n      margin-top: -${theme.spacing(1)};\n      margin-bottom: -${theme.spacing(1)};\n\n      svg {\n        margin-bottom: 0;\n      }\n    `,\n    dataSourceIcon: css`\n      width: ${theme.spacing(2)};\n      height: ${theme.spacing(2)};\n      margin-left: ${theme.spacing(2)};\n    `,\n    dataSourceOrigin: css`\n      margin-right: 1em;\n      color: ${theme.colors.text.disabled};\n    `,\n    actionsSeparator: css`\n      margin: 0 ${theme.spacing(2)};\n    `,\n    actionIcons: css`\n      width: 80px;\n      align-items: center;\n\n      flex-shrink: 0;\n    `,\n    rulesTable: css`\n      margin: ${theme.spacing(2, 0)};\n    `,\n    rotate90: css`\n      transform: rotate(90deg);\n    `,\n  };\n};\n","import { useMemo } from 'react';\n\nimport { CombinedRuleNamespace } from '../../../../../types/unified-alerting';\n\nexport function useCombinedGroupNamespace(namespaces: CombinedRuleNamespace[]) {\n  return useMemo(\n    () =>\n      namespaces.flatMap((ns) =>\n        ns.groups.map((g) => ({\n          namespace: ns,\n          group: g,\n        }))\n      ),\n    [namespaces]\n  );\n}\n","import { css } from '@emotion/css';\nimport pluralize from 'pluralize';\nimport React, { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { GrafanaTheme2, urlUtil } from '@grafana/data';\nimport { LinkButton, LoadingPlaceholder, Pagination, Spinner, useStyles2 } from '@grafana/ui';\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../../core/constants';\nimport { AlertingAction, useAlertingAbility } from '../../hooks/useAbilities';\nimport { usePagination } from '../../hooks/usePagination';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { getPaginationStyles } from '../../styles/pagination';\nimport { getRulesDataSources, getRulesSourceUid } from '../../utils/datasource';\nimport { isAsyncRequestStatePending } from '../../utils/redux';\n\nimport { RulesGroup } from './RulesGroup';\nimport { useCombinedGroupNamespace } from './useCombinedGroupNamespace';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll: boolean;\n}\n\nexport const CloudRules = ({ namespaces, expandAll }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const dsConfigs = useUnifiedAlertingSelector((state) => state.dataSources);\n  const promRules = useUnifiedAlertingSelector((state) => state.promRules);\n  const rulesDataSources = useMemo(getRulesDataSources, []);\n  const groupsWithNamespaces = useCombinedGroupNamespace(namespaces);\n\n  const dataSourcesLoading = useMemo(\n    () =>\n      rulesDataSources.filter(\n        (ds) => isAsyncRequestStatePending(promRules[ds.name]) || isAsyncRequestStatePending(dsConfigs[ds.name])\n      ),\n    [promRules, dsConfigs, rulesDataSources]\n  );\n\n  const hasSomeResults = rulesDataSources.some((ds) => Boolean(promRules[ds.name]?.result?.length));\n\n  const hasDataSourcesConfigured = rulesDataSources.length > 0;\n  const hasDataSourcesLoading = dataSourcesLoading.length > 0;\n  const hasNamespaces = namespaces.length > 0;\n\n  const { numberOfPages, onPageChange, page, pageItems } = usePagination(\n    groupsWithNamespaces,\n    1,\n    DEFAULT_PER_PAGE_PAGINATION\n  );\n\n  return (\n    <section className={styles.wrapper}>\n      <div className={styles.sectionHeader}>\n        <div className={styles.headerRow}>\n          <h5>Mimir / Cortex / Loki</h5>\n          {dataSourcesLoading.length ? (\n            <LoadingPlaceholder\n              className={styles.loader}\n              text={`Loading rules from ${dataSourcesLoading.length} ${pluralize('source', dataSourcesLoading.length)}`}\n            />\n          ) : (\n            <div />\n          )}\n          <CreateRecordingRuleButton />\n        </div>\n      </div>\n\n      {pageItems.map(({ group, namespace }) => {\n        return (\n          <RulesGroup\n            group={group}\n            key={`${getRulesSourceUid(namespace.rulesSource)}-${namespace.name}-${group.name}`}\n            namespace={namespace}\n            expandAll={expandAll}\n            viewMode={'grouped'}\n          />\n        );\n      })}\n\n      {!hasDataSourcesConfigured && <p>There are no Prometheus or Loki data sources configured.</p>}\n      {hasDataSourcesConfigured && !hasDataSourcesLoading && !hasNamespaces && <p>No rules found.</p>}\n      {!hasSomeResults && hasDataSourcesLoading && <Spinner size=\"xl\" className={styles.spinner} />}\n\n      <Pagination\n        className={styles.pagination}\n        currentPage={page}\n        numberOfPages={numberOfPages}\n        onNavigate={onPageChange}\n        hideWhenSinglePage\n      />\n    </section>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  loader: css`\n    margin-bottom: 0;\n  `,\n  sectionHeader: css`\n    display: flex;\n    justify-content: space-between;\n  `,\n  wrapper: css`\n    margin-bottom: ${theme.spacing(4)};\n  `,\n  spinner: css`\n    text-align: center;\n    padding: ${theme.spacing(2)};\n  `,\n  pagination: getPaginationStyles(theme),\n  headerRow: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    width: '100%',\n    marginBottom: theme.spacing(1),\n  }),\n});\n\nexport function CreateRecordingRuleButton() {\n  const [createCloudRuleSupported, createCloudRuleAllowed] = useAlertingAbility(AlertingAction.CreateExternalAlertRule);\n\n  const location = useLocation();\n\n  const canCreateCloudRules = createCloudRuleSupported && createCloudRuleAllowed;\n\n  if (canCreateCloudRules) {\n    return (\n      <LinkButton\n        key=\"new-recording-rule\"\n        href={urlUtil.renderUrl(`alerting/new/recording`, {\n          returnTo: location.pathname + location.search,\n        })}\n        icon=\"plus\"\n        variant=\"secondary\"\n      >\n        New recording rule\n      </LinkButton>\n    );\n  }\n  return null;\n}\n","import React, { useState } from 'react';\n\nimport { LoadingPlaceholder } from '@grafana/ui';\n\nimport { alertRuleApi } from '../../api/alertRuleApi';\n\nimport { FileExportPreview } from './FileExportPreview';\nimport { GrafanaExportDrawer } from './GrafanaExportDrawer';\nimport { allGrafanaExportProviders, ExportFormats } from './providers';\n\ninterface GrafanaRulesExporterProps {\n  onClose: () => void;\n}\n\nexport function GrafanaRulesExporter({ onClose }: GrafanaRulesExporterProps) {\n  const [activeTab, setActiveTab] = useState<ExportFormats>('yaml');\n\n  return (\n    <GrafanaExportDrawer\n      activeTab={activeTab}\n      onTabChange={setActiveTab}\n      onClose={onClose}\n      formatProviders={Object.values(allGrafanaExportProviders)}\n    >\n      <GrafanaRulesExportPreview exportFormat={activeTab} onClose={onClose} />\n    </GrafanaExportDrawer>\n  );\n}\n\ninterface GrafanaRulesExportPreviewProps {\n  exportFormat: ExportFormats;\n  onClose: () => void;\n}\n\nfunction GrafanaRulesExportPreview({ exportFormat, onClose }: GrafanaRulesExportPreviewProps) {\n  const { currentData: rulesDefinition = '', isFetching } = alertRuleApi.endpoints.exportRules.useQuery({\n    format: exportFormat,\n  });\n\n  const downloadFileName = `alert-rules-${new Date().getTime()}`;\n\n  if (isFetching) {\n    return <LoadingPlaceholder text=\"Loading....\" />;\n  }\n\n  return (\n    <FileExportPreview\n      format={exportFormat}\n      textDefinition={rulesDefinition}\n      downloadFileName={downloadFileName}\n      onClose={onClose}\n    />\n  );\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, LoadingPlaceholder, Pagination, Spinner, useStyles2 } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../../core/constants';\nimport { AlertingAction, useAlertingAbility } from '../../hooks/useAbilities';\nimport { flattenGrafanaManagedRules } from '../../hooks/useCombinedRuleNamespaces';\nimport { usePagination } from '../../hooks/usePagination';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { getPaginationStyles } from '../../styles/pagination';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\nimport { initialAsyncRequestState } from '../../utils/redux';\nimport { GrafanaRulesExporter } from '../export/GrafanaRulesExporter';\n\nimport { RulesGroup } from './RulesGroup';\nimport { useCombinedGroupNamespace } from './useCombinedGroupNamespace';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll: boolean;\n}\n\nexport const GrafanaRules = ({ namespaces, expandAll }: Props) => {\n  const styles = useStyles2(getStyles);\n  const [queryParams] = useQueryParams();\n\n  const { prom, ruler } = useUnifiedAlertingSelector((state) => ({\n    prom: state.promRules[GRAFANA_RULES_SOURCE_NAME] || initialAsyncRequestState,\n    ruler: state.rulerRules[GRAFANA_RULES_SOURCE_NAME] || initialAsyncRequestState,\n  }));\n\n  const loading = prom.loading || ruler.loading;\n  const hasResult = !!prom.result || !!ruler.result;\n\n  const wantsListView = queryParams['view'] === 'list';\n  const namespacesFormat = wantsListView ? flattenGrafanaManagedRules(namespaces) : namespaces;\n\n  const groupsWithNamespaces = useCombinedGroupNamespace(namespacesFormat);\n\n  const { numberOfPages, onPageChange, page, pageItems } = usePagination(\n    groupsWithNamespaces,\n    1,\n    DEFAULT_PER_PAGE_PAGINATION\n  );\n\n  const [exportRulesSupported, exportRulesAllowed] = useAlertingAbility(AlertingAction.ExportGrafanaManagedRules);\n  const canExportRules = exportRulesSupported && exportRulesAllowed;\n\n  const [showExportDrawer, toggleShowExportDrawer] = useToggle(false);\n  const hasGrafanaAlerts = namespaces.length > 0;\n\n  return (\n    <section className={styles.wrapper}>\n      <div className={styles.sectionHeader}>\n        <div className={styles.headerRow}>\n          <h5>Grafana</h5>\n          {loading ? <LoadingPlaceholder className={styles.loader} text=\"Loading...\" /> : <div />}\n          {hasGrafanaAlerts && canExportRules && (\n            <Button\n              aria-label=\"export all grafana rules\"\n              data-testid=\"export-all-grafana-rules\"\n              icon=\"download-alt\"\n              tooltip=\"Export all Grafana-managed rules\"\n              onClick={toggleShowExportDrawer}\n              variant=\"secondary\"\n            >\n              Export rules\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {pageItems.map(({ group, namespace }) => (\n        <RulesGroup\n          group={group}\n          key={`${namespace.name}-${group.name}`}\n          namespace={namespace}\n          expandAll={expandAll}\n          viewMode={wantsListView ? 'list' : 'grouped'}\n        />\n      ))}\n      {hasResult && namespacesFormat?.length === 0 && <p>No rules found.</p>}\n      {!hasResult && loading && <Spinner size=\"xl\" className={styles.spinner} />}\n      <Pagination\n        className={styles.pagination}\n        currentPage={page}\n        numberOfPages={numberOfPages}\n        onNavigate={onPageChange}\n        hideWhenSinglePage\n      />\n      {canExportRules && showExportDrawer && <GrafanaRulesExporter onClose={toggleShowExportDrawer} />}\n    </section>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  loader: css`\n    margin-bottom: 0;\n  `,\n  sectionHeader: css`\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: ${theme.spacing(1)};\n  `,\n  wrapper: css`\n    margin-bottom: ${theme.spacing(4)};\n  `,\n  spinner: css`\n    text-align: center;\n    padding: ${theme.spacing(2)};\n  `,\n  pagination: getPaginationStyles(theme),\n  headerRow: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    width: '100%',\n    flexDirection: 'row',\n  }),\n});\n","import React, { useEffect, useMemo } from 'react';\n\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { LogMessages, logInfo } from '../../Analytics';\nimport { AlertingAction } from '../../hooks/useAbilities';\nimport { isCloudRulesSource, isGrafanaRulesSource } from '../../utils/datasource';\nimport { Authorize } from '../Authorize';\n\nimport { CloudRules } from './CloudRules';\nimport { GrafanaRules } from './GrafanaRules';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll: boolean;\n}\n\nexport const RuleListGroupView = ({ namespaces, expandAll }: Props) => {\n  const [grafanaNamespaces, cloudNamespaces] = useMemo(() => {\n    const sorted = namespaces\n      .map((namespace) => ({\n        ...namespace,\n        groups: namespace.groups.sort((a, b) => a.name.localeCompare(b.name)),\n      }))\n      .sort((a, b) => a.name.localeCompare(b.name));\n    return [\n      sorted.filter((ns) => isGrafanaRulesSource(ns.rulesSource)),\n      sorted.filter((ns) => isCloudRulesSource(ns.rulesSource)),\n    ];\n  }, [namespaces]);\n\n  useEffect(() => {\n    logInfo(LogMessages.loadedList);\n  }, []);\n\n  return (\n    <>\n      <Authorize actions={[AlertingAction.ViewAlertRule]}>\n        <GrafanaRules namespaces={grafanaNamespaces} expandAll={expandAll} />\n      </Authorize>\n      <Authorize actions={[AlertingAction.ViewExternalAlertRule]}>\n        <CloudRules namespaces={cloudNamespaces} expandAll={expandAll} />\n      </Authorize>\n    </>\n  );\n};\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { CombinedRule } from 'app/types/unified-alerting';\nimport { PromAlertingRuleState } from 'app/types/unified-alerting-dto';\n\nimport { alertStateToReadable } from '../../utils/rules';\nimport { CollapseToggle } from '../CollapseToggle';\n\nimport { RulesTable } from './RulesTable';\n\ninterface Props {\n  rules: CombinedRule[];\n  state: PromAlertingRuleState;\n  defaultCollapsed?: boolean;\n}\n\nexport const RuleListStateSection = ({ rules, state, defaultCollapsed = false }: Props) => {\n  const [collapsed, setCollapsed] = useState(defaultCollapsed);\n  const styles = useStyles2(getStyles);\n  return (\n    <>\n      <h4 className={styles.header}>\n        <CollapseToggle\n          className={styles.collapseToggle}\n          size=\"xxl\"\n          isCollapsed={collapsed}\n          onToggle={() => setCollapsed(!collapsed)}\n        />\n        {alertStateToReadable(state)} ({rules.length})\n      </h4>\n      {!collapsed && <RulesTable className={styles.rulesTable} rules={rules} showGroupColumn={true} />}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  collapseToggle: css`\n    vertical-align: middle;\n  `,\n  header: css`\n    margin-top: ${theme.spacing(2)};\n  `,\n  rulesTable: css`\n    margin-top: ${theme.spacing(3)};\n  `,\n});\n","import React, { useMemo } from 'react';\n\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { CombinedRule, CombinedRuleNamespace } from 'app/types/unified-alerting';\nimport { PromAlertingRuleState } from 'app/types/unified-alerting-dto';\n\nimport { getFiltersFromUrlParams } from '../../utils/misc';\nimport { isAlertingRule } from '../../utils/rules';\n\nimport { RuleListStateSection } from './RuleListStateSection';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll?: boolean;\n}\n\ntype GroupedRules = Record<PromAlertingRuleState, CombinedRule[]>;\n\nexport const RuleListStateView = ({ namespaces }: Props) => {\n  const filters = getFiltersFromUrlParams(useQueryParams()[0]);\n\n  const groupedRules = useMemo(() => {\n    const result: GroupedRules = {\n      [PromAlertingRuleState.Firing]: [],\n      [PromAlertingRuleState.Inactive]: [],\n      [PromAlertingRuleState.Pending]: [],\n    };\n\n    namespaces.forEach((namespace) =>\n      namespace.groups.forEach((group) =>\n        group.rules.forEach((rule) => {\n          if (rule.promRule && isAlertingRule(rule.promRule)) {\n            result[rule.promRule.state].push(rule);\n          }\n        })\n      )\n    );\n\n    Object.values(result).forEach((rules) => rules.sort((a, b) => a.name.localeCompare(b.name)));\n\n    return result;\n  }, [namespaces]);\n  return (\n    <>\n      {(!filters.alertState || filters.alertState === PromAlertingRuleState.Firing) && (\n        <RuleListStateSection state={PromAlertingRuleState.Firing} rules={groupedRules[PromAlertingRuleState.Firing]} />\n      )}\n      {(!filters.alertState || filters.alertState === PromAlertingRuleState.Pending) && (\n        <RuleListStateSection\n          state={PromAlertingRuleState.Pending}\n          rules={groupedRules[PromAlertingRuleState.Pending]}\n        />\n      )}\n      {(!filters.alertState || filters.alertState === PromAlertingRuleState.Inactive) && (\n        <RuleListStateSection\n          defaultCollapsed={filters.alertState !== PromAlertingRuleState.Inactive}\n          state={PromAlertingRuleState.Inactive}\n          rules={groupedRules[PromAlertingRuleState.Inactive]}\n        />\n      )}\n    </>\n  );\n};\n","import uFuzzy from '@leeoniya/ufuzzy';\nimport { produce } from 'immer';\nimport { chain, compact, isEmpty } from 'lodash';\nimport { useCallback, useEffect, useMemo } from 'react';\n\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { Matcher } from 'app/plugins/datasource/alertmanager/types';\nimport { CombinedRuleGroup, CombinedRuleNamespace, Rule } from 'app/types/unified-alerting';\nimport { isPromAlertingRuleState, PromRuleType, RulerGrafanaRuleDTO } from 'app/types/unified-alerting-dto';\n\nimport { applySearchFilterToQuery, getSearchFilterFromQuery, RulesFilter } from '../search/rulesSearchParser';\nimport { labelsMatchMatchers, matcherToMatcherField, parseMatchers } from '../utils/alertmanager';\nimport { Annotation } from '../utils/constants';\nimport { isCloudRulesSource } from '../utils/datasource';\nimport { parseMatcher } from '../utils/matchers';\nimport { getRuleHealth, isAlertingRule, isGrafanaRulerRule, isPromRuleType } from '../utils/rules';\n\nimport { calculateGroupTotals, calculateRuleFilteredTotals, calculateRuleTotals } from './useCombinedRuleNamespaces';\nimport { useURLSearchParams } from './useURLSearchParams';\n\n// if the search term is longer than MAX_NEEDLE_SIZE we disable Levenshtein distance\nconst MAX_NEEDLE_SIZE = 25;\nconst INFO_THRESHOLD = Infinity;\n\nexport function useRulesFilter() {\n  const [queryParams, updateQueryParams] = useURLSearchParams();\n  const searchQuery = queryParams.get('search') ?? '';\n\n  const filterState = useMemo(() => getSearchFilterFromQuery(searchQuery), [searchQuery]);\n  const hasActiveFilters = useMemo(() => Object.values(filterState).some((filter) => !isEmpty(filter)), [filterState]);\n\n  const updateFilters = useCallback(\n    (newFilter: RulesFilter) => {\n      const newSearchQuery = applySearchFilterToQuery(searchQuery, newFilter);\n      updateQueryParams({ search: newSearchQuery });\n    },\n    [searchQuery, updateQueryParams]\n  );\n\n  const setSearchQuery = useCallback(\n    (newSearchQuery: string | undefined) => {\n      updateQueryParams({ search: newSearchQuery });\n    },\n    [updateQueryParams]\n  );\n\n  // Handle legacy filters\n  useEffect(() => {\n    const legacyFilters = {\n      dataSource: queryParams.get('dataSource') ?? undefined,\n      alertState: queryParams.get('alertState') ?? undefined,\n      ruleType: queryParams.get('ruleType') ?? undefined,\n      labels: parseMatchers(queryParams.get('queryString') ?? '').map(matcherToMatcherField),\n    };\n\n    const hasLegacyFilters = Object.values(legacyFilters).some((legacyFilter) => !isEmpty(legacyFilter));\n    if (hasLegacyFilters) {\n      updateQueryParams({ dataSource: undefined, alertState: undefined, ruleType: undefined, queryString: undefined });\n      // Existing query filters takes precedence over legacy ones\n      updateFilters(\n        produce(filterState, (draft) => {\n          draft.dataSourceNames ??= legacyFilters.dataSource ? [legacyFilters.dataSource] : [];\n          if (legacyFilters.alertState && isPromAlertingRuleState(legacyFilters.alertState)) {\n            draft.ruleState ??= legacyFilters.alertState;\n          }\n          if (legacyFilters.ruleType && isPromRuleType(legacyFilters.ruleType)) {\n            draft.ruleType ??= legacyFilters.ruleType;\n          }\n          if (draft.labels.length === 0 && legacyFilters.labels.length > 0) {\n            const legacyLabelsAsStrings = legacyFilters.labels.map(\n              ({ name, operator, value }) => `${name}${operator}${value}`\n            );\n            draft.labels.push(...legacyLabelsAsStrings);\n          }\n        })\n      );\n    }\n  }, [queryParams, updateFilters, filterState, updateQueryParams]);\n\n  return { filterState, hasActiveFilters, searchQuery, setSearchQuery, updateFilters };\n}\n\nexport const useFilteredRules = (namespaces: CombinedRuleNamespace[], filterState: RulesFilter) => {\n  return useMemo(() => {\n    const filteredRules = filterRules(namespaces, filterState);\n\n    // Totals recalculation is a workaround for the lack of server-side filtering\n    filteredRules.forEach((namespace) => {\n      namespace.groups.forEach((group) => {\n        group.rules.forEach((rule) => {\n          if (isAlertingRule(rule.promRule)) {\n            rule.instanceTotals = calculateRuleTotals(rule.promRule);\n            rule.filteredInstanceTotals = calculateRuleFilteredTotals(rule.promRule);\n          }\n        });\n\n        group.totals = calculateGroupTotals({\n          rules: group.rules.map((r) => r.promRule).filter((r): r is Rule => !!r),\n        });\n      });\n    });\n\n    return filteredRules;\n  }, [namespaces, filterState]);\n};\n\nexport const filterRules = (\n  namespaces: CombinedRuleNamespace[],\n  filterState: RulesFilter = { dataSourceNames: [], labels: [], freeFormWords: [] }\n): CombinedRuleNamespace[] => {\n  let filteredNamespaces = namespaces;\n\n  const dataSourceFilter = filterState.dataSourceNames;\n  if (dataSourceFilter.length) {\n    filteredNamespaces = filteredNamespaces.filter(({ rulesSource }) =>\n      isCloudRulesSource(rulesSource) ? dataSourceFilter.includes(rulesSource.name) : true\n    );\n  }\n\n  const namespaceFilter = filterState.namespace;\n\n  if (namespaceFilter) {\n    const namespaceHaystack = filteredNamespaces.map((ns) => ns.name);\n\n    const ufuzzy = getSearchInstance(namespaceFilter);\n    const [idxs, info, order] = ufuzzy.search(\n      namespaceHaystack,\n      namespaceFilter,\n      getOutOfOrderLimit(namespaceFilter),\n      INFO_THRESHOLD\n    );\n    if (info && order) {\n      filteredNamespaces = order.map((idx) => filteredNamespaces[info.idx[idx]]);\n    } else if (idxs) {\n      filteredNamespaces = idxs.map((idx) => filteredNamespaces[idx]);\n    }\n  }\n\n  // If a namespace and group have rules that match the rules filters then keep them.\n  return filteredNamespaces.reduce<CombinedRuleNamespace[]>(reduceNamespaces(filterState), []);\n};\n\nconst reduceNamespaces = (filterState: RulesFilter) => {\n  return (namespaceAcc: CombinedRuleNamespace[], namespace: CombinedRuleNamespace) => {\n    const groupNameFilter = filterState.groupName;\n    let filteredGroups = namespace.groups;\n\n    if (groupNameFilter) {\n      const groupsHaystack = filteredGroups.map((g) => g.name);\n      const ufuzzy = getSearchInstance(groupNameFilter);\n\n      const [idxs, info, order] = ufuzzy.search(\n        groupsHaystack,\n        groupNameFilter,\n        getOutOfOrderLimit(groupNameFilter),\n        INFO_THRESHOLD\n      );\n      if (info && order) {\n        filteredGroups = order.map((idx) => filteredGroups[info.idx[idx]]);\n      } else if (idxs) {\n        filteredGroups = idxs.map((idx) => filteredGroups[idx]);\n      }\n    }\n\n    filteredGroups = filteredGroups.reduce<CombinedRuleGroup[]>(reduceGroups(filterState), []);\n\n    if (filteredGroups.length) {\n      namespaceAcc.push({\n        ...namespace,\n        groups: filteredGroups,\n      });\n    }\n\n    return namespaceAcc;\n  };\n};\n\n// Reduces groups to only groups that have rules matching the filters\nconst reduceGroups = (filterState: RulesFilter) => {\n  const ruleNameQuery = filterState.ruleName ?? filterState.freeFormWords.join(' ');\n\n  return (groupAcc: CombinedRuleGroup[], group: CombinedRuleGroup) => {\n    let filteredRules = group.rules;\n\n    if (ruleNameQuery) {\n      const rulesHaystack = filteredRules.map((r) => r.name);\n      const ufuzzy = getSearchInstance(ruleNameQuery);\n\n      const [idxs, info, order] = ufuzzy.search(\n        rulesHaystack,\n        ruleNameQuery,\n        getOutOfOrderLimit(ruleNameQuery),\n        INFO_THRESHOLD\n      );\n      if (info && order) {\n        filteredRules = order.map((idx) => filteredRules[info.idx[idx]]);\n      } else if (idxs) {\n        filteredRules = idxs.map((idx) => filteredRules[idx]);\n      }\n    }\n\n    filteredRules = filteredRules.filter((rule) => {\n      const promRuleDefition = rule.promRule;\n\n      // this will track what properties we're checking predicates for\n      // all predicates must be \"true\" to include the rule in the result set\n      // (this will result in an AND operation for our matchers)\n      const matchesFilterFor = chain(filterState)\n        //  keep this list of properties we filter for here up-to-date \n        // We are ignoring predicates we've matched before we get here (like \"freeFormWords\")\n        .pick(['ruleType', 'dataSourceNames', 'ruleHealth', 'labels', 'ruleState', 'dashboardUid'])\n        .omitBy(isEmpty)\n        .mapValues(() => false)\n        .value();\n\n      if ('ruleType' in matchesFilterFor && filterState.ruleType === promRuleDefition?.type) {\n        matchesFilterFor.ruleType = true;\n      }\n\n      if ('dataSourceNames' in matchesFilterFor) {\n        if (isGrafanaRulerRule(rule.rulerRule)) {\n          const doesNotQueryDs = isQueryingDataSource(rule.rulerRule, filterState);\n\n          if (doesNotQueryDs) {\n            matchesFilterFor.dataSourceNames = true;\n          }\n        } else {\n          matchesFilterFor.dataSourceNames = true;\n        }\n      }\n\n      if ('ruleHealth' in filterState && promRuleDefition) {\n        const ruleHealth = getRuleHealth(promRuleDefition.health);\n        const match = filterState.ruleHealth === ruleHealth;\n\n        if (match) {\n          matchesFilterFor.ruleHealth = true;\n        }\n      }\n\n      // Query strings can match alert name, label keys, and label values\n      if ('labels' in matchesFilterFor) {\n        const matchers = compact(filterState.labels.map(looseParseMatcher));\n\n        // check if the label we query for exists in _either_ the rule definition or in any of its alerts\n        const doRuleLabelsMatchQuery = matchers.length > 0 && labelsMatchMatchers(rule.labels, matchers);\n        const doAlertsContainMatchingLabels =\n          matchers.length > 0 &&\n          promRuleDefition &&\n          promRuleDefition.type === PromRuleType.Alerting &&\n          promRuleDefition.alerts &&\n          promRuleDefition.alerts.some((alert) => labelsMatchMatchers(alert.labels, matchers));\n\n        if (doRuleLabelsMatchQuery || doAlertsContainMatchingLabels) {\n          matchesFilterFor.labels = true;\n        }\n      }\n\n      if ('ruleState' in matchesFilterFor) {\n        const promRule = rule.promRule;\n        const hasPromRuleDefinition = promRule && isAlertingRule(promRule);\n\n        const ruleStateMatches = hasPromRuleDefinition && promRule.state === filterState.ruleState;\n\n        if (ruleStateMatches) {\n          matchesFilterFor.ruleState = true;\n        }\n      }\n\n      if (\n        'dashboardUid' in matchesFilterFor &&\n        rule.annotations[Annotation.dashboardUID] === filterState.dashboardUid\n      ) {\n        matchesFilterFor.dashboardUid = true;\n      }\n\n      return Object.values(matchesFilterFor).every((match) => match === true);\n    });\n\n    // Add rules to the group that match the rule list filters\n    if (filteredRules.length) {\n      groupAcc.push({\n        ...group,\n        rules: filteredRules,\n      });\n    }\n    return groupAcc;\n  };\n};\n\n// apply an outOfOrder limit which helps to limit the number of permutations to search for\n// and prevents the browser from hanging\nfunction getOutOfOrderLimit(searchTerm: string) {\n  const ufuzzy = getSearchInstance(searchTerm);\n\n  const termCount = ufuzzy.split(searchTerm).length;\n  return termCount < 5 ? 4 : 0;\n}\n\nfunction looseParseMatcher(matcherQuery: string): Matcher | undefined {\n  try {\n    return parseMatcher(matcherQuery);\n  } catch {\n    // Try to createa a matcher than matches all values for a given key\n    return { name: matcherQuery, value: '', isRegex: true, isEqual: true };\n  }\n}\n\n// determine which search instance to use, very long search terms should match without checking for Levenshtein distance\nfunction getSearchInstance(searchTerm: string): uFuzzy {\n  const searchTermExeedsMaxNeedleSize = searchTerm.length > MAX_NEEDLE_SIZE;\n\n  // Options details can be found here https://github.com/leeoniya/uFuzzy#options\n  // The following configuration complies with Damerau-Levenshtein distance\n  // https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance\n  return new uFuzzy({\n    // we will disable Levenshtein distance for very long search terms  this will help with performance\n    // as it will avoid creating a very complex regular expression\n    intraMode: searchTermExeedsMaxNeedleSize ? 0 : 1,\n    // split search terms only on whitespace, this will significantly reduce the amount of regex permutations to test\n    // and is important for performance with large amount of rules and large needle\n    interSplit: '\\\\s+',\n  });\n}\n\nconst isQueryingDataSource = (rulerRule: RulerGrafanaRuleDTO, filterState: RulesFilter): boolean => {\n  if (!filterState.dataSourceNames?.length) {\n    return true;\n  }\n\n  return !!rulerRule.grafana_alert.data.find((query) => {\n    if (!query.datasourceUid) {\n      return false;\n    }\n    const ds = getDataSourceSrv().getInstanceSettings(query.datasourceUid);\n    return ds?.name && filterState?.dataSourceNames?.includes(ds.name);\n  });\n};\n","import React, { useState } from 'react';\nimport { PopValueActionMeta, RemoveValueActionMeta } from 'react-select';\n\nimport {\n  DataSourceInstanceSettings,\n  getDataSourceUID,\n  isUnsignedPluginSignature,\n  SelectableValue,\n} from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { getDataSourceSrv, DataSourcePickerState, DataSourcePickerProps } from '@grafana/runtime';\nimport { ExpressionDatasourceRef } from '@grafana/runtime/src/utils/DataSourceWithBackend';\nimport { ActionMeta, HorizontalGroup, PluginSignatureBadge, MultiSelect } from '@grafana/ui';\n\nimport { isDataSourceManagingAlerts } from '../../utils/datasource';\n\nexport interface MultipleDataSourcePickerProps extends Omit<DataSourcePickerProps, 'onChange' | 'current'> {\n  onChange: (ds: DataSourceInstanceSettings, action: 'add' | 'remove') => void;\n  current: string[] | undefined;\n}\n\nexport const MultipleDataSourcePicker = (props: MultipleDataSourcePickerProps) => {\n  const dataSourceSrv = getDataSourceSrv();\n\n  const [state, setState] = useState<DataSourcePickerState>();\n\n  const onChange = (items: Array<SelectableValue<string>>, actionMeta: ActionMeta) => {\n    if (actionMeta.action === 'clear' && props.onClear) {\n      props.onClear();\n      return;\n    }\n\n    const selectedItem = items[items.length - 1];\n\n    let dataSourceName, action: 'add' | 'remove';\n\n    if (actionMeta.action === 'pop-value' || actionMeta.action === 'remove-value') {\n      const castedActionMeta:\n        | RemoveValueActionMeta<SelectableValue<string>>\n        | PopValueActionMeta<SelectableValue<string>> = actionMeta;\n      dataSourceName = castedActionMeta.removedValue?.value;\n      action = 'remove';\n    } else {\n      dataSourceName = selectedItem.value;\n      action = 'add';\n    }\n\n    const dsSettings = dataSourceSrv.getInstanceSettings(dataSourceName);\n\n    if (dsSettings) {\n      props.onChange(dsSettings, action);\n      setState({ error: undefined });\n    }\n  };\n\n  const getCurrentValue = (): Array<SelectableValue<string>> | undefined => {\n    const { current, hideTextValue, noDefault } = props;\n    if (!current && noDefault) {\n      return;\n    }\n\n    return current?.map((dataSourceName: string) => {\n      const ds = dataSourceSrv.getInstanceSettings(dataSourceName);\n      if (ds) {\n        return {\n          label: ds.name.slice(0, 37),\n          value: ds.name,\n          imgUrl: ds.meta.info.logos.small,\n          hideText: hideTextValue,\n          meta: ds.meta,\n        };\n      }\n\n      const uid = getDataSourceUID(dataSourceName);\n\n      if (uid === ExpressionDatasourceRef.uid || uid === ExpressionDatasourceRef.name) {\n        return { label: uid, value: uid, hideText: hideTextValue };\n      }\n\n      return {\n        label: (uid ?? 'no name') + ' - not found',\n        value: uid ?? undefined,\n        imgUrl: '',\n        hideText: hideTextValue,\n      };\n    });\n  };\n\n  const getDataSourceOptions = () => {\n    const { alerting, tracing, metrics, mixed, dashboard, variables, annotations, pluginId, type, filter, logs } =\n      props;\n\n    const dataSources = dataSourceSrv.getList({\n      alerting,\n      tracing,\n      metrics,\n      logs,\n      dashboard,\n      mixed,\n      variables,\n      annotations,\n      pluginId,\n      filter,\n      type,\n    });\n\n    const alertManagingDs = dataSources.filter(isDataSourceManagingAlerts).map((ds) => ({\n      value: ds.name,\n      label: `${ds.name}${ds.isDefault ? ' (default)' : ''}`,\n      imgUrl: ds.meta.info.logos.small,\n      meta: ds.meta,\n    }));\n\n    const nonAlertManagingDs = dataSources\n      .filter((ds) => !isDataSourceManagingAlerts(ds))\n      .map((ds) => ({\n        value: ds.name,\n        label: `${ds.name}${ds.isDefault ? ' (default)' : ''}`,\n        imgUrl: ds.meta.info.logos.small,\n        meta: ds.meta,\n      }));\n\n    const groupedOptions = [\n      { label: 'Data sources with configured alert rules', options: alertManagingDs, expanded: true },\n      { label: 'Other data sources', options: nonAlertManagingDs, expanded: true },\n    ];\n\n    return groupedOptions;\n  };\n\n  const {\n    autoFocus,\n    onBlur,\n    onClear,\n    openMenuOnFocus,\n    placeholder,\n    width,\n    inputId,\n    disabled = false,\n    isLoading = false,\n  } = props;\n\n  const options = getDataSourceOptions();\n  const value = getCurrentValue();\n  const isClearable = typeof onClear === 'function';\n\n  return (\n    <div data-testid={selectors.components.DataSourcePicker.container}>\n      <MultiSelect\n        isLoading={isLoading}\n        disabled={disabled}\n        data-testid={selectors.components.DataSourcePicker.inputV2}\n        inputId={inputId || 'data-source-picker'}\n        className=\"ds-picker select-container\"\n        isClearable={isClearable}\n        backspaceRemovesValue={true}\n        onChange={onChange}\n        options={options}\n        autoFocus={autoFocus}\n        onBlur={onBlur}\n        width={width}\n        openMenuOnFocus={openMenuOnFocus}\n        maxMenuHeight={500}\n        placeholder={placeholder}\n        noOptionsMessage=\"No datasources found\"\n        value={value ?? []}\n        invalid={Boolean(state?.error) || Boolean(props.invalid)}\n        getOptionLabel={(o) => {\n          if (o.meta && isUnsignedPluginSignature(o.meta.signature) && o !== value) {\n            return (\n              <HorizontalGroup align=\"center\" justify=\"space-between\" height=\"auto\">\n                <span>{o.label}</span> <PluginSignatureBadge status={o.meta.signature} />\n              </HorizontalGroup>\n            );\n          }\n          return o.label || '';\n        }}\n      />\n    </div>\n  );\n};\n","import { css } from '@emotion/css';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { DataSourceInstanceSettings, GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Button, Field, Icon, Input, Label, RadioButtonGroup, Stack, Tooltip, useStyles2 } from '@grafana/ui';\nimport { DashboardPicker } from 'app/core/components/Select/DashboardPicker';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { PromAlertingRuleState, PromRuleType } from 'app/types/unified-alerting-dto';\n\nimport { logInfo, LogMessages } from '../../Analytics';\nimport { useRulesFilter } from '../../hooks/useFilteredRules';\nimport { RuleHealth } from '../../search/rulesSearchParser';\nimport { alertStateToReadable } from '../../utils/rules';\nimport { HoverCard } from '../HoverCard';\n\nimport { MultipleDataSourcePicker } from './MultipleDataSourcePicker';\n\nconst ViewOptions: SelectableValue[] = [\n  {\n    icon: 'folder',\n    label: 'Grouped',\n    value: 'grouped',\n  },\n  {\n    icon: 'list-ul',\n    label: 'List',\n    value: 'list',\n  },\n  {\n    icon: 'heart-rate',\n    label: 'State',\n    value: 'state',\n  },\n];\n\nconst RuleTypeOptions: SelectableValue[] = [\n  {\n    label: 'Alert ',\n    value: PromRuleType.Alerting,\n  },\n  {\n    label: 'Recording ',\n    value: PromRuleType.Recording,\n  },\n];\n\nconst RuleHealthOptions: SelectableValue[] = [\n  { label: 'Ok', value: RuleHealth.Ok },\n  { label: 'No Data', value: RuleHealth.NoData },\n  { label: 'Error', value: RuleHealth.Error },\n];\n\ninterface RulesFilerProps {\n  onFilterCleared?: () => void;\n}\n\nconst RuleStateOptions = Object.entries(PromAlertingRuleState).map(([key, value]) => ({\n  label: alertStateToReadable(value),\n  value,\n}));\n\nconst RulesFilter = ({ onFilterCleared = () => undefined }: RulesFilerProps) => {\n  const styles = useStyles2(getStyles);\n  const [queryParams, setQueryParams] = useQueryParams();\n  const { filterState, hasActiveFilters, searchQuery, setSearchQuery, updateFilters } = useRulesFilter();\n\n  // This key is used to force a rerender on the inputs when the filters are cleared\n  const [filterKey, setFilterKey] = useState<number>(Math.floor(Math.random() * 100));\n  const dataSourceKey = `dataSource-${filterKey}`;\n  const queryStringKey = `queryString-${filterKey}`;\n\n  const searchQueryRef = useRef<HTMLInputElement | null>(null);\n  const { handleSubmit, register, setValue } = useForm<{ searchQuery: string }>({ defaultValues: { searchQuery } });\n  const { ref, ...rest } = register('searchQuery');\n\n  useEffect(() => {\n    setValue('searchQuery', searchQuery);\n  }, [searchQuery, setValue]);\n\n  const handleDataSourceChange = (dataSourceValue: DataSourceInstanceSettings, action: 'add' | 'remove') => {\n    const dataSourceNames =\n      action === 'add'\n        ? [...filterState.dataSourceNames].concat([dataSourceValue.name])\n        : filterState.dataSourceNames.filter((name) => name !== dataSourceValue.name);\n\n    updateFilters({\n      ...filterState,\n      dataSourceNames,\n    });\n\n    setFilterKey((key) => key + 1);\n  };\n\n  const handleDashboardChange = (dashboardUid: string | undefined) => {\n    updateFilters({ ...filterState, dashboardUid });\n  };\n\n  const clearDataSource = () => {\n    updateFilters({ ...filterState, dataSourceNames: [] });\n    setFilterKey((key) => key + 1);\n  };\n\n  const handleAlertStateChange = (value: PromAlertingRuleState) => {\n    logInfo(LogMessages.clickingAlertStateFilters);\n    updateFilters({ ...filterState, ruleState: value });\n  };\n\n  const handleViewChange = (view: string) => {\n    setQueryParams({ view });\n  };\n\n  const handleRuleTypeChange = (ruleType: PromRuleType) => {\n    updateFilters({ ...filterState, ruleType });\n  };\n\n  const handleRuleHealthChange = (ruleHealth: RuleHealth) => {\n    updateFilters({ ...filterState, ruleHealth });\n  };\n\n  const handleClearFiltersClick = () => {\n    setSearchQuery(undefined);\n    onFilterCleared();\n\n    setTimeout(() => setFilterKey(filterKey + 1), 100);\n  };\n\n  const searchIcon = <Icon name={'search'} />;\n  return (\n    <div className={styles.container}>\n      <Stack direction=\"column\" gap={1}>\n        <Stack direction=\"row\" gap={1} wrap=\"wrap\">\n          <Field\n            className={styles.dsPickerContainer}\n            label={\n              <Label htmlFor=\"data-source-picker\">\n                <Stack gap={0.5}>\n                  <span>Search by data sources</span>\n                  <Tooltip\n                    content={\n                      <div>\n                        <p>\n                          Data sources containing configured alert rules are Mimir or Loki data sources where alert\n                          rules are stored and evaluated in the data source itself.\n                        </p>\n                        <p>\n                          In these data sources, you can select Manage alerts via Alerting UI to be able to manage these\n                          alert rules in the Grafana UI as well as in the data source where they were configured.\n                        </p>\n                      </div>\n                    }\n                  >\n                    <Icon id=\"data-source-picker-inline-help\" name=\"info-circle\" size=\"sm\" />\n                  </Tooltip>\n                </Stack>\n              </Label>\n            }\n          >\n            <MultipleDataSourcePicker\n              key={dataSourceKey}\n              alerting\n              noDefault\n              placeholder=\"All data sources\"\n              current={filterState.dataSourceNames}\n              onChange={handleDataSourceChange}\n              onClear={clearDataSource}\n            />\n          </Field>\n\n          <Field\n            className={styles.dashboardPickerContainer}\n            label={<Label htmlFor=\"filters-dashboard-picker\">Dashboard</Label>}\n          >\n            {/* The key prop is to clear the picker value */}\n            {/* DashboardPicker doesn't do that itself when value is undefined */}\n            <DashboardPicker\n              inputId=\"filters-dashboard-picker\"\n              key={filterState.dashboardUid ? 'dashboard-defined' : 'dashboard-not-defined'}\n              value={filterState.dashboardUid}\n              onChange={(value) => handleDashboardChange(value?.uid)}\n              isClearable\n              cacheOptions\n            />\n          </Field>\n\n          <div>\n            <Label>State</Label>\n            <RadioButtonGroup\n              options={RuleStateOptions}\n              value={filterState.ruleState}\n              onChange={handleAlertStateChange}\n            />\n          </div>\n          <div>\n            <Label>Rule type</Label>\n            <RadioButtonGroup options={RuleTypeOptions} value={filterState.ruleType} onChange={handleRuleTypeChange} />\n          </div>\n          <div>\n            <Label>Health</Label>\n            <RadioButtonGroup\n              options={RuleHealthOptions}\n              value={filterState.ruleHealth}\n              onChange={handleRuleHealthChange}\n            />\n          </div>\n        </Stack>\n        <Stack direction=\"column\" gap={1}>\n          <Stack direction=\"row\" gap={1}>\n            <form\n              className={styles.searchInput}\n              onSubmit={handleSubmit((data) => {\n                setSearchQuery(data.searchQuery);\n                searchQueryRef.current?.blur();\n              })}\n            >\n              <Field\n                label={\n                  <Label htmlFor=\"rulesSearchInput\">\n                    <Stack gap={0.5}>\n                      <span>Search</span>\n                      <HoverCard content={<SearchQueryHelp />}>\n                        <Icon name=\"info-circle\" size=\"sm\" tabIndex={0} />\n                      </HoverCard>\n                    </Stack>\n                  </Label>\n                }\n              >\n                <Input\n                  id=\"rulesSearchInput\"\n                  key={queryStringKey}\n                  prefix={searchIcon}\n                  ref={(e) => {\n                    ref(e);\n                    searchQueryRef.current = e;\n                  }}\n                  {...rest}\n                  placeholder=\"Search\"\n                  data-testid=\"search-query-input\"\n                />\n              </Field>\n              <input type=\"submit\" hidden />\n            </form>\n            <div>\n              <Label>View as</Label>\n              <RadioButtonGroup\n                options={ViewOptions}\n                value={String(queryParams['view'] ?? ViewOptions[0].value)}\n                onChange={handleViewChange}\n              />\n            </div>\n          </Stack>\n          {hasActiveFilters && (\n            <div>\n              <Button fullWidth={false} icon=\"times\" variant=\"secondary\" onClick={handleClearFiltersClick}>\n                Clear filters\n              </Button>\n            </div>\n          )}\n        </Stack>\n      </Stack>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css({\n      marginBottom: theme.spacing(1),\n    }),\n    dsPickerContainer: css({\n      width: theme.spacing(60),\n      flexGrow: 0,\n      margin: 0,\n    }),\n    dashboardPickerContainer: css({\n      minWidth: theme.spacing(50),\n    }),\n    searchInput: css({\n      flex: 1,\n      margin: 0,\n    }),\n  };\n};\n\nfunction SearchQueryHelp() {\n  const styles = useStyles2(helpStyles);\n\n  return (\n    <div>\n      <div>Search syntax allows to query alert rules by the parameters defined below.</div>\n      <hr />\n      <div className={styles.grid}>\n        <div>Filter type</div>\n        <div>Expression</div>\n        <HelpRow title=\"Datasources\" expr=\"datasource:mimir datasource:prometheus\" />\n        <HelpRow title=\"Folder/Namespace\" expr=\"namespace:global\" />\n        <HelpRow title=\"Group\" expr=\"group:cpu-usage\" />\n        <HelpRow title=\"Rule\" expr='rule:\"cpu 80%\"' />\n        <HelpRow title=\"Labels\" expr=\"label:team=A label:cluster=a1\" />\n        <HelpRow title=\"State\" expr=\"state:firing|normal|pending\" />\n        <HelpRow title=\"Type\" expr=\"type:alerting|recording\" />\n        <HelpRow title=\"Health\" expr=\"health:ok|nodata|error\" />\n        <HelpRow title=\"Dashboard UID\" expr=\"dashboard:eadde4c7-54e6-4964-85c0-484ab852fd04\" />\n      </div>\n    </div>\n  );\n}\n\nfunction HelpRow({ title, expr }: { title: string; expr: string }) {\n  const styles = useStyles2(helpStyles);\n\n  return (\n    <>\n      <div>{title}</div>\n      <code className={styles.code}>{expr}</code>\n    </>\n  );\n}\n\nconst helpStyles = (theme: GrafanaTheme2) => ({\n  grid: css({\n    display: 'grid',\n    gridTemplateColumns: 'max-content auto',\n    gap: theme.spacing(1),\n    alignItems: 'center',\n  }),\n  code: css({\n    display: 'block',\n    textAlign: 'center',\n  }),\n});\n\nexport default RulesFilter;\n","import { css } from '@emotion/css';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useAsyncFn, useInterval } from 'react-use';\n\nimport { GrafanaTheme2, urlUtil } from '@grafana/data';\nimport { Button, LinkButton, useStyles2, withErrorBoundary } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { useDispatch } from 'app/types';\n\nimport { CombinedRuleNamespace } from '../../../types/unified-alerting';\n\nimport { LogMessages, logInfo, trackRuleListNavigation } from './Analytics';\nimport { AlertingPageWrapper } from './components/AlertingPageWrapper';\nimport { NoRulesSplash } from './components/rules/NoRulesCTA';\nimport { INSTANCES_DISPLAY_LIMIT } from './components/rules/RuleDetails';\nimport { RuleListErrors } from './components/rules/RuleListErrors';\nimport { RuleListGroupView } from './components/rules/RuleListGroupView';\nimport { RuleListStateView } from './components/rules/RuleListStateView';\nimport { RuleStats } from './components/rules/RuleStats';\nimport RulesFilter from './components/rules/RulesFilter';\nimport { AlertingAction, useAlertingAbility } from './hooks/useAbilities';\nimport { useCombinedRuleNamespaces } from './hooks/useCombinedRuleNamespaces';\nimport { useFilteredRules, useRulesFilter } from './hooks/useFilteredRules';\nimport { useUnifiedAlertingSelector } from './hooks/useUnifiedAlertingSelector';\nimport { fetchAllPromAndRulerRulesAction } from './state/actions';\nimport { RULE_LIST_POLL_INTERVAL_MS } from './utils/constants';\nimport { getAllRulesSourceNames } from './utils/datasource';\n\nconst VIEWS = {\n  groups: RuleListGroupView,\n  state: RuleListStateView,\n};\n\n// make sure we ask for 1 more so we show the \"show x more\" button\nconst LIMIT_ALERTS = INSTANCES_DISPLAY_LIMIT + 1;\n\nconst RuleList = withErrorBoundary(\n  () => {\n    const dispatch = useDispatch();\n    const styles = useStyles2(getStyles);\n    const rulesDataSourceNames = useMemo(getAllRulesSourceNames, []);\n    const [expandAll, setExpandAll] = useState(false);\n\n    const onFilterCleared = useCallback(() => setExpandAll(false), []);\n\n    const [queryParams] = useQueryParams();\n    const { filterState, hasActiveFilters } = useRulesFilter();\n\n    const view = VIEWS[queryParams['view'] as keyof typeof VIEWS]\n      ? (queryParams['view'] as keyof typeof VIEWS)\n      : 'groups';\n\n    const ViewComponent = VIEWS[view];\n\n    const promRuleRequests = useUnifiedAlertingSelector((state) => state.promRules);\n    const rulerRuleRequests = useUnifiedAlertingSelector((state) => state.rulerRules);\n\n    const loading = rulesDataSourceNames.some(\n      (name) => promRuleRequests[name]?.loading || rulerRuleRequests[name]?.loading\n    );\n\n    const promRequests = Object.entries(promRuleRequests);\n    const rulerRequests = Object.entries(rulerRuleRequests);\n\n    const allPromLoaded = promRequests.every(\n      ([_, state]) => state.dispatched && (state?.result !== undefined || state?.error !== undefined)\n    );\n    const allRulerLoaded = rulerRequests.every(\n      ([_, state]) => state.dispatched && (state?.result !== undefined || state?.error !== undefined)\n    );\n\n    const allPromEmpty = promRequests.every(([_, state]) => state.dispatched && state?.result?.length === 0);\n\n    const allRulerEmpty = rulerRequests.every(([_, state]) => {\n      const rulerRules = Object.entries(state?.result ?? {});\n      const noRules = rulerRules.every(([_, result]) => result?.length === 0);\n      return noRules && state.dispatched;\n    });\n\n    const limitAlerts = hasActiveFilters ? undefined : LIMIT_ALERTS;\n    // Trigger data refresh only when the RULE_LIST_POLL_INTERVAL_MS elapsed since the previous load FINISHED\n    const [_, fetchRules] = useAsyncFn(async () => {\n      if (!loading) {\n        await dispatch(fetchAllPromAndRulerRulesAction(false, { limitAlerts }));\n      }\n    }, [loading, limitAlerts, dispatch]);\n\n    useEffect(() => {\n      trackRuleListNavigation().catch(() => {});\n    }, []);\n\n    // fetch rules, then poll every RULE_LIST_POLL_INTERVAL_MS\n    useEffect(() => {\n      dispatch(fetchAllPromAndRulerRulesAction(false, { limitAlerts }));\n    }, [dispatch, limitAlerts]);\n    useInterval(fetchRules, RULE_LIST_POLL_INTERVAL_MS);\n\n    // Show splash only when we loaded all of the data sources and none of them has alerts\n    const hasNoAlertRulesCreatedYet =\n      allPromLoaded && allPromEmpty && promRequests.length > 0 && allRulerEmpty && allRulerLoaded;\n    const hasAlertRulesCreated = !hasNoAlertRulesCreatedYet;\n\n    const combinedNamespaces: CombinedRuleNamespace[] = useCombinedRuleNamespaces();\n    const filteredNamespaces = useFilteredRules(combinedNamespaces, filterState);\n\n    return (\n      // We don't want to show the Loading... indicator for the whole page.\n      // We show separate indicators for Grafana-managed and Cloud rules\n      <AlertingPageWrapper navId=\"alert-list\" isLoading={false} actions={hasAlertRulesCreated && <CreateAlertButton />}>\n        <RuleListErrors />\n        <RulesFilter onFilterCleared={onFilterCleared} />\n        {hasAlertRulesCreated && (\n          <>\n            <div className={styles.break} />\n            <div className={styles.buttonsContainer}>\n              <div className={styles.statsContainer}>\n                {view === 'groups' && hasActiveFilters && (\n                  <Button\n                    className={styles.expandAllButton}\n                    icon={expandAll ? 'angle-double-up' : 'angle-double-down'}\n                    variant=\"secondary\"\n                    onClick={() => setExpandAll(!expandAll)}\n                  >\n                    {expandAll ? 'Collapse all' : 'Expand all'}\n                  </Button>\n                )}\n                <RuleStats namespaces={filteredNamespaces} />\n              </div>\n            </div>\n          </>\n        )}\n        {hasNoAlertRulesCreatedYet && <NoRulesSplash />}\n        {hasAlertRulesCreated && <ViewComponent expandAll={expandAll} namespaces={filteredNamespaces} />}\n      </AlertingPageWrapper>\n    );\n  },\n  { style: 'page' }\n);\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  break: css`\n    width: 100%;\n    height: 0;\n    margin-bottom: ${theme.spacing(2)};\n    border-bottom: solid 1px ${theme.colors.border.medium};\n  `,\n  buttonsContainer: css`\n    margin-bottom: ${theme.spacing(2)};\n    display: flex;\n    justify-content: space-between;\n  `,\n  statsContainer: css`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  `,\n  expandAllButton: css`\n    margin-right: ${theme.spacing(1)};\n  `,\n});\n\nexport default RuleList;\n\nexport function CreateAlertButton() {\n  const [createRuleSupported, createRuleAllowed] = useAlertingAbility(AlertingAction.CreateAlertRule);\n  const [createCloudRuleSupported, createCloudRuleAllowed] = useAlertingAbility(AlertingAction.CreateExternalAlertRule);\n\n  const location = useLocation();\n\n  const canCreateCloudRules = createCloudRuleSupported && createCloudRuleAllowed;\n\n  const canCreateGrafanaRules = createRuleSupported && createRuleAllowed;\n\n  if (canCreateGrafanaRules || canCreateCloudRules) {\n    return (\n      <LinkButton\n        href={urlUtil.renderUrl('alerting/new/alerting', { returnTo: location.pathname + location.search })}\n        icon=\"plus\"\n        onClick={() => logInfo(LogMessages.alertRuleFromScratch)}\n      >\n        New alert rule\n      </LinkButton>\n    );\n  }\n  return null;\n}\n","import { chain, filter } from 'lodash';\nimport React, { PropsWithChildren } from 'react';\n\nimport {\n  Abilities,\n  Action,\n  AlertingAction,\n  AlertmanagerAction,\n  useAlertingAbilities,\n  useAllAlertmanagerAbilities,\n} from '../hooks/useAbilities';\n\ninterface AuthorizeProps extends PropsWithChildren {\n  actions: AlertmanagerAction[] | AlertingAction[];\n}\n\nexport const Authorize = ({ actions, children }: AuthorizeProps) => {\n  const alertmanagerActions = filter(actions, isAlertmanagerAction) as AlertmanagerAction[];\n  const alertSourceActions = filter(actions, isAlertingAction) as AlertingAction[];\n\n  if (alertmanagerActions.length) {\n    return <AuthorizeAlertmanager actions={alertmanagerActions}>{children}</AuthorizeAlertmanager>;\n  }\n\n  if (alertSourceActions.length) {\n    return <AuthorizeAlertsource actions={alertSourceActions}>{children}</AuthorizeAlertsource>;\n  }\n\n  return null;\n};\n\ninterface ActionsProps<T extends Action> extends PropsWithChildren {\n  actions: T[];\n}\n\nconst AuthorizeAlertmanager = ({ actions, children }: ActionsProps<AlertmanagerAction>) => {\n  const alertmanagerAbilties = useAllAlertmanagerAbilities();\n  const allowed = actionsAllowed(alertmanagerAbilties, actions);\n\n  if (allowed) {\n    return <>{children}</>;\n  } else {\n    return null;\n  }\n};\n\nconst AuthorizeAlertsource = ({ actions, children }: ActionsProps<AlertingAction>) => {\n  const alertSourceAbilities = useAlertingAbilities();\n  const allowed = actionsAllowed(alertSourceAbilities, actions);\n\n  if (allowed) {\n    return <>{children}</>;\n  } else {\n    return null;\n  }\n};\n\n// TODO add some authorize helper components for alert source and individual alert rules\n\n// check if some action is allowed from the abilities\nfunction actionsAllowed<T extends Action>(abilities: Abilities<T>, actions: T[]) {\n  return chain(abilities)\n    .pick(actions)\n    .values()\n    .value()\n    .some(([_supported, allowed]) => allowed === true);\n}\n\nfunction isAlertmanagerAction(action: AlertmanagerAction) {\n  return Object.values(AlertmanagerAction).includes(action);\n}\n\nfunction isAlertingAction(action: AlertingAction) {\n  return Object.values(AlertingAction).includes(action);\n}\n","import { css } from '@emotion/css';\nimport saveAs from 'file-saver';\nimport React, { useCallback, useMemo } from 'react';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, Button, ClipboardButton, CodeEditor, TextLink, useStyles2 } from '@grafana/ui';\n\nimport { allGrafanaExportProviders, ExportFormats, ExportProvider, ProvisioningType } from './providers';\n\ninterface FileExportPreviewProps {\n  format: ExportFormats;\n  textDefinition: string;\n\n  /*** Filename without extension ***/\n  downloadFileName: string;\n  onClose: () => void;\n}\n\nexport function FileExportPreview({ format, textDefinition, downloadFileName, onClose }: FileExportPreviewProps) {\n  const styles = useStyles2(fileExportPreviewStyles);\n  const provider = allGrafanaExportProviders[format];\n\n  const onDownload = useCallback(() => {\n    const blob = new Blob([textDefinition], {\n      type: `application/${format};charset=utf-8`,\n    });\n    saveAs(blob, `${downloadFileName}.${format}`);\n  }, [textDefinition, downloadFileName, format]);\n\n  const formattedTextDefinition = useMemo(() => {\n    return provider.formatter ? provider.formatter(textDefinition) : textDefinition;\n  }, [provider, textDefinition]);\n\n  return (\n    // TODO Handle empty content\n    <div className={styles.container}>\n      <FileExportInlineDocumentation exportProvider={provider} />\n      <div className={styles.content}>\n        <AutoSizer disableWidth>\n          {({ height }) => (\n            <CodeEditor\n              width=\"100%\"\n              height={height}\n              language={format}\n              value={formattedTextDefinition}\n              monacoOptions={{\n                minimap: {\n                  enabled: false,\n                },\n                scrollBeyondLastLine: false,\n                lineNumbers: 'on',\n                readOnly: true,\n              }}\n            />\n          )}\n        </AutoSizer>\n      </div>\n      <div className={styles.actions}>\n        <Button variant=\"secondary\" onClick={onClose}>\n          Cancel\n        </Button>\n        <ClipboardButton icon=\"copy\" getText={() => textDefinition}>\n          Copy code\n        </ClipboardButton>\n        <Button icon=\"download-alt\" onClick={onDownload}>\n          Download\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nconst fileExportPreviewStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    gap: ${theme.spacing(2)};\n  `,\n  content: css`\n    flex: 1 1 100%;\n  `,\n  actions: css`\n    flex: 0;\n    justify-content: flex-end;\n    display: flex;\n    gap: ${theme.spacing(1)};\n  `,\n});\n\nfunction FileExportInlineDocumentation({ exportProvider }: { exportProvider: ExportProvider<unknown> }) {\n  const { name, type } = exportProvider;\n\n  const exportInlineDoc: Record<ProvisioningType, { title: string; component: React.ReactNode }> = {\n    file: {\n      title: 'File-provisioning format',\n      component: (\n        <>\n          {name} format is only valid for File Provisioning.{' '}\n          <TextLink\n            href=\"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/\"\n            external\n          >\n            Read more in the docs.\n          </TextLink>\n        </>\n      ),\n    },\n    api: {\n      title: 'API-provisioning format',\n      component: (\n        <>\n          {name} format is only valid for API Provisioning.{' '}\n          <TextLink\n            href=\"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/http-api-provisioning/\"\n            external\n          >\n            Read more in the docs.\n          </TextLink>\n        </>\n      ),\n    },\n    terraform: {\n      title: 'Terraform-provisioning format',\n      component: (\n        <>\n          {name} format is only valid for Terraform Provisioning.{' '}\n          <TextLink\n            href=\"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/\"\n            external\n          >\n            Read more in the docs.\n          </TextLink>\n        </>\n      ),\n    },\n  };\n\n  const { title, component } = exportInlineDoc[type];\n\n  return (\n    <Alert title={title} severity=\"info\" bottomSpacing={0} topSpacing={0}>\n      {component}\n    </Alert>\n  );\n}\n","import React from 'react';\n\nimport { Drawer } from '@grafana/ui';\n\nimport { RuleInspectorTabs } from '../rule-editor/RuleInspector';\n\nimport { ExportFormats, ExportProvider } from './providers';\n\ninterface GrafanaExportDrawerProps {\n  activeTab: ExportFormats;\n  onTabChange: (tab: ExportFormats) => void;\n  children: React.ReactNode;\n  onClose: () => void;\n  formatProviders: Array<ExportProvider<ExportFormats>>;\n  title?: string;\n}\n\nexport function GrafanaExportDrawer({\n  activeTab,\n  onTabChange,\n  children,\n  onClose,\n  formatProviders,\n  title = 'Export',\n}: GrafanaExportDrawerProps) {\n  const grafanaRulesTabs = Object.values(formatProviders).map((provider) => ({\n    label: provider.name,\n    value: provider.exportFormat,\n  }));\n  return (\n    <Drawer\n      title={title}\n      subtitle=\"Select the format and download the file or copy the contents to clipboard\"\n      tabs={\n        <RuleInspectorTabs<ExportFormats> tabs={grafanaRulesTabs} setActiveTab={onTabChange} activeTab={activeTab} />\n      }\n      onClose={onClose}\n      size=\"md\"\n    >\n      {children}\n    </Drawer>\n  );\n}\n","export type ProvisioningType = 'file' | 'api' | 'terraform';\n\nexport interface ExportProvider<TFormat> {\n  name: string;\n  exportFormat: TFormat;\n  type: ProvisioningType;\n  formatter?: (raw: string) => string;\n}\n\nexport const JsonExportProvider: ExportProvider<'json'> = {\n  name: 'JSON',\n  exportFormat: 'json',\n  type: 'file',\n  formatter: (raw: string) => {\n    try {\n      return JSON.stringify(JSON.parse(raw), null, 4);\n    } catch (e) {\n      return raw;\n    }\n  },\n};\n\nexport const YamlExportProvider: ExportProvider<'yaml'> = {\n  name: 'YAML',\n  exportFormat: 'yaml',\n  type: 'file',\n};\n\nexport const HclExportProvider: ExportProvider<'hcl'> = {\n  name: 'Terraform (HCL)',\n  exportFormat: 'hcl',\n  type: 'terraform',\n};\n\nexport const allGrafanaExportProviders = {\n  [JsonExportProvider.exportFormat]: JsonExportProvider,\n  [YamlExportProvider.exportFormat]: YamlExportProvider,\n  [HclExportProvider.exportFormat]: HclExportProvider,\n} as const;\n\nexport const jsonAndYamlGrafanaExportProviders = [JsonExportProvider, YamlExportProvider];\n\nexport type ExportFormats = keyof typeof allGrafanaExportProviders;\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, Text, Toggletip, useStyles2, Stack } from '@grafana/ui';\n\ninterface NeedHelpInfoProps {\n  contentText: string | JSX.Element;\n  externalLink?: string;\n  linkText?: string;\n  title: string;\n}\nexport function NeedHelpInfo({ contentText, externalLink, linkText, title }: NeedHelpInfoProps) {\n  const styles = useStyles2(getStyles);\n  return (\n    <Toggletip\n      content={<div className={styles.mutedText}>{contentText}</div>}\n      title={\n        <Stack gap={1} direction=\"row\">\n          <Icon name=\"question-circle\" />\n          {title}\n        </Stack>\n      }\n      footer={\n        externalLink ? (\n          <a href={externalLink} target=\"_blank\" rel=\"noreferrer\">\n            <Stack direction=\"row\" gap={0.5} alignItems=\"center\">\n              <Text color=\"link\">\n                {linkText} <Icon size=\"sm\" name=\"external-link-alt\" />\n              </Text>\n            </Stack>\n          </a>\n        ) : undefined\n      }\n      closeButton={true}\n      placement=\"bottom-start\"\n    >\n      <div className={styles.helpInfo}>\n        <Stack direction=\"row\" alignItems=\"center\" gap={0.5}>\n          <Icon name=\"question-circle\" size=\"sm\" />\n          <Text variant=\"bodySmall\" color=\"primary\">\n            Need help?\n          </Text>\n        </Stack>\n      </div>\n    </Toggletip>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  mutedText: css`\n    color: ${theme.colors.text.secondary};\n    font-size: ${theme.typography.size.sm};\n  `,\n  helpInfo: css`\n    cursor: pointer;\n    text-decoration: underline;\n  `,\n});\n","import { css, cx } from '@emotion/css';\nimport React, { ReactElement } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { FieldSet, Text, useStyles2, Stack } from '@grafana/ui';\n\nexport interface RuleEditorSectionProps {\n  title: string;\n  stepNo: number;\n  description?: string | ReactElement;\n  fullWidth?: boolean;\n}\n\nexport const RuleEditorSection = ({\n  title,\n  stepNo,\n  children,\n  fullWidth = false,\n  description,\n}: React.PropsWithChildren<RuleEditorSectionProps>) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.parent}>\n      <FieldSet\n        className={cx(fullWidth && styles.fullWidth)}\n        label={\n          <Text variant=\"h3\">\n            {stepNo}. {title}\n          </Text>\n        }\n      >\n        <Stack direction=\"column\">\n          {description && <div className={styles.description}>{description}</div>}\n          {children}\n        </Stack>\n      </FieldSet>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  parent: css`\n    display: flex;\n    flex-direction: row;\n    max-width: ${theme.breakpoints.values.xl}px;\n    border: solid 1px ${theme.colors.border.weak};\n    border-radius: ${theme.shape.radius.default};\n    padding: ${theme.spacing(2)} ${theme.spacing(3)};\n  `,\n  description: css`\n    margin-top: -${theme.spacing(2)};\n  `,\n  fullWidth: css`\n    width: 100%;\n  `,\n});\n","import { css } from '@emotion/css';\nimport { dump, load } from 'js-yaml';\nimport React, { useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, CodeEditor, Drawer, Icon, Tab, TabsBar, useStyles2, Tooltip } from '@grafana/ui';\n\nimport { RulerRuleDTO } from '../../../../../types/unified-alerting-dto';\nimport { RuleFormValues } from '../../types/rule-form';\nimport {\n  alertingRulerRuleToRuleForm,\n  formValuesToRulerRuleDTO,\n  recordingRulerRuleToRuleForm,\n} from '../../utils/rule-form';\nimport { isAlertingRulerRule, isRecordingRulerRule } from '../../utils/rules';\n\ninterface Props {\n  onClose: () => void;\n}\n\nconst cloudRulesTabs = [{ label: 'Yaml', value: 'yaml' }];\n\nexport const RuleInspector = ({ onClose }: Props) => {\n  const [activeTab, setActiveTab] = useState('yaml');\n  const { setValue } = useFormContext<RuleFormValues>();\n  const styles = useStyles2(drawerStyles);\n\n  const onApply = (formValues: RuleFormValues) => {\n    // Need to loop through all values and set them individually\n    // TODO this is not type-safe :(\n    for (const key in formValues) {\n      // @ts-ignore\n      setValue(key, formValues[key]);\n    }\n    onClose();\n  };\n\n  return (\n    <Drawer\n      title=\"Inspect Alert rule\"\n      subtitle={\n        <div className={styles.subtitle}>\n          <RuleInspectorTabs tabs={cloudRulesTabs} setActiveTab={setActiveTab} activeTab={activeTab} />\n        </div>\n      }\n      onClose={onClose}\n    >\n      {activeTab === 'yaml' && <InspectorYamlTab onSubmit={onApply} />}\n    </Drawer>\n  );\n};\n\ninterface RuleInspectorTabsProps<T = string> {\n  tabs: Array<{ label: string; value: T }>;\n  activeTab: T;\n  setActiveTab: (tab: T) => void;\n}\n\nexport function RuleInspectorTabs<T extends string>({ tabs, activeTab, setActiveTab }: RuleInspectorTabsProps<T>) {\n  return (\n    <TabsBar>\n      {tabs.map((tab, index) => {\n        return (\n          <Tab\n            key={`${tab.value}-${index}`}\n            label={tab.label}\n            value={tab.value}\n            onChangeTab={() => setActiveTab(tab.value)}\n            active={activeTab === tab.value}\n          />\n        );\n      })}\n    </TabsBar>\n  );\n}\n\ninterface YamlTabProps {\n  onSubmit: (newModel: RuleFormValues) => void;\n}\n\nconst InspectorYamlTab = ({ onSubmit }: YamlTabProps) => {\n  const styles = useStyles2(yamlTabStyle);\n  const { getValues } = useFormContext<RuleFormValues>();\n\n  const yamlValues = formValuesToRulerRuleDTO(getValues());\n  const [alertRuleAsYaml, setAlertRuleAsYaml] = useState(dump(yamlValues));\n\n  const onApply = () => {\n    const rulerRule = load(alertRuleAsYaml) as RulerRuleDTO;\n    const currentFormValues = getValues();\n\n    const yamlFormValues = rulerRuleToRuleFormValues(rulerRule);\n    onSubmit({ ...currentFormValues, ...yamlFormValues });\n  };\n\n  return (\n    <>\n      <div className={styles.applyButton}>\n        <Button type=\"button\" onClick={onApply}>\n          Apply\n        </Button>\n        <Tooltip content={<YamlContentInfo />} theme=\"info\" placement=\"left-start\" interactive={true}>\n          <Icon name=\"exclamation-triangle\" size=\"xl\" />\n        </Tooltip>\n      </div>\n\n      <div className={styles.content}>\n        <AutoSizer disableWidth>\n          {({ height }) => (\n            <CodeEditor\n              width=\"100%\"\n              height={height}\n              language=\"yaml\"\n              value={alertRuleAsYaml}\n              onBlur={setAlertRuleAsYaml}\n              monacoOptions={{\n                minimap: {\n                  enabled: false,\n                },\n              }}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    </>\n  );\n};\n\nfunction YamlContentInfo() {\n  return (\n    <div>\n      The YAML content in the editor only contains alert rule configuration <br />\n      To configure Prometheus, you need to provide the rest of the{' '}\n      <a\n        href=\"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        configuration file content.\n      </a>\n    </div>\n  );\n}\n\nfunction rulerRuleToRuleFormValues(rulerRule: RulerRuleDTO): Partial<RuleFormValues> {\n  if (isAlertingRulerRule(rulerRule)) {\n    return alertingRulerRuleToRuleForm(rulerRule);\n  } else if (isRecordingRulerRule(rulerRule)) {\n    return recordingRulerRuleToRuleForm(rulerRule);\n  }\n\n  return {};\n}\n\nexport const yamlTabStyle = (theme: GrafanaTheme2) => ({\n  content: css`\n    flex-grow: 1;\n    height: 100%;\n    padding-bottom: 16px;\n    margin-bottom: ${theme.spacing(2)};\n  `,\n  applyButton: css`\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    flex-grow: 0;\n    margin-bottom: ${theme.spacing(2)};\n  `,\n});\n\nexport const drawerStyles = () => ({\n  subtitle: css`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  `,\n});\n","import React from 'react';\n\nimport { IconName, Tooltip, LinkButton, Button } from '@grafana/ui';\nimport { PopoverContent, TooltipPlacement } from '@grafana/ui/src/components/Tooltip';\n\ninterface Props {\n  tooltip: PopoverContent;\n  icon: IconName;\n  className?: string;\n  tooltipPlacement?: TooltipPlacement;\n  to?: string;\n  target?: string;\n  onClick?: () => void;\n  'data-testid'?: string;\n}\n\nexport const ActionIcon = ({\n  tooltip,\n  icon,\n  to,\n  target,\n  onClick,\n  className,\n  tooltipPlacement = 'top',\n  ...rest\n}: Props) => {\n  const ariaLabel = typeof tooltip === 'string' ? tooltip : undefined;\n\n  return (\n    <Tooltip content={tooltip} placement={tooltipPlacement}>\n      {to ? (\n        <LinkButton\n          variant=\"secondary\"\n          fill=\"text\"\n          icon={icon}\n          href={to}\n          size=\"sm\"\n          target={target}\n          {...rest}\n          aria-label={ariaLabel}\n        />\n      ) : (\n        <Button\n          className={className}\n          variant=\"secondary\"\n          fill=\"text\"\n          size=\"sm\"\n          icon={icon}\n          type=\"button\"\n          onClick={onClick}\n          {...rest}\n          aria-label={ariaLabel}\n        />\n      )}\n    </Tooltip>\n  );\n};\n","import { useEffect, useRef } from 'react';\nvar useInterval = function (callback, delay) {\n    var savedCallback = useRef(function () { });\n    useEffect(function () {\n        savedCallback.current = callback;\n    });\n    useEffect(function () {\n        if (delay !== null) {\n            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);\n            return function () { return clearInterval(interval_1); };\n        }\n        return undefined;\n    }, [delay]);\n};\nexport default useInterval;\n"],"names":["useCleanup","cleanupAction","dispatch","selectorRef","NoRulesSplash","canCreateGrafanaRules","canCreateCloudRules","styles","getStyles","Stack","EmptyListCTA","CallToActionCard","theme","RuleListErrors","expanded","setExpanded","closed","setClosed","useLocalStorage","dataSourceConfigRequests","useUnifiedAlertingSelector","state","promRuleRequests","rulerRuleRequests","errors","dataSourceConfigErrors","promRequestErrors","rulerRequestErrors","requests","result","dataSource","error","grafanaPromError","grafanaRulerError","ErrorSummaryButton","Alert","item","idx","Button","count","onClick","Tooltip","GrafanaRuleFolderExporter","folder","onClose","activeTab","setActiveTab","GrafanaExportDrawer","GrafanaRuleFolderExportPreview","exportFormat","exportFolderDefinition","isFetching","alertRuleApi","LoadingPlaceholder","downloadFileName","FileExportPreview","GrafanaRuleGroupExporter","folderUid","groupName","GrafanaRuleGroupExportPreview","ruleGroupTextDefinition","ReorderCloudGroupModal","props","group","namespace","pending","setPending","rulesList","setRulesList","onDragEnd","newOrderedRules","reorder","rulesSourceName","rulerRules","rule","rulesWithUID","Modal","ModalHeader","provided","_snapshot","rubric","ListItem","droppableProvided","index","isClone","isDragging","AlertStateTag","Badge","Icon","rules","startIndex","endIndex","removed","RulesGroup","expandAll","viewMode","rulesSource","isEditingGroup","setIsEditingGroup","isDeletingGroup","setIsDeletingGroup","isReorderingGroup","setIsReorderingGroup","isExporting","setIsExporting","isCollapsed","setIsCollapsed","canEditRules","hasRuler","rulerRulesLoaded","useHasRuler","rulerRule","folderUID","useFolder","isDeleting","isFederated","isProvisioned","isListView","isGroupView","deleteGroup","actionIcons","Spinner","baseUrl","ActionIcon","RuleLocation","closeEditModal","saved","CollapseToggle","RulesTable","ConfirmModal","useCombinedGroupNamespace","namespaces","ns","g","CloudRules","dsConfigs","promRules","rulesDataSources","groupsWithNamespaces","dataSourcesLoading","ds","hasSomeResults","hasDataSourcesConfigured","hasDataSourcesLoading","hasNamespaces","numberOfPages","onPageChange","page","pageItems","usePagination","CreateRecordingRuleButton","Pagination","createCloudRuleSupported","createCloudRuleAllowed","location","url","GrafanaRulesExporter","GrafanaRulesExportPreview","rulesDefinition","GrafanaRules","queryParams","useQueryParams","prom","ruler","loading","hasResult","wantsListView","namespacesFormat","exportRulesSupported","exportRulesAllowed","canExportRules","showExportDrawer","toggleShowExportDrawer","useToggle","hasGrafanaAlerts","RuleListGroupView","grafanaNamespaces","cloudNamespaces","sorted","a","b","Authorize","RuleListStateSection","defaultCollapsed","collapsed","setCollapsed","RuleListStateView","filters","groupedRules","MAX_NEEDLE_SIZE","INFO_THRESHOLD","useRulesFilter","updateQueryParams","useURLSearchParams","searchQuery","filterState","hasActiveFilters","filter","updateFilters","newFilter","newSearchQuery","setSearchQuery","legacyFilters","legacyFilter","draft","legacyLabelsAsStrings","name","operator","value","useFilteredRules","filteredRules","filterRules","r","filteredNamespaces","dataSourceFilter","namespaceFilter","namespaceHaystack","ufuzzy","getSearchInstance","idxs","info","order","getOutOfOrderLimit","reduceNamespaces","namespaceAcc","groupNameFilter","filteredGroups","groupsHaystack","reduceGroups","ruleNameQuery","groupAcc","rulesHaystack","promRuleDefition","matchesFilterFor","isQueryingDataSource","ruleHealth","matchers","looseParseMatcher","doRuleLabelsMatchQuery","doAlertsContainMatchingLabels","alert","promRule","match","searchTerm","matcherQuery","searchTermExeedsMaxNeedleSize","query","MultipleDataSourcePicker","dataSourceSrv","setState","onChange","items","actionMeta","selectedItem","dataSourceName","action","dsSettings","getCurrentValue","current","hideTextValue","noDefault","uid","getDataSourceOptions","alerting","tracing","metrics","mixed","dashboard","variables","annotations","pluginId","type","logs","dataSources","alertManagingDs","nonAlertManagingDs","autoFocus","onBlur","onClear","openMenuOnFocus","placeholder","width","inputId","disabled","isLoading","options","isClearable","selectors","o","PluginSignatureBadge","ViewOptions","RuleTypeOptions","RuleHealthOptions","RuleStateOptions","key","RulesFilter","onFilterCleared","setQueryParams","filterKey","setFilterKey","dataSourceKey","queryStringKey","searchQueryRef","handleSubmit","register","setValue","ref","rest","handleDataSourceChange","dataSourceValue","dataSourceNames","handleDashboardChange","dashboardUid","clearDataSource","handleAlertStateChange","handleViewChange","view","handleRuleTypeChange","ruleType","handleRuleHealthChange","handleClearFiltersClick","searchIcon","Field","Label","DashboardPicker","RadioButtonGroup","data","HoverCard","SearchQueryHelp","Input","e","helpStyles","HelpRow","title","expr","VIEWS","LIMIT_ALERTS","RuleList","rulesDataSourceNames","setExpandAll","ViewComponent","promRequests","rulerRequests","allPromLoaded","_","allRulerLoaded","allPromEmpty","allRulerEmpty","limitAlerts","fetchRules","useAsyncFn","useInterval","hasNoAlertRulesCreatedYet","hasAlertRulesCreated","combinedNamespaces","useCombinedRuleNamespaces","AlertingPageWrapper","CreateAlertButton","RuleStats","createRuleSupported","createRuleAllowed","actions","children","alertmanagerActions","isAlertmanagerAction","alertSourceActions","isAlertingAction","AuthorizeAlertmanager","AuthorizeAlertsource","alertmanagerAbilties","actionsAllowed","alertSourceAbilities","abilities","_supported","allowed","format","textDefinition","fileExportPreviewStyles","provider","onDownload","blob","formattedTextDefinition","FileExportInlineDocumentation","height","exportProvider","exportInlineDoc","component","onTabChange","formatProviders","grafanaRulesTabs","JsonExportProvider","raw","YamlExportProvider","HclExportProvider","allGrafanaExportProviders","jsonAndYamlGrafanaExportProviders","NeedHelpInfo","contentText","externalLink","linkText","RuleEditorSection","stepNo","fullWidth","description","cloudRulesTabs","RuleInspector","drawerStyles","onApply","formValues","RuleInspectorTabs","InspectorYamlTab","tabs","tab","onSubmit","yamlTabStyle","getValues","yamlValues","alertRuleAsYaml","setAlertRuleAsYaml","currentFormValues","yamlFormValues","rulerRuleToRuleFormValues","YamlContentInfo","tooltip","icon","to","target","className","tooltipPlacement","ariaLabel","callback","delay","savedCallback","interval_1"],"sourceRoot":""}