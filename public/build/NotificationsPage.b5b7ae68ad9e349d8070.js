"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[743],{13729:(Z,h,t)=>{t.r(h),t.d(h,{NotificationsPage:()=>P,default:()=>_});var a=t(31733),m=t(50186),i=t(76932),N=t(26124),O=t(76067),z=t(49311),H=t(25111),X=t(36356),U=t(51343),j=t(19807),L=t(67302),Y=t(69666),F=t(93978),J=t(79771),I=t(83929),$=t(87882),b=t(17416),C=t(93313),A=t(84195),R=1440,B=2520,S=43200,K=86400;function V(s,c,r){var d,g;(0,A.Z)(2,arguments);var E=(0,j.j)(),n=(d=(g=r?.locale)!==null&&g!==void 0?g:E.locale)!==null&&d!==void 0?d:J.Z;if(!n.formatDistance)throw new RangeError("locale must contain formatDistance property");var v=(0,L.Z)(s,c);if(isNaN(v))throw new RangeError("Invalid time value");var l=(0,b.Z)((0,$.Z)(r),{addSuffix:!!r?.addSuffix,comparison:v}),u,e;v>0?(u=(0,I.Z)(c),e=(0,I.Z)(s)):(u=(0,I.Z)(s),e=(0,I.Z)(c));var f=(0,F.Z)(e,u),M=((0,C.Z)(e)-(0,C.Z)(u))/1e3,o=Math.round((f-M)/60),p;if(o<2)return r!=null&&r.includeSeconds?f<5?n.formatDistance("lessThanXSeconds",5,l):f<10?n.formatDistance("lessThanXSeconds",10,l):f<20?n.formatDistance("lessThanXSeconds",20,l):f<40?n.formatDistance("halfAMinute",0,l):f<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):o===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",o,l);if(o<45)return n.formatDistance("xMinutes",o,l);if(o<90)return n.formatDistance("aboutXHours",1,l);if(o<R){var ee=Math.round(o/60);return n.formatDistance("aboutXHours",ee,l)}else{if(o<B)return n.formatDistance("xDays",1,l);if(o<S){var te=Math.round(o/R);return n.formatDistance("xDays",te,l)}else if(o<K)return p=Math.round(o/S),n.formatDistance("aboutXMonths",p,l)}if(p=(0,Y.Z)(e,u),p<12){var ne=Math.round(o/S);return n.formatDistance("xMonths",ne,l)}else{var W=p%12,y=Math.floor(p/12);return W<3?n.formatDistance("aboutXYears",y,l):W<9?n.formatDistance("overXYears",y,l):n.formatDistance("almostXYears",y+1,l)}}function w(s,c){return(0,A.Z)(1,arguments),V(s,Date.now(),c)}var x=t(96305);const G=({children:s,className:c,isSelected:r,onClick:d,severity:g="error",title:E,traceId:n,timestamp:v})=>{const l=(0,O.l4)(),u=Q(l);return a.createElement(x.Z,{className:c,onClick:d},a.createElement(x.Z.Heading,null,E),a.createElement(x.Z.Description,null,s),a.createElement(x.Z.Figure,null,a.createElement(X.X,{onChange:d,tabIndex:-1,value:r})),a.createElement(x.Z.Tags,{className:u.trace},n&&a.createElement("span",null,`Trace ID: ${n}`),v&&w(v,{addSuffix:!0})))},Q=s=>({trace:(0,i.css)({alignItems:"flex-end",alignSelf:"flex-end",color:s.colors.text.secondary,display:"flex",flexDirection:"column",fontSize:s.typography.pxToRem(10),justifySelf:"flex-end"})});var D=t(43025),T=t(42342);function k(){const s=(0,T.useDispatch)(),c=(0,T.useSelector)(e=>(0,D.mE)(e.appNotifications)),[r,d]=(0,a.useState)([]),g=c.every(e=>r.includes(e.id)),E=(0,a.useRef)((0,T.useSelector)(e=>(0,D.Av)(e.appNotifications))),n=(0,O.wW)(q);(0,N.Z)(()=>{s((0,D.Jk)(Date.now()))});const v=()=>{g?s((0,D.F6)()):r.forEach(e=>{s((0,D.hS)(e))}),d([])},l=e=>{d(e?c.map(f=>f.id):[])},u=e=>{d(f=>f.includes(e)?f.filter(M=>M!==e):[...f,e])};return c.length===0?a.createElement("div",{className:n.noNotifsWrapper},a.createElement(z.J,{name:"bell",size:"xxl"}),a.createElement("span",null,"Notifications you have received will appear here.")):a.createElement("div",{className:n.wrapper},a.createElement(H.b,{severity:"info",title:"This page displays past errors and warnings. Once dismissed, they cannot be retrieved."}),a.createElement("div",{className:n.topRow},a.createElement(X.X,{value:g,onChange:e=>l(e.target.checked)}),a.createElement(U.zx,{disabled:r.length===0,onClick:v},"Dismiss notifications")),a.createElement("ul",{className:n.list},c.map(e=>a.createElement("li",{key:e.id,className:n.listItem},a.createElement(G,{className:(0,i.cx)({[n.newItem]:e.timestamp>E.current}),isSelected:r.includes(e.id),onClick:()=>u(e.id),severity:e.severity,title:e.title,timestamp:e.timestamp,traceId:e.traceId},a.createElement("span",null,e.text))))))}function q(s){return{topRow:(0,i.css)({alignItems:"center",display:"flex",gap:s.spacing(2)}),list:(0,i.css)({display:"flex",flexDirection:"column"}),listItem:(0,i.css)({alignItems:"center",display:"flex",gap:s.spacing(2),listStyle:"none",position:"relative"}),newItem:(0,i.css)({"&::before":{content:'""',height:"100%",position:"absolute",left:"-7px",top:0,background:s.colors.gradients.brandVertical,width:s.spacing(.5),borderRadius:s.shape.radius.default}}),noNotifsWrapper:(0,i.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:s.spacing(1)}),wrapper:(0,i.css)({display:"flex",flexDirection:"column",gap:s.spacing(2)})}}const P=()=>a.createElement(m.T,{navId:"profile/notifications"},a.createElement(m.T.Contents,null,a.createElement(k,null))),_=P},17416:(Z,h,t)=>{t.d(h,{Z:()=>a});function a(m,i){if(m==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var N in i)Object.prototype.hasOwnProperty.call(i,N)&&(m[N]=i[N]);return m}},87882:(Z,h,t)=>{t.d(h,{Z:()=>m});var a=t(17416);function m(i){return(0,a.Z)({},i)}}}]);

//# sourceMappingURL=NotificationsPage.b5b7ae68ad9e349d8070.js.map