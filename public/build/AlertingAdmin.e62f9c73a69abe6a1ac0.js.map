{"version":3,"file":"AlertingAdmin.e62f9c73a69abe6a1ac0.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/components/admin/ConfigEditor.tsx","webpack://grafana/./public/app/features/alerting/unified/components/admin/AlertmanagerConfigSelector.tsx","webpack://grafana/./public/app/features/alerting/unified/components/admin/AlertmanagerConfig.tsx","webpack://grafana/./public/app/features/alerting/unified/api/dataSourcesApi.ts","webpack://grafana/./public/app/features/alerting/unified/hooks/useExternalAmSelector.ts","webpack://grafana/./public/app/features/alerting/unified/components/admin/ExternalAlertmanagerDataSources.tsx","webpack://grafana/./public/app/features/alerting/unified/components/admin/ExternalAlertmanagers.tsx","webpack://grafana/./public/app/features/alerting/unified/Admin.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useAlertmanagerConfig.ts"],"sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { Button, CodeEditor, ConfirmModal, Field, Stack } from '@grafana/ui';\n\nimport { GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\n\nimport { FormValues } from './AlertmanagerConfig';\n\ninterface ConfigEditorProps {\n  defaultValues: { configJSON: string };\n  readOnly: boolean;\n  loading: boolean;\n  alertManagerSourceName?: string;\n  onSubmit: (values: FormValues) => void;\n  showConfirmDeleteAMConfig?: boolean;\n  onReset?: () => void;\n  onConfirmReset?: () => void;\n  onDismiss?: () => void;\n}\n\nexport const ConfigEditor = ({\n  defaultValues,\n  readOnly,\n  loading,\n  alertManagerSourceName,\n  showConfirmDeleteAMConfig,\n  onSubmit,\n  onReset,\n  onConfirmReset,\n  onDismiss,\n}: ConfigEditorProps) => {\n  const {\n    handleSubmit,\n    formState: { errors },\n    setValue,\n    register,\n  } = useForm({ defaultValues });\n\n  register('configJSON', {\n    required: { value: true, message: 'Required' },\n    validate: (value: string) => {\n      try {\n        JSON.parse(value);\n        return true;\n      } catch (e) {\n        return e instanceof Error ? e.message : 'JSON is invalid';\n      }\n    },\n  });\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} key={defaultValues.configJSON}>\n      <Field\n        disabled={loading}\n        label=\"Configuration\"\n        invalid={!!errors.configJSON}\n        error={errors.configJSON?.message}\n        data-testid={readOnly ? 'readonly-config' : 'config'}\n      >\n        <CodeEditor\n          language=\"json\"\n          width=\"100%\"\n          height={500}\n          showLineNumbers={true}\n          value={defaultValues.configJSON}\n          showMiniMap={false}\n          onSave={(value) => {\n            setValue('configJSON', value);\n          }}\n          onBlur={(value) => {\n            setValue('configJSON', value);\n          }}\n          readOnly={readOnly}\n        />\n      </Field>\n\n      {!readOnly && (\n        <Stack gap={1}>\n          <Button type=\"submit\" variant=\"primary\" disabled={loading}>\n            Save configuration\n          </Button>\n          {onReset && (\n            <Button type=\"button\" disabled={loading} variant=\"destructive\" onClick={onReset}>\n              Reset configuration\n            </Button>\n          )}\n        </Stack>\n      )}\n\n      {Boolean(showConfirmDeleteAMConfig) && onConfirmReset && onDismiss && (\n        <ConfirmModal\n          isOpen={true}\n          title=\"Reset Alertmanager configuration\"\n          body={`Are you sure you want to reset configuration ${\n            alertManagerSourceName === GRAFANA_RULES_SOURCE_NAME\n              ? 'for the Grafana Alertmanager'\n              : `for \"${alertManagerSourceName}\"`\n          }? Contact points and notification policies will be reset to their defaults.`}\n          confirmText=\"Yes, reset configuration\"\n          onConfirm={onConfirmReset}\n          onDismiss={onDismiss}\n        />\n      )}\n    </form>\n  );\n};\n","import { css } from '@emotion/css';\nimport React, { useMemo } from 'react';\n\nimport { dateTime, GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Button, HorizontalGroup, Select, useStyles2 } from '@grafana/ui';\nimport { AlertManagerCortexConfig } from 'app/plugins/datasource/alertmanager/types';\n\nimport { alertmanagerApi } from '../../api/alertmanagerApi';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\n\nimport { FormValues } from './AlertmanagerConfig';\nimport { ConfigEditor } from './ConfigEditor';\n\nexport interface ValidAmConfigOption {\n  label?: string;\n  value?: AlertManagerCortexConfig;\n}\n\ninterface AlertmanagerConfigSelectorProps {\n  onChange: (selectedOption: ValidAmConfigOption) => void;\n  selectedAmConfig?: ValidAmConfigOption;\n  defaultValues: FormValues;\n  onSubmit: (values: FormValues, oldConfig?: AlertManagerCortexConfig) => void;\n  readOnly: boolean;\n  loading: boolean;\n}\n\nexport default function AlertmanagerConfigSelector({\n  onChange,\n  selectedAmConfig,\n  defaultValues,\n  onSubmit,\n  readOnly,\n  loading,\n}: AlertmanagerConfigSelectorProps): JSX.Element {\n  const { useGetValidAlertManagersConfigQuery, useResetAlertManagerConfigToOldVersionMutation } = alertmanagerApi;\n\n  const styles = useStyles2(getStyles);\n\n  const { currentData: validAmConfigs, isLoading: isFetchingValidAmConfigs } = useGetValidAlertManagersConfigQuery();\n\n  const [resetAlertManagerConfigToOldVersion] = useResetAlertManagerConfigToOldVersionMutation();\n\n  const validAmConfigsOptions = useMemo(() => {\n    if (!validAmConfigs?.length) {\n      return [];\n    }\n\n    const configs: ValidAmConfigOption[] = validAmConfigs.map((config) => {\n      const date = new Date(config.last_applied!);\n      return {\n        label: config.last_applied\n          ? `Config from ${date.toLocaleString()} (${dateTime(date).locale('en').fromNow(true)} ago)`\n          : 'Previous config',\n        value: config,\n      };\n    });\n    onChange(configs[0]);\n    return configs;\n  }, [validAmConfigs, onChange]);\n\n  const onResetClick = async () => {\n    const id = selectedAmConfig?.value?.id;\n    if (id === undefined) {\n      return;\n    }\n\n    resetAlertManagerConfigToOldVersion({ id });\n  };\n\n  return (\n    <>\n      {!isFetchingValidAmConfigs && validAmConfigs && validAmConfigs.length > 0 ? (\n        <>\n          <div>Select a previous working configuration until you fix this error:</div>\n\n          <div className={styles.container}>\n            <HorizontalGroup align=\"flex-start\" spacing=\"md\">\n              <Select\n                options={validAmConfigsOptions}\n                value={selectedAmConfig}\n                onChange={(value: SelectableValue) => {\n                  onChange(value);\n                }}\n              />\n\n              <Button variant=\"primary\" disabled={loading} onClick={onResetClick}>\n                Reset to selected configuration\n              </Button>\n            </HorizontalGroup>\n          </div>\n\n          <ConfigEditor\n            defaultValues={defaultValues}\n            onSubmit={(values) => onSubmit(values)}\n            readOnly={readOnly}\n            loading={loading}\n            alertManagerSourceName={GRAFANA_RULES_SOURCE_NAME}\n          />\n        </>\n      ) : null}\n    </>\n  );\n}\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    margin-top: ${theme.spacing(2)};\n    margin-bottom: ${theme.spacing(2)};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useState, useMemo } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, useStyles2 } from '@grafana/ui';\nimport { useDispatch } from 'app/types';\n\nimport { useAlertmanagerConfig } from '../../hooks/useAlertmanagerConfig';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { useAlertmanager } from '../../state/AlertmanagerContext';\nimport { deleteAlertManagerConfigAction, updateAlertManagerConfigAction } from '../../state/actions';\nimport { GRAFANA_RULES_SOURCE_NAME, isVanillaPrometheusAlertManagerDataSource } from '../../utils/datasource';\n\nimport AlertmanagerConfigSelector, { ValidAmConfigOption } from './AlertmanagerConfigSelector';\nimport { ConfigEditor } from './ConfigEditor';\n\nexport interface FormValues {\n  configJSON: string;\n}\n\nexport default function AlertmanagerConfig(): JSX.Element {\n  const dispatch = useDispatch();\n\n  const [showConfirmDeleteAMConfig, setShowConfirmDeleteAMConfig] = useState(false);\n  const { loading: isDeleting } = useUnifiedAlertingSelector((state) => state.deleteAMConfig);\n  const { loading: isSaving } = useUnifiedAlertingSelector((state) => state.saveAMConfig);\n  const { selectedAlertmanager } = useAlertmanager();\n\n  const readOnly = selectedAlertmanager ? isVanillaPrometheusAlertManagerDataSource(selectedAlertmanager) : false;\n  const styles = useStyles2(getStyles);\n\n  const [selectedAmConfig, setSelectedAmConfig] = useState<ValidAmConfigOption | undefined>();\n\n  const {\n    currentData: config,\n    error: loadingError,\n    isLoading: isLoadingConfig,\n  } = useAlertmanagerConfig(selectedAlertmanager);\n\n  const resetConfig = () => {\n    if (selectedAlertmanager) {\n      dispatch(deleteAlertManagerConfigAction(selectedAlertmanager));\n    }\n    setShowConfirmDeleteAMConfig(false);\n  };\n\n  const defaultValues = useMemo(\n    (): FormValues => ({\n      configJSON: config ? JSON.stringify(config, null, 2) : '',\n    }),\n    [config]\n  );\n\n  const defaultValidValues = useMemo(\n    (): FormValues => ({\n      configJSON: selectedAmConfig ? JSON.stringify(selectedAmConfig.value, null, 2) : '',\n    }),\n    [selectedAmConfig]\n  );\n\n  const loading = isDeleting || isLoadingConfig || isSaving;\n\n  const onSubmit = (values: FormValues) => {\n    if (selectedAlertmanager && config) {\n      dispatch(\n        updateAlertManagerConfigAction({\n          newConfig: JSON.parse(values.configJSON),\n          oldConfig: config,\n          alertManagerSourceName: selectedAlertmanager,\n          successMessage: 'Alertmanager configuration updated.',\n        })\n      );\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      {loadingError && !loading && (\n        <>\n          <Alert\n            severity=\"error\"\n            title=\"Your Alertmanager configuration is incorrect. These are the details of the error:\"\n          >\n            {loadingError.message || 'Unknown error.'}\n          </Alert>\n\n          {selectedAlertmanager === GRAFANA_RULES_SOURCE_NAME && (\n            <AlertmanagerConfigSelector\n              onChange={setSelectedAmConfig}\n              selectedAmConfig={selectedAmConfig}\n              defaultValues={defaultValidValues}\n              readOnly={true}\n              loading={loading}\n              onSubmit={onSubmit}\n            />\n          )}\n        </>\n      )}\n      {isDeleting && selectedAlertmanager !== GRAFANA_RULES_SOURCE_NAME && (\n        <Alert severity=\"info\" title=\"Resetting Alertmanager configuration\">\n          It might take a while...\n        </Alert>\n      )}\n      {selectedAlertmanager && config && (\n        <ConfigEditor\n          defaultValues={defaultValues}\n          onSubmit={(values) => onSubmit(values)}\n          readOnly={readOnly}\n          loading={loading}\n          alertManagerSourceName={selectedAlertmanager}\n          showConfirmDeleteAMConfig={showConfirmDeleteAMConfig}\n          onReset={() => setShowConfirmDeleteAMConfig(true)}\n          onConfirmReset={resetConfig}\n          onDismiss={() => setShowConfirmDeleteAMConfig(false)}\n        />\n      )}\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    margin-bottom: ${theme.spacing(4)};\n  `,\n});\n","import { DataSourceJsonData, DataSourceSettings } from '@grafana/data';\n\nimport { alertingApi } from './alertingApi';\n\nexport const dataSourcesApi = alertingApi.injectEndpoints({\n  endpoints: (build) => ({\n    getAllDataSourceSettings: build.query<Array<DataSourceSettings<DataSourceJsonData>>, void>({\n      query: () => ({ url: 'api/datasources' }),\n      // we'll create individual cache entries for each datasource UID\n      providesTags: (result) => {\n        return result ? result.map(({ uid }) => ({ type: 'DataSourceSettings', id: uid })) : ['DataSourceSettings'];\n      },\n    }),\n  }),\n});\n","import { DataSourceSettings } from '@grafana/data';\nimport { AlertManagerDataSourceJsonData, ExternalAlertmanagers } from 'app/plugins/datasource/alertmanager/types';\n\nimport { alertmanagerApi } from '../api/alertmanagerApi';\nimport { dataSourcesApi } from '../api/dataSourcesApi';\nimport { isAlertmanagerDataSource } from '../utils/datasource';\n\ntype ConnectionStatus = 'active' | 'pending' | 'dropped' | 'inconclusive' | 'uninterested' | 'unknown';\n\nexport interface ExternalAlertmanagerDataSourceWithStatus {\n  dataSourceSettings: DataSourceSettings<AlertManagerDataSourceJsonData>;\n  status: ConnectionStatus;\n}\n\n/**\n * Returns all configured Alertmanager data sources and their connection status with the internal ruler\n */\nexport function useExternalDataSourceAlertmanagers(): ExternalAlertmanagerDataSourceWithStatus[] {\n  // firstly we'll fetch the settings for all datasources and filter for \"alertmanager\" type\n  const { alertmanagerDataSources } = dataSourcesApi.endpoints.getAllDataSourceSettings.useQuery(undefined, {\n    refetchOnReconnect: true,\n    selectFromResult: (result) => {\n      const alertmanagerDataSources = result.currentData?.filter(isAlertmanagerDataSource) ?? [];\n      return { ...result, alertmanagerDataSources };\n    },\n  });\n\n  // we'll also fetch the configuration for which Alertmanagers we are forwarding Grafana-managed alerts too\n  // @TODO use polling when we have one or more alertmanagers in pending state\n  const { currentData: externalAlertmanagers } = alertmanagerApi.endpoints.getExternalAlertmanagers.useQuery(\n    undefined,\n    { refetchOnReconnect: true }\n  );\n\n  if (!alertmanagerDataSources) {\n    return [];\n  }\n\n  return alertmanagerDataSources.map<ExternalAlertmanagerDataSourceWithStatus>((dataSourceSettings) => {\n    const status = externalAlertmanagers\n      ? determineAlertmanagerConnectionStatus(externalAlertmanagers, dataSourceSettings)\n      : 'unknown';\n\n    return {\n      dataSourceSettings,\n      status,\n    };\n  });\n}\n\n// using the information from /api/v1/ngalert/alertmanagers we should derive the connection status of a single data source\nfunction determineAlertmanagerConnectionStatus(\n  externalAlertmanagers: ExternalAlertmanagers,\n  dataSourceSettings: DataSourceSettings<AlertManagerDataSourceJsonData>\n): ConnectionStatus {\n  const isInterestedInAlerts = dataSourceSettings.jsonData.handleGrafanaManagedAlerts;\n  if (!isInterestedInAlerts) {\n    return 'uninterested';\n  }\n\n  const isActive =\n    externalAlertmanagers?.activeAlertManagers.some((am) => {\n      return isAlertmanagerMatchByURL(dataSourceSettings.url, am.url);\n    }) ?? [];\n\n  const isDropped =\n    externalAlertmanagers?.droppedAlertManagers.some((am) => {\n      return isAlertmanagerMatchByURL(dataSourceSettings.url, am.url);\n    }) ?? [];\n\n  // the Alertmanager is being adopted (pending) if it is interested in handling alerts but not in either \"active\" or \"dropped\"\n  const isPending = !isActive && !isDropped;\n  if (isPending) {\n    return 'pending';\n  }\n\n  // Multiple Alertmanagers of the same URL may exist (e.g. with different credentials)\n  // Alertmanager response only contains URLs, so when the URL exists in both active and dropped, we are not able\n  // to distinguish which is which, resulting in an inconclusive status.\n  const isInconclusive = isActive && isDropped;\n  if (isInconclusive) {\n    return 'inconclusive';\n  }\n\n  // if we get here, it's neither \"uninterested\", nor \"inconclusive\" nor \"pending\"\n  if (isActive) {\n    return 'active';\n  } else if (isDropped) {\n    return 'dropped';\n  }\n\n  return 'unknown';\n}\n\n// the vanilla Alertmanager and Mimir Alertmanager mount their API endpoints on different sub-paths\n// Cortex also uses the same paths as Mimir\nconst MIMIR_ALERTMANAGER_PATH = '/alertmanager/api/v2/alerts';\nconst VANILLA_ALERTMANAGER_PATH = '/api/v2/alerts';\n\n// when using the Mimir Alertmanager, those paths are mounted under \"/alertmanager\"\nfunction isAlertmanagerMatchByURL(dataSourceUrl: string, alertmanagerUrl: string) {\n  const normalizedUrl = normalizeDataSourceURL(dataSourceUrl);\n\n  const prometheusAlertmanagerMatch = alertmanagerUrl === `${normalizedUrl}${VANILLA_ALERTMANAGER_PATH}`;\n  const mimirAlertmanagerMatch = alertmanagerUrl === `${normalizedUrl}${MIMIR_ALERTMANAGER_PATH}`;\n\n  return prometheusAlertmanagerMatch || mimirAlertmanagerMatch;\n}\n\n// Grafana prepends the http protocol if there isn't one, but it doesn't store that in the datasource settings\nfunction normalizeDataSourceURL(url: string) {\n  const hasProtocol = new RegExp('^[^:]*://').test(url);\n  return hasProtocol ? url : `http://${url}`;\n}\n","import { css } from '@emotion/css';\nimport { capitalize } from 'lodash';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Badge, CallToActionCard, Card, Icon, LinkButton, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { ExternalAlertmanagerDataSourceWithStatus } from '../../hooks/useExternalAmSelector';\nimport { makeDataSourceLink } from '../../utils/misc';\n\nexport interface ExternalAlertManagerDataSourcesProps {\n  alertmanagers: ExternalAlertmanagerDataSourceWithStatus[];\n  inactive: boolean;\n}\n\nexport function ExternalAlertmanagerDataSources({ alertmanagers, inactive }: ExternalAlertManagerDataSourcesProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <>\n      <h5>Alertmanagers Receiving Grafana-managed alerts</h5>\n      <div className={styles.muted}>\n        Alertmanager data sources support a configuration setting that allows you to choose to send Grafana-managed\n        alerts to that Alertmanager. <br />\n        Below, you can see the list of all Alertmanager data sources that have this setting enabled.\n      </div>\n      {alertmanagers.length === 0 && (\n        <CallToActionCard\n          message={\n            <div>\n              There are no Alertmanager data sources configured to receive Grafana-managed alerts. <br />\n              You can change this by selecting Receive Grafana Alerts in a data source configuration.\n            </div>\n          }\n          callToActionElement={<LinkButton href=\"/datasources\">Go to data sources</LinkButton>}\n          className={styles.externalDsCTA}\n        />\n      )}\n      {alertmanagers.length > 0 && (\n        <div className={styles.externalDs}>\n          {alertmanagers.map((am) => (\n            <ExternalAMdataSourceCard key={am.dataSourceSettings.uid} alertmanager={am} inactive={inactive} />\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n\ninterface ExternalAMdataSourceCardProps {\n  alertmanager: ExternalAlertmanagerDataSourceWithStatus;\n  inactive: boolean;\n}\n\nexport function ExternalAMdataSourceCard({ alertmanager, inactive }: ExternalAMdataSourceCardProps) {\n  const styles = useStyles2(getStyles);\n\n  const { dataSourceSettings, status } = alertmanager;\n\n  return (\n    <Card>\n      <Card.Heading className={styles.externalHeading}>\n        {dataSourceSettings.name}{' '}\n        {status === 'inconclusive' && (\n          <Tooltip content=\"Multiple Alertmanagers have the same URL configured. The state might be inconclusive.\">\n            <Icon name=\"exclamation-triangle\" size=\"md\" className={styles.externalWarningIcon} />\n          </Tooltip>\n        )}\n      </Card.Heading>\n      <Card.Figure>\n        <img\n          src=\"public/app/plugins/datasource/alertmanager/img/logo.svg\"\n          alt=\"\"\n          height=\"40px\"\n          width=\"40px\"\n          style={{ objectFit: 'contain' }}\n        />\n      </Card.Figure>\n      <Card.Tags>\n        {inactive ? (\n          <Badge\n            text=\"Inactive\"\n            color=\"red\"\n            tooltip=\"Grafana is configured to send alerts to the built-in internal Alertmanager only. External Alertmanagers do not receive any alerts.\"\n          />\n        ) : (\n          <Badge\n            text={capitalize(status)}\n            color={status === 'dropped' ? 'red' : status === 'active' ? 'green' : 'orange'}\n          />\n        )}\n      </Card.Tags>\n      <Card.Meta>{dataSourceSettings.url}</Card.Meta>\n      <Card.Actions>\n        <LinkButton href={makeDataSourceLink(dataSourceSettings.uid)} size=\"sm\" variant=\"secondary\">\n          Go to datasource\n        </LinkButton>\n      </Card.Actions>\n    </Card>\n  );\n}\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  muted: css`\n    font-size: ${theme.typography.bodySmall.fontSize};\n    line-height: ${theme.typography.bodySmall.lineHeight};\n    color: ${theme.colors.text.secondary};\n  `,\n  externalHeading: css`\n    justify-content: flex-start;\n  `,\n  externalWarningIcon: css`\n    margin: ${theme.spacing(0, 1)};\n    fill: ${theme.colors.warning.main};\n  `,\n  externalDs: css`\n    display: grid;\n    gap: ${theme.spacing(1)};\n    padding: ${theme.spacing(2, 0)};\n  `,\n  externalDsCTA: css`\n    margin: ${theme.spacing(2, 0)};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useEffect } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Alert, Field, RadioButtonGroup, useStyles2 } from '@grafana/ui';\nimport { loadDataSources } from 'app/features/datasources/state/actions';\nimport { AlertmanagerChoice } from 'app/plugins/datasource/alertmanager/types';\nimport { useDispatch } from 'app/types';\n\nimport { alertmanagerApi } from '../../api/alertmanagerApi';\nimport { useExternalDataSourceAlertmanagers } from '../../hooks/useExternalAmSelector';\n\nimport { ExternalAlertmanagerDataSources } from './ExternalAlertmanagerDataSources';\n\nconst alertmanagerChoices: Array<SelectableValue<AlertmanagerChoice>> = [\n  { value: AlertmanagerChoice.Internal, label: 'Only Internal' },\n  { value: AlertmanagerChoice.External, label: 'Only External' },\n  { value: AlertmanagerChoice.All, label: 'Both internal and external' },\n];\n\nexport const ExternalAlertmanagers = () => {\n  const styles = useStyles2(getStyles);\n  const dispatch = useDispatch();\n\n  const externalDsAlertManagers = useExternalDataSourceAlertmanagers();\n  const gmaHandlingAlertmanagers = externalDsAlertManagers.filter(\n    (settings) => settings.dataSourceSettings.jsonData.handleGrafanaManagedAlerts === true\n  );\n\n  const {\n    useSaveExternalAlertmanagersConfigMutation,\n    useGetExternalAlertmanagerConfigQuery,\n    useGetExternalAlertmanagersQuery,\n  } = alertmanagerApi;\n\n  const [saveExternalAlertManagers] = useSaveExternalAlertmanagersConfigMutation();\n  const { currentData: externalAlertmanagerConfig } = useGetExternalAlertmanagerConfigQuery();\n\n  // Just to refresh the status periodically\n  useGetExternalAlertmanagersQuery(undefined, { pollingInterval: 5000 });\n\n  const alertmanagersChoice = externalAlertmanagerConfig?.alertmanagersChoice;\n\n  useEffect(() => {\n    dispatch(loadDataSources());\n  }, [dispatch]);\n\n  const onChangeAlertmanagerChoice = (alertmanagersChoice: AlertmanagerChoice) => {\n    saveExternalAlertManagers({ alertmanagersChoice });\n  };\n\n  return (\n    <div>\n      <h4>External Alertmanagers</h4>\n      <Alert title=\"External Alertmanager changes\" severity=\"info\">\n        The way you configure external Alertmanagers has changed.\n        <br />\n        You can now use configured Alertmanager data sources as receivers of your Grafana-managed alerts.\n        <br />\n        For more information, refer to our documentation.\n      </Alert>\n\n      <div className={styles.amChoice}>\n        <Field\n          label=\"Send alerts to\"\n          description=\"Configures how the Grafana alert rule evaluation engine Alertmanager handles your alerts. Internal (Grafana built-in Alertmanager), External (All Alertmanagers configured below), or both.\"\n        >\n          <RadioButtonGroup\n            options={alertmanagerChoices}\n            value={alertmanagersChoice}\n            onChange={(value) => onChangeAlertmanagerChoice(value!)}\n          />\n        </Field>\n      </div>\n\n      <ExternalAlertmanagerDataSources\n        alertmanagers={gmaHandlingAlertmanagers}\n        inactive={alertmanagersChoice === AlertmanagerChoice.Internal}\n      />\n    </div>\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  url: css`\n    margin-right: ${theme.spacing(1)};\n  `,\n  actions: css`\n    margin-top: ${theme.spacing(2)};\n    display: flex;\n    justify-content: flex-end;\n  `,\n  table: css`\n    margin-bottom: ${theme.spacing(2)};\n  `,\n  amChoice: css`\n    margin-bottom: ${theme.spacing(4)};\n  `,\n});\n","import React from 'react';\n\nimport { AlertmanagerPageWrapper } from './components/AlertingPageWrapper';\nimport AlertmanagerConfig from './components/admin/AlertmanagerConfig';\nimport { ExternalAlertmanagers } from './components/admin/ExternalAlertmanagers';\nimport { useAlertmanager } from './state/AlertmanagerContext';\nimport { GRAFANA_RULES_SOURCE_NAME } from './utils/datasource';\n\nexport default function Admin(): JSX.Element {\n  return (\n    <AlertmanagerPageWrapper navId=\"alerting-admin\" accessType=\"notification\">\n      <AdminPageContents />\n    </AlertmanagerPageWrapper>\n  );\n}\n\nfunction AdminPageContents() {\n  const { selectedAlertmanager } = useAlertmanager();\n  const isGrafanaAmSelected = selectedAlertmanager === GRAFANA_RULES_SOURCE_NAME;\n\n  return (\n    <>\n      <AlertmanagerConfig test-id=\"admin-alertmanagerconfig\" />\n      {isGrafanaAmSelected && <ExternalAlertmanagers test-id=\"admin-externalalertmanagers\" />}\n    </>\n  );\n}\n","import { SerializedError } from '@reduxjs/toolkit';\n\nimport { alertmanagerApi } from '../api/alertmanagerApi';\n\ntype Options = {\n  refetchOnFocus: boolean;\n  refetchOnReconnect: boolean;\n};\n\n// TODO refactor this so we can just call \"alertmanagerApi.endpoints.getAlertmanagerConfiguration\" everywhere\n// and remove this hook since it adds little value\nexport function useAlertmanagerConfig(amSourceName?: string, options?: Options) {\n  const fetchConfig = alertmanagerApi.endpoints.getAlertmanagerConfiguration.useQuery(amSourceName ?? '', {\n    ...options,\n    skip: !amSourceName,\n  });\n\n  return {\n    ...fetchConfig,\n    // TODO refactor to get rid of this type assertion\n    error: fetchConfig.error as SerializedError,\n  };\n}\n"],"names":["ConfigEditor","defaultValues","readOnly","loading","alertManagerSourceName","showConfirmDeleteAMConfig","onSubmit","onReset","onConfirmReset","onDismiss","handleSubmit","errors","setValue","register","value","e","Field","CodeEditor","Stack","Button","ConfirmModal","AlertmanagerConfigSelector","onChange","selectedAmConfig","useGetValidAlertManagersConfigQuery","useResetAlertManagerConfigToOldVersionMutation","alertmanagerApi","styles","getStyles","validAmConfigs","isFetchingValidAmConfigs","resetAlertManagerConfigToOldVersion","validAmConfigsOptions","configs","config","date","onResetClick","id","Select","values","theme","AlertmanagerConfig","dispatch","setShowConfirmDeleteAMConfig","isDeleting","useUnifiedAlertingSelector","state","isSaving","selectedAlertmanager","setSelectedAmConfig","loadingError","isLoadingConfig","useAlertmanagerConfig","resetConfig","defaultValidValues","Alert","dataSourcesApi","alertingApi","build","result","uid","useExternalDataSourceAlertmanagers","alertmanagerDataSources","externalAlertmanagers","dataSourceSettings","status","determineAlertmanagerConnectionStatus","isActive","am","isAlertmanagerMatchByURL","isDropped","MIMIR_ALERTMANAGER_PATH","VANILLA_ALERTMANAGER_PATH","dataSourceUrl","alertmanagerUrl","normalizedUrl","normalizeDataSourceURL","prometheusAlertmanagerMatch","mimirAlertmanagerMatch","url","ExternalAlertmanagerDataSources","alertmanagers","inactive","CallToActionCard","ExternalAMdataSourceCard","alertmanager","Card","Tooltip","Icon","Badge","alertmanagerChoices","ExternalAlertmanagers","gmaHandlingAlertmanagers","settings","useSaveExternalAlertmanagersConfigMutation","useGetExternalAlertmanagerConfigQuery","useGetExternalAlertmanagersQuery","saveExternalAlertManagers","externalAlertmanagerConfig","alertmanagersChoice","onChangeAlertmanagerChoice","RadioButtonGroup","Admin","AdminPageContents","isGrafanaAmSelected","amSourceName","options","fetchConfig"],"sourceRoot":""}